<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":{"enable":false,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì˜ ì£¼ì œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°ì…ë‹ˆë‹¤. IT ì¸í”„ë¼ì— ëŒ€í•œ ì „ë¬¸ ì¸ë ¥ì´ ì•„ë‹Œ ì¼ë°˜ ê°œë°œìê°€ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´í•´í•˜ê³  êµ¬ì„±í•˜ê¸°ê¹Œì§€ëŠ” ìƒê°ë³´ë‹¤ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì–´ë µì§€ ì•Šì•„ì„œ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì •ì˜í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ì¸ìŠ¤í„´ìŠ¤ë¥¼"><meta property="og:type" content="website"><meta property="og:title" content="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°"><meta property="og:url" content="https://kdevkr.github.io/archive/setup-kubernetes-cluster.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì˜ ì£¼ì œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°ì…ë‹ˆë‹¤. IT ì¸í”„ë¼ì— ëŒ€í•œ ì „ë¬¸ ì¸ë ¥ì´ ì•„ë‹Œ ì¼ë°˜ ê°œë°œìê°€ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´í•´í•˜ê³  êµ¬ì„±í•˜ê¸°ê¹Œì§€ëŠ” ìƒê°ë³´ë‹¤ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì–´ë µì§€ ì•Šì•„ì„œ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì •ì˜í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ì¸ìŠ¤í„´ìŠ¤ë¥¼"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-01.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-02.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-03.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-03.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-04.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-05.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-06.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-07.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-02.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-01.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-02.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-03.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-04.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-05.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-06.png"><meta property="article:published_time" content="2021-07-26T15:00:00.000Z"><meta property="article:modified_time" content="2023-12-02T14:52:11.019Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="Kubernetes"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kdevkr.github.io/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-01.png"><link rel="canonical" href="https://kdevkr.github.io/archive/setup-kubernetes-cluster"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":false,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/archive/setup-kubernetes-cluster.html","path":"archive/setup-kubernetes-cluster.html","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸° | Mambo</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V8LF04VMBF"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned ğŸ”¥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">109</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0"><span class="nav-number">1.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EA%B5%AC%EC%84%B1%EC%9D%98-%EC%96%B4%EB%A0%A4%EC%9B%80"><span class="nav-number">1.1.</span> <span class="nav-text">í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì˜ ì–´ë ¤ì›€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%B0%B0%ED%8F%AC-%EB%8F%84%EA%B5%AC"><span class="nav-number">1.2.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë°°í¬ ë„êµ¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9D%B8%ED%94%84%EB%9D%BC-%ED%99%98%EA%B2%BD%EC%9D%98-%EA%B0%80%EC%9A%A9%EC%84%B1"><span class="nav-number">1.3.</span> <span class="nav-text">ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì˜ ê°€ìš©ì„±</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-DNS-%EC%84%9C%EB%B2%84"><span class="nav-number">1.4.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° DNS ì„œë²„</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0"><span class="nav-number">2.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘í•˜ê¸°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EA%B5%AC%EC%84%B1-%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%82%AC%EC%A0%84-%EC%9E%91%EC%97%85"><span class="nav-number">2.1.</span> <span class="nav-text">í´ëŸ¬ìŠ¤í„° êµ¬ì„± í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ì‚¬ì „ ì‘ì—…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BB%A8%ED%8A%B8%EB%A1%A4-%ED%94%8C%EB%A0%88%EC%9D%B8-%EB%85%B8%EB%93%9C-%EC%B4%88%EA%B8%B0%ED%99%94"><span class="nav-number">2.2.</span> <span class="nav-text">ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì´ˆê¸°í™”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98"><span class="nav-number">2.3.</span> <span class="nav-text">ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%9B%8C%EC%BB%A4-%EB%85%B8%EB%93%9C-%EC%B6%94%EA%B0%80"><span class="nav-number">2.4.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œ ì¶”ê°€</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%A0%9C%EC%96%B4%ED%95%98%EA%B8%B0"><span class="nav-number">3.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì œì–´í•˜ê¸°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%99%B8%EB%B6%80-%ED%98%B8%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%A0%91%EA%B7%BC-%EA%B5%AC%EC%84%B1-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EC%9D%98"><span class="nav-number">3.1.</span> <span class="nav-text">ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ ì •ì˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%99%B8%EB%B6%80-%ED%98%B8%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EB%B0%8F-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%ED%96%89"><span class="nav-number">3.2.</span> <span class="nav-text">ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì‚¬ìš©ì ë° ì¸ì¦ì„œ ë°œí–‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0"><span class="nav-number">4.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬í•˜ê¸°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EA%B0%B1%EC%8B%A0%ED%95%98%EA%B8%B0"><span class="nav-number">4.1.</span> <span class="nav-text">í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ê°±ì‹ í•˜ê¸°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%A7%8C%EB%A3%8C%EC%9D%BC%EC%9E%90-%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0"><span class="nav-number">4.2.</span> <span class="nav-text">í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ë§Œë£Œì¼ì ì¡°íšŒí•˜ê¸°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%88%98%EB%8F%99-%EA%B0%B1%EC%8B%A0"><span class="nav-number">4.3.</span> <span class="nav-text">í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ìˆ˜ë™ ê°±ì‹ </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0"><span class="nav-number">5.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„¤ì¹˜í•˜ê¸°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9C%A0%ED%98%95-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0"><span class="nav-number">5.1.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ìœ í˜• ë³€ê²½í•˜ê¸°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%95%98%EA%B8%B0"><span class="nav-number">5.2.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ë¡œê·¸ì¸í•˜ê¸°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EC%97%90%EC%84%9C-%EB%A7%A4%ED%8A%B8%EB%A6%AD-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0"><span class="nav-number">5.3.</span> <span class="nav-text">ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì—ì„œ ë§¤íŠ¸ë¦­ ì„œë²„ ì„¤ì¹˜í•˜ê¸°</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">109</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">164</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail â†’ mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner page posts-expand"><div class="post-block" lang="en"><header class="post-header"><h1 class="post-title" itemprop="name headline">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°</h1><div class="post-meta-container"></div></header><div class="post-body"><p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì´ë²ˆ ê¸€ì˜ ì£¼ì œëŠ” <strong>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°</strong>ì…ë‹ˆë‹¤. IT ì¸í”„ë¼ì— ëŒ€í•œ ì „ë¬¸ ì¸ë ¥ì´ ì•„ë‹Œ ì¼ë°˜ ê°œë°œìê°€ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´í•´í•˜ê³  êµ¬ì„±í•˜ê¸°ê¹Œì§€ëŠ” ìƒê°ë³´ë‹¤ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì–´ë µì§€ ì•Šì•„ì„œ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì •ì˜í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³„ë‹¤ë¥¸ ì„¤ì •ì—†ì´ ê°„ë‹¨í•˜ê²Œ ì‹¤í–‰í•´ì™”ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê¸° ìœ„í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì€ IT ì¸í”„ë¼ì— ëŒ€í•œ ì „ë¬¸ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><p>í˜„ì¬ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì˜ ì†Œì†íŒ€ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¹ˆìŠ¤í†¡(Beanstalk)ì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆ í™˜ê²½ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ í•™ìŠµì´ í•„ìš”í•˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤.</p><blockquote><p>ë¬¼ë¡ , ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë„ì…ì„ ì‹œë„í•˜ê¸´ í–ˆìŠµë‹ˆë‹¤ë§Œâ€¦ í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ê·œëª¨ ìƒ ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í¬ë‹¤ëŠ” ê²°ê³¼ë¥¼ ê°€ì§„ë‹¤ê³  íŒë‹¨í•˜ì—¬ ë„ì…ì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.</p></blockquote><p>ê·¸ëŸ¬ë‚˜ 2021ë…„ í´ë¼ìš°ë“œ í”Œë˜ê·¸ì‹­ í”„ë¡œì íŠ¸ ì¤‘ ì—ë„ˆì§€ ë¶„ì•¼ì— ì°¸ì—¬í•¨ìœ¼ë¡œì¨ í˜„ì¬ ìš´ì˜ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì»¨í…Œì´ë„ˆ í™˜ê²½ìœ¼ë¡œ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê¸° ìœ„í•˜ì—¬ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œ ê°œë°œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ì • ë¶€ë¶„ì„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ ë³€ê²½í•˜ì—¬ ê¸°ëŠ¥ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰ì¤‘ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ ë¶„ë¦¬ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì€ ë‚˜ë¬´ê¸°ìˆ ì˜ <strong>ì¹µí…Œì¼ í´ë¼ìš°ë“œ</strong>ë¼ê³ í•˜ëŠ” PaaSë¥¼ í†µí•´ ë°°í¬ë˜ê³  ìš´ì˜ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§ì ‘ êµ¬ì„±í•˜ì—¬ ìš´ì˜ ë° ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ì˜ ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì„ ì´í•´í•˜ê¸° ìœ„í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§ì ‘ êµ¬ì„±í•´ë³´ê³  ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•´ë³´ëŠ” ê²ƒì„ í•™ìŠµí•˜ê³  ì´ ê¸€ì„ í†µí•´ ê³µìœ í•˜ê³ ìí•©ë‹ˆë‹¤.</p><h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¶„ì‚°í˜• ì½”ë””ë„¤ì´í„°ì¸ ì£¼í‚¤í¼ì²˜ëŸ¼ ë‹¤ìˆ˜ì˜ í˜¸ìŠ¤íŠ¸ê°€ ì„œë¡œ í†µì‹ í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê²Œë˜ë©° ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œì˜ API ì„œë²„ê°€ ë™ì‘í•˜ê²Œ ë˜ëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì™€ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì´ ë˜ëŠ” ì›Œì»¤ ë…¸ë“œë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì›Œì»¤ ë…¸ë“œì™€ëŠ” í†µì‹ í•  í•„ìš”ê°€ ì—†ìœ¼ë©° ë§ˆìŠ¤í„° ë…¸ë“œì˜ API ì„œë²„ì™€ í†µì‹ í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê²Œë©ë‹ˆë‹¤.</p><h3 id="í´ëŸ¬ìŠ¤í„°-êµ¬ì„±ì˜-ì–´ë ¤ì›€"><a href="#í´ëŸ¬ìŠ¤í„°-êµ¬ì„±ì˜-ì–´ë ¤ì›€" class="headerlink" title="í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì˜ ì–´ë ¤ì›€"></a>í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì˜ ì–´ë ¤ì›€</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ”ê²Œ ì–´ë ¤ìš´ ì´ìœ ëŠ” IT ì¸í”„ë¼ ì§€ì‹ ë¿ë§Œ ì•„ë‹ˆë¼ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ìœ„í•´ ì—¬ëŸ¬ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ ê¸°ìˆ ì´ ì‚¬ìš©ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì— ëŒ€í•œ ì„œë¹„ìŠ¤ë¥¼ PaaSë¡œ ì œê³µí•˜ëŠ” <a target="_blank" rel="noopener" href="https://paas-ta.kr/intro/guideInstall">íŒŒìŠ¤-íƒ€(PaaS-TA)</a> ë˜ëŠ” <a target="_blank" rel="noopener" href="https://www.cocktailcloud.io/main.do">ì¹µí…Œì¼ í´ë¼ìš°ë“œ</a>ë„ <strong>kubespray, istio</strong> ë“± ì—¬ëŸ¬ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ê²°í•©í•œ ì†”ë£¨ì…˜ì„ ë§Œë“¤ì–´ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ìš´ì˜ ê´€ë¦¬ì˜ ì–´ë ¤ì›€ìœ¼ë¡œ ì¸í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ êµ¬ì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” AWSì˜ <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html">Amazon EKS</a> ë˜ëŠ” êµ¬ê¸€ í´ë¼ìš°ë“œ í”Œë«í¼ì˜ GKEì™€ ê°™ì´ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì‰½ê²Œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì´ìœ ì´ê¸°ë„ í•©ë‹ˆë‹¤.</p><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ë°°í¬-ë„êµ¬"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ë°°í¬-ë„êµ¬" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë°°í¬ ë„êµ¬"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë°°í¬ ë„êµ¬</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ë„êµ¬ëŠ” <strong>kubeadm, kops, kubespray</strong> ë¿ë§Œ ì•„ë‹ˆë¼ IoTë¥¼ ëª©ì ìœ¼ë¡œ ê²½ëŸ‰í™”ëœ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ëª©ì ìœ¼ë¡œí•˜ëŠ” <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>, <a target="_blank" rel="noopener" href="https://microk8s.io/">MicroK8s</a>ë“± ì—¬ëŸ¬ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì €ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ ë¬¸ì„œì—ì„œë„ ê°€ì´ë“œë¥¼ ì œê³µí•˜ê³  ì˜¨-í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ê¸°ë³¸ì ì¸ ë°°í¬ ë„êµ¬ì¸ <code>kubeadm</code>ì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê² ìŠµë‹ˆë‹¤.</p><blockquote><p>ë³¸ ê¸€ì—ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°ë¹„ì•ˆ ê³„ì—´ì˜ ë°°í¬íŒì¸ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p></blockquote><figure class="highlight sh"><figcaption><span>ìš°ë¶„íˆ¬ kubeadm íŒ¨í‚¤ì§€ ì„¤ì¹˜</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y apt-transport-https ca-certificates curl</span><br><span class="line"></span><br><span class="line">sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y kubelet kubeadm kubectl</span><br><span class="line">sudo apt-mark hold kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure><p>ìœ„ ëª…ë ¹ì–´ì— ì˜í•´ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ëŠ” ë‹¤ìŒì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ê²Œ ë˜ë©° í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  í˜¸ìŠ¤íŠ¸ì— ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤.</p><table><thead><tr><th>íŒ¨í‚¤ì§€</th><th>ìš©ë„</th></tr></thead><tbody><tr><td>kubeadm</td><td>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë°°í¬</td></tr><tr><td>kubelet</td><td>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œì™€ í†µì‹ í•˜ì—¬ ì»¨í…Œì´ë„ˆê°€ íŒŒë“œì— ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—ì´ì „íŠ¸</td></tr><tr><td>kubectl</td><td>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëª…ë ¹ì„ ë‚´ë¦¬ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” CLI</td></tr></tbody></table><blockquote><p>ë³¸ ê¸€ì—ì„œëŠ” ìµœì‹  ë²„ì „ì˜ <strong>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° 1.21+</strong> ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•˜ì—¬ ì£¼ê¸°ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p></blockquote><h3 id="ì»¨í…Œì´ë„ˆ-ì¸í”„ë¼-í™˜ê²½ì˜-ê°€ìš©ì„±"><a href="#ì»¨í…Œì´ë„ˆ-ì¸í”„ë¼-í™˜ê²½ì˜-ê°€ìš©ì„±" class="headerlink" title="ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì˜ ê°€ìš©ì„±"></a>ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì˜ ê°€ìš©ì„±</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„± ê°€ì´ë“œì— ë”°ë¥´ë©´ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ê²Œ ë˜ëŠ” ëª¨ë“  í˜¸ìŠ¤íŠ¸ê°€ ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆëŠ”ì§€ ê°€ìš©ì„±ì„ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¯¸ ì‚¬ìš©í•˜ê³  ìˆëŠ” í˜¸ìŠ¤íŠ¸ ë³´ë‹¤ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±ì„ ìœ„í•œ ë³„ë„ì˜ í˜¸ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p><h4 id="ë©”ëª¨ë¦¬-ìŠ¤ì™‘-ê¸°ëŠ¥-ë¹„í™œì„±í™”"><a href="#ë©”ëª¨ë¦¬-ìŠ¤ì™‘-ê¸°ëŠ¥-ë¹„í™œì„±í™”" class="headerlink" title="ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ê¸°ëŠ¥ ë¹„í™œì„±í™”"></a>ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ê¸°ëŠ¥ ë¹„í™œì„±í™”</h4><p><a target="_blank" rel="noopener" href="https://github.com/kubernetes/enhancements/issues/2400">Node swap support</a>ì™€ ê°™ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ìŠ¤ì™‘ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ ì§„í–‰ì¤‘ì´ì§€ë§Œ í˜„ì¬ë¡œì„  <strong>kubelet</strong>ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì˜ ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™” í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ìš°ë¶„íˆ¬ ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ë¹„í™œì„±í™”</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo swapoff -a &amp;&amp; sudo sed -i <span class="string">&#x27;/ swap / s/^\(.*\)$/#\1/g&#x27;</span> /etc/fstab</span><br></pre></td></tr></table></figure><h4 id="í´ëŸ¬ìŠ¤í„°-ë…¸ë“œì˜-ê³ ìœ -ì£¼ì†Œ-í™•ì¸"><a href="#í´ëŸ¬ìŠ¤í„°-ë…¸ë“œì˜-ê³ ìœ -ì£¼ì†Œ-í™•ì¸" class="headerlink" title="í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ê³ ìœ  ì£¼ì†Œ í™•ì¸"></a>í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ê³ ìœ  ì£¼ì†Œ í™•ì¸</h4><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” í˜¸ìŠ¤íŠ¸ë“¤ì´ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œ ê³ ìœ í•œ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ê° ë…¸ë“œë¥¼ <strong>í˜¸ìŠ¤íŠ¸ì˜ MAC ì£¼ì†Œ</strong> ë° <strong>product_uuid</strong>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>MAC ì£¼ì†Œ ë° product_uuid ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo apt install net-tools</span><br><span class="line">sudo ifconfig -a</span><br><span class="line">sudo <span class="built_in">cat</span> /sys/class/dmi/id/product_uuid</span><br></pre></td></tr></table></figure><p>ê·¸ë¦¬ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” í˜¸ìŠ¤íŠ¸ì˜ ì—­í• ì— ë§ê²Œ ì‚¬ìš©í•´ì•¼ë  í¬íŠ¸ë¥¼ ì ìœ í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-01.png"></p><h4 id="ì»¨í…Œì´ë„ˆ-ëŸ°íƒ€ì„-ì„ íƒí•˜ê¸°"><a href="#ì»¨í…Œì´ë„ˆ-ëŸ°íƒ€ì„-ì„ íƒí•˜ê¸°" class="headerlink" title="ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì„ íƒí•˜ê¸°"></a>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì„ íƒí•˜ê¸°</h4><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ íŒŒë“œ ì•ˆì— ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê²Œ ë  ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ ì„ íƒí•˜ê³  ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë§ì€ ê¸€ì—ì„œ ë„ì»¤ë¥¼ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì†Œê°œí•˜ê³ ìˆì§€ë§Œ ì•ìœ¼ë¡œ ìµœì‹  ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë²„ì „ì—ì„œëŠ” <a target="_blank" rel="noopener" href="https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/">ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•˜ì§€ ì•ŠëŠ” ë„ì»¤</a>ë¥¼ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•Šì„ ì˜ˆì •ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì €ëŠ” <a target="_blank" rel="noopener" href="https://cri-o.io/">CRI-O</a>ë¥¼ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ ì„ íƒí•˜ê³  ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p><p>CRI-Oë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— ìš°ë¶„íˆ¬ì˜ iptablesê°€ ë¸Œë¦¿ì§€ëœ íŠ¸ë˜í”½ì„ ë°”ë¼ë³´ë„ë¡ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ ë° iptables ë¸Œë¦¿ì§€ íŠ¸ë˜í”½ í™œì„±í™”</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/modules-load.d/crio.conf</span></span><br><span class="line"><span class="string">overlay</span></span><br><span class="line"><span class="string">br_netfilter</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sudo modprobe overlay</span><br><span class="line">sudo modprobe br_netfilter</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/sysctl.d/99-kubernetes-cri.conf</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables  = 1</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward                 = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sudo sysctl --system</span><br></pre></td></tr></table></figure><p>ìœ„ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ CRI-O ê´€ë ¨ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>CRI-O ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/ /&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.21/xUbuntu_20.04/ /&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable:cri-o:1.21.list</span><br><span class="line"></span><br><span class="line">curl -L https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:1.21/xUbuntu_20.04/Release.key | sudo apt-key add -</span><br><span class="line">curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/Release.key | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y cri-o cri-o-runc</span><br><span class="line">sudo apt-mark hold cri-o cri-o-runc</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> crio --now</span><br></pre></td></tr></table></figure><h4 id="íŒŒë“œ-ë„¤íŠ¸ì›Œí¬-í”ŒëŸ¬ê·¸ì¸-ê²°ì •í•˜ê¸°"><a href="#íŒŒë“œ-ë„¤íŠ¸ì›Œí¬-í”ŒëŸ¬ê·¸ì¸-ê²°ì •í•˜ê¸°" class="headerlink" title="íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ê²°ì •í•˜ê¸°"></a>íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ê²°ì •í•˜ê¸°</h4><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì‹¤í–‰ë˜ëŠ” íŒŒë“œì—ì„œ ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ ì„ ìœ„í•´ì„œ <a target="_blank" rel="noopener" href="https://github.com/containernetworking/cni">ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(CNI)</a>ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ë‹¤ì–‘í•œ CNI ì˜¤í”ˆì†ŒìŠ¤ ì¤‘ì—ì„œ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì„ ì„ íƒí•´ì•¼í•˜ë©° íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì— ë”°ë¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•  ë•Œ CIDR ë¸”ë¡ì„ ì§€ì •í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´, <a target="_blank" rel="noopener" href="https://github.com/flannel-io/flannel">í”Œë¼ë„¬(Flannel)</a>ì„ CNIë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ <strong>10.244.0.0&#x2F;16</strong>ë¥¼ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ CIDR ë¸”ë¡ìœ¼ë¡œ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>í”Œë¼ë„¬ì„ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì˜ˆì‹œ</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm init --pod-network-cidr=10.244.0.0/16</span><br><span class="line">sudo kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><h4 id="ë„¤íŠ¸ì›Œí¬-ì •ì±…-í”ŒëŸ¬ê·¸ì¸"><a href="#ë„¤íŠ¸ì›Œí¬-ì •ì±…-í”ŒëŸ¬ê·¸ì¸" class="headerlink" title="ë„¤íŠ¸ì›Œí¬ ì •ì±… í”ŒëŸ¬ê·¸ì¸"></a>ë„¤íŠ¸ì›Œí¬ ì •ì±… í”ŒëŸ¬ê·¸ì¸</h4><p>íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ê²°ì •í•œ <strong>í”Œë¼ë„¬</strong>ì´ë¼ëŠ” CNIëŠ” ë„¤íŠ¸ì›Œí¬ ì •ì±… ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆì§€ ì•ŠëŠ” ìˆœìˆ˜í•˜ê²Œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ëª©ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì˜¤í”ˆì†ŒìŠ¤ì…ë‹ˆë‹¤. ë§Œì•½, ìš°ë¦¬ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ íŒŒë“œì— ëŒ€í•œ íŠ¸ë˜í”½ ì œì–´ë¥¼ ìœ„í•´ì„œ ì¸ê·¸ë ˆìŠ¤ ë˜ëŠ” ì´ê·¸ë ˆìŠ¤ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì ìš©í•´ì•¼í•œë‹¤ë©´ <strong>ë„¤íŠ¸ì›Œí¬ ì •ì±…</strong> ê¸°ëŠ¥ì´ í¬í•¨ëœ í”ŒëŸ¬ê·¸ì¸ì„ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ì¼ë°˜ì ìœ¼ë¡œ êµ¬í˜„ ë°©ì‹ì˜ ì°¨ì´ê°€ ìˆì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì •ì±…ì„ í¬í•¨í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/antrea-io/antrea">Antrea</a></li><li><a target="_blank" rel="noopener" href="https://github.com/projectcalico/calico">Calico</a></li><li><a target="_blank" rel="noopener" href="https://github.com/weaveworks/weave">Weave Net</a></li><li><a target="_blank" rel="noopener" href="https://docs.projectcalico.org/getting-started/kubernetes/flannel/flannel">Canal</a></li></ul><p>ì˜ˆë¥¼ ë“¤ì–´, í”Œë¼ë„¬ì„ CNIë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ìº˜ë¦¬ì½”(Calico)ë¥¼ ë„¤íŠ¸ì›Œí¬ ì •ì±… ê³µê¸‰ìë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” <strong>ì¹´ë‚ (Canal)</strong> ì„ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¹´ë‚ ì„ ì‚¬ìš©í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì˜ˆì‹œ</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm init --pod-network-cidr=10.244.0.0/16</span><br><span class="line">sudo kubectl apply -f https://docs.projectcalico.org/manifests/canal.yaml</span><br></pre></td></tr></table></figure><blockquote><p>ì¹´ë‚ ì€ í”Œë¼ë„¬ì„ CNIë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ í”Œë¼ë„¬ì˜ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ CIDR ë¸”ë¡ì„ ì§€ì •í•©ë‹ˆë‹¤.</p></blockquote><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-DNS-ì„œë²„"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-DNS-ì„œë²„" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° DNS ì„œë²„"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° DNS ì„œë²„</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ë¥¼ ì ìš©í•˜ê¸° ìœ„í•˜ì—¬ DNS ì„œë²„ë¥¼ ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° 1.11+ ë¶€í„°ëŠ” <a target="_blank" rel="noopener" href="https://github.com/kubernetes/dns">kube-dns</a> ë³´ë‹¤ëŠ” <a target="_blank" rel="noopener" href="https://coredns.io/">CoreDNS</a>ì„ ê¶Œì¥í•˜ê³  ìš°ë¦¬ê°€ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì‚¬ìš©í•˜ê²Œ ë  kubeadmì€ ê¸°ë³¸ì ìœ¼ë¡œ <strong>CoreDNS</strong>ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ë˜ëŠ” CoreDNSëŠ” <strong>ëŒ€ê¸° ìƒíƒœ</strong>ì— ìˆë‹¤ê°€ ìš°ë¦¬ê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ë©´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p><h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì‹œì‘í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì‹œì‘í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘í•˜ê¸°</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ìœ„í•´ í™•ì¸í•´ì•¼í•  ëª‡ê°€ì§€ í•­ëª©ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ì €ì™€ í•¨ê»˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•  í˜¸ìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í•˜ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ ë„êµ¬ì¸ <strong>kubeadm</strong>ì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p>ë¨¼ì €, ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ <strong>ìš°ë¶„íˆ¬ 20.04 LTS</strong> ë¡œ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-02.png"></p><p>ê·¸ë¦¬ê³  kubeadmëŠ” í´ëŸ¬ìŠ¤í„° ì‹œì‘ì„ ìœ„í•´ <strong>CPU 2ì½”ì–´ ì´ìƒ, ë©”ëª¨ë¦¬ 2GB ì´ìƒ</strong> ì„ ìš”êµ¬í•˜ë¯€ë¡œ t2.medium ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/setup-kubernetes-cluster-03.png"></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ìœ„í•œ í•™ìŠµì„ ëª©ì ìœ¼ë¡œ í•˜ë¯€ë¡œ <strong>ë§ˆìŠ¤í„° ë…¸ë“œì™€ í•¨ê»˜ 1ê°œ ì´ìƒì˜ ì›Œì»¤ ë…¸ë“œë¥¼ êµ¬ì„±</strong>í•˜ê¸° ìœ„í•˜ì—¬ <strong>ìµœì†Œ 2ê°œì˜ ìš°ë¶„íˆ¬ ì¸ìŠ¤í„´ìŠ¤</strong>ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.</p><h3 id="í´ëŸ¬ìŠ¤í„°-êµ¬ì„±-í˜¸ìŠ¤íŠ¸ì—-ëŒ€í•œ-ì‚¬ì „-ì‘ì—…"><a href="#í´ëŸ¬ìŠ¤í„°-êµ¬ì„±-í˜¸ìŠ¤íŠ¸ì—-ëŒ€í•œ-ì‚¬ì „-ì‘ì—…" class="headerlink" title="í´ëŸ¬ìŠ¤í„° êµ¬ì„± í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ì‚¬ì „ ì‘ì—…"></a>í´ëŸ¬ìŠ¤í„° êµ¬ì„± í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ì‚¬ì „ ì‘ì—…</h3><p>ìš°ë¦¬ê°€ ì¤€ë¹„í•œ ìš°ë¶„íˆ¬ ì¸ìŠ¤í„´ìŠ¤ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸í”„ë¼ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸° ìœ„í•œ ì‚¬ì „ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ê¸°ëŠ¥ ë¹„í™œì„±í™”</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo swapoff -a &amp;&amp; sudo sed -i <span class="string">&#x27;/ swap / s/^\(.*\)$/#\1/g&#x27;</span> /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/modules-load.d/crio.conf</span></span><br><span class="line"><span class="string">overlay</span></span><br><span class="line"><span class="string">br_netfilter</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sudo modprobe overlay</span><br><span class="line">sudo modprobe br_netfilter</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/sysctl.d/99-kubernetes-cri.conf</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables  = 1</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward                 = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sudo sysctl --system</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>CRI-O ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì„¤ì¹˜í•˜ê¸°</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/ /&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.21/xUbuntu_20.04/ /&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/devel:kubic:libcontainers:stable:cri-o:1.21.list</span><br><span class="line"></span><br><span class="line">curl -L https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:1.21/xUbuntu_20.04/Release.key | sudo apt-key add -</span><br><span class="line">curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/Release.key | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -y cri-o cri-o-runc</span><br><span class="line">sudo apt-mark hold cri-o cri-o-runc</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> crio --now</span><br></pre></td></tr></table></figure><h3 id="ì»¨íŠ¸ë¡¤-í”Œë ˆì¸-ë…¸ë“œ-ì´ˆê¸°í™”"><a href="#ì»¨íŠ¸ë¡¤-í”Œë ˆì¸-ë…¸ë“œ-ì´ˆê¸°í™”" class="headerlink" title="ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì´ˆê¸°í™”"></a>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì´ˆê¸°í™”</h3><p>ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ì„œ <strong>kubeadm init</strong> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ <strong>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì´ˆê¸°í™”</strong> í•©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ í˜•ì„±ëœ í˜¸ìŠ¤íŠ¸ë¥¼ <strong>ë§ˆìŠ¤í„° ë…¸ë“œ</strong>ë¼ê³  ë¶€ë¥´ê²Œ ë©ë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì„ í”Œë¼ë„¬ì„ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì‹œì‘ ì‹œ <strong>íŒŒë“œ ë„¤íŠ¸ì›Œí¬ CIDR ë¸”ë¡</strong>ì„ <code>10.244.0.0/16</code>ìœ¼ë¡œ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì´ˆê¸°í™”í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì‹œì‘</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm init --pod-network-cidr=10.244.0.0/16</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">Alternatively, <span class="keyword">if</span> you are the root user, you can run:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">Then you can <span class="built_in">join</span> any number of worker nodes by running the following on each as root:</span><br><span class="line"></span><br><span class="line">kubeadm <span class="built_in">join</span> 172.31.11.193:6443 --token oov7g6.bi85jo3kv15oeryf \</span><br><span class="line">--discovery-token-ca-cert-hash sha256:08874017445a8ddf06dde3e9e7be79097c470883f0384c046290e207ec3342bd</span><br></pre></td></tr></table></figure><p>ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìœ¼ë‹ˆ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ í”Œë¼ë„¬ì„ ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤. í”Œë¼ë„¬ì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” <strong>íë¸Œì»¨íŠ¸ë¡¤(kubectl)</strong> ì— í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ì„ ìœ„í•œ ì„¤ì •ì„ ì§„í–‰í•´ì•¼í•©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì´ˆê¸°í™” ì‹œ ì¶œë ¥ëœ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>íë¸Œì»¨íŠ¸ë¡¤ì— í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ ì„¤ì •</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><p>ìœ„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ë‚˜ë©´ íë¸Œì»¨íŠ¸ë¡¤ì´ <strong>$HOME&#x2F;.kube</strong> ê²½ë¡œì— ìˆëŠ” í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì´ë¼ê³  í•˜ëŠ” <code>kubeconfig</code>ë¥¼ ì°¸ì¡°í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ì—¬ ëª…ë ¹ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì— ëŒ€í•´ì„œëŠ” ìì„¸íˆ ì•Œì•„ë³¼ í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì‹¤í–‰ëœ ëª¨ë“  íŒŒë“œë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ íŒŒë“œ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl get pods --all-namespaces</span><br><span class="line">...</span><br><span class="line">NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   coredns-558bd4d5db-b9t9v                   0/1     Pending   0          106s</span><br><span class="line">kube-system   coredns-558bd4d5db-bkhc4                   0/1     Pending   0          106s</span><br><span class="line">kube-system   etcd-ip-172-31-11-193                      1/1     Running   0          117s</span><br><span class="line">kube-system   kube-apiserver-ip-172-31-11-193            1/1     Running   0          117s</span><br><span class="line">kube-system   kube-controller-manager-ip-172-31-11-193   1/1     Running   0          2m4s</span><br><span class="line">kube-system   kube-proxy-gm8tr                           1/1     Running   0          106s</span><br><span class="line">kube-system   kube-scheduler-ip-172-31-11-193            1/1     Running   0          2m5s</span><br></pre></td></tr></table></figure><p>ì•ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° DNS ì„œë²„ ê´€ë ¨í•´ì„œ CoreDNSëŠ” íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ì´ ì„¤ì¹˜ë˜ê¸°ê¹Œì§€ ëŒ€ê¸° ìƒíƒœì— ìˆë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. í”Œë¼ë„¬ì„ íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ ë‚˜ì„œ CoreDNSê°€ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><h3 id="ë„¤íŠ¸ì›Œí¬-í”ŒëŸ¬ê·¸ì¸-ì„¤ì¹˜"><a href="#ë„¤íŠ¸ì›Œí¬-í”ŒëŸ¬ê·¸ì¸-ì„¤ì¹˜" class="headerlink" title="ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜"></a>ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</h3><p>íŒŒë“œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ í”Œë¼ë„¬ì„ ì‚¬ìš©í•˜ë©´ì„œ ë„¤íŠ¸ì›Œí¬ ì •ì±… ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ë„¤íŠ¸ì›Œí¬ ì •ì±… í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ìº˜ë¦¬ì½”ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¹´ë‚ (Canal)ì„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¹´ë‚  ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl apply -f https://docs.projectcalico.org/manifests/canal.yaml</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">kubectl get pods -A</span><br><span class="line">...</span><br><span class="line">NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   calico-kube-controllers-78d6f96c7b-ltz89   1/1     Running   0          22s</span><br><span class="line">kube-system   canal-2mmz5                                2/2     Running   0          23s</span><br><span class="line">kube-system   coredns-558bd4d5db-t4w4s                   1/1     Running   0          94s</span><br><span class="line">kube-system   coredns-558bd4d5db-wg7zg                   1/1     Running   0          94s</span><br><span class="line">kube-system   etcd-ip-172-31-11-193                      1/1     Running   0          102s</span><br><span class="line">kube-system   kube-apiserver-ip-172-31-11-193            1/1     Running   0          109s</span><br><span class="line">kube-system   kube-controller-manager-ip-172-31-11-193   1/1     Running   0          102s</span><br><span class="line">kube-system   kube-proxy-gmp4q                           1/1     Running   0          93s</span><br><span class="line">kube-system   kube-scheduler-ip-172-31-11-193            1/1     Running   0          102s</span><br></pre></td></tr></table></figure><p>ì¹´ë‚ ì„ ì„¤ì¹˜í•˜ê³ ë‚˜ì„œ íŒŒë“œ ì¡°íšŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë‹ˆ ëŒ€ê¸°ì¤‘ì´ì—ˆë˜ <strong>CoreDNS</strong>ê°€ ì‹¤í–‰ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ëˆˆì¹˜ì±„ì‹  ë¶„ë“¤ë„ ê³„ì‹œê² ì§€ë§Œ íë¸Œì»¨íŠ¸ë¡¤ë¡œ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•´ì„œ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <strong>â€“all-namespaces</strong> ì˜µì…˜ ëŒ€ì‹ ì— <strong>-A</strong>ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ì´ë ‡ê²Œ íë¸Œì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•  ë•Œ ê¸´ ì´ë¦„ì„ ëŒ€ì‹ í•  ìˆ˜ ìˆëŠ” ì¶•ì•½ì–´ë¥¼ ì§€ì›í•˜ë‹ˆ ì—¬ëŸ¬ê°€ì§€ ì¶•ì•½ í˜•íƒœë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</p></blockquote><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì›Œì»¤-ë…¸ë“œ-ì¶”ê°€"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì›Œì»¤-ë…¸ë“œ-ì¶”ê°€" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œ ì¶”ê°€"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì›Œì»¤ ë…¸ë“œ ì¶”ê°€</h3><p>ì•ì„  ì‘ì—…ê¹Œì§€ ìˆ˜í–‰í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ì™„ë£Œí•˜ê¸° ìœ„í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ê°€ íŒŒë“œì— ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì´ ë˜ëŠ” ì›Œì»¤ ë…¸ë“œë¥¼ ì°¸ì—¬ì‹œì¼œì•¼í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ë¥¼ ì›Œì»¤ ë…¸ë“œë¡œ ì°¸ì—¬ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì´ˆê¸°í™”í•˜ê³  ë‚˜ì„œ ì¶œë ¥ë˜ëŠ” ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì›Œì»¤ ë…¸ë“œê°€ ë  í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><blockquote><p>í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  í˜¸ìŠ¤íŠ¸ì— kubectl, kubeletì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì´ëŸ¬í•œ ì´ìœ ì…ë‹ˆë‹¤.</p></blockquote><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì›Œì»¤ ë…¸ë“œ ì°¸ì—¬</span></figcaption><table><tr><td class="code"><pre><span class="line">kubeadm <span class="built_in">join</span> 172.31.11.193:6443 --token oov7g6.bi85jo3kv15oeryf \</span><br><span class="line">--discovery-token-ca-cert-hash sha256:08874017445a8ddf06dde3e9e7be79097c470883f0384c046290e207ec3342bd </span><br><span class="line">...</span><br><span class="line">This node has joined the cluster:</span><br><span class="line">* Certificate signing request was sent to apiserver and a response was received.</span><br><span class="line">* The Kubelet was informed of the new secure connection details.</span><br><span class="line"></span><br><span class="line">Run <span class="string">&#x27;kubectl get nodes&#x27;</span> on the control-plane to see this node <span class="built_in">join</span> the cluster.</span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ ë¬¸ì¥ì— ë”°ë¼ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ ìˆëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ <strong>kubectl get nodes</strong> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ë´…ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># kubectl get [nodes/node/no]</span></span><br><span class="line">kubectl get no</span><br><span class="line">...</span><br><span class="line">NAME               STATUS   ROLES                  AGE     VERSION</span><br><span class="line">ip-172-31-11-193   Ready    control-plane,master   3m18s   v1.21.3</span><br><span class="line">ip-172-31-41-106   Ready    &lt;none&gt;                 42s     v1.21.3</span><br></pre></td></tr></table></figure><p>ì €ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë…¸ë“œë¥¼ ì¡°íšŒí•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶•ì•½ í˜•íƒœë¡œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ íë¸Œì»¨íŠ¸ë¡¤ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤ë¥¼ <strong>ë³µìˆ˜í˜•, ë‹¨ìˆ˜í˜•, ì¶•ì•½í˜•</strong>ì„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ ë„êµ¬ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ê³  ì›Œì»¤ ë…¸ë“œë¥¼ ì°¸ì—¬ì‹œì¼œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.</p><blockquote><p>ìœ„ ëª…ë ¹ì–´ ìˆ˜í–‰ê²°ê³¼ì—ì„œ ì›Œì»¤ ë…¸ë“œì— ROLESê°€ ì—†ëŠ” ê²ƒì´ ë¬¸ì œê°€ ì•ˆë˜ì§€ë§Œ ì •í™•í•œ êµ¬ë¶„ì„ ìœ„í•´ workerë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p></blockquote><figure class="highlight sh"><figcaption><span>ì›Œì»¤ ë…¸ë“œì— worker ROLE ë ˆì´ë¸” ì¶”ê°€</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl label node ip-172-31-41-106 node-role.kubernetes.io/worker=worker</span><br></pre></td></tr></table></figure><h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì œì–´í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ì œì–´í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì œì–´í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì œì–´í•˜ê¸°</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ì„œëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì¸ í˜¸ìŠ¤íŠ¸ì— ì ‘ì†í•˜ì—¬ íë¸Œì»¨íŠ¸ë¡¤ìœ¼ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë°˜ë“œì‹œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì œì–´ë¥¼ ìœ„í•´ì„œ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ìˆ˜í–‰í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” <strong>íë¸Œì»¨íŠ¸ë¡¤(kubectl)</strong> ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ì„ ìœ„í•´ì„œ <strong>í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼(kubeconfig)</strong> ì„ ì°¸ì¡°í•´ì„œ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë§ˆìŠ¤í„° ë…¸ë“œê°€ ì•„ë‹Œ <strong>ë¡œì»¬ ì»´í“¨í„°(ì™¸ë¶€ í˜¸ìŠ¤íŠ¸)</strong> ì—ì„œ íë¸Œì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ <a target="_blank" rel="noopener" href="https://kubernetes.io/ko/docs/concepts/configuration/organize-cluster-access-kubeconfig">í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì„ ì •ì˜</a>í•˜ê³  <a target="_blank" rel="noopener" href="https://kubernetes.io/ko/docs/tasks/administer-cluster/kubeadm/kubeadm-certs">ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ê°±ì‹ </a>í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><h3 id="ì™¸ë¶€-í˜¸ìŠ¤íŠ¸ë¥¼-ìœ„í•œ-í´ëŸ¬ìŠ¤í„°-ì ‘ê·¼-êµ¬ì„±-íŒŒì¼-ì •ì˜"><a href="#ì™¸ë¶€-í˜¸ìŠ¤íŠ¸ë¥¼-ìœ„í•œ-í´ëŸ¬ìŠ¤í„°-ì ‘ê·¼-êµ¬ì„±-íŒŒì¼-ì •ì˜" class="headerlink" title="ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ ì •ì˜"></a>ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ ì •ì˜</h3><p>ë¨¼ì €, ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ì‚¬ìš©ì¤‘ì¸ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì„ ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì¸ ë¡œì»¬ ì»´í“¨í„°ì— ë³µì‚¬í•˜ì—¬ ë¡œì»¬ ì»´í“¨í„°ì— ì„¤ì¹˜ëœ íë¸Œì»¨íŠ¸ë¡¤ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p><blockquote><p>ë§ˆìŠ¤í„° ë…¸ë“œì¸ í˜¸ìŠ¤íŠ¸ì˜ ì™¸ë¶€ ì•„ì´í”¼ëŠ” 54.180.137.161 ì…ë‹ˆë‹¤.</p></blockquote><figure class="highlight ps"><figcaption><span>ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì—ì„œ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ ë³µì‚¬</span></figcaption><table><tr><td class="code"><pre><span class="line">mkdir .kube</span><br><span class="line">scp <span class="literal">-i</span> .\keypair\mambo.pem ubuntu@<span class="number">54.180</span>.<span class="number">137.161</span>:.kube/config .kube/config</span><br></pre></td></tr></table></figure><p>ë¡œì»¬ ì»´í“¨í„°ì—ì„œ íë¸Œì»¨íŠ¸ë¡¤ì´ ì°¸ì¡°í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±ì •ë³´ë¥¼ ì¡°íšŒí•´ë³´ë©´ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ì‚¬ìš©í•˜ë˜ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì´ê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„°ì˜ ì£¼ì†Œê°€ ë§ˆìŠ¤í„° ë…¸ë“œì˜ ë‚´ë¶€ ì•„ì´í”¼ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-03.png" alt="í´ëŸ¬ìŠ¤í„° ì£¼ì†Œê°€ ë§ˆìŠ¤í„° ë…¸ë“œì˜ ë‚´ë¶€ ì•„ì´í”¼"></p><p>í´ëŸ¬ìŠ¤í„° ì£¼ì†Œë¥¼ ì™¸ë¶€ ì•„ì´í”¼ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight ps"><figcaption><span>í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì˜ í´ëŸ¬ìŠ¤í„° ì£¼ì†Œ ë³€ê²½</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl config <span class="literal">--kubeconfig</span>=config <span class="built_in">set-cluster</span> kubernetes <span class="literal">--server</span>=https://<span class="number">54.180</span>.<span class="number">137.161</span>:<span class="number">6443</span> </span><br></pre></td></tr></table></figure><p>ë‹¤ì‹œ íë¸Œì»¨íŠ¸ë¡¤ì´ ì°¸ì¡°í•˜ëŠ” í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± ì •ë³´ë¥¼ ì¡°íšŒí•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ í´ëŸ¬ìŠ¤í„° ì£¼ì†Œê°€ ì™¸ë¶€ ì•„ì´í”¼ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-04.png" alt="ì™¸ë¶€ ì•„ì´í”¼ë¡œ ë³€ê²½ëœ í´ëŸ¬ìŠ¤í„° ì£¼ì†Œ"></p><p>ì´ì œ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ íë¸Œì»¨íŠ¸ë¡¤ì´ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤. (ìˆ˜ì •ì´ì§€ë§Œâ€¦?) íë¸Œì»¨íŠ¸ë¡¤ë¡œ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ íŒŒë“œë¥¼ ì¡°íšŒí•´ë´…ë‹ˆë‹¤.</p><figure class="highlight ps"><figcaption><span>ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì—ì„œ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ íŒŒë“œ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl get po <span class="literal">-A</span></span><br><span class="line">...</span><br><span class="line">Unable to connect to the server: x509: certificate is valid <span class="keyword">for</span> <span class="number">10.96</span>.<span class="number">0.1</span>, <span class="number">172.31</span>.<span class="number">6.192</span>, not <span class="number">54.180</span>.<span class="number">137.16</span></span><br></pre></td></tr></table></figure><p>ìœ„ì™€ ê°™ì´ X509 ì¸ì¦ì„œ ê´€ë ¨ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì´ìœ ëŠ” ìš°ë¦¬ê°€ ì…ë ¥í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì£¼ì†Œì¸ 54.180.137.161ì´ ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì— ìˆëŠ” ì¸ì¦ì„œ ì •ë³´ì— í¬í•¨ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì´ˆê¸°í™”í•  ë•Œ API ì„œë²„ì—ì„œ ì‚¬ìš©í•  ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚´ë¶€ ì•„ì´í”¼ë§Œì„ ì¸ì¦ì„œì— í¬í•¨ì‹œí‚¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ë§ˆìŠ¤í„° ë…¸ë“œë¡œ ëŒì•„ê°€ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì¸ì¦ì„œì— ì™¸ë¶€ì•„ì´í”¼ë¥¼ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ì„œ í˜ë“¤ê²Œ êµ¬ì„±í•˜ì˜€ë˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ˆê¸°í™”ì‹œí‚¤ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm reset</span><br><span class="line"><span class="built_in">rm</span> <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì™¸ë¶€ ì•„ì´í”¼ë¥¼ API ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œì— í¬í•¨í•˜ë„ë¡ <strong>--apiserver-cert-extra-sans</strong> íŒŒë¼ë¯¸í„° ì˜µì…˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-05.png"></p><p>ìœ„ì™€ ê°™ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì¶œë ¥ë˜ëŠ” ì •ë³´ë¥¼ í†µí•´ ìš°ë¦¬ê°€ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥í•œ <strong>ì™¸ë¶€ ì•„ì´í”¼(54.180.137.161)ê°€ ì¸ì¦ì„œì— í¬í•¨ë¨</strong> ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œì‘í•˜ì—¬ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ ì´ˆê¸°í™”ë˜ì—ˆìœ¼ë©´ kubeconfig íŒŒì¼ì„ ë¡œì»¬ ì»´í“¨í„°ë¡œ ë³µì‚¬í•˜ê³  íë¸Œì»¨íŠ¸ë¡¤ìœ¼ë¡œ íŒŒë“œ ì¡°íšŒë¥¼ ì‹œë„í•´ë´…ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-06.png"></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì¸ì¦ì„œì— í¬í•¨ëœ ì™¸ë¶€ ì•„ì´í”¼ë¥¼ í™•ì¸í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ì„ í—ˆìš©í•˜ì—¬ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ íŒŒë“œê°€ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.</p><h3 id="ì™¸ë¶€-í˜¸ìŠ¤íŠ¸ë¥¼-ìœ„í•œ-ì‚¬ìš©ì-ë°-ì¸ì¦ì„œ-ë°œí–‰"><a href="#ì™¸ë¶€-í˜¸ìŠ¤íŠ¸ë¥¼-ìœ„í•œ-ì‚¬ìš©ì-ë°-ì¸ì¦ì„œ-ë°œí–‰" class="headerlink" title="ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì‚¬ìš©ì ë° ì¸ì¦ì„œ ë°œí–‰"></a>ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì‚¬ìš©ì ë° ì¸ì¦ì„œ ë°œí–‰</h3><p>ì•ì„œ í™•ì¸í•œ ë‚´ìš©ì€ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì„ í†µí•´ ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì—ì„œ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° ìš°ë¦¬ê°€ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ì‚¬ìš©í•˜ë˜ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ kubernetes-admin ì‚¬ìš©ìì˜ ì¸ì¦ì •ë³´ê°€ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ë‹´ë‹¹ìëŠ” í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì ‘ê·¼ êµ¬ì„±íŒŒì¼ì„ ë‚´ë³´ë‚´ì§€ì•Šê³  í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©° íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê¶Œí•œì´ ë¶€ì—¬ëœ ì‚¬ìš©ìë¥¼ ë§Œë“¤ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë£¨íŠ¸ CA ì¸ì¦ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì¸ì¦ì„œë¥¼ ë°œí–‰í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ì„ ì •ì˜í•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ëŠ” ì‚¬ìš©ìë¼ëŠ” ì˜¤ë¸Œì íŠ¸ëŠ” ì—†ì§€ë§Œ ì¸ì¦ì„œì— í¬í•¨ë˜ëŠ” ì£¼ì²´ë¥¼ í†µí•´ ê·¸ë£¹ê³¼ ì‚¬ìš©ì ê°œë…ì„ ì‚¬ìš©í•´ì„œ ì¸ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë£¨íŠ¸ CA ì¸ì¦ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ìœ„ ì¸ì¦ì„œ ë°œí–‰í•˜ê³  í•˜ìœ„ ì¸ì¦ì„œì— í¬í•¨ëœ ì£¼ì²´ì— ëŒ€í•œ RBAC ê¸°ë°˜ì˜ Roleì„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ë¨¼ì €, ë£¨íŠ¸ CA ì¸ì¦ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ìœ„ ì¸ì¦ì„œë¥¼ ë°œí–‰í•˜ê¸° ìœ„í•˜ì—¬ í´ë¼ìš°ë“œí”Œë ˆì–´ì—ì„œ ë§Œë“  cfssl ì„¤ì¹˜í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ë§ˆìŠ¤í„° ë…¸ë“œì— cfssl íŒ¨í‚¤ì§€ ì„¤ì¹˜</span></figcaption><table><tr><td class="code"><pre><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssl_1.5.0_linux_amd64 -o cfssl</span><br><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssljson_1.5.0_linux_amd64 -o cfssljson</span><br><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssl-certinfo_1.5.0_linux_amd64 -o cfssl-certinfo</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x cfssl* </span><br><span class="line">sudo <span class="built_in">mv</span> cfssl* /usr/bin/</span><br></pre></td></tr></table></figure><p>cfsslì´ ì„¤ì¹˜ë˜ì—ˆìœ¼ë©´ ì‚¬ìš©ì ì¸ì¦ì„œê°€ ë°œí–‰ë  í´ë”ë¥¼ ë§Œë“¤ê³ ë‚˜ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ì‚¬ìš©ì¤‘ì¸ ë£¨íŠ¸ CA ì¸ì¦ì„œ íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤. ë£¨íŠ¸ CA ì¸ì¦ì„œ íŒŒì¼ì€ ì¼ë°˜ì ìœ¼ë¡œ <strong>&#x2F;etc&#x2F;kubernetes&#x2F;pki</strong> í´ë”ì— ìˆìŠµë‹ˆë‹¤.</p><p>ì¸ì¦ì„œ ë°œí–‰ì„ ìœ„í•´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¸ì¦ì„œ ë°œí–‰ í´ë” ì´ë™ ë° ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë£¨íŠ¸ CA ì¸ì¦ì„œ ë³µì‚¬</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> cert &amp;&amp; <span class="built_in">cd</span> cert</span><br><span class="line">sudo <span class="built_in">cp</span> /etc/kubernetes/pki/ca* ./</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>í•˜ìœ„ ì¸ì¦ì„œ ë°œí–‰ ì •ë³´ ë° ì„œëª… ìš”ì²­ ì •ì˜</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee mambo-config.json</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;signing&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;default&quot;: &#123;</span></span><br><span class="line"><span class="string">      &quot;expiry&quot;: &quot;8760h&quot;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &quot;profiles&quot;: &#123;</span></span><br><span class="line"><span class="string">      &quot;mambo&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;usages&quot;: [</span></span><br><span class="line"><span class="string">          &quot;signing&quot;,</span></span><br><span class="line"><span class="string">          &quot;key encipherment&quot;,</span></span><br><span class="line"><span class="string">          &quot;server auth&quot;,</span></span><br><span class="line"><span class="string">          &quot;client auth&quot;</span></span><br><span class="line"><span class="string">        ],</span></span><br><span class="line"><span class="string">        &quot;expiry&quot;: &quot;8760h&quot;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee mambo-csr.json</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;CN&quot;: &quot;mambo&quot;,</span></span><br><span class="line"><span class="string">  &quot;key&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;algo&quot;: &quot;rsa&quot;,</span></span><br><span class="line"><span class="string">    &quot;size&quot;: 2048</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  &quot;names&quot;:[</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;O&quot;: &quot;system:masters&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>ì‚¬ìš©ì ì¸ì¦ì„œ ë°œí–‰</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo cfssl gencert -ca=ca.crt -ca-key=ca.key -config=mambo-config.json -profile=mambo mambo-csr.json | cfssljson -bare mambo</span><br><span class="line"></span><br><span class="line">ll</span><br><span class="line">-rw-r--r-- 1 mambo mambo 1066 Jul 28 15:04 ca.crt</span><br><span class="line">-rw------- 1 root  root  1679 Jul 28 15:04 ca.key</span><br><span class="line">-rw-rw-r-- 1 mambo mambo  277 Jul 28 15:02 mambo-config.json</span><br><span class="line">-rw-r--r-- 1 mambo mambo  920 Jul 28 15:08 mambo.csr</span><br><span class="line">-rw-rw-r-- 1 mambo mambo  129 Jul 28 15:02 mambo-csr.json</span><br><span class="line">-rw------- 1 mambo mambo 1675 Jul 28 15:08 mambo-key.pem</span><br><span class="line">-rw-rw-r-- 1 mambo mambo 1204 Jul 28 15:08 mambo.pem</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ì¸ì¦ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ íë¸Œì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼(kubeconfig)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì‚¬ìš©ì í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± íŒŒì¼ ì •ì˜</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl config --kubeconfig=mambo-config set-cluster kubernetes --server=https://54.180.137.161:6443 --certificate-authority=ca.crt</span><br><span class="line">kubectl config --kubeconfig=mambo-config set-credentials mambo --client-certificate=mambo.pem --client-key=mambo-key.pem</span><br><span class="line">kubectl config --kubeconfig=mambo-config set-context kubernetes-master --cluster=kubernetes --user=mambo</span><br><span class="line">kubectl config --kubeconfig=mambo-config use-context kubernetes-master</span><br></pre></td></tr></table></figure><p>ë§Œë“¤ì–´ì§„ í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  íŒŒë“œë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ êµ¬ì„± ì •ë³´ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl config view --kubeconfig=mambo-config</span><br><span class="line">apiVersion: v1</span><br><span class="line">clusters:</span><br><span class="line">- cluster:</span><br><span class="line">    certificate-authority: ca.crt</span><br><span class="line">    server: https://54.180.137.161:6443</span><br><span class="line">  name: kubernetes</span><br><span class="line">contexts:</span><br><span class="line">- context:</span><br><span class="line">    cluster: kubernetes</span><br><span class="line">    user: mambo</span><br><span class="line">  name: kubernetes-master</span><br><span class="line">current-context: kubernetes-master</span><br><span class="line">kind: Config</span><br><span class="line">preferences: &#123;&#125;</span><br><span class="line"><span class="built_in">users</span>:</span><br><span class="line">- name: mambo</span><br><span class="line">  user:</span><br><span class="line">    client-certificate: mambo.pem</span><br><span class="line">    client-key: mambo-key.pem</span><br></pre></td></tr></table></figure><p>ìš°ë¦¬ëŠ” mambo ì‚¬ìš©ìì— ëŒ€í•œ Roleì„ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ìƒì„±í•˜ì§€ ì•Šì•˜ì§€ë§Œ íŒŒë“œê°€ ì¡°íšŒê°€ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ì¸ì¦ì„œ ë°œí–‰ ì‹œ <strong>system:masters</strong> ë¼ê³  ì§€ì •í•˜ì˜€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#user-facing-roles">Role</a>ì´ ì¡´ì¬í•˜ëŠ”ë° ê·¸ ì¤‘ì—ì„œ <code>system:masters</code>ëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ì ê·¸ë£¹(cluster-admin)ì„ ê°€ë¦¬í‚¤ê²Œë˜ì–´ mamboë¼ëŠ” ì‚¬ìš©ìëŠ” ëª¨ë“  ê¶Œí•œì„ ë³´ìœ í•œ ê²ƒìœ¼ë¡œ ì²˜ë¦¬ëœ ê²ƒì…ë‹ˆë‹¤.</p><blockquote><p>ê²°êµ­ mambo ë¼ëŠ” ì‚¬ìš©ìëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ì kubernetes-adminê³¼ ê°™ìŠµë‹ˆë‹¤.</p></blockquote><p>ìš°ë¦¬ëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìê°€ ì•„ë‹ˆë¼ íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë¥¼ ë§Œë“¤ê³  ì¸ì¦í•´ì•¼í•˜ë¯€ë¡œ ê¸°ì¡´ì— ë§Œë“¤ì—ˆë˜ ì¸ì¦ì„œë¥¼ ì‚­ì œí•˜ê³  íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì¸ì¦ì„œë¥¼ ë‹¤ì‹œ ë°œí–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¸ì¦ì„œ ì„œëª… ìš”ì²­ íŒŒì¼ ìˆ˜ì • ë° ì¸ì¦ì„œ ì¬ë°œí–‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee mambo-csr.json</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;CN&quot;: &quot;mambo&quot;,</span></span><br><span class="line"><span class="string">  &quot;key&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;algo&quot;: &quot;rsa&quot;,</span></span><br><span class="line"><span class="string">    &quot;size&quot;: 2048</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  &quot;names&quot;:[</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;O&quot;: &quot;admin:mambo&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sudo cfssl gencert -ca=ca.crt -ca-key=ca.key -config=mambo-config.json -profile=mambo mambo-csr.json | cfssljson -bare mambo</span><br></pre></td></tr></table></figure><p>ì´ì œ ë‹¤ì‹œ íë¸Œì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì˜ íŒŒë“œë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>í´ëŸ¬ìŠ¤í„° íŒŒë“œ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl get po -n kube-system --kubeconfig=config</span><br><span class="line">Error from server (Forbidden): pods is forbidden: User <span class="string">&quot;mambo&quot;</span> cannot list resource <span class="string">&quot;pods&quot;</span> <span class="keyword">in</span> API group <span class="string">&quot;&quot;</span> <span class="keyword">in</span> the namespace <span class="string">&quot;kube-system&quot;</span></span><br></pre></td></tr></table></figure><p><strong>system:masters</strong>ì„ ì§€ì •í–ˆë˜ê²ƒê³¼ ë‹¤ë¥´ê²Œ mambo ì‚¬ìš©ìëŠ” kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ëŒ€í•œ íŒŒë“œ ì¡°íšŒë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ê²Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ìš°ë¦¬ê°€ ì•„ì§ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— mambo ì‚¬ìš©ìì— ëŒ€í•œ Roleì„ ìƒì„±í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ì œ ë‹¤ìŒê³¼ ê°™ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— Mambo ì‚¬ìš©ìê°€ íŒŒë“œ ì¡°íšŒë¥¼ ìœ„í•œ ê¶Œí•œì„ ê°€ì§€ë„ë¡ Roleì„ ìƒì„±í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì‚¬ìš©ì Role ë° Rolebinding ìƒì„±</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee mambo-rbac.yaml</span></span><br><span class="line"><span class="string">apiVersion: rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="string">kind: Role</span></span><br><span class="line"><span class="string">metadata:</span></span><br><span class="line"><span class="string">  namespace: kube-system</span></span><br><span class="line"><span class="string">  name: mambo-rbac-role</span></span><br><span class="line"><span class="string">rules:</span></span><br><span class="line"><span class="string">- apiGroups: [&quot;&quot;]</span></span><br><span class="line"><span class="string">  resources: [&quot;pods&quot;]</span></span><br><span class="line"><span class="string">  verbs: [&quot;get&quot;, &quot;watch&quot;, &quot;list&quot;]</span></span><br><span class="line"><span class="string">---</span></span><br><span class="line"><span class="string">apiVersion: rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="string">kind: RoleBinding</span></span><br><span class="line"><span class="string">metadata:</span></span><br><span class="line"><span class="string">  namespace: kube-system</span></span><br><span class="line"><span class="string">  name: mambo-rbac-rolebinding</span></span><br><span class="line"><span class="string">subjects:</span></span><br><span class="line"><span class="string">- kind: User</span></span><br><span class="line"><span class="string">  name: mambo</span></span><br><span class="line"><span class="string">  apiGroup: rbac.authorization.k8s.io</span></span><br><span class="line"><span class="string">roleRef:</span></span><br><span class="line"><span class="string">  kind: Role</span></span><br><span class="line"><span class="string">  name: mambo-rbac-role</span></span><br><span class="line"><span class="string">  apiGroup: rbac.authorization.k8s.io</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">kubectl create -f mambo-rbac.yaml</span><br><span class="line">role.rbac.authorization.k8s.io/mambo-rbac-role created</span><br><span class="line">rolebinding.rbac.authorization.k8s.io/mambo-rbac-rolebinding created</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>í´ëŸ¬ìŠ¤í„° íŒŒë“œ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl get po -n kube-system --kubeconfig=mambo-config</span><br><span class="line">...</span><br><span class="line">NAME                                      READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-558bd4d5db-kvfhl                  1/1     Running   0          4h33m</span><br><span class="line">coredns-558bd4d5db-z7kf7                  1/1     Running   0          4h33m</span><br><span class="line">etcd-ip-172-31-6-192                      1/1     Running   0          3h54m</span><br><span class="line">kube-apiserver-ip-172-31-6-192            1/1     Running   0          3h54m</span><br><span class="line">kube-controller-manager-ip-172-31-6-192   1/1     Running   0          3h54m</span><br><span class="line">kube-flannel-ds-dh2xp                     1/1     Running   0          4h23m</span><br><span class="line">kube-proxy-tbm76                          1/1     Running   0          4h33m</span><br><span class="line">kube-scheduler-ip-172-31-6-192            1/1     Running   0          3h54m</span><br></pre></td></tr></table></figure><p>ì‹ ê·œ ì‚¬ìš©ìì— ëŒ€í•œ ì¸ì¦ì„œë¥¼ ë°œí–‰í•˜ê³  Roleì„ ë§Œë“¤ì–´ ì‚¬ìš©ìì—ê²Œ ë°”ì¸ë”©í•¨ìœ¼ë¡œì¨ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ë™ì‘ì¤‘ì¸ íŒŒë“œë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ê´€ë¦¬í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-ê´€ë¦¬í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬í•˜ê¸°</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ë°œí–‰ë˜ëŠ” ì¸ì¦ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 1ë…„ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë£Œì¼ìê°€ ì„¤ì •ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ê°€ ì‹œì‘ëœ ì§€ 1ë…„ì´ ì§€ë‚˜ê²Œë˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë™ì‘ì´ ì •ìƒì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œê°€ ë§Œë£Œë˜ê¸°ì „ì— ì¸ì¦ì„œë¥¼ ê°±ì‹ í•  ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤.</p><h3 id="í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ê°±ì‹ í•˜ê¸°"><a href="#í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ê°±ì‹ í•˜ê¸°" class="headerlink" title="í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ê°±ì‹ í•˜ê¸°"></a>í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ê°±ì‹ í•˜ê¸°</h3><p>ì•ì„œ ìš°ë¦¬ëŠ” í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹œì‘ ì‹œ ì™¸ë¶€ ì•„ì´í”¼ë¥¼ íŒŒë¼ë¯¸í„° ì˜µì…˜ìœ¼ë¡œ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ì˜í•˜ê³  ìˆëŠ” ë„ì¤‘ì—ëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ë‹¤ì‹œ ë°œí–‰í•˜ê¸° ìœ„í•´ì„œëŠ” <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init-phase/#cmd-phase-certs">kubeadm init phase certs</a> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/kubernetes/pki</span><br><span class="line"><span class="comment"># ê¸°ì¡´ ì¸ì¦ì„œ ì‚­ì œ ë˜ëŠ” ë°±ì—…</span></span><br><span class="line">sudo <span class="built_in">cp</span> apiserver.crt apiserver.crt.old</span><br><span class="line">sudo <span class="built_in">cp</span> apiserver.key apiserver.key.old</span><br><span class="line">sudo <span class="built_in">rm</span> apiserver.crt apiserver.key</span><br><span class="line"></span><br><span class="line">sudo kubeadm init phase certs apiserver --apiserver-advertise-address=172.31.6.192 --apiserver-cert-extra-sans=54.180.137.161</span><br><span class="line">[certs] Generating <span class="string">&quot;apiserver&quot;</span> certificate and key</span><br><span class="line">[certs] apiserver serving cert is signed <span class="keyword">for</span> DNS names [ip-172-31-6-192 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 172.31.6.192 54.180.137.161]</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œì‘ ì‹œ ìˆ˜í–‰í•˜ëŠ” ê³¼ì • ì¤‘ ì¼ë¶€ë¥¼ ìˆ˜í–‰í•˜ì—¬ API ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œë¥¼ ë°œí–‰í•˜ë©´ì„œ ì™¸ë¶€ ì•„ì´í”¼ê°€ í¬í•¨ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/control-kubernetes-cluster-07.png"></p><p>ìœ„ì™€ ê°™ì´ ì™¸ë¶€ í˜¸ìŠ¤íŠ¸ì¸ ë¡œì»¬ ì»´í“¨í„°ì—ì„œë„ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><h3 id="í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ë§Œë£Œì¼ì-ì¡°íšŒí•˜ê¸°"><a href="#í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ë§Œë£Œì¼ì-ì¡°íšŒí•˜ê¸°" class="headerlink" title="í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ë§Œë£Œì¼ì ì¡°íšŒí•˜ê¸°"></a>í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ë§Œë£Œì¼ì ì¡°íšŒí•˜ê¸°</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•˜ì§€ë§Œ ì¸ì¦ì„œê°€ ì–¸ì œ ë§Œë£Œë˜ëŠ”ì§€ë„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. <strong>kubeadm certs check-expiration</strong> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œì˜ ë§Œë£Œì¼ìë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ë§Œë£Œì¼ì ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm certs check-expiration</span><br><span class="line">[check-expiration] Reading configuration from the cluster...</span><br><span class="line">[check-expiration] FYI: You can look at this config file with <span class="string">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span></span><br><span class="line"></span><br><span class="line">CERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED</span><br><span class="line">admin.conf                 Jul 28, 2022 11:17 UTC   364d                                    no</span><br><span class="line">apiserver                  Jul 28, 2022 11:17 UTC   364d            ca                      no</span><br><span class="line">apiserver-etcd-client      Jul 28, 2022 11:17 UTC   364d            etcd-ca                 no</span><br><span class="line">apiserver-kubelet-client   Jul 28, 2022 11:17 UTC   364d            ca                      no</span><br><span class="line">controller-manager.conf    Jul 28, 2022 11:17 UTC   364d                                    no</span><br><span class="line">etcd-healthcheck-client    Jul 28, 2022 11:17 UTC   364d            etcd-ca                 no</span><br><span class="line">etcd-peer                  Jul 28, 2022 11:17 UTC   364d            etcd-ca                 no</span><br><span class="line">etcd-server                Jul 28, 2022 11:17 UTC   364d            etcd-ca                 no</span><br><span class="line">front-proxy-client         Jul 28, 2022 11:17 UTC   364d            front-proxy-ca          no</span><br><span class="line">scheduler.conf             Jul 28, 2022 11:17 UTC   364d                                    no</span><br><span class="line"></span><br><span class="line">CERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED</span><br><span class="line">ca                      Jul 26, 2031 11:17 UTC   9y              no</span><br><span class="line">etcd-ca                 Jul 26, 2031 11:17 UTC   9y              no</span><br><span class="line">front-proxy-ca          Jul 26, 2031 11:17 UTC   9y              no</span><br></pre></td></tr></table></figure><h3 id="í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ìˆ˜ë™-ê°±ì‹ "><a href="#í´ëŸ¬ìŠ¤í„°-ì¸ì¦ì„œ-ìˆ˜ë™-ê°±ì‹ " class="headerlink" title="í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ìˆ˜ë™ ê°±ì‹ "></a>í´ëŸ¬ìŠ¤í„° ì¸ì¦ì„œ ìˆ˜ë™ ê°±ì‹ </h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•˜ëŠ” ë°©ë²•ì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ìë™ìœ¼ë¡œ ê°±ì‹ ë˜ê²Œí•˜ê±°ë‚˜ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤. <strong>kubeadm certs renew all</strong> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê°±ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm certs renew all</span><br><span class="line">[renew] Reading configuration from the cluster...</span><br><span class="line">[renew] FYI: You can look at this config file with <span class="string">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span></span><br><span class="line"></span><br><span class="line">certificate embedded <span class="keyword">in</span> the kubeconfig file <span class="keyword">for</span> the admin to use and <span class="keyword">for</span> kubeadm itself renewed</span><br><span class="line">certificate <span class="keyword">for</span> serving the Kubernetes API renewed</span><br><span class="line">certificate the apiserver uses to access etcd renewed</span><br><span class="line">certificate <span class="keyword">for</span> the API server to connect to kubelet renewed</span><br><span class="line">certificate embedded <span class="keyword">in</span> the kubeconfig file <span class="keyword">for</span> the controller manager to use renewed</span><br><span class="line">certificate <span class="keyword">for</span> liveness probes to healthcheck etcd renewed</span><br><span class="line">certificate <span class="keyword">for</span> etcd nodes to communicate with each other renewed</span><br><span class="line">certificate <span class="keyword">for</span> serving etcd renewed</span><br><span class="line">certificate <span class="keyword">for</span> the front proxy client renewed</span><br><span class="line">certificate embedded <span class="keyword">in</span> the kubeconfig file <span class="keyword">for</span> the scheduler manager to use renewed</span><br><span class="line"></span><br><span class="line">Done renewing certificates. You must restart the kube-apiserver, kube-controller-manager, kube-scheduler and etcd, so that they can use the new certificates.</span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ì— ì¶œë ¥ëœ ì •ë³´ì— ë”°ë¼ ê°±ì‹ ëœ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ kube-apiserver, kube-controller-manager, kube-scheduler, etcd íŒŒë“œë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼í•˜ë¯€ë¡œ íë¸Œì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•˜ì—¬ íŒŒë“œ ì‚­ì œ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ëŠ” íŒŒë“œë¥¼ ì œê±°í•œ ë’¤ ë‹¤ì‹œ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¸ì¦ì„œë¥¼ ê°±ì‹ í•œ íŒŒë“œë¥¼ ì‚­ì œí•˜ì—¬ ì¬ì‹¤í–‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># ì‚­ì œí•  íŒŒë“œ ì¡°íšŒ</span></span><br><span class="line">kubectl get po -n kube-system</span><br><span class="line">NAME                                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-558bd4d5db-6fqm2               1/1     Running   0          33m</span><br><span class="line">coredns-558bd4d5db-kgdfs               1/1     Running   0          33m</span><br><span class="line">etcd-mambo-master                      1/1     Running   0          33m</span><br><span class="line">kube-apiserver-mambo-master            1/1     Running   0          33m</span><br><span class="line">kube-controller-manager-mambo-master   1/1     Running   0          33m</span><br><span class="line">kube-flannel-ds-g59bl                  1/1     Running   0          23m</span><br><span class="line">kube-flannel-ds-nf4xt                  1/1     Running   0          23m</span><br><span class="line">kube-flannel-ds-q5hkb                  1/1     Running   0          32m</span><br><span class="line">kube-proxy-7j5b6                       1/1     Running   0          33m</span><br><span class="line">kube-proxy-8f47j                       1/1     Running   0          23m</span><br><span class="line">kube-proxy-rflgf                       1/1     Running   0          23m</span><br><span class="line">kube-scheduler-mambo-master            1/1     Running   0          33m</span><br><span class="line"></span><br><span class="line"><span class="comment"># ì¸ì¦ì„œê°€ ê°±ì‹ ëœ íŒŒë“œë¥¼ ì‚­ì œ</span></span><br><span class="line">kubectl delete po kube-apiserver-mambo-master kube-controller-manager-mambo-master kube-scheduler-mambo-master etcd-mambo-master -n kube-system</span><br><span class="line">pod <span class="string">&quot;kube-apiserver-mambo-master&quot;</span> deleted</span><br><span class="line">pod <span class="string">&quot;kube-controller-manager-mambo-master&quot;</span> deleted</span><br><span class="line">pod <span class="string">&quot;kube-scheduler-mambo-master&quot;</span> deleted</span><br><span class="line">pod <span class="string">&quot;etcd-mambo-master&quot;</span> deleted</span><br><span class="line"></span><br><span class="line"><span class="comment"># ì‚­ì œí•œ íŒŒë“œê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ ì¡°íšŒ</span></span><br><span class="line">kubectl get po -n kube-system</span><br><span class="line">NAME                                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-558bd4d5db-6fqm2               1/1     Running   0          38m</span><br><span class="line">coredns-558bd4d5db-kgdfs               1/1     Running   0          38m</span><br><span class="line">etcd-mambo-master                      1/1     Running   0          11s</span><br><span class="line">kube-apiserver-mambo-master            1/1     Running   0          11s</span><br><span class="line">kube-controller-manager-mambo-master   1/1     Running   0          11s</span><br><span class="line">kube-flannel-ds-g59bl                  1/1     Running   0          29m</span><br><span class="line">kube-flannel-ds-nf4xt                  1/1     Running   0          29m</span><br><span class="line">kube-flannel-ds-q5hkb                  1/1     Running   0          38m</span><br><span class="line">kube-proxy-7j5b6                       1/1     Running   0          38m</span><br><span class="line">kube-proxy-8f47j                       1/1     Running   0          29m</span><br><span class="line">kube-proxy-rflgf                       1/1     Running   0          29m</span><br><span class="line">kube-scheduler-mambo-master            1/1     Running   0          11s</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œì— ëŒ€í•œ ë§Œë£Œì¼ìë¥¼ ë‹¤ì‹œ ì¡°íšŒí•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">sudo kubeadm certs check-expiration</span><br><span class="line">[check-expiration] Reading configuration from the cluster...</span><br><span class="line">[check-expiration] FYI: You can look at this config file with <span class="string">&#x27;kubectl -n kube-system get cm kubeadm-config -o yaml&#x27;</span></span><br><span class="line"></span><br><span class="line">CERTIFICATE                EXPIRES                  RESIDUAL TIME   CERTIFICATE AUTHORITY   EXTERNALLY MANAGED</span><br><span class="line">admin.conf                 Jul 28, 2022 11:45 UTC   364d                                    no</span><br><span class="line">apiserver                  Jul 28, 2022 11:45 UTC   364d            ca                      no</span><br><span class="line">apiserver-etcd-client      Jul 28, 2022 11:45 UTC   364d            etcd-ca                 no</span><br><span class="line">apiserver-kubelet-client   Jul 28, 2022 11:45 UTC   364d            ca                      no</span><br><span class="line">controller-manager.conf    Jul 28, 2022 11:45 UTC   364d                                    no</span><br><span class="line">etcd-healthcheck-client    Jul 28, 2022 11:45 UTC   364d            etcd-ca                 no</span><br><span class="line">etcd-peer                  Jul 28, 2022 11:45 UTC   364d            etcd-ca                 no</span><br><span class="line">etcd-server                Jul 28, 2022 11:45 UTC   364d            etcd-ca                 no</span><br><span class="line">front-proxy-client         Jul 28, 2022 11:45 UTC   364d            front-proxy-ca          no</span><br><span class="line">scheduler.conf             Jul 28, 2022 11:45 UTC   364d                                    no</span><br><span class="line"></span><br><span class="line">CERTIFICATE AUTHORITY   EXPIRES                  RESIDUAL TIME   EXTERNALLY MANAGED</span><br><span class="line">ca                      Jul 26, 2031 11:17 UTC   9y              no</span><br><span class="line">etcd-ca                 Jul 26, 2031 11:17 UTC   9y              no</span><br><span class="line">front-proxy-ca          Jul 26, 2031 11:17 UTC   9y              no</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ë§Œë£Œì¼ìê°€ ê°±ì‹ ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ì„¤ì¹˜í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ì„¤ì¹˜í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„¤ì¹˜í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„¤ì¹˜í•˜ê¸°</h2><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì• ë“œì˜¨ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì›¹ UI ê¸°ë°˜ìœ¼ë¡œ ì œì–´í•˜ê³  í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì• ë“œì˜¨ ì„¤ì¹˜</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.3.1/aio/deploy/recommended.yaml</span><br><span class="line">---</span><br><span class="line">namespace/kubernetes-dashboard created</span><br><span class="line">serviceaccount/kubernetes-dashboard created</span><br><span class="line">service/kubernetes-dashboard created</span><br><span class="line">secret/kubernetes-dashboard-certs created</span><br><span class="line">secret/kubernetes-dashboard-csrf created</span><br><span class="line">secret/kubernetes-dashboard-key-holder created</span><br><span class="line">configmap/kubernetes-dashboard-settings created</span><br><span class="line">role.rbac.authorization.k8s.io/kubernetes-dashboard created</span><br><span class="line">clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created</span><br><span class="line">rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created</span><br><span class="line">clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created</span><br><span class="line">deployment.apps/kubernetes-dashboard created</span><br><span class="line">service/dashboard-metrics-scraper created</span><br><span class="line">deployment.apps/dashboard-metrics-scraper created</span><br><span class="line"></span><br><span class="line">kubectl get deploy -n kubernetes-dashboard</span><br><span class="line">---</span><br><span class="line">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">dashboard-metrics-scraper   1/1     1            1           24s</span><br><span class="line">kubernetes-dashboard        1/1     1            1           24s</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¥¼ ì„¤ì¹˜í–ˆì§€ë§Œ ì„œë¹„ìŠ¤ë¥¼ ì¡°íšŒí•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ <strong>ClusterIP</strong> ìœ í˜•ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl get svc -n kubernetes-dashboard</span><br><span class="line">NAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">dashboard-metrics-scraper   ClusterIP   10.108.18.117   &lt;none&gt;        8000/TCP   74s</span><br><span class="line">kubernetes-dashboard        ClusterIP   10.100.36.145   &lt;none&gt;        443/TCP    74s</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ëŒ€í•œ ì„œë¹„ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ClusterIP ìœ í˜•ìœ¼ë¡œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ íë¸Œì»¨íŠ¸ë¡¤ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— í”„ë¡ì‹œë¥¼ í™œì„±í™”í•˜ê³ ë‚˜ì„œ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ ë§ˆìŠ¤í„° ë…¸ë“œì— ëŒ€í•´ì„œ SSH í„°ë„ë§ì„ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° í”„ë¡ì‹œ ë° SSH í„°ë„ë§</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl cluster-info</span><br><span class="line">Kubernetes control plane is running at https://192.168.0.5:6443</span><br><span class="line">CoreDNS is running at https://192.168.0.5:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br><span class="line"></span><br><span class="line">kubectl proxy</span><br><span class="line">Starting to serve on 127.0.0.1:8001</span><br><span class="line"><span class="comment"># http://127.0.0.1:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</span></span><br><span class="line"></span><br><span class="line">ssh -L 8001:localhost:8001 mambo@192.168.0.5</span><br></pre></td></tr></table></figure><p>ì´ì œ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ <a target="_blank" rel="noopener" href="http://127.0.0.1:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/%EB%A1%9C">http://127.0.0.1:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ë¡œ</a> ì ‘ì†í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ë¡œê·¸ì¸ í™”ë©´ì´ í‘œì‹œë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-02.png"></p><p>í•˜ì§€ë§Œ, ì´ë ‡ê²Œ SSH í„°ë„ë§ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì€ ë¶ˆí¸í•œì ì´ ìˆê¸° ë•Œë¬¸ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¥¼ ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¥¼ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ì˜ ìœ í˜•ì„ ClusterIP ì—ì„œ <strong>NodePort</strong>ë¡œ ë³€ê²½í•´ì•¼í•©ë‹ˆë‹¤.</p><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ì„œë¹„ìŠ¤-ìœ í˜•-ë³€ê²½í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ì„œë¹„ìŠ¤-ìœ í˜•-ë³€ê²½í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ìœ í˜• ë³€ê²½í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ìœ í˜• ë³€ê²½í•˜ê¸°</h3><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ë³€ê²½</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl edit svc kubernetes-dashboard -n kubernetes-dashboard</span><br><span class="line"></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: <span class="string">&quot;2021-07-30T10:47:00Z&quot;</span></span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  name: kubernetes-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">  resourceVersion: <span class="string">&quot;240375&quot;</span></span><br><span class="line">  uid: ae974cb2-d0af-46be-8036-4a9d33c9afbd</span><br><span class="line">spec:</span><br><span class="line">  clusterIP: 10.100.36.145</span><br><span class="line">  clusterIPs:</span><br><span class="line">  - 10.100.36.145</span><br><span class="line">  ipFamilies:</span><br><span class="line">  - IPv4</span><br><span class="line">  ipFamilyPolicy: SingleStack</span><br><span class="line">  ports:</span><br><span class="line">  - port: 443</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 8443</span><br><span class="line">  selector:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br><span class="line">status:</span><br><span class="line">  loadBalancer: &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># kubectl get service kubernetes-dashboard -n kubernetes-dashboard -o jsonpath=&quot;&#123;.spec.ports[0].nodePort&#125;&quot; | awk &#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">kubectl get svc kubernetes-dashboard -n kubernetes-dashboard</span><br><span class="line">NAME                   TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE</span><br><span class="line">kubernetes-dashboard   NodePort   10.100.36.145   &lt;none&gt;        443:31532/TCP   21m</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œê°€ 31532 í¬íŠ¸ë¡œ ë…¸ì¶œë˜ì—ˆìœ¼ë‹ˆ <strong><a target="_blank" rel="noopener" href="https://192.168.0.5:31532/">https://192.168.0.5:31532</a></strong>ìœ¼ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-01.png"></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë£¨íŠ¸ CA ì¸ì¦ì„œê°€ í˜„ì¬ ë¸Œë¼ìš°ì €ì— ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CA ì¸ì¦ì„œë¡œ ë“±ë¡ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— <strong>ì•ˆì „í•˜ì§€ ì•ŠìŒìœ¼ë¡œ ì´ë™</strong>ì„ ëˆŒëŸ¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ë¡œê·¸ì¸í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œ-ë¡œê·¸ì¸í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ë¡œê·¸ì¸í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ë¡œê·¸ì¸í•˜ê¸°</h3><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-02.png"></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ì˜ í† í°ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íë¸Œì»¨íŠ¸ë¡¤ë¡œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìì˜ í† í°ì„ ì¡°íšŒí•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ì í† í° ì¡°íšŒ</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># kubectl get secret -n kubernetes-dashboard $(kubectl get sa kubernetes-dashboard -n kubernetes-dashboard -o jsonpath=&quot;&#123;.secrets[0].name&#125;&quot;) -o jsonpath=&quot;&#123;.data.token&#125;&quot; | base64 --decode | awk &#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">kubectl describe secret $(kubectl get secret -n kubernetes-dashboard | grep kubernetes-dashboard-token | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>) -n kubernetes-dashboard</span><br><span class="line"></span><br><span class="line">Name:         kubernetes-dashboard-token-4qs2r</span><br><span class="line">Namespace:    kubernetes-dashboard</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubernetes.io/service-account.name: kubernetes-dashboard</span><br><span class="line">              kubernetes.io/service-account.uid: 52ab8346-d0ce-465a-b170-1a240cbcbf83</span><br><span class="line"></span><br><span class="line">Type:  kubernetes.io/service-account-token</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">namespace:  20 bytes</span><br><span class="line">token:      eyJhbGciOiJSUzI1NiIsImtpZCI6InhrcWdOeEV2RFh2ajZES0Z1b0lLb3F2TmtuSUVnLVdFbktadk9SWjNYXzQifQ....</span><br><span class="line">ca.crt:     1066 bytes</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìì˜ í† í°ì„ ë³µì‚¬í•´ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-03.png"></p><p>í† í°ì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ë˜ì—ˆì§€ë§Œ ì´ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ê³  ìˆì§€ ì•Šì•„ì„œ ì–´ë– í•œ ì •ë³´ë„ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-04.png"></p><p>ìš°ë¦¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ê¶Œí•œì„ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìì—ê²Œ ë¶€ì—¬í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl delete clusterrole kubernetes-dashboard -n kubernetes-dashboard</span><br><span class="line">kubectl delete clusterrolebinding kubernetes-dashboard -n kubernetes-dashboard</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee dashboard-admin.yaml</span></span><br><span class="line"><span class="string">apiVersion: rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="string">kind: ClusterRoleBinding</span></span><br><span class="line"><span class="string">metadata:</span></span><br><span class="line"><span class="string">  name: kubernetes-dashboard</span></span><br><span class="line"><span class="string">  namespace: kubernetes-dashboard</span></span><br><span class="line"><span class="string">roleRef:</span></span><br><span class="line"><span class="string">  apiGroup: rbac.authorization.k8s.io</span></span><br><span class="line"><span class="string">  kind: ClusterRole</span></span><br><span class="line"><span class="string">  name: cluster-admin</span></span><br><span class="line"><span class="string">subjects:</span></span><br><span class="line"><span class="string">  - kind: ServiceAccount</span></span><br><span class="line"><span class="string">    name: kubernetes-dashboard</span></span><br><span class="line"><span class="string">    namespace: kubernetes-dashboard</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">kubectl create -f dashboard-admin.yaml</span><br><span class="line">clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created</span><br></pre></td></tr></table></figure><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìì—ê²Œ ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” <strong>ClusterRole</strong>ê³¼ <strong>ClusterRoleBinding</strong>ì„ ë‹¤ì‹œ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ë‹¤ì‹œ ë¡œê·¸ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-05.png"></p><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì˜ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ê°€ í´ëŸ¬ìŠ¤í„° ê¶Œí•œì„ ê°€ì§€ê²Œ ë˜ì—ˆìœ¼ë¯€ë¡œ ëŒ€ì‹œë³´ë“œì— <strong>ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤</strong>ì— ëŒ€í•œ ì›Œí¬ë¡œë“œ ìƒíƒœë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œì—ì„œ-ë§¤íŠ¸ë¦­-ì„œë²„-ì„¤ì¹˜í•˜ê¸°"><a href="#ì¿ ë²„ë„¤í‹°ìŠ¤-ëŒ€ì‹œë³´ë“œì—ì„œ-ë§¤íŠ¸ë¦­-ì„œë²„-ì„¤ì¹˜í•˜ê¸°" class="headerlink" title="ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì—ì„œ ë§¤íŠ¸ë¦­ ì„œë²„ ì„¤ì¹˜í•˜ê¸°"></a>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì—ì„œ ë§¤íŠ¸ë¦­ ì„œë²„ ì„¤ì¹˜í•˜ê¸°</h3><p>ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì—ì„œ í´ëŸ¬ìŠ¤í„° ì œì–´ê°€ ê°€ëŠ¥í•œì§€ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ì— ë§¤íŠ¸ë¦­ ì„œë²„(metrics-server)ë¥¼ ì„¤ì¹˜í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p><a target="_blank" rel="noopener" href="https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml">https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</a></p><p>ìœ„ YAML íŒŒì¼ì„ ë‹¤ìš´ë°›ì•„ì„œ ì•„ë˜ í™”ë©´ê³¼ ê°™ì´ <strong>kubelet-insecure-tls</strong> ì˜µì…˜ì„ ì¶”ê°€í•˜ì—¬ ì—…ë¡œë“œ ë²„íŠ¼ì„ ì„ íƒí•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/setup-kubernetes-cluster/access-kubernetes-dashboard-06.png"></p><p>ë§¤íŠ¸ë¦­ ì„œë²„ê°€ ì„¤ì¹˜ë˜ì—ˆìœ¼ë¯€ë¡œ íë¸Œì»¨íŠ¸ë¡¤ìœ¼ë¡œ ë§¤íŠ¸ë¦­ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">kubectl top no --use-protocol-buffers</span><br><span class="line"></span><br><span class="line">NAME              CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%</span><br><span class="line">mambo-master      136m         13%    1275Mi          67%</span><br><span class="line">mambo-worker-01   22m          2%     710Mi           37%</span><br><span class="line">mambo-worker-02   33m          3%     815Mi           43%</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•´ì„œë„ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œëŠ” í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì— ë…¸ì¶œë˜ì–´ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ìì˜ í† í°ì´ ìœ ì¶œë˜ì§€ ì•Šë„ë¡ ì˜ ê´€ë¦¬í•´ì•¼í•©ë‹ˆë‹¤. ì €ëŠ” í•™ìŠµ ëª©ì ìœ¼ë¡œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìê°€ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ê²Œ í•˜ì˜€ì§€ë§Œ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ”ê²Œ ì•„ë‹ˆë¼ ì¿ ë²„ë„¤í‹°ìŠ¤ ëŒ€ì‹œë³´ë“œì— ë¡œê·¸ì¸í•  ì‚¬ìš©ìë¥¼ ë³„ë„ë¡œ ë§Œë“¤ì–´ì„œ íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°œë³„ì ìœ¼ë¡œ ì§€ì •í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p><p>ì´ìƒìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ í•™ìŠµì„ ë§ˆì¹©ë‹ˆë‹¤.</p></div></div><div class="comments giscus-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"ğŸŒ—",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"kdevkr/kdevkr.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxNTQxNjA4OTA=","category":"Announcements","category_id":"DIC_kwDOCTBO-s4CYmQM","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"ko","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script></body></html>