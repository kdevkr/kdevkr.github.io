<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mambo</title>
  
  <subtitle>Today I Learned ğŸ”¥</subtitle>
  <link href="https://kdevkr.github.io/atom.xml" rel="self"/>
  
  <link href="https://kdevkr.github.io/"/>
  <updated>2024-03-14T22:06:19.443Z</updated>
  <id>https://kdevkr.github.io/</id>
  
  <author>
    <name>Mambo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ë ˆë””ìŠ¤ ì›¹ì†Œì¼“ ì•ŒëŒ ë™ê¸°í™”</title>
    <link href="https://kdevkr.github.io/spring-boot-redis-websocket-sync/"/>
    <id>https://kdevkr.github.io/spring-boot-redis-websocket-sync/</id>
    <published>2024-03-14T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ì›¹ì†Œì¼“-ì•ŒëŒ-ê°±ì‹ -ë™ê¸°í™”"><a href="#ì›¹ì†Œì¼“-ì•ŒëŒ-ê°±ì‹ -ë™ê¸°í™”" class="headerlink" title="ì›¹ì†Œì¼“ ì•ŒëŒ ê°±ì‹  ë™ê¸°í™”"></a>ì›¹ì†Œì¼“ ì•ŒëŒ ê°±ì‹  ë™ê¸°í™”</h4><p>ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œëŠ” ì±„íŒ…ìœ¼ë¡œ ê³µìœ ë˜ê³  ìˆì§€ë§Œ ì¼ë°˜ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ì›¹ì†Œì¼“ ê¸°ëŠ¥ì€ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œì˜ ì•ŒëŒê³¼ ì´ë²¤íŠ¸ë¥¼ ì¦‰ì‹œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆì„ ê²ƒì´ë‹¤. ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ë  ë¶€ë¶„ì´ì§€ë§Œ ìŠ¤ì¼€ì¼ ì•„ì›ƒë˜ì–´ ë¶„ì‚° ì²˜ë¦¬ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê°ê° ì—°ê²°ëœ ì›¹ì†Œì¼“ìœ¼ë¡œ íŠ¹ì • ì„œë²„ì—ì„œ ë°œìƒí•˜ì—¬ ë§Œë“¤ì–´ì§€ëŠ” ì•ŒëŒ ì •ë³´ë¥¼ ì¦‰ì‹œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì „íŒŒí•˜ê³  ë™ê¸°í™”í•˜ëŠ” ë°©ì•ˆì´ í•„ìš”í•˜ë‹¤. <a href="https://pompitzz.github.io/blog/Redis/LocalCacheSyncWithRedisPubSub.html">Redis(Pub&#x2F;Sub)ë¡œ ë¡œì»¬ ìºì‹œ ë™ê¸°í™”í•˜ê¸°</a>ì™€ ë¹„ìŠ·í•˜ë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token keyword">implements</span> <span class="token class-name">MessageListener</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ChannelTopic</span> topic <span class="token operator">=</span> <span class="token class-name">ChannelTopic</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"NOTIFICATIONS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">StringRedisTemplate</span> redisTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">CommandLineRunner</span> <span class="token function">commandLineRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> args <span class="token operator">-></span> redisTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>topic<span class="token punctuation">.</span><span class="token function">getTopic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"REQUIRE.SYNC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RedisMessageListenerContainer</span> <span class="token function">redisMessageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> connectionFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">RedisMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisMessageListenerContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">addMessageListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> container<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">MessageListenerAdapter</span> <span class="token function">listenerAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pattern<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"receive: &#123;&#125;"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="í™œìš©-í´ë˜ìŠ¤-ëª©ë¡"><a href="#í™œìš©-í´ë˜ìŠ¤-ëª©ë¡" class="headerlink" title="í™œìš© í´ë˜ìŠ¤ ëª©ë¡"></a>í™œìš© í´ë˜ìŠ¤ ëª©ë¡</h4><p>ë ˆë””ìŠ¤ì— ì˜í•œ Pub&#x2F;Subì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ í´ë˜ìŠ¤ë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>RedisMessageListenerContainer</li><li>RedisConnectionFactory</li><li>MessageListenerAdapter</li><li>MessageListener</li><li>StringRedisTemplate</li><li>ChannelTopic</li></ul><h4 id="ì°¸ê³ -ë§í¬"><a href="#ì°¸ê³ -ë§í¬" class="headerlink" title="ì°¸ê³  ë§í¬"></a>ì°¸ê³  ë§í¬</h4><ul><li><a href="https://redis.io/docs/interact/pubsub/">How to use pub&#x2F;sub channels in Redis</a></li><li><a href="https://docs.spring.io/spring-data/redis/reference/redis/pubsub.html">Pub&#x2F;Sub Messaging</a></li><li><a href="https://www.baeldung.com/spring-data-redis-pub-sub">PubSub Messaging with Spring Data Redis</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;ì›¹ì†Œì¼“-ì•ŒëŒ-ê°±ì‹ -ë™ê¸°í™”&quot;&gt;&lt;a href=&quot;#ì›¹ì†Œì¼“-ì•ŒëŒ-ê°±ì‹ -ë™ê¸°í™”&quot; class=&quot;headerlink&quot; title=&quot;ì›¹ì†Œì¼“ ì•ŒëŒ ê°±ì‹  ë™ê¸°í™”&quot;&gt;&lt;/a&gt;ì›¹ì†Œì¼“ ì•ŒëŒ ê°±ì‹  ë™ê¸°í™”&lt;/h4&gt;&lt;p&gt;ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œëŠ” ì±„íŒ…ìœ¼ë¡œ ê³µìœ ë˜ê³  ìˆì§€ë§Œ ì¼ë°˜ì </summary>
      
    
    
    
    
    <category term="Redis" scheme="https://kdevkr.github.io/tags/Redis/"/>
    
    <category term="Websocket" scheme="https://kdevkr.github.io/tags/Websocket/"/>
    
  </entry>
  
  <entry>
    <title>êµ¬ê¸€ ì£¼ì†Œ ê²€ìƒ‰ìœ¼ë¡œ ìœ„ ê²½ë„ ì¡°íšŒ</title>
    <link href="https://kdevkr.github.io/google-address-search/"/>
    <id>https://kdevkr.github.io/google-address-search/</id>
    <published>2024-03-10T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://mapsplatform.google.com/">Google Maps Platform</a>ì„ í†µí•´ ì£¼ì†Œ ë˜ëŠ” ìœ„ â€¢ ê²½ë„ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. Places ë˜ëŠ” Geocoding API ëª¨ë‘ì—ì„œ í•œêµ­ì–´ë¥¼ í¬í•¨í•œ ë‹¤ì–‘í•œ ì–¸ì–´ì— ëŒ€í•´ ê²€ìƒ‰ì„ ì§€ì›í•œë‹¤. ë¹„ë¡ êµ­ë‚´ ëŒ€ìƒìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” <a href="https://postcode.map.daum.net/guide">ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ìì„¸í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸°ëŠ” í˜ë“¤ì§€ë§Œ êµ­ë‚´ ì£¼ì†Œ ë¿ë§Œ ì•„ë‹ˆë¼ í•´ì™¸ ì£¼ì†Œë‚˜ ìœ„ì¹˜ì— ëŒ€í•œ ê²€ìƒ‰ì„ ì»¤ë²„í•˜ê¸° ìœ„í•´ì„œëŠ” ê±°ì˜ ëŒ€ì•ˆì´ ì—†ë‹¤ê³  ìƒê°ëœë‹¤. ë˜í•œ, HTTP ìš”ì²­ì„ ì§ì ‘ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆë‹¤.</p><ul><li><a href="https://github.com/googlemaps/react-wrapper">Google Maps JavaScript API React Wrapper</a></li><li><a href="https://vue-map.netlify.app/">Vue 3 Google maps</a></li><li><a href="https://github.com/googlemaps/google-maps-services-java">Java Client for Google Maps Services</a></li></ul><h4 id="FE-Vue-3-Google-maps"><a href="#FE-Vue-3-Google-maps" class="headerlink" title="[FE] Vue 3 Google maps"></a>[FE] Vue 3 Google maps</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token keyword">import</span> VueGoogleMaps <span class="token keyword">from</span> <span class="token string">'@fawmi/vue-google-maps'</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueGoogleMaps<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">load</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_GOOGLE_MAP_API_KEY</span><span class="token punctuation">,</span>        <span class="token literal-property property">libraries</span><span class="token operator">:</span> <span class="token string">"places"</span><span class="token punctuation">,</span>        <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'ja'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span></code></pre><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GMapAutocomplete</span>    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Please input address<span class="token punctuation">"</span></span>    <span class="token attr-name">@place_changed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(result) => console.log(result)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>GMapAutocomplete</span><span class="token punctuation">></span></span></code></pre><h4 id="BE-Java-Client-for-Google-Maps-Services"><a href="#BE-Java-Client-for-Google-Maps-Services" class="headerlink" title="[BE] Java Client for Google Maps Services"></a>[BE] Java Client for Google Maps Services</h4><pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>    implementation <span class="token string">'com.google.maps:google-maps-services:2.2.0'</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">GoogleMapTests</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token class-name">Test_Places</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">GeoApiContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeoApiContext<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">apiKey</span><span class="token punctuation">(</span>apiKey<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">queryRateLimit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">PlaceAutocompleteRequest<span class="token punctuation">.</span>SessionToken</span> session <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PlaceAutocompleteRequest<span class="token punctuation">.</span>SessionToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> input <span class="token operator">=</span> <span class="token string">"ê°•ë‚¨ì—­"</span><span class="token punctuation">;</span>            <span class="token class-name">AutocompletePrediction</span><span class="token punctuation">[</span><span class="token punctuation">]</span> predictions <span class="token operator">=</span> <span class="token class-name">PlacesApi</span><span class="token punctuation">.</span><span class="token function">placeAutocomplete</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> input<span class="token punctuation">,</span> session<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>predictions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            context<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Place-Autocomplete-ìµœì í™”"><a href="#Place-Autocomplete-ìµœì í™”" class="headerlink" title="Place Autocomplete ìµœì í™”"></a>Place Autocomplete ìµœì í™”</h4><p>Places API ì™€ Geocoding API ëª¨ë‘ <a href="https://developers.google.com/maps/documentation/geocoding/usage-and-billing">ì‚¬ìš©í•œ ë§Œí¼ ì§€ë¶ˆí•˜ëŠ” ê°€ê²© ëª¨ë¸</a>ì„ ê°€ì§€ë¯€ë¡œ <a href="https://developers.google.com/maps/documentation/places/web-service/autocomplete">Place Autocomplete ìµœì í™”</a> ì™€ <a href="https://developers.google.com/maps/documentation/geocoding/best-practices">ì£¼ì†Œ ì§€ì˜¤ì½”ë”© ê¶Œì¥ì‚¬í•­</a> ê°™ì€ ì •ë³´ê°€ ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤. ì£¼ì†Œì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•œ ê²ƒì´ ì•„ë‹Œ ì£¼ì†Œ ë° ìœ„ì¹˜ ì •ë³´ë§Œ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš°ì—ëŠ” ì•„ë˜ì˜ í•­ëª©ì„ ì²´í¬í•´ë³´ë„ë¡ í•˜ì.</p><ul><li>ì£¼ì†Œì™€ ìœ„ì¹˜ ì •ë³´ë§Œì„ í•„ìš”ë¡œ í•œë‹¤ë©´ Place Autocomplete ë³´ë‹¤ëŠ” Geocoding APIê°€ íš¨ìœ¨ì ì´ë‹¤.</li><li>ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì£¼ì†Œë¥¼ ëª…í™•í•˜ê²Œ ì•Œê³  ìˆë‹¤ë©´ Geocoding APIë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤.</li></ul><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">GoogleMapTests</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">GeoApiContext</span> context<span class="token punctuation">;</span>    <span class="token annotation punctuation">@BeforeAll</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeoApiContext<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apiKey</span><span class="token punctuation">(</span>apiKey<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">queryRateLimit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token class-name">Test_Geocoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> address <span class="token operator">=</span> <span class="token string">"ê°•ë‚¨ì—­"</span><span class="token punctuation">;</span>            <span class="token class-name">GeocodingResult</span><span class="token punctuation">[</span><span class="token punctuation">]</span> results <span class="token operator">=</span>  <span class="token class-name">GeocodingApi</span><span class="token punctuation">.</span><span class="token function">geocode</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> address<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">language</span><span class="token punctuation">(</span><span class="token string">"ko"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">locationType</span><span class="token punctuation">(</span><span class="token class-name">LocationType</span><span class="token punctuation">.</span><span class="token constant">ROOFTOP</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">resultType</span><span class="token punctuation">(</span><span class="token class-name">AddressType</span><span class="token punctuation">.</span><span class="token constant">STREET_ADDRESS</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            context<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Samples"><a href="#Samples" class="headerlink" title="Samples"></a>Samples</h4><ul><li><a href="https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple">Geocoding Service</a></li><li><a href="https://developers.google.com/maps/documentation/javascript/examples/geocoding-reverse">Reverse Geocoding</a></li><li><a href="https://developers.google.com/maps/documentation/javascript/examples/geocoding-place-id">Get the Address for a Place ID</a></li><li><a href="https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete">Place Autocomplete</a></li><li><a href="https://developers.google.com/maps/documentation/javascript/examples/place-details">Place Details</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://mapsplatform.google.com/&quot;&gt;Google Maps Platform&lt;/a&gt;ì„ í†µí•´ ì£¼ì†Œ ë˜ëŠ” ìœ„ â€¢ ê²½ë„ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. Places ë˜ëŠ” Geocoding API ëª¨ë‘ì—ì„œ í•œêµ­ì–´ë¥¼ í¬í•¨í•œ </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ì—”ì§„ì—‘ìŠ¤ íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§</title>
    <link href="https://kdevkr.github.io/nginx-mirror/"/>
    <id>https://kdevkr.github.io/nginx-mirror/</id>
    <published>2024-03-02T03:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ì—”ì§„ì—‘ìŠ¤(Nginx)ì˜ <code>ngx_http_mirror_module</code> ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•˜ëŠ” <a href="https://medium.com/gaurav-shukla/testing-your-code-against-production-using-nginx-mirroring-567b3c2f4921">ì¼ë¶€ íŠ¸ë˜í”½ì„ ë³µì œí•˜ì—¬ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬</a>í•  ìˆ˜ ìˆë‹¤. ìš°ë¦¬ëŠ” ì´ê²ƒì„ í™œìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•˜ëŠ” íŠ¸ë˜í”½ì„ ì•Œ ìˆ˜ ì—†ëŠ” ìƒí™©ì´ì§€ë§Œ ì–´ë– í•œ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆì„ë•Œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ì„œ êµ¬ë™í•˜ê³  ë””ë²„ê·¸í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p><h4 id="íŠ¸ë˜í”½-ë¯¸ëŸ¬ë§-ì„¤ì •"><a href="#íŠ¸ë˜í”½-ë¯¸ëŸ¬ë§-ì„¤ì •" class="headerlink" title="íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§ ì„¤ì •"></a>íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§ ì„¤ì •</h4><pre class="language-conf" data-language="conf"><div class="caption"><span>nginx.conf</span></div><code class="language-conf">http &#123;    upstream backend_for_test &#123;        server app:8081;        keepalive 128;    &#125;    server &#123;        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        # hop-by-hop        proxy_http_version 1.1;        location &#x2F;mtls&#x2F; &#123;            proxy_pass http:&#x2F;&#x2F;backend;            mirror &#x2F;mirror;            mirror_request_body on;        &#125;        location &#x2F;mtls_mirror &#123;            internal;            proxy_pass http:&#x2F;&#x2F;backend_for_test$request_uri;        &#125;    &#125;&#125;</code></pre><blockquote><p>ë¬¸ì œì— ëŒ€í•œ ì›ì¸ì„ íŒŒì•…í•˜ê¸° ìœ„í•œ ìš”ì²­ì— ë°”ë”” ì •ë³´ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš° mirror_request_body ì˜µì…˜ì„ ë¹„í™œì„±í™”(off) í•˜ì„¸ìš”.</p></blockquote><h4 id="íŠ¸ë˜í”½-ë¯¸ëŸ¬ë§-ì¶œë ¥"><a href="#íŠ¸ë˜í”½-ë¯¸ëŸ¬ë§-ì¶œë ¥" class="headerlink" title="íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§ ì¶œë ¥"></a>íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§ ì¶œë ¥</h4><p>ì¼ë°˜ì ìœ¼ë¡œ ì„œë²„ í¬íŠ¸ ì˜¤í”ˆì„ í™•ì¸í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” Netcat ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°„ë‹¨í•œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ë³µì œëœ íŠ¸ë˜í”½ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶œë ¥í•´ë³¼ ìˆ˜ ìˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">nc</span> <span class="token parameter variable">-lp</span> localhost <span class="token number">8081</span></code></pre><blockquote><p>AWS í™˜ê²½ì—ì„œ ìš´ì˜í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§ì€ <a href="https://aws.amazon.com/ko/blogs/tech/mirror-production-traffic-to-test-environment-with-vpc-traffic-mirroring/">VPC íŠ¸ë˜í”½ ë¯¸ëŸ¬ë§</a>ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì í•©í•©ë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì—”ì§„ì—‘ìŠ¤(Nginx)ì˜ &lt;code&gt;ngx_http_mirror_module&lt;/code&gt; ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•˜ëŠ” &lt;a href=&quot;https://medium.com/gaurav-shukla/testing-your-co</summary>
      
    
    
    
    
    <category term="nginx" scheme="https://kdevkr.github.io/tags/nginx/"/>
    
    <category term="mirror" scheme="https://kdevkr.github.io/tags/mirror/"/>
    
  </entry>
  
  <entry>
    <title>AWS Elastic Beanstalk ë¡œê·¸ ì•Œì•„ë³´ê¸°</title>
    <link href="https://kdevkr.github.io/beanstalk-logs/"/>
    <id>https://kdevkr.github.io/beanstalk-logs/</id>
    <published>2024-03-01T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<p><img data-src="/images/posts/beanstalk-logs/01.png"></p><p>AWS Elastic Beanstalk í™˜ê²½ ì½˜ì†”ì˜ ë¡œê·¸ ë©”ë‰´ì—ì„œ ë¡œê·¸ ìš”ì²­ì„ í†µí•´ ì „ì²´(ë²ˆë“¤) ë˜ëŠ” ë§ˆì§€ë§‰ 100ì¤„(í…Œì¼) ë¡œê·¸ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ìš”ì²­ì— ëŒ€í•œ ë¡œê·¸ëŠ” ì•„ë˜ì˜ íŒŒì¼ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜¤ë©° ì‚¬ìš©ì ê¶Œí•œì„ í†µí•´ S3 ë²„í‚·ì— ì €ì¥í•œ í›„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤. ë”°ë¼ì„œ, ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì— S3ì— ëŒ€í•œ ê¶Œí•œ ì •ì±…ì´ í¬í•¨ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.</p><ul><li>í…Œì¼ ë¡œê·¸ - &#x2F;opt&#x2F;elasticbeanstalk&#x2F;tasks&#x2F;taillogs.d&#x2F;</li><li>ë²ˆë“¤ ë¡œê·¸ - &#x2F;opt&#x2F;elasticbeanstalk&#x2F;tasks&#x2F;bundlelogs.d&#x2F;</li><li>íšŒì „ëœ ë¡œê·¸ - &#x2F;opt&#x2F;elasticbeanstalk&#x2F;tasks&#x2F;publishlogs.d&#x2F;</li></ul><blockquote><p>S3ì— ì €ì¥ë˜ëŠ” ë¡œê·¸ ìœ„ì¹˜ëŠ” elasticbeanstalk-{region}-{account-id}&#x2F;resources&#x2F;environments&#x2F;logs ì…ë‹ˆë‹¤.<br>Elastic BeanstalkëŠ” ìš”ì²­í•œ ë²ˆë“¤ ë˜ëŠ” í…Œì¼ ë¡œê·¸ì— ëŒ€í•´ì„œ 15ë¶„ì´ ê²½ê³¼ëœ ì´í›„ì— íŒŒì¼ì„ S3ì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤.</p></blockquote><h4 id="í…Œì¼-ë¡œê·¸"><a href="#í…Œì¼-ë¡œê·¸" class="headerlink" title="í…Œì¼ ë¡œê·¸"></a>í…Œì¼ ë¡œê·¸</h4><p>í…Œì¼(ë§ˆì§€ë§‰ 100ì¤„) ë¡œê·¸ëŠ” EB ì—”ì§„ ë° Nginx ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ë¡œê·¸ì˜ ë§ˆì§€ë§‰ 100ì¤„ì„ ëª¨ì•„ ë‹¨ì¼ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ìƒì„±í•˜ê³  S3ì— ì—…ë¡œë“œí•œë‹¤. Amazon Linux 2 ë¦¬ëˆ…ìŠ¤ í”Œë«í¼ì—ì„œ í¬í•¨ë˜ëŠ” ë¡œê·¸ í•­ëª©ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>&#x2F;var&#x2F;log&#x2F;web.stdout.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-engine.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-hooks.log</li><li>&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log</li><li>&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log</li></ul><h4 id="ë²ˆë“¤-ë¡œê·¸"><a href="#ë²ˆë“¤-ë¡œê·¸" class="headerlink" title="ë²ˆë“¤ ë¡œê·¸"></a>ë²ˆë“¤ ë¡œê·¸</h4><p>ë²ˆë“¤(ì „ì²´) ë¡œê·¸ëŠ” ì‹œìŠ¤í…œ ì „ì²´ ë©”ì‹œì§€ ë¿ë§Œ ì•„ë‹ˆë¼ yum ë° cron ë¡œê·¸ì™€ ê°™ì€ ë‹¤ì–‘í•œ ë¡œê·¸ë¥¼ í¬í•¨í•˜ì—¬ Zip íŒŒì¼ë¡œ ì••ì¶•í•œ í›„ S3ì— ì—…ë¡œë“œí•œë‹¤. ë‹¤ìš´ë¡œë“œí•œ ë²ˆë“¤ ë¡œê·¸ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ë¡œê·¸ í•­ëª©ì´ í¬í•¨ë˜ì–´ìˆë‹¤.</p><ul><li>&#x2F;var&#x2F;log&#x2F;healthd&#x2F;</li><li>&#x2F;var&#x2F;log&#x2F;nginx&#x2F;</li><li>&#x2F;var&#x2F;log&#x2F;rotate&#x2F;</li><li>&#x2F;var&#x2F;log&#x2F;cfn-hup.log</li><li>&#x2F;var&#x2F;log&#x2F;cfn-init.log</li><li>&#x2F;var&#x2F;log&#x2F;cfn-init-cmd.log</li><li>&#x2F;var&#x2F;log&#x2F;cfn-wire.log</li><li>&#x2F;var&#x2F;log&#x2F;cloud-init.log</li><li>&#x2F;var&#x2F;log&#x2F;cloud-init-output.log</li><li>&#x2F;var&#x2F;log&#x2F;cron</li><li>&#x2F;var&#x2F;log&#x2F;eb-cfn-init.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-cfn-init-call.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-engine.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-publish.log</li><li>&#x2F;var&#x2F;log&#x2F;eb-tools.log</li><li>&#x2F;var&#x2F;log&#x2F;messages</li><li>&#x2F;var&#x2F;log&#x2F;web.stdout.log</li><li>&#x2F;var&#x2F;log&#x2F;yum.log</li></ul><blockquote><p>ë²ˆë“¤ ë¡œê·¸ì—ëŠ” ì‹œìŠ¤í…œ ì „ë°˜ì ì¸ ë©”ì‹œì§€ë¥¼ í¬í•¨í•˜ëŠ” &#x2F;var&#x2F;log&#x2F;messages ê°€ í¬í•¨ë˜ì–´ìˆì–´ ë” ìì„¸í•˜ê²Œ ì›ì¸ì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="ë¡œê·¸-ë¡œí…Œì´ì…˜"><a href="#ë¡œê·¸-ë¡œí…Œì´ì…˜" class="headerlink" title="ë¡œê·¸ ë¡œí…Œì´ì…˜"></a>ë¡œê·¸ ë¡œí…Œì´ì…˜</h4><p>AWS Elastic Beanstalk ì˜ ë¦¬ëˆ…ìŠ¤ í”Œë«í¼ì—ì„œëŠ” logrotate ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ íšŒì „í•˜ê³  Amazon S3ì— ì—…ë¡œë“œí•œë‹¤. í™˜ê²½ ì½˜ì†”ì—ì„œ ìš”ì²­í•˜ëŠ” ë²ˆë“¤ ë˜ëŠ” ë§ˆì§€ë§‰ 100ì¤„ ë¡œê·¸ ìš”ì²­ì—ëŠ” íšŒì „ë˜ëŠ” ë¡œê·¸ëŠ” í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤. ë¡œê·¸ íšŒì „ì— ëŒ€í•œ êµ¬ì„± íŒŒì¼ì€ &#x2F;etc&#x2F;logrotate.elasticbeanstalk.hourly&#x2F; ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìœ¼ë©° &#x2F;etc&#x2F;cron.hourly&#x2F; ì—ì„œ í¬ë¡  ì‘ì—…ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.</p><hr><p>ì„œë²„ ì—”ì§€ë‹ˆì–´ ë˜ëŠ” ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ì—ê²Œ ì „ë‹¬ë°›ì€ ë¡œê·¸ë“¤ì´ ì–´ë– í•œ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ì§€ë¥¼ ì•Œê³  ë¹ ë¥´ê³  ìì„¸í•˜ê²Œ ë¬¸ì œì— ëŒ€í•œ ì›ì¸ì„ ë¶„ì„í•˜ëŠ”ë°ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì—­ëŸ‰ì€ ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ì—ê²Œ í•„ìš”í•œ ë¶€ë¶„ì´ë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img data-src=&quot;/images/posts/beanstalk-logs/01.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;AWS Elastic Beanstalk í™˜ê²½ ì½˜ì†”ì˜ ë¡œê·¸ ë©”ë‰´ì—ì„œ ë¡œê·¸ ìš”ì²­ì„ í†µí•´ ì „ì²´(ë²ˆë“¤) ë˜ëŠ” ë§ˆì§€ë§‰ 100ì¤„(í…Œì¼) ë¡œê·¸ë¥¼ ì¡°íšŒí• </summary>
      
    
    
    
    
    <category term="Beanstalk" scheme="https://kdevkr.github.io/tags/Beanstalk/"/>
    
    <category term="TailLogs" scheme="https://kdevkr.github.io/tags/TailLogs/"/>
    
    <category term="Bundlelogs" scheme="https://kdevkr.github.io/tags/Bundlelogs/"/>
    
  </entry>
  
  <entry>
    <title>ë¬¸ìì—´ì—ì„œ ë¡œì¼€ì¼ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•</title>
    <link href="https://kdevkr.github.io/java-locale-from-language/"/>
    <id>https://kdevkr.github.io/java-locale-from-language/</id>
    <published>2024-02-21T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Locale-forLanguageTag"><a href="#Locale-forLanguageTag" class="headerlink" title="Locale.forLanguageTag"></a>Locale.forLanguageTag</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">forLanguageTag</span><span class="token punctuation">(</span><span class="token string">"ko_KR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â†’ ""</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">forLanguageTag</span><span class="token punctuation">(</span><span class="token string">"ko_KR"</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â†’ ko_KR</span></code></pre><p>Locale.forLanguageTag í•¨ìˆ˜ì—ì„œ <code>ko-KR</code> ì´ ì•„ë‹Œ <code>ko_KR</code> ê³¼ ê°™ì´ ì–¸ì–´(Langauge)ì™€ êµ­ê°€(Country)ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–¸ë”ìŠ¤ì½”ì–´ í˜•íƒœì˜ ë¬¸ìì—´ì„ íŒŒë¼ë¯¸í„°ì— ë„£ëŠ” ê²½ìš° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šê³  <strong>ë¹„ì–´ìˆëŠ” Locale</strong>ì´ ë§Œë“¤ì–´ì§„ë‹¤. ë”°ë¼ì„œ, <code>Locale.forLanguageTag</code> í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ë¡œì¼€ì¼ë¡œ ë³€í™˜í•˜ë ¤ëŠ” ê²½ìš°ì—ëŠ” <strong>ì–¸ë”ìŠ¤ì½”ì–´(_)ë¥¼ í•˜ì´í”ˆ(-)ìœ¼ë¡œ ë³€í™˜</strong>í•´ì•¼í•œë‹¤.</p><h4 id="LocaleUtils-ì™€-StringUtils"><a href="#LocaleUtils-ì™€-StringUtils" class="headerlink" title="LocaleUtils ì™€ StringUtils"></a>LocaleUtils ì™€ StringUtils</h4><p>String í´ë˜ìŠ¤ì— í¬í•¨ë˜ì–´ìˆëŠ” replace í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ <code>IETF BCP 47 ì–¸ì–´ íƒœê·¸</code> í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•´ë„ ë˜ì§€ë§Œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ë˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬í•¨ë˜ì–´ìˆëŠ” ì•„ë˜ì™€ ê°™ì€ ìœ í‹¸ í•¨ìˆ˜ë“¤ì„ ì´ìš©í•´ë„ ë¬¸ìì—´ì„ Localeë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span>LocaleUtils</span><span class="token punctuation">.</span><span class="token function">toLocale</span><span class="token punctuation">(</span><span class="token string">"ko_KR"</span><span class="token punctuation">)</span>l<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>StringUtils</span><span class="token punctuation">.</span><span class="token function">parseLocale</span><span class="token punctuation">(</span><span class="token string">"ko_KR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;Locale-forLanguageTag&quot;&gt;&lt;a href=&quot;#Locale-forLanguageTag&quot; class=&quot;headerlink&quot; title=&quot;Locale.forLanguageTag&quot;&gt;&lt;/a&gt;Locale.forLanguageTag&lt;/</summary>
      
    
    
    
    
    <category term="Locale" scheme="https://kdevkr.github.io/tags/Locale/"/>
    
    <category term="LocaleUtils" scheme="https://kdevkr.github.io/tags/LocaleUtils/"/>
    
    <category term="StringUtils" scheme="https://kdevkr.github.io/tags/StringUtils/"/>
    
  </entry>
  
  <entry>
    <title>ë¼ì¸ ë¡œê·¸ì¸ ì—°ë™</title>
    <link href="https://kdevkr.github.io/line-login/"/>
    <id>https://kdevkr.github.io/line-login/</id>
    <published>2024-02-18T13:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ë³¸ ê¸€ì— ëŒ€í•œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/spring-boot-line-login">kdevkr&#x2F;spring-boot-line-login</a> ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p>ìš°ë¦¬ê°€ ì´ìš©í•˜ëŠ” ìˆ˜ ë§ì€ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” íšŒì›ê°€ì… í•œ ê³„ì • í˜¹ì€ ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸í•˜ê¸° ë¿ë§Œ ì•„ë‹ˆë¼ ì¹´ì¹´ì˜¤, ë„¤ì´ë²„, êµ¬ê¸€, ë©”íƒ€, ì• í”Œ, ê¹ƒí—ˆë¸Œì™€ ê°™ì€ ì†Œì…œ í”„ë¡œë°”ì´ë”ì˜ ê³„ì •ìœ¼ë¡œ ì¸ì¦í•˜ì—¬ ì‰½ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆëŠ” ì—°ë™ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. êµ­ë‚´ì˜ ê²½ìš° ëŒ€ë¶€ë¶„ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì´ë‚˜ ë„¤ì´ë²„ ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ëŠ” í¸ì¸ë° ë¼ì¸ í”ŒëŸ¬ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ë¼ì¸ ë©”ì‹ ì €ëŠ” êµ­ë‚´ ë³´ë‹¤ëŠ” ì¼ë³¸ì´ë‚˜ íƒœêµ­ê³¼ ê°™ì€ í•´ì™¸ êµ­ê°€ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” í¸ì´ë‹¤. <a href="https://linepluscorp.com/">ë¼ì¸ í”ŒëŸ¬ìŠ¤</a>ê°€ ìˆì§€ë§Œ ë¼ì¸ ê°œë°œì ì‚¬ì´íŠ¸ ë° ê°œë°œ ë¬¸ì„œì˜ ê²½ìš° ì˜ì–´ì™€ ì¼ë³¸ì–´ë§Œ ì§€ì›í•˜ê³  ìˆë‹¤. ë§Œì•½, íšŒì‚¬ì—ì„œ ë§Œë“œëŠ” ì„œë¹„ìŠ¤ê°€ ì¼ë³¸ì´ë‚˜ íƒœêµ­ ê·¸ë¦¬ê³  ë§ë ˆì‹œì´ì•„ êµ­ê°€ì˜ ê³ ê°ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ í•œë‹¤ë©´ ë¼ì¸ ë©”ì‹ ì €ë¥¼ í†µí•œ ì—°ë™ ê¸°ëŠ¥ ì§€ì›ì€ ê±°ì˜ í•„ìˆ˜ì ìœ¼ë¡œ ë„ì…ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤.</p><p><img data-src="https://lineapiusecase.com/img/LINE_login_en.webp" alt="LINE Login Diagram"></p><h4 id="LINE-Developers-Console"><a href="#LINE-Developers-Console" class="headerlink" title="LINE Developers Console"></a>LINE Developers Console</h4><p><a href="https://manager.line.biz/">ë¼ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì½˜ì†”</a>ì„ í†µí•´ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©° ë¼ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •ì„ ë§Œë“  í›„ì— <a href="https://developers.line.biz/">ê°œë°œì ì½˜ì†”</a>ì— ë³„ë„ë¡œ ì ‘ì†í•˜ì—¬ ë¼ì¸ ë¡œê·¸ì¸ ì´ë‚˜ ë©”ì‹œì§€ ì±„ë„ì„ ë“±ë¡í•˜ê³  ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë¼ì¸ í”Œë«í¼ì— ì—°ë™í•  ì„œë¹„ìŠ¤ í”„ë¡œë°”ì´ë”ë¥¼ ìƒì„±í•´ì•¼í•˜ë©° ë¼ì¸ ë¡œê·¸ì¸ê³¼ ë©”ì‹œì§• API ì±„ë„ì€ ë³„ë„ë¡œ êµ¬ë¶„ë˜ì–´ ë§Œë“¤ì–´ì§„ë‹¤. ê° ì±„ë„ì€ ë³„ë„ë¡œ ìš´ì˜ë  ìˆ˜ ìˆì§€ë§Œ ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ì— ì¹œêµ¬ ì˜µì…˜ìœ¼ë¡œ ë©”ì‹œì§€ ì±„ë„ ê³„ì •ì„ ì—°ê²°í•  ìˆ˜ ìˆê²Œ ì§€ì›í•œë‹¤.</p><blockquote><p>ë¼ì¸ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì±„ë„ì— ì—°ë™í•˜ë”ë¼ë„ ì„œë¹„ìŠ¤ ì•±ì—ì„œ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ì±„ë„ì— ì¹œêµ¬ë¡œ ë“±ë¡ë˜ì–´ìˆì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p></blockquote><h4 id="ë¼ì¸-ë¡œê·¸ì¸-ì±„ë„-ì¶”ê°€í•˜ê¸°"><a href="#ë¼ì¸-ë¡œê·¸ì¸-ì±„ë„-ì¶”ê°€í•˜ê¸°" class="headerlink" title="ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ ì¶”ê°€í•˜ê¸°"></a>ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ ì¶”ê°€í•˜ê¸°</h4><p>ì‚¬ìš©ìê°€ ë¼ì¸ í”Œë«í¼ì„ í†µí•´ ì„œë¹„ìŠ¤ì— ì—°ë™í•  ìˆ˜ ìˆë„ë¡ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©ì‹ì˜ ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ì„ ì¶”ê°€í•´ì•¼í•œë‹¤. ì„œë¹„ìŠ¤ ì§€ì—­ ì˜µì…˜ì˜ ê²½ìš° ì¼ë³¸ â€¢ íƒœêµ­ â€¢ ëŒ€ë§Œ â€¢ ì¸ë„ë„¤ì´ì‚¬ ë¿ì´ë©° í•œêµ­ì„ ì„ íƒí•  ìˆ˜ ì—†ëŠ”ê²Œ ì˜ì•„í•˜ê¸´ í•˜ì§€ë§Œ êµ­ë‚´ì˜ ê²½ìš° ê°€ì¥ ê°€ê¹Œìš´ ì¼ë³¸ì„ ì„ íƒí•˜ë©´ ë  ê²ƒ ê°™ë‹¤.</p><p><img data-src="/images/posts/line-login/01.png"></p><h4 id="ë¼ì¸-ë¡œê·¸ì¸-ì½œë°±-ì£¼ì†Œ-ì„¤ì •"><a href="#ë¼ì¸-ë¡œê·¸ì¸-ì½œë°±-ì£¼ì†Œ-ì„¤ì •" class="headerlink" title="ë¼ì¸ ë¡œê·¸ì¸ ì½œë°± ì£¼ì†Œ ì„¤ì •"></a>ë¼ì¸ ë¡œê·¸ì¸ ì½œë°± ì£¼ì†Œ ì„¤ì •</h4><p>ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ì„ ì¶”ê°€í–ˆë‹¤ë©´ LINE Login ì„¤ì • í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ë¼ì¸ ë¡œê·¸ì¸ ê³¼ì •ì—ì„œ ë¼ì¸ í”Œë«í¼ì´ ì¸ì¦ëœ ì½”ë“œë¥¼ ì „ë‹¬í•´ì¤„ ì„œë¹„ìŠ¤ ì½œë°± ì£¼ì†Œë¥¼ ë“±ë¡í•´ë‘ì–´ì•¼ í•œë‹¤. ë°˜ë“œì‹œ ë°±ì—”ë“œ ì„œë²„ ì£¼ì†Œê°€ ì½œë°± ì£¼ì†Œì¼ í•„ìš”ëŠ” ì—†ìœ¼ë©° í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì½œë°±ì„ ë°›ì€ í›„ ì½”ë“œê°’ì„ ë°±ì—”ë“œì— REST APIë¡œ ì „ë‹¬í•´ë„ ë¬´ë°©í•˜ë‹¤. ì½œë°± ì£¼ì†ŒëŠ” ê°œí–‰ìœ¼ë¡œ ì—¬ëŸ¬ê°œë¥¼ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.</p><p><img data-src="/images/posts/line-login/02.png"></p><pre class="language-bash" data-language="bash"><div class="caption"><span>Callback URL</span></div><code class="language-bash">https://access.line.me/oauth2/v2.1/authorize?response_type<span class="token operator">=</span>code<span class="token operator">&amp;</span><span class="token assign-left variable">client_id</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>LOGIN_CHANNEL_ID<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">redirect_uri</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>CALLBACK_URL<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì½œë°± ì£¼ì†ŒëŠ” ì„œë¹„ìŠ¤ì—ì„œ ì¸ì¦ ì½”ë“œë¡œ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•˜ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ëœ ë™ì¼í•œ ì½œë°± ì£¼ì†Œë¥¼ ìš”êµ¬í•˜ë¯€ë¡œ ë°±ì—”ë“œ ì„œë²„ì—ì„œë„ ì±„ë„ ì•„ì´ë””ì™€ ì±„ë„ ì‹œí¬ë¦¿ ë¿ë§Œ ì•„ë‹ˆë¼ ë³„ë„ë¡œ ì½œë°± ì£¼ì†Œë¥¼ ê´€ë¦¬í•´ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h4 id="OIDC-ì´ë©”ì¼-ê¶Œí•œ-ìš”ì²­"><a href="#OIDC-ì´ë©”ì¼-ê¶Œí•œ-ìš”ì²­" class="headerlink" title="OIDC ì´ë©”ì¼ ê¶Œí•œ ìš”ì²­"></a>OIDC ì´ë©”ì¼ ê¶Œí•œ ìš”ì²­</h4><p>ì„œë¹„ìŠ¤ ì—°ë™ì‹œ ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ì´ë©”ì¼ ì£¼ì†Œê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤ë©´ ì´ë©”ì¼ íšë“ ê¶Œí•œì„ ìœ„í•´ì„œ ë¡œê·¸ì¸ ì±„ë„ ì˜µì…˜ì˜ OpenID Connectì— ëŒ€í•œ ì´ë©”ì¼ ì£¼ì†Œ ê¶Œí•œì„ ë³„ë„ë¡œ í™œì„±í™” í•´ì•¼í•œë‹¤. ì‹¤ì œë¡œëŠ” ì´ë©”ì¼ì„ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ìŠ¤í¬ë¦°ìƒ·ì„ ì—…ë¡œë“œ í•´ì•¼í•˜ê² ì§€ë§Œ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ì„ì˜ì˜ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•´ë„ í—ˆìš©ëœë‹¤. ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹œ ì „ë‹¬í•˜ëŠ” URL íŒŒë¼ë¯¸í„° ì¤‘ ìŠ¤ì½”í”„ì— ì•„ë˜ì™€ ê°™ì´ emailì„ ì¶”ê°€í•˜ë©´ ì´ë©”ì¼ì— ëŒ€í•œ ê¶Œí•œ ì˜µì…˜ì´ UIì— ë…¸ì¶œë  ê²ƒì´ë‹¤.</p><p><img data-src="/images/posts/line-login/03.png"><br><img data-src="/images/posts/line-login/04.png"><br><img data-src="/images/posts/line-login/05.png"></p><pre class="language-bash" data-language="bash"><div class="caption"><span>profile+openid+email</span></div><code class="language-bash">https://access.line.me/oauth2/v2.1/authorize?response_type<span class="token operator">=</span>code<span class="token operator">&amp;</span><span class="token assign-left variable">client_id</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>LOGIN_CHANNEL_ID<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">scope</span><span class="token operator">=</span>profile%20openid%20email</code></pre><blockquote><p>ì‚¬ìš©ì ì¸ì¦ í™”ë©´ì—ì„œ ì´ë©”ì¼ ì£¼ì†Œ ê¶Œí•œì„ í•„ìˆ˜ë¡œ ìš”êµ¬í•˜ëŠ” ì˜µì…˜ì€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></blockquote><h4 id="OAuth-v2-1-ì•¡ì„¸ìŠ¤-í† í°-ë°œê¸‰"><a href="#OAuth-v2-1-ì•¡ì„¸ìŠ¤-í† í°-ë°œê¸‰" class="headerlink" title="OAuth v2.1 ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰"></a>OAuth v2.1 ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰</h4><p>ì‚¬ìš©ì ë¡œê·¸ì¸ í›„ ì½œë°±ë˜ì–´ ì „ë‹¬ë˜ëŠ” URLì— í¬í•¨ëœ code íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œëŠ” <a href="https://developers.line.biz/en/reference/line-login/#issue-access-token">ì•¡ì„¸ìŠ¤ í† í°</a>ì„ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤. OpenID Connect ì— ë”°ë¼ ì•¡ì„¸ìŠ¤ í† í°ê³¼ í•¨ê»˜ ID Tokenì´ ì œê³µë˜ëŠ”ë° JWT í˜•ì‹ìœ¼ë¡œ êµ¬ì„±ëœ ë¬¸ìì—´ì´ë¯€ë¡œ í˜ì´ë¡œë“œë¥¼ í™•ì¸í•˜ê±°ë‚˜ <a href="https://developers.line.biz/en/reference/line-login/#verify-id-token">Verify ID token</a>ì„ í†µí•´ í† í° ê²€ì¦ê³¼ í•¨ê»˜ ë¶„ì„ëœ ê²°ê³¼ë¥¼ ì‘ë‹µìœ¼ë¡œ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> idToken <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getIdToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> payload <span class="token operator">=</span> idToken<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> claims <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getUrlDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"iss"</span><span class="token operator">:</span> <span class="token string">"https://access.line.me"</span><span class="token punctuation">,</span>  <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"U1234567890abcdef1234567890abcdef"</span><span class="token punctuation">,</span>  <span class="token property">"aud"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>  <span class="token property">"exp"</span><span class="token operator">:</span> <span class="token number">1504169092</span><span class="token punctuation">,</span>  <span class="token property">"iat"</span><span class="token operator">:</span> <span class="token number">1504263657</span><span class="token punctuation">,</span>  <span class="token property">"nonce"</span><span class="token operator">:</span> <span class="token string">"0987654asdf"</span><span class="token punctuation">,</span>  <span class="token property">"amr"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pwd"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Taro Line"</span><span class="token punctuation">,</span>  <span class="token property">"picture"</span><span class="token operator">:</span> <span class="token string">"https://sample_line.me/aBcdefg123456"</span><span class="token punctuation">,</span>  <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"taro.line@example.com"</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>JWT í˜ì´ë¡œë“œì— í¬í•¨ë˜ëŠ” í•­ëª© ì¤‘ <code>sub</code> ëŠ” ë¼ì¸ ì‚¬ìš©ìì— ëŒ€í•œ User IDë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p></blockquote><hr><h4 id="ë©”ì‹œì§€-ì±„ë„ê³¼-ì—°ë™í•˜ê¸°-ì¹œêµ¬-ì¶”ê°€-ì˜µì…˜"><a href="#ë©”ì‹œì§€-ì±„ë„ê³¼-ì—°ë™í•˜ê¸°-ì¹œêµ¬-ì¶”ê°€-ì˜µì…˜" class="headerlink" title="ë©”ì‹œì§€ ì±„ë„ê³¼ ì—°ë™í•˜ê¸° (ì¹œêµ¬ ì¶”ê°€ ì˜µì…˜)"></a>ë©”ì‹œì§€ ì±„ë„ê³¼ ì—°ë™í•˜ê¸° (ì¹œêµ¬ ì¶”ê°€ ì˜µì…˜)</h4><p>ë¼ì¸ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ë„ì…í•˜ë”ë¼ë„ ë¡œê·¸ì¸ ì±„ë„ê³¼ ë©”ì‹œì§€ ì±„ë„ì€ ë³„ë„ë¡œ ë¶„ë¦¬ë˜ì–´ìˆì–´ ë©”ì‹œì§€ ì±„ë„ì„ ë³„ë„ë¡œ ìƒì„±í•œ í›„ ë¡œê·¸ì¸ ì±„ë„ì—ì„œ ë©”ì‹œì§€ ì±„ë„ì— ë“±ë¡í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê³  <a href="https://developers.line.biz/en/docs/line-login/link-a-bot/">ì‚¬ìš©ìì—ê²Œ ì¹œêµ¬ ì¶”ê°€ë¥¼ ìš”êµ¬</a>í•´ì•¼í•œë‹¤. ì¹œêµ¬ ì¶”ê°€ ì˜µì…˜(Add friend option)ì— ë©”ì‹œì§€ ì±„ë„ì„ ì„ íƒí•œë‹¤ë©´ ë¡œê·¸ì¸ ì—°ë™ ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” bot_prompt íŒŒë¼ë¯¸í„°ì— ê°’ì— ë”°ë¼ ì¹œêµ¬ ì¶”ê°€ ì˜µì…˜ ë…¸ì¶œ ë°©ì‹ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">https://client.example.org/cb?code<span class="token operator">=</span><span class="token punctuation">&#123;</span>CODE<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">state</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>STATE<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">friendship_status_changed</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>FRIENDSHIP_STATUS_CHANGED<span class="token punctuation">&#125;</span></code></pre><p>ì¹œêµ¬ ì¶”ê°€ ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©ì ë¡œê·¸ì¸ í›„ ì½œë°± ì‹œ ì „ë‹¬ë˜ëŠ” ì½”ë“œ íŒŒë¼ë¯¸í„° ì´ì™¸ì— friendship_status_changed íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ì ìœ¼ë¡œ ì „ë‹¬ë˜ì–´ í•´ë‹¹ ì‚¬ìš©ìê°€ ì¹œêµ¬ ì¶”ê°€ë¥¼ ìˆ˜í–‰í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë§Œì•½, ë¡œê·¸ì¸ í™”ë©´ì— ë©”ì‹œì§€ ì±„ë„ì„ ì¹œêµ¬ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì´ ë…¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ í•­ëª©ì„ ì œëŒ€ë¡œ ì„¤ì •í–ˆëŠ”ì§€ ë‹¤ì‹œ í•œë²ˆ ì²´í¬í•´ë³´ë„ë¡ í•˜ì.</p><ul><li><a href="https://developers.line.biz/en/docs/line-login/link-a-bot/#link-a-line-official-account">Link a LINE Official Account with your channel</a></li><li><a href="https://developers.line.biz/en/docs/line-login/link-a-bot/#redirect-users">Redirect users to the LINE Login authorization URL with the bot_prompt query parameter</a></li></ul><h4 id="ì‚¬ìš©ìì—ê²Œ-ë©”ì‹œì§€-ë³´ë‚´ê¸°"><a href="#ì‚¬ìš©ìì—ê²Œ-ë©”ì‹œì§€-ë³´ë‚´ê¸°" class="headerlink" title="ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°"></a>ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°</h4><p>ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ì±„ë„ì— ì¹œêµ¬ë¡œ ë“±ë¡í•˜ì˜€ë‹¤ë©´ ë¡œê·¸ì¸ ì—°ë™ì„ ìˆ˜í–‰í•œ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” <a href="https://developers.line.biz/en/docs/line-login/verify-id-token/#page-title">JWT í˜•ì‹ì˜ IDToken</a>ì˜ í•­ëª© ì¤‘ sub ê°€ ë¼ì¸ì—ì„œ ì œê³µí•˜ëŠ” APIì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” User IDì´ë©° <a href="https://developers.line.biz/en/reference/messaging-api/#send-push-message">Messaging API</a> ì—ì„œëŠ” User IDë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë„ë¡ ì œê³µí•œë‹¤.</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">line</span><span class="token punctuation">:</span>  <span class="token key atrule">bot</span><span class="token punctuation">:</span>    <span class="token key atrule">channel-token</span><span class="token punctuation">:</span> WQ9SQjcWBJqD020+ri<span class="token important">***</span>    <span class="token key atrule">channel-secret</span><span class="token punctuation">:</span> 1ba24f197605a2<span class="token important">***</span></code></pre><blockquote><p>User IDëŠ” U1234567890abcdef1234567890abcdef ì™€ ê°™ì´ UXXX ë¡œ ì‹œì‘í•˜ëŠ” ê°’ ì…ë‹ˆë‹¤.<br>Line Java SDK ì—ì„œ ì±„ë„ í† í°ì€ ë©”ì‹œì§€ ì±„ë„ì˜ ì•„ì´ë””ê°€ ì•„ë‹Œ Messaging APIì˜ ì•¡ì„¸ìŠ¤ í† í°ì„ì„ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h4 id="ë¼ì¸-ë¡œê·¸ì¸-ì¸ì¦-í™”ë©´-êµ­ì œí™”"><a href="#ë¼ì¸-ë¡œê·¸ì¸-ì¸ì¦-í™”ë©´-êµ­ì œí™”" class="headerlink" title="ë¼ì¸ ë¡œê·¸ì¸ ì¸ì¦ í™”ë©´ êµ­ì œí™”"></a>ë¼ì¸ ë¡œê·¸ì¸ ì¸ì¦ í™”ë©´ êµ­ì œí™”</h4><p><img data-src="/images/posts/line-login/06.png"></p><p><code>ui_locales</code> íŒŒë¼ë¯¸í„°ì— ë¡œì¼€ì¼ì„ ì „ë‹¬í•˜ì—¬ ì‚¬ìš©ìê°€ ë¼ì¸ í”Œë«í¼ì— ì¸ì¦í•˜ê¸° ìœ„í•œ í™”ë©´ì— ëŒ€í•´ êµ­ì œí™”ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, ë¼ì¸ ë¡œê·¸ì¸ ì±„ë„ ì„¤ì •ì—ì„œ Localization ì„¤ì •ì„ í†µí•´ ì±„ë„ ì´ë¦„ê³¼ ì„¤ëª… ë¶€ë¶„ì„ ì–¸ì–´ì— ë”°ë¼ í‘œì‹œë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë‹¨, ì¹œêµ¬ ì˜µì…˜ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ë©”ì‹œì§€ ì±„ë„ì— ëŒ€í•œ ì´ë¦„ì€ ë³„ë„ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">https://access.line.me/oauth2/v2.1/authorize?response_type<span class="token operator">=</span>code<span class="token operator">&amp;</span><span class="token assign-left variable">client_id</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>LOGIN_CHANNEL_ID<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">redirect_uri</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>CALLBACK_URL<span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token assign-left variable">ui_locales</span><span class="token operator">=</span>ja_JP</code></pre><p><img data-src="/images/posts/line-login/07.png">  </p><p><img data-src="/images/posts/line-login/08.png">  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ë³¸ ê¸€ì— ëŒ€í•œ ì½”ë“œëŠ” &lt;a href=&quot;https://github.com/kdevkr/spring-boot-line-login&quot;&gt;kdevkr&amp;#x2F;spring-boot-line-login&lt;/a&gt; ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Springdoc OpenAPI UI</title>
    <link href="https://kdevkr.github.io/springdoc-openapi-ui/"/>
    <id>https://kdevkr.github.io/springdoc-openapi-ui/</id>
    <published>2024-02-04T00:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>Springdoc OpenAPI UIëŠ” OpenAPI 3 ê¸°ë°˜ì˜ Swagger API ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ì œê³µí•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. ì˜¤ëŠ˜ì€ Springdoc OpenAPI UI ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ í•™ìŠµí•´ë³´ë©´ì„œ ì•Œê²Œëœ ìœ ìš©í•œ ì •ë³´ë“¤ ëŒ€í•´ì„œ ê³µìœ í•´ë³´ê³ ì í•œë‹¤. </p><h4 id="Select-a-definition-ê¸°ë³¸-ì„ íƒí•˜ê¸°"><a href="#Select-a-definition-ê¸°ë³¸-ì„ íƒí•˜ê¸°" class="headerlink" title="Select a definition ê¸°ë³¸ ì„ íƒí•˜ê¸°"></a>Select a definition ê¸°ë³¸ ì„ íƒí•˜ê¸°</h4><p>GroupeOpenAPIë¥¼ ë“±ë¡í•˜ì—¬ í•˜ë‚˜ê°€ ì•„ë‹Œ ë‹¤ìˆ˜ì˜ API ê·¸ë£¹ì„ ì •ì˜í•˜ê³ ì í• ë•Œ <code>springdoc.swagger-ui.urls-primary-name</code>ì— ê¸°ë³¸ìœ¼ë¡œ ì„ íƒí•˜ê³  ì‹¶ì€ <a href="https://github.com/springdoc/springdoc-openapi/issues/2022">ê·¸ë£¹ ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ ì„ íƒ</a>ë˜ì–´ì§„ë‹¤. ê·¸ë£¹ í‘œì‹œ ìˆœì„œ ì •ë ¬ì— ì˜í•´ ê¸°ë³¸ê°’ì´ ë¨¼ì € ë…¸ì¶œë˜ì§€ ì•Šì„ ë•Œ ìœ ìš©í•˜ë‹¤.</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>  <span class="token key atrule">swagger-ui</span><span class="token punctuation">:</span>    <span class="token key atrule">path</span><span class="token punctuation">:</span> /swagger<span class="token punctuation">-</span>ui.html    <span class="token key atrule">groups-order</span><span class="token punctuation">:</span> desc    <span class="token key atrule">urls-primary-name</span><span class="token punctuation">:</span> v1</code></pre><p><img data-src="/images/posts/springdoc-openapi-ui/01.png"></p><h4 id="ì„œë²„-URL-ì§ì ‘-ê´€ë¦¬í•˜ê¸°"><a href="#ì„œë²„-URL-ì§ì ‘-ê´€ë¦¬í•˜ê¸°" class="headerlink" title="ì„œë²„ URL ì§ì ‘ ê´€ë¦¬í•˜ê¸°"></a>ì„œë²„ URL ì§ì ‘ ê´€ë¦¬í•˜ê¸°</h4><p>ê¸°ë³¸ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” URLë¡œë„ ì¶©ë¶„í•  ìˆ˜ ìˆì§€ë§Œ API ë¬¸ì„œì— ëŒ€í•œ ì„œë²„ë¥¼ ë³„ë„ë¡œ ì œê³µí•˜ê³ ì í•œë‹¤ë©´ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œí•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì´ëŸ¬í•œ ê²½ìš° í•´ë‹¹ ê¸°ëŠ¥ì€ ì œê³µí•´ì£¼ì§€ ì•Šê¸° ë•Œë¬¸ì— ì„œë²„ ì£¼ì†Œì— ëŒ€í•œ ConfigurationPropertiesë¥¼ ë§Œë“¤ê³  ì£¼ì…í•˜ë©´ ëœë‹¤.</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>  <span class="token key atrule">server</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> /      <span class="token key atrule">description</span><span class="token punctuation">:</span> Default</code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token annotation punctuation">@ConstructorBinding</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"springdoc"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringdocServersProperties</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span><span class="token punctuation">></span></span> servers<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">openAPI</span><span class="token punctuation">(</span><span class="token class-name">SpringdocServersProperties</span> serversProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">servers</span><span class="token punctuation">(</span>serversProperties<span class="token punctuation">.</span><span class="token function">getServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ê¸°ë³¸-ì‘ë‹µ-ë©”ì‹œì§€-í‘œì‹œ-ë¹„í™œì„±í™”"><a href="#ê¸°ë³¸-ì‘ë‹µ-ë©”ì‹œì§€-í‘œì‹œ-ë¹„í™œì„±í™”" class="headerlink" title="ê¸°ë³¸ ì‘ë‹µ ë©”ì‹œì§€ í‘œì‹œ ë¹„í™œì„±í™”"></a>ê¸°ë³¸ ì‘ë‹µ ë©”ì‹œì§€ í‘œì‹œ ë¹„í™œì„±í™”</h4><p>ì‹¤ë¬´ì—ì„œëŠ” GlobalOpenApiCustomizer ë¥¼ ì‚¬ìš©í•´ì„œ <a href="https://github.com/springdoc/springdoc-openapi/issues/381#issuecomment-579583870">ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” ì‘ë‹µ ë©”ì‹œì§€ ì¤‘ì—ì„œ ì¼ë¶€ì— ëŒ€í•´ì„œë§Œ í‘œì‹œ</a>ë˜ë„ë¡ í–ˆëŠ”ë° <a href="https://stackoverflow.com/a/66871601">ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì˜ ë‹µë³€</a>ì„ ë³´ë‹ˆ ê¸°ë³¸ì ìœ¼ë¡œ @ControllerAdviceì— ì˜í•´ ì°¾ì•„ì£¼ì–´ ì¶”ê°€í•´ì£¼ëŠ” ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì œì™¸í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>  <span class="token key atrule">override-with-generic-response</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">GlobalOpenApiCustomizer</span> <span class="token function">globalOpenApiCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> openapi <span class="token operator">-></span> openapi<span class="token punctuation">.</span><span class="token function">getPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>pathItem <span class="token operator">-></span> pathItem<span class="token punctuation">.</span><span class="token function">readOperations</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>operation <span class="token operator">-></span> operation<span class="token punctuation">.</span><span class="token function">getResponses</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">addApiResponse</span><span class="token punctuation">(</span><span class="token string">"500"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ApiResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"Server Error"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMediaType</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MediaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Could-not-resolve-pointer-components-schemas-XXX-does-not-exist-in-document"><a href="#Could-not-resolve-pointer-components-schemas-XXX-does-not-exist-in-document" class="headerlink" title="Could not resolve pointer: &#x2F;components&#x2F;schemas&#x2F;XXX does not exist in document"></a>Could not resolve pointer: &#x2F;components&#x2F;schemas&#x2F;XXX does not exist in document</h4><p>API ê·¸ë£¹ë§ˆë‹¤ ë‹¤ë¥¸ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë¶„ë¦¬í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ .components ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì„ ì£¼ì˜í•˜ë„ë¡ í•´ì•¼í•œë‹¤. ì¸ì¦ ìŠ¤í‚¤ë§ˆ ì´ì™¸ì— ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ê°€ í¬í•¨ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— .getComponents ë¥¼ ì´ìš©í•˜ì—¬ ì¸ì¦ ìŠ¤í‚¤ë§ˆë¥¼ ì¶”ê°€í•˜ì.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">apiV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">SecurityScheme</span> bearerScheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token class-name">SecurityScheme<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token constant">HTTP</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">SecurityScheme<span class="token punctuation">.</span>In</span><span class="token punctuation">.</span><span class="token constant">HEADER</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"bearer"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">bearerFormat</span><span class="token punctuation">(</span><span class="token string">"JWT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"v1"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">addOpenApiCustomiser</span><span class="token punctuation">(</span>openapi <span class="token operator">-></span> openapi<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">addSecurityItem</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecurityRequirement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addList</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_AUTH</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">//.components(new Components().addSecuritySchemes(DEFAULT_AUTH, bearerScheme)) // Resolve error!</span>            <span class="token punctuation">.</span><span class="token function">getComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_AUTH</span><span class="token punctuation">,</span> bearerScheme<span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì´ì— ëŒ€í•œ ìì„¸í•œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/spring-boot-2-springdoc.git">spring-boot2-springdoc</a> ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Springdoc OpenAPI UIëŠ” OpenAPI 3 ê¸°ë°˜ì˜ Swagger API ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ì œê³µí•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. ì˜¤ëŠ˜ì€ Springdoc OpenAPI UI ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ í•™ìŠµí•´ë³´ë©´ì„œ ì•Œê²Œëœ ìœ ìš©í•œ ì •ë³´ë“¤ ëŒ€í•´</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>SpringDoc UI ì¸ì¦ì„ ìœ„í•œ í† í° ê¸°ë³¸ê°’ í‘œì‹œ</title>
    <link href="https://kdevkr.github.io/springdoc-ui-bearer-authentication/"/>
    <id>https://kdevkr.github.io/springdoc-ui-bearer-authentication/</id>
    <published>2024-02-03T02:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.baeldung.com/openapi-jwt-authentication">Configure JWT Authentication for OpenAPI</a>ë¥¼ ì°¸ê³ í•˜ë©´ SpringDoc UIë¥¼ ì‚¬ìš©í•  ë•Œ JWT ì¸ì¦ì„ ìœ„í•´ Bearer ìŠ¤í‚¤ë§ˆ ìœ í˜•ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŒì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, Bearerì™€ ê°™ì€ ì¸ì¦ ë°©ì‹ì˜ ê²½ìš° OAuth ì™€ëŠ” ë‹¤ë¥´ê²Œ ê¸°ë³¸ê°’ì„ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì´ ì—†ë‹¤. ìŠ¤ì›¨ê±° ë¬¸ì„œì—ì„œ APIë¥¼ í˜¸ì¶œí•´ë³´ê³  ì‹¶ì€ ê²½ìš° ëŒ€ë¶€ë¶„ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì œê³µí•˜ëŠ” HTTP ê¸°ë³¸ ì¸ì¦ì´ë‚˜ í¼ ë¡œê·¸ì¸ì„ í•˜ì§€ ëª»í•˜ë„ë¡ ë¹„í™œì„±í™”í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë¬¸ì„œì— ë…¸ì¶œí•˜ì—¬ í† í°ì„ ë°œê¸‰í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•œë‹¤.</p><blockquote><p>ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ ê°œë°œ ì‹œ Bearer ì¸ì¦ ì‹œ Input ë°•ìŠ¤ì— ê¸°ë³¸ê°’ì„ ë„£ì–´ë‘˜ ë°©ì•ˆì€ ì—†ìŠµë‹ˆë‹¤.</p></blockquote><h4 id="SecurityScheme"><a href="#SecurityScheme" class="headerlink" title="SecurityScheme"></a>SecurityScheme</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SecurityScheme</span><span class="token punctuation">(</span>    name <span class="token operator">=</span> <span class="token string">"Bearer Authentication"</span><span class="token punctuation">,</span>    type <span class="token operator">=</span> <span class="token class-name">SecuritySchemeType</span><span class="token punctuation">.</span><span class="token constant">HTTP</span><span class="token punctuation">,</span>    in <span class="token operator">=</span> <span class="token class-name">SecuritySchemeIn</span><span class="token punctuation">.</span><span class="token constant">HEADER</span><span class="token punctuation">,</span>    bearerFormat <span class="token operator">=</span> <span class="token string">"JWT"</span><span class="token punctuation">,</span>    scheme <span class="token operator">=</span> <span class="token string">"bearer"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DocsConfig</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><p><img data-src="https://www.baeldung.com/wp-content/uploads/2022/06/auth-modal.png" alt="Configure JWT Authentication for OpenAPI"></p><p>ìœ„ ë§í¬ì—ì„œ <code>Bearer Authentication</code> ì— ëŒ€í•œ ì´ë¯¸ì§€ë¥¼ ì˜ ì‚´í´ë³´ë©´ <code>Description</code> ì´ í‘œì‹œë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¸ì¦ ë°©ë²•ì— ëŒ€í•œ ì„¤ëª…ì„ ì œê³µí•˜ëŠ” ë¶€ë¶„ì´ì§€ë§Œ ì¼ë°˜ í…ìŠ¤íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ HTML íƒœê·¸ê°€ ê°€ëŠ¥í•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë³¸ ê¸€ì—ì„œëŠ” ì´ê²ƒì„ ì´ìš©í•´ì„œ <strong>ê°œë°œ í™˜ê²½ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìì— ëŒ€í•œ ì´ë¦„ê³¼ í† í°ì´ í‘œì‹œë  ìˆ˜ ìˆë„ë¡</strong> í•  ì˜ˆì •ì´ë‹¤.</p><h4 id="Customize-SecurityScheme"><a href="#Customize-SecurityScheme" class="headerlink" title="Customize SecurityScheme"></a>Customize SecurityScheme</h4><p><code>@SecurityScheme</code> ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê¸€ë¡œë²Œ ì¸ì¦ì— ëŒ€í•œ ì„¤ì •ì„ êµ¬ì„±í–ˆë‹¤ë©´ <a href="https://www.baeldung.com/openapi-jwt-authentication#3-global-configuration">OpenAPIë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” êµ¬ì„±</a>ìœ¼ë¡œ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤.<br>ì•„ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ì„±ìœ¼ë¡œ ë“±ë¡ëœ ì‚¬ìš©ì í† í° ì •ë³´ë¥¼ Description ì˜ì—­ì— í‘œì‹œë  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•œ ì˜ˆì œì´ë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DocsConfig</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_AUTH</span> <span class="token operator">=</span> <span class="token string">"JWT Authentication"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">openAPI</span><span class="token punctuation">(</span><span class="token class-name">BearerTokenProperties</span> bearerTokenProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SecurityRequirement</span> securityRequirement <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecurityRequirement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addList</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_AUTH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SecurityScheme</span> securityScheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_AUTH</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token class-name">SecurityScheme<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token constant">HTTP</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">SecurityScheme<span class="token punctuation">.</span>In</span><span class="token punctuation">.</span><span class="token constant">HEADER</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">scheme</span><span class="token punctuation">(</span><span class="token string">"bearer"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">bearerFormat</span><span class="token punctuation">(</span><span class="token string">"JWT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>bearerTokenProperties<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>bearerTokenProperties<span class="token punctuation">.</span><span class="token function">getTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BearerTokenProperties<span class="token punctuation">.</span>BearerToken</span><span class="token punctuation">></span></span> tokens <span class="token operator">=</span> bearerTokenProperties<span class="token punctuation">.</span><span class="token function">getTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// NOTE: It is rendered as a markdown.</span>            <span class="token class-name">String</span> description <span class="token operator">=</span> tokens<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">-></span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"**%s** %s"</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            securityScheme<span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">addSecurityItem</span><span class="token punctuation">(</span>securityRequirement<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Components</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addSecuritySchemes</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_AUTH</span><span class="token punctuation">,</span> securityScheme<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@ConstructorBinding</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">"springdoc.bearer"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BearerTokenProperties</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BearerToken</span><span class="token punctuation">></span></span> tokens<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Getter</span>    <span class="token annotation punctuation">@RequiredArgsConstructor</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">BearerToken</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-yaml" data-language="yaml"><div class="caption"><span>application-dev.yml</span></div><code class="language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>  <span class="token key atrule">bearer</span><span class="token punctuation">:</span>    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> on    <span class="token key atrule">tokens</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Default        <span class="token key atrule">token</span><span class="token punctuation">:</span> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> User2        <span class="token key atrule">token</span><span class="token punctuation">:</span> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></pre><p><img data-src="/images/posts/springdoc-ui-bearer-authentication/01.png"></p><blockquote><p>ì°¸ê³ ë¡œ ìœ„ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ë©´ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë¬¸ìì—´ì„ êµ¬ì„±í–ˆëŠ”ë° ê°œë°œì ë„êµ¬ë¡œ Description ì˜ì—­ì„ ì‚´í´ë³´ë‹ˆ ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ìœ¼ë¡œ ë˜ê³  ìˆì–´ì„œ êµ³ì´ HTML íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ì— ìµìˆ™í•˜ì§€ ì•ŠëŠ” ê°œë°œìë¼ë©´ ì¼ë°˜ HTML íƒœê·¸ë¡œ ë§Œë“œì‹œë©´ ë©ë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.baeldung.com/openapi-jwt-authentication&quot;&gt;Configure JWT Authentication for OpenAPI&lt;/a&gt;ë¥¼ ì°¸ê³ í•˜ë©´ SpringDoc UIë¥¼ ì‚¬ìš©í•  ë•Œ JWT </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>PathVariable ê°’ì„ RequestBody ì˜¤ë¸Œì íŠ¸ì— ì£¼ì…í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/spring-boot-path-variable-with-request-body/"/>
    <id>https://kdevkr.github.io/spring-boot-path-variable-with-request-body/</id>
    <published>2024-02-02T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ì˜¤ëŠ˜ ì •ë¦¬í•˜ê³  ê³µìœ í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì€ @PathVariableë¡œ ì§€ì •ëœ íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° @RequestBodyê°€ ì§€ì •ëœ ì˜¤ë¸Œì íŠ¸ í•„ë“œì— ë°ì´í„°ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” êµ¬í˜„ ë°©ì•ˆì´ë‹¤. @PathVariableë¡œ ì§€ì •ëœ íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° @ModelAttributeì— ì£¼ì…ë˜ë„ë¡ ServletModelAttributeMethodProcessorê°€ êµ¬í˜„ë˜ì–´ìˆëŠ” ë°˜ë©´ì— @RequestBodyì— ëŒ€í•´ì„œ ë³€í™˜ì„ ë‹´ë‹¹í•˜ëŠ” MappingJackson2HttpMessageConverter ì—ì„œëŠ” ObjectMapper ì— ì˜í•´ ë³€í™˜ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ë˜ì–´ìˆë‹¤.</p><blockquote><p>ë”°ë¼ì„œ, ê¸°ë³¸ì ìœ¼ë¡œëŠ” @PathVariable íŒŒë¼ë¯¸í„° ê°’ì´ @RequestBody ì˜¤ë¸Œì íŠ¸ì— ì£¼ì…ë˜ì§€ ì•ŠëŠ”ë‹¤.</p></blockquote><h4 id="RequestBodyAdviceAdapter"><a href="#RequestBodyAdviceAdapter" class="headerlink" title="RequestBodyAdviceAdapter"></a>RequestBodyAdviceAdapter</h4><p>ChatGPT ì—ê²Œ íŒíŠ¸ë¥¼ ì–»ì–´ <code>RequestBodyAdvice</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ <strong>RequestBodyë¥¼ ì „í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤</strong>ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤. ëŒ€ë¶€ë¶„ @RestControllerAdviceì™€ í•¨ê»˜ ê³µí†µ ì˜¤ë¥˜ì²˜ë¦¬ë¥¼ ìœ„í•œ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•´ì™”ì„í…ë° RequestBodyAdviceAdapterë¥¼ í™•ì¥í•˜ì—¬ ServletModelAttributeMethodProcessor ì—ì„œì˜ êµ¬í˜„ì²˜ëŸ¼ @PathVariableë¡œ ì§€ì •ëœ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ RequestBody ì˜¤ë¸Œì íŠ¸ì— ì£¼ì…í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ì‹œë„í•´ë³´ì•˜ë‹¤.</p><pre class="language-java" data-language="java"><div class="caption"><span>PathVariableRequestBodyBinder</span></div><code class="language-java"><span class="token annotation punctuation">@RestControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PathVariableRequestBodyBinder</span> <span class="token keyword">extends</span> <span class="token class-name">RequestBodyAdviceAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ParameterNameDiscoverer</span> parameterNameDiscoverer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">afterBodyRead</span><span class="token punctuation">(</span><span class="token class-name">Object</span> body<span class="token punctuation">,</span> <span class="token class-name">HttpInputMessage</span> inputMessage<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> methodParameter<span class="token punctuation">,</span>                                <span class="token class-name">Type</span> targetType<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span><span class="token punctuation">></span></span> converterType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> object <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterBodyRead</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> inputMessage<span class="token punctuation">,</span> methodParameter<span class="token punctuation">,</span> targetType<span class="token punctuation">,</span> converterType<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Method</span> method <span class="token operator">=</span> methodParameter<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">RequestAttributes</span> requestAttributes <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">currentRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">></span></span> pathVariables <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> requestAttributes<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>            <span class="token class-name">HandlerMapping</span><span class="token punctuation">.</span><span class="token constant">URI_TEMPLATE_VARIABLES_ATTRIBUTE</span><span class="token punctuation">,</span> <span class="token class-name">RequestAttributes</span><span class="token punctuation">.</span><span class="token constant">SCOPE_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> pathVariables <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> pathVariables<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> object<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> object<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterNames <span class="token operator">=</span> parameterNameDiscoverer<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parameterNames <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> parameterNames<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Parameter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameters <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> parameterNames<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> parameterName <span class="token operator">=</span> parameterNames<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token class-name">Parameter</span> parameter <span class="token operator">=</span> parameters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment">// NOTE: Set PathVariable into RequestBody.</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">PathVariable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pathVariables<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>parameterName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">Field</span> field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>parameterName<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">makeAccessible</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            <span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">setField</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> object<span class="token punctuation">,</span> pathVariables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>parameterName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchFieldException</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token comment">// ignored</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> object<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> methodParameter<span class="token punctuation">,</span> <span class="token class-name">Type</span> targetType<span class="token punctuation">,</span>                            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span><span class="token punctuation">></span></span> converterType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Method</span> method <span class="token operator">=</span> methodParameter<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Parameter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameters <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Parameter</span> parameter <span class="token operator">:</span> parameters<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">PathVariable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì— @PathVariable ì´ ì¡´ì¬í•œë‹¤ë©´ ì²˜ë¦¬í•˜ë„ë¡ <code>supports</code> ê²°ê³¼ë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤. RequestBodyAdviceAdapter ìì²´ê°€ RequestBodyë¥¼ ì²˜ë¦¬í•¨ìœ¼ë¡œ @PathVariable íŒŒë¼ë¯¸í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ë§Œ ì²´í¬í•´ë„ ë¬´ë°©í•´ë³´ì¸ë‹¤. RequestBodyê°€ ì˜¤ë¸Œì íŠ¸ë¡œ ë³€í™˜ë˜ê³ ë‚˜ì„œ ì£¼ì…ì„ ì‹œë„í•˜ê¸° ìœ„í•´ì„œ <code>afterBodyRead</code> í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ êµ¬í˜„í•˜ì˜€ëŠ”ë° <code>HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE</code>ë¡œ PathVariable ê°’ì„ ê°€ì ¸ì˜¤ê³  íŒŒë¼ë¯¸í„° ì´ë¦„ì„ ì¶”ë¡ í•˜ê¸° ìœ„í•˜ì—¬ <code>DefaultParameterNameDiscoverer</code>ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ê·¸ ì´ìœ ì—ëŠ” <code>@PathVariable</code> ì²˜ëŸ¼ ì´ë¦„ì„ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•ŠëŠ” ê²½ìš° <code>arg0</code> ê³¼ ê°™ì´ ì´ë¦„ì´ ë¶€ì—¬ë˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤.</p><p>@RequestBodyë¡œ ë³€í™˜ë˜ì–´ì•¼í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ íŒŒë¼ë¯¸í„°ì— ì‹¤ì œë¡œ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” <strong>ë¦¬í”Œë ‰ì…˜ APIì— ëŒ€í•´ì„œ ê¹Šì€ ì´í•´ê°€ ì—†ëŠ” ê´€ê³„ë¡œ</strong> ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì— í¬í•¨ë˜ì–´ìˆëŠ” <code>ReflectionUtils</code> í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì˜€ë‹¤. ìë°”ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ì˜¤ë¸Œì íŠ¸ í•„ë“œì—ëŠ” private ì ‘ê·¼ ì œì–´ìë¥¼ ì„ ì–¸í•˜ë¯€ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•œ ì´í›„ì— í•„ë“œì— ê°’ì´ ì—†ëŠ” ê²½ìš°ì— í•œí•´ì„œë§Œ PathVariableì— ëŒ€í•œ ê°’ì„ ë°”ì¸ë”©í•˜ì˜€ë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ê°™ì´ ìš”ì²­ ë°ì´í„°ì— ì•„ì´ë””ê°€ í¬í•¨ë˜ì§€ ì•Šì•„ë„ PathVariableì— í•´ë‹¹ë˜ëŠ” <strong>111</strong> ê°’ì´ í¬í•¨ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><p><img data-src="/images/posts/spring-boot-path-variable-with-request-body/01.png"></p><h4 id="DefaultParameterNameDiscoverer"><a href="#DefaultParameterNameDiscoverer" class="headerlink" title="DefaultParameterNameDiscoverer"></a>DefaultParameterNameDiscoverer</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ 3.2 ë¶€í„°ëŠ” <code>LocalVariableTableParameterNameDiscoverer</code>ê°€ ì•„ë‹Œ <code>StandardReflectionParameterNameDiscoverer</code>ê°€ ì‚¬ìš©ë˜ë¯€ë¡œ <code>-parameters</code> ì»´íŒŒì¼ ì˜µì…˜ì„ í™œì„±í•´ì•¼í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ 2.7.18 ë²„ì „ ê¸°ì¤€ì˜ <code>DefaultParameterNameDiscoverer</code>ë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë˜ì–´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><div class="caption"><span>DefaultParameterNameDiscoverer</span></div><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultParameterNameDiscoverer</span> <span class="token keyword">extends</span> <span class="token class-name">PrioritizedParameterNameDiscoverer</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">DefaultParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">KotlinDetector</span><span class="token punctuation">.</span><span class="token function">isKotlinReflectPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">NativeDetector</span><span class="token punctuation">.</span><span class="token function">inNativeImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDiscoverer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KotlinReflectionParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDiscoverer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StandardReflectionParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDiscoverer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalVariableTableParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì˜¤ëŠ˜ ì •ë¦¬í•˜ê³  ê³µìœ í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì€ @PathVariableë¡œ ì§€ì •ëœ íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° @RequestBodyê°€ ì§€ì •ëœ ì˜¤ë¸Œì íŠ¸ í•„ë“œì— ë°ì´í„°ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” êµ¬í˜„ ë°©ì•ˆì´ë‹¤. @PathVariableë¡œ ì§€ì •ëœ íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° </summary>
      
    
    
    
    
    <category term="RequestBodyAdviceAdapter" scheme="https://kdevkr.github.io/tags/RequestBodyAdviceAdapter/"/>
    
    <category term="LocalVariableTableParameterNameDiscoverer" scheme="https://kdevkr.github.io/tags/LocalVariableTableParameterNameDiscoverer/"/>
    
  </entry>
  
  <entry>
    <title>Immutable Configuration Properties</title>
    <link href="https://kdevkr.github.io/spring-boot-immutable-configuration-properties/"/>
    <id>https://kdevkr.github.io/spring-boot-immutable-configuration-properties/</id>
    <published>2024-02-01T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ìŠ¤í”„ë§ ë¶€íŠ¸ 2.2 ë¶€í„° @ConstructorBindingì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ìë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©° ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ë¶€í„°ëŠ” @ConstructorBinding ì„ ì–¸ ëŒ€ìƒì´ ìƒì„±ìë¡œ ì¶•ì†Œë˜ì–´ ì•„ë˜ì™€ ê°™ì´ ìŠ¤í”„ë§ ë¶€íŠ¸ 3 ì—ì„œëŠ” ìƒì„±ìê°€ í•˜ë‚˜ì¸ ê²½ìš°ì—ëŠ” êµ³ì´ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.</p><pre class="language-java" data-language="java"><div class="caption"><span>Spring Boot 2.7</span></div><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token annotation punctuation">@ConstructorBinding</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"feature"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeatureProperties</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@ConfigurationPropertiesScan</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><div class="caption"><span>Spring Boot 3.2</span></div><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"feature"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeatureProperties</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@ConfigurationPropertiesScan</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="Parameter-Name-Discovery-from-Spring-Boot-3-1"><a href="#Parameter-Name-Discovery-from-Spring-Boot-3-1" class="headerlink" title="Parameter Name Discovery from Spring Boot 3.1"></a>Parameter Name Discovery from Spring Boot 3.1</h5><blockquote><p>Ensure that your compiler is configured to use the â€˜-parametersâ€™ flag.</p></blockquote><p>ìŠ¤í”„ë§ ë¶€íŠ¸ 3.2 ì—ì„œ ìƒì„±ì ë°”ì¸ë”©ì„ í†µí•´ Immutable Configuration Propertiesë¥¼ ë§Œë“œë ¤ëŠ” ê²½ìš° ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ìœ„ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” <a href="https://github.com/spring-projects/spring-boot/issues/38603">MissingParametersFailureAnalyzer</a> ì— ì˜í•´ ì¶œë ¥ë˜ëŠ” ê²ƒìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ 3.2 ì—ì„œ ì˜ì¡´í•˜ëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ë²„ì „ì—ì„œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ íŒŒë¼ë¯¸í„° ì´ë¦„ì„ ì¶”ë¡ í•´ì˜¤ë˜ <a href="https://github.com/spring-projects/spring-framework/issues/29559">LocalVariableTableParameterNameDiscoverer í´ë˜ìŠ¤ê°€ ì œê±°</a>ë˜ì–´ íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ì¶”ë¡ í•˜ëŠ” ëŒ€ìƒì— í•´ë‹¹í•˜ëŠ” ìƒì„±ì ë°”ì¸ë”©ì„ ìœ„í•´ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/core/StandardReflectionParameterNameDiscoverer.java">StandardReflectionParameterNameDiscoverer</a> ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆë„ë¡ ì»´íŒŒì¼ëŸ¬ì— ëŒ€í•´ <code>-parameters</code> ì˜µì…˜ì„ ì§€ì •í•´ì•¼í•œë‹¤.</p><pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy"><span class="token comment">// NOTE: https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention</span>tasks<span class="token punctuation">.</span><span class="token function">withType</span><span class="token punctuation">(</span>JavaCompile<span class="token punctuation">)</span><span class="token punctuation">.</span>configureEach <span class="token punctuation">&#123;</span>    options<span class="token punctuation">.</span>compilerArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"-parameters"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p>ë§Œì•½, ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©° ê·¸ë˜ë“¤ì´ ì•„ë‹Œ <strong>Build and run using</strong> ì˜µì…˜ìœ¼ë¡œ Intellij IDEAë¥¼ ì§€ì •í•˜ëŠ” í¸ì´ë¼ë©´ ìë°” ì»´íŒŒì¼ëŸ¬ ì˜µì…˜ì— <code>-parameters</code> ì˜µì…˜ì„ ë³„ë„ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤. ìë°” ì»´íŒŒì¼ëŸ¬ ì˜µì…˜ì— <code>-paramters</code> í”Œë˜ê·¸ë¥¼ ì„¤ì •í–ˆìŒì—ë„ íŒŒë¼ë¯¸í„° ì´ë¦„ ì¶”ë¡ ì„ ìœ„í•œ ì˜¤ë¥˜ê°€ ì¶œë ¥ëœë‹¤ë©´ ì¸í…”ë¦¬ì œì´ê°€ ìƒì„±í•œ <code>out</code> í´ë”ë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•´ë³´ë„ë¡ í•˜ì.</p><p><img data-src="/images/posts/spring-boot-immutable-configuration-properties/01.png"></p><blockquote><p>Spring Boot 3.2 ì—ì„œ Immutable Configuration Properties ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìƒê°ì§€ë„ ëª»í•œ ì‚½ì§ˆì„ í–ˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="ì°¸ê³ -ë§í¬"><a href="#ì°¸ê³ -ë§í¬" class="headerlink" title="ì°¸ê³  ë§í¬"></a>ì°¸ê³  ë§í¬</h4><ul><li><a href="https://www.baeldung.com/configuration-properties-in-spring-boot#immutable-configurationproperties-binding">Immutable @ConfigurationProperties Binding</a></li><li><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M2-Release-Notes#constructingbinding-no-longer-needed-at-the-type-level">@ConstructingBinding No Longer Needed at the Type Level</a></li><li><a href="https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention">LocalVariableTableParameterNameDiscoverer has been removed in 6.1</a></li><li><a href="https://github.com/spring-projects/spring-framework/issues/29559">Remove LocalVariableTableParameterNameDiscoverer</a></li><li><a href="https://github.com/spring-projects/spring-boot/issues/38603">Failures due to code not being compiled with â€˜-parametersâ€™ are hard to identify</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ìŠ¤í”„ë§ ë¶€íŠ¸ 2.2 ë¶€í„° @ConstructorBindingì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ìë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©° ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ë¶€í„°ëŠ” @ConstructorBinding ì„ ì–¸ ëŒ€ìƒì´ ìƒì„±ìë¡œ ì¶•ì†Œë˜ì–´ ì•„ë˜ì™€ ê°™ì´ ìŠ¤í”„ë§ ë¶€íŠ¸ 3 ì—ì„œ</summary>
      
    
    
    
    
    <category term="Spring Boot" scheme="https://kdevkr.github.io/tags/Spring-Boot/"/>
    
    <category term="Configuration Properties" scheme="https://kdevkr.github.io/tags/Configuration-Properties/"/>
    
    <category term="Constructor Binding" scheme="https://kdevkr.github.io/tags/Constructor-Binding/"/>
    
  </entry>
  
  <entry>
    <title>Amazon Linux 2023ì„ VirtualBoxì—ì„œ ì‹¤í–‰í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/amazonlinux2023-virtualbox/"/>
    <id>https://kdevkr.github.io/amazonlinux2023-virtualbox/</id>
    <published>2024-01-29T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/amazonlinux2-virtualbox/">Amazon Linux 2ë¥¼ VirtualBoxì—ì„œ ì‹¤í–‰í•˜ê¸°</a>ì²˜ëŸ¼ Amazon Linux 2023ì„ VM ê°€ìƒë¨¸ì‹ ìœ¼ë¡œ ì‹¤í–‰í•´ë³´ì.</p><h4 id="Amazon-Linux-2023-ê°€ìƒ-ë¨¸ì‹ -ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ"><a href="#Amazon-Linux-2023-ê°€ìƒ-ë¨¸ì‹ -ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ" class="headerlink" title="Amazon Linux 2023 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"></a>Amazon Linux 2023 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</h4><ul><li><a href="https://drive.google.com/file/d/17iBVLBLLJahQDb-3kgsWRCh72hzt1FIp/view?usp=sharing">seed.io ë¶€íŠ¸ ì´ë¯¸ì§€</a></li><li><a href="https://cdn.amazonlinux.com/al2023/os-images/2023.3.20240122.0/kvm/">Amazon Linux 2023 LTS 2023.3.20240122.0 kernel-6.1 x86_64 KVM image</a></li></ul><h4 id="ê°€ìƒ-ë¨¸ì‹ -ë§Œë“¤ê¸°-ë°-ì‹¤í–‰"><a href="#ê°€ìƒ-ë¨¸ì‹ -ë§Œë“¤ê¸°-ë°-ì‹¤í–‰" class="headerlink" title="ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸° ë° ì‹¤í–‰"></a>ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸° ë° ì‹¤í–‰</h4><p><img data-src="/images/posts/amazonlinux2023-virtualbox/01.png" alt="1. ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸°"></p><p>ìƒˆë¡œ ë§Œë“¤ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°€ìƒ ë¨¸ì‹ ì„ ë§Œë“¤ì. ë¦¬ëˆ…ìŠ¤ ìœ í˜•ì— ëŒ€í•œ ìš´ì˜ ì²´ì œ ì¢…ë¥˜ëŠ” ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆì§€ ì•Šìœ¼ë‚˜ Fedora ê¸°ë°˜ìœ¼ë¡œ ì•Œë ¤ì ¸ìˆìœ¼ë¯€ë¡œ Fedora (64-bit)ë¥¼ ì„ íƒí–ˆë‹¤. ê·¸ë¦¬ê³  ê°€ìƒ ë””ìŠ¤í¬ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•œë‹¤. ìœ„ ìŠ¤í¬ë¦°ìƒ·ì— ë‚˜ì™€ìˆë“¯ì´ <a href="https://cdn.amazonlinux.com/al2023/os-images/2023.3.20240122.0/">Amazon Linux 2023 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€</a> í˜ì´ì§€ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ KVM ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ë©´ ëœë‹¤.</p><p><img data-src="/images/posts/amazonlinux2023-virtualbox/02.png" alt="2. ë¶€íŒ… ì´ë¯¸ì§€ ë””ìŠ¤í¬ ì¶”ê°€"></p><p>ë¶€íŒ… ë””ìŠ¤í¬ ì´ë¯¸ì§€ íŒŒì¼ì€ ì´ì „ <a href="/amazonlinux2-virtualbox/">Amazon Linux 2ë¥¼ VirtualBoxì—ì„œ ì‹¤í–‰í•˜ê¸°</a> ê¸€ì—ì„œ ê³µìœ í•œ seed.iso íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•˜ì. ì‚¬ìš©ì ì´ë¦„ì€ ec2-user ì´ë©° ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ëŠ” amazon ì´ë‹¤.</p><p><img data-src="/images/posts/amazonlinux2023-virtualbox/03.png" alt="3. ì‚¬ìš©ì ê³„ì • êµ¬ì„±"></p><p><img data-src="/images/posts/amazonlinux2023-virtualbox/04.png" alt="4. ec2-user ë¡œê·¸ì¸"></p><p>ec2-user ë° amazon ì„ ì…ë ¥í•˜ë©´ Amazon Linux 2 ì™€ëŠ” ë‹¤ë¥´ê²Œ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì„ ìš”êµ¬í•œë‹¤. ìœ„ ìŠ¤í¬ë¦°ìƒ·ì²˜ëŸ¼ ì‹ ê·œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ë¡œê·¸ì¸ì„ ì™„ë£Œí•˜ì. ë˜í•œ, ì‚¬ìš©ì ê³„ì • êµ¬ì„±ì´ ì˜¬ë°”ë¥´ì§€ ì•Šê²Œ ë  ìˆ˜ ìˆì–´ ë¶€íŒ… ë””ìŠ¤í¬ë¡œ ì‚¬ìš©í•œ seed.isoë¥¼ í•´ì œí•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.</p><p><img data-src="/images/posts/amazonlinux2023-virtualbox/05.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;/amazonlinux2-virtualbox/&quot;&gt;Amazon Linux 2ë¥¼ VirtualBoxì—ì„œ ì‹¤í–‰í•˜ê¸°&lt;/a&gt;ì²˜ëŸ¼ Amazon Linux 2023ì„ VM ê°€ìƒë¨¸ì‹ ìœ¼ë¡œ ì‹¤í–‰í•´ë³´ì.&lt;/p&gt;
&lt;h4 id=&quot;Amazon-Linux-</summary>
      
    
    
    
    
    <category term="Oracle VirtualBox" scheme="https://kdevkr.github.io/tags/Oracle-VirtualBox/"/>
    
    <category term="AL2023" scheme="https://kdevkr.github.io/tags/AL2023/"/>
    
  </entry>
  
  <entry>
    <title>ë©”ì†Œë“œ ë³´ì•ˆì— ì˜í•œ íŠ¸ëœì­ì…˜ ì´ìŠˆ</title>
    <link href="https://kdevkr.github.io/spring-boot-method-security-transaction-issue/"/>
    <id>https://kdevkr.github.io/spring-boot-method-security-transaction-issue/</id>
    <published>2024-01-28T13:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ë©”ì†Œë“œ ë³´ì•ˆì„ ì˜ í™œìš©í•˜ê³  ìˆì—ˆìœ¼ë‚˜ ë©”ì†Œë“œ ë³´ì•ˆì— ì˜í•´ íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•Šê²Œ ëœ ë¬¸ì œê°€ ë°œìƒí–ˆë˜ ì‹œìŠ¤í…œì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ë¡œ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŒì„ ê³µìœ í•˜ê³ ì í•œë‹¤. ì‹œìŠ¤í…œì„ ì´ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ í´ë¼ì´ì–¸íŠ¸ í¬ë ˆë´ì…œì„ ë°œê¸‰í•˜ê³  OAuth í† í°ì„ ë°œê¸‰í•˜ì—¬ OpenAPIë¥¼ ì´ìš©í•  ìˆ˜ ìˆìœ¼ë©° OpenAPI ì— ëŒ€í•œ ê¶Œí•œì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ <a href="https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html">ë©”ì†Œë“œ ë³´ì•ˆ</a>ê³¼ í•¨ê»˜ PermissionEvaluatorë¥¼ êµ¬í˜„í•˜ì—¬ ì»¤ìŠ¤í…€ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.</p><ul><li>Spring Boot 2.3.12.RELEASE</li><li>Spring Security OAuth</li><li>EnableGlobalMethodSecurity with PermissionEvaluator</li><li>UserDetailsService + ClientDetailsService</li></ul><pre class="language-java" data-language="java"><div class="caption"><span>JdbcConfiguration</span></div><code class="language-java"><span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">TransactionManagementConfigurer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PlatformTransactionManager</span> <span class="token function">annotationDrivenTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><div class="caption"><span>MethodSecurityConfiguration</span></div><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>prePostEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodSecurityConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">GlobalMethodSecurityConfiguration</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">MethodSecurityExpressionHandler</span> <span class="token function">createExpressionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">OAuth2MethodSecurityExpressionHandler</span> expressionHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OAuth2MethodSecurityExpressionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        expressionHandler<span class="token punctuation">.</span><span class="token function">setApplicationContext</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> expressionHandler<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><div class="caption"><span>AuthPermissionEvaluator</span></div><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">"auth"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthPermissionEvaluator</span> <span class="token keyword">implements</span> <span class="token class-name">PermissionEvaluator</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Authentication</span> authentication <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ClientDetails</span> clientDetails <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">loadClientByClientId</span><span class="token punctuation">(</span>authentication<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>clientDetails <span class="token keyword">instanceof</span> <span class="token class-name">UserClient</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">UserClient</span> userClient <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserClient</span><span class="token punctuation">)</span> clientDetails<span class="token punctuation">;</span>            <span class="token keyword">return</span> userClient<span class="token punctuation">.</span><span class="token function">getScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">,</span> <span class="token class-name">Object</span> targetDomainObject<span class="token punctuation">,</span> <span class="token class-name">Object</span> permission<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">,</span> <span class="token class-name">Serializable</span> targetId<span class="token punctuation">,</span> <span class="token class-name">String</span> targetType<span class="token punctuation">,</span> <span class="token class-name">Object</span> permission<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">aop</span><span class="token punctuation">:</span>    <span class="token key atrule">auto</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">proxy-target-class</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">hikari</span><span class="token punctuation">:</span>      <span class="token key atrule">auto-commit</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre><h4 id="ë©”ì†Œë“œ-ë³´ì•ˆê³¼-íŠ¸ëœì­ì…˜-ì²˜ë¦¬-ìˆœì„œ-ë¬¸ì œ"><a href="#ë©”ì†Œë“œ-ë³´ì•ˆê³¼-íŠ¸ëœì­ì…˜-ì²˜ë¦¬-ìˆœì„œ-ë¬¸ì œ" class="headerlink" title="ë©”ì†Œë“œ ë³´ì•ˆê³¼ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ìˆœì„œ ë¬¸ì œ"></a>ë©”ì†Œë“œ ë³´ì•ˆê³¼ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ìˆœì„œ ë¬¸ì œ</h4><p>íŠ¸ëœì­ì…˜ì´ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë¬¸ì œì— ëŒ€í•´ì„œ í™•ì¸í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ TransactionAspectSupportê°€ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ê°€ ìˆë‹¤. @EnableGlobalMethodSecurity(prePostEnabled &#x3D; true) ì™€ GlobalMethodSecurityConfiguration ê·¸ë¦¬ê³  @EnableTransactionManagement() ì¸ ìƒíƒœì—ì„œ ì»¤ìŠ¤í…€ PermissionEvaluatorë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ íŠ¸ëœì­ì…˜ ì¸í„°ì…‰í„°ê°€ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆê²Œ ë˜ê³  @Transactionalì„ ëª…ì‹œí•˜ë”ë¼ë„ íŠ¸ëœì­ì…˜ì´ ìƒì„±ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ë‚´ì¬í•˜ê²Œ ëœë‹¤.</p><pre class="language-java" data-language="java"><div class="caption"><span>TransactionAspectSupport ê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²½ìš°</span></div><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$c53b685e<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span>MethodProxy</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">218</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">invokeJoinpoint</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">792</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">163</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span>PersistenceExceptionTranslationInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">PersistenceExceptionTranslationInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span>AuthorizationManagerBeforeMethodInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">AuthorizationManagerBeforeMethodInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">162</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">DynamicAdvisedInterceptor</span><span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">707</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">EnhancerBySpringCGLIB</span>$$<span class="token number">7</span>a11f77b<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span><span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserApi</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$df90bb86<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span></code></pre><pre class="language-java" data-language="java"><div class="caption"><span>TransactionAspectSupport ê°€ ë™ì‘í•˜ëŠ” ê²½ìš°</span></div><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$c53b685e<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionInterceptor</span>$<span class="token number">1.</span><span class="token function">proceedWithInvocation</span><span class="token punctuation">(</span><span class="token class-name">TransactionInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionAspectSupport</span><span class="token punctuation">.</span><span class="token function">invokeWithinTransaction</span><span class="token punctuation">(</span><span class="token class-name">TransactionAspectSupport</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">388</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">TransactionInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">119</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">DynamicAdvisedInterceptor</span><span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">707</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">EnhancerBySpringCGLIB</span>$$<span class="token number">964218d</span><span class="token number">2.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span><span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserApi</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$df90bb86<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span></code></pre><h4 id="Migrating-from-EnableGlobalMethodSecurity"><a href="#Migrating-from-EnableGlobalMethodSecurity" class="headerlink" title="Migrating from @EnableGlobalMethodSecurity"></a><a href="https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html#migration-enableglobalmethodsecurity">Migrating from @EnableGlobalMethodSecurity</a></h4><p>ì´ì™€ ê°™ì´ íŠ¸ëœì­ì…˜ ì¸í„°ì…‰í„°ê°€ ì ìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¡œ ì¸í•˜ì—¬ @EnableGlobalMethodSecurity ë¥¼ @EnableMethodSecurityë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ @EnableTransactionManagement ì˜ ìˆœì„œë¥¼ 0ìœ¼ë¡œ ì§€ì •í•˜ë©´ í•´ê²°ëœë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token punctuation">(</span>order <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">TransactionManagementConfigurer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PlatformTransactionManager</span> <span class="token function">annotationDrivenTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@EnableMethodSecurity</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodSecurityConfiguration</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$c53b685e<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span>MethodProxy</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">218</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">invokeJoinpoint</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">792</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">163</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span>PersistenceExceptionTranslationInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">PersistenceExceptionTranslationInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionInterceptor</span>$<span class="token number">1.</span><span class="token function">proceedWithInvocation</span><span class="token punctuation">(</span><span class="token class-name">TransactionInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionAspectSupport</span><span class="token punctuation">.</span><span class="token function">invokeWithinTransaction</span><span class="token punctuation">(</span><span class="token class-name">TransactionAspectSupport</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">388</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span>TransactionInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">TransactionInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">119</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">DynamicAdvisedInterceptor</span><span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">707</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserRepository</span>$$<span class="token class-name">EnhancerBySpringCGLIB</span>$$<span class="token number">38621</span>c9f<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserService</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span><span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserApi</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>user<span class="token punctuation">.</span></span>UserApi</span>$$<span class="token class-name">FastClassBySpringCGLIB</span>$$df90bb86<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span>generated<span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span>MethodProxy</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">218</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">invokeJoinpoint</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">792</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>ReflectiveMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">163</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span>CglibAopProxy</span>$<span class="token class-name">CglibMethodInvocation</span><span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token class-name">CglibAopProxy</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">762</span><span class="token punctuation">)</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>authorization<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span>AuthorizationManagerBeforeMethodInterceptor</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">AuthorizationManagerBeforeMethodInterceptor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">162</span><span class="token punctuation">)</span></code></pre><p>UserApiì˜ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ë¶€ì—¬ëœ @PreAuthorize ë¡œ ì¸í•˜ì—¬ AuthorizationManagerBeforeMethodInterceptorê°€ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ì— í¬í•¨ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆê³  TransactionInterceptor ì— ì˜í•´ @Transactional ì´ ì ìš©ëœ ë¦¬íŒŒì§€í† ë¦¬ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì´ì „ì— íŠ¸ëœì­ì…˜ ìƒì„±ì„ ì‹œë„í•˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¬í˜„í•œ ìƒ˜í”Œ í”„ë¡œì íŠ¸ì™€ ë‹¤ë¥´ê²Œ ì‹¤ì œë¡œëŠ” @EnableGlobalMethodSecurityë¥¼ ì‚¬ìš©í•˜ê³  PermissionEvaluator êµ¬í˜„ì²´ ë‚´ì—ì„œ UserServiceë¥¼ ë‚˜ì¤‘ì— ì°¸ì¡°í•˜ë„ë¡ @Lazy ë¥¼ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°ì´ ë˜ì—ˆëŠ”ë° ê·¸ ì´ìœ ì— ëŒ€í•´ì„œëŠ” ì¡°ê¸ˆ ë” ì°¾ì•„ë´ì•¼í•  ê²ƒ ê°™ë‹¤.</p><blockquote><p>ì°¸ê³ ë¡œ, hikari.auto-commit ì˜µì…˜ì´ ì ìš©ë˜ì–´ ìˆì—ˆë‹¤ë©´ @Transactional ì´ ë™ì‘í•˜ì§€ ì•Šì•„ë„ ì¸ì§€í•˜ì§€ ëª»í•˜ê³  ë°˜ì˜ë˜ì—ˆì„ ê²ƒ ê°™ë„¤ìš”.</p></blockquote><h4 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h4><ul><li><a href="https://stackoverflow.com/a/40724843">https://stackoverflow.com/a/40724843</a></li><li><a href="https://github.com/spring-projects/spring-security/issues/13152">https://github.com/spring-projects/spring-security/issues/13152</a></li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html#changing-the-order">https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html#changing-the-order</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ë©”ì†Œë“œ ë³´ì•ˆì„ ì˜ í™œìš©í•˜ê³  ìˆì—ˆìœ¼ë‚˜ ë©”ì†Œë“œ ë³´ì•ˆì— ì˜í•´ íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•Šê²Œ ëœ ë¬¸ì œê°€ ë°œìƒí–ˆë˜ ì‹œìŠ¤í…œì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ë¡œ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŒì„ ê³µìœ í•˜ê³ ì í•œë‹¤. ì‹œìŠ¤í…œì„ ì´ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ í´ë¼ì´ì–¸íŠ¸ í¬ë ˆë´ì…œì„ ë°œê¸‰í•˜ê³  O</summary>
      
    
    
    
    
    <category term="Transactional" scheme="https://kdevkr.github.io/tags/Transactional/"/>
    
    <category term="EnableGlobalMethodSecurity" scheme="https://kdevkr.github.io/tags/EnableGlobalMethodSecurity/"/>
    
    <category term="PermissionEvaluator" scheme="https://kdevkr.github.io/tags/PermissionEvaluator/"/>
    
    <category term="TransactionInterceptor" scheme="https://kdevkr.github.io/tags/TransactionInterceptor/"/>
    
  </entry>
  
  <entry>
    <title>ì¸í…”ë¦¬ì œì´ ê°œë°œ í™˜ê²½ ì„¤ì • (Feat. Code Style)</title>
    <link href="https://kdevkr.github.io/intellij-java-code-style/"/>
    <id>https://kdevkr.github.io/intellij-java-code-style/</id>
    <published>2024-01-21T08:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<h4 id="EditorConfig-ì—ì„œ-K-R-ìŠ¤íƒ€ì¼-ê°•ì œí•˜ê¸°"><a href="#EditorConfig-ì—ì„œ-K-R-ìŠ¤íƒ€ì¼-ê°•ì œí•˜ê¸°" class="headerlink" title="EditorConfig ì—ì„œ K&amp;R ìŠ¤íƒ€ì¼ ê°•ì œí•˜ê¸°"></a>EditorConfig ì—ì„œ K&amp;R ìŠ¤íƒ€ì¼ ê°•ì œí•˜ê¸°</h4><p>ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ì˜ ê¸€ë“¤ì„ ì°¸ê³ í•´ë³´ë‹ˆ ìë°” ì–¸ì–´ì—ì„œì˜ ê¸°ë³¸ K&amp;R ì½”ë“œ ìŠ¤íƒ€ì¼ì´ ì•„ë‹Œ BSD ìŠ¤íƒ€ì¼ë¡œ ë°”ê¾¸ì–´ì„œ ê°œë°œí•˜ëŠ” ì‚¬ëŒë“¤ì´ ìˆë‚˜ë³´ë‹¤. í”„ë¡œì íŠ¸ì—ì„œ EditorConfigë¥¼ ì‚¬ìš©í•˜ê³  ì¸í…”ë¦¬ì œì´ì—ì„œ <strong>EditorConfig ì— ì˜í•´ IDE ì½”ë“œ ìŠ¤íƒ€ì¼ ì„¤ì •ì„ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ ìˆë„ë¡ í™œì„±í™”</strong> í–ˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ê°•ì œí•  ìˆ˜ ìˆë‹¤.</p><pre class="language-toml" data-language="toml"><div class="caption"><span>.editorconfig</span></div><code class="language-toml"><span class="token punctuation">[</span>*<span class="token punctuation">.</span>java<span class="token punctuation">]</span><span class="token key property">ij_java_block_brace_style</span> <span class="token punctuation">=</span> end_of_line<span class="token key property">ij_java_class_brace_style</span> <span class="token punctuation">=</span> end_of_line<span class="token key property">ij_java_method_brace_style</span> <span class="token punctuation">=</span> end_of_line<span class="token key property">ij_java_line_comment_add_space</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><span class="token key property">ij_java_line_comment_add_space_on_reformat</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><span class="token key property">ij_java_line_comment_at_first_column</span> <span class="token punctuation">=</span> <span class="token boolean">false</span></code></pre><blockquote><p>ì´ì™¸ì—ë„ ìˆ˜ ë§ì€ ê·œì¹™ì„ ì„¤ì •í•  ìˆ˜ ìˆê²Œ ì œê³µí•˜ë¯€ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ê°•ì œí•´ì•¼í•  í•„ìš”ì„±ì´ ìˆëŠ” ê·œì¹™ì´ ë¬´ì—‡ì¸ì§€ ì²´í¬í•´ë³´ëŠ”ê²Œ í•„ìš”í•©ë‹ˆë‹¤.</p></blockquote><h5 id="ì£¼ì„ì—-ëŒ€í•œ-ë“¤ì—¬ì“°ê¸°-ê¸°ë³¸-ì˜µì…˜-ë¹„í™œì„±í™”"><a href="#ì£¼ì„ì—-ëŒ€í•œ-ë“¤ì—¬ì“°ê¸°-ê¸°ë³¸-ì˜µì…˜-ë¹„í™œì„±í™”" class="headerlink" title="ì£¼ì„ì— ëŒ€í•œ ë“¤ì—¬ì“°ê¸° ê¸°ë³¸ ì˜µì…˜ ë¹„í™œì„±í™”"></a>ì£¼ì„ì— ëŒ€í•œ ë“¤ì—¬ì“°ê¸° ê¸°ë³¸ ì˜µì…˜ ë¹„í™œì„±í™”</h5><p><img data-src="/images/posts/intellij-java-code-style/01.png"></p><p>ìœ„ ì˜ˆì‹œì—ì„œ <code>ij_java_line_comment_at_first_column</code> ì€ ë¼ì¸ ë‹¨ìœ„ ì£¼ì„ì— ëŒ€í•´ ë“¤ì—¬ì“°ê¸° ê¸°ë³¸ ì˜µì…˜ìœ¼ë¡œ ì„ íƒë˜ì–´ìˆëŠ” ì²«ë²ˆì§¸ ì—´ì— ì£¼ì„ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ë¹„í™œì„±í™”í•˜ë„ë¡ í•˜ëŠ” ì˜µì…˜ ì„¤ì •ì´ë‹¤. ì²´í¬ìŠ¤íƒ€ì¼ì—ì„œ ë“¤ì—¬ì“°ê¸° ê·œì¹™ì´ ìˆì–´ë„ ì¸í…”ë¦¬ì œì´ ê¸°ë³¸ê°’ì´ ì²«ë²ˆì§¸ ì—´ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ê¸°ì— ë“¤ì—¬ì“°ê¸° ê·œì¹™ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ í˜•íƒœë¡œ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìœ„ì™€ ê°™ì´ ëª…ì‹œì ìœ¼ë¡œ ë¹„í™œì„±í™”í•œë‹¤ë©´ ì¸í…”ë¦¬ì œì´ IDE ìë°” ì½”ë“œ ìŠ¤íƒ€ì¼ ì„¤ì • ì¤‘ <code>Code Generation â†’ Comment Code â†’ Line comment at first column</code> ì´ ì„ íƒë˜ì–´ìˆì–´ë„ ë¼ì¸ ì¤‘ ì½”ë“œê°€ ì‹œì‘ë˜ëŠ” ê³³ë¶€í„° ì£¼ì„ì´ ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p>Line comment at first column ì„ ë¹„í™œì„±í™”í•˜ëŠ” ê±´ ê½¤ë‚˜ ë§ì€ ì¡°ì§ì—ì„œ ìœ ìš©í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br>ê·¸ë˜ë„ ë¬´ì˜ë¯¸í•œ ì£¼ì„ì¸ì§€ì— ëŒ€í•œ ìœ ë¬´ëŠ” ë¦¬ë·° ë‹¨ê³„ì—ì„œ ê²€ì¶œí•˜ëŠ”ê²Œ ì¢‹ê² ì£ ?</p></blockquote><h4 id="Checkstyle-ë°-í”„ë¡œì íŠ¸-ì½”ë“œ-ìŠ¤íƒ€ì¼-ì„¤ì •-ê³µìœ í•˜ê¸°"><a href="#Checkstyle-ë°-í”„ë¡œì íŠ¸-ì½”ë“œ-ìŠ¤íƒ€ì¼-ì„¤ì •-ê³µìœ í•˜ê¸°" class="headerlink" title="Checkstyle ë° í”„ë¡œì íŠ¸ ì½”ë“œ ìŠ¤íƒ€ì¼ ì„¤ì • ê³µìœ í•˜ê¸°"></a>Checkstyle ë° í”„ë¡œì íŠ¸ ì½”ë“œ ìŠ¤íƒ€ì¼ ì„¤ì • ê³µìœ í•˜ê¸°</h4><p><img data-src="/images/posts/intellij-java-code-style/02.png"></p><p>í”„ë¡œì íŠ¸ í´ë” ë‚´ì— Checkstyleì— ëŒ€í•œ êµ¬ì„± íŒŒì¼ì´ í¬í•¨ë˜ì–´ìˆë”ë¼ë„ ì¸í…”ë¦¬ì œì´ì—ì„œ Checkstyle í”ŒëŸ¬ê·¸ì¸ì—ì„œ ì‚¬ìš©ë˜ë„ë¡ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ê³  ì½”ë“œ ìŠ¤íƒ€ì¼ì— ì²´í¬ìŠ¤íƒ€ì¼ ì„¤ì •ì„ ìŠ¤í‚¤ë§ˆë¡œ ì„í¬íŠ¸í•˜ëŠ” ê³¼ì •ì€ ê°œë°œìë§ˆë‹¤ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ì‘ì—…ì´ë‹¤. ëŒ€ë¶€ë¶„ ìë°” í”„ë¡œì íŠ¸ë¥¼ ë³´ë©´ .idea ì™€ ê°™ì€ ì¸í…”ë¦¬ì œì´ì—ì„œ ì°¸ì¡°í•˜ëŠ” í´ë”ë¥¼ .gitignoreë¡œ ì¶”ì ë˜ì§€ ì•Šë„ë¡ í•´ë‘ì—ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. í”„ë¡œì íŠ¸ì—ì„œ ì²´í¬ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì•„ë˜ì˜ 3ê°€ì§€ íŒŒì¼ì— ëŒ€í•´ì„œëŠ” í”„ë¡œì íŠ¸ì—ì„œ ê´€ë¦¬ë˜ë„ë¡ ì¶”ê°€í•˜ëŠ” ê²Œ ì¢‹ì„ ìˆ˜ë„ ìˆë‹¤.</p><p>ì•„ë˜ì™€ ê°™ì´ ì´ë¯¸ ë¬´ì‹œë˜ëŠ” ê·œì¹™ì— ëŒ€í•´ì„œë„ .gitignore ê·œì¹™ì—ì„œ ì œì™¸ë˜ëŠ” íŒ¨í„´ì„ ë‘˜ ìˆ˜ ìˆë‹¤.</p><pre class="language-toml" data-language="toml"><div class="caption"><span>.gitignore</span></div><code class="language-toml"><span class="token comment">### IntelliJ IDEA ###</span><span class="token punctuation">.</span>idea!<span class="token punctuation">.</span>idea/codeStyles/codeStyleConfig<span class="token punctuation">.</span>xml!<span class="token punctuation">.</span>idea/codeStyles/Project<span class="token punctuation">.</span>xml!<span class="token punctuation">.</span>idea/checkstyle-idea<span class="token punctuation">.</span>xml</code></pre><blockquote><p>ì´ë¯¸ .idea í´ë”ê°€ ì œì™¸ë˜ì–´ìˆë‹¤ë©´ ìˆ˜ë™ìœ¼ë¡œ 3ê°œì˜ íŒŒì¼ì„ ì˜¤ë¥¸ìª½ ë§ˆìš°ìŠ¤ë¥¼ ëˆŒëŸ¬ Git â†’ Add ê¸°ëŠ¥ìœ¼ë¡œ ì¶”ì ì´ë˜ë„ë¡ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.<br>ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í• ë•Œ í”„ë¡œì íŠ¸ ë‹¨ìœ„ì˜ ì„¤ì •ì„ ê³µìœ í•˜ëŠ” ê±¸ ê³ ë ¤í•˜ì‹œëŠ”ê²Œ ì¢‹ì•„ë³´ì…ë‹ˆë‹¤.</p></blockquote><p><img data-src="/images/posts/intellij-java-code-style/03.png"></p><p>ëìœ¼ë¡œ, ì´ë ‡ê²Œ í•˜ë”ë¼ë„ ê°œë°œ í™˜ê²½ ì„¤ì •ì— ëŒ€í•œ ê°€ì´ë“œ ë¬¸ì„œë¥¼ ë‚¨ê¸°ê³  ì •ë§ë¡œ ì„¤ì •ì´ ë™ì¼í•œì§€ ì²´í¬í•´ì£¼ëŠ” ê³¼ì •ì€ í•„ìš”í•˜ë‹¤. í”„ë¡œì íŠ¸ ì½”ë“œë¥¼ ë°›ì•„ë„ ê°œë°œìë§ˆë‹¤ ì‚¬ìš©í•˜ëŠ” IDE ì„¤ì •ì´ ì™„ì „íˆ ë™ì¼í•˜ê²Œ ë§ì¶°ì§€ì§„ ì•Šê¸° ë•Œë¬¸ì— ë©”ì¸ ë¸Œëœì¹˜ì— ì»¤ë°‹í•˜ëŠ” ì—…ë¬´ ë°©ì‹ì€ ì§€ì–‘í•˜ê³  <a href="/github-pr-status-checks/">ì‘ì—… ë¸Œëœì¹˜ì™€ PRì„ í†µí•´ ê°•ì œë¡œ ê²€ì¦í•˜ëŠ” í”„ë¡œì„¸ìŠ¤</a>ê°€ í•„ìš”í•  ìˆ˜ ë°–ì— ì—†ë‹¤.</p><p>ì¸í…”ë¦¬ì œì´ì™€ ì´í´ë¦½ìŠ¤ë¥¼ í˜¼ìš©í•˜ëŠ” ì¡°ì§ì´ë¼ë©´ GGâ€¦ ğŸ˜…</p><hr><h4 id="Checkstyleë¡œ-ì¼ê´€ë˜ì§€-ì•Šì„-ìˆ˜-ìˆëŠ”-ì½”ë“œ-ìŠ¤íƒ€ì¼"><a href="#Checkstyleë¡œ-ì¼ê´€ë˜ì§€-ì•Šì„-ìˆ˜-ìˆëŠ”-ì½”ë“œ-ìŠ¤íƒ€ì¼" class="headerlink" title="Checkstyleë¡œ ì¼ê´€ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼"></a>Checkstyleë¡œ ì¼ê´€ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼</h4><p>ì•ì„œ ë‹¤ë£¬ê²ƒ ì²˜ëŸ¼ Checkstyleì„ ì‚¬ìš©í•˜ë”ë¼ë„ ì¼ê´€ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ì§€ëŠ” ê²½ìš° ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•  ê²ƒì´ëƒì— ë”°ë¼ ê°œë°œìë§ˆë‹¤ ê´€ì ì´ ë‹¤ë¥¼ ìˆ˜ ìˆì§€ë§Œ ì¸í…”ë¦¬ì œì´ ê¸°ë³¸ í¬ë§·í„°ì™€ ì²´í¬ìŠ¤íƒ€ì¼ ê·œì¹™ì— ë”°ë¼ ì¼ê´€ë˜ê²Œ í¬ë§·íŒ…ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ì½”ë“œ ìŠ¤íƒ€ì¼ ì¤‘ì—ì„œ ë§ˆì§€ë§‰ D ìŠ¤íƒ€ì¼ì€ <strong>Method declaration parameters</strong> ì™€ ê°™ì€ ê·œì¹™ì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ê±°ë‚˜ ì•„ë˜ì™€ ê°™ì´ EditorConfig ê·œì¹™ìœ¼ë¡œ ê°•ì œí•˜ì—¬ ì¼ê´€ë˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// A ìŠ¤íƒ€ì¼</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HttpHeaders</span> headers<span class="token punctuation">,</span> <span class="token class-name">Principal</span> principal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// B ìŠ¤íƒ€ì¼</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>                     <span class="token class-name">HttpHeaders</span> headers<span class="token punctuation">,</span> <span class="token class-name">Principal</span> principal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// C ìŠ¤íƒ€ì¼</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>                    <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>                    <span class="token class-name">HttpHeaders</span> headers<span class="token punctuation">,</span>                    <span class="token class-name">Principal</span> principal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// D ìŠ¤íƒ€ì¼</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span>    <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>    <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>    <span class="token class-name">HttpHeaders</span> headers<span class="token punctuation">,</span>    <span class="token class-name">Principal</span> principal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-toml" data-language="toml"><div class="caption"><span>.editorconfig</span></div><code class="language-toml"><span class="token punctuation">[</span>*<span class="token punctuation">.</span>java<span class="token punctuation">]</span><span class="token key property">ij_java_call_parameters_new_line_after_left_paren</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><span class="token key property">ij_java_call_parameters_right_paren_on_new_line</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><span class="token key property">ij_java_method_parameters_new_line_after_left_paren</span> <span class="token punctuation">=</span> <span class="token boolean">true</span><span class="token key property">ij_java_method_parameters_right_paren_on_new_line</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></code></pre><p>ê°œì¸ì ìœ¼ë¡œëŠ” A ìŠ¤íƒ€ì¼ë¡œ ê°œë°œí•˜ë‹¤ê°€ íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ì§ˆìˆ˜ë¡ B ìŠ¤íƒ€ì¼ ê·¸ë¦¬ê³  C ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒ ê°™ê³  D ìŠ¤íƒ€ì¼ì€ ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë° <strong>ìë™ìœ¼ë¡œ ê²€ì¶œí•  ìˆ˜ê°€ ì—†ëŠ” ì¼€ì´ìŠ¤</strong>ë¼ PR ë¦¬ë·° ë‹¨ê³„ì—ì„œ ì²´í¬ê°€ í•„ìš”í•´ë³´ì¸ë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;EditorConfig-ì—ì„œ-K-R-ìŠ¤íƒ€ì¼-ê°•ì œí•˜ê¸°&quot;&gt;&lt;a href=&quot;#EditorConfig-ì—ì„œ-K-R-ìŠ¤íƒ€ì¼-ê°•ì œí•˜ê¸°&quot; class=&quot;headerlink&quot; title=&quot;EditorConfig ì—ì„œ K&amp;amp;R ìŠ¤íƒ€ì¼ ê°•ì œí•˜ê¸°&quot;&gt;&lt;/</summary>
      
    
    
    
    
    <category term="Code Style" scheme="https://kdevkr.github.io/tags/Code-Style/"/>
    
    <category term="Checkstyle" scheme="https://kdevkr.github.io/tags/Checkstyle/"/>
    
    <category term="EditorConfig" scheme="https://kdevkr.github.io/tags/EditorConfig/"/>
    
  </entry>
  
  <entry>
    <title>AWS ALB ì—ì„œ mTLSë¥¼ ì§€ì›í•˜ì§€ ì•Šì•˜ë‹¤ê³ ?!</title>
    <link href="https://kdevkr.github.io/aws-alb-mtls-passthrough/"/>
    <id>https://kdevkr.github.io/aws-alb-mtls-passthrough/</id>
    <published>2024-01-20T08:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<h4 id="OpenADR-ìš”ì²­-ì‹œ-451-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-ğŸ’¥"><a href="#OpenADR-ìš”ì²­-ì‹œ-451-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-ğŸ’¥" class="headerlink" title="OpenADR ìš”ì²­ ì‹œ 451 ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤ ğŸ’¥"></a>OpenADR ìš”ì²­ ì‹œ 451 ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤ ğŸ’¥</h4><p>OpenADR í”„ë¡œí† ì½œì—ì„œ NOT_ALLOWED(451)ì€ ìš”ì²­ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì„ë•Œ ì‘ë‹µë˜ëŠ” ë©”ì‹œì§€ì´ë‹¤. ì²˜ìŒì—ëŠ” OpenADR í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì‹œ ì „ë‹¬í•œ ì¸ì¦ì„œê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê²ƒì„ ì²´í¬í–ˆìœ¼ë‚˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ í™•ì¸í•´ë³´ë‹ˆ ì¸ì¦ì„œê°€ ì„œë²„ê¹Œì§€ ì „ë‹¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. í•´ë‹¹ í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ ê·¸ë™ì•ˆ ì¡°ì§ì—ì„œ êµ¬ì„±í•œ ì¸í”„ë¼ ë°©ì‹ì´ ì•„ë‹Œ ì¼ë³¸ ê³ ê° í™˜ê²½ì„ ìµœëŒ€í•œ ëª¨ë°©í•´ì„œ ë§Œë“  ì‹ ê·œ í™˜ê²½ì— í•´ë‹¹ëœë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œ ì œê³µí•˜ëŠ” ì†”ë£¨ì…˜ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” ê²½ìš° Elastic Beanstalk ì™€ (ELB ì¤‘ L4ì— í•´ë‹¹í•˜ëŠ”) NLB ë¡œ êµ¬ì„±ëœë‹¤.</p><blockquote><p>ë¡œë“œë°¸ëŸ°ì„œë¥¼ ALBë¡œ êµ¬ì„±í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë¹ ë¥¸ íŠ¸ë˜í”½ ì „ë‹¬ê³¼ ì—ë„ˆì§€ ê´€ë ¨ ì‹œìŠ¤í…œ íŠ¹ì„± ìƒ ì™¸ë¶€ì—ì„œ ê³ ì •ë˜ì–´ì•¼í•˜ëŠ” ì•„ì´í”¼ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p></blockquote><h4 id="AWS-ALB-ëŠ”-mTLSë¥¼-ì§€ì›í•´ìš”-ğŸŒ¼"><a href="#AWS-ALB-ëŠ”-mTLSë¥¼-ì§€ì›í•´ìš”-ğŸŒ¼" class="headerlink" title="AWS ALB ëŠ” mTLSë¥¼ ì§€ì›í•´ìš” ğŸŒ¼"></a>AWS ALB ëŠ” mTLSë¥¼ ì§€ì›í•´ìš” ğŸŒ¼</h4><p>2023ë…„ 12ì›”ì— <a href="https://aws.amazon.com/ko/blogs/korea/mutual-authentication-for-application-load-balancer-to-reliably-verify-certificate-based-client-identities/">Application Load Balancer ìƒí˜¸ ì¸ì¦ ê¸°ëŠ¥</a>ì„ ì§€ì›í•˜ê²Œ ë˜ì—ˆê³  ì•„ë˜ì™€ ê°™ì´ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/create-https-listener.html">Application Load Balancerìš© HTTPS ë¦¬ìŠ¤ë„ˆ ìƒì„±</a>ë¬¸ì„œì—ëŠ” ê·¸ë™ì•ˆ ALB ì—ì„œ mTLS ì ìš©ì„ í•  ìˆ˜ ì—†ë‹¤ëŠ” ì •ë³´ê°€ ë‚¨ì•„ìˆëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê³ ê° í™˜ê²½ê³¼ ë™ì¼í•œ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ë©´ì„œë„ ALB ì—ì„œ mTLSë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë¶€ë¶„ì— ì œì•½ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ì±„ì§€ ëª»í–ˆë‹¤.</p><p><img data-src="/images/posts/aws-alb-mtls-passthrough/03.png"></p><h5 id="ì›ë˜ëŠ”-ì§€ì›í•˜ì§€-ì•Šì•˜ë‹¤ëŠ”ê±¸-ì•Œ-ìˆ˜-ìˆëŠ”-ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°-ë‹µë³€-ë§í¬"><a href="#ì›ë˜ëŠ”-ì§€ì›í•˜ì§€-ì•Šì•˜ë‹¤ëŠ”ê±¸-ì•Œ-ìˆ˜-ìˆëŠ”-ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°-ë‹µë³€-ë§í¬" class="headerlink" title="ì›ë˜ëŠ” ì§€ì›í•˜ì§€ ì•Šì•˜ë‹¤ëŠ”ê±¸ ì•Œ ìˆ˜ ìˆëŠ” ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ë‹µë³€ ë§í¬"></a>ì›ë˜ëŠ” ì§€ì›í•˜ì§€ ì•Šì•˜ë‹¤ëŠ”ê±¸ ì•Œ ìˆ˜ ìˆëŠ” ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ë‹µë³€ ë§í¬</h5><ul><li><a href="https://stackoverflow.com/a/41596778">https://stackoverflow.com/a/41596778</a></li><li><a href="https://stackoverflow.com/a/42027781">https://stackoverflow.com/a/42027781</a></li></ul><h4 id="mTLS-íŒ¨ìŠ¤ìŠ¤ë£¨-ì˜µì…˜"><a href="#mTLS-íŒ¨ìŠ¤ìŠ¤ë£¨-ì˜µì…˜" class="headerlink" title="mTLS íŒ¨ìŠ¤ìŠ¤ë£¨ ì˜µì…˜"></a>mTLS íŒ¨ìŠ¤ìŠ¤ë£¨ ì˜µì…˜</h4><blockquote><p>ìƒí˜¸ ì¸ì¦ ì˜µì…˜ì€ ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. <strong>íŒ¨ìŠ¤ìŠ¤ë£¨</strong> ì˜µì…˜ì„ ì„ íƒí•˜ë©´ HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ì²´ì¸ì„ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤. mTLSê°€ í™œì„±í™”ëœ Application Load BalancerëŠ” í•¸ë“œì…°ì´í¬ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ê°€ì ¸ì˜¤ê³ , TLS ì—°ê²°ì„ ì„¤ì •í•œ ë‹¤ìŒ, HTTPS í—¤ë”ì— ìˆëŠ” ëª¨ë“  í•­ëª©ì„ ëŒ€ìƒ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ì²´ì¸ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.</p></blockquote><p>ìœ„ ë¬¸ì¥ìœ¼ë¡œë§Œ í•´ì„í•˜ë©´ ALB ì—ì„œ íŒ¨ìŠ¤ìŠ¤ë£¨ ì˜µì…˜ì„ ì ìš©í•œ ë’¤ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ê¹Œì§€ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œê°€ ë„ë‹¬í•´ì•¼í•˜ì§€ë§Œ íŒ¨ìŠ¤ìŠ¤ë£¨ ì˜µì…˜ì„ í™œì„±í™”í•˜ì—¬ë„ í•´ë‹¹ ì¦ìƒì€ ë™ì¼í•˜ê²Œ ë°œìƒí–ˆë‹¤. ìµœê·¼ ê°±ì‹ ëœ í˜ì´ì§€ë¼ í•œêµ­ì–´ë¡œ ë²ˆì—­ì´ ë˜ì§€ ì•Šì€ <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/mutual-authentication.html#mtls-http-headers">Mutual authentication with TLS in Application Load Balancer</a>ë¥¼ ì°¸ê³ í•˜ë©´ <code>X-Amzn-Mtls-Clientcert</code> í—¤ë”ì˜ URL-encoded PEM í˜•íƒœì˜ ê°’ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì„œì˜ ëŒ€ìƒìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p><p><img data-src="/images/posts/aws-alb-mtls-passthrough/01.png"><br><img data-src="/images/posts/aws-alb-mtls-passthrough/02.png"></p><h4 id="URL-encoded-PEM-with-as-safe-characters-ë¡œ-ì¸í•œ-ì˜¤ë¥˜-âš¡ï¸"><a href="#URL-encoded-PEM-with-as-safe-characters-ë¡œ-ì¸í•œ-ì˜¤ë¥˜-âš¡ï¸" class="headerlink" title="URL-encoded PEM with +=/ as safe characters ë¡œ ì¸í•œ ì˜¤ë¥˜ âš¡ï¸"></a>URL-encoded PEM with <code>+=/</code> as safe characters ë¡œ ì¸í•œ ì˜¤ë¥˜ âš¡ï¸</h4><p>ì›ë˜ëŠ” NLBë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ AWS Elastic Beanstalk í™˜ê²½ì˜ Nginxì— ì „ë‹¬ë˜ëŠ” ì¸ì¦ì„œë¥¼ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#var_ssl_client_escaped_cert">$ssl_client_escaped_cert</a> ë³€ìˆ˜ë¥¼ <code>X-SSL-CERT</code> í—¤ë”ì— í¬í•¨í•˜ì—¬ ì „ë‹¬í•˜ë©´ í—¤ë”ì˜ ê°’ì„ ì¶”ì¶œí•˜ì—¬ ì¸ì¦ì„œë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ ì¡°ì¹˜ë˜ì–´ ìˆì—ˆê¸°ì— <code>X-Amzn-Mtls-Clientcert</code> í—¤ë”ë¡œ ì „ë‹¬ë˜ëŠ” ì¸ì¦ì„œ ì •ë³´ë¥¼ ê·¸ëŒ€ë¡œ <code>X-SSL-CERT</code> í—¤ë”ì— ì „ë‹¬í•˜ëŠ” ì¡°ì¹˜ë¡œ í•´ê²°í•˜ë ¤ í–ˆìœ¼ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ì•Œê³ ë³´ë‹ˆ ì¼ë°˜ì ì¸ URL ì¸ì½”ë”©ì´ ì•„ë‹ˆë¼ +&#x3D;&#x2F; ì™€ ê°™ì€ ì¼ë¶€ ë¬¸ìëŠ” ì¸ì½”ë”©ì—ì„œ ì œì™¸ë˜ì—ˆê¸° ë•Œë¬¸ì— ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ê³  ìˆë˜ <code>URLDecoder</code>ë¡œ ë””ì½”ë”©í•˜ëŠ” ê²½ìš° ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì¸ì¦ì„œê°€ ë˜ì–´ë²„ë¦¬ëŠ” ìƒí™©ì´ ë˜ì—ˆë‹¤.</p><blockquote><p>ìœ„ì™€ ê°™ì€ ìƒí™©ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ìˆ˜ì •ì—†ì´ëŠ” ì¡°ì¹˜ê°€ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— X-SSL-CERT í—¤ë” ì´ì™¸ì— X-Amzn-Mtls-Clientcert ê°€ ìˆë‹¤ë©´ ì¸ì¦ì„œë¡œ ë³€í™˜í•˜ë„ë¡ í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ê¸´ê¸‰í•œ ìƒí™©ì€ ì•„ë‹ˆì—ˆê¸°ì— ì˜ˆì •ëœ ë¦´ë¦¬ì¦ˆì— í¬í•¨í•´ì„œ ë°°í¬í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="Tip-í´ë¼ì´ì–¸íŠ¸-ë˜ëŠ”-ë¡œë“œë°¸ëŸ°ì„œì—ì„œ-ì „ë‹¬í•œ-ìš”ì²­-í—¤ë”ì˜-ê°’ì„-Nginxì—ì„œ-ë‹¤ë¥¸-í—¤ë”ë¡œ-ë°”ê¾¸ì–´ì„œ-ì „ë‹¬í•˜ëŠ”-ë°©ë²•"><a href="#Tip-í´ë¼ì´ì–¸íŠ¸-ë˜ëŠ”-ë¡œë“œë°¸ëŸ°ì„œì—ì„œ-ì „ë‹¬í•œ-ìš”ì²­-í—¤ë”ì˜-ê°’ì„-Nginxì—ì„œ-ë‹¤ë¥¸-í—¤ë”ë¡œ-ë°”ê¾¸ì–´ì„œ-ì „ë‹¬í•˜ëŠ”-ë°©ë²•" class="headerlink" title="Tip. í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì „ë‹¬í•œ ìš”ì²­ í—¤ë”ì˜ ê°’ì„ Nginxì—ì„œ ë‹¤ë¥¸ í—¤ë”ë¡œ ë°”ê¾¸ì–´ì„œ ì „ë‹¬í•˜ëŠ” ë°©ë²•"></a>Tip. í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì „ë‹¬í•œ ìš”ì²­ í—¤ë”ì˜ ê°’ì„ Nginxì—ì„œ ë‹¤ë¥¸ í—¤ë”ë¡œ ë°”ê¾¸ì–´ì„œ ì „ë‹¬í•˜ëŠ” ë°©ë²•</h4><p>Nginx ì„¤ì •ì—ì„œ X-Amzn-Mtls-Clientcert í—¤ë”ì˜ ê°’ì„ X-SSL-CERT ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì•„ë˜ì™€ ê°™ì´ í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-nginx.conf" data-language="nginx.conf"><code class="language-nginx.conf">server &#123;    underscores_in_headers on;      location &#x2F; &#123;        proxy_set_header X-SSL-CERT $http_x_amzn_mtls_clientcert;    &#125;&#125;</code></pre><blockquote><p>í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì „ë‹¬í•œ ì»¤ìŠ¤í…€ í—¤ë”ë¥¼ Nginx ì—ì„œ ë‹¤ì‹œ ì„¤ì •í•˜ì—¬ í¬í•¨ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì°¾ê³  ìˆëŠ” ë¶„ì—ê²Œ ë„ì›€ì´ ë˜ê¸¸ ë°”ëë‹ˆë‹¤.</p></blockquote><h4 id="ê´€ë ¨-ë§í¬"><a href="#ê´€ë ¨-ë§í¬" class="headerlink" title="ê´€ë ¨ ë§í¬"></a>ê´€ë ¨ ë§í¬</h4><ul><li><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/mutual-authentication.html">Mutual authentication with TLS in Application Load Balancer</a></li><li><a href="https://aws.amazon.com/ko/blogs/korea/mutual-authentication-for-application-load-balancer-to-reliably-verify-certificate-based-client-identities/">Application Load Balancer ìƒí˜¸ ì¸ì¦ ê¸°ëŠ¥ â€“ ì¸ì¦ì„œ ê¸°ë°˜ í´ë¼ì´ì–¸íŠ¸ ID ì¸ì¦ ê°€ëŠ¥</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;OpenADR-ìš”ì²­-ì‹œ-451-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-ğŸ’¥&quot;&gt;&lt;a href=&quot;#OpenADR-ìš”ì²­-ì‹œ-451-ì˜¤ë¥˜ê°€-ë°œìƒí•©ë‹ˆë‹¤-ğŸ’¥&quot; class=&quot;headerlink&quot; title=&quot;OpenADR ìš”ì²­ ì‹œ 451 ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤ ğŸ’¥&quot;&gt;&lt;/a</summary>
      
    
    
    
    
    <category term="ALB" scheme="https://kdevkr.github.io/tags/ALB/"/>
    
    <category term="Mutual TLS" scheme="https://kdevkr.github.io/tags/Mutual-TLS/"/>
    
    <category term="X-Amzn-Mtls-Clientcert" scheme="https://kdevkr.github.io/tags/X-Amzn-Mtls-Clientcert/"/>
    
  </entry>
  
  <entry>
    <title>ìŠ¤í”„ë§ ë™ì  ì´ë©”ì¼ í…œí”Œë¦¿</title>
    <link href="https://kdevkr.github.io/spring-dynamic-email-template/"/>
    <id>https://kdevkr.github.io/spring-dynamic-email-template/</id>
    <published>2024-01-20T06:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>HR ì†”ë£¨ì…˜ì¸ ê·¸ë¦¬íŒ…ì²˜ëŸ¼ <a href="https://blog.greetinghr.com/recruiter-email-template/">ì‚¬ìš©ìê°€ ì§ì ‘ ì´ë©”ì¼ í…œí”Œë¦¿ì„ ê´€ë¦¬</a>í•˜ëŠ” ê±´ ì‹œìŠ¤í…œì´ë‚˜ ì„œë¹„ìŠ¤ë§ˆë‹¤ ìš”êµ¬ì‚¬í•­ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬íŒ… ì´ë©”ì¼ì˜ ê²½ìš° ë‚´ë¶€ì ì¸ í…œí”Œë¦¿ì€ ì„œë¹„ìŠ¤ ìì²´ì—ì„œ ê´€ë¦¬í•˜ê³  í…œí”Œë¦¿ ë³€ìˆ˜ë¥¼ ì œê³µí•˜ì—¬ ì´ë©”ì¼ ë‚´ìš©ë§Œ ì…ë ¥í•˜ëŠ” êµ¬ì„±ì´ì§€ë§Œ B2B ì„œë¹„ìŠ¤(ì†”ë£¨ì…˜)ì˜ ê²½ìš° ì„œë¹„ìŠ¤ ì‚¬ì—…ìê°€ ì•„ë‹Œ í•´ë‹¹ ì‚¬ì—…ì ì •ë³´ë¡œ ëŒ€ì²´í•˜ê³  ì‹¶ì€ ê³ ê°ë“¤ì´ ìƒê¸´ë‹¤.</p><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ <a href="https://docs.spring.io/spring-framework/reference/web/webmvc-view/mvc-thymeleaf.html">Thymeleaf</a>, FreeMarker, Mustache ì™€ ê°™ì€ í…œí”Œë¦¿ ì—”ì§„ì„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ ì´ë©”ì¼ í…œí”Œë¦¿ì„ ë§Œë“¤ê³  ì»¨í…ìŠ¤íŠ¸ ì •ë³´ì™€ í•¨ê»˜ HTMLë¡œ ë³€í™˜í•˜ì—¬ ì´ë©”ì¼ë¡œ ë°œì†¡í•˜ëŠ” ê±´ <a href="https://www.thymeleaf.org/doc/articles/springmail.html">Sending email in Spring with Thymeleaf</a>ì™€ ê°™ì€ ì˜ˆì œë„ ê³µìœ ë˜ì–´ìˆì–´ êµ¬í˜„í•˜ëŠ”ê±´ ê°„ë‹¨í•˜ë‹¤. ì‚¬ìš©ìê°€ ì§ì ‘ í…œí”Œë¦¿ì„ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì„ íƒ€ì„ë¦¬í”„ í…œí”Œë¦¿ìœ¼ë¡œ ì´ì•¼ê¸°í•´ë³´ìë©´ StringTemplateResolver í´ë˜ìŠ¤ë¥¼ í†µí•´ ì•„ë˜ì™€ ê°™ì´ í…œí”Œë¦¿ íŒŒì¼ ê²½ë¡œê°€ ì•„ë‹Œ HTML ë¬¸ìì—´ ìì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MessageSource</span> messageSource<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">SpringTemplateEngine</span> templateEngine<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostConstruct</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        templateEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringTemplateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateResolver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringTemplateResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateEngineMessageSource</span><span class="token punctuation">(</span>messageSource<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token class-name">String</span> template<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> variables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">processTemplate</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> variables<span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token class-name">String</span> template<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> variables<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>locale <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span>locale<span class="token punctuation">,</span> variables<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="StringTemplateResolver"><a href="#StringTemplateResolver" class="headerlink" title="StringTemplateResolver"></a>StringTemplateResolver</h4><p>StringTemplateResolverëŠ” StringTemplateResourceë¥¼ í†µí•´ ì™¸ë¶€ íŒŒì¼ì´ë‚˜ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë¬¸ìì—´ì„ í…œí”Œë¦¿ ìì²´ë¡œ ê°„ì£¼í•˜ë©° ê¸°ë³¸ì ìœ¼ë¡œëŠ” ìºì‹œí•  ìˆ˜ ì—†ë‹¤ê³  ì„¤ì •ëœë‹¤. ì•„ë˜ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìœ„ì¹˜í•œ ë©”ì¼ í…œí”Œë¦¿ ì–‘ì‹ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤€ë‹¤. ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ê²Œ ë  ê²ƒì´ë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">void</span> <span class="token class-name">Test_sendEmail_from_TextTemplate_withHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ClassPathResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"templates/mail/2fa.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> html <span class="token operator">=</span> <span class="token class-name">FileCopyUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// String html = """</span>        <span class="token comment">//     &lt;h1>Two-Factor Authentication&lt;/h1></span>        <span class="token comment">//     &lt;h2>Hi, [[$&#123;name&#125;]]&lt;/h2></span>        <span class="token comment">//     &lt;p>The two-step authentication code for the login request is as follows.&lt;/p></span>        <span class="token comment">//     &lt;p>Please enter it on the authentication screen within the time limit.&lt;/p></span>        <span class="token comment">//     &lt;p>Verification Code: &lt;span style="font-size:20px;">[[$&#123;code&#125;]]&lt;/span>&lt;/p></span>        <span class="token comment">//     """;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"Mambo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> htmlContent <span class="token operator">=</span> mailService<span class="token punctuation">.</span><span class="token function">processTemplate</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> variables<span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">forLanguageTag</span><span class="token punctuation">(</span><span class="token string">"ko_KR"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Recipient</span> recipient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Recipient</span><span class="token punctuation">(</span><span class="token string">"Mambo"</span><span class="token punctuation">,</span> <span class="token string">"kdevkr@gmail.com"</span><span class="token punctuation">,</span> <span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span><span class="token constant">TO</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Email</span> email <span class="token operator">=</span> mailService<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string">"[Auth] Requested Two Factor Authentication"</span><span class="token punctuation">,</span> htmlContent<span class="token punctuation">,</span> recipient<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> mailService<span class="token punctuation">.</span><span class="token function">convertTo</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>        mailService<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ìœ„ ì½”ë“œì—ì„œëŠ” ì£¼ì„ì„ í†µí•´ 2fa.html íŒŒì¼ì— 2ì°¨ ì¸ì¦ì„ ìœ„í•œ ì´ë©”ì¼ í…œí”Œë¦¿ì´ ì–´ë–»ê²Œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p></blockquote><h4 id="í…ìŠ¤íŠ¸-í…œí”Œë¦¿-ëª¨ë“œ"><a href="#í…ìŠ¤íŠ¸-í…œí”Œë¦¿-ëª¨ë“œ" class="headerlink" title="í…ìŠ¤íŠ¸ í…œí”Œë¦¿ ëª¨ë“œ"></a>í…ìŠ¤íŠ¸ í…œí”Œë¦¿ ëª¨ë“œ</h4><p>ìœ„ ì˜ˆì‹œì—ì„œëŠ” ì¼ë°˜ì ì¸ í…œí”Œë¦¿ í‘œí˜„ì‹ì´ ì•„ë‹ˆë¼ í…ìŠ¤íŠ¸ ëª¨ë“œì˜ í…œí”Œë¦¿ í‘œí˜„ì‹ì„ ì‚¬ìš©í–ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ ì— ì˜í•´ì„œ ì‚¬ìš©ìê°€ ì´ë©”ì¼ í…œí”Œë¦¿ì„ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ë©´ ì¢‹ì§€ë§Œ ê·¸ê²ƒì´ ì¤€ë¹„ë˜ê¸° ì „ì—ëŠ” ìœ„ì™€ ê°™ì´ í…ìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‘ì„±í•˜ì—¬ ì¡°ê¸ˆì€ ë” ì‰½ê²Œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. </p><ul><li><a href="https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#expression-inlining">Expression inlining</a></li><li><a href="https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#textual-template-modes">Textual template modes</a></li><li><a href="https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#appendix-b-expression-utility-objects">Expression Utility Objects</a></li></ul><h4 id="ë™ì -í…œí”Œë¦¿ìœ¼ë¡œ-ë°œì†¡ëœ-ì´ë©”ì¼"><a href="#ë™ì -í…œí”Œë¦¿ìœ¼ë¡œ-ë°œì†¡ëœ-ì´ë©”ì¼" class="headerlink" title="ë™ì  í…œí”Œë¦¿ìœ¼ë¡œ ë°œì†¡ëœ ì´ë©”ì¼"></a>ë™ì  í…œí”Œë¦¿ìœ¼ë¡œ ë°œì†¡ëœ ì´ë©”ì¼</h4><p><img data-src="/images/posts/spring-dynamic-email-template/01.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;HR ì†”ë£¨ì…˜ì¸ ê·¸ë¦¬íŒ…ì²˜ëŸ¼ &lt;a href=&quot;https://blog.greetinghr.com/recruiter-email-template/&quot;&gt;ì‚¬ìš©ìê°€ ì§ì ‘ ì´ë©”ì¼ í…œí”Œë¦¿ì„ ê´€ë¦¬&lt;/a&gt;í•˜ëŠ” ê±´ ì‹œìŠ¤í…œì´ë‚˜ ì„œë¹„ìŠ¤ë§ˆë‹¤ ìš”êµ¬ì‚¬í•­ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬íŒ… </summary>
      
    
    
    
    
    <category term="Email Template" scheme="https://kdevkr.github.io/tags/Email-Template/"/>
    
    <category term="Thymeleaf" scheme="https://kdevkr.github.io/tags/Thymeleaf/"/>
    
    <category term="SpringTemplateEngine" scheme="https://kdevkr.github.io/tags/SpringTemplateEngine/"/>
    
    <category term="StringTemplateResolver" scheme="https://kdevkr.github.io/tags/StringTemplateResolver/"/>
    
  </entry>
  
  <entry>
    <title>ìŠ¤í”„ë§ ë°ì´í„°ì†ŒìŠ¤</title>
    <link href="https://kdevkr.github.io/spring-datasource/"/>
    <id>https://kdevkr.github.io/spring-datasource/</id>
    <published>2024-01-18T22:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ì†Œê·œëª¨ ì‹œìŠ¤í…œì—ì„œëŠ” ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ ì¡°ê¸ˆì”© ì»¤ì§€ëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê±°ë‚˜ ë‹¤ìˆ˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë˜ëŠ” ê²ƒ ê°™ë‹¤. ë³¸ ê¸€ì—ì„œëŠ” ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ìœ„í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠ”ì§€ë¥¼ ë‹¤ë£¨ì–´ë³´ê³ ì í•œë‹¤. ì•„ë˜ì˜ ì˜ìƒì—ì„œ ìŠ¤í”„ë§ ê°œë°œì Josh Long ì´ ë°ì´í„°ì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ ë‹¤ë£° ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ë‹¤ì–‘í•˜ê²Œ ì„¤ëª…í•˜ê³  ìˆë‹¤.</p><iframe width="520" height="310" src="https://www.youtube.com/embed/rt_cUtb8LnQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><h4 id="DataSourceBuilder"><a href="#DataSourceBuilder" class="headerlink" title="DataSourceBuilder"></a>DataSourceBuilder</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ì— <code>spring.datasource</code> ë¡œ ì‹œì‘í•˜ëŠ” ì†ì„±ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ëŒ€í•œ ì •ë³´ë¥¼ ì„¤ì •í•˜ê³  ìë™ êµ¬ì„±ì„ ì œê³µí•œë‹¤. ì§ì ‘ ë°ì´í„°ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ ê°€ì§€ëŠ” ë°ì´í„°ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê²½ìš°ì— <code>DataSourceBuilder</code> ì™€ <code>DataSourceProperties</code> ë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆë‹¤.</p><blockquote><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì»¤ë„¥ì…˜ í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” HikariCP ì…ë‹ˆë‹¤.</p></blockquote><h4 id="AbstractRoutingDataSource"><a href="#AbstractRoutingDataSource" class="headerlink" title="AbstractRoutingDataSource"></a>AbstractRoutingDataSource</h4><p>ìœ„ ì˜ìƒì—ì„œëŠ” ë©€í‹°-í…Œë„Œì‹œ êµ¬ì„±ìœ¼ë¡œ ì„œë¡œ ë‹¤ë¥¸ ë¦¬ì „ì„ êµ¬ì„±í•œë‹¤ë©´ ìŠ¤ë ˆë“œ ë¡œì»¬ ë³€ìˆ˜ì— ë¦¬ì „ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ë¦¬ì „ì— ë”°ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¡œ ê³ ê°€ìš©ì„±ì˜ HAë¥¼ êµ¬ì„±í•˜ëŠ” ì¸í”„ë¼ì˜ ê²½ìš°ì—ëŠ” AbstractRoutingDataSource ë¥¼ í™œìš©í•˜ì—¬ ì“°ê¸° ì „ìš© í´ëŸ¬ìŠ¤í„° ì—”ë“œí¬ì¸íŠ¸ì™€ ì½ê¸° ì „ìš© ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë‚˜ëˆ„ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë¼ìš°í„° ë°©ì‹ì˜ ë°ì´í„°ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DatabaseConfiguration</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DataSourceProperties</span> dataSourceProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.datasource"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"writer"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">writerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">DataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"reader"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">readerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">DataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>dataSourceProperties<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>dataSourceProperties<span class="token punctuation">.</span><span class="token function">determineUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span>dataSourceProperties<span class="token punctuation">.</span><span class="token function">determineUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span>dataSourceProperties<span class="token punctuation">.</span><span class="token function">determinePassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">driverClassName</span><span class="token punctuation">(</span>dataSourceProperties<span class="token punctuation">.</span><span class="token function">determineDriverClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Primary</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSourceRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ClusterDataSourceRouter</span> dataSourceRouter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClusterDataSourceRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dataSourceRouter<span class="token punctuation">.</span><span class="token function">setTargetDataSources</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">WRITER</span><span class="token punctuation">,</span> <span class="token function">writerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> <span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">READER</span><span class="token punctuation">,</span> <span class="token function">readerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dataSourceRouter<span class="token punctuation">.</span><span class="token function">setDefaultTargetDataSource</span><span class="token punctuation">(</span><span class="token function">writerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> dataSourceRouter<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ClusterType</span> <span class="token punctuation">&#123;</span>        <span class="token constant">WRITER</span><span class="token punctuation">,</span> <span class="token constant">READER</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ClusterDataSourceRouter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractRoutingDataSource</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">determineCurrentLookupKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">boolean</span> readOnly <span class="token operator">=</span> <span class="token class-name">TransactionSynchronizationManager</span><span class="token punctuation">.</span><span class="token function">isCurrentTransactionReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>readOnly<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">READER</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">WRITER</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ëŒ€ë¶€ë¶„ TransactionSynchronizationManagerì˜ íŠ¸ëœì­ì…˜ ì½ê¸° ì†ì„±ì— ë”°ë¼ ì½ê¸° ì „ìš© ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°ë˜ë„ë¡ ì˜ˆì œë¥¼ ê³µìœ í•˜ëŠ” ê²ƒ ê°™ë„¤ìš”.</p></blockquote><h4 id="LazyConnectionDataSourceProxy"><a href="#LazyConnectionDataSourceProxy" class="headerlink" title="LazyConnectionDataSourceProxy"></a>LazyConnectionDataSourceProxy</h4><p>ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ëŠ” @Transactional ì— ì§„ì…í•˜ëŠ” ê³¼ì •ì—ì„œ ì»¤ë„¥ì…˜ ì—°ê²°ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ë‹¤ì¤‘ ë°ì´í„°ì†ŒìŠ¤ì— ëŒ€í•œ êµ¬ì„±ì—ì„œëŠ” LazyConnectionDataSourceProxyë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë„¥ì…˜ íšë“ ì‹œì ì„ ëŠ¦ì¶”ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Primary</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSourceRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ClusterDataSourceRouter</span> dataSourceRouter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClusterDataSourceRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dataSourceRouter<span class="token punctuation">.</span><span class="token function">setTargetDataSources</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">WRITER</span><span class="token punctuation">,</span> <span class="token function">writerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">,</span> <span class="token class-name">ClusterType</span><span class="token punctuation">.</span><span class="token constant">READER</span><span class="token punctuation">,</span> <span class="token function">readerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dataSourceRouter<span class="token punctuation">.</span><span class="token function">setDefaultTargetDataSource</span><span class="token punctuation">(</span><span class="token function">writerDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LazyConnectionDataSourceProxy</span><span class="token punctuation">(</span>dataSourceRouter<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ë°˜ë“œì‹œ ì»¤ë„¥ì…˜ íšë“ ì‹œì ì„ ëŠ¦ì¶”ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ ê²ƒì´ê¸°ì— ê°œë°œìê°€ ì‹œìŠ¤í…œ í™˜ê²½ì— ëŒ€í•œ ë¶„ì„ê³¼ íŒë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì†Œê·œëª¨ ì‹œìŠ¤í…œì—ì„œëŠ” ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ ì¡°ê¸ˆì”© ì»¤ì§€ëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê±°ë‚˜ ë‹¤ìˆ˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë˜ëŠ” ê²ƒ ê°™ë‹¤. ë³¸ ê¸€ì—ì„œëŠ” ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ìœ„í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠ”ì§€ë¥¼ ë‹¤ë£¨ì–´ë³´ê³ ì í•œë‹¤</summary>
      
    
    
    
    
    <category term="DataSourceBuilder" scheme="https://kdevkr.github.io/tags/DataSourceBuilder/"/>
    
    <category term="DataSourceProperties" scheme="https://kdevkr.github.io/tags/DataSourceProperties/"/>
    
    <category term="AbstractRoutingDataSource" scheme="https://kdevkr.github.io/tags/AbstractRoutingDataSource/"/>
    
    <category term="TransactionSynchronizationManager" scheme="https://kdevkr.github.io/tags/TransactionSynchronizationManager/"/>
    
    <category term="LazyConnectionDataSourceProxy" scheme="https://kdevkr.github.io/tags/LazyConnectionDataSourceProxy/"/>
    
  </entry>
  
  <entry>
    <title>ìŠ¤í”„ë§ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</title>
    <link href="https://kdevkr.github.io/spring-file-download/"/>
    <id>https://kdevkr.github.io/spring-file-download/</id>
    <published>2024-01-13T13:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜ˆì œë¥¼ ì°¾ì•„ë³´ë©´ ëŒ€ë¶€ë¶„ì€ ì„œë¸”ë¦¿ ìŠ¤íƒì˜ HttpServletResponseì˜ OutputStream ì— íŒŒì¼ì˜ ë‚´ìš©ì„ ì“°ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ê·¸ëŸ¬ë‚˜, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ë°”ì´íŠ¸ ì²˜ë¦¬ì— ëŒ€í•œ ì¶”ìƒí™”ê°€ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë” ì‰½ê³  ê°„ê²°í•œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜ˆì œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì´ë¦¬ì €ë¦¬ ì°¾ì•„ë³´ë©° í™œìš©í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ë“¤ì„ í†µí•´ ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.</p><pre class="language-java" data-language="java"><div class="caption"><span>FileController.java</span></div><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ContentDisposition</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpHeaders</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">MediaType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/files/sample.csv"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Resource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"sample/file.csv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> resource<span class="token punctuation">.</span><span class="token function">getContentAsByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NOTE: Use FileCopyUtils.copyToByteArray</span>        <span class="token class-name">ContentDisposition</span> contentDisposition <span class="token operator">=</span> <span class="token class-name">ContentDisposition</span><span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token string">"í•œê¸€íŒŒì¼ëª….csv"</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">CONTENT_DISPOSITION</span><span class="token punctuation">,</span> contentDisposition<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_OCTET_STREAM</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-markup" data-language="markup"><div class="caption"><span>src/main/resources/templates/index.html</span></div><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/files/sample.csv<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>sample.csv<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h4 id="Resource-ì™€-ResponseEntity"><a href="#Resource-ì™€-ResponseEntity" class="headerlink" title="Resource ì™€ ResponseEntity"></a>Resource ì™€ ResponseEntity</h4><p>ResponseEntity&lt;Resource&gt;ë„ ê°€ëŠ¥í•˜ì§€ë§Œ ë” ëª…í™•í•œ í‘œí˜„ì„ ìœ„í•´ì„œ <code>byte[]</code>ë¥¼ ëª…ì‹œí•˜ì˜€ë‹¤. ResponseEntityë¥¼ ì“´ ì´ìœ ëŠ” <code>Content-Disposition</code> í—¤ë”ë¥¼ í†µí•´ íŒŒì¼ëª…ì„ ì§€ì •í•˜ê³  ì¼ë°˜ì ì¸ ë°”ì´ë„ˆë¦¬ ì‘ë‹µì„ ì˜ë¯¸í•˜ë„ë¡ <code>application/octet-stream</code> ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. HttpServletResponseë¥¼ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ êµ³ì´ í•„ìš”í•˜ì§€ ì•ŠìŒì„ ë³´ì—¬ì¤€ë‹¤.</p><h4 id="FileCopyUtils-copyToByteArray"><a href="#FileCopyUtils-copyToByteArray" class="headerlink" title="FileCopyUtils.copyToByteArray"></a>FileCopyUtils.copyToByteArray</h4><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 6 ë¶€í„°ëŠ” ì˜¤ë˜ì „ë¶€í„° ì œê³µí•˜ë˜ <code>FileCopyUtils.copyToByteArray</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ Resourceë¥¼ ë°”ì´íŠ¸ ë°°ì—´ë¡œ ë°”ê¾¸ëŠ” í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤. ë§Œì•½, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 5 ì´í•˜ì˜ ë²„ì „ì´ë¼ë©´ Resourceì˜ InputStreamì„ ê°€ì ¸ì™€ì„œ FileCopyUtils.copyToByteArrayë¥¼ ì§ì ‘ ì´ìš©í•˜ë©´ ëœë‹¤.</p><h4 id="ContentDisposition"><a href="#ContentDisposition" class="headerlink" title="ContentDisposition"></a>ContentDisposition</h4><p>ì¼ë¶€ ì˜ˆì œì—ì„œëŠ” Content-Disposition í—¤ë”ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ì„œ ë¬¸ìì—´ì„ ì…ë ¥í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì˜ëª»ëœ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì‚¬ëŒì´ ì…ë ¥í•˜ëŠ”ë° ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì— í¬í•¨ëœ <code>ContentDisposition</code> í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ì‹¬ì§€ì–´ í•œê¸€ë¡œ ëœ íŒŒì¼ëª…ì„ ì§€ì •í•˜ê¸° ìœ„í•´ì„œëŠ” <code>URLEncoder</code>ë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ë° ContentDisposition í´ë˜ìŠ¤ ë‚´ë¶€ì ìœ¼ë¡œ RFC 6266 ì™€ RFC 2047 ì— ë”°ë¼ URL ì¸ì½”ë”©ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ì´ì— ëŒ€í•œ ê³¼ì •ë„ ìƒëµí•  ìˆ˜ ìˆë‹¤.</p><hr><blockquote><p>ì–´ë–¤ê°€ìš”? ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ ì½”ë“œë³´ë‹¤ ê°„ê²°í•´ì¡Œë‚˜ìš”? <a href="https://stackoverflow.com/questions/5673260/downloading-a-file-from-spring-controllers">Downloading a file from spring controllers</a> ì—ì„œ ë” ë§ì€ ì˜ˆì œ ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><hr><h4 id="ëŒ€ìš©ëŸ‰-íŒŒì¼-ë‹¤ìš´ë¡œë“œ"><a href="#ëŒ€ìš©ëŸ‰-íŒŒì¼-ë‹¤ìš´ë¡œë“œ" class="headerlink" title="ëŒ€ìš©ëŸ‰ íŒŒì¼ ë‹¤ìš´ë¡œë“œ"></a>ëŒ€ìš©ëŸ‰ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</h4><p>ì¼ë°˜ì ì¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œëŠ” ìœ„ì™€ ê°™ì´ ë°”ì´íŠ¸ ë°°ì—´ì„ ì‘ë‹µí•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ ìš©ëŸ‰ì´ í° íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•´ì•¼í•˜ëŠ” ê²½ìš°ë¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ëª¨ë¦¬ì— ë¶€ë‹´ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš° StreamingResponseBodyë¥¼ í™œìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ì„ ìŠ¤íŠ¸ë¦¬ë°í•  ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/files/sample.mp4"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StreamingResponseBody</span><span class="token punctuation">></span></span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Resource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"sample/sample.mp4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StreamingResponseBody</span> responseBody <span class="token operator">=</span> output <span class="token operator">-></span>                <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NOTE: 8192 bytes.</span>        <span class="token class-name">ContentDisposition</span> contentDisposition <span class="token operator">=</span> <span class="token class-name">ContentDisposition</span><span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token string">"ë™ì˜ìƒ.mp4"</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">CONTENT_DISPOSITION</span><span class="token punctuation">,</span> contentDisposition<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_OCTET_STREAM</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>responseBody<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ë™ì˜ìƒ-ìŠ¤íŠ¸ë¦¬ë°"><a href="#ë™ì˜ìƒ-ìŠ¤íŠ¸ë¦¬ë°" class="headerlink" title="ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°"></a>ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°</h4><p>ê°„ë‹¨í•œ ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°ì„ ì œê³µí•˜ê³  ì‹¶ì€ ê²½ìš° <code>ResourceRegion</code> ì„ ì‚¬ìš©í•˜ì—¬ ë™ì˜ìƒ í”Œë ˆì´ì–´ì—ì„œ ì „ì²´ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì§€ ì•Šì•„ë„ ì›í•˜ëŠ” ìœ„ì¹˜ë¶€í„° ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ìŠ¤íŠ¸ë¦¬ë° ì‚¬ì´íŠ¸ì˜ ê²½ìš° ë™ì˜ìƒ íŒŒì¼ì„ ì˜ê²Œ ìª¼ê°œí•´ë‘ê³  CDNìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ ê°™ë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/sample.mp4"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ResourceRegion</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">streamingVideo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">HttpHeaders</span> headers<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MalformedURLException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Resource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlResource</span><span class="token punctuation">(</span><span class="token string">"https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_30mb.mp4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResourceRegion</span><span class="token punctuation">></span></span> resourceRegions <span class="token operator">=</span> <span class="token class-name">HttpRange</span><span class="token punctuation">.</span><span class="token function">toResourceRegions</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resource<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">PARTIAL_CONTENT</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">ACCEPT_RANGES</span><span class="token punctuation">,</span> <span class="token string">"bytes"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token function">parseMediaType</span><span class="token punctuation">(</span><span class="token string">"video/mp4"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>resourceRegions<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/files/sample.stream"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">></span></span> <span class="token function">streamingVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MalformedURLException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Resource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlResource</span><span class="token punctuation">(</span><span class="token string">"https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_30mb.mp4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°ì— ëŒ€í•´ì„œëŠ” <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java#L192-L209">AbstractMessageConverterMethodProcessor</a>ì— êµ¬í˜„ë˜ì–´ ìˆì–´ì„œ InputStreamResourceê°€ ì•„ë‹ˆë¼ë©´ HttpRangeë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì•Œì•„ì„œ ì²˜ë¦¬ëœë‹¤ê³  í•œë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜ˆì œë¥¼ ì°¾ì•„ë³´ë©´ ëŒ€ë¶€ë¶„ì€ ì„œë¸”ë¦¿ ìŠ¤íƒì˜ HttpServletResponseì˜ OutputStream ì— íŒŒì¼ì˜ ë‚´ìš©ì„ ì“°ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ê·¸ëŸ¬ë‚˜, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ”</summary>
      
    
    
    
    
    <category term="File" scheme="https://kdevkr.github.io/tags/File/"/>
    
    <category term="Content-Disposition" scheme="https://kdevkr.github.io/tags/Content-Disposition/"/>
    
    <category term="application/octet-stream" scheme="https://kdevkr.github.io/tags/application-octet-stream/"/>
    
  </entry>
  
  <entry>
    <title>í’€ìŠ¤íƒ ê°œë°œì ê´€ì ì—ì„œ í•™ìŠµí•˜ê¸°</title>
    <link href="https://kdevkr.github.io/fullstack/"/>
    <id>https://kdevkr.github.io/fullstack/</id>
    <published>2024-01-12T12:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<p>ì˜¤ëŠ˜ í† ìŠ¤ ì±„ìš© ê³µê³ ë¥¼ ë³´ë‹ˆ <a href="https://toss.im/career/job-detail?job_id=5778130003&company=%ED%86%A0%EC%8A%A4%EB%B1%85%ED%81%AC">í’€ìŠ¤íƒ ê°œë°œì</a> í¬ì§€ì…˜ë„ í¬í•¨ë˜ì–´ìˆëŠ” ê±¸ ë³´ì•˜ë‹¤. ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” í’€ìŠ¤íƒ ê°œë°œìë€ ë‹¨ì–´ë§Œìœ¼ë¡œ ë°œì‘í•˜ëŠ” ë¶„ë“¤ì´ ìˆëŠ”ë° ê²½í—˜ì´ ë§ì§€ ì•Šì€ ê°œë°œìë“¤ì€ í”„ë¡ íŠ¸ì—”ë“œ í˜¹ì€ ë°±ì—”ë“œ ê°œë°œìë¡œ ì¼í•˜ê³  ìˆì–´ë„ <strong>ìµœì†Œí•œ í’€ìŠ¤íƒ ê°œë°œìë¼ëŠ” ê´€ì ìœ¼ë¡œ ì›¹ì— ëŒ€í•œ ì§€ì‹ì„ í•™ìŠµí•´ì•¼</strong> í•˜ì§€ ì•Šì„ê¹Œ ìƒê°í•œë‹¤. ì‹ ì… ê°œë°œìë¥¼ ì±„ìš©í•˜ê¸° ìœ„í•´ì„œ ë©´ì ‘ê´€ìœ¼ë¡œ ì°¸ì—¬í•´ë³¼ ê¸°íšŒê°€ ìˆì—ˆëŠ”ë° ëŒ€ë¶€ë¶„ ë‚˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì— ê´€ì‹¬ì´ ìˆì–´ì„œ ë°±ì—”ë“œ ì§€ì‹ì€ ê´€ì‹¬ì—†ë‹¤ê±°ë‚˜ ë°±ì—”ë“œ ê°œë°œì— ê´€ì‹¬ì´ ìˆì–´ì„œ í”„ë¡ íŠ¸ì—”ë“œëŠ” ì‹ ê²½ì“°ì§€ ì•Šì•˜ë‹¤ê³  ë‹µë³€í•˜ëŠ” ë¶„ë“¤ì´ ë§ì•˜ë˜ ê²ƒ ê°™ë‹¤.</p><p>ë§ì€ ì¸í„°ë„· ê¸€ì´ë‚˜ ìœ íŠœë¸Œ ì˜ìƒì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ í˜¹ì€ ë°±ì—”ë“œ ê°œë°œìê°€ ì•Œì•„ì•¼í•  ì§€ì‹ì— ëŒ€í•´ì„œ ë‚˜ì—´í•´ì£¼ë‹ˆê¹Œ ë‹¨ìˆœíˆ ê·¸ê²ƒë§Œìœ¼ë¡œ ê°œë°œìë¡œ ì¼í•  ìˆ˜ ìˆë‹¤ê³  ì˜¤í•´í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì•„ì§„ ê²ƒ ì¼ì§€ë„ ëª¨ë¥´ê² ë‹¤. ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ìƒê°í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì•„ì§€ë©´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ ì•Œì•„ì•¼í•  ë°±ì—”ë“œ ì§€ì‹ì´ë¼ëŠ” ì •ë³´ê¹Œì§€ ë³´ì´ê¸° ì‹œì‘í•˜ê³  ë°±ì—”ë“œ ê°œë°œìë¼ í•´ë„ ìµœì†Œí•œ HTMLê³¼ CSS ê·¸ë¦¬ê³  ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•Œì•„ì•¼í•œë‹¤ê³  ë§í•˜ê¸°ë„ í•œë‹¤.</p><p><img data-src="https://file2.nocutnews.co.kr/newsroom/image/2023/03/06/202303061456521603_0.jpg"></p><p>ë‹¨ìˆœíˆ ê°œë°œìë¼ëŠ” ê´€ì ì—ì„œê°€ ì•„ë‹ˆë¼ <strong>ë¹„ê°œë°œì ì§ë¬´ë¡œ ì¼í•˜ëŠ” ì‚¬ëŒë“¤ë„ ê°œë°œìì™€ ì†Œí†µí•˜ê¸° ìœ„í•´ì„œ</strong> IT ì§€ì‹ì— ëŒ€í•´ì„œ ì•Œì•„ê°€ê³  ë„ë©”ì¸ì— ëŒ€í•œ ì§€ì‹ë„ í•™ìŠµí•˜ëŠ” ê±´ ë‹¤ë¥´ì§€ ì•Šë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ, ì–´ë– í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ íŠ¹ì • ì˜ì—­ì˜ ì „ë¬¸ê°€ë¡œì¨ ì˜ê²¬ì„ ì œëŒ€ë¡œ ì „ë‹¬í•˜ê³  ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ë¥¸ ì˜ì—­ì˜ ì§€ì‹ì„ ì•Œì•„ì•¼ë§Œ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•œë‹¤.</p><p><strong>ì¸í„°ë„·ì—ì„œ ìœ ëª…í•œ ê¸°ìˆ  ë¸”ë¡œê·¸ë‚˜ ì´ë ¥ì„œë¥¼ ë³´ë‹¤ë³´ë©´ ëŒ€ë¶€ë¶„ ì´ê²ƒ ì €ê²ƒ ë‹¤ í•  ì¤„ ì•„ëŠ” ì‚¬ëŒì´ì—ˆë‹¤.</strong> í”„ë¡ íŠ¸ì—”ë“œ ê·¸ë¦¬ê³  ë°±ì—”ë“œ ì˜ì—­ì—ì„œ ì•Œì•„ì•¼í•  ì§€ì‹ì´ ë„ˆë¬´ë‚˜ë„ ë§ì•„ì¡Œë‹¤ê³  ë§í•˜ì§€ë§Œ ìŠ¤ìŠ¤ë¡œ ê°€ìŠ¤ë¼ì´íŒ…í•˜ì§€ ë§ê³  <strong>í’€ìŠ¤íƒ ê°œë°œìë€ ê´€ì ìœ¼ë¡œ í•™ìŠµ</strong> í•˜ë„ë¡ í•˜ì.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì˜¤ëŠ˜ í† ìŠ¤ ì±„ìš© ê³µê³ ë¥¼ ë³´ë‹ˆ &lt;a href=&quot;https://toss.im/career/job-detail?job_id=5778130003&amp;company=%ED%86%A0%EC%8A%A4%EB%B1%85%ED%81%AC&quot;&gt;í’€ìŠ¤íƒ ê°œë°œì&lt;/a&gt; í¬ì§€</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ê°€ë…ì„± ìˆëŠ” ê°œë°œì ì´ë ¥ì„œ</title>
    <link href="https://kdevkr.github.io/resume-fonts/"/>
    <id>https://kdevkr.github.io/resume-fonts/</id>
    <published>2024-01-01T00:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.443Z</updated>
    
    <content type="html"><![CDATA[<iframe width="520" height="310" src="https://www.youtube.com/embed/ZRTJxA3UDWk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>ì¢‹ì€ ì´ë ¥ì„œì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ë©´ ëŒ€ë¶€ë¶„ì˜ HR ì „ë¬¸ê°€ë“¤ì€ ê°€ë…ì„±ì´ ìˆê²Œ ì‘ì„±í•´ì•¼í•œë‹¤ê³  í”¼ë“œë°±ì„ í•˜ëŠ” í¸ì¸ ê²ƒ ê°™ë‹¤. ê°œë°œì ì´ë ¥ì„œëŠ” ì´ë ‡ê²Œ ì‘ì„±í•´ì•¼í•œë‹¤ê³  ì˜ ì•Œë ¤ì§„ <a href="https://wonny-log.notion.site/Wonny-Public-c2f8051bfb574f349406a30d2bc71a45">ë°ì´í„°ë¡œ ì¼í•˜ëŠ” ê°œë°œì</a> ì—ì„œë„ ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì—¬ëŸ¬ê°€ì§€ë¥¼ ì¡°ì–¸í•´ì£¼ê³  ìˆë‹¤. ìœ„ ìœ íŠœë¸Œ ì˜ìƒì—ì„œëŠ” íœ´ë¨¼ëª…ì¡°ì²´ê°€ ì‹ ë¢°ê°ê³¼ ì•ˆì •ê°ì„ ì£¼ê¸´ í•˜ì§€ë§Œ <strong>ë””ì§€í„¸ íƒ€ì…ì˜ ë¬¸ì„œì—ëŠ” ì í•©í•˜ì§€ ì•Šë‹¤</strong>ê³  ì´ì•¼ê¸°í•˜ë©° ê³ ë”•ì²´ë¥¼ ê¶Œì¥í•˜ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆëŠ”ë° ìš°ë¦¬ê°€ PDF íŒŒì¼ë¡œ ì „ë‹¬í•˜ëŠ” ì´ë ¥ì„œëŠ” ì–´ë””ì— í•´ë‹¹ë ê¹Œ?</p><blockquote><p><a href="https://fonts.google.com/noto/specimen/Noto+Sans+KR/tester">Google Fonts Type tester</a>ë¡œ ë³¸ê³ ë”•(Noto Sans KR) ê²°ê³¼ì™€ êµ¬ê¸€ ì›Œë“œ ë¬¸ì„œì—ì„œ ì‘ì„±í•´ë³¸ ê²°ê³¼ê°€ ë‹¤ë¥´ì§€ë§Œ í™•ì‹¤í•˜ê²Œ ì›Œë“œ ë¬¸ì„œì—ì„œ ë³´ì´ëŠ” ê²°ê³¼ëŠ” ëª…ì¡°ì²´ë³´ë‹¤ëŠ” ê³ ë”•ì²´ê°€ ê°€ë…ì„±ì´ ìˆì–´ë³´ì´ê²Œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p></blockquote><p>ê¸°ì—…ë§ˆë‹¤ ì´ë ¥ì„œë¥¼ ì¶œë ¥í•´ì„œ ê²€í† í•˜ëŠ” ê³³ì´ ì´ì œëŠ” ì—†ë‹¤ê³  ìƒê°í•  ìˆœ ì—†ì§€ë§Œ ê°œë°œì ì§€ì›ìê°€ ìˆ˜ë„ ì—†ë‹¤ëŠ” ì†Œì‹ìœ¼ë¡œ ë³¼ë•ŒëŠ” ì´ë ¥ì„œë¥¼ ê²€í† í•  ë•Œ ì¶œë ¥í•´ì„œ ë³¼ ê°€ëŠ¥ì„±ì€ ì ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤. ê·¸ë ‡ë‹¤ë©´ ìœ„ ì˜ìƒì—ì„œ ì•Œë ¤ì£¼ëŠ” ê²ƒê³¼ ê°™ì´ ê³ ë”•ì²´ë¥¼ ì¨ì•¼ ê°€ë…ì„±ì´ ìˆì„ ê²ƒ ê°™ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆê² ë‹¤.</p><ul><li>ë…¸ì…˜ ì´ë ¥ì„œ : Sans Serif</li><li>ì›í‹°ë“œ ë˜ëŠ” ë ë¦¿ : Pretendard</li></ul><p>ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‘ì„±í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ” ë…¸ì…˜ ì´ë ¥ì„œëŠ” Sans Serif ë¡œ ì•Œê³  ìˆê³  ì›í‹°ë“œë‚˜ ë ë¦¿ ê°™ì€ ì„œë¹„ìŠ¤ì—ì„œëŠ” Pretendard ë¡œ ë³´ì—¬ì£¼ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ëŸ°ë° ì•„ë¬´ë¦¬ ì‹ ê²½ì¨ì„œ ê³ ë¯¼í•˜ê³  ì‘ì„±í•´ë„ <strong>PDFë¡œ ë³€í™˜í•œ ê²°ê³¼ëŠ” ìƒê°ë³´ë‹¤ ì „í˜€ ë‹¤ë¥¸ ëª¨ìŠµì„ ë³´ì—¬</strong>ì¤€ë‹¤. êµ¬ê¸€ ì›Œë“œ ë¬¸ì„œë¡œ ì´ë ¥ì„œë¥¼ ì‘ì„±í•˜ë ¤ê³  í–ˆì„ë•ŒëŠ” ëª…ì¡°ì²´ ë³´ë‹¤ëŠ” ê³ ë”•ì²´ê°€ ë” ê¹”ë”í•˜ë‹¤ê³  ë³´ì—¬ì§€ì§€ë§Œ PDFë¡œ ë‹¤ìš´ë¡œë“œí•œ ìˆœê°„ ëª…ì¡°ì²´ê°€ ë” ê°€ë…ì„±ì´ ìˆê²Œ ì¶œë ¥ë¨ì„ ë³¼ ìˆ˜ ìˆë‹¤.</p><ul><li>ì›¹ ê¸°ë°˜ ì´ë ¥ì„œ : ê³ ë”•ì²´</li><li>ì´ë ¥ì„œ PDF íŒŒì¼ : ëª…ì¡°ì²´</li></ul><p>ë°±ì—”ë“œ ê°œë°œìë¼ì„œ ì˜ ëª°ëì§€ë§Œ ì°¾ì•„ë³´ë‹ˆ ë…¸ì…˜ ì´ë ¥ì„œì˜ sans-serifëŠ” ê³ ë”•ì— í•´ë‹¹ëœë‹¤ê³  í•œë‹¤. ê·¸ë¦¬ê³  serifëŠ” ëª…ì¡°ì— í•´ë‹¹ëœë‹¤ê³  í•˜ë‹ˆ ë…¸ì…˜ ì´ë ¥ì„œë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ê¸°ë³¸ì´ ì•„ë‹Œ <strong>ì„¸ë¦¬í”„ë¡œ ë³€ê²½í•œ í›„ PDFë¡œ ë‚´ë³´ë‚´ëŠ” ê²Œ í•„ìš”</strong>í•´ë³´ì¸ë‹¤. ê·¸ë¦¬ê³  ë…¸ì…˜ ì´ë ¥ì„œë¥¼ PDFë¡œ ë³€í™˜í–ˆì„ë•Œ A4 í¬ê¸°ë³´ë‹¤ëŠ” A3 í¬ê¸°ë¡œ ì„ íƒí–ˆì„ë•Œ PDF íŒŒì¼ì„ ì—° ê²°ê³¼ê°€ ê¹”ë”í–ˆë‹¤.</p><blockquote><p>ë©´ì ‘ê´€ìœ¼ë¡œì¨ ì´ë ¥ì„œë¥¼ ê²€í† í•˜ëŠ” ê²ƒë„ ì–´ë ¤ìš´ ì¼ì´ì§€ë§Œ ì§€ì›ìë¡œì¨ ê°€ë…ì„± ìˆëŠ” ì´ë ¥ì„œë¥¼ ì‘ì„±í•˜ëŠ” ê±´ ì‰½ì§€ ì•Šì„ ì¼ ê°™ìŠµë‹ˆë‹¤. í°íŠ¸ì— ë”°ë¼ì„œ ë””ìŠ¤í”Œë ˆì´ì™€ ë¬¸ì„œ ìƒì—ì„œ ë³´ì´ëŠ” ê²°ê³¼ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì— ìƒˆì‚¼ ë†€ë¼ê²Œ ë˜ë„¤ìš”. ê°œë°œìë„ ë¬¸ì„œí™”ì— ëŒ€í•´ì„œëŠ” ì¤‘ìš”í•˜ë‹¤ê³  ì¸ì§€í•˜ê³ ëŠ” ìˆì§€ë§Œ ë¬¸ì„œë¥¼ ì „ë¬¸ì ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ì¸ë ¥ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ê·¸ë‹¤ì§€ ì‹ ê²½ì“°ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;iframe width=&quot;520&quot; height=&quot;310&quot; src=&quot;https://www.youtube.com/embed/ZRTJxA3UDWk&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-w</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Simple Java Mail ë¡œ ì´ë©”ì¼ ë³´ë‚´ê¸°</title>
    <link href="https://kdevkr.github.io/gmail-smtp-with-simplejavamail/"/>
    <id>https://kdevkr.github.io/gmail-smtp-with-simplejavamail/</id>
    <published>2023-12-30T14:00:00.000Z</published>
    <updated>2024-03-14T22:06:19.439Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/gmail-smtp/">Gmail SMTP</a> ì„ ì‘ì„±í•˜ë©´ì„œ êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ê²ƒì„ ë‹¤ë£¬ ê²ƒë„ 1ë…„ì´ ë„˜ê²Œ ì§€ë‚¬ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ì—ì„œ spring-boot-starter-mail ëª¨ë“ˆì„ í†µí•´ JavaMailSenderë¡œ ì´ë©”ì¼ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” êµ¬í˜„ì„ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤. ìš°ì—°íˆ ì•Œê²Œëœ <a href="https://www.simplejavamail.org/">Simple Java Mail</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” JavaMailSender ì™€ MimeMessageHelperì™€ ê°™ì€ í´ë˜ìŠ¤ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì´ˆë³´ ê°œë°œìë“¤ì—ê²Œ ê°„ë‹¨í•˜ê²Œ ë©”ì¼ ë°œì†¡ì„ í•  ìˆ˜ ìˆë„ë¡ APIë¥¼ ì œê³µí•´ì¤€ë‹¤.</p><h4 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h4><p>ì´ë©”ì¼ ë°œì†¡ì— ëŒ€í•œ ì„¤ì •ì„ ê¹Šê²Œ ë“¤ì–´ê°€ë©´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìœ¼ë‚˜ ì´ˆë³´ ê°œë°œìì—ê²Œ ì í•©í•œ íŠ¹ì§•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li><a href="https://www.simplejavamail.org/features.html#section-builder-api">Fluent API</a></li><li><a href="https://www.simplejavamail.org/configuration.html#section-spring-support">Spring Support</a></li><li><a href="https://www.simplejavamail.org/features.html#section-reusable-mailer">Thread-Safe</a></li><li><a href="https://www.simplejavamail.org/features.html#section-email-validation">ì´ë©”ì¼ ê²€ì¦ ì§€ì›</a></li></ul><h4 id="SSL-and-TLS-with-Google-mail"><a href="#SSL-and-TLS-with-Google-mail" class="headerlink" title="SSL and TLS with Google mail"></a>SSL and TLS with Google mail</h4><p>ê¸°ì¡´ì— <a href="/sending-mail-with-freemarker-template/">í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</a> ì—ì„œ ì²˜ëŸ¼ Gmail SMTP ì„œë²„ë¥¼ ì´ìš©í•  ë•Œ STARTTLS ë°©ì‹ì„ ì‚¬ìš©í–ˆì—ˆë˜ ê²ƒì²˜ëŸ¼ ì–´ë–»ê²Œ ì„¤ì •í•´ì•¼í•˜ëŠ”ì§€ë¥¼ <a href="https://www.simplejavamail.org/features.html#section-gmail">SSL and TLS with Google mail</a>ì—ì„œ ì„¤ëª…í•´ì£¼ê³  ìˆë‹¤. STARTTLS ë°©ì‹ì€ <a href="https://www.simplejavamail.org/security.html#section-transport-strategy-tls">SMTP_TLS</a>ë¥¼ ì‚¬ìš©í•´ì•¼í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">SimpleJavaMailSpringSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMailApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SimpleMailApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">simplejavamail.javaxmail.debug</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">simplejavamail.smtp.host</span><span class="token punctuation">:</span> smtp.gmail.com<span class="token key atrule">simplejavamail.smtp.port</span><span class="token punctuation">:</span> <span class="token number">587</span><span class="token key atrule">simplejavamail.transportstrategy</span><span class="token punctuation">:</span> SMTP_TLS<span class="token key atrule">simplejavamail.smtp.username</span><span class="token punctuation">:</span> kdevkr@gmail.com<span class="token key atrule">simplejavamail.smtp.password</span><span class="token punctuation">:</span> <span class="token string">'ì•± ë¹„ë°€ë²ˆí˜¸'</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>webEnvironment <span class="token operator">=</span> <span class="token class-name">SpringBootTest<span class="token punctuation">.</span>WebEnvironment</span><span class="token punctuation">.</span><span class="token constant">NONE</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">GmailSmtpTests</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token class-name">Mailer</span> mailer<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> mailer<span class="token punctuation">.</span><span class="token function">testConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Email</span> email <span class="token operator">=</span> <span class="token class-name">EmailBuilder</span><span class="token punctuation">.</span><span class="token function">startingBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Mambo &lt;kdevkr@gmail.com>"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token string">"kdevkr@gmail.com"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withSubject</span><span class="token punctuation">(</span><span class="token string">"Java Mail Test with simplejavamail"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withPlainText</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">buildEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> mailer<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì•± ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰ì€ <a href="/gmail-smtp/">Gmail SMTP</a> ê¸€ì„ ì°¸ê³ í•˜ì„¸ìš”.</p></blockquote><h4 id="Convert-Email-to-MimeMessage"><a href="#Convert-Email-to-MimeMessage" class="headerlink" title="Convert Email to MimeMessage"></a>Convert Email to MimeMessage</h4><p>EmailConverter, MailerHelper, JMail í´ë˜ìŠ¤ë¥¼ í†µí•´ ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë° EmailConverterë¥¼ ì´ìš©í•˜ë©´ Email ì„ MimeMessageë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì— JavaMailSenderì™€ì˜ í†µí•©ë„ ìœ ìš©í•´ë³´ì¸ë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Email</span> email <span class="token operator">=</span> <span class="token class-name">EmailBuilder</span><span class="token punctuation">.</span><span class="token function">startingBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> <span class="token class-name">EmailConverter</span><span class="token punctuation">.</span><span class="token function">emailToMimeMessage</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>ë” ìì„¸íˆ spring-boot-starter-mail ê³¼ ë¹„êµí•´ë³´ê³  ì‹¶ë‹¤ë©´ <a href="https://www.simplejavamail.org/feature-matrix.html">Feature Comparison Matrix</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•´ë³´ì„¸ìš”.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;/gmail-smtp/&quot;&gt;Gmail SMTP&lt;/a&gt; ì„ ì‘ì„±í•˜ë©´ì„œ êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ê²ƒì„ ë‹¤ë£¬ ê²ƒë„ 1ë…„ì´ ë„˜ê²Œ ì§€ë‚¬ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ì—ì„œ spring-boot-starter-mail ëª¨ë“ˆì„ í†µí•´ Ja</summary>
      
    
    
    
    
    <category term="Gmail SMTP" scheme="https://kdevkr.github.io/tags/Gmail-SMTP/"/>
    
    <category term="Simple Java Mail" scheme="https://kdevkr.github.io/tags/Simple-Java-Mail/"/>
    
  </entry>
  
</feed>
