<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mambo</title>
  
  <subtitle>Today I Learned ğŸ”¥</subtitle>
  <link href="https://kdevkr.github.io/atom.xml" rel="self"/>
  
  <link href="https://kdevkr.github.io/"/>
  <updated>2021-12-29T14:23:25.031Z</updated>
  <id>https://kdevkr.github.io/</id>
  
  <author>
    <name>Mambo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</title>
    <link href="https://kdevkr.github.io/lombok-annotation-processor/"/>
    <id>https://kdevkr.github.io/lombok-annotation-processor/</id>
    <published>2021-12-29T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ì¸í…”ë¦¬ì œì´ì—ì„œ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ê°€ê¸° ìœ„í•œ ë‚´ìš©ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.</p><h2 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h2><p><a href="https://projectlombok.org/">ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬</a>ëŠ” ìë°” í”„ë¡œì íŠ¸ì—ì„œ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë ë§Œí¼ í¸ë¦¬í•˜ê³  ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/GettingStarted.html">APT(Annotation Processing Tool)</a>ë¥¼ í†µí•´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ(Annotation Processor)ë¡œ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì •ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p><h3 id="ì¸í…”ë¦¬ì œì´-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ"><a href="#ì¸í…”ë¦¬ì œì´-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ" class="headerlink" title="ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ"></a>ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</h3><p>ì¸í…”ë¦¬ì œì´ì—ì„œëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ <a href="https://www.jetbrains.com/help/idea/annotation-processors-support.html">ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥</a>ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ë©´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ê²Œ ë©ë‹ˆë‹¤.</p><h4 id="ê·¸ë˜ë“¤-í”„ë¡œì íŠ¸"><a href="#ê·¸ë˜ë“¤-í”„ë¡œì íŠ¸" class="headerlink" title="ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸"></a>ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸</h4><p>ì¸í…”ë¦¬ì œì´ëŠ” ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ì— ìˆëŠ” ê¸°ë³¸ ê·¸ë˜ë“¤ ë˜í¼ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •ë˜ì–´ìˆìŠµë‹ˆë‹¤. Build Tools &gt; Gradle ë©”ë‰´ì—ì„œ ê¸°ë³¸ ê·¸ë˜ë“¤ ë˜í¼ê°€ ì•„ë‹Œ ì¸í…”ë¦¬ì œì´ ìì²´ë¡œ ë¹Œë“œí•˜ê³  ì‹¤í–‰ë˜ë„ë¡ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸í…”ë¦¬ì œì´ ìì²´ì ìœ¼ë¡œëŠ” ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ì„ ë²ˆë“¤ì— í¬í•¨í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìœ„ì¹˜í•˜ê¸° ë•Œë¬¸ì— ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì–´ìˆë‹¤ë©´ ë¡¬ë³µì— ëŒ€í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê²Œ ë©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compileOnly <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><em>ì¸í…”ë¦¬ì œì´ëŠ” ì¹œì ˆí•˜ê²Œë„ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆì§€ë§Œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ìˆìœ¼ë©´ ì´ë²¤íŠ¸ ë¡œê·¸ì— ê¸°ëŠ¥ í™œì„±í™”ë¥¼ ë¬»ëŠ” ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤.</em><br><em>ë˜í•œ, ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„ íƒí•œ í™˜ê²½ì—ì„œëŠ” ë³„ë‹¤ë¥¸ ì„¤ì •ì—†ì´ë„ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë©´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ë™ì‘í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</em></p></blockquote><h4 id="ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±"><a href="#ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±" class="headerlink" title="ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±"></a>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</h4><p>í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ ì„¤ì •ì€ í”„ë¡œì íŠ¸ì˜ ê·¸ë˜ë“¤ ë˜í¼ë¡œ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì´ë¼ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ê·¸ë˜ë“¤ êµ¬ì„± íŒŒì¼ì— ì •ì˜í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compileOnly <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    annotationProcessor <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê·¸ë˜ë“¤ì˜ annotationProcessorë¥¼ í†µí•´ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ìœ„ì¹˜í•˜ëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë“±ë¡ë¨ì— ë”°ë¼ ì¸í…”ë¦¬ì œì´ëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ í™œì„±í™” ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í™œì„±í™”ì— ëŒ€í•œ ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤. </p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">configurations &#123;</span><br><span class="line">   compileOnly &#123;</span><br><span class="line">       extendsFrom annotationProcessor</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê·¸ë˜ë“¤ ê¸°ë°˜ì˜ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë¡¬ë³µì„ ì¶”ê°€í•˜ë©´ ìœ„ êµ¬ë¬¸ì´ í¬í•¨ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ë¬¸ì˜ ì—­í• ì´ ë¬´ì—‡ì¸ì§€ ê¶ê¸ˆí•˜ì§€ ì•Šìœ¼ì‹ ê°€ìš”? ì¸í…”ë¦¬ì œì´ëŠ” ê·¸ë˜ë“¤ ì„¤ì • íŒ¡ë¦¬ì— ìœ„ êµ¬ë¬¸ì´ í¬í•¨ë˜ëŠ” ê²½ìš° <code>Gradle Imported</code>ë¼ëŠ” ì´ë¦„ì˜ í”„ë¡œíŒŒì¼ë¡œì¨ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ëŠ” ê²ƒì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</p><blockquote><p><em>ì¸í…”ë¦¬ì œì´ëŠ” ê¸°ë³¸ í”„ë¡œíŒŒì¼ì— ëŒ€í•´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´ ì´ë²¤íŠ¸ ë¡œê·¸ë¥¼ í†µí•´ ë¡¬ë³µì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ í™œì„±í™”ë¥¼ ì•ˆë‚´í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</em></p></blockquote><h3 id="ë¡¬ë³µ-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ"><a href="#ë¡¬ë³µ-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ" class="headerlink" title="ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ"></a>ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</h3><p>ë‹¤ì‹œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ìë©´, ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ ì„¤ì •ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><ul><li>ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± í™œì„±í™”(Enable annotation processing)</li><li>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</li></ul><h4 id="ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±-1"><a href="#ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±-1" class="headerlink" title="ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±"></a>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</h4><p>ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± í™œì„±í™” ê¸°ëŠ¥ì„ í†µí•´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ë§Œ, ì  í‚¨ìŠ¤ì™€ ê°™ì€ ë¹Œë“œ í™˜ê²½ì—ì„œ ê·¸ë˜ë“¤ë¡œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ë¥¼ ìœ„í•œ êµ¬ì„±ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">configurations &#123;</span><br><span class="line">    compileOnly &#123;</span><br><span class="line">        extendsFrom annotationProcessor</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">    compileOnly <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    annotationProcessor <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    testCompileOnly <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">    testAnnotationProcessor <span class="string">&#x27;org.projectlombok:lombok&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê·¸ë¦¬ê³  ìœ„ êµ¬ì„±ì€ ê°„ë‹¨í•˜ê²Œ ê·¸ë˜ë“¤ ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ”ë° í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œë„ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">   id <span class="string">&quot;io.freefair.lombok&quot;</span> version <span class="string">&quot;6.3.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ì¸í…”ë¦¬ì œì´ì—ì„œ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ê°€ê¸° ìœ„í•œ ë‚´ìš©ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&quot;Lombok&quot;&gt;&lt;a href=&quot;#Lombok&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
    <category term="IntelliJ" scheme="https://kdevkr.github.io/tags/IntelliJ/"/>
    
    <category term="Lombok" scheme="https://kdevkr.github.io/tags/Lombok/"/>
    
    <category term="Annotation Processor" scheme="https://kdevkr.github.io/tags/Annotation-Processor/"/>
    
  </entry>
  
  <entry>
    <title>Webpack 5 ê¸°ë°˜ì˜ Vue ê°œë°œ í™˜ê²½</title>
    <link href="https://kdevkr.github.io/webpack5-for-vue/"/>
    <id>https://kdevkr.github.io/webpack5-for-vue/</id>
    <published>2021-12-28T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.035Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ <strong>Webpack 5 ê¸°ë°˜ì˜ Vue ê°œë°œ í™˜ê²½</strong>ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br>ë³¸ ê¸€ì—ì„œ ì„¤ëª…í•œ ë‚´ìš©ì— ëŒ€í•œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/webpack5">kdevkr/webpack5</a>ì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p><h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>ë°˜ë“œì‹œ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ë§ì€ ë¶„ë“¤ì´ <a href="https://create-react-app.dev/">Create React App</a> ë˜ëŠ” <a href="https://cli.vuejs.org/">Vue CLI</a>ë¼ëŠ” ë„êµ¬ë¥¼ í†µí•´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í™˜ê²½ì— ëŒ€í•œ ê¸°ë³¸ í”„ë¦¬ì…‹ì„ ê¸°ë°˜ìœ¼ë¡œ í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. ì´ ë„êµ¬ë“¤ì€ ì—¬ëŸ¬ê°€ì§€ ì‚¬í•­ì— ëŒ€í•œ ì›¹íŒ© êµ¬ì„±ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•¨ìœ¼ë¡œì¨ ì›¹íŒ©ì— ëŒ€í•œ ë‚´ìš©ì„ ì•Œì§€ ëª»í•˜ë”ë¼ë„ ì‰½ê²Œ ë¦¬ì•¡íŠ¸ ë˜ëŠ” ë·°ì— ëŒ€í•œ í•™ìŠµì„ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. </p><p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” ì´ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ì›¹íŒ© ì„¤ì •ì— ëŒ€í•´ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. ë˜í•œ, Vue CLIëŠ” ì•ˆíƒ€ê¹ê²Œë„ ì›¹íŒ© 4ì— ëŒ€í•œ êµ¬ì„±ì„ ì œê³µí•˜ë¯€ë¡œ ì´ ë„êµ¬ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í™˜ê²½ì€ ë¬´ì¡°ê±´ ì›¹íŒ© 4ë¡œ ì œí•œë˜ëŠ” ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. <a href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/">2020ë…„ 10ì›”ì— ë¦´ë¦¬ì¦ˆëœ ì›¹íŒ© 5</a> ê¸°ë°˜ì˜ ê°œë°œ í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì§ì ‘ ì›¹íŒ© êµ¬ì„±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p><h3 id="ìš”êµ¬ì‚¬í•­"><a href="#ìš”êµ¬ì‚¬í•­" class="headerlink" title="ìš”êµ¬ì‚¬í•­"></a>ìš”êµ¬ì‚¬í•­</h3><p>ì‹œì‘í•˜ê¸°ì— ì•ì„œ, ì›¹íŒ© 5ëŠ” ë…¸ë“œ 10.13.0 ì´ìƒì˜ ë²„ì „ì„ ìš”êµ¬í•˜ë©° í•¨ê»˜ ê°œë°œ í”„ë¡ì‹œ ì„œë²„ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” webpack-dev-server@4 ì—ì„œëŠ” ë…¸ë“œ 12.13.0 ì´ìƒì„ ìš”êµ¬í•©ë‹ˆë‹¤. </p><ul><li>Webpack5 required v10.13.0+</li><li>webpack-dev-server@4 v12.13.0+</li></ul><h4 id="í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ"><a href="#í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ" class="headerlink" title="í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ"></a>í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ</h4><p>ìœ„ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë…¸ë“œ ë²„ì „ì„ ì œí•œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì œê°€ ì´ì „ì— ê³µìœ í•œ <a href="https://kdevkr.github.io/strict-nodejs-version-for-project/">í”„ë¡œì íŠ¸ì˜ ë…¸ë“œ ë²„ì „ ì œí•œí•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ë…¸ë“œ ì—”ì§„ ë²„ì „ì„ 12.13.0 ì´ìƒìœ¼ë¡œ ì„¤ì •í•´ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•˜ëŠ” ë°”ì…ë‹ˆë‹¤.</p><h3 id="ì»¤ë°‹ë³„ë¡œ-í™•ì¸í•˜ëŠ”-êµ¬ì„±"><a href="#ì»¤ë°‹ë³„ë¡œ-í™•ì¸í•˜ëŠ”-êµ¬ì„±" class="headerlink" title="ì»¤ë°‹ë³„ë¡œ í™•ì¸í•˜ëŠ” êµ¬ì„±"></a>ì»¤ë°‹ë³„ë¡œ í™•ì¸í•˜ëŠ” êµ¬ì„±</h3><p>ê° ì»¤ë°‹ ë‹¨ìœ„ì˜ Browser Filesë¥¼ í†µí•´ ì–´ë–»ê²Œ êµ¬ì„±ì´ ë³€í™”í•˜ëŠ”ì§€ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><h4 id="Add-webpack-config-js-for-default-configuration"><a href="#Add-webpack-config-js-for-default-configuration" class="headerlink" title="Add webpack.config.js for default configuration"></a><a href="https://github.com/kdevkr/webpack5/commit/3f858c2702720088b8647bdb55a9f830d54a8d91">Add webpack.config.js for default configuration</a></h4><p>ê¸°ë³¸ êµ¬ì„±ì„ ìœ„í•œ webpack.config.js íŒŒì¼ì„ ë§Œë“¤ê³  node-env ê°’ì— ë”°ë¼ ë²ˆë“¤ íŒŒì¼ëª…ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npx webpack --node-env production <span class="comment"># ëª¨ë“œë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ì§€ë§Œ node-env ê°’ì— ì˜í•´ ì²˜ë¦¬ë©ë‹ˆë‹¤.</span></span><br></pre></td></tr></table></figure><h4 id="Add-vue-loader"><a href="#Add-vue-loader" class="headerlink" title="Add vue-loader"></a><a href="https://github.com/kdevkr/webpack5/commit/3ca2fc1de5573ae339b0271ea482a73bf3dac397">Add vue-loader</a></h4><p>Vue SFC íŒŒì¼ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ vue-loaderë¥¼ ì¶”ê°€í•˜ê³  Vue ê°œë°œ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ê°„ë‹¨í•œ ìƒ˜í”Œ HTML íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ Vue ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ë³€í™˜ë˜ì—ˆìŒì„ í™•ì¸í•©ë‹ˆë‹¤.</p><h4 id="Add-sass-postcss"><a href="#Add-sass-postcss" class="headerlink" title="Add sass, postcss"></a><a href="https://github.com/kdevkr/webpack5/commit/68ffce2b18c64e67b944a383b216c2e6fe784396">Add sass, postcss</a></h4><p>Vue SFCì˜ ìŠ¤íƒ€ì¼ ë¸”ë¡ì˜ ì–¸ì–´ë¥¼ SCSSë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ sass ë° postcssì— ëŒ€í•œ ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤. </p><h4 id="Add-stylelint"><a href="#Add-stylelint" class="headerlink" title="Add stylelint"></a><a href="https://github.com/kdevkr/webpack5/commit/7e1e00735738e9106033c6df675977846b159552">Add stylelint</a></h4><p>ë°˜ë“œì‹œ í•„ìš”í•œ ì„¤ì •ì€ ì•„ë‹ˆì§€ë§Œ CSSì— ëŒ€í•œ ë¦°íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ stylelintë¥¼ postcss í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.</p><h4 id="Add-eslint"><a href="#Add-eslint" class="headerlink" title="Add eslint"></a><a href="https://github.com/kdevkr/webpack5/commit/f7f566314fd675e18d3f7b3dd35283317c5891ae">Add eslint</a></h4><p>ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ë¦°íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ eslintë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p><h4 id="Add-babel"><a href="#Add-babel" class="headerlink" title="Add babel"></a><a href="https://github.com/kdevkr/webpack5/commit/c5211b28ab8176e8c5c9fb39c755083679cb24df">Add babel</a></h4><p>ES6+ ë¬¸ë²•ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•´ ES5 ë¬¸ë²•ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ babelì„ ì¶”ê°€í•©ë‹ˆë‹¤. babel 7 ë¶€í„°ëŠ” í´ë¦¬í•„ ì ìš© ë°©ì‹ì´ ë³€ê²½ë˜ì—ˆìŒì„ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. ë°”ë²¨ í´ë¦¬í•„ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì˜ ë‘ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><ul><li><a href="https://poiemaweb.com/babel-polyfill">íì§€ëœ @babel/polyfill ëŒ€ì‹  @babel/plugin-transform-runtimeì„ ì‚¬ìš©í•´ í´ë¦¬í•„ ì¶”ê°€í•˜ê¸°</a></li><li><a href="https://tech.kakao.com/2020/12/01/frontend-growth-02/">Babel7ê³¼ corejs3 ì„¤ì •ìœ¼ë¡œ ì „ì—­ ì˜¤ì—¼ ì—†ëŠ” í´ë¦¬í•„ ì‚¬ìš©í•˜ê¸°</a></li></ul><h4 id="Add-browserslist"><a href="#Add-browserslist" class="headerlink" title="Add browserslist"></a><a href="https://github.com/kdevkr/webpack5/commit/c911ef73aa85ebde4d9c738c07999300c05bfaf8">Add browserslist</a></h4><p>postcssì˜ autoprefixer ë˜ëŠ” babelì—ì„œ ì°¸ê³ í•  íƒ€ê²Ÿ ì •ë³´ë¥¼ ìœ„í•´ browserslistë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p><h4 id="Add-prettierrc"><a href="#Add-prettierrc" class="headerlink" title="Add prettierrc"></a><a href="https://github.com/kdevkr/webpack5/commit/b5c8e20ebdb2224f1268b431aafb82a6b49e7b3a">Add prettierrc</a></h4><p>ë¶ˆí•„ìš”í•œ í¬ë§·íŒ…ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ prettier ì˜µì…˜ì„ ì¡°ì •í•©ë‹ˆë‹¤.</p><h4 id="Add-asset"><a href="#Add-asset" class="headerlink" title="Add asset"></a><a href="https://github.com/kdevkr/webpack5/commit/1ba05ff066806fb2c7b59eace748e04e73756243">Add asset</a></h4><p>ì´ë¯¸ì§€ ë˜ëŠ” í°íŠ¸ ë“±ì„ ìœ„í•œ ì—ì…‹ ëª¨ë“ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p><h4 id="Apply-strict-npm-engines"><a href="#Apply-strict-npm-engines" class="headerlink" title="Apply strict npm engines"></a><a href="https://github.com/kdevkr/webpack5/commit/1b768c5881db9d8348d54f926a11e537a50050ac">Apply strict npm engines</a></h4><p>ì§€ê¸ˆê¹Œì§€ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì—ì„œ ìµœì†Œë¡œ ìš”êµ¬í•˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ê³  ì œí•œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p><h4 id="Apply-settings-for-vscode"><a href="#Apply-settings-for-vscode" class="headerlink" title="Apply settings for vscode"></a><a href="https://github.com/kdevkr/webpack5/commit/9008824470873ce172e52294ddac7eee8304c256">Apply settings for vscode</a></h4><p>VSCodeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì €ì¥ë  ë•Œ ESLintê°€ ë™ì‘í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p><h4 id="Add-project-version-in-output-filename"><a href="#Add-project-version-in-output-filename" class="headerlink" title="Add project version in output filename"></a><a href="https://github.com/kdevkr/webpack5/commit/769171d627bb1f4bfbb4bacce62dc067ff9b617a">Add project version in output filename</a></h4><p>(Optional) package.jsonì— ì •ì˜ëœ í”„ë¡œì íŠ¸ ë²„ì „ì„ ë²ˆë“¤ íŒŒì¼ëª…ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><h4 id="Apply-optimization"><a href="#Apply-optimization" class="headerlink" title="Apply optimization"></a><a href="https://github.com/kdevkr/webpack5/commit/bab1505c643b4ae3ea5e7a86bdc90317f4afe470">Apply optimization</a></h4><p>í”„ë¡œë•ì…˜ í™˜ê²½ì„ ìœ„í•œ ìµœì í™” êµ¬ì„±ì„ ì¡°ì •í•©ë‹ˆë‹¤.</p><h4 id="Add-manifest"><a href="#Add-manifest" class="headerlink" title="Add manifest"></a><a href="https://github.com/kdevkr/webpack5/commit/7d0cd27b85a8f1df757e16c3ddb6ad32b8f7b39e">Add manifest</a></h4><p>ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì´ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤. </p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npx webpack --node-env production --env manifest</span><br></pre></td></tr></table></figure><h4 id="Add-bootstrap-vue"><a href="#Add-bootstrap-vue" class="headerlink" title="Add bootstrap-vue"></a><a href="https://github.com/kdevkr/webpack5/commit/c3da5f586c6ec368778e2c90478196e4af037a82">Add bootstrap-vue</a></h4><p>BootstrapVueë¥¼ ì¶”ê°€í•´ë³´ê³  <a href="https://kdevkr.github.io/no-emit-deprecation-warnings-of-dart-sass/">ìµœì‹  ë²„ì „ì˜ Sassì—ì„œ ì¶œë ¥ë˜ëŠ” Deprecation ê²½ê³ ê°€ ì¶œë ¥ë˜ì§€ ì•Šë„ë¡</a> ì„¤ì •í•©ë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ &lt;strong&gt;Webpack 5 ê¸°ë°˜ì˜ Vue ê°œë°œ í™˜ê²½&lt;/strong&gt;ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;br&gt;ë³¸ ê¸€ì—ì„œ ì„¤ëª…í•œ ë‚´ìš©ì— ëŒ€í•œ ì½”ë“œëŠ” &lt;a href=&quot;https://</summary>
      
    
    
    
    
    <category term="Webpack5" scheme="https://kdevkr.github.io/tags/Webpack5/"/>
    
  </entry>
  
  <entry>
    <title>íŠ¹ì • ë””íœë˜ì‹œì— ëŒ€í•œ Dart Sassì˜ Deprecation ê²½ê³  ì œì™¸í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/no-emit-deprecation-warnings-of-dart-sass/"/>
    <id>https://kdevkr.github.io/no-emit-deprecation-warnings-of-dart-sass/</id>
    <published>2021-12-27T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ íŠ¹ì • ë””íœë˜ì‹œì— ëŒ€í•œ Dart Sassì˜ Deprecation ê²½ê³ ë¥¼ ì œì™¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê³µìœ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p><h2 id="Deprecation-Warnings"><a href="#Deprecation-Warnings" class="headerlink" title="Deprecation Warnings"></a>Deprecation Warnings</h2><p>ìµœì‹  ì›¹íŒ©ì—ì„œ ì‚¬ìš©í•˜ëŠ” sass-loaderì—ì„œëŠ” sass(Dart Sass)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ë‹¤ë§Œ, Dart Sass ë²„ì „ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ Dart Sass 2.0ì—ì„œë¶€í„° ì§€ì›ë˜ì§€ ì•ŠëŠ” ë¬¸ë²•ì— ëŒ€í•œ ê²½ê³  ë¡œê·¸ê°€ ì¶œë ¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><em>Deprecation Using / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0</em></p><h3 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h3><p>ë¶€íŠ¸ìŠ¤íŠ¸ë©ì˜ ë³€ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ í…Œë§ˆë¥¼ êµ¬ì„±í•˜ê³ ì í•˜ëŠ” ê²½ìš° ì—¬ëŸ¬ë¶„ì˜ SCSS íŒŒì¼ì—ì„œ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì—ì„œ ì œê³µí•˜ëŠ” SCSS íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê²Œë˜ë©´ ì•„ë˜ì²˜ëŸ¼ ê²½ê³  ë¡œê·¸ê°€ ì¶œë ¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">LOG from ./node_modules/sass<span class="literal">-loader</span>/dist/cjs.js sass<span class="literal">-loader</span> ./node_modules/css<span class="literal">-loader</span>/dist/cjs.js??clonedRule<span class="built_in">Set-2</span>[<span class="number">0</span>].rules[<span class="number">0</span>].use[<span class="number">1</span>]!./node_modules/postcss<span class="literal">-loader</span>/dist/cjs.js!./node_modules/<span class="built_in">resolve-url</span><span class="literal">-loader</span>/index.js!./node_modules/sass<span class="literal">-loader</span>/dist/cjs.js??clonedRule<span class="built_in">Set-2</span>[<span class="number">0</span>].rules[<span class="number">0</span>].use[<span class="number">4</span>]!./src/scss/bootstrap.scss</span><br><span class="line">&lt;w&gt; Deprecation <span class="keyword">Using</span> / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Recommendation: math.div(<span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span>, <span class="number">2</span>) or calc(<span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span> / <span class="number">2</span>)</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; More info and automated migrator: https://sass<span class="literal">-lang</span>.com/d/slash<span class="literal">-div</span></span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\_variables.scss <span class="number">33</span>:<span class="number">46</span>  @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\index.scss <span class="number">7</span>:<span class="number">9</span>         @import</span><br><span class="line">&lt;w&gt; src\scss\bootstrap.scss <span class="number">11</span>:<span class="number">9</span>                          root stylesheet</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Deprecation <span class="keyword">Using</span> / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Recommendation: math.div(<span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-sm</span>, <span class="number">2</span>) or calc(<span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-sm</span> / <span class="number">2</span>)</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; More info and automated migrator: https://sass<span class="literal">-lang</span>.com/d/slash<span class="literal">-div</span></span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\_variables.scss <span class="number">34</span>:<span class="number">46</span>  @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\index.scss <span class="number">7</span>:<span class="number">9</span>         @import</span><br><span class="line">&lt;w&gt; src\scss\bootstrap.scss <span class="number">11</span>:<span class="number">9</span>                          root stylesheet</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Deprecation <span class="keyword">Using</span> / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Recommendation: math.div(<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-lg</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-lg</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span>, <span class="number">2</span>) or calc((<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-lg</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-lg</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span>) / <span class="number">2</span>)</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; More info and automated migrator: https://sass<span class="literal">-lang</span>.com/d/slash<span class="literal">-div</span></span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\_form<span class="literal">-checkbox</span>.scss <span class="number">10</span>:<span class="number">10</span>  @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\index.scss <span class="number">1</span>:<span class="number">9</span>             @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\index.scss <span class="number">5</span>:<span class="number">9</span>                           @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\index.scss <span class="number">14</span>:<span class="number">9</span>                                     @import</span><br><span class="line">&lt;w&gt; src\scss\bootstrap.scss <span class="number">11</span>:<span class="number">9</span>                                                       root stylesheet</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Deprecation <span class="keyword">Using</span> / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Recommendation: math.div(<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-lg</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-lg</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span>, <span class="number">2</span>) or calc((<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-lg</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-lg</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-lg</span>) / <span class="number">2</span>)</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; More info and automated migrator: https://sass<span class="literal">-lang</span>.com/d/slash<span class="literal">-div</span></span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\_form<span class="literal">-checkbox</span>.scss <span class="number">18</span>:<span class="number">10</span>  @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\index.scss <span class="number">1</span>:<span class="number">9</span>             @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\index.scss <span class="number">5</span>:<span class="number">9</span>                           @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\index.scss <span class="number">14</span>:<span class="number">9</span>                                     @import</span><br><span class="line">&lt;w&gt; src\scss\bootstrap.scss <span class="number">11</span>:<span class="number">9</span>                                                       root stylesheet</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Deprecation <span class="keyword">Using</span> / for division outside of calc() is deprecated and will be removed in Dart Sass 2.0.0.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; Recommendation: math.div(<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-sm</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-sm</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-sm</span>, <span class="number">2</span>) or calc((<span class="variable">$font</span><span class="literal">-size</span><span class="literal">-sm</span> * <span class="variable">$line</span><span class="literal">-height</span><span class="literal">-sm</span> - <span class="variable">$b</span><span class="literal">-custom</span><span class="literal">-control</span><span class="literal">-indicator</span><span class="literal">-size</span><span class="literal">-sm</span>) / <span class="number">2</span>)</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; More info and automated migrator: https://sass<span class="literal">-lang</span>.com/d/slash<span class="literal">-div</span></span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\_form<span class="literal">-checkbox</span>.scss <span class="number">33</span>:<span class="number">10</span>  @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\form<span class="literal">-checkbox</span>\index.scss <span class="number">1</span>:<span class="number">9</span>             @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\components\index.scss <span class="number">5</span>:<span class="number">9</span>                           @import</span><br><span class="line">&lt;w&gt; node_modules\bootstrap<span class="literal">-vue</span>\src\index.scss <span class="number">14</span>:<span class="number">9</span>                                     @import</span><br><span class="line">&lt;w&gt; src\scss\bootstrap.scss <span class="number">11</span>:<span class="number">9</span>                                                       root stylesheet</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; <span class="number">17</span> repetitive deprecation warnings omitted.</span><br><span class="line">&lt;w&gt;</span><br><span class="line">&lt;w&gt; null</span><br></pre></td></tr></table></figure><p>ë¶€íŠ¸ìŠ¤íŠ¸ë©ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ë¬¸ë²•ì„ ì–´ë–»ê²Œ ë°”ê¾¸ë¼ê³  ì•ˆë‚´í•˜ì§€ë§Œ ì˜ì¡´ì„±ì—ì„œ ì œê³µí•˜ëŠ” íŒŒì¼ì„ ìˆ˜ì •í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìœ„ ê²½ê³  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ì§€ ì•Šê²Œ í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><h3 id="Dart-Sass-quietDeps"><a href="#Dart-Sass-quietDeps" class="headerlink" title="Dart Sass - quietDeps"></a>Dart Sass - quietDeps</h3><p>ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ Dart Sass ì—ì„œëŠ” <a href="https://sass-lang.com/documentation/cli/dart-sass#quiet-deps">quietDeps</a>ì˜µì…˜ì„ ì œê³µí•˜ì—¬ ì˜ì¡´ì„±ì— ëŒ€í•œ Deprecation ê²½ê³  ì¶œë ¥ì„ í•˜ì§€ ì•Šë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.<br>ë§Œì•½, ì›¹íŒ©ì—ì„œ sass-loaderë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ <strong>sassOptions</strong> ì†ì„±ìœ¼ë¡œ ìœ„ ì˜µì…˜ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;sass-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">sassOptions</span>: &#123;</span><br><span class="line">                <span class="attr">quietDeps</span>: [<span class="string">&quot;node_modules/bootstrap/**/*.scss&quot;</span>],</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ì´ì œ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì˜ SCSS íŒŒì¼ì„ ì„í¬íŠ¸í•˜ë”ë¼ë„ ë”ì´ìƒ ê²½ê³  ë¡œê·¸ëŠ” ì¶œë ¥ë˜ì§€ ì•Šê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ê°ì‚¬í•©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://sass-lang.com/documentation/cli/dart-sass#quiet-deps">Dart Sass - quiet-deps</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ íŠ¹ì • ë””íœë˜ì‹œì— ëŒ€í•œ Dart Sassì˜ Deprecation ê²½ê³ ë¥¼ ì œì™¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê³µìœ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&quot;Deprecation-Warnings&quot;&gt;&lt;a href=&quot;#De</summary>
      
    
    
    
    
    <category term="Dart Sass" scheme="https://kdevkr.github.io/tags/Dart-Sass/"/>
    
    <category term="quietDeps" scheme="https://kdevkr.github.io/tags/quietDeps/"/>
    
  </entry>
  
  <entry>
    <title>í”„ë¡œì íŠ¸ì˜ ë…¸ë“œ ë²„ì „ ì œí•œí•˜ê¸°</title>
    <link href="https://kdevkr.github.io/strict-nodejs-version-for-project/"/>
    <id>https://kdevkr.github.io/strict-nodejs-version-for-project/</id>
    <published>2021-12-26T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.035Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ í•¨ê»˜ ì¼í•˜ëŠ” ê°œë°œìë“¤ì´ í”„ë¡œì íŠ¸ë§ˆë‹¤ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ì œí•œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ê³µìœ í•˜ë ¤ê³  í•´ìš”.</p><h2 id="í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ"><a href="#í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ" class="headerlink" title="í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ"></a>í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ</h2><p>í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ë§ˆë‹¤ ì§€ì›í•˜ëŠ” ìµœì†Œ ë…¸ë“œ ë²„ì „ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ íŒ¨í‚¤ì§€ ë²„ì „ì´ ì—…ë°ì´íŠ¸ë˜ë©´ì„œ ìš”êµ¬í•˜ëŠ” ë…¸ë“œ ë²„ì „ì´ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><a href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#minimum-nodejs-version">webpack@5.0.0</a> minimum supported Node.js version is 10.13.0</li><li><a href="https://github.com/webpack-contrib/style-loader/releases/tag/v3.0.0">style-loader@3.0.0</a> minimum supported Node.js version is 12.13.0</li><li><a href="https://github.com/webpack/webpack-dev-server/blob/master/CHANGELOG.md#400-beta3-2021-05-06">webpack-dev-server@4.0.0-beta.3</a> minimum supported Node.js version is 12.13.0</li></ul><h3 id="Package-json"><a href="#Package-json" class="headerlink" title="Package.json"></a>Package.json</h3><p>Package.json íŒŒì¼ì˜ <code>engines</code> ì†ì„±ìœ¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” NPM ë˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;engines&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;npm&quot;</span>: <span class="string">&quot;&gt;=6.4.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;node&quot;</span>: <span class="string">&quot;&gt;=12.13.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ì—”ì§„-ì œí•œ-ì˜µì…˜-í™œì„±í™”"><a href="#ì—”ì§„-ì œí•œ-ì˜µì…˜-í™œì„±í™”" class="headerlink" title="ì—”ì§„ ì œí•œ ì˜µì…˜ í™œì„±í™”"></a>ì—”ì§„ ì œí•œ ì˜µì…˜ í™œì„±í™”</h3><p>Package.json íŒŒì¼ì— ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ë”ë¼ë„ ì‚¬ìš©ìì˜ ì—”ì§„ì„ ì œí•œí•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ ë³„ë„ë¡œ ì œí•œí•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œì íŠ¸ í´ë”ì— .npmrc íŒŒì¼ì„ ë§Œë“¤ê³  <code>engine-strict</code> ì˜µì…˜ì„ í™œì„±í™”í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">engine-strict</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><h3 id="ë…¸ë“œ-ì—”ì§„-ì œí•œ-ì—¬ë¶€-í™•ì¸"><a href="#ë…¸ë“œ-ì—”ì§„-ì œí•œ-ì—¬ë¶€-í™•ì¸" class="headerlink" title="ë…¸ë“œ ì—”ì§„ ì œí•œ ì—¬ë¶€ í™•ì¸"></a>ë…¸ë“œ ì—”ì§„ ì œí•œ ì—¬ë¶€ í™•ì¸</h3><p>ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ê³  ì—”ì§„ ì œí•œ ì˜µì…˜ì„ í™œì„±í™”í•˜ì˜€ìœ¼ë¯€ë¡œ ì‹¤ì œë¡œ ë…¸ë“œ ì—”ì§„ì´ ì œí•œë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm i</span><br><span class="line">npm ERR! code ENOTSUP</span><br><span class="line">npm ERR! notsup Unsupported engine <span class="keyword">for</span> @1.0.0: wanted: &#123;<span class="string">&quot;npm&quot;</span>:<span class="string">&quot;&gt;=6.4.1&quot;</span>,<span class="string">&quot;node&quot;</span>:<span class="string">&quot;&gt;=12.13.0&quot;</span>&#125; (current: &#123;<span class="string">&quot;node&quot;</span>:<span class="string">&quot;10.23.0&quot;</span>,<span class="string">&quot;npm&quot;</span>:<span class="string">&quot;6.14.8&quot;</span>&#125;)</span><br><span class="line">npm ERR! notsup Not compatible with your version of node/npm: @1.0.0</span><br><span class="line">npm ERR! notsup Not compatible with your version of node/npm: @1.0.0</span><br><span class="line">npm ERR! notsup Required: &#123;<span class="string">&quot;npm&quot;</span>:<span class="string">&quot;&gt;=6.4.1&quot;</span>,<span class="string">&quot;node&quot;</span>:<span class="string">&quot;&gt;=12.13.0&quot;</span>&#125;</span><br><span class="line">npm ERR! notsup Actual:   &#123;<span class="string">&quot;npm&quot;</span>:<span class="string">&quot;6.14.8&quot;</span>,<span class="string">&quot;node&quot;</span>:<span class="string">&quot;10.23.0&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ë…¸ë“œ ë²„ì „ì€ 10.23.0 ì´ì§€ë§Œ í”„ë¡œì íŠ¸ì—ì„œ ìš”êµ¬í•˜ëŠ” ë²„ì „ì€ 12.13.0 ì´ìƒì´ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>ì´ìƒìœ¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì§€ì›í•˜ëŠ” ìµœì†Œ ë…¸ë“œ ì—”ì§„ ë²„ì „ì„ ëª…ì‹œí•˜ê³  í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•˜ëŠ” ëª¨ë“  ê°œë°œìë“¤ì´ ì•Œë§ì€ ë…¸ë“œ ë²„ì „ì„ ì‚¬ìš©í•˜ë„ë¡ ì•ˆë‚´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://medium.com/@fabian.illner/force-correct-node-js-version-with-npm-a2a57fd12fa">Force correct Node.js version with npm</a>  </li><li><a href="https://www.geeksforgeeks.org/how-to-define-the-required-node-js-version-in-package-json/">How to define the required Node.js version in package.json?</a>  </li><li><a href="https://reactgo.com/specify-node-version/">Specifying a required Node.js version in Package.json file</a>  </li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ í•¨ê»˜ ì¼í•˜ëŠ” ê°œë°œìë“¤ì´ í”„ë¡œì íŠ¸ë§ˆë‹¤ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ì œí•œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ê³µìœ í•˜ë ¤ê³  í•´ìš”.&lt;/p&gt;
&lt;h2 id=&quot;í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ&quot;&gt;&lt;a href=&quot;#í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ&quot; </summary>
      
    
    
    
    
    <category term="package.json" scheme="https://kdevkr.github.io/tags/package-json/"/>
    
    <category term="npmrc" scheme="https://kdevkr.github.io/tags/npmrc/"/>
    
    <category term="engines" scheme="https://kdevkr.github.io/tags/engines/"/>
    
  </entry>
  
  <entry>
    <title>Unsupported allowDuplicateContentLengths in Spring Cloud Gateway of Hoxton Version</title>
    <link href="https://kdevkr.github.io/unsupported-allowduplicatecontentlength-in-spring-cloud-gateway-of-hoxton-version/"/>
    <id>https://kdevkr.github.io/unsupported-allowduplicatecontentlength-in-spring-cloud-gateway-of-hoxton-version/</id>
    <published>2021-12-19T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.035Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë°œìƒí•˜ëŠ” Content-Length í—¤ë”ì˜ ê°’ì´ ë‹¨ì¼ì´ ì•„ë‹Œ ë³µìˆ˜ë¡œ ì§€ì •ë  ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p><h2 id="RFC-7230"><a href="#RFC-7230" class="headerlink" title="RFC 7230"></a>RFC 7230</h2><p><a href="https://datatracker.ietf.org/doc/html/rfc7230#section-3.3.2">RFC 7230 - 3.3.2. Content-Length</a>ë¥¼ ì°¸ê³ í•´ë³´ë©´ ë‹¤ë¥¸ í—¤ë”ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ Content-Length í—¤ë”ëŠ” ë‹¨ì¼ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•œë‹¤ê³  ê·œì •í•©ë‹ˆë‹¤. ë‹¤ë§Œ, ë‹¤ìŒê³¼ ë‚´ìš©ì„ í†µí•´ Content-Length í—¤ë” ê°’ì´ ë³µìˆ˜ë¡œ êµ¬ì„±ë˜ëŠ” ê²½ìš°ëŠ” ìˆ˜ì‹ ìê°€ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ ë‹¨ì¼ ê°’ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼í•œë‹¤ê³  ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>If a message is received that has multiple Content-Length header fields with field-values consisting of the same decimal value, or a single Content-Length header field with a field value containing a list of identical decimal values (e.g., â€œContent-Length: 42, 42â€), indicating that duplicate Content-Length header fields have been generated or combined by an upstream message processor, then the recipient MUST either reject the message as invalid or replace the duplicated field-values with a single valid Content-Length field containing that decimal value prior to determining the message body length or forwarding the message.</p></blockquote><h2 id="ì˜¤ë¥˜-ë°-ì›ì¸-ë¶„ì„"><a href="#ì˜¤ë¥˜-ë°-ì›ì¸-ë¶„ì„" class="headerlink" title="ì˜¤ë¥˜ ë° ì›ì¸ ë¶„ì„"></a>ì˜¤ë¥˜ ë° ì›ì¸ ë¶„ì„</h2><p>ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë°œìƒí•œ ì˜¤ë¥˜ì— ëŒ€í•œ ë‚´ìš©ì€ <a href="https://github.com/spring-cloud/spring-cloud-gateway/issues/2465">Multiple Content-Length values found: [229455, 229455]</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ëª¨ë“  ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ ë²„ì „ì—ì„œ ë°œìƒí•˜ëŠ” ìƒí™©ì€ ì•„ë‹ˆì—ˆìœ¼ë©° ìŠ¤í”„ë§ ë¶€íŠ¸ 2.3.xì™€ í˜¸í™˜ì„±ì´ ê²€ì¦ëœ ìŠ¤í”„ë§ í´ë¼ìš°ë“œ Hoxton ë¦´ë¦¬ì¦ˆ íŠ¸ë ˆì¸ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ ì„œë²„ì—ì„œ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤. Content-Length í—¤ë” ê°’ì´ ë³µìˆ˜ë¡œ ì§€ì •ë˜ëŠ” ê²ƒì€ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ê°„ìœ¼í•œ wav, mp3, webm íŒŒì¼ì„ ìš”ì²­í•  ë•Œ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì¼ë°˜ì ì¸ curl ë˜ëŠ” Postmanì„ í†µí•´ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì´ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.</p><h3 id="HttpUtil-normalizeAndGetContentLength"><a href="#HttpUtil-normalizeAndGetContentLength" class="headerlink" title="HttpUtil#normalizeAndGetContentLength"></a>HttpUtil#normalizeAndGetContentLength</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: Multiple Content-Length values found: [<span class="number">229455</span>, <span class="number">229455</span>]</span><br><span class="line">at io.netty.handler.codec.http.HttpUtil.normalizeAndGetContentLength(HttpUtil.java:<span class="number">595</span>) ~[netty-codec-http-<span class="number">4.1</span><span class="number">.65</span>.Final.jar:<span class="number">4.1</span><span class="number">.65</span>.Final]</span><br><span class="line">Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: </span><br><span class="line"><span class="function">Error has been observed at the following <span class="title">site</span><span class="params">(s)</span>:</span></span><br></pre></td></tr></table></figure><p>ìœ„ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ë‚´ìš©ì— ë”°ë¥´ë©´ Netty ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ netty-codec-http ëª¨ë“ˆì—ì„œ HttpUtil.normalizeAndGetContentLength í•¨ìˆ˜ë¡œ ì²˜ë¦¬ë  ë•Œ ì˜¤ë¥˜ê°€ ë˜ì ¸ì¡ŒìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, netty-codec-http ëª¨ë“ˆì˜ <a href="https://github.com/netty/netty/blob/c08beb543a6b8db0c7f3cee225042361b4025e4c/codec-http/src/main/java/io/netty/handler/codec/http/HttpUtil.java#L555-L560">HttpUtil#normarlizeAndGetContentLength</a>ì—ëŠ” allowDuplicateContentLengths íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ë³µìˆ˜ì˜ ë™ì¼í•œ ê°’ì´ ì§€ì •ë˜ë”ë¼ë„ ë‹¨ì¼ ê°’ìœ¼ë¡œ ì²˜ë¦¬ë˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.</p><h3 id="Reactor-Netty-HttpDecoderSpec"><a href="#Reactor-Netty-HttpDecoderSpec" class="headerlink" title="Reactor Netty - HttpDecoderSpec"></a>Reactor Netty - HttpDecoderSpec</h3><p>ì´ë¯¸ allowDuplicateContentLengths ì˜µì…˜ì„ ì§€ì›í•˜ëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ìŠ¤í”„ë§ í´ë¼ìš°ë“œ Hoxton ë²„ì „ì—ì„œ ì˜ì¡´í•˜ëŠ” reactor-netty:0.9.x.RELEASE ì—ì„œëŠ” HttpDecoderSpec í´ë˜ìŠ¤ê°€ allowDuplicateContentLengths ì˜µì…˜ì„ ì§€ì›í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p><p>ë” ìì„¸í•œ ì •ë³´ë¥¼ ì°¾ì•„ë³¸ ê²°ê³¼ HttpDecoderSpecì—ì„œ allowDuplicateContentLengths ì˜µì…˜ì´ ì§€ì›ë˜ëŠ” ê²ƒì€ <a href="https://github.com/reactor/reactor-netty/pull/1638/commits/978ba8a737f26376d1caab4806e25420e7aac7b7">Add HttpDecoderSpec#allowDuplicateContentLengths(boolean) #1638</a>ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìœ¼ë©° <a href="https://github.com/reactor/reactor-netty/releases/tag/v1.0.8">Reactor Netty 1.0.8</a>ì—ì„œë¶€í„° ì¶”ê°€ë˜ì–´ ë°˜ì˜ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ„ ë°˜ì˜ ë‚´ìš©ì€ Reactor Netty 0.9.x ì‚¬ìš©ìë“¤ì„ ìœ„í•œ Dysprosium ë¦´ë¦¬ì¦ˆ íŠ¸ë ˆì¸ì—ì„œ <a href="https://github.com/reactor/reactor-netty/releases/tag/v0.9.25.RELEASE">Reactor Netty 0.9.25.RELEASE</a>ë¡œ ë¦´ë¦¬ì¦ˆ ê³„íšì´ ì¢…ë£Œë˜ê¸°ê¹Œì§€ ë°˜ì˜ë˜ì§€ ì•Šì€ ì‚¬í•­ì…ë‹ˆë‹¤. </p><blockquote><p>Reactor Netty 0.9.x ì‚¬ìš©ìë“¤ì„ ìœ„í•´ allowDuplicateContentLengths ì˜µì…˜ ì§€ì›ì„ ë°˜ì˜í•  ìˆ˜ ìˆëŠ”ì§€ <a href="https://github.com/reactor/reactor-netty/issues/1942">allowDuplicateContentLengths for Reactor Netty 0.9.x users #1942</a> ì´ìŠˆë¥¼ ë“±ë¡í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ì´ ì´ìŠˆê°€ ì²˜ë¦¬ë˜ê¸°ì „ê¹Œì§€ëŠ” HttpDecoderSpecì—ì„œ allowDuplicateContentLengths íŒŒë¼ë¯¸í„°ë¥¼ í™œì„±í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></blockquote><h2 id="í•´ê²°ë°©ì•ˆ"><a href="#í•´ê²°ë°©ì•ˆ" class="headerlink" title="í•´ê²°ë°©ì•ˆ"></a>í•´ê²°ë°©ì•ˆ</h2><p>Content-Length í—¤ë”ì— ì¤‘ë³µëœ ë™ì¼í•œ ê°’ì´ ì„¤ì •ë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” allowDuplicateContentLengths ì˜µì…˜ì´ ì ìš©ë  ìˆ˜ ìˆë„ë¡ í•´ì•¼ë§Œí•©ë‹ˆë‹¤. ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ ì„œë²„ ìŠ¤íƒ€í„°ì—ì„œ ìë™ êµ¬ì„±í•  ë•Œ HttpClientì— ëŒ€í•œ HttpClientCustomizerë¥¼ ì§€ì›í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  ì˜ì¡´í•˜ê³  ìˆëŠ” HttpDecoderSpecì—ì„œ allowDuplicateContentLengthsë¥¼ ì ìš©í•  ìˆ˜ ìˆì–´ì•¼ë§Œ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, Reactor Netty ì˜ì¡´ì„± ë²„ì „ì„ 1.0.8 ì´ìƒìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.</p><h3 id="ì²«ë²ˆì§¸-ì‹œë„-Reactor-Bom-ë³€ê²½"><a href="#ì²«ë²ˆì§¸-ì‹œë„-Reactor-Bom-ë³€ê²½" class="headerlink" title="ì²«ë²ˆì§¸ ì‹œë„ - Reactor Bom ë³€ê²½"></a>ì²«ë²ˆì§¸ ì‹œë„ - Reactor Bom ë³€ê²½</h3><p>í˜¹ì‹œë‚˜ Reactor Netty ì˜ì¡´ì„± ë²„ì „ì„ ë³€ê²½í•˜ì—¬ ê°€ëŠ¥í• ì§€ë„ ëª¨ë¥¸ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ ë²„ì „ ì—…ê·¸ë ˆì´ë“œë¥¼ ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    set(<span class="string">&#x27;springCloudVersion&#x27;</span>, <span class="string">&#x27;Hoxton.SR12&#x27;</span>),</span><br><span class="line">    set(<span class="string">&#x27;reactorNettyVersion&#x27;</span>, <span class="string">&#x27;2020.0.8&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">dependencyManagement &#123;</span><br><span class="line">    imports &#123;</span><br><span class="line">        mavenBom <span class="string">&quot;org.springframework.cloud:spring-cloud-dependencies:$&#123;springCloudVersion&#125;&quot;</span></span><br><span class="line">        mavenBom <span class="string">&quot;io.projectreactor:reactor-bom:$&#123;reactorNettyVersion&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Reactor Netty ë²„ì „ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ Reactor Bomì„ ì ìš©í•´ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ì´ reactor.netty.tcp.ProxyProviderë¥¼ í´ë˜ìŠ¤ë¡œë”ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ìƒíƒœê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Caused by: java.lang.NoClassDefFoundError: reactor/netty/tcp/ProxyProvider$Builder</span><br><span class="line">at java.base/java.lang.Class.getDeclaredMethods0(Native Method) ~[na:na]</span><br><span class="line">at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:<span class="number">3166</span>) ~[na:na]</span><br><span class="line">at java.base/java.lang.Class.getDeclaredMethods(Class.java:<span class="number">2309</span>) ~[na:na]</span><br><span class="line">at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:<span class="number">463</span>) ~[spring-core-<span class="number">5.2</span><span class="number">.15</span>.RELEASE.jar:<span class="number">5.2</span><span class="number">.15</span>.RELEASE]</span><br><span class="line">... <span class="number">19</span> common frames omitted</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: reactor.netty.tcp.ProxyProvider$Builder</span><br><span class="line">at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:<span class="number">581</span>) ~[na:na]</span><br><span class="line">at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:<span class="number">178</span>) ~[na:na]</span><br><span class="line">at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:<span class="number">522</span>) ~[na:na]</span><br><span class="line">... <span class="number">23</span> common frames omitted</span><br></pre></td></tr></table></figure><p>ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” <a href="https://github.com/reactor/reactor-netty/releases/tag/v1.0.0">Reactor Netty 1.0.0</a>ì—ì„œë¶€í„° reactor.netty.tcp.ProxyProviderê°€ reactor.netty.transport.ProxyProviderë¡œ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ìŠ¤í”„ë§ í´ë¼ìš°ë“œ Hoxtonì—ì„œëŠ” Reactor Netty 0.9.xì˜ í´ë˜ìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë‹¨ìˆœí•˜ê²Œ Reactor Netty ì˜ì¡´ì„± ë²„ì „ì„ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.</p><h3 id="ë‘ë²ˆì§¸-ì‹œë„-Spring-Cloud-ë²„ì „-ì—…ê·¸ë ˆì´ë“œ"><a href="#ë‘ë²ˆì§¸-ì‹œë„-Spring-Cloud-ë²„ì „-ì—…ê·¸ë ˆì´ë“œ" class="headerlink" title="ë‘ë²ˆì§¸ ì‹œë„ - Spring Cloud ë²„ì „ ì—…ê·¸ë ˆì´ë“œ"></a>ë‘ë²ˆì§¸ ì‹œë„ - Spring Cloud ë²„ì „ ì—…ê·¸ë ˆì´ë“œ</h3><p>Reactor Netty 1.0.8ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤í”„ë§ í´ë¼ìš°ë“œ 2020.0.x aka Ilford ë¦´ë¦¬ì¦ˆ íŠ¸ë ˆì¸ì˜ ìŠ¤í”„ë§ í´ë¼ìš°ë“œì™€ í•¨ê»˜ ìŠ¤í”„ë§ ë¶€íŠ¸ 2.4.xë¡œ ì—…ê·¸ë ˆì´ë“œí•´ì•¼í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê·¸ë˜ë“¤ ë©€í‹° í”„ë¡œì íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ ì„œë²„ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ë™ì¼í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;rog.springframework.boot&#x27;</span> version <span class="string">&#x27;2.4.13&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">ext &#123;</span><br><span class="line">    set(<span class="string">&#x27;springCloudVersion&#x27;</span>, <span class="string">&#x27;2020.0.0&#x27;</span>),</span><br><span class="line">    set(<span class="string">&#x27;reactorNettyVersion&#x27;</span>, <span class="string">&#x27;2020.0.8&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">dependencyManagement &#123;</span><br><span class="line">    imports &#123;</span><br><span class="line">        mavenBom <span class="string">&quot;org.springframework.cloud:spring-cloud-dependencies:$&#123;springCloudVersion&#125;&quot;</span></span><br><span class="line">        mavenBom <span class="string">&quot;io.projectreactor:reactor-bom:$&#123;reactorNettyVersion&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ìŠ¤í”„ë§ ë¶€íŠ¸ 2.4 ë¶€í„° ë³€ê²½ëœ ì‚¬í•­ì— ëŒ€í•´ì„œ ê²€í† í•˜ì—¬ì•¼í•©ë‹ˆë‹¤.</p></blockquote><p>ì•„ì‰½ê²Œë„ ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ê³¼ ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œ í•˜ê³ ë‚˜ì„œëŠ” Content-Lengthì— ë³µìˆ˜ë¡œ ì„¤ì •ë˜ë˜ íŒŒì¼ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë‹¨ì¼ ê°’ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ allowDuplicateContentLengths ì ìš©ì´ í•„ìš”í•˜ì§€ ì•Šì€ ìƒíƒœê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œì•½, allowDuplicateContentLengths ì ìš©ì´ í•„ìš”í•˜ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ HttpClientCustomzierë¥¼ í†µí•´ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NettyHttpClientCustomizer</span> <span class="keyword">implements</span> <span class="title">HttpClientCustomizer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpClient <span class="title">customize</span><span class="params">(HttpClient httpClient)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> httpClient.httpResponseDecoder(decoderSpec -&gt; </span><br><span class="line">            decoderSpec</span><br><span class="line">                .allowDuplicateContentLengths(<span class="keyword">true</span>)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì´ ë‚´ìš©ì€ Okky ì»¤ë®¤ë‹ˆí‹°ì— <a href="https://okky.kr/article/1122985">Spring Cloud Hoxtonì˜ Spring Cloud Gatewayì—ì„œëŠ” allowDuplicateContentLengthsì„ ì§€ì›í•˜ì§€ ì•ŠìŒ</a>ë¡œ ê³µìœ ë˜ì—ˆìŒì„ ì•Œë ¤ë“œë¦¬ë©° ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p><blockquote><p><a href="https://github.com/reactor/reactor-netty/issues/1942">https://github.com/reactor/reactor-netty/issues/1942</a><br>Reactor Netty ì¸¡ì— 0.9.x ì‚¬ìš©ìë“¤ì„ ìœ„í•´ ìˆ˜ì • ìš”ì²­í•˜ì˜€ìœ¼ë‚˜ ì—…ë°ì´íŠ¸ ì¤‘ë‹¨ëœ ë²„ì „ì¸ ì‚¬ìœ ë¡œ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.</p></blockquote><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://datatracker.ietf.org/doc/html/rfc7230">RFC 7230</a>  </li><li><a href="https://spring.io/projects/spring-cloud">Spring Cloud Release train Spring Boot compatibility</a></li><li><a href="https://github.com/spring-cloud/spring-cloud-gateway">spring-cloud/spring-cloud-gateway</a></li><li><a href="https://github.com/reactor/reactor-netty/releases/tag/v1.0.8">Reactor Netty 1.0.8 Release</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ìŠ¤í”„ë§ í´ë¼ìš°ë“œ ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë°œìƒí•˜ëŠ” Content-Length í—¤ë”ì˜ ê°’ì´ ë‹¨ì¼ì´ ì•„ë‹Œ ë³µìˆ˜ë¡œ ì§€ì •ë  ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&quot;RFC-7230&quot;&gt;&lt;a</summary>
      
    
    
    
    
    <category term="Spring Cloud Gateway" scheme="https://kdevkr.github.io/tags/Spring-Cloud-Gateway/"/>
    
    <category term="RFC 7230" scheme="https://kdevkr.github.io/tags/RFC-7230/"/>
    
    <category term="Reactor Netty" scheme="https://kdevkr.github.io/tags/Reactor-Netty/"/>
    
  </entry>
  
  <entry>
    <title>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸</title>
    <link href="https://kdevkr.github.io/gradle-multi-module-project/"/>
    <id>https://kdevkr.github.io/gradle-multi-module-project/</id>
    <published>2021-12-10T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ì˜ ë””íœë˜ì‹œ ê³µìœ ì— ëŒ€í•˜ì—¬ ì´ì•¼ê¸° í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p><h2 id="ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ"><a href="#ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ" class="headerlink" title="ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ"></a>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ</h2><p>ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì–´ëŠì •ë„ ì»¤ì§€ê²Œë˜ë©´ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œì¨ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ê¸°ëŠ¥ì´ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì°¸ê³ í•˜ì—¬ ì¼ë¶€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë³„ë„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ë¡œ ë…ë¦½ì‹œí‚¤ê¸°ë„ í•©ë‹ˆë‹¤. í˜„ì¬ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì—ì„œëŠ” ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œ ê°œë°œí•˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—¬ëŸ¬ ê³ ê°ë“¤ì˜ í™˜ê²½ì— ë§ëŠ” ë°°í¬ ë˜ëŠ” ë³„ë„ì˜ ì»¤ìŠ¤í…€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ê¸° ìœ„í•˜ì—¬ <strong>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸</strong>ë¡œ ì „í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p><h3 id="Java-ë¼ì´ë¸ŒëŸ¬ë¦¬-í”ŒëŸ¬ê·¸ì¸"><a href="#Java-ë¼ì´ë¸ŒëŸ¬ë¦¬-í”ŒëŸ¬ê·¸ì¸" class="headerlink" title="Java ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸"></a>Java ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸</h3><p>ê³µìš© ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””íœë˜ì‹œë¥¼ ìƒìœ„ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìë°” í”ŒëŸ¬ê·¸ì¸ ëŒ€ì‹  ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•˜ê³  <code>api</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ ë””íœë˜ì‹œë¥¼ ì™¸ë¶€ ëª¨ë“ˆì˜ ì»´íŒŒì¼ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œì‹œì¼œì•¼í•©ë‹ˆë‹¤. Gradle 7 ë¶€í„°ëŠ” <code>compile</code>ì„ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©° <code>implementation</code>ì€ ì§€ì •í•œ ë””íœë˜ì‹œë¥¼ ì™¸ë¶€ ëª¨ë“ˆì— ë…¸ì¶œì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><blockquote><p>The compile and runtime configurations have been removed with Gradle 7.0. Please refer to the upgrade guide how to migrate to implementation and api configurations`.</p></blockquote><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// module-common/build.gradle</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;io.spring.dependency-management&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    api <span class="string">&#x27;com.google.code.gson:gson&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>common ëª¨ë“ˆì˜ gson ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” apië¥¼ í†µí•´ ìƒìœ„ ëª¨ë“ˆì˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œë˜ì–´ ìƒìœ„ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ implementationì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì™¸ë¶€ ëª¨ë“ˆ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œì‹œí‚¤ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë¹ ë¥¸ ì»´íŒŒì¼ê³¼ í´ë˜ìŠ¤íŒ¨ìŠ¤ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì´ê¸° ìœ„í•¨ì´ë©° api ë³´ë‹¤ëŠ” implementationì„ ì„ í˜¸í•´ì•¼í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p><h3 id="Common-Module"><a href="#Common-Module" class="headerlink" title="Common Module"></a>Common Module</h3><p><a href="https://github.com/kdevkr/gradle-multi-module">gradle-multi-module</a> ì²˜ëŸ¼ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ì— ê³µìš©ìœ¼ë¡œ ì ìš©ë˜ëŠ” ì½”ë“œë¥¼ ê°€ì§€ëŠ” Common ëª¨ë“ˆì´ ìˆì„ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ê³µí†µìœ¼ë¡œ ì ìš©ë˜ì–´ì•¼í•˜ëŠ” ì„¤ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Jackson2ObjectMapperBuilderCustomizer <span class="title">objectMapperBuilderCustomizer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> builder -&gt; builder</span><br><span class="line">                .featuresToEnable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)</span><br><span class="line">                .featuresToDisable(SerializationFeature.WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS)</span><br><span class="line">                .modules(List.of(<span class="keyword">new</span> Jdk8Module(), <span class="keyword">new</span> JavaTimeModule()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìœ„ ì½”ë“œì—ì„œëŠ” Date ë˜ëŠ” Timestampì™€ ê°™ì€ í´ë˜ìŠ¤ì— ëŒ€í•˜ì—¬ Long ê°’ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê¸° ìœ„í•˜ì—¬ SerializationFeature.WRITE_DATES_AS_TIMESTAMPSë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. </p><h4 id="Common-Dependencies"><a href="#Common-Dependencies" class="headerlink" title="Common Dependencies"></a>Common Dependencies</h4><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    api <span class="string">&#x27;org.springframework.boot:spring-boot-starter-security&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;com.google.code.gson:gson&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;com.fasterxml.jackson.core:jackson-databind&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;org.hibernate.validator:hibernate-validator&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;org.apache.commons:commons-lang3&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;org.apache.commons:commons-collections4:4.4&#x27;</span></span><br><span class="line">    api <span class="string">&#x27;com.google.guava:guava:31.0.1-jre&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìœ„ ì„¤ì •ì²˜ëŸ¼ implementation ëŒ€ì‹ ì— apië¥¼ ì‚¬ìš©í•˜ë©´ ë™ì¼í•œ ë²„ì „ì˜ ë””íœë˜ì‹œë¥¼ ë‹¤ë¥¸ ì™¸ë¶€ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” ë””íœë˜ì‹œ ë²„ì „ì´ ë‹¬ë¼ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html">Managing Dependencies of JVM Projects</a>  </li><li><a href="https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_configurations_graph">The Java Library Plugin</a>  </li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ì˜ ë””íœë˜ì‹œ ê³µìœ ì— ëŒ€í•˜ì—¬ ì´ì•¼ê¸° í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. &lt;/p&gt;
&lt;h2 id=&quot;ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ&quot;&gt;&lt;a href=&quot;#ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
    <category term="Gradle" scheme="https://kdevkr.github.io/tags/Gradle/"/>
    
  </entry>
  
  <entry>
    <title>KDB+</title>
    <link href="https://kdevkr.github.io/kdbplus/"/>
    <id>https://kdevkr.github.io/kdbplus/</id>
    <published>2021-11-05T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ì´ ê¸€ì€ KDB+ë¼ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ë©´ì„œ êµ­ë‚´ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ì—†ëŠ” ë¬¸ì œë¡œ ì¸í•˜ì—¬ ë³„ë„ë¡œ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì „ë¬¸ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ìˆ˜ì¤€ì€ ì•„ë‹ˆë¯€ë¡œ ì˜ëª»ëœ ì •ë³´ê°€ í¬í•¨ë˜ì–´ìˆì„ ìˆ˜ ìˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. KDB+ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ <a href="https://github.com/kdevkr/kdb%EB%A5%BC">https://github.com/kdevkr/kdbë¥¼</a> ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p></blockquote><h2 id="KDB"><a href="#KDB" class="headerlink" title="KDB+"></a>KDB+</h2><p><a href="https://kx.com/">KDB+</a>ëŠ” KxSystemsë¼ëŠ” íšŒì‚¬ì—ì„œ ê°œë°œí•˜ê³  ì œê³µí•˜ëŠ” ìƒìš© ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ì—”ì§„ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë°ì´í„°ë¥¼ ë„£ê±°ë‚˜ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ì‹œê°„ì´ êµ‰ì¥íˆ ì§§ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ q ë¼ëŠ” ìì²´ì ìœ¼ë¡œ ê³ ì•ˆí•œ ì–¸ì–´ì— ëŒ€í•´ì„œ ì´í•´í•´ì•¼í•´ì„œ ëŸ¬ë‹ì»¤ë¸Œì— ëŒ€í•œ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì€ KxSystemsì—ì„œ ê¶Œì¥í•˜ëŠ” <a href="https://github.com/KxSystems/kdb-tick/blob/master/tick.q">Tickerplantë¼ëŠ” ì•„í‚¤í…ì²˜ì˜ ìŠ¤í¬ë¦½íŠ¸ ì¼ë¶€ë¶„</a>ì…ë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">ld:&#123;if[<span class="built_in">not</span> <span class="built_in">type</span> <span class="built_in">key</span> L::`$(<span class="number">-10</span>_string L),<span class="built_in">string</span> x;.[L;();:;()]];i::j::<span class="number">-11</span>!(<span class="number">-2</span>;L);if[<span class="number">0</span>&lt;=<span class="built_in">type</span> i;<span class="number">-2</span> (<span class="built_in">string</span> L),<span class="string">&quot; is a corrupt log. Truncate to length &quot;</span>,(<span class="built_in">string</span> last i),<span class="string">&quot; and restart&quot;</span>;exit <span class="number">1</span>];<span class="built_in">hopen</span> L&#125;;</span><br><span class="line">tick:&#123;init[];if[<span class="built_in">not</span> <span class="built_in">min</span>(<span class="type">`time</span>`sym~<span class="number">2</span>#<span class="built_in">key</span> <span class="built_in">flip</span> <span class="built_in">value</span>@)<span class="built_in">each</span> t;&#x27;`timesym];@[;`sym;`g#]<span class="built_in">each</span> t;d::.z.D;if[l::<span class="built_in">count</span> y;L::`$<span class="string">&quot;:&quot;</span>,y,<span class="string">&quot;/&quot;</span>,x,<span class="number">10</span>#<span class="string">&quot;.&quot;</span>;l::ld d]&#125;;</span><br><span class="line"></span><br><span class="line">endofday:&#123;end d;d+:<span class="number">1</span>;if[l;<span class="built_in">hclose</span> l;l::<span class="number">0</span>(`.u.ld;d)]&#125;;</span><br><span class="line">ts:&#123;if[d&lt;x;if[d&lt;x<span class="number">-1</span>;<span class="built_in">system</span><span class="string">&quot;t 0&quot;</span>;&#x27;<span class="string">&quot;more than one day?&quot;</span>];endofday[]]&#125;;</span><br><span class="line"></span><br><span class="line">if[<span class="built_in">system</span><span class="string">&quot;t&quot;</span>;</span><br><span class="line"> .z.ts:&#123;pub&#x27;[t;<span class="built_in">value</span> <span class="built_in">each</span> t];@[`.;t;@[;`sym;`g#]<span class="number">0</span>#];i::j;ts .z.D&#125;;</span><br><span class="line"> upd:&#123;[t;x]</span><br><span class="line"> if[<span class="built_in">not</span> <span class="number">-16</span>=<span class="built_in">type</span> <span class="built_in">first</span> <span class="built_in">first</span> x;if[d&lt;<span class="string">&quot;d&quot;</span>$a:.z.P;.z.ts[]];a:<span class="string">&quot;n&quot;</span>$a;x:$[<span class="number">0</span>&gt;<span class="built_in">type</span> <span class="built_in">first</span> x;a,x;(<span class="built_in">enlist</span>(<span class="built_in">count</span> <span class="built_in">first</span> x)#a),x]];</span><br><span class="line"> t insert x;if[l;l <span class="built_in">enlist</span> (`upd;t;x);j+:<span class="number">1</span>];&#125;];</span><br><span class="line"></span><br><span class="line">if[<span class="built_in">not</span> <span class="built_in">system</span><span class="string">&quot;t&quot;</span>;<span class="built_in">system</span><span class="string">&quot;t 1000&quot;</span>;</span><br><span class="line"> .z.ts:&#123;ts .z.D&#125;;</span><br><span class="line"> upd:&#123;[t;x]ts<span class="string">&quot;d&quot;</span>$a:.z.P;</span><br><span class="line"> if[<span class="built_in">not</span> <span class="number">-16</span>=<span class="built_in">type</span> <span class="built_in">first</span> <span class="built_in">first</span> x;a:<span class="string">&quot;n&quot;</span>$a;x:$[<span class="number">0</span>&gt;<span class="built_in">type</span> <span class="built_in">first</span> x;a,x;(<span class="built_in">enlist</span>(<span class="built_in">count</span> <span class="built_in">first</span> x)#a),x]];</span><br><span class="line"> f:<span class="built_in">key</span> <span class="built_in">flip</span> <span class="built_in">value</span> t;pub[t;$[<span class="number">0</span>&gt;<span class="built_in">type</span> <span class="built_in">first</span> x;<span class="built_in">enlist</span> f!x;<span class="built_in">flip</span> f!x]];if[l;l <span class="built_in">enlist</span> (`upd;t;x);i+:<span class="number">1</span>];&#125;];</span><br></pre></td></tr></table></figure><p>KDB+ì—ì„œëŠ” që¼ëŠ” ì–¸ì–´ë¡œ ì‘ì„±ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìœ„ì²˜ëŸ¼ KxSystemsì—ì„œ ì œê³µí•˜ëŠ” ìƒ˜í”Œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì¡´ì¬í•˜ê¸°ëŠ” í•˜ì§€ë§Œ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì´ ì—†ìœ¼ë¯€ë¡œ ìœ„ ì½”ë“œë¥¼ ì´í•´í•˜ëŠ” ê±´ ì „ë¶€ ì‚¬ìš©ìì¸ ê°œë°œìì˜ ëª«ì´ë©° ì´ë¡œ ì¸í•˜ì—¬ ëŸ¬ë‹ì»¤ë¸Œê°€ ë†’ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” Q ì–¸ì–´ì— ëŒ€í•œ íŠœí† ë¦¬ì–¼ì„ ì œê³µí•  ì˜ë„ê°€ ì•„ë‹ˆë¯€ë¡œ ê³µì‹ ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ì •ë³´ë¥¼ ì°¸ê³ í•˜ë©´ì„œ ì•Œê²Œë˜ê±°ë‚˜ ëŠë‚€ì ì„ ê³µìœ í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p><blockquote><p>Q ì–¸ì–´ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ <a href="https://code.kx.com/q/basics/by-topic/">Q language resources by topic</a>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p></blockquote><h3 id="q-í”„ë¡œì„¸ìŠ¤"><a href="#q-í”„ë¡œì„¸ìŠ¤" class="headerlink" title="q í”„ë¡œì„¸ìŠ¤"></a>q í”„ë¡œì„¸ìŠ¤</h3><p>KDB+/q í”„ë¡œì„¸ìŠ¤ëŠ” Windows, Mac OSX, Linux ìš´ì˜ì²´ì œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ìš´ì˜ì²´ì œì— ë”°ë¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ëª‡ê°€ì§€ ë¶€ë¶„ì— ëŒ€í•´ì„œ ë‹¤ë¥¼ ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¦¬ëˆ…ìŠ¤ ìš´ì˜ì²´ì œì—ì„œëŠ” <a href="https://code.kx.com/q4m3/11_IO/#116-interprocess-communication">í”„ë¡œì„¸ìŠ¤ í†µì‹ </a>ì„ ìœ„í•´ TCP/IPë¥¼ ì‚¬ìš©í•  ë•Œ ìœ ë‹‰ìŠ¤ ë„ë©”ì¸ ì†Œì¼“ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="ì‹¤í–‰-í™˜ê²½-ë³€ìˆ˜"><a href="#ì‹¤í–‰-í™˜ê²½-ë³€ìˆ˜" class="headerlink" title="ì‹¤í–‰ í™˜ê²½ ë³€ìˆ˜"></a>ì‹¤í–‰ í™˜ê²½ ë³€ìˆ˜</h4><p>KDB+ì˜ q í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ë˜ëŠ” ì‹œì ì— QHOME, QLIC, QINIT í™˜ê²½ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤. </p><ul><li>QHOME: KDB í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•˜ì—¬ ë¶€íŠ¸ìŠ¤íŠ¸ë©í•  q.k íŒŒì¼ì„ ì°¾ëŠ” ê²½ë¡œì…ë‹ˆë‹¤.</li><li>QLIC: KDB í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‚¬ìš©í•  ë¼ì´ì„¼ìŠ¤ íŒŒì¼ì„ ì§€ì •í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ QHOME ê²½ë¡œì—ì„œ kc.lic íŒŒì¼ì„ ìš”êµ¬í•©ë‹ˆë‹¤.</li><li>QINIT: q.k íŒŒì¼ì´ ë¶€íŠ¸ìŠ¤íŠ¸ë©ëœ ì´í›„ì— ë£¨íŠ¸ ì»¨í…ìŠ¤íŠ¸ ìœ„ì¹˜ì—ì„œ ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì…ë‹ˆë‹¤. ì´ í™˜ê²½ë³€ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šìœ¼ë©´ QHOME ìœ„ì¹˜ì—ì„œ q.q íŒŒì¼ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</li></ul><h4 id="í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ì¸ìˆ˜"><a href="#í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ì¸ìˆ˜" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì¸ìˆ˜"></a>í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì¸ìˆ˜</h4><p>ê³µì‹ ë¬¸ì„œì˜ <a href="https://code.kx.com/q/basics/cmdline/">ì»¤ë§¨ë“œ ë¼ì¸ ì˜µì…˜</a>ì„ ì°¸ê³ í•˜ë©´ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ ì ìš©í•  ìˆ˜ ìˆëŠ” ì¸ìˆ˜ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ ì§€ì •í•˜ëŠ” ì˜µì…˜ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line"><span class="comment">// -p: ìˆ˜ì‹  í¬íŠ¸</span></span><br><span class="line"><span class="comment">// -s: ë³‘ë ¬ ì²˜ë¦¬ ì‹œ ì‚¬ìš©ë  ë³´ì¡° ìŠ¤ë ˆë“œ</span></span><br><span class="line">q script.q -p <span class="number">5000</span> -s <span class="number">8</span></span><br></pre></td></tr></table></figure><p>í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ ë³´ì¡° ìŠ¤ë ˆë“œ ì˜µì…˜ì„ ì§€ì •í•´ì•¼ ìŠ¤ë ˆë“œê°€ í™œì„±í™”ë˜ë©° REPLì—ì„œë§Œ ë™ì‘í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë°±ê·¸ë¼ìš´ë“œ ë°ëª¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš° ë³´ì¡° ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ q í”„ë¡œì„¸ìŠ¤ì— ë³´ì¡° ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ ëª…ë ¹ì„ ì „ë‹¬í•˜ëŠ” ê²½ìš° ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">q)\s <span class="number">4</span></span><br><span class="line">&#x27;enable secondary threads via cmd line -s only</span><br></pre></td></tr></table></figure><h4 id="í”„ë¡œì„¸ìŠ¤-ì¢…ë£Œ"><a href="#í”„ë¡œì„¸ìŠ¤-ì¢…ë£Œ" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ"></a>í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ</h4><p>REPL ì„¸ì…˜ ë˜ëŠ” ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ì—ì„œ <a href="https://code.kx.com/q/basics/syscmds/#quit">\</a>ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ <a href="https://code.kx.com/q/ref/exit/">exit 0</a>ì„ ì…ë ¥í•´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">\\\</span><br><span class="line">exit <span class="number">0</span></span><br><span class="line">sublime-q &gt;&gt; í˜„ì¬ ì—°ê²°ì€ ì›ê²© í˜¸ìŠ¤íŠ¸ì— ì˜í•´ ì—°ê²°ì´ ê°•ì œë¡œ ëŠê²¼ìŠµë‹ˆë‹¤.</span><br></pre></td></tr></table></figure><h3 id="ìŠ¤í¬ë¦½íŠ¸-íŒŒì¼"><a href="#ìŠ¤í¬ë¦½íŠ¸-íŒŒì¼" class="headerlink" title="ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼"></a>ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</h3><p>REPLì¸ q ì„¸ì…˜ì—ì„œëŠ” ë©€í‹° ë¼ì¸ í‘œí˜„ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, <a href="https://code.kx.com/q/learn/tour/scripts/">ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</a>ì„ ì‘ì„±í•˜ëŠ”ê²Œ ë” íš¨ìœ¨ì ì´ë©° ì„œë¸Œë¼ì„ í…ìŠ¤íŠ¸ì˜ <a href="https://github.com/komsit37/sublime-q">sublime-q</a>ì™€ ê°™ì€ íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•˜ë©´ ì‰½ê²Œ q í”„ë¡œì„¸ìŠ¤ì™€ í†µì‹ í•˜ì—¬ ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì‘ì„±í•´ë‘ë©´ q í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">q script.q -p <span class="number">5000</span></span><br><span class="line">KDB+ <span class="number">4.0</span> <span class="number">2021.07</span><span class="number">.12</span> Copyright (C) <span class="number">1993</span><span class="number">-2021</span> Kx Systems</span><br><span class="line">w64/ <span class="number">12</span>(<span class="number">16</span>)core <span class="number">32700</span>MB Mambo desktop-ojj4tb3 <span class="number">192.168</span><span class="number">.0</span><span class="number">.2</span> EXPIRE <span class="number">2022.11</span><span class="number">.01</span> kdevkr@gmail.com KOD #<span class="number">5006323</span></span><br><span class="line"></span><br><span class="line"><span class="number">2021.11</span><span class="number">.04</span>T22:<span class="number">38</span>:<span class="number">41.153</span> [INFO] KDB+ Version: <span class="number">4</span></span><br><span class="line"><span class="number">2021.11</span><span class="number">.04</span>T22:<span class="number">38</span>:<span class="number">41.153</span> [INFO] KDB+ ProcessID: <span class="number">24388</span></span><br><span class="line"><span class="number">2021.11</span><span class="number">.04</span>T22:<span class="number">38</span>:<span class="number">41.153</span> [INFO] KDB+ License: <span class="number">16</span> <span class="number">2022.11</span><span class="number">.01</span> <span class="number">2022.11</span><span class="number">.01</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> kdevkr@gmail.com KOD #<span class="number">5006323</span> <span class="number">0</span></span><br><span class="line">The script file loaded after q.q file.</span><br></pre></td></tr></table></figure><blockquote><p>QINIT ë˜ëŠ” q.q íŒŒì¼ì— ì •ì˜ëœ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¬´ì¡°ê±´ ì‹¤í–‰ë˜ë¯€ë¡œ ê³µí†µìœ¼ë¡œ ì ìš©ë˜ì–´ì•¼í•˜ëŠ” ì‚¬í•­ì€ QINIT ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì— ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p></blockquote><h4 id="ìŠ¤í¬ë¦½íŠ¸-ë‚´-í”„ë¡œì„¸ìŠ¤-í†µì‹ "><a href="#ìŠ¤í¬ë¦½íŠ¸-ë‚´-í”„ë¡œì„¸ìŠ¤-í†µì‹ " class="headerlink" title="ìŠ¤í¬ë¦½íŠ¸ ë‚´ í”„ë¡œì„¸ìŠ¤ í†µì‹ "></a>ìŠ¤í¬ë¦½íŠ¸ ë‚´ í”„ë¡œì„¸ìŠ¤ í†µì‹ </h4><p>ìŠ¤í¬ë¦½íŠ¸ ë‚´ì—ì„œ í”„ë¡œì„¸ìŠ¤ í†µì‹ ì„ ìœ„í•´ <a href="https://code.kx.com/q/basics/handles/">Connection handles</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¼ë°˜ì ì¸ ë¬¸ìì—´ í˜•íƒœì˜ q í‘œí˜„ì‹ì„ ì „ë‹¬í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” <a href="https://code.kx.com/q/learn/startingkdb/ipc/">ëŒë‹¤ í•¨ìˆ˜ì™€ íŒŒë¼ë¯¸í„°</a>ë¥¼ ë³´ë‚´ëŠ” ë©”ì‹œì§€ í˜•ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">h: <span class="built_in">hopen</span> `::<span class="number">5011</span>;</span><br><span class="line">h(&#123;trades&#125;;::)</span><br></pre></td></tr></table></figure><p>ìœ„ì™€ ê°™ì´ í•¨ìˆ˜ì™€ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê²½ìš° IDEì—ì„œ ì§€ì›í•˜ëŠ” êµ¬ë¬¸ ê°•ì¡°ê°€ ì ìš©ë˜ì–´ ì›í•˜ëŠ” ë°”ë¥¼ ë” ëª…í™•í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ë„ ì œê³µë©ë‹ˆë‹¤.</p><h4 id="ì»¤ë§¨ë“œ-ë¼ì¸-íŒŒë¼ë¯¸í„°"><a href="#ì»¤ë§¨ë“œ-ë¼ì¸-íŒŒë¼ë¯¸í„°" class="headerlink" title="ì»¤ë§¨ë“œ ë¼ì¸ íŒŒë¼ë¯¸í„°"></a>ì»¤ë§¨ë“œ ë¼ì¸ íŒŒë¼ë¯¸í„°</h4><p>í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰í•  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ ì…ë ¥í•´ì•¼í•  ì •ë³´ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. KDBì—ì„œ ì œê³µí•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í†µí•´ ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì…ë ¥í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">q -p <span class="number">5000</span> -pidfile q.pid</span><br></pre></td></tr></table></figure><figure class="highlight q"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .z.xë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë§¨ë“œ ë¼ì¸ ì˜µì…˜ì„ ì œì™¸í•œ ì¸ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</span></span><br><span class="line">.z.x</span><br><span class="line"><span class="string">&quot;-pidfile&quot;</span></span><br><span class="line"><span class="string">&quot;q.pid&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .Q.optë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë§¨ë“œ ë¼ì¸ íŒŒë¼ë¯¸í„°ë¥¼ Dictë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</span></span><br><span class="line">.Q.opt .z.x</span><br><span class="line">pidfile| <span class="string">&quot;q.pid&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .Q.defë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë§¨ë“œ ë¼ì¸ íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ê¸°ë³¸ê°’ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</span></span><br><span class="line">.Q.def[`whoami`logdst`pidfile!(`mambo;`$(<span class="string">&quot;logs/q.log&quot;</span>);`)].Q.opt .z.x</span><br><span class="line">whoami | mambo</span><br><span class="line">logdst | logs/q.log</span><br><span class="line">pidfile| q.pid</span><br></pre></td></tr></table></figure><h3 id="ì‚¬ìš©ì-ë°-íŒ¨ìŠ¤ì›Œë“œ"><a href="#ì‚¬ìš©ì-ë°-íŒ¨ìŠ¤ì›Œë“œ" class="headerlink" title="ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œ"></a>ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œ</h3><p><a href="https://code.kx.com/q/basics/cmdline/#-u-usr-pwd">ì‚¬ìš©ìì— ëŒ€í•œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì •ì˜í•œ íŒŒì¼ì„ ì§€ì •</a>í•˜ì—¬ q í”„ë¡œì„¸ìŠ¤ì™€ì˜ ì—°ê²°ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ëŠ” í‰ë¬¸, MD5, SHA-1ì„ ì§€ì›í•©ë‹ˆë‹¤. ë‹¨, ì‚¬ìš©ìì™€ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸ ë°©ì‹ì€ ìœ ì¼í•´ì•¼í•˜ë¯€ë¡œ í‰ë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìì™€ SHA-1 í•´ì‹œê°€ ì ìš©ëœ ì‚¬ìš©ìë¥¼ ê°™ì´ êµ¬ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. q í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ -u ì˜µì…˜ì— íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ì„ ì§€ì •í•˜ë©´ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ í›„ì—ë„ íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ì„ ìˆ˜ì •í•˜ê³  \u ëª…ë ¹ì–´ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ë‹¨í•˜ì§€ ì•Šê³  ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê°™ì€ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œë„ ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><strong>ìµëª… ì‚¬ìš©ìì— ëŒ€í•œ íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ ìƒì„±</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">:</span><br></pre></td></tr></table></figure><p><strong>q í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ ì ìš©</strong></p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">q -p <span class="number">5000</span> -u userpass.txt</span><br></pre></td></tr></table></figure><p><strong>ì‹ ê·œ ì‚¬ìš©ìì˜ íŒ¨ìŠ¤ì›Œë“œ í•´ì‹œ ìƒì„±</strong></p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line"><span class="comment">// raze string md5 &quot;mambo&quot;</span></span><br><span class="line"><span class="comment">// &quot;dfa67b75dc3d5868c3e88c83774c0d01&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">raze</span> <span class="built_in">string</span> <span class="number">-33</span>!<span class="string">&quot;mambo&quot;</span></span><br><span class="line"><span class="string">&quot;78492a38605bdf6e691c4e2f77c69c4a0904c647&quot;</span></span><br></pre></td></tr></table></figure><p><strong>ì‹ ê·œ ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œ ì ìš© í›„ ì €ì¥</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mambo:78492a38605bdf6e691c4e2f77c69c4a0904c647</span><br></pre></td></tr></table></figure><p><strong>ì‚¬ìš©ì ë° íŒ¨ìŠ¤ì›Œë“œ ì •ë³´ ê°±ì‹ </strong></p><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">\u</span><br><span class="line"></span><br><span class="line"><span class="built_in">hopen</span> `:localhost:<span class="number">5000</span>:mambo:mambo</span><br></pre></td></tr></table></figure><blockquote><p>íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ì— ì‚¬ìš©ì ì´ë¦„ì„ ìƒëµí•¨ìœ¼ë¡œì¨ ìµëª… ì‚¬ìš©ìì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ë„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h3 id="ì•„í‚¤í…ì²˜"><a href="#ì•„í‚¤í…ì²˜" class="headerlink" title="ì•„í‚¤í…ì²˜"></a>ì•„í‚¤í…ì²˜</h3><p>í•™ìŠµ ë‹¨ê³„ì—ì„œëŠ” KDB+ë¥¼ ë‹¨ì¼ q í”„ë¡œì„¸ìŠ¤ë¡œ ì‹¤í–‰í•˜ì—¬ ì‚¬ìš©í•˜ì§€ë§Œ ì‹¤ì œë¡œ ìš´ìš©ë˜ëŠ” í™˜ê²½ì—ì„œëŠ” KxSystemsì—ì„œ ê¶Œì¥í•˜ëŠ” <a href="https://code.kx.com/q/architecture/">Tickerplant ì•„í‚¤í…ì²˜</a>ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. q í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‚¬ìš©í•  ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§€ë©´ <strong>`wsfull</strong> ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê³  í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ëŠ” ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. TickerplantëŠ” FeedHandlerì—ì„œ ì „ì†¡ë˜ëŠ” ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ëŠ” TP í”„ë¡œì„¸ìŠ¤ì™€ TP í”„ë¡œì„¸ìŠ¤ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ê°€ì ¸ê°€ëŠ” RDB(Realtime DB) í”„ë¡œì„¸ìŠ¤, ë‚ ì§œ ë˜ëŠ” ì‹œê°„ ë‹¨ìœ„ë¡œ ì €ì¥í•˜ëŠ” HDB(Historical DB) í”„ë¡œì„¸ìŠ¤ë¡œ ë¶„ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ì˜ ì—­í• ì´ êµ¬ë¶„ë˜ì–´ìˆìœ¼ë¯€ë¡œ í˜„ì¬ ë‚ ì§œ ë˜ëŠ” ì‹œê°„ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” RDB í”„ë¡œì„¸ìŠ¤ê°€ ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ì— ì¢…ë£Œë˜ë”ë¼ë„ TP í”„ë¡œì„¸ìŠ¤ëŠ” ì§€ì†ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><blockquote><p><a href="https://code.kx.com/q/learn/startingkdb/tick/">Realtime database</a><br>As a minimum, it is recommended to have RAM of at least 4Ã— expected data size, so for 5 GB data per day, the RDB machine should have at least 20 GB RAM. In practice, much larger RAM might be used.</p></blockquote><p>ìœ„ ë‚´ìš©ì— ë”°ë¥´ë©´ ë‚ ì§œë³„ë¡œ íŒŒí‹°ì…”ë‹ë˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì— RDB í”„ë¡œì„¸ìŠ¤ì— 5GB ê·œëª¨ì˜ ë°ì´í„°ë¥¼ ë³´ìœ í•˜ê³  ìˆì–´ì•¼í•œë‹¤ë©´ ì‹œìŠ¤í…œì ìœ¼ë¡œ ìµœì†Œí•œ 20GB ë§Œí¼ì˜ ë©”ëª¨ë¦¬ê°€ ì¤€ë¹„ë˜ì–´ì•¼í•©ë‹ˆë‹¤. ë˜í•œ, ì‹œìŠ¤í…œ ìì›ì„ ì¤€ë¹„í•  ìˆ˜ ìˆì§€ ì•Šì•„ ë‚ ì§œê°€ ì•„ë‹Œ ì‹œê°„ ë‹¨ìœ„ë¡œ íŒŒí‹°ì…”ë‹í•˜ëŠ” ê²½ìš° ë¬´ìˆ˜íˆ ë§ì€ í´ë”ê°€ ë§Œë“¤ì–´ì§€ë¯€ë¡œ ê¸´ ë²”ìœ„ì˜ ê¸°ê°„ì— ëŒ€í•œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì—¬ì•¼í•˜ëŠ” ê²½ìš° I/O ì„±ëŠ¥ì´ ì¢‹ì€ ë””ìŠ¤í¬ë¥¼ ì‚¬ìš©í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="ë°ì´í„°-ê´€ë¦¬"><a href="#ë°ì´í„°-ê´€ë¦¬" class="headerlink" title="ë°ì´í„° ê´€ë¦¬"></a>ë°ì´í„° ê´€ë¦¬</h4><p>TickerplantëŠ” KDB+ì—ì„œ ê¶Œì¥ë˜ëŠ” ì•„í‚¤í…ì²˜ì´ì§€ë§Œ ë°ì´í„° ê´€ë¦¬ì— ëŒ€í•œ ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¦ê¶Œ ì‹œì¥ì˜ ê²½ìš° ë°ì´í„°ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë°œìƒí•œë‹¤ëŠ” ê²ƒì´ ë³´ì¥ë˜ë©° ì§€ë‚œ ê¸°ê°„ì— ëŒ€í•œ ë°ì´í„°ê°€ í˜„ì¬ ì‹œê°„ì— ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— ì‚¬ì—… ë¶„ì•¼ì™€ ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•˜ì—¬ í˜„ì¬ ì‹œì ì— ì§€ë‚œ ê¸°ê°„ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ê²½ìš° RDB í”„ë¡œì„¸ìŠ¤ì—ì„œ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ì‹œì ì— í•´ë‹¹ íŒŒí‹°ì…˜ í´ë”ì—ëŠ” ì§€ë‚œ ê¸°ê°„ì— ëŒ€í•œ íŒŒí‹°ì…˜ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ìˆê²Œ ë©ë‹ˆë‹¤.</p><p>q í”„ë¡œì„¸ìŠ¤ì—ì„œ íŒŒí‹°ì…˜ í…Œì´ë¸”ì— ëŒ€í•´ì„œëŠ” ê° íŒŒí‹°ì…˜ì— ë§ëŠ” ë°ì´í„°ë§Œ ì¡´ì¬í•´ì•¼í•¨ì„ ë³´ì¥í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë°ì´í„° ì—°ì‚° ì‹œ íŒŒí‹°ì…”ë‹ì˜ ê¸°ì¤€ì´ ë˜ëŠ” íŠ¹ìˆ˜í•œ ì»¬ëŸ¼ì„ í†µí•´ ì „ì²´ íŒŒí‹°ì…˜ì„ ì¡°íšŒí•˜ì§€ ì•Šê³ ë„ ë¹ ë¥´ê²Œ í•„ìš”í•œ íŒŒí‹°ì…˜ì˜ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê²°êµ­ì—ëŠ” RDB í”„ë¡œì„¸ìŠ¤ê°€ ì €ì¥í•œ íŒŒí‹°ì…˜ í´ë”ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  ì˜¬ë°”ë¥¸ íŒŒí‹°ì…˜ì— ë°ì´í„°ë¥¼ ë³‘í•©í•´ì•¼í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìš´ìš©í•˜ë©´ì„œ ë°ì´í„° ë³‘í•© ê³¼ì •ì„ ê±°ì¹˜ê³  ë‚œ í›„ íŒŒí‹°ì…”ë‹ëœ í´ë”ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë‚˜ì—´ë˜ì§€ ì•Šì„ ìˆ˜ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš° q í”„ë¡œì„¸ìŠ¤ëŠ” ì •í™•í•œ íŒŒí‹°ì…˜ì„ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì¼ë¶€ ì¡°íšŒê°€ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœê°€ ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤í–‰íˆë„ KDB+ì—ì„œ ì œê³µí•˜ëŠ” ëª‡ê°€ì§€ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì˜ëª»ëœ íŒŒí‹°ì…”ë‹ì„ ë°”ë¡œ ì¡ë„ë¡ ì‘ì—…ì„ ìˆ˜í–‰í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><a href="https://code.kx.com/q/ref/dotq/#qchk-fill-hdb">.Q.chk (fill HDB)</a></li><li><a href="https://code.kx.com/q/ref/dotq/#qbv-build-vp">.Q.bv (build vp)</a></li><li><a href="https://code.kx.com/q/ref/dotq/#qvp-missing-partitions">.Q.vp (missing partitions)</a></li></ul><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">.Q.bv[]</span><br><span class="line">.Q.vp</span><br><span class="line"></span><br><span class="line">.Q.chk[]</span><br></pre></td></tr></table></figure><h3 id="ì œí•œ-ë°-ì˜¤ë¥˜"><a href="#ì œí•œ-ë°-ì˜¤ë¥˜" class="headerlink" title="ì œí•œ ë° ì˜¤ë¥˜"></a>ì œí•œ ë° ì˜¤ë¥˜</h3><p>KDB+ì˜ q í”„ë¡œì„¸ìŠ¤ì— ì¡´ì¬í•˜ëŠ” ëª‡ê°€ì§€ ì œí•œ ì‚¬í•­ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p><h4 id="ë¼ì´ì„¼ìŠ¤-ì½”ì–´-ì œí•œ"><a href="#ë¼ì´ì„¼ìŠ¤-ì½”ì–´-ì œí•œ" class="headerlink" title="ë¼ì´ì„¼ìŠ¤ ì½”ì–´ ì œí•œ"></a>ë¼ì´ì„¼ìŠ¤ ì½”ì–´ ì œí•œ</h4><p>ë¨¼ì €, ìƒì—…ìš© ë¼ì´ì„¼ìŠ¤ë¥¼ êµ¬ë§¤í•˜ë”ë¼ë„ ë¼ì´ì„¼ìŠ¤ì— ì§€ì •ëœ ì½”ì–´ ìˆ˜ë¥¼ ë„˜ì–´ê°€ê²Œë˜ëŠ” ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ë ¤ëŠ” ê²½ìš° q í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ <strong>`cores</strong> ë¼ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” q í”„ë¡œì„¸ìŠ¤ê°€ í•´ë‹¹ ì½”ì–´ ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë¯€ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ ë¦¬ëˆ…ìŠ¤ì˜  <strong>taskset</strong>ì„ í™œìš©í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” CPUë¥¼ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><h4 id="í•¨ìˆ˜-íŒŒë¼ë¯¸í„°-ê°œìˆ˜-ì œí•œ"><a href="#í•¨ìˆ˜-íŒŒë¼ë¯¸í„°-ê°œìˆ˜-ì œí•œ" class="headerlink" title="í•¨ìˆ˜ íŒŒë¼ë¯¸í„° ê°œìˆ˜ ì œí•œ"></a>í•¨ìˆ˜ íŒŒë¼ë¯¸í„° ê°œìˆ˜ ì œí•œ</h4><p>ê³µì‹ ë¬¸ì„œì˜ <a href="https://code.kx.com/q/basics/errors/">Errors</a>ë¥¼ ì°¸ê³ í•˜ë©´ q í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì— ëŒ€í•´ì„œ ê²€í† í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, í•¨ìˆ˜ íŒŒë¼ë¯¸í„° ê°œìˆ˜ëŠ” ìµœëŒ€ 8ê°œë¡œ ì œí•œë˜ì–´ìˆëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìŠ¤í¬ë¦½íŠ¸ì— ì •ì˜í•˜ëŠ” í•¨ìˆ˜ ë˜ëŠ” ëŒë‹¤ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒŒë¼ë¯¸í„° ê°œìˆ˜ê°€ 8ê°œë³´ë‹¤ ë§ì•„ì§€ëŠ” ê²½ìš° Dictë¥¼ í™œìš©í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì™¸ì—ë„ ë‹¤ìŒì˜ ì œí•œëœ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.</p><ul><li>conn: Too many connections (1022 max)</li><li>elim: Too many enumerations (max: 57)</li><li>globals: Too many global variables</li><li>limit: Too many constants</li><li>locals: Too many local variables</li><li>params: Too many parameters (8 max)</li></ul><h3 id="ëŠë‚€ì "><a href="#ëŠë‚€ì " class="headerlink" title="ëŠë‚€ì "></a>ëŠë‚€ì </h3><p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©ì¤‘ì´ì§€ë§Œ ì´ì™€ ê´€ë ¨í•œ êµ­ë‚´ ë ˆí¼ëŸ°ìŠ¤ëŠ” ì°¾ì•„ë³¼ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë‹¤ë¥¸ íšŒì‚¬ë¡œ ì´ì§í•˜ê²Œë˜ë©´ ë”ì´ìƒ ê´€ì‹¬ê°€ì§€ì§€ì•Šì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì»¬ëŸ¼í˜• ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì´ë©´ì„œ ë¹ ë¥¸ ì†ë„ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ ë§ì§€ë§Œ ê·¸ì— ë”°ë¥¸ ë¼ì´ì„¼ìŠ¤ ë¹„ìš©ê³¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•Œì˜ í•´ê²°ë°©ì•ˆì„ ì°¾ê³  ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ê°€ì§€ê¸° ìœ„í•´ì„œ Q ì–¸ì–´ì™€ í•¨ê»˜ qSQLì´ë¼ê³ í•˜ëŠ” SQLê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ë‹¤ë¥¸ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ë‹¤ë¼ê³  ë³¼ ìˆ˜ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><p>ê¸°ë³¸ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  íŒŒì¼ë¡œ ì €ì¥ëœ ë°ì´í„°ëŠ” ì—°ì‚° ì‹œ ë©”ëª¨ë¦¬ì— ë¶ˆëŸ¬ì˜¤ê²Œë˜ë¯€ë¡œ ë°ì´í„° ê·œëª¨ì— ë”°ë¼ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œìŠ¤í…œ ìì›ì´ ë³´ì¥ë˜ì–´ì•¼í•œë‹¤ëŠ” ë¬¸ì œì ë„ ìˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ ìì›ì„ í™•ë³´í•  ìˆ˜ ì—†ëŠ” ê²½ìš° íŒŒí‹°ì…˜ìœ¼ë¡œ ì €ì¥ë˜ëŠ” êµ¬ì¡°ë¥¼ ì§€ì›í•˜ì§€ë§Œ ë‹¤ìˆ˜ì˜ í´ë”ë¡œ ë¶„ì‚°í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ë””ìŠ¤í¬ I/O ì„±ëŠ¥ë„ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤. ê²°êµ­ ì˜ˆìƒë˜ëŠ” ê·œëª¨ì— ë”°ë¼ ì•ˆì •ì ìœ¼ë¡œ ìš´ìš©ë  ìˆ˜ ìˆë„ë¡ ì‹œìŠ¤í…œ ìì›ì„ ì¤€ë¹„í•´ì•¼í•©ë‹ˆë‹¤.</p><p>ì¡°ì§ë‚´ì—ì„œëŠ” ì–´ì©” ìˆ˜ ì—†ì´ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ê°œì¸ì ìœ¼ë¡œ í•™ìŠµí•˜ëŠ” ê²ƒì€ ì¶”ì²œí•˜ì§€ ì•Šì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><h2 id="ë ˆí¼ëŸ°ìŠ¤"><a href="#ë ˆí¼ëŸ°ìŠ¤" class="headerlink" title="ë ˆí¼ëŸ°ìŠ¤"></a>ë ˆí¼ëŸ°ìŠ¤</h2><ul><li><a href="https://code.kx.com/">code.kx</a></li><li><a href="https://community.kx.com/">community.kx</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ì´ ê¸€ì€ KDB+ë¼ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ë©´ì„œ êµ­ë‚´ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ì—†ëŠ” ë¬¸ì œë¡œ ì¸í•˜ì—¬ ë³„ë„ë¡œ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì „ë¬¸ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ìˆ˜ì¤€ì€ ì•„ë‹ˆë¯€ë¡œ ì˜ëª»ëœ ì •ë³´ê°€ í¬í•¨ë˜ì–´ìˆì„ ìˆ˜ ìˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</summary>
      
    
    
    
    
    <category term="Kx" scheme="https://kdevkr.github.io/tags/Kx/"/>
    
    <category term="KDB+" scheme="https://kdevkr.github.io/tags/KDB/"/>
    
  </entry>
  
  <entry>
    <title>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</title>
    <link href="https://kdevkr.github.io/gradle-build-lifecycle/"/>
    <id>https://kdevkr.github.io/gradle-build-lifecycle/</id>
    <published>2021-10-30T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ ê·¸ë˜ë“¤ ë¹Œë“œì˜ ë¼ì´í”„ì‚¬ì´í´ì…ë‹ˆë‹¤. </p><p>ì–¼ë§ˆì „ì— ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ì–‘í•œ ë°°í¬ í™˜ê²½ì— ëŒ€í•œ ê¸°ëŠ¥ì„ ë³„ë„ë¡œ ì§€ì›í•´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•˜ì—¬ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ë¡œ ì „í™˜í•˜ê²Œ ë˜ë©´ì„œ ë°°í¬ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ì—ˆëŠ”ë°ìš”. ê·¸ ë¬¸ì œëŠ” í¬ë¦¬í‹°ì»¬í•œ ì´ìŠˆëŠ” ì•„ë‹ˆì§€ë§Œ íƒœìŠ¤í¬ ìˆ˜í–‰ í›„ ë§Œë“¤ì–´ì§„ ì••ì¶• íŒŒì¼ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•ŠëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ ëŠ” ê·¸ë˜ë“¤ íƒœìŠ¤í¬ë¥¼ ì •ì˜í•  ë•Œ <strong>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</strong>ì„ ê³ ë ¤í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><h2 id="ê·¸ë˜ë“¤-íƒœìŠ¤í¬"><a href="#ê·¸ë˜ë“¤-íƒœìŠ¤í¬" class="headerlink" title="ê·¸ë˜ë“¤ íƒœìŠ¤í¬"></a>ê·¸ë˜ë“¤ íƒœìŠ¤í¬</h2><p>ë¨¼ì € ê¸°ì¡´ì— ì •ì˜ëœ íƒœìŠ¤í¬ëŠ” <a href="https://github.com/kdevkr/beanstalk-deploy-sample/blob/main/build.gradle">beanstalk-deploy-sampleì˜ build.gradleì— ì •ì˜ëœ zipBeanstalk íƒœìŠ¤í¬</a>ì™€ ê°™ì´ Zip ìœ í˜•ì˜ íƒœìŠ¤í¬ë¡œ ì‘ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task zipBeanstalk(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;procfile&#x27;</span>) &#123;</span><br><span class="line">    from (<span class="string">&#x27;.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;.platform&#x27;</span>) &#123; into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        println bootWar.archiveName</span><br><span class="line">        include(bootWar.archiveName)</span><br><span class="line">        include(<span class="string">&quot;Procfile&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    baseName = <span class="string">&#x27;beanstalk&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìœ„ ìƒ˜í”Œ íƒœìŠ¤í¬ì²˜ëŸ¼ ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œ ì •ì˜ëœ íƒœìŠ¤í¬ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ì ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë°°í¬ë¥¼ ìœ„í•´ì„œ ì—¬ëŸ¬ê°€ì§€ íƒœìŠ¤í¬ë¥¼ ì •ì˜í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì¸ë°ìš”. ê·¸ëŸ¬ë©´ ìœ„ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ ì–´ë–¤ ê²°ê³¼ë¥¼ ì œê³µí•˜ëŠ”ì§€ í•œë²ˆ í™•ì¸í•´ë³¼ê¹Œìš”?</p><h3 id="íƒœìŠ¤í¬-ê²°ê³¼"><a href="#íƒœìŠ¤í¬-ê²°ê³¼" class="headerlink" title="íƒœìŠ¤í¬ ê²°ê³¼"></a>íƒœìŠ¤í¬ ê²°ê³¼</h3><p>í”„ë¡œì íŠ¸ í´ë”ì— ìˆëŠ” Gradle Wrapperë¥¼ ì‚¬ìš©í•˜ì—¬ zipBeanstalk íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ì„œ í”„ë¡œì íŠ¸ ë²„ì „ì„ ëª…ì‹œí•´ë³´ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./gradlew clean zipBeanstalk -x <span class="built_in">test</span> -Pversion=1.0.0-hotfix.11</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/gradle-build-lifecycle/gradle-01.png"></p><p>íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ê³¼ zipBeanstalk íƒœìŠ¤í¬ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” ì•„ì¹´ì´ë¸Œ íŒŒì¼ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ìˆ˜ë™-ë°°í¬-í™˜ê²½ì„-ìœ„í•œ-íƒœìŠ¤í¬"><a href="#ìˆ˜ë™-ë°°í¬-í™˜ê²½ì„-ìœ„í•œ-íƒœìŠ¤í¬" class="headerlink" title="ìˆ˜ë™ ë°°í¬ í™˜ê²½ì„ ìœ„í•œ íƒœìŠ¤í¬"></a>ìˆ˜ë™ ë°°í¬ í™˜ê²½ì„ ìœ„í•œ íƒœìŠ¤í¬</h3><p>ì‚¬ì‹¤ zipBeanstalk íƒœìŠ¤í¬ëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¹ˆìŠ¤í†¡ í™˜ê²½ìœ¼ë¡œ ë°°í¬í•˜ê¸° ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²ˆë“¤ íŒŒì¼ì„ ë§Œë“œëŠ” íƒœìŠ¤í¬ì…ë‹ˆë‹¤. ë§Œì•½, ìˆ˜ë™ìœ¼ë¡œ ë°°í¬í•˜ì—¬ì•¼í•˜ëŠ” í™˜ê²½ì´ ì¶”ê°€ëœë‹¤ë©´ ë¹ˆìŠ¤í†¡ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” Procfileê³¼ í™˜ê²½ êµ¬ì„± íŒŒì¼ë“¤ì€ í¬í•¨í•  í•„ìš”ê°€ ì—†ìœ¼ë©° íŠ¹ì • í™˜ê²½ì„ ìœ„í•œ í”„ë¡œí¼í‹° íŒŒì¼ë§Œ ë³„ë„ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task zipManually(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;bootWar&#x27;</span>) &#123;</span><br><span class="line">    println <span class="string">&#x27;Build Version: &#x27;</span> + project.version</span><br><span class="line"></span><br><span class="line">    from (<span class="string">&#x27;.conf&#x27;</span>) &#123; into <span class="string">&#x27;application-prod.yml&#x27;</span>&#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include(bootWar.archiveName)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    baseName = <span class="string">&#x27;app-bundle&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>zipManually íƒœìŠ¤í¬ì—ëŠ” application-prod.ymlì„ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ê³¼ í•¨ê»˜ í¬í•¨ì‹œí‚¤ë„ë¡ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ì•„ì‹œëŠ” ë¶„ë“¤ë„ ìˆê² ì§€ë§Œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ <strong>WAR íŒŒì¼ê³¼ ë™ì¼í•œ ìœ„ì¹˜ì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼</strong>ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½, ëª¨ë¥´ì‹œëŠ” ë¶„ë“¤ì´ë¼ë©´ í”„ë¡œí¼í‹° êµ¬ì„± ìš°ì„  ìˆœìœ„ì— ëŒ€í•œ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><p>ë™ì¼í•˜ê²Œ zipManually íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./gradlew clean zipManually -x <span class="built_in">test</span> -Pversion=1.0.0-hotfix.11</span><br><span class="line"></span><br><span class="line">&gt; Configure project :</span><br><span class="line">JDK info: 11</span><br><span class="line">Build Version: 1.0.0-hotfix.11</span><br><span class="line">Build Version: 1.0.0-hotfix.11</span><br><span class="line"></span><br><span class="line">&gt; Task :bootBuildInfo</span><br><span class="line">&gt; Task :compileJava UP-TO-DATE</span><br><span class="line">&gt; Task :processResources UP-TO-DATE</span><br><span class="line">&gt; Task :classes</span><br><span class="line">&gt; Task :bootWarMainClassName</span><br><span class="line">&gt; Task :bootWar</span><br><span class="line">&gt; Task :procfile</span><br><span class="line">&gt; Task :zipManually</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/gradle-build-lifecycle/gradle-02.png"></p><p>zipManually íƒœìŠ¤í¬ ê²°ê³¼ëŠ” ì •ìƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤ë§Œâ€¦ ì´ìƒí•œ ë¶€ë¶„ì„ ëˆˆì¹˜ì±„ì‹ ë¶„ë“¤ì´ ìˆìœ¼ì‹œê² ì£ ? <strong>ë°”ë¡œ Build Versionì´ ë‘ë²ˆ ì¶œë ¥ë˜ì—ˆë‹¤ëŠ” ì </strong>ì¸ë°ìš”. ìš°ë¦¬ëŠ” ë¶„ëª…íˆ ë³„ë„ì˜ íƒœìŠ¤í¬ë¡œ ì •ì˜í•˜ê³  íƒœìŠ¤í¬ ë¸”ë¡ ë‚´ì—ì„œ í˜„ì¬ Build Versionì„ ì¶œë ¥í•˜ë„ë¡ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ Build Version ë²„ì „ì´ ë‘ë²ˆ ì¶œë ¥ë˜ëŠ” ì´ìœ ëŠ” ì´ ê¸€ì˜ ì£¼ìš” ë‚´ìš©ì¸ ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•œ ê°œë…ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.</p><h2 id="ê·¸ë˜ë“¤-ë¹Œë“œ-ë¼ì´í”„ì‚¬ì´í´"><a href="#ê·¸ë˜ë“¤-ë¹Œë“œ-ë¼ì´í”„ì‚¬ì´í´" class="headerlink" title="ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´"></a>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</h2><p>ì‚¬ì‹¤ ìƒ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê²½í—˜í•˜ëŠ” ì´ìœ ëŠ” ê·¸ë˜ë“¤ì˜ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•œ ê°œë…ì„ ëª¨ë¥´ê¸° ë•Œë¬¸ì¸ë°ìš”. 20ë…„ì°¨ì´ì‹  íŒ€ì¥ë‹˜ ì¡°ì°¨ë„ ì˜ ëª¨ë¥´ëŠ” ë¶€ë¶„ì´ì—ˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ ì¡´ì¬ë¥¼ ëª¨ë¥´ëŠ” ìƒí™©ì´ì—ˆê¸°ì— ì´ë ‡ê²Œ ë˜ëŠ” ì´ìœ ë¥¼ ê²€ìƒ‰í•˜ê³  íŒ€ì¥ë‹˜ê»˜ì„œ <a href="https://stackoverflow.com/a/23485085">Gradle executes all tasks?</a>ì´ë¼ëŠ” ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ì§ˆë¬¸ì„ ê³µìœ í•´ì£¼ì…¨ìŠµë‹ˆë‹¤.</p><p>ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì—ì„œëŠ” ê·¸ë˜ë“¤ì—ëŠ” configuration ë‹¨ê³„ì™€ execution ë‹¨ê³„ê°€ ìˆê³  ì´ê²ƒì€ ì¤‘ìš”í•œ ê°œë…ì´ë¼ê³  ì„¤ëª…í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê·¸ë˜ë“¤ ê³µì‹ ë¬¸ì„œì— ìˆëŠ” <a href="https://docs.gradle.org/current/userguide/build_lifecycle.html">Build Lifecycle</a>ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><blockquote><p>Gradle builds the complete dependency graph before any task is executed.<br>â€¦ Your build scripts configure this dependency graph.</p></blockquote><p>ê·¸ë˜ë“¤ì€ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì— ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ ë¹Œë“œí•˜ê³  ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ êµ¬ì„±í•œë‹¤ê³  ì„¤ëª…í•˜ë©° ë¹Œë“œ ë‹¨ê³„ì— ëŒ€í•´ì„œ ì„¤ëª…í•©ë‹ˆë‹¤.</p><h3 id="ë¹Œë“œ-ë‹¨ê³„"><a href="#ë¹Œë“œ-ë‹¨ê³„" class="headerlink" title="ë¹Œë“œ ë‹¨ê³„"></a>ë¹Œë“œ ë‹¨ê³„</h3><p>ê·¸ë˜ë“¤ì˜ ë¹Œë“œ ë‹¨ê³„ëŠ” 3ê°€ì§€ë¡œ êµ¬ë¶„ëœë‹¤ê³  í•˜ë©° ì´ˆê¸°í™”(Initialization), êµ¬ì„±(Configuration), ìˆ˜í–‰(Execution)ì…ë‹ˆë‹¤. </p><blockquote><p><strong>Initialization</strong><br>Gradle supports single and multi-project builds. During the initialization phase, Gradle determines which projects are going to take part in the build, and creates a Project instance for each of these projects.</p><p><strong>Configuration</strong><br>During this phase the project objects are configured. The build scripts of all projects which are part of the build are executed.</p><p><strong>Execution</strong><br>Gradle determines the subset of the tasks, created and configured during the configuration phase, to be executed. The subset is determined by the task name arguments passed to the gradle command and the current directory. Gradle then executes each of the selected tasks.</p></blockquote><p>ì„¸ê°€ì§€ì˜ ë‹¨ê³„ ì¤‘ êµ¬ì„± ë‹¨ê³„ì—ì„œëŠ” ëª¨ë“  í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì„¤ëª…ì´ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì´ ì œê°€ ê²½í—˜í•œ ë¬¸ì œì˜ ì›ì¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ”ë° íƒœìŠ¤í¬ ë‚´ì—ì„œ ì‘ì„±í•˜ëŠ” ì½”ë“œëŠ” êµ¬ì„± ë‹¨ê³„ì— í¬í•¨ë˜ë©° doFirstì™€ doLast ë¸”ë¡ì´ ìˆ˜í–‰ ë‹¨ê³„ì— í¬í•¨ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ì €ë„ ëª¨ë¥´ëŠ” ë¶€ë¶„ì´ì—ˆê³  ìƒê°ë³´ë‹¤ ë§ì€ ë¸”ë¡œê·¸ì—ì„œëŠ” ê·¸ë˜ë“¤ íƒœìŠ¤í¬ ì •ì˜ë¥¼ ì„¤ëª…í•  ë•Œ êµ¬ì„± ë‹¨ê³„ì— í•´ë‹¹ë˜ëŠ” ê³³ì— printlnì„ ì‘ì„±í•˜ëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ì£¼ëŠ”ë°ìš”. ìƒê°ë³´ë‹¤ ë§ì€ ë¶„ë“¤ì´ ì´ ê°œë…ì— ëŒ€í•´ì„œ ëª¨ë¥¸ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ëª°ë¼ë„ ìƒê´€ì—†ë‹¤ê³  í•  ìˆ˜ ìˆê² ë„¤ìš”.</p><h3 id="í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-íƒœìŠ¤í¬"><a href="#í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-íƒœìŠ¤í¬" class="headerlink" title="í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íƒœìŠ¤í¬"></a>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íƒœìŠ¤í¬</h3><p>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•˜ì˜€ê¸°ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ì„ ì§€ ë‹¤ìŒì˜ íƒœìŠ¤í¬ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task zipBeanstalk(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;procfile&#x27;</span>) &#123;&#125;</span><br><span class="line">task zipManually(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;bootWar&#x27;</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">task k8sbuild(<span class="attr">dependsOn:</span> bootWar) &#123;</span><br><span class="line">    project.version <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì¶”ê°€í•œ k8sbuild íƒœìŠ¤í¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ í™˜ê²½ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— í¬í•¨ë˜ëŠ” í”„ë¡œì íŠ¸ ë²„ì „ì„ ìƒëµí•˜ê¸° ìœ„í•´ì„œ project.versionì„ ë¹ˆ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ë„ë¡ ì‘ì„±í•œê²Œ í™”ê·¼ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ìƒíƒœë¡œ zipManually íƒœìŠ¤í¬ë¥¼ ë‹¤ì‹œ í•œë²ˆ ìˆ˜í–‰í•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./gradlew clean zipManually -x <span class="built_in">test</span> -Pversion=1.0.0-hotfix.11</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/gradle-build-lifecycle/gradle-03.png"></p><p>k8sbuild íƒœìŠ¤í¬ì— ì‘ì„±ëœ project.versionì„ ì„¤ì •í•˜ëŠ” í–‰ìœ„ëŠ” êµ¬ì„± ë‹¨ê³„ì— í•´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ì´ì „ì— ì ìš©ë˜ì–´ zipManually íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><h3 id="í•´ê²°ë°©ì•ˆ"><a href="#í•´ê²°ë°©ì•ˆ" class="headerlink" title="í•´ê²°ë°©ì•ˆ"></a>í•´ê²°ë°©ì•ˆ</h3><p>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ê²Œ ì¢‹ì„ì§€ ë°©ì•ˆì„ ì°¾ì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p><h4 id="í”„ë¡œì íŠ¸-ë²„ì „-ì¬ì •ì˜í•˜ëŠ”-ê²½ìš°"><a href="#í”„ë¡œì íŠ¸-ë²„ì „-ì¬ì •ì˜í•˜ëŠ”-ê²½ìš°" class="headerlink" title="í”„ë¡œì íŠ¸ ë²„ì „ ì¬ì •ì˜í•˜ëŠ” ê²½ìš°"></a>í”„ë¡œì íŠ¸ ë²„ì „ ì¬ì •ì˜í•˜ëŠ” ê²½ìš°</h4><p>k8sbuild íƒœìŠ¤í¬ì²˜ëŸ¼ íŠ¹ì • íƒœìŠ¤í¬ì—ì„œ í”„ë¡œì íŠ¸ ë²„ì „ì„ ì¬ì •ì˜ í•˜ê³ ì‹¶ì€ ê²½ìš°ì—ëŠ” doFirstì™€ ê°™ì€ í´ë¡œì €ë¥¼ í™œìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task k8sbuild(<span class="attr">dependsOn:</span> bootWar) &#123;</span><br><span class="line">    doFirst &#123;</span><br><span class="line">        project.version <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="í”„ë¡œì íŠ¸-ë²„ì „ì„-í™•ì¸í•˜ê³ -ì‹¶ì€-ê²½ìš°"><a href="#í”„ë¡œì íŠ¸-ë²„ì „ì„-í™•ì¸í•˜ê³ -ì‹¶ì€-ê²½ìš°" class="headerlink" title="í”„ë¡œì íŠ¸ ë²„ì „ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš°"></a>í”„ë¡œì íŠ¸ ë²„ì „ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš°</h4><p>zipBeanstalkì™€ zipManually íƒœìŠ¤í¬ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ WARë¡œ íŒ¨í‚¤ì§•í•˜ëŠ” ê²½ìš° í˜„ì¬ í”„ë¡œì íŠ¸ ë²„ì „ì„ ì¶œë ¥í•˜ê³  ì‹¶ì€ ê²½ìš° gradle.taskGraph.whenReadyë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task zipBeanstalk(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;procfile&#x27;</span>) &#123;</span><br><span class="line">    from (<span class="string">&#x27;.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;.platform&#x27;</span>) &#123; into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include(bootWar.archiveName)</span><br><span class="line">        include(<span class="string">&quot;Procfile&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    baseName = <span class="string">&#x27;beanstalk&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task zipManually(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> <span class="string">&#x27;bootWar&#x27;</span>) &#123;</span><br><span class="line">    from (<span class="string">&#x27;.conf&#x27;</span>) &#123; into <span class="string">&#x27;application-prod.yml&#x27;</span>&#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include(bootWar.archiveName)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    baseName = <span class="string">&#x27;app-bundle&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gradle.taskGraph.whenReady &#123; graph -&gt;</span><br><span class="line">    <span class="keyword">if</span> (graph.hasTask(bootWar)) &#123;</span><br><span class="line">        println <span class="string">&#x27;Build Version: &#x27;</span> + project.version</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ë¶ˆí•„ìš”í•œ-íŒŒì¼ì„-ì œê±°í•´ì•¼í•˜ëŠ”-ê²½ìš°"><a href="#ë¶ˆí•„ìš”í•œ-íŒŒì¼ì„-ì œê±°í•´ì•¼í•˜ëŠ”-ê²½ìš°" class="headerlink" title="ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ì œê±°í•´ì•¼í•˜ëŠ” ê²½ìš°"></a>ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ì œê±°í•´ì•¼í•˜ëŠ” ê²½ìš°</h4><p>ê²½ìš°ì— ë”°ë¼ì„œëŠ” í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¡œì»¬ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ì´ë‚˜ íŠ¹ì • ë„ë©”ì¸ì— ëŒ€í•œ ì¸ì¦ì„œ ë˜ëŠ” ì¸ì¦í‚¤ë¥¼ í¬í•¨í•˜ì§€ì•Šë„ë¡ ì œì™¸í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">gradle.taskGraph.whenReady &#123; graph -&gt;</span><br><span class="line">    <span class="keyword">if</span> (graph.hasTask(build_for_customer)) &#123;</span><br><span class="line">        processResources &#123;</span><br><span class="line">            exclude(<span class="string">&#x27;**/config/**.yml&#x27;</span>)</span><br><span class="line">            exclude(<span class="string">&#x27;**/certs/**&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìœ„ ì˜ˆì‹œëŠ” êµ¬ì„± ë‹¨ê³„ì—ì„œ ì˜ì¡´ì„± ê·¸ë˜í”„ êµ¬ì„±ì´ ì™„ë£Œëœ ì´í›„ì— build_for_customer íƒœìŠ¤í¬ê°€ ìˆ˜í–‰ë˜ëŠ” ê²½ìš°ì— ê³ ê° í™˜ê²½ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— ìì²´ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ê³¼ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ì§€ ì•Šë„ë¡ processResourcesë¥¼ ì¬ì •ì˜í•¨ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><p>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ ê°œë…ê³¼ í•¨ê»˜ ê²½í—˜í•˜ì˜€ë˜ ë¬¸ì œì— ëŒ€í•˜ì—¬ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì–´ë–¤ ê¸°ìˆ ì„ ì‚¬ìš©í•¨ì— ìˆì–´ì„œ ì£¼ìš” ê°œë…ì„ ì´í•´í•˜ê³  ìˆëŠ” ê²ƒì´ ì¤‘ìš”í•¨ì„ ë‹¤ì‹œí•œë²ˆ ê¹¨ë‹«ê²Œ ë˜ëŠ” ì¢‹ì€ ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ ê·¸ë˜ë“¤ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ìˆ˜í–‰ ë‹¨ê³„ì—ì„œ ìˆ˜í–‰ë˜ì–´ì•¼í•  ì½”ë“œë¥¼ êµ¬ì„± ë‹¨ê³„ì—ì„œ ë™ì‘í•˜ë„ë¡ ì‘ì„±ë˜ì§€ ì•Šì•˜ëŠ”ì§€ ê²€í† í•´ë³´ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ ê·¸ë˜ë“¤ ë¹Œë“œì˜ ë¼ì´í”„ì‚¬ì´í´ì…ë‹ˆë‹¤. &lt;/p&gt;
&lt;p&gt;ì–¼ë§ˆì „ì— ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ì–‘í•œ ë°°í¬ í™˜ê²½ì— ëŒ€í•œ ê¸°ëŠ¥ì„ ë³„ë„ë¡œ ì§€ì›í•´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•˜ì—¬ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì </summary>
      
    
    
    
    
    <category term="Gradle" scheme="https://kdevkr.github.io/tags/Gradle/"/>
    
    <category term="Lifecycle" scheme="https://kdevkr.github.io/tags/Lifecycle/"/>
    
  </entry>
  
  <entry>
    <title>SonarQubeì™€ Github Actionìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì •ì  ë¶„ì„</title>
    <link href="https://kdevkr.github.io/static-analysis-performed-by-sonarqube-and-github-action/"/>
    <id>https://kdevkr.github.io/static-analysis-performed-by-sonarqube-and-github-action/</id>
    <published>2021-10-11T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.035Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ SonarQubeì™€ Github Actionì„ í†µí•´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ê³¼ì •ì„ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p><h2 id="SonarQube"><a href="#SonarQube" class="headerlink" title="SonarQube"></a>SonarQube</h2><p><a href="https://www.sonarqube.org/">ì†Œë‚˜íë¸Œ</a>ëŠ” ë‹¤ì–‘í•œ ì–¸ì–´ì— ëŒ€í•œ ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í•˜ê³  ì·¨ì•½ì ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ì  ë¶„ì„ ë„êµ¬ì…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì–´ ì œê°€ SonarQubeë¥¼ ë„ì…í•˜ê³  ì›”ìš”ì¼ê³¼ ê¸ˆìš”ì¼ë§ˆë‹¤ í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì œê°€ ì •ì  ë¶„ì„ì„ ìœ„í•´ì„œ ì†Œë‚˜íë¸Œë¥¼ ë„ì…í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-00.png" alt="ì†Œë‚˜íë¸Œ ë¼ì´ì„¼ìŠ¤"></p><ol><li>GPLv3 ë¼ì´ì„¼ìŠ¤ ê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ ë²„ì „ ì§€ì›</li><li>IntelliJ ë˜ëŠ” VSCodeì™€ ê°™ì€ IDEë¥¼ ìœ„í•œ SonarLint ì§€ì›</li><li>ì†Œë‚˜íë¸Œì— ëŒ€í•œ ê³µì‹ ë„ì»¤ ì´ë¯¸ì§€ ì§€ì›</li><li>ë‹¤ì–‘í•œ ì–¸ì–´ì™€ ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ì˜ ê·œì¹™ ì§€ì›</li></ol><p>íšŒì‚¬ ê°œë°œìë“¤ì´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¸í…”ë¦¬ì œì´ IDEA ë˜ëŠ” VSCodeì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” SonarLintë¥¼ ì œê³µí•˜ì—¬ ë³„ë„ì˜ ì„œë²„ ì—†ì´ë„ ê°„ë‹¨í•˜ê²Œ ìì²´ì ìœ¼ë¡œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ê³µì‹ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í†µí•´ ë³„ë‹¤ë¥¸ ì„¤ì • ì—†ì´ë„ ê°„ë‹¨í•˜ê²Œ ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ì†Œë‚˜íë¸Œ-ì‹œìŠ¤í…œ-êµ¬ì„±"><a href="#ì†Œë‚˜íë¸Œ-ì‹œìŠ¤í…œ-êµ¬ì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œ êµ¬ì„±"></a>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œ êµ¬ì„±</h3><p>ì†Œë‚˜íë¸ŒëŠ” <a href="https://docs.sonarqube.org/latest/setup/install-server/">ì§ì ‘ ì„¤ì¹˜</a>í•  ìˆ˜ë„ ìˆìœ¼ë©° ë„ì»¤ ì´ë¯¸ì§€ì™€ í•¨ê»˜ ì œê³µí•˜ëŠ” ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><a href="https://github.com/SonarSource/docker-sonarqube/blob/master/example-compose-files/sq-with-postgres/docker-compose.yml">sq-with-postgres/docker-compose.yml</a></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">sonarqube:9.1.0-community</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9000:9000&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarnet</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SONAR_JDBC_URL:</span> <span class="string">jdbc:postgresql://db:5432/sonar</span></span><br><span class="line">      <span class="attr">SONAR_JDBC_USERNAME:</span> <span class="string">sonar</span></span><br><span class="line">      <span class="attr">SONAR_JDBC_PASSWORD:</span> <span class="string">sonar</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarqube_data:/opt/sonarqube/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarqube_extensions:/opt/sonarqube/extensions</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarqube_logs:/opt/sonarqube/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarqube_temp:/opt/sonarqube/temp</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarqube_bundled-plugins:/opt/sonarqube/lib/bundled-plugins</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">      <span class="attr">nofile:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">262144</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">262144</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">sonarnet</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">POSTGRES_USER:</span> <span class="string">sonar</span></span><br><span class="line">      <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">sonar</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgresql:/var/lib/postgresql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgresql_data:/var/lib/postgresql/data</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">sonarnet:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">sonarqube_data:</span></span><br><span class="line">  <span class="attr">sonarqube_extensions:</span></span><br><span class="line">  <span class="attr">sonarqube_logs:</span></span><br><span class="line">  <span class="attr">sonarqube_temp:</span></span><br><span class="line">  <span class="attr">sonarqube_bundled-plugins:</span></span><br><span class="line">  <span class="attr">postgresql:</span></span><br><span class="line">  <span class="attr">postgresql_data:</span></span><br></pre></td></tr></table></figure><h4 id="WSL-vm-max-map-count"><a href="#WSL-vm-max-map-count" class="headerlink" title="WSL vm.max_map_count"></a>WSL vm.max_map_count</h4><p>ìœˆë„ìš° í™˜ê²½ì—ì„œ WSLë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš° vm.max_map_countë¡œ ì¸í•˜ì—¬ ì†Œë‚˜íë¸Œì—ì„œ ì‹¤í–‰í•˜ëŠ” Elasticsearchê°€ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œ WSLë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ì ‘ì† í›„ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Elasticsearchì—ì„œ ìš”êµ¬í•˜ëŠ” ìˆ˜ì¹˜ë¡œ ë³€ê²½í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span></span><br><span class="line">wsl -d docker-desktop</span><br><span class="line">sysctl -w vm.max_map_count=262144</span><br></pre></td></tr></table></figure><blockquote><p>ì†Œë‚˜íë¸Œì˜ ê´€ë¦¬ì ê³„ì •ê³¼ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ëŠ” admin/admin ì…ë‹ˆë‹¤.</p></blockquote><h3 id="ì†Œë‚˜íë¸Œ-í”„ë¡œì íŠ¸-ìƒì„±"><a href="#ì†Œë‚˜íë¸Œ-í”„ë¡œì íŠ¸-ìƒì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ í”„ë¡œì íŠ¸ ìƒì„±"></a>ì†Œë‚˜íë¸Œ í”„ë¡œì íŠ¸ ìƒì„±</h3><p>ì†Œë‚˜íë¸Œì— ì ‘ì†í•˜ì˜€ë‹¤ë©´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•  í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤. ì €ëŠ” ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-01.png" alt="spring5-web-example í”„ë¡œì íŠ¸"></p><p>ê·¸ë¦¬ê³  ì†Œë‚˜íë¸Œì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆëŠ” í† í°ì„ ë°œí–‰í•©ë‹ˆë‹¤. </p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-02.png"></p><p>í† í° ìš©ë„ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ì´ë¦„ì„ ì§€ì •í•˜ëŠ”ë° ì €ëŠ” Github Actionì—ì„œ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ GITHUB_ACTIONì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-03.png"></p><p>ì €ëŠ” ë¡œì»¬ ì»´í“¨í„°ì— ì†Œë‚˜íë¸Œë¥¼ ì‹¤í–‰í•˜ì˜€ê³  í•„ìš”í• ë•Œë§Œ í¬íŠ¸í¬ì›Œë”©ì„ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ í† í°ì„ ê³µê°œí•˜ê² ìŠµë‹ˆë‹¤. (ì–´ì°¨í”¼ í•™ìŠµ í›„ì— ì§€ì›€â€¦)</p><h3 id="ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì½”ë“œ-ì¶”ê°€"><a href="#ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì½”ë“œ-ì¶”ê°€" class="headerlink" title="ì†Œë‚˜íë¸Œ ê´€ë ¨ ì½”ë“œ ì¶”ê°€"></a>ì†Œë‚˜íë¸Œ ê´€ë ¨ ì½”ë“œ ì¶”ê°€</h3><p>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì— í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  í† í°ì„ ë°œê¸‰í•˜ì˜€ê¸° ë•Œë¬¸ì— ì†Œë‚˜íë¸Œì™€ ì—°ê³„í•  ìˆ˜ ìˆë„ë¡ í”„ë¡œì íŠ¸ í´ë”ì— ì†Œë‚˜íë¸Œì™€ ê´€ë ¨ëœ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.</p><h4 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h4><p>ë§Œì•½, ê·¸ë˜ë“¤ì„ í†µí•´ ì†Œë‚˜íë¸Œì™€ ì—°ë™í•˜ê³  ì‹¶ë‹¤ë©´ build.gradleì— SonarQube í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&quot;org.sonarqube&quot;</span> version <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;jacoco&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sonarqube &#123;</span><br><span class="line">  properties &#123;</span><br><span class="line">    property <span class="string">&quot;sonar.projectKey&quot;</span>, <span class="string">&quot;spring5-web-example&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="sonar-project-properties"><a href="#sonar-project-properties" class="headerlink" title="sonar-project.properties"></a>sonar-project.properties</h4><p>sonar-project.properties íŒŒì¼ì€ ì†Œë‚˜íë¸Œì—ì„œ ì°¸ì¡°í•˜ê²Œ ë˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">sonar.projectKey=spring5-web-example</span></span><br><span class="line"><span class="string">sonar.projectName=spring5-web-example</span></span><br><span class="line"><span class="string">sonar.java.source=1.11</span></span><br><span class="line"><span class="string">sonar.sources=src/main/java</span></span><br><span class="line"><span class="comment">#sonar.tests=src/main/test</span></span><br><span class="line"><span class="string">sonar.java.binaries=build/classes/java/main/com/example</span></span><br><span class="line"><span class="string">sonar.sourceEncoding=UTF-8</span></span><br><span class="line"><span class="string">sonar.exclusions=</span></span><br></pre></td></tr></table></figure><h2 id="Github-Action"><a href="#Github-Action" class="headerlink" title="Github Action"></a>Github Action</h2><p><a href="https://github.com/kitabisa/sonarqube-action">SonarQube GitHub Action</a>ì€ Github Actionì„ í†µí•´ ì†Œë‚˜íë¸Œë¡œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p><h3 id="ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì½”ë“œ-ì¶”ê°€"><a href="#ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì½”ë“œ-ì¶”ê°€" class="headerlink" title="ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì½”ë“œ ì¶”ê°€"></a>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì½”ë“œ ì¶”ê°€</h3><p><strong>.github/workflows/sonarqube.yml</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># schedule:</span></span><br><span class="line">    <span class="comment"># - cron: &#x27;0 * * * 1&#x27;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">SonarQube</span> <span class="string">Workflow</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">JDK</span> <span class="number">1.11</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">AdoptOpenJDK/install-jdk@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">version:</span> <span class="string">&#x27;11&#x27;</span></span><br><span class="line">        <span class="attr">architecture:</span> <span class="string">x64</span></span><br><span class="line">        <span class="attr">targets:</span> <span class="string">&#x27;JAVA_HOME&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Grant</span> <span class="string">execute</span> <span class="string">permission</span> <span class="string">for</span> <span class="string">gradlew</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">chmod</span> <span class="string">+x</span> <span class="string">gradlew</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">with</span> <span class="string">Gradle</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">./gradlew</span> <span class="string">build</span> <span class="string">-x</span> <span class="string">test</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Upload</span> <span class="string">build</span> <span class="string">artifact</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/upload-artifact@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">build/classes</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">sonarQube:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">build</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">SonarQube</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Donwload</span> <span class="string">build</span> <span class="string">artifact</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/download-artifact@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">build/classes</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SonarQube</span> <span class="string">Scan</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">kitabisa/sonarqube-action@master</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SONAR_HOST</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">login:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.SONAR_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">projectBaseDir:</span> <span class="string">&#x27;/github/workspace&#x27;</span></span><br></pre></td></tr></table></figure><p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° íŒŒì¼ì„ ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ì˜ ë©”ì¸ ë˜ëŠ” ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ë°˜ì˜í•˜ë©´ ê¹ƒí—ˆë¸Œì—ì„œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-04.png"></p><h3 id="ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì‹œí¬ë¦¿-ìƒì„±"><a href="#ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì‹œí¬ë¦¿-ìƒì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ ê´€ë ¨ ì‹œí¬ë¦¿ ìƒì„±"></a>ì†Œë‚˜íë¸Œ ê´€ë ¨ ì‹œí¬ë¦¿ ìƒì„±</h3><p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‘ê°€ì§€ ì‹œí¬ë¦¿ì„ ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ì— ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><ul><li>SONAR_HOST : ì†Œë‚˜íë¸Œ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ</li><li>SONAR_TOKEN : ì†Œë‚˜íë¸Œì—ì„œ ë°œê¸‰í•œ í† í° ì •ë³´</li></ul><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-05.png"></p><h3 id="ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì‹¤í–‰"><a href="#ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì‹¤í–‰" class="headerlink" title="ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰"></a>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰</h3><p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ ë©”ì¸ ë¸Œëœì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-06.png"></p><p>í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ë¹Œë“œê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê³  ì†Œë‚˜íë¸Œ ì„œë²„ë¥¼ í†µí•´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì›Œí¬í”Œë¡œìš°ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-07.png"></p><h2 id="ì •ì -ë¶„ì„-ê²°ê³¼"><a href="#ì •ì -ë¶„ì„-ê²°ê³¼" class="headerlink" title="ì •ì  ë¶„ì„ ê²°ê³¼"></a>ì •ì  ë¶„ì„ ê²°ê³¼</h2><p>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì—¬ ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œ í”„ë¡œì íŠ¸ì˜ ì •ì  ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-08.png"></p><p>ë¹Œë“œ í…ŒìŠ¤íŠ¸ëŠ” ìˆ˜í–‰í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ì»¤ë²„ë¦¬ì§€ëŠ” ë¶„ì„í•  ìˆ˜ ì—†ì—ˆìœ¼ë‚˜ 10ê°œì˜ ì½”ë“œ ì•…ì·¨ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p><h3 id="ì½”ë“œ-ì•…ì·¨-ê²€í† -ë°-ê°œì„ "><a href="#ì½”ë“œ-ì•…ì·¨-ê²€í† -ë°-ê°œì„ " class="headerlink" title="ì½”ë“œ ì•…ì·¨ ê²€í†  ë° ê°œì„ "></a>ì½”ë“œ ì•…ì·¨ ê²€í†  ë° ê°œì„ </h3><p>ì •ì  ë¶„ì„ ê²°ê³¼ë¡œ ê²€ì¶œëœ ì½”ë“œ ì•…ì·¨ì— ëŒ€í•œ ë‚´ìš©ì„ ê²€í† í•˜ê³  ì´ë¥¼ ê°œì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><h4 id="ì½”ë“œ-ì•…ì·¨"><a href="#ì½”ë“œ-ì•…ì·¨" class="headerlink" title="ì½”ë“œ ì•…ì·¨"></a>ì½”ë“œ ì•…ì·¨</h4><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-09.png"></p><p>ì²«ë²ˆì§¸ ê²€ì¶œ í•­ëª©ì€ ì—°ì†ëœ ë¼ì¸ì„ ì£¼ì„ìœ¼ë¡œ ì²˜ë¦¬í•œ ë¶€ë¶„ì„ ì œê±°í•´ì•¼í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-10.png"></p><p>ë§Œì•½, ì´ë ‡ê²Œ ì£¼ì„ë˜ì–´ìˆëŠ” ê²ƒì´ ë‚¨ì•„ìˆì–´ì•¼ í•œë‹¤ê³  ê°€ì •í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ê²€ì¶œ ê·œì¹™ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Ignore Rules</span></span><br><span class="line"><span class="meta">sonar.issue.ignore.multicriteria</span>=<span class="string">e1,e2</span></span><br><span class="line"><span class="meta">sonar.issue.ignore.multicriteria.e1.ruleKey</span>=<span class="string">java:S125</span></span><br><span class="line"><span class="meta">sonar.issue.ignore.multicriteria.e1.resourceKey</span>=<span class="string">**/*.java</span></span><br><span class="line"><span class="meta">sonar.issue.ignore.multicriteria.e2.ruleKey</span>=<span class="string">java:S1192</span></span><br><span class="line"><span class="meta">sonar.issue.ignore.multicriteria.e2.resourceKey</span>=<span class="string">**/*.java</span></span><br></pre></td></tr></table></figure><p>java:S125ëŠ” ë¸”ë¡ìœ¼ë¡œ ëœ ì£¼ì„ì„ ë‚¨ê¸°ê³  ìˆë‹¤ëŠ” ì•…ì·¨ì´ë©° java:S1192ëŠ” ë™ì¼í•œ ë¬¸ìì—´ì„ ìƒìˆ˜ë¡œ ì·¨ê¸‰í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì•…ì·¨ì…ë‹ˆë‹¤. ì €ëŠ” ì´ê²ƒì„ ì•…ì·¨ë¡œ ë³´ì§€ ì•Šê¸° ìœ„í•´ì„œ ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ê³  ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-11.png"></p><p>ê¸°ì¡´ì— ê²€ì¶œë˜ì—ˆë˜ ì½”ë“œ ì•…ì·¨ ì¤‘ java:S125ì™€ java:S1192ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ ì œì™¸ë˜ì–´ 3ê°œì˜ ì½”ë“œ ì•…ì·¨ê°€ ì¤„ì–´ë“¤ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ íšŒì‚¬ ë˜ëŠ” ê°œë°œíŒ€ì—ì„œ í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ê·œì¹™ì„ ê²€í† í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼í•©ë‹ˆë‹¤ë§Œ ì €í¬ íšŒì‚¬ëŠ” ì •ì‘ ê·¸ëŸ¬ì§€ ì•Šê³  ìˆì–´ ì•„ì‰¬ì›€ì´ ë§ìŠµë‹ˆë‹¤. ì²´ê³„ê°€ ì—†ë‹¤ë³´ë‹ˆ ë¬´ì–¸ê°€ ë„ì…ì„ ì›í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ì•ŠëŠ”ê²Œ ë§ì€ ê²ƒ ê°™ì•„ìš”.</p><p>ì•„ë¬´íŠ¼ ë‚˜ë¨¸ì§€ ì½”ë“œ ì•…ì·¨ì— ëŒ€í•´ì„œë„ ë¦¬íŒ©í† ë§ì„ ìˆ˜í–‰í•˜ì—¬ ì—†ì• ë³´ë„ë¡ í•˜ë©´ì„œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-12.png"></p><h4 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="@SuppressWarnings"></a>@SuppressWarnings</h4><p>sonar-project.propertiesì—ì„œ ì œì™¸ë˜ë„ë¡ ì •ì˜í•œ ê·œì¹™ì´ íŒ¨í„´ì— ì˜í•œ ê²ƒì´ë¼ë©´ íŠ¹ì • í´ë˜ìŠ¤ ë˜ëŠ” í•¨ìˆ˜ ë‹¨ìœ„ë¡œ ê·œì¹™ì„ ì œì™¸í•˜ê³  ì‹¶ì€ ê²½ìš° @SuppressWarningsì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;squid:S125&quot;,&quot;squid:S1192&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ SonarQubeì™€ Github Actionì„ í†µí•´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ê³¼ì •ì„ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&quot;SonarQube&quot;&gt;&lt;a href=&quot;#SonarQube&quot; class=</summary>
      
    
    
    
    
    <category term="SonarQube" scheme="https://kdevkr.github.io/tags/SonarQube/"/>
    
    <category term="Github Action" scheme="https://kdevkr.github.io/tags/Github-Action/"/>
    
  </entry>
  
  <entry>
    <title>ë¦¬ëˆ…ìŠ¤ì—ì„œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/maintaining-process-execution-in-linux/"/>
    <id>https://kdevkr.github.io/maintaining-process-execution-in-linux/</id>
    <published>2021-10-10T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì„œë²„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì–¸ì œë“ ì§€ <strong>ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©</strong>ìœ¼ë¡œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ì‹œì ìœ¼ë¡œ ì „ë ¥ì´ ì°¨ë‹¨ë˜ì–´ ì„œë²„ ì¥ë¹„ê°€ ë‹¤ì‹œ ì‹œì‘ë˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤ê°€ ì„œë²„ ìì›ì„ ë§ì´ ì‚¬ìš©í•´ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë‹¨ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ê·¸ë˜ì„œ ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ ë¦¬ëˆ…ìŠ¤ì—ì„œ ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©ìœ¼ë¡œ ì¸í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë‹¨ë˜ì—ˆì„ ê²½ìš° ìë™ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚´ìœ¼ë¡œì¨ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ë°©ë²•ì…ë‹ˆë‹¤.</p><h2 id="í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ìœ ì§€"><a href="#í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ìœ ì§€" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€"></a>í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€</h2><p>ë¨¼ì €, ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ê³  ê°€ì • í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nohup java -jar -Xmx500m demo.war 1&gt; app.log 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="comment"># [1] 227</span></span><br><span class="line"></span><br><span class="line">ls -l</span><br><span class="line"><span class="comment"># total 21M</span></span><br><span class="line"><span class="comment"># -rw-r--r-- 1 ec2-user ec2-user 2.0K Oct  8 15:19 app.log</span></span><br><span class="line"><span class="comment"># -rw-r--r-- 1 ec2-user ec2-user    3 Oct  8 15:19 app.pid</span></span><br><span class="line"><span class="comment"># -rwxr-xr-x 1 ec2-user ec2-user  20M Oct  8 12:28 demo.war*</span></span><br><span class="line"></span><br><span class="line">cat app.pid</span><br><span class="line"><span class="comment"># 227</span></span><br></pre></td></tr></table></figure><p>ìœ„ ì˜ˆì‹œì—ì„œ nohup ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê³  ì¶œë ¥ëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ì™€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ApplicationPidWriterì— ì˜í•´ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” íŒŒì¼ì´ ë™ì¼í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="í”„ë¡œì„¸ìŠ¤-ì•„ì´ë””-í™•ì¸í•˜ê¸°"><a href="#í”„ë¡œì„¸ìŠ¤-ì•„ì´ë””-í™•ì¸í•˜ê¸°" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” í™•ì¸í•˜ê¸°"></a>í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” í™•ì¸í•˜ê¸°</h3><p>ì•ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ì ìœ¼ë¡œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆë‹¤ë©´ ì¢‹ê² ì§€ë§Œ ê·¸ë ‡ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ í™•ì¸í•˜ê³  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># echo $!</span></span><br><span class="line">nohup java -jar -Xmx500m demo.war 1&gt; app.log 2&gt;&amp;1 &amp; <span class="built_in">echo</span> $! &gt; app.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># JPS(JVM Process Status)</span></span><br><span class="line">jps -v | grep war | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ps -ef</span></span><br><span class="line">ps -ef | grep java | grep -v grep | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># netstat -tnlp</span></span><br><span class="line">netstat -tnlp | grep java | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F <span class="string">&#x27;/&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pgrep</span></span><br><span class="line">pgrep java</span><br></pre></td></tr></table></figure><p>ì²«ë²ˆì§¸ ë°©ì‹ì— ì‚¬ìš©ëœ <strong>echo $!</strong> ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ëœ ëª…ë ¹ì–´ì— ëŒ€í•œ PIDê°’ì„ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.</p><h3 id="Crontabìœ¼ë¡œ-í”„ë¡œì„¸ìŠ¤-ìœ ì§€í•˜ê¸°"><a href="#Crontabìœ¼ë¡œ-í”„ë¡œì„¸ìŠ¤-ìœ ì§€í•˜ê¸°" class="headerlink" title="Crontabìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ìœ ì§€í•˜ê¸°"></a>Crontabìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ìœ ì§€í•˜ê¸°</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê³ ì „ì ì¸ ë°©ì‹ì€ ì•ì„œ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì¶”ì¶œëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ì— ëŒ€í•œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìƒíƒœë¥¼ ì²´í¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ Crontabì„ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">PID_FILE=<span class="string">&quot;app.pid&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">autorun</span></span> () &#123;</span><br><span class="line">  <span class="comment"># ... &amp; echo $! &gt; app.pid</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$PID_FILE</span>&quot;</span> ] &amp;&amp; [ ! -z `cat <span class="string">&quot;<span class="variable">$PID_FILE</span>&quot;</span>` ]; <span class="keyword">then</span></span><br><span class="line">  PID=$(cat <span class="variable">$PID_FILE</span>)</span><br><span class="line">  <span class="keyword">if</span> ps -p <span class="variable">$PID</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$PID_FILE</span>(<span class="variable">$PID</span>) is running&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    autorun</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  autorun</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="SystemD"><a href="#SystemD" class="headerlink" title="SystemD"></a>SystemD</h3><p>ë” íš¨ìœ¨ì ì¸ ë°©ì‹ì€ Nginxì™€ ê°™ì€ íŒ¨í‚¤ì§€ë¥¼ APT ë˜ëŠ” YUMìœ¼ë¡œ ì„¤ì¹˜í•  ë•Œ SystemD ì„œë¹„ìŠ¤ì— ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì²˜ëŸ¼  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ SystemD ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><p><strong>/etc/systemd/system/demo.service</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Demo</span><br><span class="line">After=syslog.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=ec2-user</span><br><span class="line">WorkingDirectory=/home/ec2-user</span><br><span class="line">ExecStart=/usr/bin/java -jar -Xmx500m demo.war</span><br><span class="line">ExecStop=kill -9 `cat app.pid`</span><br><span class="line">SuccessExitStatus=143</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>ìœ„ì™€ ê°™ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì •ì˜í–ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„ê°€ ì‹¤í–‰ë  ë•Œ ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ë„ë¡ í™œì„±í™”í•˜ê±°ë‚˜ ì§ì ‘ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> demo.service</span><br><span class="line">sudo systemctl start demo.service</span><br></pre></td></tr></table></figure><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì„œë²„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì–¸ì œë“ ì§€ &lt;strong&gt;ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©&lt;/strong&gt;ìœ¼ë¡œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ì‹œì ìœ¼ë¡œ ì „ë ¥ì´ ì°¨ë‹¨ë˜ì–´ ì„œë²„ ì¥ë¹„ê°€ ë‹¤ì‹œ ì‹œì‘ë˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤</summary>
      
    
    
    
    
    <category term="Linux" scheme="https://kdevkr.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>AWS IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œí•˜ê¸°</title>
    <link href="https://kdevkr.github.io/limit-region-aws-iam-user/"/>
    <id>https://kdevkr.github.io/limit-region-aws-iam-user/</id>
    <published>2021-10-03T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>íšŒì‚¬ì— ìˆë˜ ì±…ë“¤ ì¤‘ <strong>íƒ„ë ¥ì  ê°œë°œë¡œ ì´ë„ëŠ” AWS ì‹¤ì²œ ê¸°ìˆ </strong>ì´ë¼ëŠ” ì±…ì„ ì½ì–´ë³´ê³  ê´€ë ¨ëœ ì •ë³´ë¥¼ ì°¾ìœ¼ë©´ì„œ AWS í™œìš© ë°©ì•ˆì— ëŒ€í•´ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p>AWS í”„ë¦¬ í‹°ì–´ ë˜ëŠ” AWS ì„œë¹„ìŠ¤ë¥¼ í•™ìŠµí•˜ëŠ” ì‚¬ëŒì´ë¼ë©´ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ê³  ìˆëŠ” ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì„ê²ë‹ˆë‹¤. ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” íšŒì‚¬ì˜ ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì´ ì•„ë‹Œ IAMì„ í†µí•´ ì§ë¬´ ë˜ëŠ” íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•˜ê² ì£ . ë³´ì•ˆ ë“±ê¸‰ì´ ë†’ê±°ë‚˜ ì²´ê³„ì ì¸ íšŒì‚¬ë¼ë©´ AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì •ì±…ì„ ê²€í† í•˜ê³  ë¶€ì—¬í•˜ê² ì§€ë§Œ ì œê°€ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì˜ íŒ€ì—ì„œë„ ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬í•œ ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì„ ë³´ì•˜ê³  ì§ì›ë§ˆë‹¤ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ìë¥¼ ë°œê¸‰í•´ë‹¬ë¼ê³  ìš”ì²­í•˜ì—¬ ì‚¬ìš©í•˜ê³ ëŠ” ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ë„ ê¶Œí•œ ì •ì±…ì„ ê²€í† í•˜ê³  ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ê·€ì°®ì€ ê±´ ë§ìŠµë‹ˆë‹¤. ê²°êµ­ ì‚¬ìš©ìì—ê²Œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì •ì±…ì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p>AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ëŠ” ë‹¤ì–‘í•œ ì§€ì—­ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„° ì„¼í„°ì— ìì›ì„ ìƒì„±í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì ê³„ì • ì •ë³´ê°€ ìœ ì¶œëœë‹¤ë©´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì „ì´ ì•„ë‹Œ ê³³ì— AWS ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ê³  ìš”ê¸ˆì´ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë¶€ ìš”ê¸ˆ í­íƒ„ ë¬¸ì œê°€ ìƒê¸°ëŠ” ë¶„ë“¤ë„ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì„œìš¸ ë¦¬ì „ì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ë§Œ ì²´í¬í•œ ìƒíƒœë¡œ ìˆë‹¤ê°€ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆëŠ” ë¦¬ì „ì— ì‹¤í–‰ëœ AWS ë¦¬ì†ŒìŠ¤ë¡œ ì¸í•˜ì—¬ ë°œìƒí•˜ëŠ” ìš”ê¸ˆìœ¼ë¡œ ë‹¹í™©í•˜ëŠ” ê²½ìš°ë„ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p><p>ì´ ê¸€ì—ì„œëŠ” IAM ì‚¬ìš©ìì˜ ê³„ì • ì •ë³´ê°€ ìœ ì¶œë˜ë”ë¼ë„ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì „ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ì „ì— AWS ë¦¬ì†ŒìŠ¤ê°€ ë‚˜ë„ ëª¨ë¥´ê²Œ ìƒì„±ë˜ì§€ ì•Šë„ë¡ ë°©ì§€í•˜ëŠ” ëŒ€ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p><h2 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h2><p>IAM(Identity and Access Management)ì€ ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ë§í•©ë‹ˆë‹¤. AWS IAMë„ ë§ˆì°¬ê°€ì§€ë¡œ ì¡°ì§ì„ êµ¬ì„±í•˜ê±°ë‚˜ ì¥ê¸° ë˜ëŠ” ì„ì‹œì ìœ¼ë¡œ AWS ë¦¬ì†ŒìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p><h3 id="IAM-ì‚¬ìš©ì"><a href="#IAM-ì‚¬ìš©ì" class="headerlink" title="IAM ì‚¬ìš©ì"></a>IAM ì‚¬ìš©ì</h3><p>AWS IAMì˜ ì‚¬ìš©ìëŠ” AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì¥ê¸°ì ì¸ ê¶Œí•œì„ ê°€ì§€ë„ë¡ êµ¬ì„±í•˜ëŠ” ì¥ê¸° ìê²© ì¦ëª…ì…ë‹ˆë‹¤. </p><p>ë¨¼ì €, í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ IAM ì‚¬ìš©ìì¸ pikaë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. pikaëŠ” <strong>ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì§ë¬´ ì •ì±…ì¸ AdminisratorAccess</strong>ë¥¼ ê°€ì§„ë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-01.png"></p><p>pikaëŠ” AWSì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê´€ë¦¬í˜• ì •ì±…ì¸ AdministratorAccessì™€ IAMUserChangePasswordì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ê·¸ëŸ¬ë©´ pika ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ìœ ì¶œë˜ì–´ ëˆ„êµ°ê°€ê°€ AWS ì½˜ì†”ì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ ëœë‹¤ë©´ ìˆ˜ ë§ì€ ë¦¬ì „ì— VPCë¥¼ ìƒì„±í•˜ê±°ë‚˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-02.png"></p><h3 id="IAM-ì‚¬ìš©ì-ë¦¬ì „-ì œí•œ"><a href="#IAM-ì‚¬ìš©ì-ë¦¬ì „-ì œí•œ" class="headerlink" title="IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œ"></a>IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œ</h3><p>ë§Œì•½ pikaë¼ëŠ” ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ê¸° ìœ„í•œ êµ¬ì„±ì„ ì„œìš¸(ap-northeast-2) ë¦¬ì „ì—ì„œë§Œ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³¸ë‹¤ë©´ ë‹¤ë¥¸ ë¦¬ì „ì— ëŒ€í•œ ê¶Œí•œì„ ë¶ˆí•„ìš”í•˜ê²Œ ì£¼ê³  ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤. </p><h4 id="aws-RequestedRegion"><a href="#aws-RequestedRegion" class="headerlink" title="aws:RequestedRegion"></a>aws:RequestedRegion</h4><p>IAM ì •ì±…ì„ ì •ì˜í•  ë•Œ aws:RequestedRegionëŠ” ê¸€ë¡œë²Œ ì¡°ê±´ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ë¦¬ì „ì— ëŒ€í•´ì„œë§Œ ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë§Œì•½, ì„œìš¸ ë¦¬ì „ë§Œ ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¡°ê±´ì ˆì„ ì •ì˜í•˜ë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Version&quot;</span>: <span class="string">&quot;2012-10-17&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Statement&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Action&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Condition&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;StringEquals&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;aws:RequestedRegion&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;ap-northeast-2&quot;</span></span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê¸°ì¡´ì— ì—°ê²°í•˜ì˜€ë˜ AdministratorAccessë¼ëŠ” ì§ë¬´ ì •ì±…ì„ í•´ì œí•˜ê³  AdministratorAccessOnlySeoulì´ë¼ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-03.png"></p><h3 id="ë¦¬ì „-ì œí•œ-í™•ì¸"><a href="#ë¦¬ì „-ì œí•œ-í™•ì¸" class="headerlink" title="ë¦¬ì „ ì œí•œ í™•ì¸"></a>ë¦¬ì „ ì œí•œ í™•ì¸</h3><p>pika ì‚¬ìš©ìëŠ” ì„œìš¸ ë¦¬ì „ì— ëŒ€í•œ ê¶Œí•œë§Œ ê°€ì§€ë„ë¡ ì œí•œë˜ì—ˆê¸° ë•Œë¬¸ì— ì •ë§ë¡œ ê·¸ëŸ¬í•œ ìƒíƒœê°€ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p>ì—°ê²°ë˜ì§€ ì•Šì€ íƒ„ë ¥ì  IPëŠ” ìš”ê¸ˆì„ ì§€ë¶ˆí•´ì•¼í•˜ë¯€ë¡œ íƒ„ë ¥ì  IPë¥¼ ìƒì„±í•˜ë ¤ê³  ì‹œë„í–ˆì§€ë§Œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. </p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-04.png"></p><p>EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ ì„œìš¸ ë¦¬ì „ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ AMI ìœ í˜•ì„ ì¡°íšŒí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-05.png"></p><p>ë„ì¿„ ë¦¬ì „ì— ëŒ€í•œ í˜ì´ì§€ëŠ” ì ‘ì†í•  ìˆ˜ ìˆì§€ë§Œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ë™ì¼í•˜ê²Œ AWS APIë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„œìš¸ ë¦¬ì „ì™¸ì—ëŠ” ê¶Œí•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-06.png"></p><p>ì‹¬ì§€ì–´ëŠ” ê¸€ë¡œë²Œ ë¦¬ì „ ì„œë¹„ìŠ¤ì¸ S3ì—ì„œë„ ê¶Œí•œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” S3 ì„œë¹„ìŠ¤ë¡œ ì´ë™í•  ë•Œ í˜„ì¬ ë¦¬ì „ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì¸ë° ì„œìš¸ ë¦¬ì „ìœ¼ë¡œ ë³€ê²½í•˜ê±°ë‚˜ ì œê±°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-07.png"></p><h3 id="ê²½ê³„-ì„¤ì •ìœ¼ë¡œ-ë¦¬ì „-ì œí•œ"><a href="#ê²½ê³„-ì„¤ì •ìœ¼ë¡œ-ë¦¬ì „-ì œí•œ" class="headerlink" title="ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ë¦¬ì „ ì œí•œ"></a>ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ë¦¬ì „ ì œí•œ</h3><p>ì•ì„œ pika ì‚¬ìš©ìëŠ” AdministratorAccessë¼ëŠ” ì§ë¬´ ì •ì±…ê³¼ ë™ì¼í•˜ê²Œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” AdministratorAccessOnlySeoulì´ë¼ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ì—¬ ì œí•œí•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ëœ ê¶Œí•œì´ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ë¦¬ì „ì„ ì œí•œí•˜ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ê¸°ì—ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì •ì±…ì„ ê¶Œí•œ ê²½ê³„(Permissions boundary)ë¡œ ì„¤ì •í•˜ë©´ ëª¨ë“  ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ëœ ì •ì±…ì— ëŒ€í•˜ì—¬ ë¦¬ì „ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="íŠ¹ì •-ì„œë¹„ìŠ¤ì—-ëŒ€í•œ-ê¶Œí•œì„-ê°€ì§„-ì‚¬ìš©ì"><a href="#íŠ¹ì •-ì„œë¹„ìŠ¤ì—-ëŒ€í•œ-ê¶Œí•œì„-ê°€ì§„-ì‚¬ìš©ì" class="headerlink" title="íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ì"></a>íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ì</h4><p>ì œê°€ ì‚¬ìš©í•˜ëŠ” mamboë¼ëŠ” ì‚¬ìš©ìëŠ” VPC, EC2, S3ì— ëŒ€í•œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì •ì±…ì„ ì—°ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-08.png"></p><h4 id="ì„œìš¸-ë¦¬ì „ì„-ê²½ê³„ë¡œ-ì œí•œ"><a href="#ì„œìš¸-ë¦¬ì „ì„-ê²½ê³„ë¡œ-ì œí•œ" class="headerlink" title="ì„œìš¸ ë¦¬ì „ì„ ê²½ê³„ë¡œ ì œí•œ"></a>ì„œìš¸ ë¦¬ì „ì„ ê²½ê³„ë¡œ ì œí•œ</h4><p>ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ì„œìš¸ ë¦¬ì „ë§Œì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•˜ê¸° ìœ„í•´ ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ê¶Œí•œ ê²½ê³„ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-09.png"></p><p>mambo ì‚¬ìš©ìëŠ” RDSì— ëŒ€í•œ ê¶Œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ì„œìš¸ ë¦¬ì „ì—ì„œë„ RDSë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-10.png"></p><p>EC2 ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ê³  ìˆì§€ë§Œ ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ì¸í•˜ì—¬ ì„œìš¸ ë¦¬ì „ì´ ì•„ë‹ˆë©´ ê¶Œí•œì´ ì—†ê²Œ ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-11.png"></p><h4 id="ê¸€ë¡œë²Œ-ì„œë¹„ìŠ¤-ë¦¬ì „"><a href="#ê¸€ë¡œë²Œ-ì„œë¹„ìŠ¤-ë¦¬ì „" class="headerlink" title="ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ë¦¬ì „"></a>ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ë¦¬ì „</h4><p>CloudFront, Route53, IAMê³¼ ê°™ì€ ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ëŠ” ë¯¸êµ­ ë™ë¶€ (us-east-1) ë¦¬ì „ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ê¶Œí•œì„ ë³„ë„ë¡œ ì„¤ì •í•˜ì—¬ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Action&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;cloudfront:*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;route53:*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iam:*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;support:*&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;Resource&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Condition&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;StringEquals&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;aws:RequestedRegion&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;us-east-1&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>IAM ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì „ì„ ì œí•œí•¨ìœ¼ë¡œì¨ ë¹„ë¡ ê³„ì • ì •ë³´ê°€ ìœ ì¶œë˜ë”ë¼ë„ ì„œìš¸ ë¦¬ì „ì—ì„œë§Œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ë§ˆìŒëŒ€ë¡œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ë°©ì§€í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì„ ì ìš©í•˜ë”ë¼ë„ IAM ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ì•¡ì„¸ìŠ¤ í‚¤ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ê²ƒì€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;íšŒì‚¬ì— ìˆë˜ ì±…ë“¤ ì¤‘ &lt;strong&gt;íƒ„ë ¥ì  ê°œë°œë¡œ ì´ë„ëŠ” AWS ì‹¤ì²œ ê¸°ìˆ &lt;/strong&gt;ì´ë¼ëŠ” ì±…ì„ ì½ì–´ë³´ê³  ê´€ë ¨ëœ ì •ë³´ë¥¼ ì°¾ìœ¼ë©´ì„œ AWS í™œìš© ë°©ì•ˆì— ëŒ€í•´ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;AWS í”„ë¦¬</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ S3 ë²„í‚· ì•¡ì„¸ìŠ¤í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/ec2-instance-access-s3-bucket/"/>
    <id>https://kdevkr.github.io/ec2-instance-access-s3-bucket/</id>
    <published>2021-10-02T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ S3 ë²„í‚·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.</p><p>ìµœê·¼ íšŒì‚¬ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ ì¤‘ì—ëŠ” ë³´ì•ˆ ì •ì±…ì— ì˜í•´ ê³ ê°ì´ êµ¬ì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ì •ë³´ë§Œì„ ì œê³µë°›ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìƒê²¼ìŠµë‹ˆë‹¤. í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ì—ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ìƒìš© ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤. ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…í•˜ê¸° ìœ„í•˜ì—¬ ë§¤ì¼ 1ì‹œì— íŒŒì¼ë¡œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ì—¬ S3ë¡œ ì €ì¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê³ ê°ì´ ë³´ìœ í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°±ì—… íŒŒì¼ì„ ì €ì¥í•˜ê¸° ìœ„í•œ S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì§€ì •í•´ì£¼ë„ë¡ ìœ ë„í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p><h2 id="S3-ë²„í‚·-ì •ì±…"><a href="#S3-ë²„í‚·-ì •ì±…" class="headerlink" title="S3 ë²„í‚· ì •ì±…"></a>S3 ë²„í‚· ì •ì±…</h2><p>S3ì—ì„œ ë²„í‚·ì„ ë§Œë“¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ <strong>ëª¨ë“  í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨</strong>ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-01.png"></p><p>ê·¸ë¦¬ê³  <strong>ë²„í‚· ì •ì±…</strong>ì„ í†µí•´ ë²„í‚· ë˜ëŠ” ë²„í‚·ì— ì €ì¥ëœ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><h3 id="ë²„í‚·-ì •ì±…-ìƒì„±"><a href="#ë²„í‚·-ì •ì±…-ìƒì„±" class="headerlink" title="ë²„í‚· ì •ì±… ìƒì„±"></a>ë²„í‚· ì •ì±… ìƒì„±</h3><p>ë²„í‚· ì •ì±…ì„ ìƒì„±í•  ë•ŒëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” <a href="http://awspolicygen.s3.amazonaws.com/policygen.html">AWS Policy Generator</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p><p>ë‹¤ìŒì€ íŠ¹ì • IPì— ëŒ€í•´ì„œ ë²„í‚·ì— ëŒ€í•œ ì¡°íšŒ, ì½ê¸°, ì“°ê¸° ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ì •ì±…ì„ ìƒì„±í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Version&quot;</span>: <span class="string">&quot;2012-10-17&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Statement&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Principal&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Action&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;s3:ListBucket&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:GetObject&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:PutObject&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr&quot;</span>,</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr/*&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;Condition&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;IpAddress&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;aws:SourceIp&quot;</span>: <span class="string">&quot;218.156.190.x/32&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ë²„í‚· ì •ì±…ì„ ì •ì˜í•˜ëŠ” JSONì˜ í¬ê¸°ëŠ” 20kBë¡œ ì œí•œë©ë‹ˆë‹¤.</p></blockquote><p>ë²„í‚· ì •ì±…ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/example-bucket-policies.html">ë²„í‚· ì •ì±… ì˜ˆì œ</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p><h2 id="EC2-ì¸ìŠ¤í„´ìŠ¤"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤"></a>EC2 ì¸ìŠ¤í„´ìŠ¤</h2><p>ì•„ë§ˆì¡´ ë¦¬ëˆ…ìŠ¤ AMIë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë©´ AWS CLIê°€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, AWS CLIë¥¼ ì‚¬ìš©í•´ì„œ S3 ì„œë¹„ìŠ¤ì— ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="IAM-ì—­í• -ìƒì„±"><a href="#IAM-ì—­í• -ìƒì„±" class="headerlink" title="IAM ì—­í•  ìƒì„±"></a>IAM ì—­í•  ìƒì„±</h3><p>S3 ë²„í‚· ê¶Œí•œ ì„¤ì •ì—ì„œ ë²„í‚· ì •ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë‚˜ IAM ì—­í• ì„ ë§Œë“¤ê³  ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì ‘ê·¼í•´ì•¼í•˜ë¯€ë¡œ EC2 ì„œë¹„ìŠ¤ì— ëŒ€í•œ IAM ì—­í• ì„ ë§Œë“¤ì–´ì„œ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ë“±ë¡í•˜ê² ìŠµë‹ˆë‹¤.</p><p>ë¨¼ì €, EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ AWS CLIë¡œ ë²„í‚·ì„ ì¡°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-02.png"></p><p>í˜„ì¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” IAM ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì´ ì§€ì •ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p><p>IAM ë©”ë‰´ì—ì„œ ì‹ ê·œë¡œ ì—­í• ì„ ìƒì„±í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-03.png"></p><p>S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì •ì˜í•  ê²ƒì´ë¯€ë¡œ ê´€ë¦¬í˜• ì •ì±…ì€ ì„¤ì •í•˜ì§€ì•ŠìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-04.png"></p><p>ìƒì„±í•œ IAM ì—­í• ì„ EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-05.png"></p><p>IAM ì—­í• ì— ì–´ë– í•œ ì •ì±…ì„ ì ìš©í•˜ì§€ ì•Šê³  ë²„í‚·ì„ ì¡°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-06.png"></p><p>IAM ì—­í• ì„ ì§€ì •í•˜ì˜€ê¸°ì— AWS CLIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì§€ë§Œ mambo.kr ì´ë¼ëŠ” ë²„í‚·ì— ëŒ€í•œ ListObjectsV2 ì‘ì—…ì€ Access Denied ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p><h3 id="ì¸ë¼ì¸-ì •ì±…"><a href="#ì¸ë¼ì¸-ì •ì±…" class="headerlink" title="ì¸ë¼ì¸ ì •ì±…"></a>ì¸ë¼ì¸ ì •ì±…</h3><p>ìš°ë¦¬ê°€ ìƒì„±í•œ IAM ì—­í• ì—ëŠ” ì–´ë– í•œ ì •ì±…ë„ ì—°ê²°í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§€ì§€ ì•ŠëŠ”ê²Œ ë‹¹ì—°í•©ë‹ˆë‹¤. ë‹¤ì‹œ IAM ë©”ë‰´ë¡œ ëŒì•„ê°€ì„œ <strong>ì¸ë¼ì¸ ì •ì±… ì¶”ê°€</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-07.png"></p><p>ë²„í‚· ì •ì±… ì˜ˆì œë¥¼ ì°¸ê³ í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ JSON í˜•ì‹ìœ¼ë¡œ ë²„í‚· ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Version&quot;</span>: <span class="string">&quot;2012-10-17&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Statement&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;Sid&quot;</span>: <span class="string">&quot;Mannual&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Action&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;s3:ListBucket&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:GetObject&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:PutObject&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr&quot;</span>,</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr/*&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-08.png"></p><h3 id="ë²„í‚·-ì¡°íšŒ"><a href="#ë²„í‚·-ì¡°íšŒ" class="headerlink" title="ë²„í‚· ì¡°íšŒ"></a>ë²„í‚· ì¡°íšŒ</h3><p>S3 ë²„í‚·ì— ëŒ€í•œ ì •ì±…ì´ IAM ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆìœ¼ë‹ˆ ë²„í‚·ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ê°€ì§€ê²Œ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-09.png"></p><p>EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš©ì ê³„ì •ì˜ ë³´ìœ í•œ S3 ë²„í‚·ì— ëŒ€í•œ ëª©ë¡ì€ ê¶Œí•œì´ ì—†ì–´ì„œ ì¡°íšŒí•  ìˆ˜ ì—†ìœ¼ë‚˜ ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì •ì˜ëœ mambo.kr ë²„í‚·ì— ëŒ€í•´ì„œëŠ” ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ë§Œì•½, S3 ë²„í‚· ëª©ë¡ì„ ì¡°íšŒí•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ Statementë¥¼ ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Version&quot;</span>: <span class="string">&quot;2012-10-17&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Statement&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;Sid&quot;</span>: <span class="string">&quot;Mannual&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Action&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;s3:ListBucket&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:GetObject&quot;</span>,</span><br><span class="line">                <span class="string">&quot;s3:PutObject&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr&quot;</span>,</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::mambo.kr/*&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;Sid&quot;</span>: <span class="string">&quot;Mannual-2&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span>: <span class="string">&quot;Allow&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Action&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;s3:ListBucket&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;arn:aws:s3:::*/*&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë¹ˆ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë²„í‚·ì— ì—…ë¡œë“œí•˜ê³  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-10.png"></p><p>S3ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” í¬ê¸°ì— ëŒ€í•œ ì œí•œì€ ì—†ìœ¼ë‚˜ PUT ìš”ì²­ìœ¼ë¡œ ì—…ë¡œë“œ ê°€ëŠ¥í•œ í¬ê¸°ëŠ” ìµœëŒ€ 5GBì…ë‹ˆë‹¤. AWS CLIì˜ S3 ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¼ì • í¬ê¸° ì´ìƒì´ë¼ë©´ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ì•Œê³  ê³„ì‹œê³  ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</p><h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>í¼ë¸”ë¦­ IPê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ë¼ë©´ AWS PrivateLinkë¡œ êµ¬ì„±ë˜ëŠ” VPC ì¸í„°í˜ì´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/privatelink-interface-endpoints.html">S3 ì„œë¹„ìŠ¤ì™€ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •</a>í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ì‚¬ìš©ì ê³„ì •ì˜ ARNì„ ì œê³µë°›ì•„ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ê³µì‹ ë¬¸ì„œì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì •ì±… ì˜ˆì œë¥¼ ì°¸ê³ í•´ë´…ì‹œë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ S3 ë²„í‚·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ìµœê·¼ íšŒì‚¬ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ ì¤‘ì—ëŠ” ë³´ì•ˆ ì •ì±…ì— ì˜í•´ ê³ ê°ì´ êµ¬ì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€</summary>
      
    
    
    
    
    <category term="EC2" scheme="https://kdevkr.github.io/tags/EC2/"/>
    
    <category term="S3" scheme="https://kdevkr.github.io/tags/S3/"/>
    
  </entry>
  
  <entry>
    <title>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°(ì½˜ì†”) í—ˆìš©í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/allow-ec2-instance-connect/"/>
    <id>https://kdevkr.github.io/allow-ec2-instance-connect/</id>
    <published>2021-09-26T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°(EC2 Instance Connect) ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì€ SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ EC2 ì½˜ì†”ì„ í†µí•´ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.</p><h2 id="EC2-ì¸ìŠ¤í„´ìŠ¤-ì—°ê²°"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-ì—°ê²°" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°</h2><p><strong>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°</strong>ì€ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì„ í†µí•´ í¼ë¸”ë¦­ IPv4 ì£¼ì†Œê°€ í• ë‹¹ëœ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-instance-connect-methods.html#ec2-instance-connect-connecting-console">EC2 Instance Connectë¥¼ ì‚¬ìš©í•œ ì—°ê²°</a> ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>í¼ë¸”ë¦­ IPv4 ì£¼ì†Œê°€ í• ë‹¹ëœ Amazon Linux 2 ë˜ëŠ” Ubuntu 16.04 ì´ìƒì˜ ì¸ìŠ¤í„´ìŠ¤ë¼ë©´ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì—ì„œ ì œê³µí•˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ì¸ë°”ìš´ë“œ-SSH-íŠ¸ë˜í”½-í—ˆìš©"><a href="#ì¸ë°”ìš´ë“œ-SSH-íŠ¸ë˜í”½-í—ˆìš©" class="headerlink" title="ì¸ë°”ìš´ë“œ SSH íŠ¸ë˜í”½ í—ˆìš©"></a>ì¸ë°”ìš´ë“œ SSH íŠ¸ë˜í”½ í—ˆìš©</h3><p>ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë³´ì•ˆ ê·¸ë£¹ì—ëŠ” SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” <strong>EC2_INSTANCE_CONNECTë¼ëŠ” ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” IP ëŒ€ì—­ì— ëŒ€í•˜ì—¬ SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•˜ë„ë¡ í—ˆìš©</strong>í•´ì•¼í•©ë‹ˆë‹¤.</p><p>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” IP ëŒ€ì—­ì€ <a href="https://ip-ranges.amazonaws.com/ip-ranges.json">AWSIP ì£¼ì†Œ ë²”ìœ„</a>ì—ì„œ EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì™€ VPCê°€ ìƒì„±ëœ regionì— ëŒ€í•˜ì—¬ í•„í„°ë§ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-01.png"></p><p>ë‹¤í–‰íˆë„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ë‹¤ë¥´ê²Œ EC2_INSTANCE_CONNECTëŠ” ë¦¬ì „ë³„ë¡œ í•˜ë‚˜ì´ë¯€ë¡œ <strong>13.209.1.56/29</strong> IP ëŒ€ì—­ì„ SSH íŠ¸ë˜í”½ìœ¼ë¡œ ìˆ˜ì‹ í•˜ë„ë¡ í—ˆìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p><p>íšŒì‚¬ì—ì„œ ì§€ê¸‰ë°›ì€ êµ¬í˜• ë§¥ë¶ì—ì„œ <a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ec2-instance-connect-troubleshooting/">AWS ë¬¸ì„œì—ì„œ ì•Œë ¤ì£¼ëŠ” ë‹¤ìŒì˜ ëª…ë ¹ì–´</a>ë¥¼ ì³ë´ë„ í•˜ë‚˜ë§Œ ë‚˜ì˜µë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -s https://ip-ranges.amazonaws.com/ip-ranges.json| jq -r <span class="string">&#x27;.prefixes[] | select(.region==&quot;us-east-1&quot;) | select(.service==&quot;EC2_INSTANCE_CONNECT&quot;) | .ip_prefix&#x27;</span></span><br><span class="line">13.209.1.56/29</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-02.png"></p><p>ìœ„ì™€ ê°™ì´ 13.209.1.56/29 ëŒ€ì—­ì— ëŒ€í•œ SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì˜€ìœ¼ë‹ˆ ì´ì œ ì´ ë³´ì•ˆê·¸ë£¹ì„ ì¸ìŠ¤í„´ìŠ¤ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p><h3 id="ìƒ˜í”Œ-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±"><a href="#ìƒ˜í”Œ-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±" class="headerlink" title="ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±"></a>ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</h3><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-03.png"></p><p>ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë³´ì•ˆ ê·¸ë£¹ì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ SSH íŠ¸ë˜í”½ì— ëŒ€í•´ì„œ í—ˆìš©í•˜ì§€ ì•Šì€ ìƒíƒœì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì„ ì‹œë„í•˜ë©´ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-04.png"></p><p>ì´ì œ ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ì— ec2-instance-connect ë³´ì•ˆê·¸ë£¹ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-05.png"></p><p>ë‹¤ì‹œ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ìœ¼ë¡œ ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-06.png"></p><p>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì˜ IP ëŒ€ì—­ì„ í—ˆìš©í•˜ì˜€ê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ ì ‘ì†ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/allow-ec2-instance-connect/complete.gif"></p><p>ë³´ì•ˆì„ ì¤‘ìš”ì‹œí•˜ëŠ” íšŒì‚¬ë¼ë©´ ëª¨ë“  IP ëŒ€ì—­ì— ëŒ€í•˜ì—¬ SSH ì ‘ì†ì„ í—ˆìš©í•˜ì§€ ì•Šê³  <strong>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì™€ íšŒì‚¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” IP ëŒ€ì—­ì„ í—ˆìš©í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥</strong>í•©ë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°(EC2 Instance Connect) ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì€ SSH í´</summary>
      
    
    
    
    
    <category term="AWS" scheme="https://kdevkr.github.io/tags/AWS/"/>
    
    <category term="EC2" scheme="https://kdevkr.github.io/tags/EC2/"/>
    
  </entry>
  
  <entry>
    <title>ì—”ì§„ì—‘ìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</title>
    <link href="https://kdevkr.github.io/reverse-proxy-using-nginx/"/>
    <id>https://kdevkr.github.io/reverse-proxy-using-nginx/</id>
    <published>2021-09-25T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p><img data-src="https://digital.com/wp-content/uploads/what-is-nginx.png"></p><p>ì˜¤ëŠ˜ì€ ì›¹ ì„œë¹„ìŠ¤ ì¸í”„ë¼ì—ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Nginxì™€ í•¨ê»˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.</p><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>NginxëŠ” ì •ì  íŒŒì¼ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” HTTP ì›¹ ì„œë²„ì…ë‹ˆë‹¤. ìµœê·¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ë°°í¬í•˜ëŠ” ê²½ìš° ë‹¨ë…ìœ¼ë¡œ êµ¬ì„±í•˜ì§€ ì•Šê³  Nginxë¥¼ í•¨ê»˜ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ Elastic Beanstalk í™˜ê²½ì—ì„œëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì„ ìœ„í•˜ì—¬ Nginxë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì•ì—ì„œ ë¨¼ì € íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p><h3 id="ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ"><a href="#ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ" class="headerlink" title="ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ"></a>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</h3><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œëŠ” <strong>ì‚¬ìš©ìì˜ ìš”ì²­ì— ëŒ€í•œ ì‚¬í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬ë˜ë„ë¡ í•˜ëŠ” ê²ƒ</strong>ì„ ë§í•©ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì˜ ì¥ì ì€ ì‚¬ìš©ìì—ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì‹¤í–‰ë˜ëŠ” ì•„ì´í”¼ ë˜ëŠ” í¬íŠ¸ë¥¼ ê³µê°œí•˜ì§€ ì•Šê±°ë‚˜ ì˜ëª»ëœ ìš”ì²­ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê¹Œì§€ ì „ë‹¬ë˜ì§€ ì•Šë„ë¡í•˜ì—¬ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><h3 id="ë¡œë“œ-ë°¸ëŸ°ì‹±"><a href="#ë¡œë“œ-ë°¸ëŸ°ì‹±" class="headerlink" title="ë¡œë“œ ë°¸ëŸ°ì‹±"></a>ë¡œë“œ ë°¸ëŸ°ì‹±</h3><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•¨ìœ¼ë¡œì¨ ì‚¬ìš©ìëŠ” íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì§ì ‘ ìš”ì²­í•˜ëŠ” êµ¬ì¡°ê°€ ì•„ë‹ˆë¯€ë¡œ ë™ì‹œì— ë°œìƒí•˜ëŠ” ìˆ˜ ë§ì€ ì›¹ ìš”ì²­ì„ 1ê°œ ì´ìƒìœ¼ë¡œ ì‹¤í–‰ëœ ë‹¤ìˆ˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ <strong>ë¡œë“œë°¸ëŸ°ì‹±(íŠ¸ë˜í”½ì„ ë¶„ì‚°)</strong> í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ëŒ€í•œ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë¬¼ë¡ , ì—í”½ ê²Œì„ì¦ˆì˜ <a href="https://www.epicgames.com/fortnite/ko/news/postmortem-of-service-outage-at-3-4m-ccu">340ë§Œ ë™ì ‘ì ì´í›„ ì„œë¹„ìŠ¤ ë‹¤ìš´ ê´€ë ¨ ì‚¬í›„ ë¶„ì„ ë‚´ìš©</a>ì²˜ëŸ¼ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•œë‹¤ê³ í•´ì„œ ëª¨ë“  íŠ¸ë˜í”½ì„ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</p><h3 id="SSL-ì˜¤í”„ë¡œë“œ"><a href="#SSL-ì˜¤í”„ë¡œë“œ" class="headerlink" title="SSL ì˜¤í”„ë¡œë“œ"></a>SSL ì˜¤í”„ë¡œë“œ</h3><p>Nginxë¡œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•¨ìœ¼ë¡œì¨ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì‚¬í›„ì²˜ë¦¬ ì¤‘ í•˜ë‚˜ëŠ” <strong>SSL ì˜¤í”„ë¡œë“œ</strong>ì…ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ëŠ” ì›¹ ì„œë²„ì—ì„œ SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ê³  <a href="https://www.f5.com/services/resources/glossary/ssl-termination">SSL Termination</a>ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ íŠ¸ë˜í”½ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ìˆ˜í–‰í•˜ë˜ ë¶€í•˜ì™€ ê´€ë¦¬ í¬ì¸íŠ¸ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h3 id="ì •ì -íŒŒì¼-ìºì‹œ"><a href="#ì •ì -íŒŒì¼-ìºì‹œ" class="headerlink" title="ì •ì  íŒŒì¼ ìºì‹œ"></a>ì •ì  íŒŒì¼ ìºì‹œ</h3><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ë°°í¬í•˜ëŠ” ì •ì  íŒŒì¼ì— ëŒ€í•´ì„œ Nginx ìì²´ì ìœ¼ë¡œ ìºì‹œí•˜ì—¬ ì •ì  íŒŒì¼ì„ ì‘ë‹µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì´ ë§ì•„ì§ˆ ê²½ìš° ì •ì  íŒŒì¼ì„ ì‘ë‹µí•˜ê¸° ìœ„í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ë¶€ë‹´ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ì€ íŠ¸ë˜í”½ì„ ì ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì›¹ ì„œë²„ì—ì„œ ì •ì  íŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ë¶€ë‹´ì„ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><p>ì°½ì²œí–¥ë¡œë‹˜ì˜ <a href="https://jojoldu.tistory.com/60">Nginx Cache ë¬¸ì œ í•´ê²° ì‹œë¦¬ì¦ˆ</a>ì²˜ëŸ¼ ìºì‹œë¥¼ ì˜ êµ¬ì„±í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h2 id="Nginx-ë„ì»¤-ì»¨í…Œì´ë„ˆ-í•™ìŠµ"><a href="#Nginx-ë„ì»¤-ì»¨í…Œì´ë„ˆ-í•™ìŠµ" class="headerlink" title="Nginx ë„ì»¤ ì»¨í…Œì´ë„ˆ í•™ìŠµ"></a>Nginx ë„ì»¤ ì»¨í…Œì´ë„ˆ í•™ìŠµ</h2><p>ë„ì»¤ëŠ” ì–´ë– í•œ ê¸°ìˆ ì„ í•™ìŠµí•˜ê¸° ìœ„í•œ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸°ì— ì í•©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ í•¨ê»˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” Nginxë¥¼ ì„¤ì •í•´ë³´ë©° í•™ìŠµí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p>ì €ì˜ í•™ìŠµ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. í™˜ê²½ì´ ë‹¤ë¥¸ ê²½ìš° ë‹¤ë¥¸ ë¶€ë¶„ì´ ì¡´ì¬í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. </p><ul><li>Docker version 20.10.8, build 3967b7d  </li><li>Nginx 1.21.3  </li><li>Amazon Corretto 11  </li></ul><p>ê·¸ë¦¬ê³  í•™ìŠµì— í™œìš©ëœ íŒŒì¼ë“¤ì€ <a href="https://github.com/kdevkr/nginx.conf">ê¹ƒí—ˆë¸Œ</a>ì— ê³µìœ ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.</p><h3 id="ê¸°ë³¸-ì»¨í…Œì´ë„ˆ-í™˜ê²½"><a href="#ê¸°ë³¸-ì»¨í…Œì´ë„ˆ-í™˜ê²½" class="headerlink" title="ê¸°ë³¸ ì»¨í…Œì´ë„ˆ í™˜ê²½"></a>ê¸°ë³¸ ì»¨í…Œì´ë„ˆ í™˜ê²½</h3><p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Nginxê°€ êµ¬ë™ë˜ë„ë¡ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span> </span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.21.3-alpine</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">443</span><span class="string">:443</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">amazoncorretto:11-alpine</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:8080</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">&#x27;java -jar /etc/app.jar&#x27;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./demo-0.0.1-SNAPSHOT.jar:/etc/app.jar</span></span><br></pre></td></tr></table></figure><p>ë„ì»¤ ì»´í¬ì¦ˆ ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">docker compose up <span class="literal">-d</span></span><br><span class="line">[+] Running <span class="number">3</span>/<span class="number">3</span></span><br><span class="line"> - Network nginx_default    Created</span><br><span class="line"> - Container nginx_nginx_1  Started</span><br><span class="line"> - Container nginx_app_1    Started</span><br></pre></td></tr></table></figure><p>ì œ ì»´í“¨í„° <strong>í˜¸ìŠ¤íŠ¸ íŒŒì¼ì— 127.0.0.1ì— ëŒ€í•˜ì—¬ mambo.krê°€ ì§€ì •</strong>ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ Nginxê°€ 80í¬íŠ¸ì— ëŒ€í•œ ìš”ì²­ì— ëŒ€í•´ ê¸°ë³¸ í˜ì´ì§€ë¥¼ ì‘ë‹µí•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-02.png"></p><h3 id="ê¸°ë³¸-Nginx-ì„¤ì •"><a href="#ê¸°ë³¸-Nginx-ì„¤ì •" class="headerlink" title="ê¸°ë³¸ Nginx ì„¤ì •"></a>ê¸°ë³¸ Nginx ì„¤ì •</h3><p>ë„ì»¤ ì»´í¬ì¦ˆ ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆ ì§„ì… í›„ ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ì–´ìˆëŠ” Nginx ì„¤ì •ì„ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">docker compose exec nginx sh</span><br><span class="line">/ <span class="comment"># cat /etc/nginx/nginx.conf</span></span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-03.png"></p><p>80í¬íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì›¹ ì„œë²„ ì„¤ì •ì€ <strong>/etc/nginx/conf.d/default.conf</strong>ì— ìœ„ì¹˜í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ default.confì— ì •ì˜ëœ ë‚´ìš© ì¤‘ ì¼ë¶€ì…ë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">/etc/nginx/conf.d <span class="comment"># cat default.conf</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    listen  [::]:<span class="number">80</span>;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>server ë¸”ë¡ì„ í†µí•´ 80í¬íŠ¸ë¥¼ ìˆ˜ì‹ (listen)í•˜ì˜€ê³  ë£¨íŠ¸ ê²½ë¡œ(/)ì— ëŒ€í•œ ìš”ì²­ì„ <strong>/usr/share/nginx/htmlì— ìœ„ì¹˜í•œ index.html</strong>ì´ë¼ëŠ” ì •ì  íŒŒì¼ì„ ì‘ë‹µí•˜ë„ë¡ ì •ì˜ë˜ì–´ìˆìŠµë‹ˆë‹¤. </p><h3 id="ì‚¬ìš©ì-ì •ì˜-Nginx-ì„¤ì •"><a href="#ì‚¬ìš©ì-ì •ì˜-Nginx-ì„¤ì •" class="headerlink" title="ì‚¬ìš©ì ì •ì˜ Nginx ì„¤ì •"></a>ì‚¬ìš©ì ì •ì˜ Nginx ì„¤ì •</h3><p>ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ì–´ìˆëŠ” nginx.confë¥¼ ë³¼ë¥¨ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•´ë³´ê² ìŠµë‹ˆë‹¤. ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì— Nginx ì„œë¹„ìŠ¤ì— ë³¼ë¥¨ì„ ì§€ì •í•˜ì—¬ ë¡œì»¬ íŒŒì¼ë¡œ ì €ì¥ë˜ì–´ìˆëŠ” nginx.confë¥¼ ì§€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span> </span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.21.3-alpine</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">443</span><span class="string">:443</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">  <span class="comment">#app:</span></span><br><span class="line">  <span class="comment">#  ...</span></span><br></pre></td></tr></table></figure><p>í˜¸ìŠ¤íŠ¸ì˜ 443í¬íŠ¸ë¥¼ Nginx ì„œë¹„ìŠ¤ì— ë°”ì¸ë”©í•˜ì˜€ìœ¼ë¯€ë¡œ 443í¬íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡ ì •ì˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> localhost <span class="number">127.0.0.1</span> mambo.kr;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/nginx/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/nginx/server.key;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://app:8080;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œâ€¦</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">nginx: [<span class="type">emerg</span>] no <span class="string">&quot;events&quot;</span> section <span class="keyword">in</span> configuration</span><br></pre></td></tr></table></figure><p>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë„¤ìš”. nginx.confì— events ë¸”ë¡ì€ í•„ìˆ˜ë¡œ ì¡´ì¬í•´ì•¼í•˜ëŠ” ë“¯ í•©ë‹ˆë‹¤.</p><h4 id="í”„ë¡œì„¸ìŠ¤-ë°-ì²˜ë¦¬-ì˜µì…˜"><a href="#í”„ë¡œì„¸ìŠ¤-ë°-ì²˜ë¦¬-ì˜µì…˜" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ë° ì²˜ë¦¬ ì˜µì…˜"></a>í”„ë¡œì„¸ìŠ¤ ë° ì²˜ë¦¬ ì˜µì…˜</h4><p>NginxëŠ” ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤ì™€ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ì‹¤ì œë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì‚¬ìš©ê°€ëŠ¥í•œ CPU ì½”ì–´ ìˆ˜ ë§Œí¼ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë¥¼ í• ë‹¹í•˜ëŠ”ê²Œ ì¢‹ìœ¼ë©° ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë³„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì—´ë¦° íŒŒì¼ ê°œìˆ˜ ì œí•œì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">worker_cpu_affinity</span> auto;</span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">65536</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">    <span class="attribute">use</span> <span class="literal">epoll</span>;</span><br><span class="line">    <span class="attribute">multi_accept</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-01.png" alt="Optimizations - Event Models"></p><p>ìš´ì˜ì²´ì œë³„ <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/optimizations/#event-models">íš¨ìœ¨ì ì¸ ì—°ê²° ì²˜ë¦¬ ë°©ì‹</a>ì´ ìˆìœ¼ë©° ë¦¬ëˆ…ìŠ¤ ì»¤ë„ 2.6+ì—ì„œëŠ” <strong>epoll</strong>ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>Nginx ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì€ ìƒíƒœì´ë¯€ë¡œ ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">docker compose up <span class="literal">-d</span></span><br><span class="line">[+] Running <span class="number">2</span>/<span class="number">2</span></span><br><span class="line"> - Container nginx_nginx_1  Started</span><br><span class="line"> - Container nginx_app_1    Running</span><br></pre></td></tr></table></figure><p>ì˜ ì‹¤í–‰ëœê²ƒìœ¼ë¡œ ë³´ì´ë‹ˆ <a href="https://mambo.krìœ¼ë¡œ/">https://mambo.krìœ¼ë¡œ</a> ì ‘ì†í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-04.png"></p><p>443 í¬íŠ¸ë¡œ ìš”ì²­ëœ íŠ¸ë˜í”½ì´ Nginxë¥¼ ê²½ìœ í•˜ì—¬ 8080í¬íŠ¸ë¡œ ì‹¤í–‰ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì „ë‹¬ë˜ê³  ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ë°”ë¡œ ì´ê²ƒì„ <strong>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</strong>ë¼ê³  í•©ë‹ˆë‹¤.</p><h4 id="ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ-1"><a href="#ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ-1" class="headerlink" title="ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ"></a>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</h4><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì–´ë””ì„œ ìš”ì²­í–ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ Nginxì™€ ê°™ì€ ë¦¬ë²„ì‹œ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” ì›¹ ì„œë²„ì—ì„œëŠ” í”„ë¡ì‹œ ê´€ë ¨ í—¤ë”ë¥¼ í•¨ê»˜ ì „ë‹¬í•˜ì—¬ ì–´ë””ì„œ ìš”ì²­ë˜ì—ˆëŠ”ì§€ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> localhost <span class="number">127.0.0.1</span> mambo.kr;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/nginx/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/nginx/server.key;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://app:8080;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ì›¹ì†Œì¼“-í”„ë¡ì‹œ"><a href="#ì›¹ì†Œì¼“-í”„ë¡ì‹œ" class="headerlink" title="ì›¹ì†Œì¼“ í”„ë¡ì‹œ"></a>ì›¹ì†Œì¼“ í”„ë¡ì‹œ</h4><p>HTTP 1.1 í”„ë¡œí† ì½œì€ Hop-By-Hopì´ë¼ê³  í•˜ëŠ” Upgrade í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë„¥ì…˜ì„ ë³€ê²½í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì œê³µí•©ë‹ˆë‹¤. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism#upgrading_to_a_websocket_connection">Upgrading to a WebSocket connection</a>ê³¼ <a href="http://nginx.org/en/docs/http/websocket.html">WebSocket proxying</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì›¹ì†Œì¼“ í”„ë¡ì‹œì— ëŒ€í•œ ì„¤ì •ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">location</span> /ws/ &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://backend;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade $http_upgrade;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span> <span class="number">65s</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>í”„ë¡ì‹œ ì„œë²„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 60ì´ˆ ì´ë‚´ì— ì „ë‹¬ë˜ëŠ” ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ì—°ê²°ì„ í•´ì§€í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 1ë¶„ë§ˆë‹¤ ì›¹ì†Œì¼“ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°ë¥¼ ìœ„í•´ proxy_read_timeoutì„ ì¡°ì •í•´ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h4 id="ì´ë²¤íŠ¸-ìŠ¤íŠ¸ë¦¼-í”„ë¡ì‹œ"><a href="#ì´ë²¤íŠ¸-ìŠ¤íŠ¸ë¦¼-í”„ë¡ì‹œ" class="headerlink" title="ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ í”„ë¡ì‹œ"></a>ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ í”„ë¡ì‹œ</h4><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì—ì„œ SSE(Server Sent Event)ì™€ ê°™ì€ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë²„í¼ë§ ì˜µì…˜ì„ ë¹„í™œì„±í™” í•´ì•¼í•©ë‹ˆë‹¤.</p><ul><li><a href="https://stackoverflow.com/questions/13672743/eventsource-server-sent-events-through-nginx">EventSource / Server-Sent Events through Nginx</a></li><li><a href="https://serverfault.com/questions/801628/for-server-sent-events-sse-what-nginx-proxy-configuration-is-appropriate">For Server-Sent Events (SSE) what Nginx proxy configuration is appropriate?</a></li></ul><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_buffering</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">proxy_cache</span> <span class="literal">off</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="HTTPS-ë¦¬ë‹¤ì´ë ‰íŠ¸"><a href="#HTTPS-ë¦¬ë‹¤ì´ë ‰íŠ¸" class="headerlink" title="HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸"></a>HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸</h4><p>ì¼ë°˜ HTTPë¥¼ ì‚¬ìš©í•˜ì—¬ 80í¬íŠ¸ë¡œ ìš”ì²­í•œ ê²ƒì„ HTTPSë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìœ ë„í•˜ê¸° ìœ„í•´ì„œ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‘ë‹µì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> _;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://$host$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ì •ì -íŒŒì¼-ë°°í¬"><a href="#ì •ì -íŒŒì¼-ë°°í¬" class="headerlink" title="ì •ì  íŒŒì¼ ë°°í¬"></a>ì •ì  íŒŒì¼ ë°°í¬</h4><p>ì¶”ê°€ì ìœ¼ë¡œ ì •ì  íŒŒì¼ì´ í¬í•¨ëœ í´ë”ë¥¼ ë³¼ë¥¨ìœ¼ë¡œ ì§€ì •í•˜ì—¬ Nginxì—ì„œ ì •ì  íŒŒì¼ì„ ì‘ë‹µí•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span> </span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.21.3-alpine</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">443</span><span class="string">:443</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./server.crt:/etc/nginx/server.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./server.key:/etc/nginx/server.key</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./static:/etc/nginx/static</span></span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">worker_cpu_affinity</span> auto;</span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">65536</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">    <span class="attribute">use</span> <span class="literal">epoll</span>;</span><br><span class="line">    <span class="attribute">multi_accept</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> _;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> https://$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> localhost <span class="number">127.0.0.1</span> mambo.kr;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/nginx/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/nginx/server.key;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://app:8080;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /dist/ &#123;</span><br><span class="line">            <span class="attribute">alias</span> /etc/nginx/static/;</span><br><span class="line">            <span class="attribute">limit_except</span> GET &#123;</span><br><span class="line">                <span class="attribute">deny</span> all;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-05.png"></p><p>ì •ì  íŒŒì¼ê¹Œì§€ ì‘ë‹µí•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p><h3 id="Nginx-ì„¤ì •-ìµœì í™”"><a href="#Nginx-ì„¤ì •-ìµœì í™”" class="headerlink" title="Nginx ì„¤ì • ìµœì í™”"></a>Nginx ì„¤ì • ìµœì í™”</h3><p>ì‚¬ìš©ì ì •ì˜í•œ Nginx ì„¤ì •ë§Œìœ¼ë¡œë„ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ì •ì  íŒŒì¼ì„ ë°°í¬í•˜ëŠ”ë°ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Nginxì—ì„œëŠ” ë” íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ë“¤ì„ ì ìš©í•´ë³´ë©´ì„œ ìµœì í™”í•´ë³´ë„ë¡ í•©ì‹œë‹¤.</p><p>Nginx ì„¤ì • ìµœì í™”ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì˜ ê¸€ì„ ì°¸ê³ í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.</p><ul><li><a href="https://github.com/denji/nginx-tuning/blob/master/README.md">NGINX Tuning For Best Performance</a>  </li><li><a href="https://couplewith.tistory.com/m/entry/%EA%BF%80%ED%8C%81-%EA%B3%A0%EC%84%B1%EB%8A%A5-Nginx%EB%A5%BC%EC%9C%84%ED%95%9C-%ED%8A%9C%EB%8B%9D-1-%EB%94%94%EC%8A%A4%ED%81%AC%EC%9D%98-IO-%EB%B3%91%EB%AA%A9-%EC%A4%84%EC%9D%B4%EA%B8%B0?category=212810">[ê¿€íŒ] ê³ ì„±ëŠ¥ Nginxë¥¼ìœ„í•œ íŠœë‹</a></li></ul><h4 id="TCP-ì˜µì…˜"><a href="#TCP-ì˜µì…˜" class="headerlink" title="TCP ì˜µì…˜"></a>TCP ì˜µì…˜</h4><p><a href="https://thoughts.t37.net/nginx-optimization-understanding-sendfile-tcp-nodelay-and-tcp-nopush-c55cdd276765">Nginx Optimization: understanding sendfile, tcp_nodelay and tcp_nopush</a>ì—ì„œëŠ” TCP ì˜µì…˜ì„ ì§€ì •í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì„¤ëª…í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì´ ë¹ ë¥¸ ê²½ìš° TCP ìŠ¤íƒì—ì„œ Nagle ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ì••ì¶•-ì˜µì…˜"><a href="#ì••ì¶•-ì˜µì…˜" class="headerlink" title="ì••ì¶• ì˜µì…˜"></a>ì••ì¶• ì˜µì…˜</h4><p>ì›¹ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ëŠ” ê²ƒì€ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì„ ì¤„ì´ê³  ë¹ ë¥´ê²Œ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤. ì„œë²„ ì„±ëŠ¥ì— ë”°ë¼ ì••ì¶• ë ˆë²¨ì„ ìµœëŒ€í•œìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜í•œ, ì‘ì€ í¬ê¸°ì— ë°ì´í„°ì— ëŒ€í•˜ì—¬ ì••ì¶•ì„ ì‹œë„í•˜ëŠ” ê²ƒë„ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">gzip_min_length</span> <span class="number">1k</span>;</span><br><span class="line">    <span class="attribute">gzip_comp_level</span> <span class="number">9</span>;</span><br><span class="line">    <span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">gzip_disable</span> msie6;</span><br><span class="line">    <span class="attribute">gzip_proxied</span> expired <span class="literal">no</span>-cache <span class="literal">no</span>-store private auth;</span><br><span class="line">    <span class="attribute">gzip_types</span></span><br><span class="line">        <span class="comment"># text/html is always compressed by HttpGzipModule</span></span><br><span class="line">        text/css</span><br><span class="line">        text/javascript</span><br><span class="line">        text/xml</span><br><span class="line">        text/plain</span><br><span class="line">        application/javascript</span><br><span class="line">        application/json</span><br><span class="line">        application/xml</span><br><span class="line">        font/truetype</span><br><span class="line">        font/opentype</span><br><span class="line">        application/vnd.ms-fontobject</span><br><span class="line">        image/svg+xml;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì¼ë°˜ì ìœ¼ë¡œ í…ìŠ¤íŠ¸ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.</p><h4 id="ë¡œê·¸-ì˜µì…˜"><a href="#ë¡œê·¸-ì˜µì…˜" class="headerlink" title="ë¡œê·¸ ì˜µì…˜"></a>ë¡œê·¸ ì˜µì…˜</h4><p>ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ I/Oë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">error_log</span> /var/log/nginx/error.log <span class="literal">crit</span>;</span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">access_log</span> /var/log/nginx/access.log;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ë³´ì•ˆ-ì˜µì…˜"><a href="#ë³´ì•ˆ-ì˜µì…˜" class="headerlink" title="ë³´ì•ˆ ì˜µì…˜"></a>ë³´ì•ˆ ì˜µì…˜</h4><p>ë§ì€ ì‚¬ëŒë“¤ì´ server_tokens ì˜µì…˜ì„ ë¹„í™œì„±í™”í•˜ì—¬ ì‘ë‹µ í—¤ë”ì— Nginx ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šë„ë¡ ê¶Œì¥í•©ë‹ˆë‹¤. ê³µê²©ìëŠ” Nginxì˜ íŠ¹ì • ë²„ì „ì„ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë” ë§ì€ ì·¨ì•½ì ì— ëŒ€í•œ ê³µê²©ì„ ì‹œë„í•´ì•¼í•©ë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="í´ë¼ì´ì–¸íŠ¸-ì˜µì…˜"><a href="#í´ë¼ì´ì–¸íŠ¸-ì˜µì…˜" class="headerlink" title="í´ë¼ì´ì–¸íŠ¸ ì˜µì…˜"></a>í´ë¼ì´ì–¸íŠ¸ ì˜µì…˜</h4><p>ì—°ê²° ìœ ì§€ í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì™€ ìµœëŒ€ ìœ ì§€ ì‹œê°„ ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ í¬ê¸°ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span> <span class="number">65</span>;</span><br><span class="line">    <span class="attribute">keepalive_requests</span> <span class="number">10000</span>;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">100m</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ë¦¬ëˆ…ìŠ¤-ì»¤ë„-íŒŒë¼ë¯¸í„°"><a href="#ë¦¬ëˆ…ìŠ¤-ì»¤ë„-íŒŒë¼ë¯¸í„°" class="headerlink" title="ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°"></a>ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°</h4><p>Nginx ì˜µì…˜ì„ ì§€ì •í•˜ë”ë¼ë„ ì‹¤ì œë¡œ í—ˆìš©í•  ìˆ˜ ìˆëŠ”ì§€ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°ë¥¼ ê²€í† í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><ul><li><a href="https://ma.ttias.be/linux-increase-ip_local_port_range-tcp-port-range/">Linux increase ip_local_port_range TCP port range</a></li><li><a href="https://couplewith.tistory.com/entry/%EA%BF%80%ED%8C%81-%EA%B3%A0%EC%84%B1%EB%8A%A5-Nginx%EB%A5%BC%EC%9C%84%ED%95%9C-%ED%8A%9C%EB%8B%9D-3-TCP-%EA%B4%80%EB%A0%A8-%EC%B2%98%EB%A6%AC%EB%9F%89-%EB%8A%98%EB%A6%AC%EA%B8%B0-%EB%A6%AC%EB%88%85%EC%8A%A4%EC%BB%A4%EB%84%90%ED%8A%9C%EB%8B%9D">TCP ê´€ë ¨ ì²˜ë¦¬ëŸ‰ ëŠ˜ë¦¬ê¸° - ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŠœë‹</a></li></ul><h3 id="Nginx-ì„¤ì •-ë§ˆë¬´ë¦¬"><a href="#Nginx-ì„¤ì •-ë§ˆë¬´ë¦¬" class="headerlink" title="Nginx ì„¤ì • ë§ˆë¬´ë¦¬"></a>Nginx ì„¤ì • ë§ˆë¬´ë¦¬</h3><p>ì•Œì•„ë³¸ ë‚´ìš©ì„ ì¡°í•©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Nginx ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">user</span> nginx;</span><br><span class="line"></span><br><span class="line"><span class="comment"># í”„ë¡œì„¸ìŠ¤ ì˜µì…˜</span></span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">worker_cpu_affinity</span> auto;</span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">65536</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">    <span class="attribute">use</span> <span class="literal">epoll</span>;</span><br><span class="line">    <span class="attribute">multi_accept</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">pid</span> /var/run/nginx.pid;</span><br><span class="line"><span class="attribute">error_log</span> /var/log/nginx/error.log <span class="literal">crit</span>;</span><br><span class="line"><span class="comment">#thread_pool backend threads=32 max_queue=65536;</span></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span> application/octet-stream;</span><br><span class="line">    <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">10m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">upstream</span> backend &#123;</span><br><span class="line">        <span class="attribute">server</span> app:<span class="number">8080</span>;</span><br><span class="line">        <span class="attribute">keepalive</span> <span class="number">128</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> _;</span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> https://$host$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS ë° HTTP2 ì§€ì›</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl http2;</span><br><span class="line">        <span class="attribute">server_name</span> localhost <span class="number">127.0.0.1</span> mambo.kr;</span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/nginx/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/nginx/server.key;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</span></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://backend;</span><br><span class="line">            <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">            <span class="attribute">proxy_buffering</span> <span class="literal">off</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">            <span class="comment">#aio threads=backend;</span></span><br><span class="line">            <span class="attribute">access_log</span> /var/log/nginx/access.log;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ë¦¬ë²„ìŠ¤ ì›¹ì†Œì¼“ í”„ë¡ì‹œ</span></span><br><span class="line">        <span class="attribute">location</span> /ws/ &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://backend;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            <span class="comment"># hop-by-hop</span></span><br><span class="line">            <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Upgrade $http_upgrade;</span><br><span class="line">            <span class="attribute">proxy_read_timeout</span> <span class="number">65s</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /dist/ &#123;</span><br><span class="line">            <span class="attribute">alias</span> /etc/nginx/static/;</span><br><span class="line">            <span class="attribute">limit_except</span> GET &#123;</span><br><span class="line">                <span class="attribute">deny</span> all;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Optimization</span></span><br><span class="line">    <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">keepalive_timeout</span> <span class="number">65s</span>;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">100m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># TCP ì˜µì…˜</span></span><br><span class="line">    <span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Gzip ì••ì¶• ì˜µì…˜</span></span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">gzip_min_length</span> <span class="number">10k</span>;</span><br><span class="line">    <span class="attribute">gzip_comp_level</span> <span class="number">9</span>;</span><br><span class="line">    <span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">gzip_disable</span> msie6;</span><br><span class="line">    <span class="attribute">gzip_proxied</span> expired <span class="literal">no</span>-cache <span class="literal">no</span>-store private auth;</span><br><span class="line">    <span class="attribute">gzip_types</span></span><br><span class="line">        <span class="comment"># text/html is always compressed</span></span><br><span class="line">        text/css</span><br><span class="line">        text/javascript</span><br><span class="line">        text/xml</span><br><span class="line">        text/plain</span><br><span class="line">        application/javascript</span><br><span class="line">        application/json</span><br><span class="line">        application/xml</span><br><span class="line">        font/truetype</span><br><span class="line">        font/opentype</span><br><span class="line">        application/vnd.ms-fontobject</span><br><span class="line">        image/svg+xml;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ë¹„í™œì„±í™”</span></span><br><span class="line">    <span class="attribute">autoindex</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ë˜ì–´ìˆëŠ” Nginx í”„ë¡œì„¸ìŠ¤ì— ë³€ê²½ëœ ì„¤ì •ì„ ë°˜ì˜í•˜ë©´ì„œ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">docker compose exec nginx nginx <span class="literal">-t</span></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line"></span><br><span class="line">docker compose exec nginx nginx <span class="literal">-s</span> reload</span><br><span class="line"><span class="number">2021</span>/<span class="number">09</span>/<span class="number">25</span> <span class="number">09</span>:<span class="number">38</span>:<span class="number">03</span> [<span class="type">notice</span>] <span class="number">34</span><span class="comment">#34: signal process started</span></span><br></pre></td></tr></table></figure><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&quot;https://digital.com/wp-content/uploads/what-is-nginx.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ì›¹ ì„œë¹„ìŠ¤ ì¸í”„ë¼ì—ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì„ ìœ„í•´ ì‚¬</summary>
      
    
    
    
    
    <category term="Nginx" scheme="https://kdevkr.github.io/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>ê°‘ìê¸° ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ì— ì‹¤íŒ¨í•œ ì´ìœ </title>
    <link href="https://kdevkr.github.io/why-fail-deploy-application/"/>
    <id>https://kdevkr.github.io/why-fail-deploy-application/</id>
    <published>2021-09-24T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.035Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ì–¼ë§ˆì „ê¹Œì§€ë§Œ í•´ë„ ì˜ ë™ì‘í•˜ë˜ ë°°í¬ í”„ë¡œì„¸ìŠ¤ê°€ ê°‘ìê¸° ì‹¤íŒ¨í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p><h2 id="ë¹Œë“œ-ë°-ë°°í¬-í™˜ê²½"><a href="#ë¹Œë“œ-ë°-ë°°í¬-í™˜ê²½" class="headerlink" title="ë¹Œë“œ ë° ë°°í¬ í™˜ê²½"></a>ë¹Œë“œ ë° ë°°í¬ í™˜ê²½</h2><p>íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì„œë¹„ìŠ¤ëŠ” Elastic Beanstalk í™˜ê²½ì˜ ìë°” SE í”Œë«í¼ìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìë°” SE í”Œë«í¼ì—ì„œëŠ” <strong>ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ê°€ëŠ¥í•œ WAR íŒŒì¼ë¡œ íŒ¨í‚¤ì§•í•˜ì—¬ Procfileì„ í†µí•´ ì‹¤í–‰</strong>í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ê°€ëŠ¥í•˜ë„ë¡ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ì„ ì‹¤í–‰í•˜ë„ë¡ Procfileì„ ë§Œë“¤ê³  Beanstalk í™˜ê²½ì„ í™•ì¥í•˜ê¸° ìœ„í•œ ì„¤ì • íŒŒì¼ë“¤ì„ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task procfile(<span class="attr">dependsOn:</span> bootJar) &#123;</span><br><span class="line">    doFirst &#123;</span><br><span class="line">        project.file(<span class="string">&quot;build/libs/Procfile&quot;</span>).text = <span class="string">&quot;web: java -Xmx3g -Dfile.encoding=UTF-8 -jar $&#123;bootJar.archiveFileName&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">task awsbuild(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> procfile) &#123;</span><br><span class="line">    println(<span class="string">&#x27;Build Version: &#x27;</span> + rootProject.version)</span><br><span class="line"></span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.platform&#x27;</span>) &#123;into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include <span class="string">&#x27;Procfile&#x27;</span></span><br><span class="line">        include <span class="string">&quot;$&#123;bootJar.archiveFileName&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    archiveBaseName.set(<span class="string">&#x27;beanstalk&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ì‹¤íŒ¨í•œ-ì´ìœ -1"><a href="#ì‹¤íŒ¨í•œ-ì´ìœ -1" class="headerlink" title="ì‹¤íŒ¨í•œ ì´ìœ  1"></a>ì‹¤íŒ¨í•œ ì´ìœ  1</h3><p>ê·¸ëŸ°ë° ì˜¤ëŠ˜ ê°‘ìê¸° ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ë˜ ë°°í¬ í”„ë¡œì„¸ìŠ¤ ê³¼ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ê°€ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/why-fail-deploy-application/reason-01.png"></p><p>ìœ„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ì„ ë•Œ íƒœìŠ¤í¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task awsbuild(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> procfile) &#123;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.platform&#x27;</span>) &#123;into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include(<span class="string">&#x27;Procfile&#x27;</span>)</span><br><span class="line">        include(bootJar.archiveName)</span><br><span class="line">    &#125;</span><br><span class="line">    baseName = <span class="string">&#x27;beanstalk&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê·¸ëŸ°ë° ìµœì¢…ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì„ í™•ì¸í•´ë³´ë‹ˆ <strong>bootJar.archiveName</strong>ìœ¼ë¡œ í¬í•¨ì‹œí‚¨ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§• íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê°‘ìê¸° ì™œ í¬í•¨ë˜ì§€ ì•ŠëŠ” ê²ƒ ì¼ê¹Œìš”? ì´ê²ƒì €ê²ƒ í™•ì¸í•´ë³´ë˜ ì¤‘ í•´ê²°ë°©ë²•ì€ ì•„ì£¼ ê°„ë‹¨í•˜ì˜€ëŠ”ë°ìš”. ë°”ë¡œ ë‹¤ìŒê³¼ ê°™ì´ include ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task awsbuild(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> procfile) &#123;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.platform&#x27;</span>) &#123;into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include <span class="string">&#x27;Procfile&#x27;</span></span><br><span class="line">        include <span class="string">&quot;$&#123;bootJar.archiveName&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    baseName = <span class="string">&#x27;beanstalk&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì•„ë¬´ë¦¬ë´ë„ ë¬´ìŠ¨ ì°¨ì´ì¸ì§€ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ ê°„ë‹¨íˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤. í•œê°€ì§€ ì˜ì‹¬ì´ ë˜ëŠ” ë¶€ë¶„ì€ Gradle Warpper ë²„ì „ì´ <strong>gradle-7.1-all</strong>ë¡œ ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ê²ƒ ì…ë‹ˆë‹¤. </p><h3 id="ì‹¤íŒ¨í•œ-ì´ìœ -2"><a href="#ì‹¤íŒ¨í•œ-ì´ìœ -2" class="headerlink" title="ì‹¤íŒ¨í•œ ì´ìœ  2"></a>ì‹¤íŒ¨í•œ ì´ìœ  2</h3><p>ê°„ì‹ íˆ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨í•˜ì—¬ ë‹¤ì‹œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í–ˆì§€ë§Œ ë‹¤ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ì„œ ë°°í¬ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/why-fail-deploy-application/reason-02.png"></p><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì€ ë¹„ì–´ìˆê±°ë‚˜ 524288000 ë°”ì´íŠ¸ë¥¼ ë„˜ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ Elastic Beanstalk ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì€ ìµœëŒ€ 512MBë¡œ ì œí•œëœë‹¤ëŠ” ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/why-fail-deploy-application/reason-03.png"></p><p>ë§Œë“¤ì–´ì§„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì´ ë¹„ì–´ìˆì„ ì´ìœ ê°€ ì—†ì—ˆê¸°ì— ìš©ëŸ‰ì„ í™•ì¸í•´ë³´ë‹ˆ 560MBë¥¼ ë„˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì˜ íŒŒì¼ì´ ì´ë ‡ê²Œ í´ ì´ìœ ê°€ ì—†ì—ˆëŠ”ë° ì˜ì•„í–ˆìŠµë‹ˆë‹¤. íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ ìì²´ ìš©ëŸ‰ì´ 520MBë¥¼ ë„˜ê³  ìˆìŒì„ í™•ì¸í•˜ê³  íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ì„ í’€ì–´ì„œ ë‚´ìš©ì„ ì‚´í´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ëœ í´ë”ì˜ ìš©ëŸ‰ì´ ìƒë‹¹í•œ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">total 964904</span><br><span class="line">-rw-r--r--  1 user  staff    14M Sep 24 11:31 ec2-2.17.29.jar</span><br><span class="line">-rw-r--r--  1 user  staff    11M Aug  9 12:29 elasticsearch-7.3.2.jar</span><br><span class="line">-rw-r--r--  1 user  staff   7.8M Aug  9 12:30 poi-ooxml-lite-5.0.0.jar</span><br><span class="line">-rw-r--r--  1 user  staff   7.2M Sep 24 11:31 sagemaker-2.17.29.jar</span><br><span class="line">-rw-r--r--  1 user  staff   5.7M Aug  9 12:30 bcprov-jdk15on-1.68.jar</span><br><span class="line">-rw-r--r--  1 user  staff   5.3M Sep 24 11:31 iot-2.17.29.jar</span><br><span class="line">-rw-r--r--  1 user  staff   5.1M Aug  9 12:30 org.eclipse.persistence.core-2.7.4.jar</span><br><span class="line">-rw-r--r--  1 user  staff   4.7M Sep 24 11:31 ssm-2.17.29.jar</span><br><span class="line">-rw-r--r--  1 user  staff   4.3M Aug  9 12:30 groovy-2.4.8.jar</span><br><span class="line">-rw-r--r--  1 user  staff   4.2M Sep 24 11:31 glue-2.17.29.jar</span><br><span class="line">-rw-r--r--  1 user  staff   4.2M Sep 24 11:31 rds-2.17.29.jar</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>íŒ¨í‚¤ì§•ì— í¬í•¨ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì—°ê´€ëœ íŒŒì¼ì´ ëª¨ë‘ <strong>964904ê°œ</strong>ë¡œ ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë–¤ ì˜ì¡´ì„± ë•Œë¬¸ì— ì´ë ‡ê²Œ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ë“¤ì´ í¬í•¨ë˜ì—ˆì„ê¹Œìš”? ì˜ì‹¬ë˜ëŠ” ë¶€ë¶„ì€ <strong>sagemaker-2.17.29.jarì™€ ê°™ì´ ì‹¤ì œë¡œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</strong> ì˜€ìŠµë‹ˆë‹¤. <strong>gradle dependencies</strong> ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ ì˜ì¡´ì„± ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” íŒ€ì¥ë‹˜ì˜ ë§ì”€ì„ ë“£ê³  ê²€í† í•´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ì•„ë§ˆì¡´ SDKì— ëŒ€í•œ ì˜ì¡´ì„±ì´ì—ˆìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">&#x27;software.amazon.awssdk:aws-sdk-java:2.17.45&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk:1.12.73&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>com.amazonaws:aws-java-sdk ê¸°ì¡´ì— ê°€ì§€ê³  ìˆë˜ <strong>ì•„ë§ˆì¡´ SDK v1ì— ëŒ€í•œ ì˜ì¡´ì„±</strong>ìœ¼ë¡œ í™•ì¸ë˜ì—ˆê³  software.amazon.awssdk:aws-sdk-javaëŠ” ì‹ ê·œ ê¸°ëŠ¥ ë° ì „í™˜ì„ ìœ„í•´ ìƒˆë¡­ê²Œ ê°œë°œí•˜ê³  í…ŒìŠ¤íŠ¸ ì¤‘ì¸ <strong>ì•„ë§ˆì¡´ SDK v2ì— ëŒ€í•œ ì˜ì¡´ì„±</strong>ì…ë‹ˆë‹¤. </p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencyManagement &#123;</span><br><span class="line">    imports &#123;</span><br><span class="line">        mavenBom <span class="string">&#x27;com.amazonaws:aws-java-sdk-bom:1.12.73&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line"><span class="comment">//    implementation &#x27;com.amazonaws:aws-java-sdk:1.12.73&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk-s3&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk-sqs&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk-cognitoidentity&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk-lambda&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.amazonaws:aws-java-sdk-autoscaling&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•  ë•ŒëŠ” ì•„ë§ˆì¡´ SDK ì „ì²´ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•˜ì§€ ì•Šì•˜ê¸°ì— ì•„ë§ˆì¡´ SDK ì „ì²´ë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°ì™€ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì¶”ê°€í•œ ê²½ìš°ë¥¼ ë¹„êµí•´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ìš”ì•½ë˜ì—ˆìŠµë‹ˆë‹¤.</p><table><thead><tr><th>ì˜ì¡´ì„±</th><th>ìš©ëŸ‰</th></tr></thead><tbody><tr><td>ì•„ë§ˆì¡´ SDK v1 ì „ì²´</td><td>214MB</td></tr><tr><td>ì•„ë§ˆì¡´ SDK v1 ê°œë³„</td><td>15.8MB</td></tr><tr><td>ì•„ë§ˆì¡´ SDK v2 ì „ì²´</td><td>268MB</td></tr><tr><td>ì•„ë§ˆì¡´ SDK v2 ê°œë³„</td><td>25.1MB</td></tr><tr><td>ì•„ë§ˆì¡´ SDK v1 + v2 ì „ì²´</td><td>471MB</td></tr><tr><td>ì•„ë§ˆì¡´ SDK v1 + v2 ê°œë³„</td><td>32.4MB</td></tr></tbody></table><p>ìœ„ ìƒí™©ì²˜ëŸ¼ ì•„ë§ˆì¡´ SDK v1ê³¼ v2 ëª¨ë‘ë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•˜ëŠ” ê²½ìš° ë¬´ë ¤ <strong>471MB</strong>ë¼ëŠ” ì–´ë§ˆì–´ë§ˆí•œ ìš©ëŸ‰ì„ ê°€ì§€ê²Œ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ì§€ë„ ì•ŠëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¬í•¨í•˜ì—¬ ì“¸ë°ì—†ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ë§Œ ë¬´ê±°ì›Œì¡Œë˜ ê²ƒì´ì£ . </p><p><img data-src="/images/posts/why-fail-deploy-application/reason-04.png"></p><p>íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ ìš©ëŸ‰ì´ ì¤„ì–´ë“¤ì–´ ì •ìƒì ìœ¼ë¡œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ê°€ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ì‚¬í•­ì— ëŒ€í•´ ê°œë°œíŒ€ì— ì•„ë§ˆì¡´ SDK ì¶”ê°€ ì‹œ ì‚¬ìš©í•˜ë ¤ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ì „ë‹¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê¸€ì„ ë³´ì‹œëŠ” ë¶„ë“¤ë„ ì•„ë§ˆì¡´ SDK ì „ì²´ë¥¼ ì¶”ê°€í•œ ìƒíƒœë¼ë©´ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì¶”ê°€í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><h3 id="ê·¸ë˜ë“¤-íƒœìŠ¤í¬-ê°œì„ "><a href="#ê·¸ë˜ë“¤-íƒœìŠ¤í¬-ê°œì„ " class="headerlink" title="ê·¸ë˜ë“¤ íƒœìŠ¤í¬ ê°œì„ "></a>ê·¸ë˜ë“¤ íƒœìŠ¤í¬ ê°œì„ </h3><p>Deprecatedëœ ì†ì„± ë˜ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ê°€ì ìœ¼ë¡œ ê°œì„ í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task procfile(<span class="attr">dependsOn:</span> bootJar) &#123;</span><br><span class="line">    doFirst &#123;</span><br><span class="line">        project.file(<span class="string">&quot;build/libs/Procfile&quot;</span>).text = <span class="string">&quot;web: java -Xmx3g -Dfile.encoding=UTF-8 -jar $&#123;bootJar.archiveFileName&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task awsbuild(<span class="attr">type:</span> Zip, <span class="attr">dependsOn:</span> procfile) &#123;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.ebextensions&#x27;</span>) &#123; into <span class="string">&#x27;.ebextensions&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;beanstalk/.platform&#x27;</span>) &#123;into <span class="string">&#x27;.platform&#x27;</span> &#125;</span><br><span class="line">    from (<span class="string">&#x27;build/libs&#x27;</span>) &#123;</span><br><span class="line">        include <span class="string">&#x27;Procfile&#x27;</span></span><br><span class="line">        include <span class="string">&quot;$&#123;bootJar.archiveFileName&#125;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    archiveBaseName.set(<span class="string">&#x27;beanstalk&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ì–¼ë§ˆì „ê¹Œì§€ë§Œ í•´ë„ ì˜ ë™ì‘í•˜ë˜ ë°°í¬ í”„ë¡œì„¸ìŠ¤ê°€ ê°‘ìê¸° ì‹¤íŒ¨í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;h2 id=&quot;ë¹Œë“œ-ë°-ë°°í¬-í™˜ê²½&quot;&gt;&lt;a href=&quot;#ë¹Œë“œ-ë°-ë°°í¬-í™˜ê²½&quot; class=</summary>
      
    
    
    
    
    <category term="Spring Boot" scheme="https://kdevkr.github.io/tags/Spring-Boot/"/>
    
    <category term="Beanstalk" scheme="https://kdevkr.github.io/tags/Beanstalk/"/>
    
    <category term="Gradle" scheme="https://kdevkr.github.io/tags/Gradle/"/>
    
  </entry>
  
  <entry>
    <title>ED25519</title>
    <link href="https://kdevkr.github.io/ed25519/"/>
    <id>https://kdevkr.github.io/ed25519/</id>
    <published>2021-09-17T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ë³´ì•ˆ ê´€ë ¨ ê¸°ìˆ ì¸ íƒ€ì›ê³¡ì„  ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” <strong>ED25519</strong>ë¼ëŠ” ê²ƒì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” 2021ë…„ 8ì›” 17ì¼ë¶€í„° EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì„ ìœ„í•´ <a href="https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-ec2-customers-ed25519-keys-authentication/">ED25519 í˜•ì‹ì˜ í‚¤ë¡œ SSH ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›</a>í•˜ì˜€ìœ¼ë©° 2021ë…„ 9ì›” 1ì¼ì—ëŠ” ê¹ƒí—ˆë¸Œì—ì„œë„ DSA í˜•ì‹ì˜ í‚¤ë¥¼ ì œê±°í•˜ê³  <a href="https://github.blog/2021-09-01-improving-git-protocol-security-github/">ECDSAì™€ ED25519 í˜•ì‹ì˜ í‚¤ë¥¼ ì¶”ê°€</a>í•˜ê¸°ë¡œ ê²°ì •í•˜ì˜€ìŠµë‹ˆë‹¤. </p><p>ê³µí†µìœ¼ë¡œ ì–¸ê¸‰ë˜ê³  ìˆëŠ” ED25519ë¼ëŠ” ê²ƒì„ ëª¨ë¥´ì‹œëŠ” ë¶„ì´ë¼ë©´ ì €ì™€ í•¨ê»˜ ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤. </p><p><img data-src="/images/posts/ed25519/ed25519-00.gif"></p><h2 id="ED25519"><a href="#ED25519" class="headerlink" title="ED25519"></a>ED25519</h2><p>ED25519(Ed25519)ëŠ” ECC(Elliptic Curve Cryptography) ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„ëœ ì „ìì„œëª…ì…ë‹ˆë‹¤. íƒ€ì›ê³¡ì„  ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì€ <strong>ê¸°ì¡´ì˜ RSAì™€ ë¹„êµí•´ì„œ ë™ì¼í•œ ì•ˆì •ì„±ì„ ê°€ì§€ë©´ì„œë„ ìƒëŒ€ì ìœ¼ë¡œ ë” ì ì€ ê¸¸ì´ì˜ í‚¤</strong>ë¥¼ ê°€ì§„ë‹¤ê³  í•©ë‹ˆë‹¤. ì»´í“¨í„° ì—°ì‚° ì†ë„ê°€ ë°œì „í•¨ì— ë”°ë¼ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” RSAì˜ ê¶Œì¥ë˜ëŠ” í‚¤ ê¸¸ì´ê°€ ê¸¸ì–´ì§ìœ¼ë¡œ ì¸í•˜ì—¬ ì¼ë°˜ ì»´í“¨í„° ë˜ëŠ” ë””ë°”ì´ìŠ¤ì—ì„œëŠ” ì—°ì‚° ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ë‹¨ì ì„ ê°€ì§€ê²Œ ë˜ê³  ìƒëŒ€ì ìœ¼ë¡œ ì‘ì€ í‚¤ ê¸¸ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ë™ì¼í•œ ì•ˆì •ì„±ì„ ë³´ì—¬ì£¼ë¯€ë¡œ ê¶Œì¥ë˜ëŠ” ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>RSAì™€ ë¹„êµí•´ì„œ ë³´ì•ˆì ìœ¼ë¡œ ìš°ìˆ˜í•˜ë‹¤ê³  ë³¼ ìˆœ ì—†ì§€ë§Œ ìƒëŒ€ì ìœ¼ë¡œ ë¹„êµí•˜ì—¬ íš¨ìœ¨ì ì´ë¼ëŠ” ê²ƒì„ ì´í•´í•˜ì…”ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h3 id="íƒ€ì›-ê³¡ì„ "><a href="#íƒ€ì›-ê³¡ì„ " class="headerlink" title="íƒ€ì› ê³¡ì„ "></a>íƒ€ì› ê³¡ì„ </h3><p>ED25519ëŠ” ì–´ë–¤ íƒ€ì› ê³¡ì„ ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ëœ ì „ìì„œëª…ì¼ì§€ ê¶ê¸ˆí•´ì§‘ë‹ˆë‹¤. ë‹¤ìŒì€ ì•”í˜¸í™”ì— ì í•©í•˜ë‹¤ê³  íŒë‹¨ë˜ì–´ í‘œì¤€ìœ¼ë¡œ ì •ì˜ëœ íƒ€ì› ê³¡ì„ ë“¤ì…ë‹ˆë‹¤.</p><ul><li>secp256k1</li><li>secp256r1</li><li>prime256v1</li><li>Curve25519</li></ul><p>ë¯¸êµ­ êµ­ë¦½í‘œì¤€ì—°êµ¬ì†Œ(NIST) ë˜ëŠ” <a href="https://www.secg.org/">í‘œì¤€ ì•”í˜¸í™” ê·¸ë£¹(SECG)</a>ì—ì„œëŠ” íš¨ìœ¨ì ì¸ íƒ€ì› ê³¡ì„ ë“¤ì— ì´ë¦„ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ECC NIST P-256ì€ SECGì—ì„œ ì •ì˜í•œ secp256r1ê³¼ prime256v1ë¥¼ ì§€ì¹­í•œ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. </p><p>í‘œì¤€ìœ¼ë¡œ ì •ì˜ëœ ë‹¤ì–‘í•œ íƒ€ì› ê³¡ì„ ë“¤ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒì˜ ë‘ ë¬¸ì„œë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><a href="https://www.secg.org/sec2-v2.pdf">SEC 2: Recommended Elliptic Curve Domain Parameters</a></li><li><a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-4.pdf">Digital Signature Standard (DSS)</a></li></ul><p>ì €ë¡œì„œëŠ” ì´í•´í•˜ê¸° í˜ë“  ë¶€ë¶„ì´ë¼ê³  ìƒê°í•˜ì—¬ ì„¤ëª…ì€ ìƒëµí•˜ë©° ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ ì—¬ëŸ¬ê°€ì§€ íƒ€ì› ê³¡ì„  í˜•íƒœë¥¼ <strong>ë„ë©”ì¸ íŒŒë¼ë¯¸í„°ë¡œ ì •ì˜</strong>í•˜ì—¬ ì´ë¦„ì„ ë¶€ì—¬í•œ ê²ƒ ì…ë‹ˆë‹¤. NIST P-256ì€ NISTì—ì„œ ì •ì˜í•œ ì†Œìˆ˜ ê¸°ë°˜ì˜ íƒ€ì› ê³¡ì„  ë°©ì •ì‹ì„ ë§í•˜ë©° <a href="https://en.bitcoin.it/wiki/Secp256k1">secp256k1</a>ëŠ” SECGì—ì„œ ì •ì˜í•œ Koblitz curve ê¸°ë°˜ì˜ íƒ€ì› ê³¡ì„  ë°©ì •ì‹ì„ ë§í•©ë‹ˆë‹¤. </p><blockquote><p>ë¹„íŠ¸ì½”ì¸ê³¼ ì´ë”ë¦¬ì›€ì—ì„œë„ secp256k1 ë¼ëŠ” íƒ€ì›ê³¡ì„ ì„ ì‚¬ìš©í•œë‹¤ê³ â€¦</p></blockquote><h3 id="í‚¤-êµí™˜ê³¼-ì „ì-ì„œëª…"><a href="#í‚¤-êµí™˜ê³¼-ì „ì-ì„œëª…" class="headerlink" title="í‚¤ êµí™˜ê³¼ ì „ì ì„œëª…"></a>í‚¤ êµí™˜ê³¼ ì „ì ì„œëª…</h3><p>íƒ€ì› ê³¡ì„ ì„ ì‚¬ìš©í•˜ì—¬ ë””í”¼-í—¬ë¨¼ í‚¤ êµí™˜ì„ êµ¬í˜„í•œ ì•Œê³ ë¦¬ì¦˜ì„ ECDHë¼ê³  í•˜ë©° íƒ€ì› ê³¡ì„  ì•”í˜¸ë¥¼ ì‚¬ìš©í•´ì„œ <a href="https://ko.wikipedia.org/wiki/%EB%94%94%EC%A7%80%ED%84%B8_%EC%84%9C%EB%AA%85_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98">ì „ìì„œëª… ì•Œê³ ë¦¬ì¦˜(DSA)</a>ë¥¼ êµ¬í˜„í•œ ê²ƒì„ <strong>ECDSA</strong>ë¼ê³  í•©ë‹ˆë‹¤. ECDSAëŠ” ì§€ë‚œ <a href="../ssl-certificate">SSL ì¸ì¦ì„œ</a> ê¸€ì—ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ECDHE_ECDSAì™€ ê°™ì€ íƒ€ì› ê³¡ì„  ì•”í˜¸ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í†µí•´ ì´ë¯¸ í™•ì¸í•œ ê°œë…ì¸ë° ê¸°ì–µí•˜ì‹œëŠ” ë¶„ì´ ê³„ì‹¤ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.</p><p>íƒ€ì› ê³¡ì„  ê¸°ë°˜ì˜ ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜ì—ëŠ” <a href="https://en.wikipedia.org/wiki/EdDSA">EdDSA</a>ë„ ìˆìœ¼ë©° <strong>Twisted Edwards curve</strong>ì™€ <strong>Schnorr ì„œëª… ë°©ì‹</strong>ì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬í˜„ëœ DSA ì…ë‹ˆë‹¤.</p><h3 id="X25519-ê·¸ë¦¬ê³ -Ed25519"><a href="#X25519-ê·¸ë¦¬ê³ -Ed25519" class="headerlink" title="X25519 ê·¸ë¦¬ê³  Ed25519"></a>X25519 ê·¸ë¦¬ê³  Ed25519</h3><p>ì•ì„œ ì–¸ê¸‰ëœ íƒ€ì› ê³¡ì„  ì¤‘ Curve25519ëŠ” í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜ì¸ ë””í”¼-í—¬ë¨¼ê³¼ ê°™ì´ ì‚¬ìš©í•˜ë„ë¡ ê³ ì•ˆëœ íƒ€ì› ê³¡ì„ ì…ë‹ˆë‹¤. Curve25519ë¥¼ ê¸°ë°˜ìœ¼ë¡œí•˜ì—¬ ECDHë¡œ í‚¤ êµí™˜ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ X25519ë¼ê³  í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Curve25519ê³¼ í•¨ê»˜ SHA-512ì™€ ê°™ì€ <strong>í•´ì‹œ í•¨ìˆ˜</strong>ë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ëœ EdDSAë¥¼ <strong>Ed25519</strong>ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë¶€ë¥´ê²Œ ë©ë‹ˆë‹¤. </p><ul><li>ECDSA : íƒ€ì› ê³¡ì„  ê¸°ë°˜ì˜ ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜</li><li>X25519 : Curve25519ë¥¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì› ê³¡ì„  í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜</li><li>Ed25519 : Curve25519ë¥¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì› ê³¡ì„  ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜ </li></ul><p><img data-src="/images/posts/ed25519/ed25519-04.gif" alt="ë¨¸ë¦¬ì†ì— ì •ë¦¬ê°€ ì˜ ë˜ì…¨ë‚˜ìš”?"></p><h3 id="ED25519-í‚¤-í˜ì–´"><a href="#ED25519-í‚¤-í˜ì–´" class="headerlink" title="ED25519 í‚¤ í˜ì–´"></a>ED25519 í‚¤ í˜ì–´</h3><p>ì§€ê¸ˆë¶€í„°ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•´ë³´ëŠ” ê²ƒì„ ë”°ë¼í•´ë³´ê² ìŠµë‹ˆë‹¤. </p><h4 id="í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°"><a href="#í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°" class="headerlink" title="í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°"></a>í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°</h4><p>ë¨¼ì €, ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ëŠ” OpenSSHë¥¼ í†µí•´ ë§Œë“¤ ìˆ˜ë„ ìˆê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p><img data-src="/images/posts/ed25519/ed25519-01.png"></p><blockquote><p>2021ë…„ 8ì›” 17ì¼ ë¶€í„°ëŠ” ì½˜ì†”ì„ í†µí•´ ED25119 í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í–ˆëŠ”ë° ìš°ì¸¡ ì œì•½ì‚¬í•­ì—ëŠ” ì•„ì§ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì€ ë“¯ í•©ë‹ˆë‹¤.</p></blockquote><p>ì•„ë˜ì™€ ê°™ì´ AWS CLIì˜ create-key-pair ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œë„ ED25519 í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight ps"><table><tr><td class="code"><pre><span class="line">aws ec2 create<span class="literal">-key</span><span class="literal">-pair</span> -<span class="literal">-key</span><span class="literal">-name</span> mambo -<span class="literal">-key</span><span class="literal">-type</span> ed25519 -<span class="literal">-query</span> <span class="string">&quot;KeyMaterial&quot;</span> -<span class="literal">-output</span> text &gt; aws<span class="literal">-mambo</span>.pem</span><br><span class="line">aws ec2 describe<span class="literal">-key</span><span class="literal">-pairs</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;KeyPairs&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;KeyPairId&quot;</span>: <span class="string">&quot;###&quot;</span>,</span><br><span class="line">            <span class="string">&quot;KeyFingerprint&quot;</span>: <span class="string">&quot;###&quot;</span>,</span><br><span class="line">            <span class="string">&quot;KeyName&quot;</span>: <span class="string">&quot;mambo&quot;</span>,</span><br><span class="line">            <span class="string">&quot;KeyType&quot;</span>: <span class="string">&quot;ed25519&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Tags&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì— í‚¤ í˜ì–´ê°€ ìƒì„±ë˜ì—ˆìœ¼ë©´ VPCì— EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ SSH ì ‘ì† ì‹œ ì‚¬ìš©ë  ED25519 í‚¤ í˜ì–´ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p><img data-src="/images/posts/ed25519/ed25519-02.png"></p><p>EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì‹¤í–‰ë˜ì—ˆìœ¼ë©´ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ ì½˜ì†”ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ê¸°ëŠ¥ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ed25519/ed25519-03.png"></p><p>ED25519 í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•´ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë§ì´ì£ , ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ED25519 í‚¤ í˜ì–´ë¥¼ ìœˆë„ìš° 10ì—ì„œ ì§€ì›í•˜ëŠ” SSH í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©í•´ë³´ë©´ ì˜ëª»ëœ í˜•ì‹ì´ë¼ê³  ë¡œê·¸ê°€ ì¶œë ¥ë˜ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -i &quot;aws-mambo.pem&quot; ec2-user@ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com</span><br><span class="line"></span><br><span class="line">The authenticity of host &#x27;ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com (3.36.96.111)&#x27; can&#x27;t be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:gvSJ/qfnIlB8bkTE78QY65HO4px3YpoYvsyAv90LsTE.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com,3.36.96.111&#x27; (ECDSA) to the list of known hosts.</span><br><span class="line">Load key &quot;aws-mambo.pem&quot;: invalid format</span><br><span class="line">ec2-user@ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</span><br></pre></td></tr></table></figure><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ìœˆë„ìš° 10ì—ì„œ ssh-keygenì„ í†µí•´ ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•˜ê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì— í¼ë¸”ë¦­ í‚¤ë¥¼ ì¶”ê°€í•˜ë©´ ì •ìƒì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -m PEM -f ./mambo.pem</span><br></pre></td></tr></table></figure><p>ì´ì²˜ëŸ¼ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ë§Œë“¤ì–´ì£¼ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ëŠ” ìœˆë„ìš°ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì£¼ì˜í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><p>íƒ€ì›ê³¡ì„  ì•”í˜¸ì— ëŒ€í•´ì„œ ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì˜ ê¸€ë“¤ì„ ì°¸ê³ í•´ë³´ì‹œê¸°ë¥¼ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p><ul><li><a href="https://medium.com/humanscape-tech/blockchain-elliptic-curve-cryptography-ecc-49e6d7d9a50a">[Blockchain] Elliptic Curve Cryptography(ECC)</a></li><li><a href="https://naleejang.tistory.com/218">ë³´ì•ˆ ê·¸ë¦¬ê³  ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜</a></li></ul><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://datatracker.ietf.org/doc/html/rfc4492">Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS)</a></li><li><a href="https://datatracker.ietf.org/doc/html/rfc7748">Elliptic Curves for Security</a></li><li><a href="https://datatracker.ietf.org/doc/html/rfc8032">Edwards-Curve Digital Signature Algorithm (EdDSA)</a></li><li><a href="https://ed25519.cr.yp.to/">Ed25519: high-speed high-security signatures</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ë³´ì•ˆ ê´€ë ¨ ê¸°ìˆ ì¸ íƒ€ì›ê³¡ì„  ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” &lt;strong&gt;ED25519&lt;/strong&gt;ë¼ëŠ” ê²ƒì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤. &lt;/p&gt;
&lt;p&gt;ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” 2021ë…„ 8ì›” 17ì¼</summary>
      
    
    
    
    
    <category term="ECC" scheme="https://kdevkr.github.io/tags/ECC/"/>
    
    <category term="Ed25519" scheme="https://kdevkr.github.io/tags/Ed25519/"/>
    
  </entry>
  
  <entry>
    <title>íŒŒì´ì¬ ë„ì»¤ ì´ë¯¸ì§€ ìµœì í™”</title>
    <link href="https://kdevkr.github.io/python-docker-image-optimization/"/>
    <id>https://kdevkr.github.io/python-docker-image-optimization/</id>
    <published>2021-09-09T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ íŒŒì´ì¬ ë„ì»¤ ì´ë¯¸ì§€ì— ëŒ€í•œ ìµœì í™”ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ë¶„ì„ ì„œë²„ëŠ” íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ëœ í”Œë˜ìŠ¤í¬ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì—¬ëŸ¬ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ë°°í¬í•˜ë˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Elastic Beanstalk í™˜ê²½ì„ í†µí•´ ë°°í¬í•˜ëŠ” êµ¬ì¡°ë¡œ í†µí•©í•˜ê¸° ìœ„í•´ì„œ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Elastic Beanstalkì˜ ë„ì»¤ í”Œë«í¼ìœ¼ë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. íŒŒì´ì¬ í”Œë«í¼ì´ ì•„ë‹Œ ë„ì»¤ í”Œë«í¼ì„ í™œìš©í•˜ëŠ” ì´ìœ ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¡œ êµ¬ë™í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ìˆê¸° ë•Œë¬¸ìœ¼ë¡œ ë™ì¼í•˜ê²Œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³ ì ê²°ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p><h2 id="íŒŒì´ì¬-ë„ì»¤-ì´ë¯¸ì§€"><a href="#íŒŒì´ì¬-ë„ì»¤-ì´ë¯¸ì§€" class="headerlink" title="íŒŒì´ì¬ ë„ì»¤ ì´ë¯¸ì§€"></a>íŒŒì´ì¬ ë„ì»¤ ì´ë¯¸ì§€</h2><p>íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤ ì´ë¯¸ì§€í™”í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œê²¬í•œ ë¬¸ì œì— ëŒ€í•˜ì—¬ ëª‡ê°€ì§€ ê°œì„  ì‘ì—…ì„ ì§„í–‰í•œ ê²ƒì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤. </p><h3 id="ë¡œì»¬-í™˜ê²½ì˜-Dockerfile"><a href="#ë¡œì»¬-í™˜ê²½ì˜-Dockerfile" class="headerlink" title="ë¡œì»¬ í™˜ê²½ì˜ Dockerfile"></a>ë¡œì»¬ í™˜ê²½ì˜ Dockerfile</h3><p>ë¨¼ì €, ë¡œì»¬ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•´ë³´ê¸° ìœ„í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•˜ì—¬ ì‚¬ìš©ì¤‘ì´ë˜ Dockerfileì„ ë‹¤ì‹œ ë§Œë“¤ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p><figure class="highlight docker"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./src /www</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /www</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">ENV</span> <span class="keyword">ENV</span> <span class="string">&quot;dev&quot;</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> python3 -m venv .venv</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod +x ./.venv/bin/activate</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> ./.venv/bin/activate</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> python3 -m pip install --upgrade pip</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install Flask</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> gunicorn main:app -b 0.0.0.0:5000 -w 1 -t=50 -k gevent --preload</span></span><br></pre></td></tr></table></figure><p>Dockerfileì´ ì •ë¦¬ë˜ì–´ìˆì§€ ì•Šê³  ë¶ˆí•„ìš”í•œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒë„ ìˆì§€ë§Œ ì œì¼ í¬ë‹¤ê³  ìƒê°í•œ ë¬¸ì œì ì€ <a href="https://gunicorn.org/">Gunicorn WSGI ì„œë²„</a>ì— ëŒ€í•´ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì ìš©í•˜ê¸° í˜ë“¤ë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤. ì›¹ ìš”ì²­ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤ì— ì „ë‹¬í•˜ëŠ” ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ì˜ ê°œìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ì˜µì…˜ ë§Œí¼ì€ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ì‹œì  ì´í›„ì—ë„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ì ìš©í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.</p><figure class="highlight docker"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /app/logs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> PORT=<span class="number">8000</span></span><br><span class="line"><span class="keyword">ARG</span> MAIN=application</span><br><span class="line"><span class="keyword">ARG</span> MAIN_APP=application</span><br><span class="line"><span class="keyword">ARG</span> WORKERS=application</span><br><span class="line"><span class="keyword">ARG</span> WORKERS=<span class="number">2</span></span><br><span class="line"><span class="keyword">ARG</span> WORKERCLASS=gevent</span><br><span class="line"><span class="keyword">ARG</span> TIMEOUT=<span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PORT $&#123;PORT&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN $&#123;MAIN&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN_APP $&#123;MAIN_APP&#125;</span><br><span class="line"><span class="comment"># This number should generally be between 2-4 workers per core in the server.</span></span><br><span class="line"><span class="keyword">ENV</span> WORKERS $&#123;WORKERS&#125;</span><br><span class="line"><span class="comment"># one of sync, eventlet, gevent, tornado, gthread</span></span><br><span class="line"><span class="keyword">ENV</span> WORKERCLASS $&#123;WORKERCLASS&#125;</span><br><span class="line"><span class="keyword">ENV</span> TIMEOUT $&#123;TIMEOUT&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> entrypoint.sh entrypoint.sh</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src/ .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install gunicorn gevent</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> $&#123;PORT&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://docs.gunicorn.org/en/stable/run.html</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;./entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="string">&quot;./entrypoint.sh&quot;</span></span></span><br></pre></td></tr></table></figure><p>ë‹¤ì‹œ ì‘ì„±í•œ Dockerfileì—ì„œëŠ” <strong>ARG í‚¤ì›Œë“œë¡œ ë¹Œë“œ ì‹œì ì— ì˜µì…˜ì„ ì ìš©</strong>í•˜ê³  <strong>ENV í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì </strong>ì— í™˜ê²½ ë³€ìˆ˜ë¡œ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.</p><h3 id="í„°ë¬´ë‹ˆì—†ëŠ”-ë¹Œë“œëœ-ì´ë¯¸ì§€-í¬ê¸°"><a href="#í„°ë¬´ë‹ˆì—†ëŠ”-ë¹Œë“œëœ-ì´ë¯¸ì§€-í¬ê¸°" class="headerlink" title="í„°ë¬´ë‹ˆì—†ëŠ” ë¹Œë“œëœ ì´ë¯¸ì§€ í¬ê¸°"></a>í„°ë¬´ë‹ˆì—†ëŠ” ë¹Œë“œëœ ì´ë¯¸ì§€ í¬ê¸°</h3><p>Dockerfileì„ ë‹¤ì‹œ ì‘ì„±í•˜ë©´ì„œ ê½¤ ê¹”ë”í•´ì¡Œì§€ë§Œ ë˜ ë‹¤ë¥¸ ë¬¸ì œê°€ ë‚´ì¬ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ ë¹Œë“œëœ ì´ë¯¸ì§€ì˜ í¬ê¸°ê°€ 3.7GBë¼ëŠ” í„°ë¬´ë‹ˆ ì—†ëŠ” í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. </p><p><img data-src="/images/posts/python-docker-image-optimization/python-docker-image-optimization-01.png" alt="3.71GB"></p><p>ë¶„ì„ ì„œë²„ë¥¼ ê°œë°œí•˜ì‹œëŠ” ì‹¤ì¥ë‹˜ë„ íŒŒì´ì¬ì„ ì „ë¬¸ìœ¼ë¡œ í•˜ëŠ” ê°œë°œìê°€ ì•„ë‹ˆì—ˆê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ì´ë¯¸ì§€ í¬ê¸°ê°€ ì •ìƒì ì¸ ê²ƒ ê°™ë‹¤ê³  í•˜ì…¨ìœ¼ë‚˜ <strong>requirements.txtì— ì •ì˜ëœ íŒ¨í‚¤ì§€ì— ì˜í•´ ì„¤ì¹˜ëœ ìš©ëŸ‰ì´ ë¬´ë ¤ 2.8GB</strong>ì¸ ê²ƒì„ í™•ì¸í•˜ê³  requirements.txtì— <strong>ì •ì˜ëœ íŒ¨í‚¤ì§€ ì¤‘ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒ¨í‚¤ì§€ë“¤ì„ ì œê±°</strong>í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ ë³´ë‹ˆ <strong>97ê°œì˜ íŒ¨í‚¤ì§€ê°€ 39ê°œë¡œ ì¶•ì†Œ</strong>ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/python-docker-image-optimization/python-docker-image-optimization-02.png" alt="1.28GB"></p><p>ì¶•ì†Œëœ requirements.txtì— ì˜í•´ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì˜ ìš©ëŸ‰ì€ 2.8GBì—ì„œ 368MBë¡œ ì¤„ì–´ë“  ê²ƒìœ¼ë¡œ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.</p><h3 id="íŒŒì´ì¬-ê¸°ë°˜-ì´ë¯¸ì§€-ë³€ê²½"><a href="#íŒŒì´ì¬-ê¸°ë°˜-ì´ë¯¸ì§€-ë³€ê²½" class="headerlink" title="íŒŒì´ì¬ ê¸°ë°˜ ì´ë¯¸ì§€ ë³€ê²½"></a>íŒŒì´ì¬ ê¸°ë°˜ ì´ë¯¸ì§€ ë³€ê²½</h3><p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì§ 1.28GBë¼ëŠ” ìƒë‹¹íˆ ë¬´ê±°ìš´ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆë¥¼ ê°€ì§€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ê¸°ë³¸ íŒŒì´ì¬ ì´ë¯¸ì§€ì—ì„œ ì´ë¯¸ ë§ì€ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p><img data-src="/images/posts/python-docker-image-optimization/python-docker-image-optimization-03.png"></p><p>ì¼ë°˜ì ìœ¼ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œ ì•ŒíŒŒì¸ ë¦¬ëˆ…ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì•ŒíŒŒì¸ ë¦¬ëˆ…ìŠ¤ë¡œ ëœ íŒŒì´ì¬ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ <a href="https://jonnung.dev/docker/2020/04/08/optimizing-docker-images/">ë„ì»¤ ì´ë¯¸ì§€ ì˜ ë§Œë“œëŠ” ë°©ë²•</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ <strong>ë¹Œë“œ ì†Œìš”ì‹œê°„ì´ 15ë¶„ ì´ìƒ ê±¸ë¦¬ëŠ” í˜„ìƒ</strong>ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight docker"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span>-slim-buster</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash"> gcc libpq-dev</span></span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ê²°êµ­ ì•ŒíŒŒì¸ ë¦¬ëˆ…ìŠ¤ ê¸°ë°˜ ì´ë¯¸ì§€ ëŒ€ì‹ ì— <code>3.8-slim-buster</code>ì„ ê¸°ë°˜ì˜ ì´ë¯¸ì§€ë¡œ ë³€ê²½í•˜ì˜€ê³  PostgreSQL ëª¨ë“ˆì„ ì„¤ì¹˜í•  ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ gcc ì™€ libpg-dev íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/python-docker-image-optimization/python-docker-image-optimization-04.png"></p><p><strong>1.28GBì˜ ë„ì»¤ ì´ë¯¸ì§€ê°€ 655MBì˜ ìš©ëŸ‰ì„ ê°€ì§€ëŠ” ì´ë¯¸ì§€ë¡œ ì¶•ì†Œ</strong>ë˜ì—ˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì•½ 3.14GBì˜ í¬ê¸°ë¥¼ ì¤„ì´ê²Œ ë˜ì—ˆê³  <strong>ìºì‹œë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì•½ 40ì´ˆ ì •ë„ì˜ ì‹œê°„ì´ ì†Œìš”ë¨</strong>ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. </p><h3 id="Dockerfile-í‚¤ì›Œë“œ-ìˆœì„œ-ë³€ê²½"><a href="#Dockerfile-í‚¤ì›Œë“œ-ìˆœì„œ-ë³€ê²½" class="headerlink" title="Dockerfile í‚¤ì›Œë“œ ìˆœì„œ ë³€ê²½"></a>Dockerfile í‚¤ì›Œë“œ ìˆœì„œ ë³€ê²½</h3><p><strong>ë„ì»¤ ì´ë¯¸ì§€ ì˜ ë§Œë“œëŠ” ë°©ë²•</strong>ì„ ì°¸ê³ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³ ë‚˜ì„œ ë³µì‚¬í•˜ëŠ” ê²ƒì´ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•í•œë‹¤ëŠ” ê²ƒì„ ë³´ê³  COPY í‚¤ì›Œë“œ ìˆœì„œë¥¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight docker"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src/requirements.txt requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install gunicorn gevent</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> entrypoint.sh entrypoint.sh</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src/ .</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ë¨¼ì €, requirements.txtì„ ìš°ì„ ì ìœ¼ë¡œ ë³µì‚¬í•˜ê³  íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œ ë’¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ìœ„í•œ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ í´ë”ë¥¼ ë³µì‚¬í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p><h3 id="Gunicorn-ì„¤ì •-ê°œì„ "><a href="#Gunicorn-ì„¤ì •-ê°œì„ " class="headerlink" title="Gunicorn ì„¤ì • ê°œì„ "></a>Gunicorn ì„¤ì • ê°œì„ </h3><p>ë‹¤ì‹œ ì‘ì„±í•œ Dockerfileì„ ì‚´í´ë³´ë‹ˆ ARGì™€ ENV í‚¤ì›Œë“œê°€ ë§ì•„ ì“¸ë°ì—†ì´ íŒŒì¼ì´ ì§€ì €ë¶„í•´ë³´ì˜€ìŠµë‹ˆë‹¤. ARGì™€ ENV í‚¤ì›Œë“œë“¤ì€ ìš©ëŸ‰ì„ ì°¨ì§€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ë¯¸ì§€ í¬ê¸°ì— ì˜í–¥ì„ ì£¼ì§€ëŠ” ì•Šìœ¼ë‚˜ Gunicornì˜ ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ì„ í•˜ë‚˜ì˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì›í•˜ë„ë¡ ì¶”ê°€ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight docker"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span>-slim-buster</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash"> gcc libpq-dev</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /app/logs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build Arguments</span></span><br><span class="line"><span class="keyword">ARG</span> PORT=<span class="number">8000</span></span><br><span class="line"><span class="keyword">ARG</span> MAIN=application</span><br><span class="line"><span class="keyword">ARG</span> MAIN_APP=application</span><br><span class="line"><span class="keyword">ARG</span> GUNICORN_ARGS=--preload</span><br><span class="line"></span><br><span class="line"><span class="comment"># Environoment Variables</span></span><br><span class="line"><span class="keyword">ARG</span> PORT $&#123;PORT&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN $&#123;MAIN&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN_APP $&#123;MAIN_APP&#125;</span><br><span class="line"><span class="keyword">ENV</span> GUNICORN_ARGS $&#123;GUNICORN_ARGS&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.txt requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install gunicorn gevent</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> gunicorn.conf.py gunicorn.conf.py</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> entrypoint.sh entrypoint.sh</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src/ .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> $&#123;PORT&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://docs.gunicorn.org/en/stable/run.html</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;./entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="string">&quot;./entrypoint.sh&quot;</span></span></span><br></pre></td></tr></table></figure><p>ë‹¤ìŒê³¼ ê°™ì´ ê¸°ë³¸ ì˜µì…˜ì´ ì •ì˜ëœ <strong>gunicorn.conf.py</strong> íŒŒì¼ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight py"><figcaption><span>gunicorn.conf.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># https://docs.gunicorn.org/en/stable/settings.html</span></span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line">bind = <span class="string">&#x27;0.0.0.0:8000&#x27;</span></span><br><span class="line">workers = multiprocessing.cpu_count() * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">worker_connections = <span class="number">1000</span></span><br><span class="line">worker_class = <span class="string">&#x27;gevent&#x27;</span></span><br><span class="line">threads = <span class="number">1</span></span><br><span class="line">max_requests = <span class="number">0</span></span><br><span class="line">timeout = <span class="number">30</span></span><br><span class="line">keepalive = <span class="number">2</span></span><br></pre></td></tr></table></figure><p>ê·¸ë¦¬ê³  ê¸°ë³¸ìœ¼ë¡œ ì ìš©ëœ ì˜µì…˜ì„ í•˜ë‚˜ë¡œ í†µí•©ëœ <strong>GUNICORN_ARGS</strong> í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ììœ ë¡­ê²Œ ì˜µì…˜ì„ ì¬ì •ì˜í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><strong>requirements.txtì— ì •ì˜ëœ íŒ¨í‚¤ì§€ ì •ë¦¬</strong>í•˜ê³  <strong>slim-buster ê¸°ë°˜ì˜ ì´ë¯¸ì§€ë¡œ ë³€ê²½</strong> ê·¸ë¦¬ê³  <strong>Dockerfile í‚¤ì›Œë“œ ìˆœì„œë¥¼ ë³€ê²½</strong>í•¨ìœ¼ë¡œì¨ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìµœì í™”í•˜ëŠ” ê²ƒì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ë„ì»¤ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆë¥¼ ë§ì´ ì¤„ì´ê²Œë˜ì–´ ì´ë¯¸ì§€ ìš©ëŸ‰ì— ëŒ€í•œ ë¶€ë‹´ê³¼ ë¹Œë“œ ë° ë°°í¬í•˜ê¸°ê¹Œì§€ì˜ ì‹œê°„ì„ ë‹¨ì¶•í•˜ê²Œë˜ì–´ ë‹¤í–‰ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="http://blog.hwahae.co.kr/all/tech/tech-tech/5567/">gunicorn ì„¤ì •ì˜ A to Z</a></li><li><a href="https://jonnung.dev/docker/2020/04/08/optimizing-docker-images/">ë„ì»¤ ì´ë¯¸ì§€ ì˜ ë§Œë“œëŠ” ë°©ë²•</a>  </li><li><a href="https://kimeuichan.github.io/posts/deploy-docker-more-faster/">ìì£¼ ë³€ê²½ë˜ëŠ” ë„ì»¤ ì´ë¯¸ì§€ ë¹ ë¥´ê²Œ ë°°í¬í•˜ê¸°</a>  </li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ íŒŒì´ì¬ ë„ì»¤ ì´ë¯¸ì§€ì— ëŒ€í•œ ìµœì í™”ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ë¶„ì„ ì„œë²„ëŠ” íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ëœ í”Œë˜ìŠ¤í¬ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì—¬ëŸ¬ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ë°°í¬í•˜ë˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ E</summary>
      
    
    
    
    
    <category term="Docker" scheme="https://kdevkr.github.io/tags/Docker/"/>
    
    <category term="Python" scheme="https://kdevkr.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Elastic Beanstalk Docker Platform</title>
    <link href="https://kdevkr.github.io/elastic-beanstalk-docker-with-python/"/>
    <id>https://kdevkr.github.io/elastic-beanstalk-docker-with-python/</id>
    <published>2021-09-06T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ <strong>Elastic Beanstalkì—ì„œ ì§€ì›í•˜ëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ë°©ë²•</strong>ì— ëŒ€í•˜ì—¬ ì•Œì•„ë´…ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤ ì´ë¯¸ì§€í™”í•˜ê³  ì‚¬ì„¤ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ì €ì¥ëœ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Elastic Beanstalk í™˜ê²½ì—ì„œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ í™œìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p><h2 id="ë„ì»¤-í”Œë«í¼"><a href="#ë„ì»¤-í”Œë«í¼" class="headerlink" title="ë„ì»¤ í”Œë«í¼"></a>ë„ì»¤ í”Œë«í¼</h2><p>Elastic Beanstalkì˜ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/docker.html">ë„ì»¤ í”Œë«í¼</a>ì€ ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. ë„ì»¤ í”Œë«í¼ì„ ì‚¬ìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆì™€ Elastic Beanstalkì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë„ì»¤ í”Œë«í¼ì—ì„œëŠ” Dockerfileì„ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ì—¬ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ <strong>Dockerrun.aws.json</strong> íŒŒì¼ë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ë˜í•œ, <a href="https://docs.docker.com/registry/deploying/">ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„</a>ì— ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” <strong>ë„ì»¤ ì»´í¬ì¦ˆ</strong> ë°©ì‹ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë„ì»¤ í”Œë«í¼ì—ì„œ ë„ì»¤ ì´ë¯¸ì§€í™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤ ì»´í¬ì¦ˆë¡œ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì˜ í•­ëª©ë“¤ì„ ì‘ì„±í•´ì•¼í•©ë‹ˆë‹¤.</p><ul><li>ì• í”Œë¦¬ì¼€ì´ì…˜ ë„ì»¤ ì´ë¯¸ì§€</li><li>í”Œë«í¼ í™•ì¥ ë° í™˜ê²½ êµ¬ì„± íŒŒì¼</li><li>ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œ</li><li>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ ì¸ì¦ íŒŒì¼</li><li>ë„ì»¤ êµ¬ì„± íŒŒì¼</li></ul><blockquote><p>ì´ ê¸€ì—ì„œëŠ” ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ê°€ êµ¬ì¶•ë˜ì–´ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.</p></blockquote><h3 id="ì• í”Œë¦¬ì¼€ì´ì…˜-ë„ì»¤-ì´ë¯¸ì§€"><a href="#ì• í”Œë¦¬ì¼€ì´ì…˜-ë„ì»¤-ì´ë¯¸ì§€" class="headerlink" title="ì• í”Œë¦¬ì¼€ì´ì…˜ ë„ì»¤ ì´ë¯¸ì§€"></a>ì• í”Œë¦¬ì¼€ì´ì…˜ ë„ì»¤ ì´ë¯¸ì§€</h3><p>Pythonìœ¼ë¡œ ì‘ì„±ëœ ê°„ë‹¨í•œ Flask ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•˜ê³  ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë¹Œë“œí•˜ê¸° ìœ„í•œ <strong>Dockerfile</strong> íŒŒì¼ì„ ì •ì˜í•©ë‹ˆë‹¤. </p><figure class="highlight python"><figcaption><span>application.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line"><span class="comment"># print a nice greeting.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span>(<span class="params">username = <span class="string">&quot;World&quot;</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;p&gt;Hello %s!&lt;/p&gt;\n&#x27;</span> % username</span><br><span class="line"></span><br><span class="line"><span class="comment"># EB looks for an &#x27;application&#x27; callable by default.</span></span><br><span class="line">application = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add a rule for the index page.</span></span><br><span class="line">application.add_url_rule(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;index&#x27;</span>, (<span class="keyword">lambda</span>: say_hello()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># run the app.</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># Setting debug to True enables debug output. This line should be</span></span><br><span class="line">    <span class="comment"># removed before deploying a production app.</span></span><br><span class="line">    application.debug = <span class="literal">True</span></span><br><span class="line">    application.run()</span><br></pre></td></tr></table></figure><blockquote><p>ì €ëŠ” íŒŒì´ì¬ì„ ë‹¤ë£¨ì§€ ì•ŠëŠ” ê°œë°œìì´ë¯€ë¡œ íŒŒì´ì¬ì„ ì„¤ì¹˜í•˜ê³  ê°€ìƒ í™˜ê²½ì„ ì‹œì‘í•˜ëŠ” ê²ƒì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.</p></blockquote><p>PIP ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Python ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ <strong>requirements.txt</strong>ì„ ì¤€ë¹„í•©ë‹ˆë‹¤.</p><figure class="highlight plaintext"><figcaption><span>requirements.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">click==8.0.1</span><br><span class="line">Flask==1.1.2</span><br><span class="line">itsdangerous==2.0.1</span><br><span class="line">Jinja2==3.0.1</span><br><span class="line">MarkupSafe==2.0.1</span><br><span class="line">Werkzeug==2.0.1</span><br></pre></td></tr></table></figure><p>ê·¸ë¦¬ê³  ë„ì»¤ í—ˆë¸Œì— ë“±ë¡ëœ Python ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ requirements.txtì„ ê¸°ì¤€ì˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ëŠ” <strong>Dockerfile</strong>ì„ ì •ì˜í•©ë‹ˆë‹¤. </p><figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> PORT=<span class="number">8000</span></span><br><span class="line"><span class="keyword">ARG</span> MAIN=application</span><br><span class="line"><span class="keyword">ARG</span> MAIN_APP=application</span><br><span class="line"><span class="keyword">ARG</span> WORKERS=application</span><br><span class="line"><span class="keyword">ARG</span> WORKERS=<span class="number">2</span></span><br><span class="line"><span class="keyword">ARG</span> WORKERCLASS=gevent</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PORT $&#123;PORT&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN $&#123;MAIN&#125;</span><br><span class="line"><span class="keyword">ENV</span> MAIN_APP $&#123;MAIN_APP&#125;</span><br><span class="line"><span class="keyword">ENV</span> WORKERS $&#123;WORKERS&#125;</span><br><span class="line"><span class="keyword">ENV</span> WORKERCLASS $&#123;WORKERCLASS&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.txt requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install gunicorn</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> $&#123;PORT&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;./entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="string">&quot;./entrypoint.sh&quot;</span></span></span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ìœ¼ë¡œ <a href="https://docs.gunicorn.org/en/stable/">Gunicorn WSGI ì„œë²„</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ Flask ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” <strong>ì—”íŠ¸ë¦¬í¬ì¸íŠ¸</strong>ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>entrypoint.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br><span class="line">gunicorn <span class="variable">$&#123;MAIN&#125;</span>:<span class="variable">$&#123;MAIN_APP&#125;</span> -b 0.0.0.0:<span class="variable">$&#123;PORT&#125;</span> -w <span class="variable">$&#123;WORKERS&#125;</span></span><br></pre></td></tr></table></figure><p>Dockerfileì„ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ìƒì„±í•˜ê³  ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</p><figure class="highlight zsh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">docker login https://registry.mambo.kr:5000</span><br><span class="line">Username: mambo</span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br><span class="line"></span><br><span class="line">docker build -t registry.mambo.kr:5000/mambo-py:<span class="built_in">test</span></span><br><span class="line">docker push registry.mambo.kr:5000/mambo-py:<span class="built_in">test</span></span><br><span class="line">docker <span class="built_in">logout</span> registry.mambo.kr:5000/mambo-py:<span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="í”Œë«í¼-í™•ì¥-êµ¬ì„±-íŒŒì¼"><a href="#í”Œë«í¼-í™•ì¥-êµ¬ì„±-íŒŒì¼" class="headerlink" title="í”Œë«í¼ í™•ì¥ êµ¬ì„± íŒŒì¼"></a>í”Œë«í¼ í™•ì¥ êµ¬ì„± íŒŒì¼</h3><p>Elastic Beanstalkì—ì„œë„ Nginx í”„ë¡ì‹œ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ê²½ìš° Nginx í”„ë¡ì‹œ ì˜µì…˜ì„ í™œì„±í™”ë˜ì–´ ìˆë”ë¼ë„ ë¬´ì‹œë©ë‹ˆë‹¤. Nginx í”„ë¡ì‹œ ì˜µì…˜ì„ ë¬´ì‹œí•œë‹¤ëŠ” ì˜ë¯¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì™€ í•¨ê»˜ <strong>.platform í´ë”ë¥¼ í¬í•¨ì‹œí‚¤ë”ë¼ë„ Nginx êµ¬ì„± íŒŒì¼ë¡œ ë³µì‚¬í•˜ì—¬ í™•ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤</strong>ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p><p>í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ì‹œí‚¨ <strong>.platform í´ë”ëŠ” /var/app/currentì— ì¶”ì¶œ</strong>ë˜ë¯€ë¡œ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì— ë„ì»¤ ì»¨í…Œì´ë„ˆì— ë³¼ë¥¨ì„ ì§€ì •í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><figure class="highlight nginx"><figcaption><span>docker-nginx.conf</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attribute">user</span>                    nginx;</span><br><span class="line"><span class="attribute">error_log</span>               /var/log/nginx/error.log <span class="literal">warn</span>;</span><br><span class="line"><span class="attribute">pid</span>                     /var/run/nginx.pid;</span><br><span class="line"><span class="attribute">worker_processes</span>        auto;</span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span>    <span class="number">32768</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">use</span>  <span class="literal">epoll</span>;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>         /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>    application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span>      main    <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                            <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                            <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">map</span> $http_upgrade $connection_upgrade &#123;</span><br><span class="line">      <span class="attribute">default</span>     <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">      <span class="attribute">listen</span>                <span class="number">80</span> default_server;</span><br><span class="line">      <span class="attribute">access_log</span>            /var/log/nginx/access.log main;</span><br><span class="line"></span><br><span class="line">      <span class="attribute">client_header_timeout</span> <span class="number">60</span>;</span><br><span class="line">      <span class="attribute">client_body_timeout</span>   <span class="number">60</span>;</span><br><span class="line">      <span class="attribute">keepalive_timeout</span>     <span class="number">60</span>;</span><br><span class="line">      <span class="attribute">gzip</span>                  <span class="literal">off</span>;</span><br><span class="line">      <span class="attribute">gzip_comp_level</span>       <span class="number">4</span>;</span><br><span class="line">      <span class="attribute">gzip_types</span>            text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span><br><span class="line"></span><br><span class="line">      <span class="comment"># Include the Elastic Beanstalk generated locations</span></span><br><span class="line">      <span class="attribute">include</span> conf.d/elasticbeanstalk/<span class="regexp">*.conf</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">           <span class="attribute">listen</span>                   <span class="number">443</span> ssl default_server;</span><br><span class="line">           <span class="attribute">server_name</span>              mambo.kr;</span><br><span class="line">           <span class="attribute">ssl_certificate</span>          /etc/nginx/cert/server-ca-bundle.pem;</span><br><span class="line">           <span class="attribute">ssl_certificate_key</span>      /etc/nginx/cert/server.key;</span><br><span class="line">           <span class="attribute">ssl_protocols</span>            TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">           <span class="attribute">ssl_ciphers</span>              HIGH:!aNULL:!MD5;</span><br><span class="line">           <span class="attribute">ssl_verify_client</span>        optional_no_ca;</span><br><span class="line"></span><br><span class="line">           <span class="attribute">location</span> / &#123;</span><br><span class="line">               <span class="attribute">proxy_pass</span>          http://app:8000;</span><br><span class="line">               <span class="attribute">proxy_http_version</span>  <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    Connection          $connection_upgrade;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    Upgrade             $http_upgrade;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    Host                $host;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    X-Real-IP           $remote_addr;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    X-Forwarded-For     $proxy_add_x_forwarded_for;</span><br><span class="line">               <span class="attribute">proxy_set_header</span>    X-SSL-CERT          $ssl_client_escaped_cert;</span><br><span class="line">               <span class="attribute">proxy_buffering</span>     <span class="literal">off</span>;</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë‹¨ì¼ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ê³  ELBë¡œ ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆì— ì§ì ‘ ì „ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆ êµ¬ì„±í•˜ë”ë¼ë„ ì§ì ‘ Nginx ì»¨í…Œì´ë„ˆë¥¼ í•¨ê»˜ êµ¬ì„±í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ìœ„ Nginx êµ¬ì„± íŒŒì¼ì€ ì¼ë°˜ì ì¸ Elastic Beanstalkì˜ ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ì§€ì›í•˜ëŠ” í”Œë«í¼ì—ì„œ ì œê³µí•˜ëŠ” Nginx í™•ì¥ êµ¬ì„± íŒŒì¼ê³¼ ë™ì¼í•˜ì§€ë§Œ <strong>ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Nginxê°€ ë³„ë„ì˜ ë…ë¦½ì ì¸ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼í•¨</strong>ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><h3 id="ë„ì»¤-ì»´í¬ì¦ˆ-ë¬¸ì„œ"><a href="#ë„ì»¤-ì»´í¬ì¦ˆ-ë¬¸ì„œ" class="headerlink" title="ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œ"></a>ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œ</h3><p>ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Nginx ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì •ì˜í•©ë‹ˆë‹¤. </p><figure class="highlight yaml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.21.1</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.platform/nginx/conf.d/elasticbeanstalk:/etc/nginx/conf.d/elasticbeanstalk</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.platform/nginx/docker-nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/nginx/cert:/etc/nginx/cert</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$&#123;EB_LOG_BASE_DIR&#125;/nginx:/var/log/nginx&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;80:80&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;443:443&#x27;</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">nginx_app</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.mambo.kr:5000/mambo-py:test</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">networks:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">nginx_app</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">nginx_app:</span></span><br></pre></td></tr></table></figure><p>Elastic Beanstalk í™˜ê²½ êµ¬ì„± íŒŒì¼ì— ì˜í•´ ê°€ì ¸ì˜¨ Nginx ì¸ì¦ì„œì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ëœ í”Œë«í¼ í™•ì¥ íŒŒì¼ì„ Nginx ì»¨í…Œì´ë„ˆ ë³¼ë¥¨ì— ì—°ê²°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œ ë°¸ëŸ°ì„œ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ë°¸ëŸ°ì„œì—ì„œ ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì€ Nginx ì»¨í…Œì´ë„ˆë¡œ ê²½ìœ í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆë¡œ ì „ë‹¬ë˜ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ í¬íŠ¸ëŠ” í˜¸ìŠ¤íŠ¸ë¡œ ë…¸ì¶œí•˜ì§€ ì•Šë„ë¡ í•˜ì—¬ ì§ì ‘ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p><h4 id="ì»¨í…Œì´ë„ˆ-í™˜ê²½-ë³€ìˆ˜"><a href="#ì»¨í…Œì´ë„ˆ-í™˜ê²½-ë³€ìˆ˜" class="headerlink" title="ì»¨í…Œì´ë„ˆ í™˜ê²½ ë³€ìˆ˜"></a>ì»¨í…Œì´ë„ˆ í™˜ê²½ ë³€ìˆ˜</h4><p>Beanstalk ì½˜ì†”ì—ì„œ ì„¤ì •í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì´ ì¶”ì¶œë˜ëŠ” /var/app/current ê²½ë¡œì— .env íŒŒì¼ì— í™˜ê²½ ë³€ìˆ˜ê°€ ì •ì˜ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ íŒŒì¼ì„ ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ ë³€ìˆ˜ ì°¸ì¡° íŒŒì¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì— ì •ì˜í•œ í™˜ê²½ ë³€ìˆ˜ê°€ ìš°ì„  ìˆœìœ„ë¥¼ ê°–ìŠµë‹ˆë‹¤. ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì— ì„¤ì •ëœ í™˜ê²½ ë³€ìˆ˜ë¥¼ Beanstalk í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ë”ë¼ë„ ë¬´ì‹œë˜ë‹ˆ ì£¼ì˜í•˜ì…”ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h3 id="ë„ì»¤-ë ˆì§€ìŠ¤íŠ¸ë¦¬-ì„œë²„-ì¸ì¦-íŒŒì¼"><a href="#ë„ì»¤-ë ˆì§€ìŠ¤íŠ¸ë¦¬-ì„œë²„-ì¸ì¦-íŒŒì¼" class="headerlink" title="ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ ì¸ì¦ íŒŒì¼"></a>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ ì¸ì¦ íŒŒì¼</h3><p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì—ì„œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ì„œëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ë§Œì•½, ê¸°ë³¸ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì¸ ë„ì»¤ í—ˆë¸Œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì§ì ‘ êµ¬ì¶•í•œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ê³¼ í†µì‹ í•´ì•¼í•œë‹¤ë©´ <strong>TLS í†µì‹ ì„ ìœ„í•œ ì¸ì¦ì„œ íŒŒì¼ì´ í•„ìš”</strong>í•©ë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´, ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì°¸ì¡°í•˜ê²Œ ë©ë‹ˆë‹¤.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">/etc/docker/certs.d/         &lt;-- Certificate directory</span><br><span class="line">â””â”€â”€ registry.mambo.kr:5000   &lt;-- Hostname:port</span><br><span class="line">    â”œâ”€â”€ client.cert          &lt;-- Client certificate</span><br><span class="line">    â”œâ”€â”€ client.key           &lt;-- Client key</span><br><span class="line">    â””â”€â”€ ca.crt               &lt;-- Certificate authority that signed the registry certificate</span><br></pre></td></tr></table></figure><blockquote><p>ìœˆë„ìš°ì™€ MacOS ì—ì„œëŠ” $USER/.docker/certs.d ì…ë‹ˆë‹¤.</p></blockquote><p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ë¡œê·¸ì¸í•˜ë©´ <strong>.dockercfg</strong> íŒŒì¼ì— í¬ë ˆë´ì…œ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.</p><figure class="highlight json"><figcaption><span>.dockercfg</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;https://registry.mambo.kr:5000&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;auth&quot;</span>: <span class="string">&quot;[Base64]username:password&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìœˆë„ìš° ë˜ëŠ” Mac OSì—ì„œëŠ” <strong>ìœˆë„ìš° ìê²© ì¦ëª… ê´€ë¦¬ì</strong> ë˜ëŠ” <strong>OSX Keychain</strong>ì— í¬ë ˆë´ì…œì„ ì €ì¥í•  ìˆ˜ ìˆëŠ”ë°ìš”. ì´ ê²½ìš°ì—ëŠ” <strong>.dockercfg ë˜ëŠ” config.json</strong> íŒŒì¼ì„ ì‚´í´ë³´ë”ë¼ë„ í¬ë ˆë´ì…œì„ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„ì»¤ ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ë˜ëŠ” í¬ë ˆë´ì…œì€ ì‚¬ìš©ì ì´ë¦„ê³¼ íŒ¨ìŠ¤ì›Œë“œ(username:password)ë¥¼ <a href="https://codebeautify.org/base64-encode">Base64ë¡œ ì¸ì½”ë”©</a>í•œ ê°’ì´ê¸° ë•Œë¬¸ì— <strong>ì§ì ‘ Base64ë¡œ ì¸ì½”ë”©</strong>í•˜ê³  ìœ„ì™€ ê°™ì´ <strong>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ .dockercfgë¥¼ ì •ì˜</strong>í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><h3 id="í™˜ê²½-êµ¬ì„±-íŒŒì¼"><a href="#í™˜ê²½-êµ¬ì„±-íŒŒì¼" class="headerlink" title="í™˜ê²½ êµ¬ì„± íŒŒì¼"></a>í™˜ê²½ êµ¬ì„± íŒŒì¼</h3><p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œ íŒŒì¼ë“¤ì„ S3 ë²„í‚·ì—ì„œ ê°€ì ¸ì˜¤ëŠ” êµ¬ì„± íŒŒì¼ì„ ì •ì˜í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="../elastic-beanstalk-s3-auth">Elastic Beanstalk S3 Authentication</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p><figure class="highlight yaml"><figcaption><span>.ebextensions/registry-cert.config</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">AWSEBAutoScalingGroup:</span></span><br><span class="line">        <span class="attr">Metadata:</span></span><br><span class="line">            <span class="attr">AWS::CloudFormation::Authentication:</span></span><br><span class="line">                <span class="attr">S3Auth:</span></span><br><span class="line">                    <span class="attr">type:</span> <span class="string">S3</span></span><br><span class="line">                    <span class="attr">buckets:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">mambo-cert</span></span><br><span class="line">                    <span class="attr">roleName:</span></span><br><span class="line">                        <span class="attr">Fn::GetOptionSetting:</span></span><br><span class="line">                            <span class="attr">Namespace:</span> <span class="string">aws:autoscaling:launchconfiguration</span></span><br><span class="line">                            <span class="attr">OptionName:</span> <span class="string">IamInstanceProfile</span></span><br><span class="line">                            <span class="attr">DefaultValue:</span> <span class="string">aws-elasticbeanstalk-ec2-role</span></span><br><span class="line"><span class="attr">files:</span></span><br><span class="line">    <span class="string">&quot;/etc/docker/certs.d/registry.mambo.kr:5000/client.cert&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/registry/client.cert</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line">    <span class="string">&quot;/etc/docker/certs.d/registry.mambo.kr:5000/client.key&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/registry/client.key</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line">    <span class="string">&quot;/etc/docker/certs.d/registry.mambo.kr:5000/ca.crt&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/registry/ca.crt</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line"></span><br><span class="line"><span class="attr">commands:</span></span><br><span class="line">    <span class="attr">99-remove-bak:</span></span><br><span class="line">        <span class="attr">cwd:</span> <span class="string">/etc/docker/certs.d/registry.mambo.kr:5000</span></span><br><span class="line">        <span class="attr">command:</span> <span class="string">rm</span> <span class="string">-f</span> <span class="string">*.bak</span></span><br></pre></td></tr></table></figure><h3 id="ë„ì»¤-êµ¬ì„±-íŒŒì¼"><a href="#ë„ì»¤-êµ¬ì„±-íŒŒì¼" class="headerlink" title="ë„ì»¤ êµ¬ì„± íŒŒì¼"></a>ë„ì»¤ êµ¬ì„± íŒŒì¼</h3><p>ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” ë„ì»¤ì˜ ë¡œê·¸ì¸ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ì¸ì¦í•˜ê³  ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•˜ê±°ë‚˜ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Elastic Beanstalk í™˜ê²½ì—ì„œëŠ” ì§ì ‘ ë¡œê·¸ì¸ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ ë„ì»¤ì—ì„œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ íŒŒì¼ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì•ì„œ ì•Œì•„ë³¸ <strong>.dockercfg</strong> íŒŒì¼ì„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.</p><figure class="highlight json"><figcaption><span>Dockerrun.aws.json</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;AWSEBDockerrunVersion&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;Authentication&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;bucket&quot;</span>: <span class="string">&quot;mambo-cert&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;key&quot;</span>: <span class="string">&quot;registry/.dockercfg&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì™€ í•¨ê»˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ë˜ëŠ” ìœ„ ë„ì»¤ êµ¬ì„± íŒŒì¼ì€ Dockerrun.aws.json v3ì„ ì‚¬ìš©í•˜ë©° <strong>mambo-cert/registry/.dockercfg</strong> íŒŒì¼ì„ <strong>/root/.docker/config.json</strong>ì— í¬ë ˆë´ì…œ ì •ë³´ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.</p><blockquote><p>EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ IAM Roleì´ S3 ë²„í‚·ì— ëŒ€í•œ ì½ê¸° ê¶Œí•œì„ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤.</p></blockquote><h3 id="ì• í”Œë¦¬ì¼€ì´ì…˜-ì†ŒìŠ¤-ë²ˆë“¤"><a href="#ì• í”Œë¦¬ì¼€ì´ì…˜-ì†ŒìŠ¤-ë²ˆë“¤" class="headerlink" title="ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤"></a>ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤</h3><p>Elastic Beanstalkì˜ ë„ì»¤ í”Œë«í¼ í™˜ê²½ì— ë°°í¬í•  ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤. </p><ul><li>docker-compose.yml</li><li>Dockerrun.aws.json</li><li>.platform</li><li>.ebextensions</li></ul><p>ìœ„ íŒŒì¼ë“¤ì„ <strong>zip ëª…ë ¹ì–´ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì„ ìƒì„±</strong>í•©ë‹ˆë‹¤.</p><figure class="highlight sh"><figcaption><span>Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">zip app-bundle.zip -r docker-compose.yml Dockerrun.aws.json .platform .ebextensions</span><br></pre></td></tr></table></figure><p>ì´ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Hello Worldê°€ í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/beanstalk-docker-platform/web.png"></p><p>ì´ë ‡ê²Œí•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê³  ì‚¬ì„¤ë¡œ êµ¬ì¶•í•œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ë“±ë¡ëœ ì´ë¯¸ì§€ë¥¼ í†µí•´ Elastic Beanstalkì˜ ë„ì»¤ í”Œë«í¼ì„ í™œìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ &lt;strong&gt;Elastic Beanstalkì—ì„œ ì§€ì›í•˜ëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ë°©ë²•&lt;/strong&gt;ì— ëŒ€í•˜ì—¬ ì•Œì•„ë´…ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜</summary>
      
    
    
    
    
    <category term="Beanstalk" scheme="https://kdevkr.github.io/tags/Beanstalk/"/>
    
    <category term="Docker" scheme="https://kdevkr.github.io/tags/Docker/"/>
    
    <category term="Python" scheme="https://kdevkr.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>IP ëŒ€ì—­ ê·¸ë¦¬ê³  ìœ„ì¹˜ì¶”ì </title>
    <link href="https://kdevkr.github.io/ip-band-and-location-tracking/"/>
    <id>https://kdevkr.github.io/ip-band-and-location-tracking/</id>
    <published>2021-09-05T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ IT ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” IP ëŒ€ì—­ê³¼ NAT ê·¸ë¦¬ê³  IPë¥¼ í™œìš©í•œ ìœ„ì¹˜ ì¶”ì ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. </p><h2 id="IP-ëŒ€ì—­"><a href="#IP-ëŒ€ì—­" class="headerlink" title="IP ëŒ€ì—­"></a>IP ëŒ€ì—­</h2><p>IT ì¸í”„ë¼ì—ì„œ IPëŠ” í¼ë¸”ë¦­ IP ê·¸ë¦¬ê³  í”„ë¼ì´ë¹— IPë¡œ êµ¬ë¶„ë˜ì–´ì§‘ë‹ˆë‹¤. <strong>í¼ë¸”ë¦­ IP</strong>ëŠ” ì¸í„°ë„·ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê³µì¸ IPë¥¼ ë§í•˜ë©° <strong>í”„ë¼ì´ë¹— IP</strong>ëŠ” ê°œì¸ì ìœ¼ë¡œ êµ¬ì„±í•œ ë„¤íŠ¸ì›Œí¬ ë§ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‚¬ì„¤ IPë¥¼ ë§í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, <strong>ì‚¬ì„¤ë§ IPë¡œëŠ” ì™¸ë¶€ ì¸í„°ë„· ì ‘ì†ì„ í†µí•´ êµ¬ê¸€ ë˜ëŠ” ë„¤ì´ë²„ ì‚¬ì´íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong></p><h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc1631">NAT(IP Network Address Translator)</a>ëŠ” IPv4 ì£¼ì†Œì²´ê³„ì˜ í•œê³„ë¡œ ì¸í•˜ì—¬ IP ì£¼ì†Œê°€ ë¶€ì¡±í•´ì§€ëŠ” í˜„ìƒì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. NATëŠ” <strong>ë‚´ë¶€ ì‚¬ì„¤ë§ IPë¥¼ ê°€ì§€ê³  ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë§ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ê³µì¸ IPë¡œ ë³€í™˜</strong>í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê³µìœ ê¸°ì—ëŠ” NAT ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê³µìœ ê¸°ì—ì„œ 192.168.0.2ì™€ ê°™ì€ ì£¼ì†Œë¥¼ í• ë‹¹í•˜ë”ë¼ë„ ì™¸ë¶€ ì¸í„°ë„·ì— ì ‘ì†í•  ê²½ìš°ì—ëŠ” ê³µì¸ IPë¡œ ë³€í™˜í•˜ì—¬ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤.</p><p>ì´ëŸ¬í•œ ì°¨ì´ë¡œ ìœˆë„ìš° ì»´í“¨í„°ì˜ ëª…ë ¹í”„ë¡¬í”„íŠ¸ì—ì„œ <strong>ifconfig</strong> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ <strong>ê³µìœ ê¸°ì—ì„œ í• ë‹¹í•œ ì‚¬ì„¤ IP</strong>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ì•„ì´í”¼ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” <a href="https://ipconfig.io/">ipconfig.io</a>, <a href="https://ifconfig.io/">ifconfig.io</a>, <a href="https://ifconfig.me/">ifconfig.me</a>ì— ì ‘ì†í•´ë³´ë©´ ì‚¬ì„¤ IPê°€ ì•„ë‹Œ <strong>ê³µì¸ IP</strong>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-01.png" alt="ë‚´ë¶€ ì•„ì´í”¼ ì¡°íšŒ"></p><p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-02.png" alt="ì™¸ë¶€ ì•„ì´í”¼ ì¡°íšŒ"></p><h3 id="IP-ìœ„ì¹˜-ì¡°íšŒ"><a href="#IP-ìœ„ì¹˜-ì¡°íšŒ" class="headerlink" title="IP ìœ„ì¹˜ ì¡°íšŒ"></a>IP ìœ„ì¹˜ ì¡°íšŒ</h3><p>ìœ„ì—ì„œ í™•ì¸í•œ ê³µì¸ IPì— ëŒ€í•´ì„œ ìœ„ì¹˜ì¶”ì  ì‚¬ì´íŠ¸ë¼ëŠ” ê³³ì—ì„œ ì¡°íšŒë¥¼ í•´ë³´ë©´ ì‹¤ì œë¡œ ì‚´ê³ ìˆëŠ” ê³³ ë³´ë‹¤ëŠ” í„°ë¬´ë‹ˆì—†ëŠ” ê³³ì„ ë³´ì—¬ì£¼ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ìœ„ì¹˜ì¶”ì  ì‚¬ì´íŠ¸ì—ì„œ IPì— ëŒ€í•œ ìœ„ì¹˜ ì¡°íšŒê°€ ì •í™•í•˜ì§€ ì•Šì€ ì´ìœ ëŠ” <strong>ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ì(ISP)ì¸ KT ì¸í„°ë„·ê³¼ ê°™ì€ ì—…ì²´ì—ì„œ ì§€ì—­ì„ ì •í•´ì„œ IP ëŒ€ì—­ì„ í• ë‹¹</strong>í•˜ê³  ê·¸ ì§€ì—­ë‚´ì—ì„œ DHCPë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì—ì„œ ì œê³µí•˜ëŠ” <a href="https://í›„ì´ì¦ˆê²€ìƒ‰.í•œêµ­/">WHOIS</a> ì„œë¹„ìŠ¤ë¥¼ í†µí•´ IPë¥¼ ì¡°íšŒí•´ë³´ë©´ ì¡°ê¸ˆ ë” ìƒì„¸í•œ ì§€ì—­ì„ ì•ˆë‚´í•´ì¤ë‹ˆë‹¤.</p><p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-03.png" alt="WHOIS ì¡°íšŒ"></p><p>ì‹¤ì œë¡œ ì œê°€ ì‚´ê³  ìˆëŠ” ê²½ê¸°ë„ ì–‘ì£¼ì‹œì—ì„œ ì‚¬ìš©ì¤‘ì¸ IPë¼ê³  ì•ˆë‚´í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì—ì„œ ë³´ë‹¤ ì •í™•í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” <strong>KT ì¸í„°ë„·ê³¼ ê°™ì€ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì—ì„œ í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì— ì§€ì—­ì— ëŒ€í•œ IP ëŒ€ì—­ ì •ë³´ë¥¼ ë“±ë¡</strong>í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ê³µì¸ IP ëŒ€ì—­ì˜ <strong>218.152.0.0ë¶€í„° 218.159.255.255ëŠ” KT ì¸í„°ë„·ì—ì„œ ì‚¬ìš©ì¤‘ì¸ IP ëŒ€ì—­</strong>ì´ë©° ê·¸ ì¤‘ì—ì„œ 218.156.190.Xì— ëŒ€í•œ IP ëŒ€ì—­ì€ ê²½ê¸°ë„ ì–‘ì£¼ì‹œì—ì„œ ì‚¬ìš©í•˜ë„ë¡ í• ë‹¹í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì¹˜ ì¶”ì  ì‚¬ì´íŠ¸ì—ì„œ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì˜ IP ëŒ€ì—­ì€ ì•Œ ìˆ˜ ìˆì§€ë§Œ <strong>íŠ¹ì • IPê°€ ì‹¤ì œë¡œ KT ì¸í„°ë„·ì´ ì–´ë–¤ ì§€ì—­ì— í• ë‹¹í–ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì—</strong> KT ì¸í„°ë„·ì— ëŒ€í•œ ë³¸ì‚¬ ë˜ëŠ” ì§€ì—­ì ìœ¼ë¡œ í¼ì ¸ìˆëŠ” KT ì¸í„°ë„· ì¥ë¹„ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ëŒ€ì‹  í‘œì‹œí•´ì£¼ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p><blockquote><p>ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìëŠ” ì§€ì—­ì— ëŒ€í•˜ì—¬ IP ëŒ€ì—­ì„ í˜•ì„±í•˜ê¸° ë•Œë¬¸ì— íŠ¹ì • IP ëŒ€ì—­ì—ì„œ íŠ¸ë˜í”½ ê³¼ë¶€í™”ê°€ ë°œìƒí•˜ë©´ ì¸í„°ë„· ì†ë„ë¥¼ ì œí•œí•˜ëŠ” ë½ì„ ê±¸ê¸°ë„ í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì¸í„°ë„· ì†ë„ê°€ ì¶©ë¶„í•˜ê²Œ ë‚˜ì˜¤ì§€ ì•Šì•„ì„œ ì¸í„°ë„· ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ í™•ì¸í•´ë³´ë©´ ì£¼ë³€ ì¥ë¹„ì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ë½ í•´ì œë¥¼ ìš”ì²­í•˜ëŠ” ê±¸ ë§ì´ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.</p><p>ì§€ë‚œ 4ì›”ì— ë‚œë¦¬ì˜€ë˜ <a href="https://www.seoul.co.kr/news/newsView.php?id=20210420500154">KT â€˜10ê¸°ê°€ ì¸í„°ë„·â€™ ì†ë„ì €í•˜ ë…¼ë€ì— ë°©í†µìœ„ ì¡°ì‚¬ ë‚˜ì„ ë‹¤</a>ì™€ ê°™ì€ ê²½ìš°ë„ íŠ¸ë˜í”½ ê·œëª¨ì— ë”°ë¼ ì œí•œì„ ë‘” ê²ƒì¸ë° ê¸°ìˆ ì ìœ¼ë¡œ ê²°í•¨ì´ ìˆì§€ ì•Šì•˜ë‚˜ ì‹¶ë„¤ìš”.</p></blockquote><h3 id="í˜„ì‹¤ê³¼-ì˜í™”ëŠ”-ë‹¤ë¥´ë‹¤"><a href="#í˜„ì‹¤ê³¼-ì˜í™”ëŠ”-ë‹¤ë¥´ë‹¤" class="headerlink" title="í˜„ì‹¤ê³¼ ì˜í™”ëŠ” ë‹¤ë¥´ë‹¤"></a>í˜„ì‹¤ê³¼ ì˜í™”ëŠ” ë‹¤ë¥´ë‹¤</h3><p>ì•„ë¬´íŠ¼, ì˜í™”ì—ì„œëŠ” IP ì •ë³´ë¥¼ ì•Œê²Œë˜ë©´ í•´ë‹¹ IPë¥¼ ì‚¬ìš©í•˜ëŠ” ë²”ì£„ìì˜ ìœ„ì¹˜ë¥¼ ì •í™•íˆ ì•„ëŠ” ê²ƒì²˜ëŸ¼ ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” ê²½ì°°ì´ í•„ìš”ì— ì˜í•´ ì›¹ ì„œë¹„ìŠ¤ íšŒì‚¬ì— íŠ¹ì • ì•„ì´ë””ì— ëŒ€í•œ IP ì´ë ¥ ì •ë³´ë¥¼ ìš”êµ¬í•˜ëŠ” ê³µì¡° ìš”ì²­ì„ í•˜ê²Œ ë˜ê³  <strong>ì œê³µë°›ì€ IPë¥¼ ë‹¤ì‹œ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì¸ KT ë³¸ì‚¬ì—ê²Œ IP ëŒ€ì—­ì— ëŒ€í•œ ì •ë³´ë¥¼ ìš”ì²­</strong>í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìµœì¢…ì ìœ¼ë¡œëŠ” <strong>ì •í™•í•œ ìœ„ì¹˜ëŠ” ì•„ë‹ˆë”ë¼ë„ ëŒ€ëµì ìœ¼ë¡œ ìë©´ë™ê¹Œì§€</strong>ëŠ” ì•Œê²Œë©ë‹ˆë‹¤.</p><p>ë²”ì£„ìê°€ ì‚¬ìš©í•˜ëŠ” IPê°€ í•´ì™¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³µì¸ IP ì •ë³´ë¡œ ì¡°íšŒë˜ëŠ” ê²½ìš°ì—ëŠ” ë” ê¹Œë‹¤ë¡œì›Œì§€ëŠ” ê²ƒì€ ë§ìŠµë‹ˆë‹¤. í•´ë‹¹ IP ëŒ€ì—­ì„ í• ë‹¹í•˜ëŠ” ì¸í„°ë„· ì„œë¹„ìŠ¤ ì—…ì²´ì—ê²Œ ê³µì¡° ìš”ì²­ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ <strong>êµ­ì œí˜•ì‚¬ì‚¬ë²• ê³µì¡°ë²•ì— ì˜ê±°</strong>í•´ì„œ êµ­ê°€ ê°„ ê³µì¡° ìš”ì²­ì„ í•˜ê³  ì œê³µë°›ì•„ì•¼í•©ë‹ˆë‹¤. ê²½ì°°ë¶„ë“¤ì´ ë‹´ë‹¹í•˜ëŠ” ì‚¬ê±´ë“¤ì´ í•˜ë‚˜ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•´ì™¸ IPì— ëŒ€í•œ ì¶”ì ì„ êº¼ë ¤í•˜ëŠ”ê²Œ ì–´ì°Œë³´ë©´ ë‹¹ì—°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  <a href="https://www.youtube.com/watch?v=aWqK1b5w9Yo">ì„± ì°©ì·¨ ì˜ìƒë¬¼ì„ ìœ í¬í•œ ì‚¬ê±´</a>ì˜ ìš©ì˜ìë„ ì§‘ìš”í•œ ì¶”ì  ëì— ì¡ì•„ë‚´ê¸°ë„ í•˜ì£ . í•´ì™¸ VPN ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë©´ ì¶”ì í•  ìˆ˜ ì—†ë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì€ë° <strong>ì‚¬ì‹¤ì€ ì¶”ì ì€ ë˜ì§€ë§Œ ê·€ì°®ì„ ìˆ˜ ìˆë‹¤</strong>ë¼ê³  ë´ì•¼ê² ì£ .</p><h2 id="ì‹¤ë¬´-í™˜ê²½ì—ì„œì˜-IP"><a href="#ì‹¤ë¬´-í™˜ê²½ì—ì„œì˜-IP" class="headerlink" title="ì‹¤ë¬´ í™˜ê²½ì—ì„œì˜ IP"></a>ì‹¤ë¬´ í™˜ê²½ì—ì„œì˜ IP</h2><p>ê·¸ëŸ¬ë©´ ì‹¤ë¬´ í™˜ê²½ì¸ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” IPì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. íšŒì‚¬ì—ì„œë„ ìì²´ ë‚´ë¶€ ì‚¬ì„¤ë§ì„ êµ¬ì¶•í•˜ì—¬ íšŒì‚¬ ë‚´ë¶€ì—ì„œ ê·¼ë¬´í•˜ëŠ” ì§ì›ë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” IPë¥¼ í• ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²ƒì€ íšŒì‚¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë‹´ë‹¹ìê°€ ìˆ˜í–‰í•©ë‹ˆë‹¤. </p><h3 id="NAT-ì•„ì´í”¼"><a href="#NAT-ì•„ì´í”¼" class="headerlink" title="NAT ì•„ì´í”¼"></a>NAT ì•„ì´í”¼</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ë¼ìš°í„° ì¥ë¹„ë¡œë¶€í„° DHCPë¡œ ë™ì ìœ¼ë¡œ í• ë‹¹ë°›ëŠ” ë‚´ë¶€ ì•„ì´í”¼ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ì§€ë§Œ ê²½ìš°ì— ë”°ë¼ì„œëŠ” ì™¸ë¶€ ì¸í„°ë„·ë§ì—ì„œ íšŒì‚¬ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ NAT ì•„ì´í”¼ë¥¼ ìš”ì²­í•´ì•¼í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.</p><p style="text-align:center; font-weight:bold;">"ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ NAT ì•„ì´í”¼ê°€ í•„ìš”í•©ë‹ˆë‹¤."</p><p>ê·¸ëŸ¬ë©´ ë„¤íŠ¸ì›Œí¬ ë‹´ë‹¹ìëŠ” NAT ì•„ì´í”¼ê°€ í•„ìš”í•œ ì‚¬ìœ ë¥¼ ê²€í† í•˜ê³  NAT ì•„ì´í”¼ì™€ í•¨ê»˜ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë„ë©”ì¸ ì£¼ì†Œì™€ í¬íŠ¸ ì •ë³´ë¥¼ ì „ë‹¬í•´ì¤ë‹ˆë‹¤. íšŒì‚¬ ë¼ìš°í„° ì¥ë¹„ì—ì„œëŠ” ì™¸ë¶€ íŠ¸ë˜í”½ì˜ ë„ë©”ì¸ê³¼ í¬íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì—°ê²°ëœ NAT ì•„ì´í”¼ë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•´ì¤Œìœ¼ë¡œì¨ ë‚´ë¶€ ì‚¬ì„¤ë§ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><p>ì½”ë¡œë‚˜ 19ë¡œ ì¸í•˜ì—¬ <strong>ëŒ€ë¶€ë¶„ì˜ IT ê¸°ì—…ë“¤ì´ ì¬íƒê·¼ë¬´ë¥¼ í—ˆìš©</strong>í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•„ìš”ì— ì˜í•´ íšŒì‚¬ë¡œ ì¶œê·¼í•˜ê¸°ë„ í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ì—…ë¬´ëŠ” ì§‘ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê°œë°œ ì¡°ì§ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë§ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•œ íšŒì‚¬ ë‚´ë¶€ ì‚¬ì„¤ë§ ì„œë²„ì— êµ¬ì¶•í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì™€ ê°™ì€ í´ë¼ìš°ë“œ í™˜ê²½ì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ë”ë¼ë„ <strong>SSHë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì€ íšŒì‚¬ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì•„ì´í”¼ ëŒ€ì—­ì— ëŒ€í•´ì„œë§Œ í—ˆìš©</strong>í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p><p>ì§‘ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³µì¸ IPëŠ” íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•„ì´í”¼ ëŒ€ì—­ì´ ì•„ë‹ˆë¯€ë¡œ SSH ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— íšŒì‚¬ ì™¸ë¶€ì—ì„œë„ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•„ì´í”¼ ëŒ€ì—­ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” VPNì„ í™œìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì œê°€ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì—ì„œëŠ” <strong>TLS í”„ë¡œí† ì½œì„ ì ìš©í•˜ì—¬ í†µì‹ í•˜ëŠ” OpenVPNì„ ì‚¬ìš©</strong>í•˜ê³  ìˆìœ¼ë©° ì—¬ìì¹œêµ¬ê°€ ì¼í•˜ëŠ” íšŒì‚¬ì—ì„œëŠ” Pulse Secureì™€ í•¨ê»˜ <a href="https://vip.symantec.com/">VIP Access</a>ì„ ì‚¬ìš©í•˜ì—¬ 2ë‹¨ê³„ ì¸ì¦ê¹Œì§€ ìš”êµ¬í•˜ê¸°ë„ í•©ë‹ˆë‹¤.</p><p>ì´ ê¸€ì„ ë³´ì‹  ì—¬ëŸ¬ë¶„ë“¤ë„ ì¸í„°ë„· ì ‘ì†ì„ ìœ„í•´ í• ë‹¹ë°›ì€ ì™¸ë¶€ ì•„ì´í”¼ë¥¼ í™•ì¸í•´ë³´ê³  í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì˜ WHOIS ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì–´ëŠ ì§€ì—­ê¹Œì§€ ì¶”ì ë˜ëŠ”ì§€ ê²½í—˜í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ IT ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” IP ëŒ€ì—­ê³¼ NAT ê·¸ë¦¬ê³  IPë¥¼ í™œìš©í•œ ìœ„ì¹˜ ì¶”ì ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. &lt;/p&gt;
&lt;h2 id=&quot;IP-ëŒ€ì—­&quot;&gt;&lt;a href=&quot;#IP-ëŒ€ì—­&quot; class=&quot;headerlink&quot;</summary>
      
    
    
    
    
    <category term="IP Band" scheme="https://kdevkr.github.io/tags/IP-Band/"/>
    
    <category term="NAT" scheme="https://kdevkr.github.io/tags/NAT/"/>
    
    <category term="Location Tracking" scheme="https://kdevkr.github.io/tags/Location-Tracking/"/>
    
  </entry>
  
  <entry>
    <title>Elastic Beanstalk S3 Authentication</title>
    <link href="https://kdevkr.github.io/elastic-beanstalk-s3-auth/"/>
    <id>https://kdevkr.github.io/elastic-beanstalk-s3-auth/</id>
    <published>2021-09-02T00:00:00.000Z</published>
    <updated>2021-12-29T14:23:25.031Z</updated>
    
    <content type="html"><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p><p>ì˜¤ëŠ˜ì€ Elastic Beanstalk êµ¬ì„± ì‹œ S3 í”„ë¼ì´ë¹— ì €ì¥ì†Œì—ì„œ íŒŒì¼ì„ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="../tls-offload">TLS ì˜¤í”„ë¡œë“œ</a>ì—ì„œ Nginx ì—ì„œ ì‚¬ìš©í•  SSL ì¸ì¦ì„œë¥¼ Beanstalk í™˜ê²½ êµ¬ì„± íŒŒì¼ì˜ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/customize-containers-ec2.html#linux-files">íŒŒì¼ í‚¤</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ë³´ì•ˆì„ ì¤‘ìš”ì‹œí•˜ëŠ” íšŒì‚¬ë¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë‹¨ê³„ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•´ì•¼í•©ë‹ˆë‹¤.</p><h2 id="Beanstalk-S3-Auth"><a href="#Beanstalk-S3-Auth" class="headerlink" title="Beanstalk S3 Auth"></a>Beanstalk S3 Auth</h2><p>Beanstalk í™•ì¥ êµ¬ì„± íŒŒì¼ì—ì„œ CloudFormationì˜ <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-authentication.html">AWS::CloudFormation::Authentication</a> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ì§€ì •í•  ìˆ˜ ìˆê³  ì¸ì¦ì„ ìˆ˜í–‰í•˜ì—¬ S3 ì €ì¥ì†Œì— ë“±ë¡ë˜ì–´ìˆëŠ” ì¸ì¦ì„œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/https-storingprivatekeys.html">í”„ë¼ì´ë¹— í‚¤ë¥¼ Amazon S3ì— ì•ˆì „í•˜ê²Œ ì €ì¥</a>ì—ì„œ ì•Œë ¤ì£¼ëŠ” ëŒ€ë¡œ Beanstalk êµ¬ì„± ì‹œ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/ebextensions-functions.html#ebextensions-functions-getoptionsetting">Fn::GetOptionSetting</a> í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p><h3 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h3><p>ë¨¼ì €, <strong>AWS::CloudFormation::Authentication</strong> ë¦¬ì†ŒìŠ¤ë¡œ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ S3 ë²„í‚·ì— ë³´ì•ˆ ì •ì±…ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Beanstalkìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²½ìš° <strong>aws-elasticbeanstalk-ec2-role</strong>ì„ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ì¸ì¦ì„œ íŒŒì¼ì´ ì €ì¥ëœ S3 ë²„í‚·ì€ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ê°€ ì°¨ë‹¨ë˜ì–´ìˆìœ¼ë¯€ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/add-bucket-policy.html">ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì •ì±…ì„ ì¶”ê°€</a>í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/elastic-beanstalk-s3-auth-01.png"></p><h3 id="Extend-Nginx"><a href="#Extend-Nginx" class="headerlink" title="Extend Nginx"></a>Extend Nginx</h3><p>ì´ì œ ì´ì „ì— ì‘ì„±í•˜ì˜€ë˜ SSL ì¸ì¦ì„œë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” êµ¬ì„± íŒŒì¼ì„ S3ì—ì„œ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•´ì•¼í•©ë‹ˆë‹¤. files í‚¤ì˜ <strong>content</strong> í•­ëª©ì„ ì œê±°í•˜ê³  ë‹¤ìŒì˜ í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p><ul><li>source : S3 ì¸ì¦ì„œ ì˜¤ë¸Œì íŠ¸ URL</li><li>authentication : ì¸ì¦ ì†ì„± ì´ë¦„</li></ul><figure class="highlight yaml"><figcaption><span>.ebextensions/nginx-cert.config</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">AWSEBAutoScalingGroup:</span></span><br><span class="line">        <span class="attr">Metadata:</span></span><br><span class="line">            <span class="attr">AWS::CloudFormation::Authentication:</span></span><br><span class="line">                <span class="attr">S3Auth:</span></span><br><span class="line">                    <span class="attr">type:</span> <span class="string">S3</span></span><br><span class="line">                    <span class="attr">buckets:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">mambo-cert</span></span><br><span class="line">                    <span class="attr">roleName:</span></span><br><span class="line">                        <span class="attr">Fn::GetOptionSetting:</span></span><br><span class="line">                            <span class="attr">Namespace:</span> <span class="string">aws:autoscaling:launchconfiguration</span></span><br><span class="line">                            <span class="attr">OptionName:</span> <span class="string">IamInstanceProfile</span></span><br><span class="line">                            <span class="attr">DefaultValue:</span> <span class="string">aws-elasticbeanstalk-ec2-role</span></span><br><span class="line"><span class="attr">files:</span></span><br><span class="line">    <span class="string">&quot;/etc/nginx/cert/server.crt&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/server.crt</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line">    <span class="string">&quot;/etc/nginx/cert/server.key&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/server.key</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line">    <span class="string">&quot;/etc/nginx/cert/server.ca-bundle&quot;</span><span class="string">:</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">&quot;000400&quot;</span></span><br><span class="line">        <span class="attr">owner:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">source:</span> <span class="string">https://mambo-cert.s3.ap-northeast-2.amazonaws.com/server-ca-bundle</span></span><br><span class="line">        <span class="attr">authentication:</span> <span class="string">S3Auth</span></span><br><span class="line"></span><br><span class="line"><span class="attr">commands:</span></span><br><span class="line">    <span class="attr">00-chain-ca-bundle:</span></span><br><span class="line">        <span class="attr">cwd:</span> <span class="string">/etc/nginx/cert</span></span><br><span class="line">        <span class="attr">command:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            cat server.crt server.ca-bundle &gt; server-ca.pem</span></span><br><span class="line"><span class="string">            chown nginx:nginx server-ca.pem</span></span><br><span class="line"><span class="string">            chmod 400 server-ca.pem</span></span><br><span class="line"><span class="string"></span>    <span class="attr">99-remove-bak:</span></span><br><span class="line">        <span class="attr">cwd:</span> <span class="string">/etc/nginx/cert</span></span><br><span class="line">        <span class="attr">command:</span> <span class="string">rm</span> <span class="string">-f</span> <span class="string">*.bak</span></span><br></pre></td></tr></table></figure><h3 id="Beanstalk-Resources"><a href="#Beanstalk-Resources" class="headerlink" title="Beanstalk Resources"></a>Beanstalk Resources</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ë“¤ì€ CloudFormationìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë©° Elastic Beanstalk í™˜ê²½ë„ <strong>CloudFormation ìŠ¤íƒì„ êµ¬ì„±</strong>í•˜ì—¬ ë§Œë“¤ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.</p><figure class="highlight yaml"><figcaption><span>.ebextensions/nginx-cert.config</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">AWSEBAutoScalingGroup:</span></span><br><span class="line">        <span class="attr">Metadata:</span></span><br><span class="line">            <span class="attr">AWS::CloudFormation::Authentication:</span></span><br><span class="line">                <span class="attr">S3Auth:</span></span><br><span class="line">                    <span class="attr">type:</span> <span class="string">S3</span></span><br><span class="line">                    <span class="attr">buckets:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">mambo-cert</span></span><br><span class="line">                    <span class="attr">roleName:</span></span><br><span class="line">                        <span class="attr">Fn::GetOptionSetting:</span></span><br><span class="line">                            <span class="attr">Namespace:</span> <span class="string">aws:autoscaling:launchconfiguration</span></span><br><span class="line">                            <span class="attr">OptionName:</span> <span class="string">IamInstanceProfile</span></span><br><span class="line">                            <span class="attr">DefaultValue:</span> <span class="string">aws-elasticbeanstalk-ec2-role</span></span><br></pre></td></tr></table></figure><p>ê·¸ë˜ì„œ êµ¬ì„± íŒŒì¼ì˜ ë¦¬ì†ŒìŠ¤ í‚¤ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì€ CloudFormation í…œí”Œë¦¿ì— ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” Beanstalk í™˜ê²½ ì‹œì‘ ì‹œ ë§Œë“¤ì–´ì§€ëŠ” CloudFormation ìŠ¤íƒì— ë¯¸ë¦¬ ì •ì˜ëœ ì›¹ ì„œë²„ í™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤ í•­ëª©ì¸ <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">AWSEBAutoScalingGroup</a>ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. </p><p>ê·¸ë¦¬ê³  AWSEBAutoScalingGroupì—ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html">LaunchConfiguration(AWS::AutoScaling::LaunchConfiguration)</a>ë¼ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì‹œì‘ êµ¬ì„±ì„ ì •ì˜í•˜ëŠ” í•­ëª©ì´ ìˆìœ¼ë©° ì‹œì‘ êµ¬ì„±ì— ì •ì˜ëœ ë‚´ìš© ì¤‘ì—ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html#cfn-as-launchconfig-iaminstanceprofile">IamInstanceProfile</a> ì†ì„±ì´ ìˆìŠµë‹ˆë‹¤. IamInstanceProfile ì†ì„±ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ì§€ì •ëœ <strong>IAM Role</strong>ì— ëŒ€í•œ ì´ë¦„ì„ ì œê³µí•©ë‹ˆë‹¤.</p><p>ë”°ë¼ì„œ, Beanstalk í™˜ê²½ êµ¬ì„± ì‹œ ì„ íƒí•œ IAM Roleì„ ê°€ì ¸ì™€ì„œ <strong>AWS::CloudFormation::Authentication</strong> ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•´ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ì§€ì •í•œ ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì•ì„œ aws-elasticbeanstalk-ec2-roleì´ë¼ëŠ” IAM Roleì´ ì¸ì¦ì„œê°€ ì €ì¥ëœ S3 ë²„í‚·ì— ì½ê¸° ê¶Œí•œì„ ë¶€ì—¬í–ˆê¸° ë•Œë¬¸ì— íŒŒì¼ í‚¤ì— ì •ì˜ëœ íŒŒì¼ì„ ìƒì„±í•  ë•Œ ì™¸ë¶€ ì†ŒìŠ¤(S3 ì €ì¥ì†Œ)ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œëœ ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•´ì„œ ìš°ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ì§€ ì•Šê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” S3 ë²„í‚·ì— ì¸ì¦ì„œë¥¼ ì €ì¥í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì„±ì„ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ì´ ê¸€ì„ ë³´ì‹œëŠ” ë¶„ë“¤ì´ ì¸ì¦ì„œì˜ ê°œì¸í‚¤ì™€ ê°™ì€ ë¯¼ê°í•œ íŒŒì¼ë“¤ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨í•˜ê³  ìˆë‹¤ë©´ í”„ë¼ì´ë¹— S3 ì €ì¥ì†Œì— ì €ì¥í•˜ì—¬ ë” ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;p&gt;ì˜¤ëŠ˜ì€ Elastic Beanstalk êµ¬ì„± ì‹œ S3 í”„ë¼ì´ë¹— ì €ì¥ì†Œì—ì„œ íŒŒì¼ì„ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤. ì§€ë‚œ &lt;a href=&quot;../tls-offload&quot;&gt;TLS ì˜¤í”„ë¡œë“œ&lt;/a&gt;ì—ì„œ Nginx </summary>
      
    
    
    
    
    <category term="S3" scheme="https://kdevkr.github.io/tags/S3/"/>
    
    <category term="Beanstalk" scheme="https://kdevkr.github.io/tags/Beanstalk/"/>
    
  </entry>
  
</feed>
