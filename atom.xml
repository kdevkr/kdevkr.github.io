<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mambo</title>
  
  <subtitle>Today I Learned ğŸ”¥</subtitle>
  <link href="https://kdevkr.github.io/atom.xml" rel="self"/>
  
  <link href="https://kdevkr.github.io/"/>
  <updated>2022-09-13T14:55:18.143Z</updated>
  <id>https://kdevkr.github.io/</id>
  
  <author>
    <name>Mambo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Test Driven Development</title>
    <link href="https://kdevkr.github.io/test-driven-development/"/>
    <id>https://kdevkr.github.io/test-driven-development/</id>
    <published>2022-09-13T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>í˜„ì¬ ì¡°ì§ì€ ìŠ¤í”„ë¦°íŠ¸ ë‹¨ìœ„ì˜ ê°œë°œê³¼ ë°°í¬ì™€ í•¨ê»˜ ê³ ê°ê³¼ëŠ” ì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ê°œë°œíŒ€ì—ì„œëŠ” TDD ê°œë°œ ë°©ë²•ë¡ ì˜ ë„ì…ì„ ê²°ì •í–ˆë‹¤. ì´ê²ƒì€ ì¡°ì§ì˜ ê²°ì •ì´ì§€ ì¡°ì§ì˜ ê°œë°œì ì¤‘ í•˜ë‚˜ì¸ ë‚´ê°€ ê²°ì •í•œ ì‚¬í•­ì€ ì•„ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ ì¡°ì§ì—ì„œëŠ” ì™œ TDDë¥¼ ë„ì…í•˜ë ¤í–ˆì„ê¹Œë¥¼ ê°œë°œíŒ€ì˜ ì¼ì›ìœ¼ë¡œì¨ ìƒê°í•´ë³´ê³ ì í•œë‹¤.</p><blockquote><p>ìš°ë¦¬ëŠ” ìœ íŠœë¸Œì™€ ì£¼ìš” ì„œë¹„ìŠ¤ íšŒì‚¬ì—ì„œ ê³µìœ í•˜ëŠ” ì´ìƒì ì¸ ë°©ì‹ìœ¼ë¡œ ì¼í•˜ëŠ” ì¡°ì§ì€ ì•„ë‹ˆë‹¤.</p></blockquote><p>ì†Œí”„íŠ¸ì›¨ì–´ ê³µí•™ ê´€ì ì˜ ê°œë°œ í”„ë¡œì„¸ìŠ¤ëŠ” ê¸°íš ë° ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ê³  ë¶„ì„ëœ ë‚´ìš©ì„ í† ëŒ€ë¡œ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ë©° ì„¤ê³„ëœ ì¸í„°í˜ì´ìŠ¤ì— ë”°ë¼ ì„¸ë¶€ ê¸°ëŠ¥ì„ ê°œë°œí•˜ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ ê±°ì¹˜ë©´ì„œ ìƒë‹¹íˆ ë‹¤ì–‘í•œ ê°œë°œ ì‚°ì¶œë¬¼ì´ ë§Œë“¤ì–´ì§€ë©° í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚°ì¶œí•˜ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ì§„í–‰í•œë‹¤.</p><p>ê·¸ëŸ¬ë‚˜, IT ë¶„ì•¼ì—ì„œ ëª¨ë“  ë„ë©”ì¸ì˜ íšŒì‚¬ê°€ ì´ë ‡ê²Œ ì¼í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ë„ ì´ìƒì ìœ¼ë¡œ ì¼í•˜ëŠ” ë¬¸í™”ë¥¼ ë§Œë“¤ê³ ì ìŠ¤íƒ€íŠ¸ì—… ë˜ëŠ” ë„¤ì¹´ë¼ì¿ ë°°ì™€ ê°™ì€ ì£¼ìš” ì„œë¹„ìŠ¤ ê¸°ì—…ì—ì„œëŠ” ë” ë‚˜ì€ ë¬¸í™”ë¥¼ ê³ ë¯¼í•˜ê³  ì ‘ëª©í•´ë‚˜ê°€ê³  ìˆë‹¤. ëŒ€ì™¸ì ìœ¼ë¡œëŠ” ì´ìƒì ìœ¼ë¡œ ì¼í•˜ëŠ” ê²ƒ ê°™ì•„ë³´ì—¬ë„ ë‚´ë¶€ì ìœ¼ë¡œ í¬ì¥ëœ ë¶€ë¶„ë„ ê½¤ ë§ì„ ê²ƒì´ë©° ê·¸ëŸ¬í•œ ë¬¸í™”ë¥¼ ìœ ì§€í•˜ê³ ì ë¹„íš¨ìœ¨ì ì¸ ë…¸ë ¥ì„ í• ì§€ë„ ëª¨ë¥¸ë‹¤. </p><p>ìŠ¤íƒ€íŠ¸ì—…ì´ë‚˜ ì‹ ìƒ íšŒì‚¬ê°€ ì•„ë‹ˆê³ ì„œì•¼ ì¼í•˜ê³  ìˆëŠ” ë°©ì‹ì„ ë” ë‚˜ì€ ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ê¸°ìˆ ì ì¸ íŠ¸ë Œë“œë¥¼ ë”°ë¼ê°ˆ ìˆ˜ ìˆëŠ” ì¡°ì§ë„ ë§ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ìƒì ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ë°©ë²•ë„ ì •í•´ì§€ì§€ ì•ŠëŠ”ë‹¤. ì¡°ì§ ë‚´ ë°ë¸Œì˜µìŠ¤ íŒ€ì´ ë³„ë„ë¡œ ì¡´ì¬í•œë‹¤ê³  ì´ìƒì ì¸ íšŒì‚¬ë¼ê³  ë³¼ ìˆ˜ ì—†ìœ¼ë©° í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³ í•´ì„œ ì¢‹ì§€ ì•Šì€ ë°©ì‹ìœ¼ë¡œ ì¼í•œë‹¤ê³  ë³¼ ìˆ˜ ì—†ë‹¤.</p><blockquote><p>ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— ìˆì–´ì„œ ì •ë‹µì´ ì •í•´ì ¸ìˆëŠ”ê²Œ ì•„ë‹ˆë¼ê³  í•˜ë“¯ì´ ì¼í•˜ëŠ” ë°©ì‹ë„ ì •í•´ì§„ ë°”ê°€ ì—†ë‹¤.</p></blockquote><p>ë‚´ê°€ ì†í•œ ì¡°ì§ì€ ì‚¬ì‹¤ì€ ì¤‘ì†Œê¸°ì—… ì†Œì†ì—ì„œ ë³„ë„ì˜ íˆ¬ìë¥¼ ë°›ì•„ ë¬¼ì ë¶„í• ë¡œì¨ í•˜ë‚˜ì˜ ì‹ ìƒ íšŒì‚¬ë¡œ ë…ë¦½í•œ ê³³ì´ë‹¤. ì–´ë–»ê²Œ ë³´ë©´ ìŠ¤íƒ€íŠ¸ì—… ì•„ë‹Œ ìŠ¤íƒ€íŠ¸ì—…ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì•„ë¬´íŠ¼ ê²‰ìœ¼ë¡œëŠ” ë³„ë„ì˜ íšŒì‚¬ë¡œ ë¶„ë¦¬ë˜ì—ˆì§€ë§Œ ì‹¤ì œë¡œ ì¼í•˜ëŠ” ë°©ì‹ì€ ë³€í•˜ì§€ ì•Šì•˜ëŠ”ë° ê·¸ë™ì•ˆ ê³ ê°ê³¼ì˜ ì¼í•´ì˜¨ ë°©ì‹ì˜ ë¬¸ì œì¸ì§€ ë„ë©”ì¸ ë¶„ì•¼ì˜ ì‚¬ì—… êµ¬ì¡°ì˜ ë¬¸ì œì¸ì§€ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ ëŒ€ë¶€ë¶„ì˜ ìš”êµ¬ì‚¬í•­ì€ ë‘ë£¨ë­‰ì‹¤í•˜ê±°ë‚˜ ëª…í™•í•˜ì§€ ì•Šê³  ì‹¬ì§€ì–´ëŠ” ê¸°íšì¡°ì°¨ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ê½¤ ìˆë‹¤. ê·¸ë˜ì„œ ì‚¬ì—…íŒ€ì—ì„œëŠ” ìš”êµ¬ì‚¬í•­ì„ ìš°ì„ ì ìœ¼ë¡œ ê²€í† í•˜ê¸°ê°€ ì‰½ì§€ ì•Šê³  ê°œë°œíŒ€ì—ì„œ ëª¨ë“  ìš”êµ¬ì‚¬í•­ì˜ ë¶„ì„ê³¼ ì¼ì •ì— ëŒ€í•œ ê²€í† ë¥¼ ìš”êµ¬í•˜ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì•„ë§ˆë„ ëŒ€ë¶€ë¶„ì˜ íšŒì‚¬ì—ì„œë„ ê³ ê°ê³¼ ì‚¬ì—…íŒ€ì—ì„œ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•˜ê¸° ì‰¬ìš´ ìš”êµ¬ì‚¬í•­ì¸ì§€ë¥¼ íŒë‹¨í•  ìˆ˜ ì—†ê³  ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë°˜ì˜ë˜ê¸°ë¥¼ ë°”ë¼ì§€ ì•Šì„ê¹Œ ìƒê°ëœë‹¤.</p><blockquote><p>ìµœê·¼ <a href="https://okky.kr/">OKKY</a>ë¼ëŠ” ì»¤ë®¤ë‹ˆí‹°ì—ì„œë„ ë‚´ë¶€ì ì¸ ê¸°ëŠ¥ì˜ ë³€ê²½ì€ ë§ì§€ ì•Šì•˜ì§€ë§Œ ì‚¬ìš©ì ê´€ì (UX)ìœ¼ë¡œ ë³¼ë•Œ ì´ìƒí•˜ê²Œ ë³€ê²½ëœ(ë‚´ë¶€ì ìœ¼ë¡œ ë§ì€ ê³ ë¯¼ì´ ìˆì—ˆê² ìœ¼ë‚˜) ë¶€ë¶„ê³¼ ë¶ˆí¸í•œ ë¶€ë¶„ì´ ë¹¨ë¦¬ ê³ ì³ì§€ê¸°ë¥¼ ë°”ë¼ëŠ” ì‚¬ìš©ìê°€ ë§ë‹¤.</p></blockquote><p>ë„ë©”ì¸ ë¶„ì•¼ íŠ¹ì„± ìƒ í•´ë‹¹ ì‚°ì—… ë¶„ì•¼ì—ì„œ ê³ ê°ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì„ B2B ëª¨ë¸ë¡œì¨ ì¼ì • ê¸ˆì•¡ì˜ ê³„ì•½ì„ í†µí•´ì„œ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì‹œìŠ¤í…œì„ ê°œì„ í•´ë‚˜ê°€ê³  ìˆë‹¤. ì¡°ì§ì˜ ëª©í‘œëŠ” ë„ë©”ì¸ ë¶„ì•¼ì—ì„œ ì‚¬ìš©ë  í”Œë«í¼ì„ ëª©í‘œë¡œ í•˜ê³  ìˆì§€ë§Œ í˜„ì¬ ë‹¨ê³„ì—ì„œëŠ” ì‚¬ì—… êµ¬ì¡° ìƒ ê³ ê° í™˜ê²½ìœ¼ë¡œ ë‚©í’ˆë˜ëŠ” ì†”ë£¨ì…˜ í˜•íƒœì˜ ê³„ì•½ì´ ì´ë£¨ì–´ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤ê³  ë³´ì—¬ì§„ë‹¤.</p><p>ê°œë°œìë¡œì¨ëŠ” ì •í™•í•œ ìš”êµ¬ì‚¬í•­ê³¼ ê¸°ì¤€ì´ ìˆë‹¤ë©´ ëª…í™•í•œ ì‘ì—… ë°©í–¥ì„ ì •í•  ìˆ˜ ìˆê³  ê¸°ì¤€ê³¼ ë°©í–¥ì´ ëª…í™•í•˜ë‹¤ë©´ ìš”êµ¬ë˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ìƒê°ë³´ë‹¤ ì–´ë µì§€ ì•Šë‹¤. ë¬¼ë¡  ì‹œìŠ¤í…œ ì„¤ê³„ ì¸¡ë©´ì—ì„œëŠ” ëª¨ë“  ê³ ê°ì˜ í™˜ê²½ì— ì í•©í•œ ì‹œìŠ¤í…œì„ ë§ˆë ¨í•˜ê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ê³ ê°ê³¼ í˜‘ì˜ëœ ê²ƒë³´ë‹¤ ë” ë‚˜ì€ ì„±ëŠ¥ì„ ìœ„í•´ ì„œë²„ ìì›ì„ í™•ë³´í•œë‹¤ë˜ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì—¬ëŸ¬ê°€ì§€ ê¸°ìˆ ì„ ë„ì…í•œ ì•„í‚¤í…ì²˜ë¥¼ ë„ì…í•˜ì§€ ì•ŠëŠ”ë° ëŒ€ë¶€ë¶„ì˜ íšŒì‚¬ì™€ ê³ ê°ë“¤ì—ê²Œ ë¹„ìš©ì ì¸ ì¸¡ë©´ì„ ê³ ë ¤í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</p><blockquote><p>ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ê³ ë ¤í•´ì„œ ì„¤ê³„í•´ì•¼ í•œë‹¤ê³  ë§í•˜ë©´ì„œë„ ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ì€ ì•ˆëœë‹¤ê³  ë§í•œë‹¤.</p></blockquote><p>ì• ì´ˆì— ì´ ì¡°ì§ì´ ì¼í•˜ëŠ” ë°©ì‹ì˜ ë¬¸ì œì ì€ ëª…í™•í•˜ì§€ ì•ŠìŒì—ì„œ ë°œìƒí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ëª…í™•í•˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•´ì„œ ê°œë°œìê°€ ê²€í† í•˜ê³  ìŠ¤ìŠ¤ë¡œ ê³ ë ¤í•˜ì—¬ ì‘ì—…ëœ ìƒíƒœë¡œ ì¸í•˜ì—¬ ê³ ê°ì´ ëŒ€ëµì ìœ¼ë¡œ ìƒê°í–ˆë˜ ê¸°ëŠ¥ê³¼ ì•½ê°„ ë‹¤ë¥´ë‹¤ê±°ë‚˜ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì€ í…ŒìŠ¤íŠ¸ë¡œ ì¸í•˜ì—¬ ë²„ê·¸ë¡œ íŒë‹¨í•œë‹¤ê±°ë‚˜ ê¸°ì¡´ì—ëŠ” ì œëŒ€ë¡œ ë™ì‘í–ˆë˜ ë¶€ë¶„ë“¤ì´ ì–´ë– í•œ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•´ì„œ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ë°œìƒí•˜ê³¤ í•œë‹¤. ì‚¬ì‹¤ ê°œë°œìë“¤ì€ ëª…í™•í•˜ì§€ ì•Šì€ ê¸°ì¤€ìœ¼ë¡œ ì‘ì—…í–ˆê³  ì œëŒ€ë¡œ í…ŒìŠ¤íŠ¸ëœ ë¶€ë¶„ì´ ì•„ë‹ˆê¸°ì— ì‹œìŠ¤í…œì— ì˜í–¥ì´ ìˆì„ ìˆ˜ ë°–ì— ì—†ë‹¤ëŠ” ì…ì¥ì´ì§€ë§Œ ì‹œìŠ¤í…œì„ ê³ ê°ì—ê²Œ ì œê³µí•˜ëŠ” ì¡°ì§ê³¼ íŒ¨ì¹˜ëœ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ëŠ” ê³ ê°ì—ê²ŒëŠ” ë³€ê²½ì‚¬í•­ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì‹œìŠ¤í…œ ì˜í–¥ë„ë¡œ ì¸í•´ ì œí’ˆ í’ˆì§ˆì— ëŒ€í•´ì„œ ì‹ ë¢°ë¥¼ ìƒê²Œë˜ëŠ” ì…ì¥ì´ë‹¤.</p><blockquote><p>ì§€ë‚œ ë‹¬ ë°œìƒí•œ <a href="https://www.youtube.com/watch?v=uJ1KqQ0I2u8">1,600ë§Œ ëª…ì´ ì“°ëŠ” ì•Œì•½ ì˜¤ë¥˜ ì‚¬íƒœ</a>ë„ ë³€ê²½ì‚¬í•­ìœ¼ë¡œ ì¸í•´ ì‹¬ê°í•œ ë²„ê·¸ê°€ ë°œìƒí•œ ì¼€ì´ìŠ¤ì´ë‹¤.</p></blockquote><p>ì•„ë¬´íŠ¼ ì´ëŸ¬í•œ ì¡°ì§ì˜ ê°œë°œíŒ€ì—ì„œ TDDë¥¼ ë„ì…í•˜ë ¤ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ ìƒê°í•´ë³´ê¸° ìœ„í•´ì„œ TDDë¼ëŠ” ê°œë…ê³¼ ë°©ì‹ì— ëŒ€í•´ì„œ ì´í•´í•˜ê³ ì ì—¬ëŸ¬ TDD ê´€ë ¨ ê¸€ì´ë‚˜ ì˜ìƒì„ ê²€ìƒ‰í•´ë³´ì•˜ê³  ë‹¤ìŒì˜ ë§í¬ë“¤ì„ ì°¸ê³ í•´ë³´ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°ì´ ë“ ë‹¤.</p><ul><li><a href="https://www.youtube.com/watch?v=mNPpfB8JSIU">[ë§ˆí‹´ íŒŒìš¸ëŸ¬] ë¦¬íŒ©í† ë§ì˜ ì¤‘ìš”ì„± feat.í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§œëŠ” ì´ìœ (í•œê¸€ ìë§‰)</a></li><li><a href="https://medium.com/@minhyeok4dev/1500%EA%B0%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%A9%B0-%EB%82%98%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%84-%EC%96%BB%EC%97%88%EB%82%98-62b9facd53d8">1500ê°œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©° ë‚˜ëŠ” ë¬´ì—‡ì„ ì–»ì—ˆë‚˜</a></li><li><a href="https://medium.com/@sryu99/product-manager-%EA%B4%80%EC%A0%90%EC%97%90%EC%84%9C-%EB%B0%94%EB%9D%BC-%EB%B3%B8-tdd-3ae25512c5d7">Product Manager ê´€ì ì—ì„œ ë°”ë¼ ë³¸ TDD</a></li></ul><p>ì‚¬ì‹¤ ê°œë°œì ìŠ¤ìŠ¤ë¡œëŠ” ë¬¸ì„œì˜ ì¤‘ìš”ì„±ê³¼ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ì„ ëª¨ë¥´ëŠ” ì‚¬ëŒì´ ì—†ë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì œëŒ€ë¡œ ë§Œë“¤ì–´ê°€ë©° ì¼í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì€ ê·¸ë¦¬ ë§ì§€ ì•Šë‹¤. í˜„ì¬ ì¡°ì§ì˜ ì‚¬ì—… êµ¬ì¡°ìƒìœ¼ë¡œ ë³´ì•„ë„ ì •í™•í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ì •í™•í•œ ê¸°ì¤€ì´ ì—†ìœ¼ë©° ëª¨ë“  ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©° ê°œë°œ ì¼ì •ì„ ë§ì¶”ê¸°ë€ ì‰½ì§€ ì•Šì„ ê²ƒì´ë‹¤. ë¬¼ë¡ , ì¡°ì§ ì°¨ì›ì—ì„œ ê·¸ëŸ¬í•œ ë…¸ë ¥ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ” ê²ƒë„ ë¬¸ì œë¼ê³  ë°”ë¼ë³¼ ìˆ˜ ìˆë‹¤.</p><p>TDDë¥¼ ë„ì…í•´ì•¼í•œë‹¤ê³  ë§í•˜ëŠ” ì´ìœ  ì¤‘ í•˜ë‚˜ëŠ” ìš”êµ¬ì‚¬í•­ì˜ ë¶„ì„ì— ëŒ€í•œ ì„¤ê³„ ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚´ê³  ê²€í† ëœ ìš”êµ¬ì‚¬í•­ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ì—…ë˜ì—ˆëŠ”ì§€ë¥¼ ê°œë°œì ìŠ¤ìŠ¤ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ìˆë‹¤. ìš”êµ¬ì‚¬í•­ì´ ëª…í™•í•˜ì§€ ì•Šë”ë¼ë„ ìµœì†Œí•œ ê°œë°œìê°€ ìƒê°í•˜ëŠ” ì‹¤íŒ¨ì˜ ê¸°ì¤€ì„ ê¸°ë¡í•  ìˆ˜ ìˆìœ¼ë©° ì™„ë£Œëœ ì‘ì—…ì— ëŒ€í•´ì„œ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í•´ì•¼í•˜ëŠ”ì§€ ë„ì¶œí•´ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ì•½ê°„ì˜ ì¥ì ë„ ì¡´ì¬í•œë‹¤.</p><p>ì‚¬ì‹¤ ê°œë°œìê°€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° í˜ë“  ë¶€ë¶„ ì¤‘ í•˜ë‚˜ëŠ” ëª¨ë“  ê²ƒì„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì»¤ë²„í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì— ìˆë‹¤. ì´ìƒì ìœ¼ë¡œ ë§í•˜ëŠ” ì¢‹ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì™¸ë¶€ ì˜ì¡´ì„±ì´ ì—†ì–´ë„ ê²€ì¦í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤ëŠ” ê°œë…ì´ ì¡´ì¬í•œë‹¤. ê·¸ëŸ¬ë‚˜, ì‹¤ì œë¡œëŠ” ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œë“¤ì´ ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šìœ¼ë©° ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¶€í„° ì—˜ë¼ìŠ¤í‹±ì„œì¹˜, ë ˆë””ìŠ¤, ë©”ì‹œì§€ í ì†”ë£¨ì…˜, ì™¸ë¶€ API ëª¨ë“ˆë“±ê³¼ ê°™ì´ ì—¬ëŸ¬ê°€ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì†”ë£¨ì…˜ë“¤ì´ ìƒí˜¸ í†µì‹ ì„ í†µí•´ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— ì™¸ë¶€ ì˜ì¡´ì„±ì´ ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í˜„ì¬ ê°œë°œì¤‘ì¸ ì‹œìŠ¤í…œì˜ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ <a href="https://code.kx.com/q/">KDB+ë¼ëŠ” ìƒìš© ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤</a>ì— ì˜ì¡´ë˜ì–´ êµ¬í˜„ë˜ëŠ” ê²½ìš°ê°€ ë§ì€ë° ê³ ê°ë§ˆë‹¤ ë‹¤ë¥¸ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì˜ˆìƒí•˜ì—¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì¤€ë¹„í•˜ê¸°ê°€ ê¹Œë‹¤ë¡œìš´ ë¶€ë¶„ì´ ìˆë‹¤.</p><blockquote><p>ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì— ëŒ€í•´ì„œëŠ” <a href="https://www.testcontainers.org/">Testcontainers</a>ì™€ ê°™ì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë°©ë²•ë„ ìˆë‹¤.</p></blockquote><p>ë”°ë¼ì„œ, ê°œë°œíŒ€ì—ì„œ TDDë¥¼ ë„ì…í•œë‹¤ê³ í•´ì„œ ëª¨ë“  ìš”ê±´ì„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤ê³  ë¶€ë‹´ì„ ê°€ì ¸ì„œëŠ” ì•ˆëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‹œìŠ¤í…œê³¼ ì—°ë™í•˜ê¸° ìœ„í•´ì„œ í˜‘ë ¥ ì—…ì²´ì™€ ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ ë¬¸ì„œë¥¼ í† ëŒ€ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë„ë¡ ì‹œìŠ¤í…œì— ë°˜ì˜ë˜ê¸°ë„ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë•Œë¡œëŠ” ê°œë°œ í™˜ê²½ì— ì„ì‹œë¡œ ë°˜ì˜í•˜ì—¬ ë…¸ì¶œí•˜ê¸°ë„ í•˜ì§€ë§Œ ë³´ì•ˆ ìƒ í˜¸ì¶œ ë¬¸ì œë¡œ ì¸í•˜ì—¬ í”„ë¡œë•ì…˜ ë„ë©”ì¸ìœ¼ë¡œ ìš”ì²­í•´ì•¼í•œë‹¤ê³  í˜‘ì˜ë˜ê¸°ë„ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><p>ê·¸ë¦¬ê³  TDDë¥¼ ë„ì…í•œë‹¤ê³ í•´ì„œ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•œ ë³€ê²½ì‚¬í•­ì´ ì‹œìŠ¤í…œì— ì˜í–¥ì´ ì–´ë””ê¹Œì§€ ë¯¸ì¹˜ëŠ”ì§€ ê²€ì¶œí•  ìˆ˜ ìˆë‹¤ê±°ë‚˜ ì‹œìŠ¤í…œ ì˜í–¥ë„ë¥¼ ì—†ì•¨ ìˆ˜ ìˆë‹¤ëŠ” ê´€ì ì„ ê°€ì ¸ì„œëŠ” ì•ˆëœë‹¤. <a href="https://www.youtube.com/watch?v=NkiHu9zGYKU">ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ê°œë°œ ë¬¸í™”ì™€ í”„ë¡œì„¸ìŠ¤</a>ë¥¼ ë³´ë”ë¼ë„ ë§ˆì¹˜ ì²´ê³„ì ìœ¼ë¡œ ì• ìì¼ ë¬¸í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì‹¤ì œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë‹¤ë³´ë©´ ê½¤ë‚˜ ë§ì€ ë²„ê·¸ê°€ ë‚´ì¬ë˜ì–´ìˆìŒì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.</p><p>í˜„ì¬ ì¡°ì§ì˜ ê°œë°œíŒ€ì— ì´ë¡­ì§€ ì•Šì€ ê²ƒ ê°™ì•„ ë³´ì´ëŠ” TDDë¥¼ ë„ì…í•˜ë ¤ëŠ” ì´ìœ ëŠ” ê°œë°œìê°€ ëª…í™•í•˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ë²ˆ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤ëŠ” ë¶€ë¶„ê³¼ ì¶”í›„ ê³ ê°ê³¼ì˜ ì¸ìˆ˜í…ŒìŠ¤íŠ¸ í˜‘ì˜ë¥¼ ìœ„í•´ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë„ì¶œì— ìŠµê´€í™” ë˜ê¸° ìœ„í•œ í•˜ë‚˜ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì´ìš©ë  ê°€ëŠ¥ì„±ì´ í¬ë‹¤. ê²°ë¡ ì ìœ¼ë¡œ ê°œë°œì ì…ì¥ì—ì„œ ì´ìƒì ì¸ ê°œë°œ ë°©ì‹ì„ ì¶”êµ¬í•œë‹¤ê¸°ë³´ë‹¤ ì¡°ì§ì—ì„œ ë§Œë“œëŠ” ì œí’ˆ í’ˆì§ˆì„ ê°•í™”í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•œë‹¤ê³  ë³´ëŠ”ê²Œ ì ë‹¹í•  ë“¯ ì‹¶ë‹¤. ì‚¬ì‹¤ì€ ì œí’ˆ í’ˆì§ˆì´ ì¢‹ì•„ì§€ì§€ ì•ŠëŠ” ì´ìœ ì˜ ê°€ì¥ í° ì›ì¸ì€ ëª…í™•í•˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œë¶€í„° ì‹œì‘ë˜ëŠ” ê²ƒì´ê¸°ì— ìƒê°ë³´ë‹¤ ì–´ë ¤ìš´ ì‹œë„ì¼ì§€ë„ ëª¨ë¥¸ë‹¤. ë”°ë¼ì„œ, ì•ìœ¼ë¡œ TDDë¼ëŠ” ê°œë°œ ë°©ì‹ì´ ì¡°ì§ì—ê²Œ ì´ë¡œìš´ ë°©ì‹ì´ ë ì§€ ì›ë˜ëŒ€ë¡œ ëŒì•„ê°€ê²Œ ë ì§€ ëª¨ë¥´ê² ì§€ë§Œ ê°œë°œì ì…ì¥ì—ì„œë„ ì œí’ˆ í’ˆì§ˆì„ ë†’ì´ë ¤ëŠ” ë…¸ë ¥ì€ í•„ìš”í•œ ë¶€ë¶„ì´ë¼ê³  ìƒê°ì´ ë“ ë‹¤.</p><p>ë§ˆì§€ë§‰ìœ¼ë¡œ í˜„ì¬ ì¡°ì§ì—ì„œ ì¼í•˜ëŠ” ë°©ì‹ ì¤‘ ê°œì¸ì ìœ¼ë¡œ ê³ ì³ì•¼í•˜ì§€ ì•Šì„ ê¹Œ ìƒê°ë˜ëŠ” ë¶€ë¶„ì„ ë‚˜ì—´í•´ë³´ë©´ì„œ ëë‚´ë„ë¡ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p><ol><li>ëª…í™•í•˜ì§€ ì•Šì€ ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•  ë•Œ â€œê·¸ëŸ´ë¦¬ ì—†ë‹¤, ì„¤ë§ˆ ê·¸ëŸ¬ê² ì–´â€ëŠ” ê°€ì •ì„ í¬í•¨í•œë‹¤.</li><li>ê³ ê°ì´ ë‘ë£¨ë­‰ìˆ í•œ ìš”êµ¬ì‚¬í•­ì„ í† ëŒ€ë¡œ ê²€í† í•˜ì§€ë§Œ ì´ë¯¸ ê¸°í•œì€ ì •í•´ì ¸ìˆë‹¤.</li><li>ìì‹ ì´ ì‘ì—…í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ ì™¸ì—ëŠ” ê·¸ë‹¤ì§€ í¬ê²Œ ì‹ ê²½ì“°ì§€ ì•ŠëŠ”ë‹¤.</li><li>í”„ë¡œì íŠ¸ ì¼ì •ì´ ë‹¹ê²¨ì§€ê±°ë‚˜ ë°€ë¦¬ëŠ” ê²ƒìœ¼ë¡œ ì¸í•´ í”„ë¡œì íŠ¸ ê³„ì•½ ì‹œ ì‚°ì •í•œ ë§¨ë¨¼ìŠ¤ê°€ ì§€ì¼œì§€ì§€ ì•ŠëŠ”ë‹¤.</li></ol><p>ê¸€ì„ ì‘ì„±í•˜ë‹¤ë³´ë‹ˆ ì•„ë§ˆë„ ë§ì€ ì¤‘ì†Œê¸°ì—…ì— í•´ë‹¹í•˜ëŠ” ì•”ë‹´í•œ í˜„ì‹¤ì´ì§€ ì•Šì„ê¹Œ ìƒê°í•œë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;í˜„ì¬ ì¡°ì§ì€ ìŠ¤í”„ë¦°íŠ¸ ë‹¨ìœ„ì˜ ê°œë°œê³¼ ë°°í¬ì™€ í•¨ê»˜ ê³ ê°ê³¼ëŠ” ì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ê°œë°œíŒ€ì—ì„œëŠ” TDD ê°œë°œ ë°©ë²•ë¡ ì˜ ë„ì…ì„ ê²°ì •í–ˆë‹¤. ì´ê²ƒì€ ì¡°ì§ì˜ ê²°ì •ì´ì§€ ì¡°ì§ì˜ ê°œë°œì ì¤‘ í•˜ë‚˜ì¸ ë‚´ê°€ ê²°ì •í•œ ì‚¬í•­ì€ ì•„ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ ì¡°ì§ì—ì„œëŠ” ì™œ TDDë¥¼ ë„</summary>
      
    
    
    
    
    <category term="TDD" scheme="https://kdevkr.github.io/tags/TDD/"/>
    
    <category term="ATDD" scheme="https://kdevkr.github.io/tags/ATDD/"/>
    
  </entry>
  
  <entry>
    <title>MQTT Connection Lost</title>
    <link href="https://kdevkr.github.io/mqtt-connection-lost/"/>
    <id>https://kdevkr.github.io/mqtt-connection-lost/</id>
    <published>2022-09-09T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Connection</span> lost <span class="token punctuation">(</span><span class="token number">32109</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>EOFException</span>at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>paho<span class="token punctuation">.</span>client<span class="token punctuation">.</span>mqttv3<span class="token punctuation">.</span>internal<span class="token punctuation">.</span></span>CommsReceiver</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CommsReceiver</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">197</span><span class="token punctuation">)</span>at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">750</span><span class="token punctuation">)</span><span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>EOFException</span>at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>DataInputStream</span><span class="token punctuation">.</span><span class="token function">readByte</span><span class="token punctuation">(</span><span class="token class-name">DataInputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">267</span><span class="token punctuation">)</span>at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>paho<span class="token punctuation">.</span>client<span class="token punctuation">.</span>mqttv3<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>wire<span class="token punctuation">.</span></span>MqttInputStream</span><span class="token punctuation">.</span><span class="token function">readMqttWireMessage</span><span class="token punctuation">(</span><span class="token class-name">MqttInputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">92</span><span class="token punctuation">)</span>at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>paho<span class="token punctuation">.</span>client<span class="token punctuation">.</span>mqttv3<span class="token punctuation">.</span>internal<span class="token punctuation">.</span></span>CommsReceiver</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CommsReceiver</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">1</span> more</code></pre><p>ìœ„ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ëŠ” Paho Java Clientë¥¼ ì‚¬ìš©í•˜ì—¬ Mosquitto ë¸Œë¡œì»¤ì— ì—°ê²°í•˜ê³  ë‚œ í›„ ì–´ë– í•œ ì‚¬ìœ ì— ì˜í•´ ì—°ê²°ì´ í•´ì§€ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤. ì¡°ì§ ë‚´ ë™ë£Œ ê°œë°œìê°€ Mosquittoì— ì—°ê²°í•˜ê³  ë‚˜ì„œ 5ë¶„ì´ ì§€ë‚˜ëŠ” ì‹œì ì— ì—°ê²°ì´ í•´ì§€ë˜ëŠ” ì¦ìƒì´ ìˆë‹¤ë©° ì´ ë¬¸ì œë¥¼ ê²½í—˜í–ˆëŠ”ì§€ ë„ì›€ì„ ìš”ì²­í•˜ì˜€ìœ¼ë‚˜ ì´ì „ì— <a href="/spring-boot-integration-mqtt/">ìŠ¤í”„ë§ ë¶€íŠ¸ MQTT í´ë¼ì´ì–¸íŠ¸ ë©”ì‹œì§€ ì±„ë„ êµ¬ì„±í•˜ê¸°</a> ë˜ëŠ” <a href="/connecting-with-mqtt-using-aws-iot-device-sdk/">AWS IoT Device SDK Javaë¡œ MQTT ì—°ê²°í•˜ê¸°</a>ì—ì„œì²˜ëŸ¼ Paho Java Client ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì—°ê²°ì´ í•´ì§€ë˜ëŠ” ê²ƒì„ ê²½í—˜í•´ë³´ì§€ëŠ” ëª»í–ˆì—ˆìŠµë‹ˆë‹¤.</p><h2 id="MQTT-over-Websocket"><a href="#MQTT-over-Websocket" class="headerlink" title="MQTT over Websocket"></a>MQTT over Websocket</h2><p>ì¡°ì§ ë‚´ ë™ë£Œ ê°œë°œìì˜ ë„ì›€ ìš”ì²­ìœ¼ë¡œ ì¸í•´ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì„¤ì¹˜ëœ Mosquitto ë²„ì „ì€ 2.0.14 ì´ë©° Paho Java Client ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” 1.2.5ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  Mosquitto ì—°ê²° ì‹œì—ëŠ” Websocket í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. </p><table><thead><tr><th>JDK</th><th>Paho Java Client</th><th>Mosquitto</th><th>EOF</th></tr></thead><tbody><tr><td>Java 1.8.0_144</td><td>1.2.5</td><td>2.0.14</td><td>ğŸ’¥</td></tr><tr><td>Temurin 1.8.0_345</td><td>1.1.0 ~ 1.2.5</td><td>2.0.14</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.1.0 ~ 1.2.5</td><td>2.0.14</td><td>ğŸ’¥</td></tr></tbody></table><p>JDKì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì„ ë³€ê²½í•´ê°€ë©´ì„œ í…ŒìŠ¤íŠ¸ í•´ë³¸ ê²°ê³¼ ì¼ë°˜ì ì¸ TCP ë°©ì‹ìœ¼ë¡œ ì—°ê²° ì‹œì—ëŠ” Mosquitto ë²„ì „ê³¼ ìƒê´€ì—†ì´ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ì„ ìœ ì§€í•¨ì„ ë³´ì˜€ìœ¼ë‚˜ ì›¹ì†Œì¼“ ì—°ê²°ì— ëŒ€í•´ì„œëŠ” ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì„¤ì¹˜ëœ Mosquitto 2.0.14 ë¸Œë¡œì»¤ì— ëŒ€í•´ ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ ì—°ê²°ì´ í•´ì§€ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p><h3 id="Mosquitto-Version"><a href="#Mosquitto-Version" class="headerlink" title="Mosquitto Version"></a>Mosquitto Version</h3><p>ìœ„ ë¬¸ì œê°€ ë°œìƒí–ˆë˜ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— Mosquitto ë¸Œë¡œì»¤ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¡œ êµ¬ë™ëœ ìƒíƒœë¼ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë¡œì»¬ ì»´í“¨í„° í™˜ê²½ì—ì„œë„ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ ì—¬ëŸ¬ê°œì˜ ë²„ì „ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•˜ë©´ì„œ ì›¹ ì†Œì¼“ ì—°ê²°ì´ ì¼ì • ì‹œê°„ ì´í›„ì— í•´ì§€ë˜ëŠ” ì¦ìƒì´ ë‚˜íƒ€ë‚˜ëŠ”ì§€ ì²´í¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ë²„ì „ì€ <a href="https://mosquitto.org/blog/categories/releases/">Mosquitto Posts about Releases</a>ì— ë”°ë¼ ì‹œë„í•´ë³´ì•˜ìœ¼ë©° 2.0.9ì™€ 2.0.11ê°€ ë¦´ë¦¬ì¦ˆë  ë•Œ 1.6.x ë§ˆì´ë„ˆ ë²„ì „ë„ íŒ¨ì¹˜ë˜ì—ˆê¸°ì— í¬í•¨í–ˆìŠµë‹ˆë‹¤.</p><table><thead><tr><th>JDK</th><th>Paho Java Client</th><th>Mosquitto</th><th>EOF</th></tr></thead><tbody><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.15</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.14</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.13</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.12</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.11</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.10</td><td>OK</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>2.0.9</td><td>OK</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>1.6.15</td><td>ğŸ’¥</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>1.6.14</td><td>OK</td></tr><tr><td>Temurin 11.0.16</td><td>1.2.5</td><td>1.6.9</td><td>OK</td></tr></tbody></table><blockquote><p>ìš°ë¶„íˆ¬ LTS ë²„ì „ì— ë”°ë¥¸ Mosquitto íŒ¨í‚¤ì§€ ì§€ì› ë²„ì „ì€ ë‹¤ìŒì˜ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><a href="https://packages.ubuntu.com/search?keywords=mosquitto">https://packages.ubuntu.com/search?keywords=mosquitto</a></p></blockquote><p>Mosquitto ë²„ì „ë³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ 2021-06-08 ìë¡œ ë¦´ë¦¬ì¦ˆëœ 2.0.11ê³¼ 1.6.15 ì—ì„œë¶€í„° ì›¹ì†Œì¼“ ì—°ê²°ì´ í•´ì§€ë˜ëŠ” ì¦ìƒì„ ë³´ì˜€ìŠµë‹ˆë‹¤. ë™ë£Œ ê°œë°œìì—ê²ŒëŠ” Paho Java Clientì˜ AutomaticReconnect ì˜µì…˜ê³¼ MqttCallbackExtended ì¸í„°í˜ì´ìŠ¤ë¡œ ì—°ê²° í•´ì§€ë¡œ ì¸í•´ ì¬ì—°ê²°ì„ ì‹œë„í•˜ê³  ë‚˜ì„œ í† í”½ì„ ë‹¤ì‹œ êµ¬ë…í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì„ì‹œ ì¡°ì¹˜í•´ì•¼í•  ê²ƒ ê°™ë‹¤ê³  ì „ë‹¬í•œ ìƒíƒœì´ë©° Mosquitto ë¸Œë¡œì»¤ ë²„ì „ì„ ë‹¤ìš´ê·¸ë ˆì´ë“œ í•´ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ì¡°ì§ ë‚´ì—ì„œ ê²€í† í•˜ê³  ê²°ì •í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><h2 id="í…ŒìŠ¤íŠ¸-í™˜ê²½"><a href="#í…ŒìŠ¤íŠ¸-í™˜ê²½" class="headerlink" title="í…ŒìŠ¤íŠ¸ í™˜ê²½"></a>í…ŒìŠ¤íŠ¸ í™˜ê²½</h2><p>ì²˜ìŒì—ëŠ” ìš°ë¶„íˆ¬ VM ì´ë¯¸ì§€ë¡œ í…ŒìŠ¤íŠ¸í•˜ì˜€ìœ¼ë‚˜ ë‹¤ì–‘í•œ ë²„ì „ì„ í…ŒìŠ¤íŠ¸í•´ë³´ê¸° ìœ„í•´ì„œ ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. </p><h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.8"</span><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token key atrule">mosquitto</span><span class="token punctuation">:</span>    <span class="token comment"># image: eclipse-mosquitto:1.6.15 # EOF</span>    <span class="token comment"># image: eclipse-mosquitto:1.6.14 # OK</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.9 # OK</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.10 # OK</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.11 # EOF</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.12 # EOF</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.13 # EOF</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.14 # EOF</span>    <span class="token comment"># image: eclipse-mosquitto:2.0.15 # EOF</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> eclipse<span class="token punctuation">-</span>mosquitto<span class="token punctuation">:</span>2.0.10    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mosquitto    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"1883:1883"</span>      <span class="token punctuation">-</span> <span class="token string">"9001:9001"</span>    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> ./mosquitto.conf<span class="token punctuation">:</span>/mosquitto/config/mosquitto.conf      <span class="token punctuation">-</span> ./mosquitto.log<span class="token punctuation">:</span>/mosquitto/log/mosquitto.log      <span class="token punctuation">-</span> mosquitto<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/mosquitto/data      <span class="token punctuation">-</span> ./passwd<span class="token punctuation">:</span>/mosquitto/config/passwd<span class="token key atrule">volumes</span><span class="token punctuation">:</span>  mosquitto<span class="token punctuation">-</span>data<span class="token punctuation">:</span></code></pre><h3 id="mosquitto-conf"><a href="#mosquitto-conf" class="headerlink" title="mosquitto.conf"></a>mosquitto.conf</h3><pre class="language-conf" data-language="conf"><code class="language-conf">persistence truepersistence_location &#x2F;mosquitto&#x2F;data&#x2F;log_dest file &#x2F;mosquitto&#x2F;log&#x2F;mosquitto.logport 1883listener 9001protocol websocketsallow_anonymous falsepassword_file &#x2F;mosquitto&#x2F;config&#x2F;passwdset_tcp_nodelay truesocket_domain ipv4log_type allwebsockets_log_level 8</code></pre><details>  <summary>í…ŒìŠ¤íŠ¸ ë¡œê·¸</summary>  <h4 id="mosquitto-log"><a href="#mosquitto-log" class="headerlink" title="mosquitto.log"></a>mosquitto.log</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">1662725110</span>: New client connected from <span class="token number">192.168</span>.0.2:3326 as paho1668189895026200 <span class="token punctuation">(</span>p2, c1, k60, u<span class="token string">'mambo'</span><span class="token punctuation">)</span>.<span class="token number">1662725110</span>: No will message specified.<span class="token number">1662725110</span>: Sending CONNACK to paho1668189895026200 <span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token number">1662725110</span>: Received SUBSCRIBE from paho1668189895026200<span class="token number">1662725110</span>:     <span class="token variable">$SYS</span>/broker/version <span class="token punctuation">(</span>QoS <span class="token number">0</span><span class="token punctuation">)</span><span class="token number">1662725110</span>: paho1668189895026200 <span class="token number">0</span> <span class="token variable">$SYS</span>/broker/version<span class="token number">1662725110</span>: Sending SUBACK to paho1668189895026200<span class="token number">1662725110</span>: Sending PUBLISH to paho1668189895026200 <span class="token punctuation">(</span>d0, q0, r1, m0, <span class="token string">'$SYS/broker/version'</span>, <span class="token punctuation">..</span>. <span class="token punctuation">(</span><span class="token number">24</span> bytes<span class="token punctuation">))</span><span class="token number">1662725110</span>: Received SUBSCRIBE from paho1668189895026200<span class="token number">1662725110</span>:     test/<span class="token comment"># (QoS 0)</span><span class="token number">1662725110</span>: paho1668189895026200 <span class="token number">0</span> test/<span class="token comment">#</span><span class="token number">1662725110</span>: Sending SUBACK to paho1668189895026200<span class="token number">1662725170</span>: Received PINGREQ from paho1668189895026200<span class="token number">1662725170</span>: Sending PINGRESP to paho1668189895026200<span class="token number">1662725230</span>: Received PINGREQ from paho1668189895026200<span class="token number">1662725230</span>: Sending PINGRESP to paho1668189895026200<span class="token number">1662725290</span>: Received PINGREQ from paho1668189895026200<span class="token number">1662725290</span>: Sending PINGRESP to paho1668189895026200<span class="token number">1662725350</span>: Received PINGREQ from paho1668189895026200<span class="token number">1662725350</span>: Sending PINGRESP to paho1668189895026200<span class="token number">1662725410</span>: Client paho1668189895026200 closed its connection.</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">1662727428</span>: lws_validity_cb: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span>: scheduling validity check<span class="token number">1662727428</span>: rops_handle_POLLOUT_ws: issuing <span class="token function">ping</span> on wsi <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span>: ws mqtt h2: <span class="token number">0</span><span class="token number">1662727428</span>: lws_issue_raw: ssl_capable_write <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> says <span class="token number">2</span><span class="token number">1662727428</span>: lws_issue_raw: ssl_capable_write <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> says <span class="token number">6</span><span class="token number">1662727428</span>: __lws_close_free_wsi: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span>: caller: close_and_handled<span class="token number">1662727428</span>: __lws_close_free_wsi: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span>: end LRS_FLUSHING_BEFORE_CLOSE<span class="token number">1662727428</span>: __lws_close_free_wsi: <span class="token function">shutdown</span> conn: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span> <span class="token punctuation">(</span>sk <span class="token number">12</span>, state 0x11e<span class="token punctuation">)</span><span class="token number">1662727428</span>: __lws_close_free_wsi: real just_kill_connection: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span> <span class="token punctuation">(</span>sockfd <span class="token number">12</span><span class="token punctuation">)</span><span class="token number">1662727428</span>: __lws_close_free_wsi: <span class="token punctuation">[</span>wsisrv<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>adopted<span class="token punctuation">]</span>: <span class="token assign-left variable">cce</span><span class="token operator">=</span><span class="token number">1</span><span class="token number">1662727428</span>: Client paho1670208425870800 closed its connection.</code></pre><h4 id="Paho-Java-Client-log"><a href="#Paho-Java-Client-log" class="headerlink" title="Paho Java Client log"></a>Paho Java Client log</h4><pre class="language-bash" data-language="bash"><code class="language-bash">FINE: null: network <span class="token builtin class-name">read</span> messageSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:09 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver runFINE: null: network <span class="token builtin class-name">read</span> messageSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver runFINE: null: network <span class="token builtin class-name">read</span> messageSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver runFINE: null: network <span class="token builtin class-name">read</span> messageSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver runFINE: paho1622771147525800: Stopping due to IOExceptionSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver runFINE: paho1622771147525800: Stopping due to IOExceptionSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms shutdownConnectionFINE: paho1622771147525800: <span class="token assign-left variable">state</span><span class="token operator">=</span>DISCONNECTINGSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms shutdownConnectionFINE: paho1622771147525800: <span class="token assign-left variable">state</span><span class="token operator">=</span>DISCONNECTINGSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: notify workAvailable and <span class="token function">wait</span> <span class="token keyword">for</span> runSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: notify workAvailable and <span class="token function">wait</span> <span class="token keyword">for</span> runSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback runFINE: paho1622771147525800: notify spaceAvailableSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback runFINE: paho1622771147525800: notify spaceAvailableSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver stopFINE: paho1622771147525800: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver stopFINE: paho1622771147525800: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppingSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.websocket.WebSocketReceiver stopFINE: null: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore quiesceFINE: paho1622771147525800: <span class="token assign-left variable">resp</span><span class="token operator">=</span>Client is currently disconnecting <span class="token punctuation">(</span><span class="token number">32102</span><span class="token punctuation">)</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore quiesceFINE: paho1622771147525800: <span class="token assign-left variable">resp</span><span class="token operator">=</span>Client is currently disconnecting <span class="token punctuation">(</span><span class="token number">32102</span><span class="token punctuation">)</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms handleOldTokensFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms handleOldTokensFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState resolveOldTokensFINE: paho1622771147525800: reason Connection lost <span class="token punctuation">(</span><span class="token number">32109</span><span class="token punctuation">)</span> - java.io.EOFExceptionSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState resolveOldTokensFINE: paho1622771147525800: reason Connection lost <span class="token punctuation">(</span><span class="token number">32109</span><span class="token punctuation">)</span> - java.io.EOFExceptionSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore getOutstandingTokensFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore getOutstandingTokensFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState disconnectedFINE: paho1622771147525800: disconnectedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState disconnectedFINE: paho1622771147525800: disconnectedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState clearStateFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState clearStateFINE: paho1622771147525800: <span class="token operator">></span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore <span class="token function">clear</span>FINE: paho1622771147525800: <span class="token operator">></span> <span class="token number">0</span> tokensSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsTokenStore <span class="token function">clear</span>FINE: paho1622771147525800: <span class="token operator">></span> <span class="token number">0</span> tokensSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender stopFINE: paho1622771147525800: stopping senderSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender stopFINE: paho1622771147525800: stopping senderSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState notifyQueueLockFINE: paho1622771147525800: notifying queueLock holdersSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState notifyQueueLockFINE: paho1622771147525800: notifying queueLock holdersSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender stopFINE: paho1622771147525800: stoppedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState getFINE: paho1622771147525800: new work or <span class="token function">ping</span> arrived Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.TimerPingSender stopFINE: paho1622771147525800: stopSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState getFINE: paho1622771147525800: new work or <span class="token function">ping</span> arrived Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState getFINE: paho1622771147525800: no outstanding flows and not connectedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientState getFINE: paho1622771147525800: no outstanding flows and not connectedSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.TimerPingSender stopFINE: paho1622771147525800: stopSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender runFINE: paho1622771147525800: get message returned null, stopping<span class="token punctuation">&#125;</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender runFINE: paho1622771147525800: get message returned null, stopping<span class="token punctuation">&#125;</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender runFINE: paho1622771147525800: <span class="token operator">&lt;</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsSender runFINE: paho1622771147525800: <span class="token operator">&lt;</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms shutdownConnectionFINE: paho1622771147525800: <span class="token assign-left variable">state</span><span class="token operator">=</span>DISCONNECTEDSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.ClientComms shutdownConnectionFINE: paho1622771147525800: <span class="token assign-left variable">state</span><span class="token operator">=</span>DISCONNECTEDSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback connectionLostFINE: paho1622771147525800: call connectionLostSep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsCallback connectionLostFINE: paho1622771147525800: call connectionLostConnection lost <span class="token punctuation">(</span><span class="token number">32109</span><span class="token punctuation">)</span> - java.io.EOFExceptionat org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run<span class="token punctuation">(</span>CommsReceiver.java:197<span class="token punctuation">)</span>at java.base/java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:829<span class="token punctuation">)</span>Caused by: java.io.EOFExceptionat java.base/java.io.DataInputStream.readByte<span class="token punctuation">(</span>DataInputStream.java:272<span class="token punctuation">)</span>at org.eclipse.paho.client.mqttv3.internal.wire.MqttInputStream.readMqttWireMessage<span class="token punctuation">(</span>MqttInputStream.java:92<span class="token punctuation">)</span>at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run<span class="token punctuation">(</span>CommsReceiver.java:137<span class="token punctuation">)</span><span class="token punctuation">..</span>. <span class="token number">1</span> <span class="token function">more</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver runFINE: paho1622771147525800: <span class="token operator">&lt;</span>Sep 09, <span class="token number">2022</span> <span class="token number">8</span>:33:10 AM org.eclipse.paho.client.mqttv3.internal.CommsReceiver runFINE: paho1622771147525800: <span class="token operator">&lt;</span></code></pre></details><h2 id="ì´ìŠˆ-ë§í¬"><a href="#ì´ìŠˆ-ë§í¬" class="headerlink" title="ì´ìŠˆ ë§í¬"></a>ì´ìŠˆ ë§í¬</h2><ul><li><a href="https://github.com/eclipse/mosquitto/issues/2631">Websocket connection lost with paho java client #2631</a></li><li><a href="https://github.com/eclipse/paho.mqtt.java/issues/960">Websocket connection lost with mosquitto 1.6.15 and 2.0.11+ #960</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;pre class=&quot;language-java&quot; data-language=&quot;java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Connection&lt;/span&gt; lost &lt;span clas</summary>
      
    
    
    
    
    <category term="Mosquitto" scheme="https://kdevkr.github.io/tags/Mosquitto/"/>
    
    <category term="Paho Java Client" scheme="https://kdevkr.github.io/tags/Paho-Java-Client/"/>
    
  </entry>
  
  <entry>
    <title>Spring JDBC</title>
    <link href="https://kdevkr.github.io/spring-jdbc/"/>
    <id>https://kdevkr.github.io/spring-jdbc/</id>
    <published>2022-09-05T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>Spring Security OAuth2 í•™ìŠµì„ ìœ„í•œ ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©´ì„œ ì‚¬ìš©í•˜ê²Œë  ê° ëª¨ë“ˆì—ì„œ í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œ Spring JDBCë¥¼ ì‚¬ìš©í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ì•¡ì„¸ìŠ¤ì— ëŒ€í•´ì„œëŠ” Mybatis ë˜ëŠ” JPA ì´ë¼ëŠ” ê¸°ìˆ ì„ ë„ì…í•˜ëŠ” ê²½ìš°ê°€ ë§ì„í…ë° ìŠ¤í”„ë§ JDBC ë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ê°€ ê°€ëŠ¥í•˜ë©° Spring Session ì´ë‚˜ Spring Security ì—ì„œë„ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><h2 id="Data-Access-with-JDBC"><a href="#Data-Access-with-JDBC" class="headerlink" title="Data Access with JDBC"></a>Data Access with JDBC</h2><p>Spring JDBCëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë°©ë²•ì„ ì œê³µí•˜ë©° ìŠ¤í”„ë§ ì„¸ì…˜ì´ë‚˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ í•¨ê»˜ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ Spring JDBCê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì•„ë§ˆë„ ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì´ í•„ìˆ˜ì ì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ JDBC ëª¨ë“ˆì„ ë°˜ë“œì‹œ í¬í•¨í•˜ê³  ìˆì„ ê²ƒ ì…ë‹ˆë‹¤.</p><pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token string">'org.springframework.boot:spring-boot-starter-jdbc'</span></code></pre><h3 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” JdbcTemplateAutoConfigurationë¥¼ í†µí•´ì„œ JdbcTemplateì™€ NamedParameterJdbcTemplateë¥¼ ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°ìš”. JdbcTemplate ë¿ë§Œ ì•„ë‹ˆë¼ NamedParameterJdbcTemplateë¥¼ í•¨ê»˜ êµ¬ì„±í•˜ëŠ” ì´ìœ ëŠ” Spring Data JDBCì™€ ê°™ì€ ëª¨ë“ˆì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë¼ê³  ìƒê°ë©ë‹ˆë‹¤.</p><h3 id="JdbcUserDetailsManager"><a href="#JdbcUserDetailsManager" class="headerlink" title="JdbcUserDetailsManager"></a>JdbcUserDetailsManager</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ JdbcUserDetailsManagerëŠ” JDBC ê¸°ë°˜ì˜ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„ì„ ìœ„í•´ì„œ JdbcDaoSupportë¥¼ í™•ì¥í•˜ë©° ë‚´ë¶€ì ìœ¼ë¡œ JdbcTemplateê³¼ RowMapperë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. </p><h3 id="JdbcIndexedSessionRepository"><a href="#JdbcIndexedSessionRepository" class="headerlink" title="JdbcIndexedSessionRepository"></a>JdbcIndexedSessionRepository</h3><p>ìŠ¤í”„ë§ ì„¸ì…˜ì—ì„œì˜ JdbcHttpSessionConfigurationëŠ” JdbcTemplateë¥¼ í†µí•´ì„œ JdbcIndexedSessionRepositoryë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê²Œ ë©ë‹ˆë‹¤. JdbcIndexedSessionRepositoryëŠ” ë‚´ë¶€ì ìœ¼ë¡œ JdbcOperationsë¥¼ ì‚¬ìš©í•˜ì—¬ SQLë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ì„¸ì…˜ì— ëŒ€í•œ ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì €ì¥í• ë•Œ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc-advanced-jdbc">JDBC Batch Operations</a>ë¥¼ í™œìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p><blockquote><p>JdbcTemplateëŠ” JdbcOperatrions êµ¬í˜„ì²´ì…ë‹ˆë‹¤.</p></blockquote><h2 id="Stored-Function-with-JDBC"><a href="#Stored-Function-with-JDBC" class="headerlink" title="Stored Function with JDBC"></a>Stored Function with JDBC</h2><p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” Mybatis ë˜ëŠ” JPAë¥¼ ë„ì…í•˜ì§€ ì•Šê³  ìŠ¤í† ì–´ë“œ í•¨ìˆ˜(í”„ë¡œì‹œì €ì™€ ë¹„ìŠ·í•œ)ë¥¼ ì‘ì„±í•´ë†“ê³  ìŠ¤í”„ë§ JDBCë¥¼ í†µí•´ì„œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë ˆê±°ì‹œ ì‹œìŠ¤í…œì„ ê²½í—˜í•˜ì§€ ì•Šì•˜ê±°ë‚˜ Mybatis ë˜ëŠ” JPAë¼ëŠ” ê¸°ìˆ ë§Œì„ ì ‘í•œ ê°œë°œìë“¤ì€ ê¶ê¸ˆí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ê¸°ë„ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìš°ì„  ì•„ë˜ì™€ ê°™ì€ í•¨ìˆ˜ê°€ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì •ì˜ë˜ì–´ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> users$find_by_username<span class="token punctuation">(</span>v_username <span class="token keyword">VARCHAR</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> REFCURSOR <span class="token keyword">AS</span>$$<span class="token keyword">DECLARE</span>    rtn_cursor REFCURSOR :<span class="token operator">=</span> <span class="token string">'rtn_cursor'</span><span class="token punctuation">;</span><span class="token keyword">BEGIN</span>    <span class="token keyword">OPEN</span> rtn_cursor <span class="token keyword">FOR</span>        <span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> enabled <span class="token keyword">from</span> users <span class="token keyword">where</span> username <span class="token operator">=</span> v_username<span class="token punctuation">;</span>    <span class="token keyword">RETURN</span> rtn_cursor<span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span>$$ <span class="token keyword">LANGUAGE</span> plpgsql<span class="token punctuation">;</span><span class="token keyword">BEGIN</span><span class="token punctuation">;</span><span class="token keyword">select</span> users$find_by_username<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">FETCH</span> <span class="token keyword">ALL</span> <span class="token operator">IN</span> <span class="token string">"rtn_cursor"</span><span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span></code></pre><h3 id="StoredProcedure"><a href="#StoredProcedure" class="headerlink" title="StoredProcedure"></a>StoredProcedure</h3><p>ìŠ¤í”„ë§ JDBCì˜ GenericStoredProcedureëŠ” RDBMSì—ì„œ ì§€ì›í•˜ëŠ” ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ëœ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ìŠ¤í† ì–´ë“œ í•¨ìˆ˜ëª…ì„ ì§€ì •í•˜ì—¬ íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì „ë‹¬í•˜ë©´ í”„ë¡œì‹œì € í˜¸ì¶œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using GenericStoredProcedure"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Test</span><span class="token keyword">void</span> <span class="token function">testCallFunctionWithStoredProcedure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>    jdbcTemplate<span class="token punctuation">.</span><span class="token function">setResultsMapCaseInsensitive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">GenericStoredProcedure</span> storedProcedure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericStoredProcedure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    storedProcedure<span class="token punctuation">.</span><span class="token function">setJdbcTemplate</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>    storedProcedure<span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    storedProcedure<span class="token punctuation">.</span><span class="token function">setSql</span><span class="token punctuation">(</span>functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>    storedProcedure<span class="token punctuation">.</span><span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>REF_CURSOR<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    storedProcedure<span class="token punctuation">.</span><span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>VARCHAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> inParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    inParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> results <span class="token operator">=</span> storedProcedure<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>inParams<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> cursors <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> results<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> cursor <span class="token operator">:</span> cursors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="SimpleJdbcXXXX"><a href="#SimpleJdbcXXXX" class="headerlink" title="SimpleJdbcXXXX"></a>SimpleJdbcXXXX</h3><p>SimpleJdbcInsertì™€ SimpleJdbcCallì€ JdbcTemplateë¥¼ ì‚¬ìš©í•˜ì—¬ ëª‡ê°€ì§€ ìƒí™©ì— ëŒ€í•´ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•œë²ˆì— ë§ì€ ìƒì„± ì‘ì—…ì´ í•„ìš”í•œ ê²½ìš°ì— SimpleJdbcInsertë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €(Stored Procedure) ë˜ëŠ” ìŠ¤í† ì–´ë“œ í•¨ìˆ˜(Stored Function)ë¥¼ í˜¸ì¶œí•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ë„ SimpleJdbcCallì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using SimpleJdbcCall"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Test</span><span class="token keyword">void</span> <span class="token function">testCallFunctionWithSimpleJdbcCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>    <span class="token class-name">MapSqlParameterSource</span> sqlParameterSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapSqlParameterSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sqlParameterSource<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleJdbcCall</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withFunctionName</span><span class="token punctuation">(</span>functionName<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withoutProcedureColumnMetaDataAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">declareParameters</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>VARCHAR<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">returningResultSet</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sqlParameterSource<span class="token punctuation">)</span><span class="token punctuation">;</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>GenericStoredProcedureì™€ ë¹„êµí•´ì„œ ì¡°ê¸ˆì€ ì½”ë“œê°€ ê°„ê²°í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h3 id="JdbcTemplate-1"><a href="#JdbcTemplate-1" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h3><p>ìŠ¤í”„ë§ JDBCì—ì„œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë”ë¼ë„ ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JdbcTemplateì—ì„œ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¨ í›„ prepareCallì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ í˜¸ì¶œí•œ ê²°ê³¼ë¥¼ RowMapperë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using connection"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Test</span><span class="token keyword">void</span> <span class="token function">testCallFunctionWithConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> connection <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">CallableStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareCall</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"&#123;call %s(?)&#125;"</span><span class="token punctuation">,</span> functionName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">PgResultSet</span> pgResultSet <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PgResultSet</span><span class="token punctuation">)</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">RowMapperResultSetExtractor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> extractor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowMapperResultSetExtractor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> extractor<span class="token punctuation">.</span><span class="token function">extractData</span><span class="token punctuation">(</span>pgResultSet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>DataClassRowMapper ë˜ëŠ” BeanPropertyRowMapperë¥¼ ì‚¬ìš©í•´ì„œ ë” ë²”ìš©ì ì¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p><a href="https://qr.ae/pvkBiH">ì €ì¥ í”„ë¡œì‹œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì¥ì </a>ë„ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì €ì¥ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œê³  ìˆëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. Spring JDBCì— ëŒ€í•´ì„œ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— ì†Œê°œí•˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ JPA ê¸°ìˆ  ìŠ¤í™ì—ì„œë„ NamedStoredProcedureQueryì™€ ê°™ì´ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc">Spring Docs - Data Access with JDBC</a></li><li><a href="https://www.baeldung.com/jdbc-batch-processing">Batch Processing in JDBC</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Spring Security OAuth2 í•™ìŠµì„ ìœ„í•œ ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©´ì„œ ì‚¬ìš©í•˜ê²Œë  ê° ëª¨ë“ˆì—ì„œ í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œ Spring JDBCë¥¼ ì‚¬ìš©í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ì•¡ì„¸ìŠ¤ì— ëŒ€í•´ì„œ</summary>
      
    
    
    
    
    <category term="JDBC" scheme="https://kdevkr.github.io/tags/JDBC/"/>
    
    <category term="RowMapper" scheme="https://kdevkr.github.io/tags/RowMapper/"/>
    
  </entry>
  
  <entry>
    <title>ëª¨ë“œë²„ìŠ¤ TCP</title>
    <link href="https://kdevkr.github.io/modbus-tcp/"/>
    <id>https://kdevkr.github.io/modbus-tcp/</id>
    <published>2022-09-04T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>ëŒ€ë¶€ë¶„ì˜ IoT ë””ë°”ì´ìŠ¤ì˜ í†µì‹ ì—ëŠ” MQTT ë©”ì‹œì§• í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì—ë„ˆì§€ ë¶„ì•¼ ì‚°ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” í•„ë“œë²„ìŠ¤ë“¤ì—ì„œëŠ” Modbus ë¼ëŠ” í†µì‹  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¥ë¹„ ê°„ ì œì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œì¸ ë§Œí¼ ê°ì¢… ì‚°ì—… ì¥ë¹„ë“¤ì´ ë³´ìœ í•˜ê³  ìˆëŠ” ë°ì´í„°ë¥¼ ì‹œìŠ¤í…œìœ¼ë¡œ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“œë²„ìŠ¤ TCP í”„ë¡œí† ì½œì„ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë” ë†’ì€ ë ˆë²¨ì˜ í†µì‹  í”„ë¡œí† ì½œì¸ REST API ë˜ëŠ” MQTTë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p><h2 id="Modbus-TCP-x2F-IP"><a href="#Modbus-TCP-x2F-IP" class="headerlink" title="Modbus TCP&#x2F;IP"></a>Modbus TCP&#x2F;IP</h2><p>ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì€ ì¼ë°˜ì ìœ¼ë¡œ ìë™í™” ì„¤ë¹„ ì‚°ì—…ì—ì„œ ì‚¬ìš©ë˜ë¯€ë¡œ ì›¹ ê°œë°œìë“¤ì´ ê²½í—˜í•  ìˆ˜ ìˆëŠ” ë²”ìš©ì ì¸ í†µì‹  í”„ë¡œí† ì½œì€ ì•„ë‹™ë‹ˆë‹¤. ëª¨ë“œë²„ìŠ¤ TCPì—ì„œëŠ” MBAP(MODBUS Application Protocol) í—¤ë”ì™€ Function Code ê·¸ë¦¬ê³  ë°ì´í„° í”„ë ˆì„ì„ í•˜ë‚˜ë¡œ ì „ë‹¬í•˜ê²Œ ë˜ë©° ì¼ë°˜ì ì¸ ì†Œì¼“ í†µì‹ ê³¼ ë™ì¼í•©ë‹ˆë‹¤. </p><p>ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì€ ë§ˆìŠ¤í„°&#x2F;ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡°ì´ë¯€ë¡œ ë§ˆìŠ¤í„°ëŠ” ìŠ¬ë ˆì´ë¸Œì—ì„œ ì •ì˜í•œ ë©”ëª¨ë¦¬ ë§µ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì›í•˜ëŠ” ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë„ë¡ ë©”ëª¨ë¦¬ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¦¬ ì •ì˜ëœ ëª‡ê°€ì§€ì˜ ê¸°ëŠ¥ ì½”ë“œ ì¤‘ì—ì„œ 03(0x03, Read Holding Registers)ê³¼ 16(0x10, Wrtie Multiple Registers)ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤. </p><pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token string">'com.ghgande:j2mod:3.1.1'</span></code></pre><p><a href="https://github.com/steveohara/j2mod">steveohara&#x2F;j2mod</a>ëŠ” ëª¨ë“œë²„ìŠ¤ TCPì— ëŒ€í•´ì„œ ë§ˆìŠ¤í„°ì™€ ìŠ¬ë ˆì´ë¸Œ êµ¬ì„±ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë©° ëª¨ë“œë²„ìŠ¤ <a href="https://github.com/steveohara/j2mod/tree/master/src/test/java/com/ghgande/j2mod/modbus">í…ŒìŠ¤íŠ¸ ì˜ˆì œ</a>ë¥¼ ì œê³µí•˜ë¯€ë¡œ ëª¨ë“œë²„ìŠ¤ í†µì‹ ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ê·¸ë‹¤ì§€ ì–´ë µì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.</p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>ë‹¤ìŒì€ ê°„ë‹¨í•˜ê²Œ ìŠ¬ë ˆì´ë¸Œì— ëª¨ë“œë²„ìŠ¤ ë§µì„ ì´ë¯¸ì§€ë¡œ ì •ì˜í•˜ê³  ë§ˆìŠ¤í„°ì—ì„œ ì •ì˜ëœ ëª¨ë“œë²„ìŠ¤ ë§µì— ëŒ€í•´ì„œ ì½ì–´ë³´ëŠ” í…ŒìŠ¤íŠ¸ ì˜ˆì‹œì…ë‹ˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModbusTCP</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TCP_UNIT_ID <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Define slave memory map.</span>        <span class="token class-name">SimpleProcessImage</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleProcessImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObservableRegister</span> register <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObservableRegister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        register<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        image<span class="token punctuation">.</span><span class="token function">addRegister</span><span class="token punctuation">(</span>register<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Run slave.</span>        <span class="token class-name">ModbusSlave</span> tcpSlave <span class="token operator">=</span> <span class="token class-name">ModbusSlaveFactory</span><span class="token punctuation">.</span><span class="token function">createTCPSlave</span><span class="token punctuation">(</span><span class="token number">502</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tcpSlave<span class="token punctuation">.</span><span class="token function">addProcessImage</span><span class="token punctuation">(</span>TCP_UNIT_ID<span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>        tcpSlave<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Run master and connect to slave</span>        <span class="token class-name">ModbusTCPMaster</span> modbusTCPMaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModbusTCPMaster</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">502</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modbusTCPMaster<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>modbusTCPMaster<span class="token punctuation">.</span><span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Register</span><span class="token punctuation">[</span><span class="token punctuation">]</span> registers <span class="token operator">=</span> modbusTCPMaster<span class="token punctuation">.</span><span class="token function">readMultipleRegisters</span><span class="token punctuation">(</span>TCP_UNIT_ID<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"registers, &#123;&#125;"</span><span class="token punctuation">,</span> registers<span class="token punctuation">)</span><span class="token punctuation">;</span>            modbusTCPMaster<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// Closes all slaves</span>        <span class="token class-name">ModbusSlaveFactory</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>í˜„ì¬ ì‹œìŠ¤í…œì—ì„œëŠ” AWS IoT ë° SQS ê·¸ë¦¬ê³  OpenAPIë¥¼ í†µí•˜ì—¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ëª¨ë“œë²„ìŠ¤ í†µì‹  í”„ë¡œí† ì½œì„ í†µí•´ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹´ë‹¹í•˜ê³  ìˆì§€ëŠ” ì•Šìœ¼ë‚˜ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. </p></blockquote><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://modbus.org/docs/Modbus_Messaging_Implementation_Guide_V1_0b.pdf">MODBUS Messaging on TCP&#x2F;IP Implementation Guide V1.0b</a></li><li><a href="https://www.youtube.com/watch?v=eb8iophBMLs">ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œ 11ë¶€ - ëª¨ë“œë²„ìŠ¤ TCP(ë” ë„“ì€ ì„¸ìƒìœ¼ë¡œ)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ëŒ€ë¶€ë¶„ì˜ IoT ë””ë°”ì´ìŠ¤ì˜ í†µì‹ ì—ëŠ” MQTT ë©”ì‹œì§• í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì—ë„ˆì§€ ë¶„ì•¼ ì‚°ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” í•„ë“œë²„ìŠ¤ë“¤ì—ì„œëŠ” Modbus ë¼ëŠ” í†µì‹  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¥ë¹„ ê°„ ì œì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ </summary>
      
    
    
    
    
    <category term="Modbus" scheme="https://kdevkr.github.io/tags/Modbus/"/>
    
    <category term="TCP/IP" scheme="https://kdevkr.github.io/tags/TCP-IP/"/>
    
  </entry>
  
  <entry>
    <title>ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ì™€ ì‹œê°„ ì •ë°€ë„</title>
    <link href="https://kdevkr.github.io/unix-timestamp/"/>
    <id>https://kdevkr.github.io/unix-timestamp/</id>
    <published>2022-09-01T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.147Z</updated>
    
    <content type="html"><![CDATA[<p>ê° ë‚˜ë¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ì‹œê°„ì€ ë‹¤ë¥´ê³  ë™ì¼í•œ ë‚˜ë¼ì—ì„œë„ ì—¬ëŸ¬ê°€ì§€ ì‹œê°„ ê¸°ì¤€ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ê°œë°œìë“¤ì€ ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©° ì „ì„¸ê³„ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ì‹œê°„ìœ¼ë¡œ ì •ì˜ëœ ê²ƒì„ ë”°ë¼ì•¼í•©ë‹ˆë‹¤. ì„¸ê³„í˜‘ì •ì‹œë¼ê³  ë¶€ë¥´ëŠ” UTCëŠ” 1970ë…„ 1ì›” 1ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •í•œ ì‹œê°„ìœ¼ë¡œ ë³´í†µ ìœ ë‹‰ìŠ¤ ì‹œê°„ ë˜ëŠ” ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ë¼ê³  í•©ë‹ˆë‹¤.</p><h3 id="ìœ ë‹‰ìŠ¤-ì‹œê°„"><a href="#ìœ ë‹‰ìŠ¤-ì‹œê°„" class="headerlink" title="ìœ ë‹‰ìŠ¤ ì‹œê°„"></a>ìœ ë‹‰ìŠ¤ ì‹œê°„</h3><p>ê¸°ë³¸ì ìœ¼ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ì— ëŒ€í•´ì„œ ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§€ëŠ” ì •ìˆ˜ë¡œ í‘œí˜„í•œ ê°’ì„ ìœ ë‹‰ìŠ¤ ì‹œê°„(Unix Epoch) ë˜ëŠ” ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ë¼ê³  í•©ë‹ˆë‹¤. PostgreSQL ì—ì„œëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ ìœ í˜•ì˜ ì»¬ëŸ¼ì— ëŒ€í•´ì„œ EPOCH í‚¤ì›Œë“œë¥¼ í†µí•´ì„œ ì´ˆ ë‹¨ìœ„ë¡œ í™˜ì‚°ëœ ìœ ë‹‰ìŠ¤ ì‹œê°„ì„ ì¶”ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p><ul><li><a href="https://www.epoch101.com/#epochConvertToReadable-Container">Convert Epoch&#x2F;Unix Timestamp</a></li><li><a href="https://it-tools.tech/date-converter">Date-time converter</a></li></ul><h3 id="íƒ€ì„ìŠ¤íƒ¬í”„-ì •ë°€ë„"><a href="#íƒ€ì„ìŠ¤íƒ¬í”„-ì •ë°€ë„" class="headerlink" title="íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„"></a>íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„</h3><p>ìœ ë‹‰ìŠ¤ ì‹œê°„ì´ ì •ì˜ë˜ê³  ì‹œê°„ì´ í˜ëŸ¬ í˜„ì¬ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ì´ˆ ë‹¨ìœ„ê°€ ì•„ë‹Œ ë°€ë¦¬ê³  ê·¸ë¦¬ê³  ì‹¬ì§€ì–´ëŠ” ë‚˜ë…¸ì´ˆ ê¹Œì§€ì˜ ë‹¨ìœ„ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„ë¥¼ ì§€ì›í•˜ê²Œ ë©ë‹ˆë‹¤. ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ ë˜ëŠ” ì™¸ë¶€ ì†”ë£¨ì…˜ì— ë”°ë¼ì„œ ì •ë°€ë„ í‘œí˜„ ì§€ì›ì´ ë‹¤ë¥´ë©° ì‹¬ì§€ì–´ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì¸ KDB+ ì—ì„œì˜ <a href="https://code.kx.com/q4m3/2_Basic_Data_Types_Atoms/#25-temporal-data">ì‹œê°„ ìœ í˜•</a>ì€ 1970ë…„ 1ì›” 1ì¼ì´ ì•„ë‹Œ 2000ë…„ 1ì›” 1ì¼ì„ ê¸°ì¤€ì˜ ë‚˜ë…¸ì´ˆ ì •ë°€ë„ë¥¼ ê°€ì§€ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p><pre class="language-q" data-language="q"><code class="language-q"><span class="token datetime number">2000.01.01</span><span class="token verb operator">=</span><span class="token number">0</span><span class="token number">1b</span><span class="token punctuation">.</span>z<span class="token punctuation">.</span>p<span class="token datetime number">2022.09.01</span>D<span class="token datetime number">21:38:52.940</span><span class="token number">328000</span></code></pre><p>íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ìŠ¤ì¹¼ë¼ ì‹¤ìˆ˜ë¡œ ë³€í™˜í•´ë³´ë©´ ë‚˜ë…¸ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§„ ì •ìˆ˜ê°’ìœ¼ë¡œ í‘œí˜„ë˜ë¯€ë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ ì—°ê³„í•˜ê¸° ìœ„í•´ 1970ë…„ 1ì›” 1ì¼ ë¶€í„°ì˜ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§€ëŠ” ì •ìˆ˜ê°’ìœ¼ë¡œ í™˜ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1 ë‚˜ë…¸ì´ˆëŠ” 10^6 ë°€ë¦¬ì´ˆ ì…ë‹ˆë‹¤.)</p><pre class="language-q" data-language="q"><code class="language-q"><span class="token keyword">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token symbol">`long</span><span class="token verb operator">$</span><span class="token datetime number">2022.09.01</span>D<span class="token datetime number">21:38:52.940</span><span class="token number">328000</span><span class="token punctuation">)</span><span class="token verb operator">-</span><span class="token symbol">`long</span><span class="token verb operator">$</span><span class="token datetime number">1970.01.01</span>D<span class="token datetime number">00:00</span><span class="token punctuation">)</span><span class="token verb operator">%</span><span class="token number">1e6</span><span class="token number">1662068332940</span></code></pre><p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ì´ˆ ë‹¨ìœ„ì˜ ìœ ë‹‰ìŠ¤ ì‹œê°„ì´ ì•„ë‹Œ ë°€ë¦¬ì´ˆë¡œ í™˜ì‚°í•œ ì •ìˆ˜ê°’ì„ í† ëŒ€ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì‹œìŠ¤í…œ ê°„ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ ì—¬ëŸ¬ê°€ì§€ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì™¸ë¶€ ì†”ë£¨ì…˜ê³¼ì˜ ì—°ê³„ë¥¼ ìˆ˜í–‰í•˜ë©° ë™ì‘í•˜ê²Œ ë˜ë¯€ë¡œ ê° ì‹œìŠ¤í…œì—ì„œ ì§€ì›í•˜ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ì˜ ì •ë°€ë„ í‘œí˜„ ì°¨ì´ë¡œ ì¸í•´ì„œ ì•½ê°„ì˜ ì°¨ì´ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ ê³ ë ¤í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ê° ë‚˜ë¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ì‹œê°„ì€ ë‹¤ë¥´ê³  ë™ì¼í•œ ë‚˜ë¼ì—ì„œë„ ì—¬ëŸ¬ê°€ì§€ ì‹œê°„ ê¸°ì¤€ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ê°œë°œìë“¤ì€ ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©° ì „ì„¸ê³„ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ì‹œê°„ìœ¼ë¡œ ì •ì˜ëœ ê²ƒì„ ë”°ë¼ì•¼í•©ë‹ˆë‹¤. ì„¸ê³„í˜‘ì •ì‹œë¼ê³  ë¶€ë¥´ëŠ” U</summary>
      
    
    
    
    
    <category term="Unix Timestamp" scheme="https://kdevkr.github.io/tags/Unix-Timestamp/"/>
    
    <category term="Unix Epoch" scheme="https://kdevkr.github.io/tags/Unix-Epoch/"/>
    
  </entry>
  
  <entry>
    <title>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì¸ë±ìŠ¤</title>
    <link href="https://kdevkr.github.io/elasticsearch-indices/"/>
    <id>https://kdevkr.github.io/elasticsearch-indices/</id>
    <published>2022-08-21T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.139Z</updated>
    
    <content type="html"><![CDATA[<p>í˜„ì¬ ì¡°ì§ì˜ ì£¼ìš” ì†”ë£¨ì…˜ì€ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 1.6ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©° ì—¬ëŸ¬ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì œê°€ ë‹´ë‹¹í•˜ì—¬ ê°œë°œì¤‘ì¸ ì‹ ê·œ ì‹œìŠ¤í…œì€ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©ì¤‘ì´ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì‹œê³„ì—´ ë°ì´í„°ì™€ ê°™ì€ ëŒ€ê·œëª¨ ë°ì´í„° ë° ì•ˆì „í•˜ê²Œ ìš´ìš©ë˜ì–´ì•¼í•˜ëŠ” ê°€ìš©ì„±ì´ ìš”êµ¬ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p>ì‹±ê¸€ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ìš©ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì • ì •ë³´ì— ëŒ€í•œ ë¡œê·¸ ë°ì´í„°ë¥¼ ê°œë³„ ë‹¨ì¼ ì¸ë±ìŠ¤ì— ì €ì¥í•˜ê³  ìˆìœ¼ë©° ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¡œë¶€í„° ì •í•´ì§„ ì¸ë±ìŠ¤ì— ì €ì¥ë˜ëŠ” ë„íë¨¼íŠ¸ë¥¼ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ì§€ì›í•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì¿¼ë¦¬ë¥¼ í™œìš©í•  ê²½í—˜ì€ ë§ì§€ ì•Šì€ ê²ƒì€ ì•„ì‰¬ìš´ ë¶€ë¶„ì´ê¸´ í•©ë‹ˆë‹¤.</p><blockquote><p>ì‹œê³„ì—´ ë°ì´í„°ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ì•„ë‹Œ ë³„ë„ì˜ <a href="https://kx.com/developers/">ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤</a>ì— ì €ì¥í•˜ê³  í†µê³„ ì •ë³´ë¥¼ ì¿¼ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p></blockquote><h2 id="ì¸ë±ìŠ¤-ê´€ë ¨-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"><a href="#ì¸ë±ìŠ¤-ê´€ë ¨-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" class="headerlink" title="ì¸ë±ìŠ¤ ê´€ë ¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"></a>ì¸ë±ìŠ¤ ê´€ë ¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2><p>ëŒ€ê·œëª¨ ë…¸ë“œë¡œ êµ¬ì„±ëœ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ìš©í•˜ì§€ ì•Šë”ë¼ë„ ì¸ë±ìŠ¤ì™€ ê´€ë ¨ëœ ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œë“¤ì„ ê°„ê°„íˆ ê²½í—˜í•´ë³´ê¸´ í–ˆìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ê³  ê°€ìš©ì„±ìœ¼ë¡œ ìš´ì˜ë˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¡œ ë´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p><h3 id="ë™ì -ë§¤í•‘-í•„ë“œ-ì œí•œ"><a href="#ë™ì -ë§¤í•‘-í•„ë“œ-ì œí•œ" class="headerlink" title="ë™ì  ë§¤í•‘ í•„ë“œ ì œí•œ"></a>ë™ì  ë§¤í•‘ í•„ë“œ ì œí•œ</h3><p>ì¡°ì§ì˜ ê¸°ì¡´ ì†”ë£¨ì…˜ì´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¥¼ ì£¼ìš” ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™œìš©í–ˆë”ë¼ë„ ì£¼ ê°œë°œìë“¤ì´ í˜„ì¬ ê°œë°œì¤‘ì¸ ì‹œìŠ¤í…œì— ì°¸ì—¬í•œ ê²ƒì€ ì•„ë‹ˆê³  ì €ëŠ” ì¡°ì§ì˜ ì‹ ì…ì¼ ë•Œ ì°¸ì—¬í–ˆìœ¼ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ëŒ€í•´ ëŒ€ëµì ì¸ ê°œë…ì¡°ì°¨ ëª¨ë¥´ë˜ ì‹œê¸°ì˜€ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì„¤ê³„ê°€ ëª…í™•í•˜ì§€ ì•Šì•˜ê¸°ì— ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-dynamic">ë™ì  í•„ë“œ ë§¤í•‘</a>ì„ í†µí•´ ê°œë°œìê°€ ë³„ë„ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë„íë¨¼íŠ¸ì— ëŒ€í•œ ê° í•„ë“œë“¤ì„ ìë™ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ìƒíƒœë¡œ ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ì¼ë¶€ ì •ë³´ì˜ ë³€í™”ë“¤ì„ ë¡œê·¸ë¡œ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.</p><blockquote><p>limit of total fields 1000 has been exceeded</p></blockquote><p>ìœ„ ë¬¸ì œëŠ” ë™ì  í•„ë“œ ë§¤í•‘ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì¸ë±ìŠ¤ì— ì—¬ëŸ¬ê°€ì§€ í•„ë“œê°€ ì €ì¥ë˜ì–´ì§ˆë•Œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤. ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì €ì¥ë˜ë„ë¡í•œ ë¡œê·¸ ì¤‘ì—ì„œ ë‹¤ì–‘í•˜ê²Œ í•„ë“œê°€ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ë©”íƒ€ë°ì´í„° ì˜¤ë¸Œì íŠ¸ê°€ í¬í•¨ë˜ì—ˆê³  ì ì  ë‹¤ì–‘í•œ í‚¤ ê°’ì´ ì¶”ê°€ë˜ë©´ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ëŠ” ë™ì  ë§¤í•‘ì— ì˜í•´ ë©”íƒ€ë°ì´í„° í‚¤ì— ëŒ€í•œ í•„ë“œ ë§¤í•‘ì„ ì¶”ê°€í•˜ì—¬ ë§¤í•‘ ì •ë³´ê°€ ì ì°¨ ëŠ˜ì–´ë‚˜ì„œ ì œí•œëŸ‰ê¹Œì§€ ë„˜ì–´ì„œê²Œ ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•œ ê²ƒ ì…ë‹ˆë‹¤.</p><p>ì´ ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ì„ì‹œì ìœ¼ë¡œ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-limit-settings">ì¸ë±ìŠ¤ì— ëŒ€í•´ í•„ë“œ ì œí•œ ìˆ˜ë¥¼ ì¡°ì •</a>í•˜ì—¬ ì¡°ì¹˜í•  ìˆ˜ ìˆìœ¼ë‚˜ ë©”íƒ€ë°ì´í„° ì˜¤ë¸Œì íŠ¸ê°€ ë‹¤ì–‘í•˜ê²Œ ì¶”ê°€ë˜ë©´ ë‹¤ì‹œ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê·¼ë³¸ì ì¸ í•´ê²°ì±…ì€ ì•„ë‹™ë‹ˆë‹¤. ê·¸ë˜ì„œ í•´ë‹¹ í˜„ìƒì´ ë°œê²¬ë˜ëŠ” ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œëŠ” ë™ì  ë§¤í•‘ì— ì˜í•´ ì¶”ê°€ëœ ë§¤í•‘ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬ ê³„ì†í•´ì„œ ë§¤í•‘ ì •ë³´ê°€ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆëŠ” í•„ë“œë¥¼ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/enabled.html">ë‹¨ìˆœíˆ ì €ì¥ë§Œí•˜ë„ë¡</a> ë§¤í•‘ ì •ë³´ë¥¼ ë¶€ì—¬í•˜ê³  ì¬ ì¸ë±ìŠ¤ë¥¼ ìˆ˜í–‰í•´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤.</p><h3 id="ë„íë¨¼íŠ¸-ì‚­ì œ"><a href="#ë„íë¨¼íŠ¸-ì‚­ì œ" class="headerlink" title="ë„íë¨¼íŠ¸ ì‚­ì œ"></a>ë„íë¨¼íŠ¸ ì‚­ì œ</h3><p>ë‹¨ì¼ ë…¸ë“œì˜ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì´ë¯€ë¡œ ë‹¨ì¼ ì¸ë±ìŠ¤ì— ë„ˆë¬´ ë§ì€ ë„íë¨¼íŠ¸ê°€ ì €ì¥ë˜ë©´ ì„±ëŠ¥ì— ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¬ì§€ì–´ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 7ë¶€í„° ì¸ë±ìŠ¤ì— ëŒ€í•œ í”„ë¼ì´ë¨¸ë¦¬ ìƒ¤ë“œì˜ ê¸°ë³¸ê°’ì´ 1 ì´ì—ˆë˜ ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì¸ë±ìŠ¤ì˜ í•˜ë‚˜ì˜ ìƒ¤ë“œê°€ ë„ˆë¬´ ë§ì€ ë„íë¨¼íŠ¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” êµ¬ì¡°ê°€ ë˜ì–´ë²„ë ¸ìŠµë‹ˆë‹¤.</p><p>íŠ¹ì • ì¸ë±ìŠ¤ì— ì €ì¥ë˜ëŠ” ë„íë¨¼íŠ¸ê°€ ë„ˆë¬´ ë§ì•„ì¡Œê³  ì‹¬ì§€ì–´ëŠ” ì˜¤ë˜ëœ ë„íë¨¼íŠ¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë‚¨ì•„ìˆì—ˆê¸°ì— ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ ë„íë¨¼íŠ¸ëŠ” ì§€ìš°ë„ë¡ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html">_delete_by_query</a>ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤ì¼€ì¤„ì— ì˜í•´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì§€ìš°ë„ë¡ ìš”ì²­í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, <a href="https://ridicorp.com/story/index-aliases/">Elasticsearchì˜ ìƒ‰ì¸ ë³„ëª… í™œìš© íŒ</a>ì— ë‚˜ì™€ìˆëŠ” ê²ƒì²˜ëŸ¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ë„íë¨¼íŠ¸ë¥¼ ì‹¤ì œë¡œ ì‚­ì œí•˜ëŠ” ê²ƒì€ ì•„ë‹Œ ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì˜¤íˆë ¤ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì˜ ì¸ë±ìŠ¤ì˜ ìš©ëŸ‰ì´ ì¼ì‹œì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ê²Œ ë˜ëŠ” ë¬¸ì œë¥¼ ê°€ì ¸ê°€ê²Œ ë©ë‹ˆë‹¤. </p><blockquote><p>ë””ìŠ¤í¬ ë³¼ë¥¨ì„ ì¦ì„¤í•  ìˆ˜ ìˆë‹¤ê³  í•´ë„ ì„œë²„ ìš©ëŸ‰ì— ë¯¼ê°í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="ì¼ìë³„-ì¸ë±ìŠ¤-ì¡°íšŒ"><a href="#ì¼ìë³„-ì¸ë±ìŠ¤-ì¡°íšŒ" class="headerlink" title="ì¼ìë³„ ì¸ë±ìŠ¤ ì¡°íšŒ"></a>ì¼ìë³„ ì¸ë±ìŠ¤ ì¡°íšŒ</h3><p>ë„íë¨¼íŠ¸ ì‚­ì œê°€ ìš©ì´í•˜ì§€ ì•Šì€ ë‹¨ì¼ ì¸ë±ìŠ¤ì˜ ë¬¸ì œë¥¼ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ íŠ¹ì • ë¡œê·¸ì— ëŒ€í•´ì„œëŠ” ì¼ìë³„ë¡œ ì €ì¥ë˜ë„ë¡ ì ìš©í•´ì•¼í–ˆìŠµë‹ˆë‹¤. ë‹¨ì¼ ì¸ë±ìŠ¤ë¡œ ì €ì¥í•˜ë˜ê±¸ ì¼ìë³„ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì€ ì¸ë±ìŠ¤ ëª…ì— ì €ì¥ë˜ëŠ” ì‹œì ì˜ ë‚ ì§œ í¬ë§·(yyyyMMdd)ì„ ì¶”ê°€í•˜ë©´ ë˜ê¸°ì— ì–´ë ¤ì›€ì€ ì—†ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì‘ì—…ì— ëŒ€í•´ ê²€í† í•˜ë˜ ì¤‘ ì¸ë±ìŠ¤ì— ëŒ€í•œ ì¡°íšŒ ê¸°ëŠ¥ì— ì¼ë¶€ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html">Search API</a>ì— ëŒ€í•´ì„œëŠ” ì¸ë±ìŠ¤ íŒ¨í„´ì— ëŒ€í•´ì„œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤ë§Œ, íŠ¹ì • ë„íë¨¼íŠ¸ì— ëŒ€í•œ ì•„ì´ë””ë¥¼ ê¸°ì¤€ìœ¼ë¡œ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html#docs-get-api-request">Get API</a>ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ë±ìŠ¤ ëª…ì„ ì•Œì•„ì•¼ë§Œ í•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ëŠ” ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-get.html">Mget API</a>ë„ ì¡°íšŒí•˜ê³ ì í•˜ëŠ” ì¸ë±ìŠ¤ë“¤ì˜ ì´ë¦„ì„ ë‚˜ì—´í•´ì•¼í–ˆê¸°ì— ì¸ë±ìŠ¤ íŒ¨í„´ì— ëŒ€í•´ ì¸ë±ìŠ¤ ëª©ë¡ì„ ì¡°íšŒí•˜ê³  ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ê±¸ì³ ë³‘ë ¬ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// NOTE: ì¸ë±ìŠ¤ íŒ¨í„´ì— ì˜í•œ ì‹¤ì œ ì¸ë±ìŠ¤ ëª©ë¡ ì¡°íšŒ</span><span class="token class-name">GetIndexRequest</span> getIndexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIndexRequest</span><span class="token punctuation">(</span><span class="token string">"oauth_log*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">GetIndexResponse</span> getIndexResponse <span class="token operator">=</span> highLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>getIndexRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indices <span class="token operator">=</span> getIndexResponse<span class="token punctuation">.</span><span class="token function">getIndices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// NOTE: ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ê±¸ì³ ë³‘ë ¬ ì¡°íšŒ</span><span class="token class-name">MultiGetRequest</span> multiGetRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiGetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> index <span class="token operator">:</span> indices<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    multiGetRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">"c70e49fa-d0f4-4278-a271-a46f688349f6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">MultiGetResponse</span> multiGetResponse <span class="token operator">=</span> highLevelClient<span class="token punctuation">.</span><span class="token function">mget</span><span class="token punctuation">(</span>multiGetRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">MultiGetItemResponse</span><span class="token punctuation">[</span><span class="token punctuation">]</span> responses <span class="token operator">=</span> multiGetResponse<span class="token punctuation">.</span><span class="token function">getResponses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultiGetItemResponse</span> response <span class="token operator">:</span> responses<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token function">isFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> index <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> id <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125; in &#123;&#125;, &#123;&#125;"</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> index<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì¼ìë³„ ì¸ë±ìŠ¤ì— ìˆëŠ” ë„íë¨¼íŠ¸ì˜ ì•„ì´ë””ê°€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•  ë•Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p></blockquote><p>ìµœê·¼ ì¸ë±ìŠ¤ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•˜ê³  ìˆì–´ì„œ ì—¬íƒœê¹Œì§€ ê²½í—˜í–ˆë˜ ë¬¸ì œì— ëŒ€í•´ì„œ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì¸ë±ìŠ¤ ê´€ë¦¬ì™€ ê´€ë ¨í•´ì„œ ì‚¬ìš©ì¤‘ì´ë˜ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ë²„ì „ì„ 7.3.2ì—ì„œ 7.12.1ë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ê³  ìˆìœ¼ë©° ì´ì™€ ë”ë¶ˆì–´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì™€ í•¨ê»˜ í‚¤ë°”ë‚˜ë¥¼ í™œìš©í•´ì„œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì— ëŒ€í•´ì„œ ê³µë¶€í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;í˜„ì¬ ì¡°ì§ì˜ ì£¼ìš” ì†”ë£¨ì…˜ì€ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 1.6ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©° ì—¬ëŸ¬ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì œê°€ ë‹´ë‹¹í•˜ì—¬ ê°œë°œì¤‘ì¸ ì‹ ê·œ ì‹œìŠ¤í…œì€ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©ì¤‘ì´ë¯€ë¡œ </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ì—°ê²°í•  ìˆ˜ ì—†ìŒ</title>
    <link href="https://kdevkr.github.io/kibana-cannot-connect-elasticsearch/"/>
    <id>https://kdevkr.github.io/kibana-cannot-connect-elasticsearch/</id>
    <published>2022-08-18T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p><img data-src="/images/posts/kibana-cannot-connect-elasticsearch/01.png"></p><p>AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì„¤ì¹˜ëœ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ëŒ€í•´ í‚¤ë°”ë‚˜ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ë‹ˆ ìœ„ì™€ ê°™ì´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” í™”ë©´ì´ ë…¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì´ ë¬¸ì œì— ëŒ€í•´ ë¨¸ë¦¬ë¥¼ ì‹¸ë§¤ë©´ì„œ ì—¬ëŸ¬ê°€ì§€ë¥¼ ì‹œë„í•´ë³´ì•˜ìœ¼ë‚˜ í•´ê²°ë˜ì§€ ì•Šì•˜ê³  ì§‘ì—ì™€ì„œ ì‰¬ëŠ” ê¹€ì— ì´ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ê²€ìƒ‰í•´ë³´ë©´ì„œ ì—¬ëŸ¬ê°€ì§€ í™•ì¸ ëì— ì›ì¸ì„ ì°¾ì•„ë‚´ì–´ ì´ ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤.</p><h2 id="í‚¤ë°”ë‚˜-ì‘ë‹µ-í˜ì´ë¡œë“œ"><a href="#í‚¤ë°”ë‚˜-ì‘ë‹µ-í˜ì´ë¡œë“œ" class="headerlink" title="í‚¤ë°”ë‚˜ ì‘ë‹µ í˜ì´ë¡œë“œ"></a>í‚¤ë°”ë‚˜ ì‘ë‹µ í˜ì´ë¡œë“œ</h2><blockquote><p>This Kibana installation has strict security requirements enabled that your current browser does not meet.</p></blockquote><p>ë¨¼ì €, ì›¹ í˜ì´ì§€ í™”ë©´ì—ì„œëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‚´ìš©ì˜ ë©”ì‹œì§€ì˜€ì§€ë§Œ ì‹¤ì œë¡œ í‚¤ë°”ë‚˜ë¡œë¶€í„° ë°›ì€ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ í™•ì¸í•´ë³´ë‹ˆ <a href="https://www.elastic.co/guide/en/kibana/current/Security-production-considerations.html#csp-strict-mode">Content Security Policy</a> ê´€ë ¨ëœ ì˜¤ë¥˜ ë‚´ìš©ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  í¬ë¡¬ ê°œë°œì ë„êµ¬ ì½˜ì†”ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ ë¡œê·¸ë„ í‘œì‹œë¨ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">Refused to execute inline script because it violates the following Content Security Policy directive: <span class="token string">"script-src 'unsafe-eval' 'nonce-LQ+1u6/j7+lb3KNy'"</span><span class="token builtin class-name">.</span>Either the <span class="token string">'unsafe-inline'</span> keyword, a <span class="token builtin class-name">hash</span> <span class="token punctuation">(</span><span class="token string">'sha256-SHHSeLc0bp6xt4BoVVyUy+3IbVqp3ujLaR+s+kSP5UI='</span><span class="token punctuation">)</span>, or a nonce <span class="token punctuation">(</span><span class="token string">'nonce-...'</span><span class="token punctuation">)</span> is required to <span class="token builtin class-name">enable</span> inline execution.  </code></pre><h3 id="CSP-ë¹„í™œì„±í™”-ì‹œë„"><a href="#CSP-ë¹„í™œì„±í™”-ì‹œë„" class="headerlink" title="CSP ë¹„í™œì„±í™” ì‹œë„"></a>CSP ë¹„í™œì„±í™” ì‹œë„</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">csp.strict</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre><p>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ì‚¬ìœ ì¸ì§€ ë‹¤ë¥¸ ë¬¸ì œì¸ì§€ë¥¼ íŒë‹¨í•  ìˆ˜ ì—†ì–´ì„œ CSPë¥¼ ë¹„í™œì„±í™” í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, CSP ë¹„í™œì„±í™” í›„ì—ë„ í‚¤ë°”ë‚˜ì—ì„œëŠ” ë™ì¼í•˜ê²Œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ê³  í‘œì‹œë˜ì—ˆê¸°ì— ì´ë¡œ ì¸í•œ ë¬¸ì œëŠ” ì•„ë‹˜ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p><h2 id="í‚¤ë°”ë‚˜-ë¡œê·¸"><a href="#í‚¤ë°”ë‚˜-ë¡œê·¸" class="headerlink" title="í‚¤ë°”ë‚˜ ë¡œê·¸"></a>í‚¤ë°”ë‚˜ ë¡œê·¸</h2><p>ì‚¬ì‹¤ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ê³ ë‚˜ì„œëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì™€ í‚¤ë°”ë‚˜ì˜ ì„¤ì • íŒŒì¼ì˜ ë¬¸ì œê°€ ì•„ë‹ê¹Œ ì—¬ëŸ¬ê°€ì§€ ì‚´í´ë³´ì•˜ì§€ë§Œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì„¤ì •ê³¼ ë‹¤ë¥¼ë°”ê°€ ì—†ì—ˆê¸°ì— í‚¤ë°”ë‚˜ ë¡œê·¸ë¥¼ í™•ì¸í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p><h3 id="Chromium-with-headless-shell"><a href="#Chromium-with-headless-shell" class="headerlink" title="Chromium with headless_shell"></a>Chromium with headless_shell</h3><blockquote><p>Reporting plugin self-check generated a warning: Error: Could not close browser client handle</p></blockquote><p>ê°€ì¥ ë¨¼ì € ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ìœ„ ë¡œê·¸ì— ëŒ€í•´ ê²€ìƒ‰í•´ë³´ë‹ˆ <a href="https://github.com/elastic/kibana/issues/53829">kibana&#x2F;issues&#x2F;53829</a>ì—ì„œ ìƒŒë“œë°•ìŠ¤ ì˜µì…˜ì„ ì„¤ì •í•œ ê²ƒì„ ë³´ê³  ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">xpack.reporting.capture.browser.chromium.disableSandbox</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>ìœ„ ì¡°ì¹˜ì™€ í•¨ê»˜ EC2ì— ë…¸ë“œì™€ í¬ë¡œë¯¸ì›€ íŒ¨í‚¤ì§€ë¥¼ ì§ì ‘ ì„¤ì¹˜ê¹Œì§€ í•´ë³´ì•˜ì§€ë§Œ ìœ„ ë¬¸ì œê°€ í•´ì†Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p><h3 id="í”ŒëŸ¬ê·¸ì¸-ë¡œê·¸"><a href="#í”ŒëŸ¬ê·¸ì¸-ë¡œê·¸" class="headerlink" title="í”ŒëŸ¬ê·¸ì¸ ë¡œê·¸"></a>í”ŒëŸ¬ê·¸ì¸ ë¡œê·¸</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>error<span class="token punctuation">]</span><span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">[</span>plugin:xpack_main@7.3.2<span class="token punctuation">]</span> Status changed from yellow to red - <span class="token punctuation">[</span>data<span class="token punctuation">]</span> Elasticsearch cluster did not respond with license information.</code></pre><p>ì§‘ì—ì™€ì„œ í‚¤ë°”ë‚˜ ë¡œê·¸ë¥¼ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ë‹ˆ ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ì‚¬ì‹¤ íšŒì‚¬ì—ì„œëŠ” í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜ì´ë¯€ë¡œ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ì‚¬ìœ ì™€ëŠ” ìƒê´€ì—†ë‹¤ê³  íŒë‹¨í–ˆì—ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— í‚¤ë°”ë‚˜ ê´€ë ¨ ì¸ë±ìŠ¤ê¹Œì§€ëŠ” ë§Œë“¤ì–´ì§€ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ ì´ ë˜ëŠ” ìƒí™©ì´ë¼ê³  ìƒê°í•  ìˆ˜ ë°–ì— ì—†ì—ˆì„í…Œë‹ˆê¹Œìš”.</p><p>ì•„ë¬´íŠ¼ ìœ„ ë¡œê·¸ì— ëŒ€í•´ì„œ ê²€ìƒ‰í•´ë³´ë‹ˆ <a href="https://github.com/elastic/kibana/issues/36079">kibana&#x2F;issues&#x2F;36079</a>ì— ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ëŒ“ê¸€ì´ ëˆˆì— ë“¤ì–´ì™”ê³  ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> http://localhost:9200/_xpack/license?pretty<span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì‚¬ì‹¤ ë¼ì´ì„¼ìŠ¤ê°€ ì—†ë‹¤ê³  ìƒê°í•˜ì§€ëŠ” ì•Šì•˜ê³  í˜¹ì‹œë‚˜ íŠ¸ë¼ì´ì–¼ ë¼ì´ì„¼ìŠ¤ì¸ë° ë§Œë£Œë˜ì–´ì„œ ê·¸ëŸ° ê²ƒì¸ê°€ë¼ê³  ìƒê°ë˜ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/license-settings.html">License Settings</a>ì— ë‚˜ì™€ìˆëŠ”ëŒ€ë¡œ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ ìœ í˜•ì„ ì§€ì •í•˜ê³  í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì˜€ì§€ë§Œ ì¦ìƒì„ ë™ì¼í–ˆìŠµë‹ˆë‹¤. </p></blockquote><p>ê·¸ëŸ¬ë‚˜, ì •ë§ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ëŠ” ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ì—†ì—ˆê³  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/start-basic.html">Start basic API</a>ë¥¼ í†µí•´ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆë‹¤ê³  í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ë¼ì´ì„¼ìŠ¤ë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> -X POST http://localhost:9200/_license/start_basic?pretty<span class="token punctuation">&#123;</span>  <span class="token string">"acknowledged"</span> <span class="token builtin class-name">:</span> true,  <span class="token string">"basic_was_started"</span> <span class="token builtin class-name">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> http://localhost:9200/_xpack/license?pretty<span class="token punctuation">&#123;</span>  <span class="token string">"license"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>    <span class="token string">"status"</span> <span class="token builtin class-name">:</span> <span class="token string">"active"</span>,    <span class="token string">"uid"</span> <span class="token builtin class-name">:</span> <span class="token string">"fb6a45f5-4f26-45fe-9889-2380b9ec8801"</span>,    <span class="token string">"type"</span> <span class="token builtin class-name">:</span> <span class="token string">"basic"</span>,    <span class="token string">"issue_date"</span> <span class="token builtin class-name">:</span> <span class="token string">"2022-08-18T14:51:26.602Z"</span>,    <span class="token string">"issue_date_in_millis"</span> <span class="token builtin class-name">:</span> <span class="token number">1660834286602</span>,    <span class="token string">"max_nodes"</span> <span class="token builtin class-name">:</span> <span class="token number">1000</span>,    <span class="token string">"issued_to"</span> <span class="token builtin class-name">:</span> <span class="token string">"cluster"</span>,    <span class="token string">"issuer"</span> <span class="token builtin class-name">:</span> <span class="token string">"elasticsearch"</span>,    <span class="token string">"start_date_in_millis"</span> <span class="token builtin class-name">:</span> -1  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><img data-src="/images/posts/kibana-cannot-connect-elasticsearch/02.png"></p><p>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ìˆìœ¼ë¯€ë¡œ í‚¤ë°”ë‚˜ì—ì„œëŠ” ë”ì´ìƒ í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìœ¼ë©° í‚¤ë°”ë‚˜ ì£¼ì†Œë¡œ ë‹¤ì‹œ ì ‘ì†í•˜ë‹ˆ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ëŠ” ë”ì´ìƒ í‘œì‹œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ë¡œì¨ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ì—°ê²°í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” X-Pack í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•œ ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤ëŠ” ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ê°€ ë§Œë£Œëœ íŠ¸ë¼ì´ì–¼ ë¼ì´ì„¼ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë”ë¼ë„ í‚¤ë°”ë‚˜ ë˜ëŠ” Start basic APIë¥¼ í†µí•´ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ë¡œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í‚¤ë°”ë‚˜ë¥¼ ì‹¤í–‰í•˜ê³ ë‚˜ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ë‹¤ë©´ í´ëŸ¬ìŠ¤í„°ì— ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img data-src=&quot;/images/posts/kibana-cannot-connect-elasticsearch/01.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì„¤ì¹˜ëœ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ëŒ€í•´ í‚¤ë°”ë‚˜ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ë‹ˆ ìœ„ì™€ ê°™ì´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜</summary>
      
    
    
    
    
    <category term="Basic License" scheme="https://kdevkr.github.io/tags/Basic-License/"/>
    
  </entry>
  
  <entry>
    <title>Tracing Handshake Websocket With Undertow</title>
    <link href="https://kdevkr.github.io/undertow-websocket-tracing/"/>
    <id>https://kdevkr.github.io/undertow-websocket-tracing/</id>
    <published>2022-08-12T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.147Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Handshake failed due to invalid Upgrade header: null</p></blockquote><p>ë³¸ ê¸€ì€ ìœ„ì™€ ê°™ì€ ì›¹ ì†Œì¼“ ì—°ê²° ì‹œì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë°œìƒí•œ ê±´ì— ëŒ€í•œ ê´€ë ¨ ë‚´ìš©ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ê²ƒ ì…ë‹ˆë‹¤. ì´ ì˜¤ë¥˜ ë¡œê·¸ëŠ” ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ DefaultHandshakeHandlerë¥¼ í†µí•´ í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì›¹ ì†Œì¼“ ì—°ê²°ì— ëŒ€í•´ ì˜¤ë¥˜ ë¡œê·¸ë¡œ ê¸°ë¡í•˜ë„ë¡ ë˜ì–´ìˆëŠ”ë° Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</p><blockquote><p>Connection: Upgrade<br>Upgrade: websocket</p></blockquote><p>ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ì†Œì¼“ ì—°ê²°ì€ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism">Protocol upgrade mechanism</a>ìœ¼ë¡œ HTTP í†µì‹ ì— ëŒ€í•´ ì»¤ë„¥ì…˜ì„ ì „í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ëŠ”ë° ì„œë²„ì—ì„œëŠ” ì›¹ì†Œì¼“ ì—”ë“œí¬ì¸íŠ¸ì— í•´ë‹¹í•˜ëŠ” ìš”ì²­ì— ëŒ€í•´ì„œëŠ” Upgrade í—¤ë”ë¥¼ í™•ì¸í•˜ê³  websocket ì´ ì „ë‹¬ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p><h2 id="ì›¹ì†Œì¼“-í”„ë¡ì‹œ"><a href="#ì›¹ì†Œì¼“-í”„ë¡ì‹œ" class="headerlink" title="ì›¹ì†Œì¼“ í”„ë¡ì‹œ"></a>ì›¹ì†Œì¼“ í”„ë¡ì‹œ</h2><p>ì‹œìŠ¤í…œì´ ë™ì‘í•˜ëŠ” ì¸í”„ë¼ í™˜ê²½ì€ AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <a href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">Elastic Load Balancing ê¸°ëŠ¥</a>ì— ë”°ë¥´ë©´ ALB, NLB ëª¨ë‘ ì›¹ì†Œì¼“ì„ ì§€ì›í•œë‹¤ê³  ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì›¹ì†Œì¼“ ì—°ê²°ì— ì œí•œì ì¸ í™˜ê²½ì€ ì•„ë‹™ë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œ í”Œë«í¼ìœ¼ë¡œì¨ ì œê³µí•˜ëŠ” í™˜ê²½ì€ EC í‚¤ ê¸°ë°˜ì˜ ì¸ì¦ì„œì˜ ì œì•½ì‚¬í•­ìœ¼ë¡œ NLBë¥¼ ì‚¬ìš©í•´ì„œ TCP í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ê³  SSL ì˜¤í”„ë¡œë“œëŠ” Nginxì—ì„œ ìˆ˜í–‰í•œ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.</p><p>ë‹¤ë§Œ, ìœ„ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ê³  ì•ˆë‚´ëœ íŠ¹ì • ê³ ê°ì´ ì§ì ‘ êµ¬ì„±í•˜ëŠ” í™˜ê²½ì—ì„œëŠ” ELB ë ˆë²¨ì—ì„œ SSL ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•œ í›„ì˜ íŠ¸ë˜í”½ë§Œ Nginxë¡œ ì „ë‹¬ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ í”„ë¡ì‹œë˜ë¯€ë¡œ ì•½ê°„ì˜ ìš”ì²­ì´ ì „ë‹¬ë˜ëŠ” ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤. ë”°ë¼ì„œ, ELB ë ˆë²¨ì—ì„œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ Upgrade í—¤ë”ê°€ ìœ ì‹¤ë  ê°€ëŠ¥ì„±ë„ ì˜ì‹¬í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><blockquote><p>ê° í™˜ê²½ì˜ Nginxì—ëŠ” <a href="http://nginx.org/en/docs/http/websocket.html">Upgarde í—¤ë”ì— ëŒ€í•œ í”„ë¡ì‹œ êµ¬ì„±</a>ì— ë”°ë¼ Upgarde í—¤ë” ê°’ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬ë˜ë„ë¡ $http_upgrade ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h3 id="íƒ€ì„ì•„ì›ƒ"><a href="#íƒ€ì„ì•„ì›ƒ" class="headerlink" title="íƒ€ì„ì•„ì›ƒ"></a>íƒ€ì„ì•„ì›ƒ</h3><p>ì¼ë°˜ì ìœ¼ë¡œ AWS í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ELBë¥¼ ì‚¬ìš©í•  ë•Œ ì›¹ì†Œì¼“ ì—°ê²° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/application-load-balancers.html#load-balancer-attributes">ELB ë¡œë“œë°¸ëŸ°ì„œ ì†ì„±</a>ì˜ idle_timeout.timeout_seconds ê¸°ë³¸ê°’ì´ 60ì´ˆ ì´ì–´ì„œ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” íƒ€ì„ì•„ì›ƒì„ 90ì´ˆë¡œ ì„¤ì •ë˜ì–´ ì›¹ ì†Œì¼“ ì—°ê²°ì— ëŒ€í•œ ë¶€ë¶„ì€ ì •ìƒì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.</p><blockquote><p>í´ë¼ì´ì–¸íŠ¸ì˜ ì´ˆê¸° ì—°ê²°ì„ ì œì™¸í•˜ê³ ëŠ” ì„œë²„ì—ì„œ 1ë¶„ë§ˆë‹¤ ìŠ¤ì¼€ì¤„ì— ì˜í•´ ì–´ë– í•œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ”ë° ì„œë²„ê°€ ì „ë‹¬í•˜ëŠ” íƒ€ì´ë° ìƒ 60ì´ˆ ì´ë‚´ì— ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì´ ì—†ë‹¤ê³  íŒë‹¨ë˜ì–´ ì—°ê²°ì´ í•´ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h3 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h3><p>ì¼ë°˜ì ì¸ ì›¹ ìš”ì²­ì€ HTTP2ë¡œ ì—°ê²°ë  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆëŠ”ë° ì›¹ì†Œì¼“ì— ëŒ€í•œ ì—°ê²°ì— ëŒ€í•´ì„œëŠ” HTTP 1.1ì˜ ì—…ê·¸ë ˆì´ë“œ ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p><pre class="language-sh" data-language="sh"><code class="language-sh">curl --include \     --no-buffer \     --http1.1 \     --location \     --header &quot;Connection: Upgrade&quot; \     --header &quot;Upgrade: websocket&quot; \     --header &quot;Host: example.com&quot; \     --header &quot;Origin: https:&#x2F;&#x2F;example.com&quot; \     --header &quot;Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ&#x3D;&#x3D;&quot; \     --header &quot;Sec-WebSocket-Version: 13&quot; \     https:&#x2F;&#x2F;example.com&#x2F;websocket&#x2F;server&#x2F;sessionid&#x2F;websocket</code></pre><p>ê·¸ëŸ°ë° ìœ„ cURL ëª…ë ¹ì–´ì—ì„œ â€“http1.1 ì˜µì…˜ì„ ì œì™¸í•˜ë©´ Upgarde í—¤ë”ì— websocketì— ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ìƒí™©ì´ ë°œìƒí•¨ì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ê²°êµ­ ì¼ë°˜ì ì¸ ë¸Œë¼ìš°ì €ë¥¼ í†µí•œ ìš”ì²­ì´ ì•„ë‹ˆë¼ íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì›¹ì†Œì¼“ ì—°ê²°ì„ ì‹œë„í•  ê°€ëŠ¥ì„±ë„ ìˆë‹¤ëŠ” ì´ì•¼ê¸° ì…ë‹ˆë‹¤.</p><blockquote><p><a href="https://github.com/websockets/wscat">wscat</a> ë˜ëŠ” <a href="https://learning.postman.com/docs/sending-requests/websocket/websocket/">postman</a> ìœ¼ë¡œë„ ì›¹ ì†Œì¼“ ì—°ê²°ì„ ì‹œë„í•´ë³´ì•˜ì§€ë§Œ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p></blockquote><h2 id="ìŠ¤í”„ë§-ì›¹-ì†Œì¼“"><a href="#ìŠ¤í”„ë§-ì›¹-ì†Œì¼“" class="headerlink" title="ìŠ¤í”„ë§ ì›¹ ì†Œì¼“"></a>ìŠ¤í”„ë§ ì›¹ ì†Œì¼“</h2><p>ì‹œìŠ¤í…œ ì…ì¥ì—ì„œëŠ” ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì›¹ì†Œì¼“ ì—°ê²°ì´ ìš”ì²­ë˜ëŠ” ë¶€ë¶„ì´ë¯€ë¡œ í•´ë‹¹ ì˜¤ë¥˜ ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ì–´ë–»ê²Œ ìš”ì²­ë˜ì—ˆëŠ”ê°€ë¥¼ ê²€í† í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì´ ì—†ìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ ìš”ì²­ ì •ë³´ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì°¾ì•„ë³´ë„ë¡ í•©ì‹œë‹¤. </p><h3 id="RequestUpgradeStrategy"><a href="#RequestUpgradeStrategy" class="headerlink" title="RequestUpgradeStrategy"></a>RequestUpgradeStrategy</h3><p>RequestUpgradeStrategyëŠ” HTTP ìš”ì²­ì— ëŒ€í•´ì„œ ì›¹ ì†Œì¼“ ì—°ê²°ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ê¸° ìœ„í•œ ì „ëµì´ë©° ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ UndertowRequestUpgradeStrategyê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRequestUpgradeStrategy</span> <span class="token keyword">extends</span> <span class="token class-name">UndertowRequestUpgradeStrategy</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">upgradeInternal</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span> selectedProtocol<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Extension</span><span class="token punctuation">></span></span> selectedExtensions<span class="token punctuation">,</span> <span class="token class-name">Endpoint</span> endpoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">HandshakeFailureException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// NOTE: í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ê²€ì¦ëœ ìš”ì²­ì— ëŒ€í•´ì„œ ì—…ê·¸ë ˆì´ë“œë¥¼ ìˆ˜í–‰í•œë‹¤.</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">upgradeInternal</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> selectedProtocol<span class="token punctuation">,</span> selectedExtensions<span class="token punctuation">,</span> endpoint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ìœ„ ì²˜ëŸ¼ ì—…ê·¸ë ˆì´ë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•´ ë¶€ê°€ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ë§Œ DefaultHandshakeHandler ë¼ëŠ” í´ë˜ìŠ¤ì—ì„œ upgradeInternal í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ìœ„ì¹˜ë¥¼ ì‚´í´ë³´ë©´ ì›¹ ì†Œì¼“ ì—°ê²° ìš”ì²­ì— ëŒ€í•´ì„œ ê²€ì¦ì„ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ ë§ˆì§€ë§‰ì— upgradeInternal í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ë³¸ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•ŒëŠ” ìš”ì²­ ì •ë³´ë¥¼ íŒŒì•…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><h3 id="DefaultHandshakeHandler"><a href="#DefaultHandshakeHandler" class="headerlink" title="DefaultHandshakeHandler"></a>DefaultHandshakeHandler</h3><p>DefaultHandshakeHandlerëŠ” ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì›¹ ì†Œì¼“ ì—°ê²°ì„ ìˆ˜í–‰í•˜ëŠ” í•¸ë“¤ëŸ¬ë¡œ HandshakeHandlerë¡œ ë“±ë¡ëœ ë¹ˆì´ ì—†ë‹¤ë©´ ë‚´ë¶€ì ìœ¼ë¡œ DefaultHandshakeHandlerë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì•ì„œ RequestUpgradeStrategyë¥¼ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ì´ìœ ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AbstractHandshakeHandler</span> <span class="token keyword">implements</span> <span class="token class-name">HandshakeHandler</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">doHandshake</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">,</span><span class="token class-name">WebSocketHandler</span> wsHandler<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> attributes<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">HandshakeFailureException</span> <span class="token punctuation">&#123;</span><span class="token class-name">WebSocketHttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocketHttpHeaders</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Processing request "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" with headers="</span> <span class="token operator">+</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span>GET <span class="token operator">!=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>METHOD_NOT_ALLOWED<span class="token punctuation">)</span><span class="token punctuation">;</span>response<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllow</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isErrorEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Handshake failed due to unexpected HTTP method: "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">"WebSocket"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getUpgrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>headers<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Upgrade"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>headers<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"upgrade"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">handleInvalidConnectHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isWebSocketVersionSupported</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">handleWebSocketVersionNotSupported</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isValidOrigin</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>FORBIDDEN<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">String</span> wsKey <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>wsKey <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isErrorEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Missing \"Sec-WebSocket-Key\" header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>BAD_REQUEST<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HandshakeFailureException</span><span class="token punctuation">(</span><span class="token string">"Response update failed during upgrade to WebSocket: "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">String</span> subProtocol <span class="token operator">=</span> <span class="token function">selectProtocol</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> requested <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> supported <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>requestUpgradeStrategy<span class="token punctuation">.</span><span class="token function">getSupportedExtensions</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> extensions <span class="token operator">=</span> <span class="token function">filterRequestedExtensions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> requested<span class="token punctuation">,</span> supported<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Principal</span> user <span class="token operator">=</span> <span class="token function">determineUser</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> wsHandler<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Upgrading to WebSocket, subProtocol="</span> <span class="token operator">+</span> subProtocol <span class="token operator">+</span> <span class="token string">", extensions="</span> <span class="token operator">+</span> extensions<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">this</span><span class="token punctuation">.</span>requestUpgradeStrategy<span class="token punctuation">.</span><span class="token function">upgrade</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> subProtocol<span class="token punctuation">,</span> extensions<span class="token punctuation">,</span> user<span class="token punctuation">,</span> wsHandler<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>AbstractHandshakeHandler í´ë˜ìŠ¤ì— ëŒ€í•´ ë¡œê·¸ ë ˆë²¨ì„ Traceë¡œ ì„¤ì •í•˜ë©´ ìš”ì²­ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ìˆì§€ë§Œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ ê¸°ë¡í•˜ë¯€ë¡œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•Œë§Œ ìš”ì²­ ì •ë³´ë¥¼ ë‚¨ê¸¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></blockquote><h4 id="AbstractHandshakeHandler-handleInvalidUpgradeHeader"><a href="#AbstractHandshakeHandler-handleInvalidUpgradeHeader" class="headerlink" title="AbstractHandshakeHandler.handleInvalidUpgradeHeader"></a>AbstractHandshakeHandler.handleInvalidUpgradeHeader</h4><p>ì•ì„œ doHandshake í•¨ìˆ˜ë¥¼ ì‚´í´ë³¸ ê²°ê³¼ Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°ì—ëŠ” handleInvalidUpgradeHeader í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ìš°ë¦¬ëŠ” handleInvalidUpgradeHeader í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•˜ì—¬ ìš”ì²­ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì˜¤ë¥˜ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomHandshakeHandler</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultHandshakeHandler</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// NOTE: Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ì—ˆì„ë•Œ í˜¸ì¶œëœë‹¤.</span>        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Method: &#123;&#125;, URI: &#123;&#125;, Principal: &#123;&#125;, Headers: &#123;&#125;"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethodValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œëŠ” Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œ ì›ì¸ì„ íŒŒì•…í•˜ê¸°ëŠ” ì–´ë µìŠµë‹ˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ë³¸ ë¬¸ì œê°€ ë‹¤ì‹œ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ì •ë³´ë¡œ ìš”ì²­ë˜ì—ˆëŠ”ì§€ì— ëŒ€í•œ ë¡œê·¸ê°€ ê¸°ë¡ë˜ì—ˆìœ¼ë¯€ë¡œ ì›ì¸ íŒŒì•…ì„ ìœ„í•œ ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism">Protocol upgrade mechanism</a></li><li><a href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">Elastic Load Balancing ê¸°ëŠ¥</a></li><li><a href="http://nginx.org/en/docs/http/websocket.html">WebSocket proxying</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Handshake failed due to invalid Upgrade header: null&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ë³¸ ê¸€ì€ ìœ„ì™€ ê°™ì€ ì›¹ ì†Œì¼“ ì—°ê²° ì‹œì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë°œìƒí•œ ê±´ì— ëŒ€í•œ ê´€ë ¨ ë‚´</summary>
      
    
    
    
    
    <category term="Undertow" scheme="https://kdevkr.github.io/tags/Undertow/"/>
    
    <category term="WebSocket" scheme="https://kdevkr.github.io/tags/WebSocket/"/>
    
  </entry>
  
  <entry>
    <title>Trace OAuth Requests</title>
    <link href="https://kdevkr.github.io/trace-oauth-requests/"/>
    <id>https://kdevkr.github.io/trace-oauth-requests/</id>
    <published>2022-08-10T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Failed to find access token</p></blockquote><p>OAuth API ìš”ì²­ ì‹œ JdbcTokenStoreì—ì„œ ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ê¸°ë¡ë˜ëŠ” INFO ë ˆë²¨ì˜ ë¡œê·¸ ì…ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì´ì•¼ê¸°ëŠ” ì˜¬ë°”ë¥´ì§€ ì•Šì€ ìš”ì²­ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  INFO ë ˆë²¨ë¡œ ë˜ì–´ìˆëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì˜ì•„í•˜ê¸´ í•©ë‹ˆë‹¤ë§Œ ìœ„ ì •ë³´ë§Œìœ¼ë¡œëŠ” ì–´ë–¤ í† í°ì— ì˜í•´ì„œ ì–´ë– í•œ OAuth APIì— ëŒ€í•´ ìš”ì²­ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><p>ì¼ë°˜ì ìœ¼ë¡œ ì¸í”„ë¼ ë ˆë²¨ì—ì„œ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/load-balancer-access-logs.html">ELB</a> ë˜ëŠ” <a href="https://docs.nginx.com/nginx/admin-guide/monitoring/logging/#setting-up-the-access-log">Nginx</a>ì™€ ê°™ì€ í”„ë¡ì‹œ ë‹¨ê³„ì—ì„œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ”ë° ëŒ€ë¶€ë¶„ì˜ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì—ì„œëŠ” ìš”ì²­ í—¤ë” ì •ë³´ë¥¼ ìƒì„¸í•˜ê²Œ ê¸°ë¡í•˜ì§€ ì•Šê³  ê°„ê²°í•˜ê²Œ ë‚¨ê¸°ë„ë¡ ì„¤ì •ë˜ë¯€ë¡œ í† í° ì •ë³´ê°€ í¬í•¨ë˜ëŠ” Authorization í—¤ë”ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><h2 id="Bearer-Authentication"><a href="#Bearer-Authentication" class="headerlink" title="Bearer Authentication"></a>Bearer Authentication</h2><p>í˜„ì¬ ì‹œìŠ¤í…œì€ Spring Security OAuth ëª¨ë“ˆì„ í†µí•´ JDBC ê¸°ë°˜ì˜ Opaque í† í°ìœ¼ë¡œ ë˜ì–´ìˆëŠ” Bearer ì¸ì¦ì„ ì§€ì›í•˜ëŠ” OpenAPIë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¼ë¶€ ì‚¬ìš©ìë“¤ì´ IoT ë””ë°”ì´ìŠ¤ë¥¼ êµ¬í˜„ ì‹œ OpenAPIë¥¼ ì‚¬ìš©í•  ë•Œ ì˜ëª»ëœ í† í°ì„ ì‚¬ìš©í•˜ëŠ” ë¬¸ì œê°€ ì‚¬ì—…íŒ€ìœ¼ë¡œë¶€í„° ë¦¬í¬íŠ¸ ë˜ì—ˆëŠ”ë° ë‹¨ìˆœí•˜ê²Œ ì˜ëª»ëœ ì•¡ì„¸ìŠ¤ í† í°ì´ ì „ë‹¬ë˜ì—ˆë‹¤ëŠ” ë¡œê·¸ì— ëŒ€í•´ì„œ ì›ì¸ íŒŒì•…ì„ ìš”êµ¬í•˜ëŠ”ë° ë¶ˆêµ¬í•˜ê³  íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë³´ê°€ ë‚¨ì•„ìˆì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p><p>ì‚¬ì‹¤ OpenAPIì˜ ê° í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬ë˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” AOPê°€ ì ìš©ë˜ì–´ í•¸ë“¤ëŸ¬ì— ëŒ€í•œ íŒŒë¼ë¯¸í„° ë“¤ê³¼ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””ì™€ í† í° ì •ë³´ë¥¼ ì´ë¯¸ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— API ë¡œê·¸ë¡œ ì €ì¥í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë¬¸ì œëŠ” ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ìš”ì²­ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„° ì²´ì¸ì— ì˜í•´ì„œ í•¸ë“¤ëŸ¬ê¹Œì§€ ì§„ì…í•˜ê¸° ì „ì— ì˜¤ë¥˜ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆê¸°ì— API ë¡œê·¸ê°€ ë‚¨ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì´ íŒŒì•…ë˜ì—ˆìŠµë‹ˆë‹¤.</p><blockquote><p>ì–´ë– í•œ ë¬¸ì œì— ëŒ€í•´ì„œ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë³´ëŠ” ë‚¨ê²¨ì•¼í•˜ë¯€ë¡œ ì¸ì¦ëœ ì‚¬ìš©ìê°€ OpenAPIë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ ì™¸ì— OAuthì— ëŒ€í•œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œëŠ” ë³„ë„ë¡œ ë‚¨ê¸°ë„ë¡ ê°œì„ í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="OAuth2AuthenticationProcessingFilter"><a href="#OAuth2AuthenticationProcessingFilter" class="headerlink" title="OAuth2AuthenticationProcessingFilter"></a>OAuth2AuthenticationProcessingFilter</h3><pre class="language-java" data-language="java"><code class="language-java">eventPublisher<span class="token punctuation">.</span><span class="token function">publishAuthenticationFailure</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BadCredentialsException</span><span class="token punctuation">(</span>failed<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> failed<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">PreAuthenticatedAuthenticationToken</span><span class="token punctuation">(</span><span class="token string">"access-token"</span><span class="token punctuation">,</span> <span class="token string">"N/A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Bearer í† í°ì— ëŒ€í•œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” OAuth2AuthenticationProcessingFilterì—ì„œ AuthenticationEventPublisherë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ì„±ê³µì´ë‚˜ ì˜¤ë¥˜ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ë¯€ë¡œ DefaultAuthenticationEventPublisherë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ êµ¬í˜„í•˜ë©´ ì–´ë–¤ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­í–ˆëŠ”ì§€ëŠ” ê¸°ë¡í•  ìˆ˜ ìˆëŠ”ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ ì „ë‹¬ë˜ëŠ” ì´ë²¤íŠ¸ ì •ë³´ì—ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì›í•˜ëŠ” ë§Œí¼ì˜ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><blockquote><p>ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ëŒ€ë¶€ë¶„ ì¸í„°ë„·ì— ê²€ìƒ‰í•˜ë©´ ë‚˜ì˜¤ê¸°ì— ì´ë¦¬ì €ë¦¬ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="AbstractRequestLoggingFilter"><a href="#AbstractRequestLoggingFilter" class="headerlink" title="AbstractRequestLoggingFilter"></a>AbstractRequestLoggingFilter</h3><p>AbstractRequestLoggingFilter.getMessagePayload í•¨ìˆ˜ë¥¼ ë³´ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ContentCachingRequestWrapperë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/ContentCachingResponseWrapper.html">ContentCachingResponseWrapper</a>ì— ëŒ€í•´ì„œ ì‚´í´ë³´ë‹ˆ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë‚´ë ¤ì¤€ ì´í›„ì—ë„ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ì½ì„ ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤ëŠ” ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><blockquote><p>ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ìš”ì²­ì˜ ì‘ë‹µìœ¼ë¡œ ì•¡ì„¸ìŠ¤ í† í° ì •ë³´ë¥¼ ì „ë‹¬í•˜ë¯€ë¡œ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ëœ í† í°ì„ ë¡œê·¸ë¡œì¨ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p></blockquote><h3 id="HttpTraceFilter"><a href="#HttpTraceFilter" class="headerlink" title="HttpTraceFilter"></a>HttpTraceFilter</h3><p>Spring Boot Actuator ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´ë“œë¯¼ í˜ì´ì§€ë¥¼ êµ¬í˜„í•´ë†“ì•˜ê¸°ì— <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.tracing">HttpTraceEndpoint</a>ë¥¼ í†µí•´ì„œ ì¼ë¶€ ìš”ì²­ì— ëŒ€í•œ íŠ¸ë ˆì´ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì ì„ ë– ì˜¬ë ¤ HttpTraceFilterë¥¼ ì‚´í´ë³´ë‹ˆ TraceableHttpServletRequestì™€ TraceableHttpServletResponseë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isRequestValid</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">TraceableHttpServletRequest</span> traceableRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">HttpTrace</span> trace <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">receivedRequest</span><span class="token punctuation">(</span>traceableRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>INTERNAL_SERVER_ERROR<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>        status <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">TraceableHttpServletResponse</span> traceableResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span>                <span class="token punctuation">(</span>status <span class="token operator">!=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token operator">:</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">sendingResponse</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">,</span> request<span class="token operator">::</span><span class="token function">getUserPrincipal</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">getSessionId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>ë‹¨, TraceableHttpServletRequestì™€ TraceableHttpServletResponseëŠ” final í‚¤ì›Œë“œê°€ ì„¤ì •ëœ í´ë˜ìŠ¤ì´ë¯€ë¡œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ í™œìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="OAuthFilter"><a href="#OAuthFilter" class="headerlink" title="OAuthFilter"></a>OAuthFilter</h3><p>ì•ì„œ ì‚´í´ë³¸ í´ë˜ìŠ¤ë“¤ì„ ì¢…í•©í•˜ì—¬ OAuth ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ì´ë²¤íŠ¸ë¡œ ë°œìƒì‹œí‚¤ëŠ” í•„í„°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuthFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationEventPublisherAware</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AntPathMatcher</span> pathMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpExchangeTracer</span> tracer<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DefaultTokenServices</span> defaultTokenServices<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationEventPublisher</span> applicationEventPublisher<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">OAuthFilter</span><span class="token punctuation">(</span><span class="token class-name">HttpTraceProperties</span> traceProperties<span class="token punctuation">,</span> <span class="token class-name">DefaultTokenServices</span> defaultTokenServices<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tracer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpExchangeTracer</span><span class="token punctuation">(</span>traceProperties<span class="token punctuation">.</span><span class="token function">getInclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>defaultTokenServices <span class="token operator">=</span> defaultTokenServices<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> isApiV1 <span class="token operator">=</span> pathMatcher<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"/oauth/v1/**"</span><span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isApiV1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">TraceableHttpServletRequest</span> traceableRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ContentCachingResponseWrapper</span> cachingResponseWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">HttpTrace</span> trace <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">receivedRequest</span><span class="token punctuation">(</span>traceableRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>INTERNAL_SERVER_ERROR<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> cachingResponseWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>                status <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">TraceableHttpServletResponse</span> traceableResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span>                        <span class="token punctuation">(</span>status <span class="token operator">!=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span>cachingResponseWrapper<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token operator">:</span> cachingResponseWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">sendingResponse</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">,</span> request<span class="token operator">::</span><span class="token function">getUserPrincipal</span><span class="token punctuation">,</span>                        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">getSessionId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> clientId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationEventPublisher <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">String</span> tokenValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">OAuth2AuthenticationDetails</span><span class="token punctuation">.</span>ACCESS_TOKEN_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">OAuth2Authentication</span> authentication <span class="token operator">=</span> defaultTokenServices<span class="token punctuation">.</span><span class="token function">loadAuthentication</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                        clientId <span class="token operator">=</span> authentication<span class="token punctuation">.</span><span class="token function">getOAuth2Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvalidTokenException</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>                    applicationEventPublisher<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OAuthTraceEvent</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">.</span><span class="token function">getResponseBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> clientId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getSessionId</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationEventPublisher</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEventPublisher</span> applicationEventPublisher<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationEventPublisher <span class="token operator">=</span> applicationEventPublisher<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TraceableHttpServletRequest</span> <span class="token keyword">implements</span> <span class="token class-name">TraceableRequest</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">;</span>        <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>request <span class="token operator">=</span> request<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">URI</span> <span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> queryString <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">StringBuffer</span> urlBuffer <span class="token operator">=</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">URI</span><span class="token punctuation">(</span>urlBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">URISyntaxException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> encoded <span class="token operator">=</span> <span class="token class-name">UriUtils</span><span class="token punctuation">.</span><span class="token function">encodeQuery</span><span class="token punctuation">(</span>queryString<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">StringBuffer</span> urlBuffer <span class="token operator">=</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>urlBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">private</span> <span class="token class-name">StringBuffer</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span><span class="token class-name">String</span> queryString<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> names <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> name <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> headers<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TraceableHttpServletResponse</span> <span class="token keyword">implements</span> <span class="token class-name">TraceableResponse</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpServletResponse</span> delegate<span class="token punctuation">;</span>        <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> response<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> headers<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResponseBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token keyword">instanceof</span> <span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token class-name">ContentCachingResponseWrapper</span> wrapper <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">;</span>                <span class="token keyword">int</span> status <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">getContentAsByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> buf<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span>length<span class="token punctuation">,</span> wrapper<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                wrapper<span class="token punctuation">.</span><span class="token function">copyBodyToResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> body<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">CustomStatusResponseWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletResponseWrapper</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> status<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token keyword">int</span> status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ì‘ë‹µ ì²˜ë¦¬ëŠ” OAuth2AuthenticationProcessingFilterì—ì„œ OAuthExceptionì„ ë˜ì§€ê²Œ ë˜ë©´ì„œ ìˆ˜í–‰í•˜ë¯€ë¡œ ìš°ë¦¬ëŠ” ê·¸ì „ì— ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ìºì‹œí•˜ì—¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ContentCachingResponseWrapperë¥¼ ì´í›„ í•„í„°ë¡œ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. </p><h4 id="OAuthTraceEvent"><a href="#OAuthTraceEvent" class="headerlink" title="OAuthTraceEvent"></a>OAuthTraceEvent</h4><p>OAuthTraceEventëŠ” OAuth APIì— ëŒ€í•œ ìš”ì²­ê³¼ ì‘ë‹µ ì •ë³´ì—ì„œ ì˜¬ë°”ë¥¸ í† í°ìœ¼ë¡œ ìš”ì²­ëœ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””ê°€ ì¡´ì¬í•˜ë¯€ë¡œ ìš”ì²­ í—¤ë” ì¤‘ Authorizationì— í¬í•¨ëœ í† í°ê¹Œì§€ ë¡œê·¸ë¡œ ì €ì¥í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. í† í° ìì²´ë¥¼ ì œì™¸í•˜ê¸° ë³´ë‹¤ëŠ” í† í°ì˜ ì¼ë¶€ë¥¼ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuthTraceEvent</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationEvent</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Request</span> request<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Response</span> response<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Principal</span> principal<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Session</span> session<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> responseBody<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> clientId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> timeTaken<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> traceTimestamp<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">OAuthTraceEvent</span><span class="token punctuation">(</span><span class="token class-name">HttpTrace</span> trace<span class="token punctuation">,</span> <span class="token class-name">String</span> responseBody<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> clientId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clientId <span class="token operator">=</span> clientId<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>clientId <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span> <span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">protectAuthorization</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>timeTaken <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getTimeTaken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>request <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>response <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>session <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>responseBody <span class="token operator">=</span> responseBody<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>traceTimestamp <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">protectAuthorization</span><span class="token punctuation">(</span><span class="token class-name">HttpTrace</span> trace<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>clientId <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span> <span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> authorization <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> authorization<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> s <span class="token operator">=</span> authorization<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"Bearer"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"bearer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"(?&lt;=.&#123;19&#125;)."</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    authorization<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ì´ì œ ìš°ë¦¬ëŠ” OAuthTraceEventë¥¼ ì²˜ë¦¬í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì €ì¥í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://www.baeldung.com/spring-http-logging">Spring â€“ Log Incoming Requests</a>  </li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.tracing">Production-ready Features - 8. HTTP Tracing</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Failed to find access token&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OAuth API ìš”ì²­ ì‹œ JdbcTokenStoreì—ì„œ ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ê¸°ë¡ë˜ëŠ” INFO ë ˆë²¨ì˜ ë¡œê·¸ ì…ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤</summary>
      
    
    
    
    
    <category term="HttpTrace" scheme="https://kdevkr.github.io/tags/HttpTrace/"/>
    
    <category term="ContentCaching" scheme="https://kdevkr.github.io/tags/ContentCaching/"/>
    
  </entry>
  
  <entry>
    <title>ì–¸ë”í† ìš° ì„ì‹œ ë””ë ‰í† ë¦¬ ì‚­ì œ ë°©ì§€</title>
    <link href="https://kdevkr.github.io/undertow-temp-dir/"/>
    <id>https://kdevkr.github.io/undertow-temp-dir/</id>
    <published>2022-08-03T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.147Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/spring-projects/spring-boot/issues/9616">Tomcat does not create temporary directory used to store file uploads when it does not exist</a><br><a href="https://adunhansa.tistory.com/209">ìŠ¤í”„ë§ ë¶€íŠ¸ íŒŒì¼ ì—…ë¡œë“œ ì—ëŸ¬ The temporary upload location []  is not valid</a></p></blockquote><p>ì¼ë°˜ì ìœ¼ë¡œ ìì£¼ ë°œìƒí•˜ëŠ” ìƒí™©ì€ ì•„ë‹ˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì„ì‹œ ë””ë ‰í† ë¦¬ì— ëŒ€í•œ ì‚­ì œ ë¬¸ì œë¡œ ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì— ëŒ€í•´ ì„ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ <code>NoSuchFileException</code>ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì„ì‹œ ë””ë ‰í† ë¦¬ ê²½ë¡œì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì¼ì • ê¸°ê°„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° ì‚­ì œí•˜ë„ë¡ ë˜ì–´ìˆëŠ” ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŒŒì¼ ì—…ë¡œë“œê°€ ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì²­ë˜ì§€ ì•ŠëŠ” í•œ ë©€í‹°íŒŒíŠ¸ì— ëŒ€í•œ ì„ì‹œ íŒŒì¼ì´ ë§Œë“¤ì–´ì§€ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ„ í˜„ìƒì´ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤.</p><p>ì–¸ë”í† ìš°ì—ì„œëŠ” MultiPartParserDefinition$MultiPartUploadHandlerì˜ beginPartë¼ëŠ” í•¨ìˆ˜ì—ì„œ ë©€í‹°íŒŒíŠ¸ í¼ ë°ì´í„°ì— ëŒ€í•´ ì„ì‹œ íŒŒì¼ì„ ë§Œë“¤ê³  ì½ì–´ë“¤ì´ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ë©€í‹°íŒŒíŠ¸ì— ëŒ€í•œ ë¡œì¼€ì´ì…˜ ì†ì„±ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ì–¸ë”í† ìš°ëŠ” ì„œë¸”ë¦¿ ë°°í¬ ì‹œ ì‹œìŠ¤í…œì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ ê²½ë¡œì— ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¥¼ ìœ„í•œ í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p><p><a href="https://github.com/kdevkr/spring-demo-undertow">Spring Demo Undertow</a> ë¦¬íŒŒì§€í† ë¦¬ë¥¼ í´ë¡ í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ë°”ë¼ë³´ëŠ” íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œê°€ ë¡œê·¸ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Current</span> temp dir<span class="token operator">:</span> <span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Users</span>\<span class="token class-name">Mambo</span>\<span class="token class-name">AppData</span>\<span class="token class-name">Local</span>\<span class="token class-name">Temp</span>\undertow<span class="token punctuation">.</span><span class="token number">8080.5583604686546214060</span></code></pre><p>ìœ„ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” MultipartCustomizerëŠ” UndertowDeploymentInfoCustomizer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ ì‹œìŠ¤í…œ ê¸°ë³¸ ì„ì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì£¼ê¸°ì ì¸ ìŠ¤ì¼€ì¤„ë¡œ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œê°€ ì‚­ì œë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  ë³µêµ¬í•©ë‹ˆë‹¤. ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì— ëŒ€í•œ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œë¥¼ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•Šì€ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ì—…ë¡œë“œë¥¼ ì‹œë„í•˜ëŠ” ê²½ìš°ì— ë”°ë¼ ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ í´ë”ë¥¼ ì‚­ì œí•  ê°€ëŠ¥ì„±ì„ ë‚´ì¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ìë™ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ ì‚­ì œë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì„ ë„ì™€ì£¼ëŠ” íŠ¸ë¦­ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë§Œë“¤ì–´ì§„ ì„ì‹œ íŒŒì¼ì´ ìë™ì ìœ¼ë¡œ ì‚­ì œë˜ë¯€ë¡œ ì‹œìŠ¤í…œ ê¸°ë³¸ ì„ì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë³„ë„ì˜ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œë¥¼ ì§€ì •í•˜ê³  ì£¼ê¸°ì ìœ¼ë¡œ ì‚­ì œë˜ì§€ ì•Šê³  ë‚¨ì•„ìˆëŠ” íŒŒì¼ë“¤ì´ ìˆëŠ”ì§€ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ ëŒ€ì•ˆì…ë‹ˆë‹¤.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/spring-projects/spring-boot/issues/9616&quot;&gt;Tomcat does not create temporary directory used to stor</summary>
      
    
    
    
    
    <category term="MultiPartParserDefinition" scheme="https://kdevkr.github.io/tags/MultiPartParserDefinition/"/>
    
    <category term="MultipartConfigElement" scheme="https://kdevkr.github.io/tags/MultipartConfigElement/"/>
    
    <category term="UndertowDeploymentInfoCustomizer" scheme="https://kdevkr.github.io/tags/UndertowDeploymentInfoCustomizer/"/>
    
  </entry>
  
  <entry>
    <title>JSON Web Token</title>
    <link href="https://kdevkr.github.io/jwt/"/>
    <id>https://kdevkr.github.io/jwt/</id>
    <published>2022-07-29T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>ìµœê·¼ ì‹œìŠ¤í…œì—ì„œ ë°œì†¡ë˜ëŠ” íŠ¹ì • ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìê°€ ê´€ë ¨ëœ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¬ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ì„œ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ëŠ” ê²½ìš°ì—ëŠ” ìì‹ ì˜ ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì— ì¸ì¦í•˜ê¸° ì „ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë©”ì¼ì— í¬í•¨ëœ ë§í¬ë¥¼ í†µí•´ì„œ ì ‘ê·¼í•  ë•Œ ì‚¬ìš©ì ì¸ì¦ì„ ì¼ì‹œì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°©ì•ˆì„ ë„ì…í•´ì•¼í•©ë‹ˆë‹¤.</p><h2 id="Token-based-Authentication"><a href="#Token-based-Authentication" class="headerlink" title="Token-based Authentication"></a>Token-based Authentication</h2><p>í† í° ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì€ ì‚¬ìš©ì ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ì‹œìŠ¤í…œì„ ì´ìš©í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ì œê³µí•˜ê¸° ìœ„í•œ ë°©ì‹ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ í† í°ì´ë¼í•¨ì€ ì‹œìŠ¤í…œì´ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ë¬¸ìì—´ ë°ì´í„°ë¥¼ ë§í•©ë‹ˆë‹¤. íœ´ëŒ€í° ë¬¸ì ì¸ì¦ì´ë‚˜ ì´ë©”ì¼ë¡œ ë°œì†¡ë˜ëŠ” ì¸ì¦ì½”ë“œ ë˜ëŠ” ë§í¬ë¥¼ í† í°ì´ë¼ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>í˜„ì¬ ì‹œìŠ¤í…œì€ Spring Security OAuthë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ í¬ë ˆë´ì…œ ê¸°ë°˜ì˜ í† í°ìœ¼ë¡œ OpenAPIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆëŠ”ë° JWTê°€ ì•„ë‹Œ JdbcTokenStoreë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸°ì— SecureRandomBytesKeyGeneratorë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ë¥¼ ë³´ë©´ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì´ ì•„ë‹Œ í† í° ê¸°ë°˜ìœ¼ë¡œ JWTë¥¼ ë°œê¸‰í•˜ê³  ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ í†µì‹ í•  ë•Œ JWTë¥¼ ìš”ì²­ í—¤ë”ì— í¬í•¨ì‹œì¼œ ì‹œìŠ¤í…œì— ëŒ€í•œ ê¶Œí•œ ë° ì¸ê°€ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p><h3 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc7519">RFC7519</a>ë¡œ ì •ì˜ë˜ì–´ìˆëŠ” JWT(JSON Web Token)ì€ ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ Base64 ì¸ì½”ë”©ìœ¼ë¡œ í‘œí˜„í•˜ë©´ì„œ í˜ì´ë¡œë“œì— ëŒ€í•œ ì „ìì„œëª…ì„ í†µí•´ì„œ ì¸ì¦ ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰í•œ í† í°ì„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•˜ì—¬ í† í°ì— í¬í•¨ëœ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ê¶Œí•œ ë° ì¸ê°€ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JWTì— ëŒ€í•´ì„œëŠ” ì•„ë˜ì˜ ë§í¬ë¥¼ í†µí•´ì„œ ê°„ë‹¨í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li><a href="https://jwt.io/introduction">Introduction to JSON Web Tokens</a></li><li><a href="https://auth0.com/learn/json-web-tokens/">Get Started with JSON Web Tokens</a></li></ul><h3 id="URI-Query-String"><a href="#URI-Query-String" class="headerlink" title="URI Query String"></a>URI Query String</h3><p><em>JSON Web Token (JWT) is a compact claims representation format intended for space constrained environments such as HTTP Authorization headers and URI query parameters.</em></p><p>ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ëŠ” GET ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” URL(URI + Query String)ì´ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ HTTP í†µì‹  ì‹œ Authorization ë˜ëŠ” X-Auth-Token í—¤ë”ì— í† í°ì„ í¬í•¨í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. JWTëŠ” ê·¸ ìì²´ë¡œ Base64 URL Safeë¡œ ì¸ì½”ë”©ë˜ë¯€ë¡œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— í¬í•¨í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="Token-Parameter"><a href="#Token-Parameter" class="headerlink" title="Token Parameter"></a>Token Parameter</h4><p>ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ì— í† í° ì •ë³´ê°€ ì–´ë–»ê²Œ ë‹´ê²¨ì§€ëŠ”ì§€ ë‘ê°€ì§€ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” ì´ë©”ì¼ê³¼ ì¸ì¦ì„ ìœ„í•œ í† í°ì´ Path Variable í˜•íƒœë¡œ URIì— í¬í•¨ë˜ëŠ” ë°©ì‹ì´ë©°, ë‘ë²ˆì§¸ëŠ” URIì— ëŒ€í•œ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ í† í° íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ë¨ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><ul><li><a href="http://daily-devblog.com/api/regist/certify/kdevkr@gmail.com/$TOKEN">http://daily-devblog.com/api/regist/certify/kdevkr@gmail.com/$TOKEN</a></li><li><a href="https://careers.kakao.com/applicant/checkEmail?token=$TOKEN&amp;jobOfferId=P-1">https://careers.kakao.com/applicant/checkEmail?token=$TOKEN&amp;jobOfferId=P-1</a></li></ul><p><img data-src="/images/posts/jwt/01.png"></p><p>ë‘ë²ˆì§¸ì²˜ëŸ¼ ì´ë©”ì¼ì— í¬í•¨ëœ ë§í¬ë¥¼ ë‚˜ì¤‘ì— í´ë¦­í•˜ë”ë¼ë„ ì‹œìŠ¤í…œì—ì„œ ì¸ì‹í•  ìˆ˜ ìˆëŠ” í† í°ì¸ì§€ ë§Œë£Œë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ì—¬ ì‹œìŠ¤í…œì— ëŒ€í•œ ì¸ê°€ë¥¼ íŒë‹¨í•˜ê²Œ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ ì´ë©”ì¼ì—ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰í•œ í† í°ì´ ë§í¬ì— í¬í•¨ë˜ì–´ ìœ ì§€ë˜ë¯€ë¡œ ë³´ì•ˆ ìƒ ë§Œë£Œ ì‹œê°„ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p><h3 id="Implementation-Sample"><a href="#Implementation-Sample" class="headerlink" title="Implementation Sample"></a>Implementation Sample</h3><p>ì´ë©”ì¼ ë§í¬ì— í¬í•¨ëœ í† í° íŒŒë¼ë¯¸í„°ì— ë”°ë¼ í† í° ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ìˆ˜í–‰í•˜ê³  ì‚¬ìš©ì ì¸ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ ìƒ˜í”Œ í˜•íƒœë¡œ ë§Œë“¤ê³  ì¼ë ¨ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ê³µìœ í•˜ê³ ìí•¨ì´ë‹ˆ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë¬¸ì œì ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h4><p>ìš°ì„  ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê¸°ë°˜ì˜ í™˜ê²½ì´ë¼ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©° JWT ë°œê¸‰ê³¼ ê²€ì¦ì„ ìœ„í•´ì„œ ì‚¬ìš©í•  <a href="https://github.com/jwtk/jjwt">Java JWT</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ JWT ë°œê¸‰ ì‹œ ì„œëª…í•  í‚¤ í˜ì–´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ <a href="https://www.bouncycastle.org/">Bouncy Castle</a>ë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p><pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>    implementation <span class="token string">'com.google.code.gson:gson:2.9.0'</span>    implementation <span class="token string">'io.jsonwebtoken:jjwt-api:0.11.5'</span>    runtimeOnly <span class="token string">'io.jsonwebtoken:jjwt-impl:0.11.5'</span>    runtimeOnly <span class="token string">'io.jsonwebtoken:jjwt-jackson:0.11.5'</span>    implementation <span class="token string">'org.bouncycastle:bcprov-jdk18on:1.71'</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Generate-EC-Key-Pair"><a href="#Generate-EC-Key-Pair" class="headerlink" title="Generate EC Key Pair"></a>Generate EC Key Pair</h4><p>ë³¸ ìƒ˜í”Œì—ì„œëŠ” <a href="https://datatracker.ietf.org/doc/html/rfc7518#section-3">Cryptographic Algorithms for Digital Signatures and MACs</a> ëª©ë¡ ì¤‘ì—ì„œ ES256ì´ë¼ëŠ” ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” JWT í† í°ì„ ë°œê¸‰í•˜ê¸° ìœ„í•´ P-256 ê³¡ì„ ì„ ì‚¬ìš©í•˜ëŠ” EC í‚¤ í˜ì–´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">openssl ecparam -name prime256v1 -genkey -noout -out ec-private.pemopenssl ec -in ec-private.pem -pubout -out ec-public.pemopenssl pkcs8 -topk8 -inform pem -in ec-private.pem -outform pem -nocrypt -out ec-private.pkcs8</code></pre><h4 id="Generate-JWT"><a href="#Generate-JWT" class="headerlink" title="Generate JWT"></a>Generate JWT</h4><p>JWT ë°œê¸‰ì„ ìœ„í•œ EC í‚¤ í˜ì–´ë¥¼ ì¤€ë¹„í–ˆìœ¼ë¯€ë¡œ í´ë˜ìŠ¤íŒ¨ìŠ¤ë¡œë¶€í„° í‚¤ í˜ì–´ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  í† í° ë°œê¸‰ì„ ìœ„í•œ ìœ í‹¸ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">SignatureAlgorithm</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>bouncycastle<span class="token punctuation">.</span>util<span class="token punctuation">.</span>io<span class="token punctuation">.</span>pem<span class="token punctuation">.</span></span><span class="token class-name">PemReader</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StreamUtils</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">SecretKeySpec</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">DatatypeConverter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">StringReader</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Key</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">KeyFactory</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">PKCS8EncodedKeySpec</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">X509EncodedKeySpec</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ConcurrentHashMap</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KeyUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Key</span><span class="token punctuation">></span></span> signingKeyStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Key</span><span class="token punctuation">></span></span> parseKeyStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Key</span> <span class="token function">parseKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parseKeyStore<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            key <span class="token operator">=</span> parseKeyStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> content<span class="token punctuation">;</span>            <span class="token class-name">PemReader</span> pemReader<span class="token punctuation">;</span>            <span class="token class-name">X509EncodedKeySpec</span> spec<span class="token punctuation">;</span>            <span class="token class-name">KeyFactory</span> kf<span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">case</span> HS256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/hs256/secret.key"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span><span class="token class-name">DatatypeConverter</span><span class="token punctuation">.</span><span class="token function">parseBase64Binary</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">getJcaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> RS256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/rs256/rsa-public.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> ES256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/es256/ec-public.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"EC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Elliptic Curve</span>                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">default</span><span class="token operator">:</span>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">"Only support HS256, RS256, ES256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        parseKeyStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Key</span> <span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>signingKeyStore<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            key <span class="token operator">=</span> signingKeyStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> content<span class="token punctuation">;</span>            <span class="token class-name">PemReader</span> pemReader<span class="token punctuation">;</span>            <span class="token class-name">PKCS8EncodedKeySpec</span> spec<span class="token punctuation">;</span>            <span class="token class-name">KeyFactory</span> kf<span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">case</span> HS256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/hs256/secret.key"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span><span class="token class-name">DatatypeConverter</span><span class="token punctuation">.</span><span class="token function">parseBase64Binary</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">getJcaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> RS256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/rs256/rsa-private.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> ES256<span class="token operator">:</span>                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/es256/ec-private.pkcs8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"EC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Elliptic Curve</span>                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">default</span><span class="token operator">:</span>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">"Only support HS256, RS256, ES256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        signingKeyStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">TypeToken</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Type</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Key</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">ZonedDateTime</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> REGEX <span class="token operator">=</span> <span class="token string">"^[A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*$"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Type</span> hashMapType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HashMap</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isJwt</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> token <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>token<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>REGEX<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">isValid</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token function">alg</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">,</span> <span class="token class-name">String</span> alg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Key</span> publicKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>alg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JwtParser</span> parser <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">isSigned</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">alg</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chunks <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> header <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getUrlDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>chunks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> headerMap <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>header<span class="token punctuation">,</span> hashMapType<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> headerMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"alg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token keyword">long</span> expires<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> claims<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">long</span> issuedAt <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"UTC"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> expiration <span class="token operator">=</span> issuedAt <span class="token operator">+</span> expires<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Key</span> signingKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>signingKey <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">JwtException</span><span class="token punctuation">(</span><span class="token string">"Not found signingKey for "</span> <span class="token operator">+</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setHeaderParam</span><span class="token punctuation">(</span><span class="token string">"typ"</span><span class="token punctuation">,</span> <span class="token string">"JWT"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setIssuer</span><span class="token punctuation">(</span><span class="token string">"JWT Sample Issuer"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setIssuedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>issuedAt<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expiration<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span>signingKey<span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">addClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedJwtException</span><span class="token punctuation">(</span><span class="token string">"Cannot generate jwt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> <span class="token function">parseClaims</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">parseClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token function">alg</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> <span class="token function">parseClaims</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">,</span> <span class="token class-name">String</span> alg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Key</span> publicKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>alg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JwtParser</span> parser <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Add-Token-Filter-in-SecurityFilterChain"><a href="#Add-Token-Filter-in-SecurityFilterChain" class="headerlink" title="Add Token Filter in SecurityFilterChain"></a>Add Token Filter in SecurityFilterChain</h4><p>ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰ëœ í† í°ì´ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ì—ˆì„ ë•Œ JWTë¥¼ ê²€ì¦í•˜ê³  ì‚¬ìš©ì ì¸ì¦ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•„í„°ë¥¼ ì‘ì„±í•˜ê³  ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„° ì²´ì¸ì— ë“±ë¡í•©ë‹ˆë‹¤. </p><p><strong>TokenAuthenticationFilter.java</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">JwtUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">Claims</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">Jws</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">JwtException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordAuthenticationToken</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SecurityContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SecurityContextHolder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">AntPathMatcher</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">OncePerRequestFilter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenAuthenticationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ADDITIONAL_URI_PATTERN <span class="token operator">=</span> <span class="token string">"/users/&#123;username&#125;"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AntPathMatcher</span> pathMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserDetailsService</span> userDetailsService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">TokenAuthenticationFilter</span><span class="token punctuation">(</span><span class="token class-name">UserDetailsService</span> userDetailsService<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userDetailsService <span class="token operator">=</span> userDetailsService<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> base64RequestURI <span class="token operator">=</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getUrlEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> redirectLoginUrl <span class="token operator">=</span> <span class="token string">"/login?redirect="</span> <span class="token operator">+</span> base64RequestURI<span class="token punctuation">;</span>            <span class="token keyword">boolean</span> isValidToken<span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                isValidToken <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> claims <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">parseClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">Claims</span> body <span class="token operator">=</span> claims<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">String</span> subject <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathMatcher<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>ADDITIONAL_URI_PATTERN<span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        isValidToken <span class="token operator">=</span> <span class="token function">isValidWithVariables</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">UserDetails</span> userDetails <span class="token operator">=</span> userDetailsService<span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">UsernamePasswordAuthenticationToken</span> authentication <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>userDetails<span class="token punctuation">,</span> token<span class="token punctuation">,</span> userDetails<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">SecurityContext</span> securityContext <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        securityContext<span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>                        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">JwtException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                isValidToken <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// NOTE: If token expired or invalid, redirect for login page.</span>                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>redirectLoginUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isValidWithVariables</span><span class="token punctuation">(</span><span class="token class-name">Claims</span> body<span class="token punctuation">,</span> <span class="token class-name">String</span> requestURI<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> variables <span class="token operator">=</span> pathMatcher<span class="token punctuation">.</span><span class="token function">extractUriTemplateVariables</span><span class="token punctuation">(</span>ADDITIONAL_URI_PATTERN<span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> userId <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> variables<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> variables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>SecurityConfig.java</strong><br>ê°„ë‹¨í•œ ìƒ˜í”Œì´ë¯€ë¡œ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìë¥¼ ë“±ë¡í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤. </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">TokenAuthenticationFilter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">HttpSecurity</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">EnableWebSecurity</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>provisioning<span class="token punctuation">.</span></span><span class="token class-name">InMemoryUserDetailsManager</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">SecurityFilterChain</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordAuthenticationFilter</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/in-memory.html</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">UserDetailsService</span> <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">UserDetails</span> mambo <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token string">"mambo"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"&#123;noop&#125;1234"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">,</span> <span class="token string">"ADMIN"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryUserDetailsManager</span><span class="token punctuation">(</span>mambo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#jc-httpsecurity</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">,</span> <span class="token class-name">TokenAuthenticationFilter</span> tokenAuthenticationFilter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/users/&#123;username&#125;/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>tokenAuthenticationFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Generate-JWT-Test"><a href="#Generate-JWT-Test" class="headerlink" title="Generate JWT Test"></a>Generate JWT Test</h4><p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ì„œ í† í°ì„ ë°œê¸‰í•´ë³´ê³  ì´ë©”ì¼ì— í¬í•¨ë  ë§í¬ì²˜ëŸ¼ í† í° íŒŒë¼ë¯¸í„°ì— í† í°ì„ í¬í•¨í•˜ì—¬ ë¸Œë¼ìš°ì € ì£¼ì†Œì— ì§ì ‘ ì…ë ¥í•´ë´…ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">class</span> <span class="token class-name">JwtUtilTest</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> subject <span class="token operator">=</span> <span class="token string">"mambo"</span><span class="token punctuation">;</span>            <span class="token keyword">long</span> expires <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"mambo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>subject<span class="token punctuation">,</span> expires<span class="token punctuation">,</span> claims<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>ES256<span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"\nmambo.kr:8080/users/mambo?token=&#123;&#125;"</span><span class="token punctuation">,</span> jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>í† í°ì´ ë°œê¸‰ë˜ê³ ë‚˜ì„œ 3ë¶„ ì´ë‚´ì—ëŠ” ë¡œê·¸ì¸ ì²˜ë¦¬ê°€ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ë§Œë£Œëœ ì´í›„ë¼ë©´ ì˜¬ë°”ë¥´ê²Œ ì„œëª…ëœ í† í°ì¼ì§€ë¼ë„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ë³¸ ê¸€ì—ì„œëŠ” JWSìœ¼ë¡œë§Œ êµ¬ì„±ëœ JWT í† í°ì„ ë°œê¸‰í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°œê¸‰ìë¡œë¶€í„° ì„œëª…ëœ ê²ƒì„ì„ ì¦ëª…í•˜ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì¸ì¦ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, JWTëŠ” ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì´ë©”ì¼ê³¼ ê°™ì€ ê³³ì— ë…¸ì¶œë˜ì–´ìˆìœ¼ë¯€ë¡œ ì§§ì€ ë§Œë£Œ ì‹œê°„ì„ ë‘ì–´ ì œí•œ ì‹œê°„ë‚´ì—ë§Œ ì¸ì¦í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.<br>ì¢€ ë” ì‹œê°„ì´ ì£¼ì–´ì§„ë‹¤ë©´ JWSì™€ í•¨ê»˜ JWEë¡œ í´ë ˆì„ í˜ì´ë¡œë“œê°€ ì•”í˜¸í™”ëœ JWT í† í°ì„ ë°œê¸‰í•´ë³¼ ìˆ˜ ìˆëŠ” ê²ƒë„ ì•Œì•„ë´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œ ì‚¬ìš©í–ˆë˜ jjwt ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œëŠ” JWEë¥¼ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ <a href="https://connect2id.com/products/nimbus-jose-jwt">Nimbus JOSE + JWT</a>ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.</p></blockquote><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://docs.spring.io/spring-security/reference/servlet/configuration/java.html">Spring Security Docs</a></li><li><a href="https://jwt.io/">JWT Debugger</a></li><li><a href="https://datatracker.ietf.org/doc/html/rfc7519">RFC7519</a></li><li><a href="https://jwt.io/introduction">Introduction to JSON Web Tokens</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ìµœê·¼ ì‹œìŠ¤í…œì—ì„œ ë°œì†¡ë˜ëŠ” íŠ¹ì • ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìê°€ ê´€ë ¨ëœ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¬ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ì„œ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ëŠ” ê²½ìš°ì—ëŠ” ìì‹ ì˜ ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì— ì¸</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>PKI(Public Key Infrastructure)</title>
    <link href="https://kdevkr.github.io/pki/"/>
    <id>https://kdevkr.github.io/pki/</id>
    <published>2022-07-17T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ì •ë³´ë³´ì•ˆ ì „ë¬¸ê°€ì˜ ìˆ˜ì¤€ì€ ì•„ë‹ì§€ë¼ë„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³´ì•ˆ ê¸°ìˆ ì— ëŒ€í•´ì„œ ì–´ëŠì •ë„ ì´í•´í•˜ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤. ì´ ê¸€ì€ <a href="/ssl-certificate/">SSL ì¸ì¦ì„œ</a>ì™€ <a href="/mutual-tls/">Mutual TLS</a>ì—ì„œ ì–¸ê¸‰í•˜ê±°ë‚˜ ë‹¤ë£¨ì–´ë³¸ X.509 ì¸ì¦ì„œì™€ í•¨ê»˜ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ë¼ê³  í•˜ëŠ” PKIì™€ ê´€ë ¨ëœ ìš©ì–´ì™€ ê°œë…ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë´…ë‹ˆë‹¤.</p></blockquote><h2 id="X-509-Certificate"><a href="#X-509-Certificate" class="headerlink" title="X.509 Certificate"></a>X.509 Certificate</h2><p><em>A public key infrastructure (PKI) is a set of roles, policies, hardware, software and procedures needed to create, manage, distribute, use, store and revoke digital certificates and manage public-key encryption.</em></p><p>X.509ëŠ” <a href="https://datatracker.ietf.org/doc/html/rfc5280">RFC5280</a>ë¡œ ì •ì˜ë˜ì–´ìˆëŠ” ë””ì§€í„¸ ì¸ì¦ì„œ(ê³µê°œí‚¤ ì¸ì¦ì„œ)ì˜ í‘œì¤€ í˜•ì‹ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ëŠ” HTTPS í”„ë¡œí† ì½œì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì¸ì¦ì„œ í˜•ì‹ì´ê¸°ë„ í•˜ë“¯ì´ ì „ì„¸ê³„ì ìœ¼ë¡œ ë””ì§€í„¸ ì¸ì¦ì„œë¼ í•¨ì€ ITU-T X.509 í‘œì¤€ ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ X.509 ì¸ì¦ì„œë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ­ë‚´ì—ì„œ ì‚¬ìš©ë˜ë˜ <a href="https://ko.wikipedia.org/wiki/%EA%B3%B5%EB%8F%99%EC%9D%B8%EC%A6%9D%EC%84%9C">ê³µë™ì¸ì¦ì„œ(ê³µì¸ì¸ì¦ì„œ)</a>ë„ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ ê¸°ìˆ ì„ í™œìš©í•´ì„œ ë§Œë“  ë””ì§€í„¸ ì¸ì¦ì„œì´ì§€ë§Œ í•œêµ­ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¸ì¦ì„œ í˜•ì‹ì´ë¼ëŠ” ì ì…ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl x509 -in local.dev+1.pem -text -nooutCertificate:    Data:        Version: <span class="token number">3</span> <span class="token punctuation">(</span>0x2<span class="token punctuation">)</span>        Serial Number:            e5:29:9a:ba:66:<span class="token punctuation">..</span>.        Signature Algorithm: sha256WithRSAEncryption        Issuer: O <span class="token operator">=</span> mkcert development CA, OU <span class="token operator">=</span> ubuntu@ubuntu, CN <span class="token operator">=</span> mkcert ubuntu@ubuntu        Validity            Not Before: Jul <span class="token number">12</span> <span class="token number">21</span>:55:43 <span class="token number">2022</span> GMT            Not After <span class="token builtin class-name">:</span> Oct <span class="token number">12</span> <span class="token number">21</span>:55:43 <span class="token number">2024</span> GMT        Subject: O <span class="token operator">=</span> mkcert development certificate, OU <span class="token operator">=</span> ubuntu@ubuntu        Subject Public Key Info:            Public Key Algorithm: rsaEncryption                RSA Public-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit<span class="token punctuation">)</span>                Modulus:                    00:d8:c2:77:4f:4f:9d:1c:c2:70:b2:00:52:4f:e7:                    <span class="token punctuation">..</span>.                Exponent: <span class="token number">65537</span> <span class="token punctuation">(</span>0x10001<span class="token punctuation">)</span>        X509v3 extensions:            X509v3 Key Usage: critical                Digital Signature, Key Encipherment            X509v3 Extended Key Usage:                TLS Web Server Authentication            X509v3 Authority Key Identifier:                keyid:3B:31:5D:2F:7C:D6:E6:E2:F5:9B:66:1D:E5:75:5C:11:C6:85:8C:6D            X509v3 Subject Alternative Name:                DNS:local.dev, DNS:localhost    Signature Algorithm: sha256WithRSAEncryption         <span class="token number">43</span>:e1:81:18:d5:04:ca:d4:73:68:85:4d:1d:d4:79:cb:02:0d:         <span class="token punctuation">..</span>.</code></pre><p>ìœ„ ì˜ˆì‹œëŠ” ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ì„¤ ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬ì¸ <a href="https://github.com/FiloSottile/mkcert">mkcert</a>ë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ X.509 ì¸ì¦ì„œì— ëŒ€í•œ ì •ë³´ë¥¼ openssl ë„êµ¬ë¡œ ì¸ì¦ì„œì— í¬í•¨ëœ ì •ë³´ë¥¼ í™•ì¸í•´ë³¸ ê²ƒì…ë‹ˆë‹¤. ì¸ì¦ì„œì— í¬í•¨ë  ìˆ˜ ìˆëŠ” í•„ë“œë“¤ì€ RFC5280 ë¬¸ì„œì— ì„¤ëª…ë˜ì–´ìˆëŠ”ë° ë°œê¸‰ì(Issuer), ì„œëª… ì•Œê³ ë¦¬ì¦˜(Signature Algorithm), ì†Œìœ ì(Subject), ì†Œìœ ìì˜ ê³µê°œí‚¤(Subject Public Key Info) ê·¸ë¦¬ê³  ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë¶€ê°€ ì •ë³´(Extensions)ì…ë‹ˆë‹¤. </p><p>HTTPS í”„ë¡œí† ì½œ í†µì‹ ì—ì„œ TLS í•¸ë“œì‰ì´í‚¹ ê³¼ì • ì¤‘ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì—ì„œ ì œê³µí•œ X.509 ì¸ì¦ì„œ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬ ë¶€ê°€ ì •ë³´ ì¤‘ SAN(X509v3 Subject Alternative Name)ì— ì…ë ¥ëœ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ë„ë©”ì¸ì´ë‚˜ IP ì£¼ì†Œì— ëŒ€í•œ ì‹ ì›ì„ ì¶”ê°€ì ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ„ ì˜ˆì‹œì—ì„œëŠ” localhostì™€ local.devë¼ëŠ” í˜¸ìŠ¤íŠ¸ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>X.509 ì¸ì¦ì„œëŠ” ìƒìœ„ ê¸°ê´€ì—ì„œ ì†Œìœ ìì˜ ê³µê°œí‚¤ë¥¼ ì „ìì„œëª…í•œ ê²ƒìœ¼ë¡œ ì•”í˜¸í™”ê°€ ëª©ì ì´ ì•„ë‹Œ ê³µê°œí‚¤ì— ëŒ€í•œ ì†Œìœ ìì˜ ì‹ ì›ì„ ê²€ì¦í•˜ê³ ì í•¨ì— ìˆìŠµë‹ˆë‹¤.</p></blockquote><h3 id="PEM-Format"><a href="#PEM-Format" class="headerlink" title="PEM Format"></a>PEM Format</h3><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl x509 -in local.dev+1.pem-----BEGIN CERTIFICATE-----MIIEDDCCAnSgAwIBAgIRAOUpmrpmzWKOajX3U1ze1McwDQYJKoZIhvcNAQELBQAwVzEeMBwGA1UEChMVbWtjZXJ0IGRldmVsb3BtZW50IENBMRYwFAYDVQQLDA11YnVudHVAdWJ1bnR1MR0wGwYDVQQDDBRta2NlcnQgdWJ1bnR1QHVidW50dTAeFw0yMjA3MTIyMTU1NDNaFw0yNDEwMTIyMTU1NDNaMEExJzAlBgNVBAoTHm1rY2VydCBkZXZlbG9wbWVudCBjZXJ0aWZpY2F0ZTEWMBQGA1UECwwNdWJ1bnR1QHVidW50dTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANjCd09PnRzCcLIAUk/nr27i2uvztXSF1vbwUby3dPWQcZuR3cLRvIeNv6oOMLnf9uGbI/pjlRcCoZwk+ETUZtVrsFsvNZGCir34QbXkNb96/M8HSM3ZC9soeijU8NqoWDjr4LGtU+FX8pOOHbsjJoiyIH7lg76EpOUrasnVmx6T8xoUlye2si0A+VbV/J6tlJXKix0qidliIiBIY2HWktN+HBIYbttuRwXOK22i7KPwT/jURgZlcAq5Lmfu9+pTs5ak2jXSaneWLkKF0/9RxMy2jGKfdTwYqU4ZjbZz1zXs+UeI7hgsPqprhnVBkDAejNrXNJ1O390IbwtgboJ/V6cCAwEAAaNpMGcwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMB8GA1UdIwQYMBaAFDsxXS981ubi9ZtmHeV1XBHGhYxtMB8GA1UdEQQYMBaCCWxvY2FsLmRldoIJbG9jYWxob3N0MA0GCSqGSIb3DQEBCwUAA4IBgQBD4YEY1QTK1HNohU0d1HnLAg3Pm9bUJxGWw2bOAO+0Dgdau3Fn+72JPz7ZYGX3Deny01TYDEoeno7VOY+gq2u0F4L1SBNWdXhdxxfj/4JK3r1FpmgmEpPOVyrO2KMWgPlNu4JV8jUc/OIOeKYe8S9VddM7VyRjZSCNKsI4kneeu/fZFXLMtWS8lcj/hubQdGYXuSaSZHihpTPvCR2XP6z+NbeDndqo4YemGIUS2eyp4MQCwlR910FUv3NNgk43iJw368ma8p/jigQeUx9reyYKijxd/rbwmg9k5Mks+CgK7pi0Bd8uJxD5i9KgitDBetjoPbw8xIazDUbhtPofs3y8HTGqR4kszm4JZMh0310Ff3hkqjXwT1oVEMrBUUUZrSBjuUEy7bujgu1JBV1f/j5lLzS5dMOM68x7my7YVSUG+hbjeB9w9eZWLx/YZ707ssvAfKVvWoyKrwwlZTQRs7mIHRcM9stz0/k/ZQZH0IBerjuPJ93BKH0wRYxU33i3htQ<span class="token operator">=</span>-----END CERTIFICATE-----</code></pre><p>ìœ„ ê²°ê³¼ëŠ” X.509 ì¸ì¦ì„œê°€ ì‹¤ì œë¡œ íŒŒì¼ì— ì €ì¥ëœ í˜•íƒœë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê°™ì´ êµ¬ì„±ë˜ëŠ” ë°©ì‹ì„ PEM(Privacy Enhanced Mail)ì´ë¼ê³  í•˜ëŠ”ë° X.509 ì¸ì¦ì„œë¥¼ ì €ì¥í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ í˜•ì‹ì…ë‹ˆë‹¤. ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¡œ ì €ì¥ë˜ëŠ” DER(Distinguished Encoding Representation)ë¡œë„ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë‚˜ ì‹œìŠ¤í…œ ê°„ ì•ˆì „í•˜ê²Œ ì „ë‹¬ë  ìˆ˜ ìˆë„ë¡ <a href="/base64/">Base64</a>ë¡œ ì¸ì½”ë”©ë˜ì–´ ì•„ìŠ¤í‚¤ ì½”ë“œí˜•íƒœë¡œ ë˜ì–´ìˆëŠ” PEM í˜•ì‹ì´ ì„ í˜¸ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><h3 id="Certificate-Profiles"><a href="#Certificate-Profiles" class="headerlink" title="Certificate Profiles"></a>Certificate Profiles</h3><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl s_client -showcerts -connect naver.com:443 <span class="token operator">&lt;</span>/dev/nullubuntu@ubuntu:~/x509$ openssl x509 -in naver.com.pem -text -nooutCertificate:    Data:        Version: <span class="token number">3</span> <span class="token punctuation">(</span>0x2<span class="token punctuation">)</span>        Serial Number:            07:f2:85:21:53:b1:50:67:e3:c6:77:aa:3a:83:be:dd        Signature Algorithm: sha256WithRSAEncryption        Issuer: C <span class="token operator">=</span> US, O <span class="token operator">=</span> DigiCert Inc, CN <span class="token operator">=</span> DigiCert TLS RSA SHA256 <span class="token number">2020</span> CA1        Validity            Not Before: May <span class="token number">23</span> 00:00:00 <span class="token number">2022</span> GMT            Not After <span class="token builtin class-name">:</span> Jun  <span class="token number">7</span> <span class="token number">23</span>:59:59 <span class="token number">2023</span> GMT        Subject: C <span class="token operator">=</span> KR, ST <span class="token operator">=</span> Gyeonggi-do, L <span class="token operator">=</span> Seongnam-si, O <span class="token operator">=</span> NAVER Corp., CN <span class="token operator">=</span> www.naver.net        Subject Public Key Info:            Public Key Algorithm: rsaEncryption                RSA Public-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit<span class="token punctuation">)</span>                Modulus:                    00<span class="token punctuation">..</span>.                Exponent: <span class="token number">65537</span> <span class="token punctuation">(</span>0x10001<span class="token punctuation">)</span>        X509v3 extensions:            X509v3 Authority Key Identifier:                keyid:B7:6B:A2:EA:A8:AA:84:8C:79:EA:B4:DA:0F:98:B2:C5:95:76:B9:F4            X509v3 Subject Key Identifier:                F5:3C:13:14:C9:7B:15:36:50:8C:3E:89:40:EE:2C:E0:22:2F:9E:61            X509v3 Subject Alternative Name:                DNS:www.naver.net, DNS:www.naver.asia, DNS:www.naver.co, DNS:www.naver.kr, DNS:www.naver.co.kr, DNS:naver.com, DNS:naver.net, DNS:naver.asia, DNS:naver.co, DNS:naver.kr, DNS:naver.co.kr            X509v3 Key Usage: critical                Digital Signature, Key Encipherment            X509v3 Extended Key Usage:                TLS Web Server Authentication, TLS Web Client Authentication            X509v3 CRL Distribution Points:                Full Name:                  URI:http://crl3.digicert.com/DigiCertTLSRSASHA2562020CA1-4.crl                Full Name:                  URI:http://crl4.digicert.com/DigiCertTLSRSASHA2562020CA1-4.crl            X509v3 Certificate Policies:                Policy: <span class="token number">2.23</span>.140.1.2.2                  CPS: http://www.digicert.com/CPS            Authority Information Access:                OCSP - URI:http://ocsp.digicert.com                CA Issuers - URI:http://cacerts.digicert.com/DigiCertTLSRSASHA2562020CA1-1.crt            <span class="token punctuation">..</span>.    Signature Algorithm: sha256WithRSAEncryption         2e<span class="token punctuation">..</span>.</code></pre><p>ë„¤ì´ë²„ ì‚¬ì´íŠ¸ì˜ ì„œë²„ ì¸ì¦ì„œë¥¼ ì „ë‹¬ë°›ì€ í›„ X.509 ì¸ì¦ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•´ë³´ë©´ ë„¤ì´ë²„ì˜ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•œ ê¸°ê´€ì€ DigiCert ì´ë©° ë„¤ì´ë²„ ì¸ì¦ì„œì— í¬í•¨ë˜ëŠ” ê³µê°œí‚¤ë¥¼ sha256WithRSAEncryption ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œ ì „ì ì„œëª…ì„ í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><ul><li>ì¸ì¦ì„œ ë°œê¸‰ ê¸°ê´€(Issuer)</li><li>ì¸ì¦ì„œ ë§Œë£Œ ê¸°í•œ(Validity) </li><li>ê³µê°œí‚¤ ì†Œìœ ì(Subject) </li><li>ê³µê°œí‚¤(Subject Public Key Info)</li><li>ì„œëª… ì•Œê³ ë¦¬ì¦˜(Signature Algorithm)</li><li>ì†Œìœ ì ëŒ€ì²´ ì´ë¦„(Subject Alternative Name)</li></ul><h2 id="PKCS"><a href="#PKCS" class="headerlink" title="PKCS"></a>PKCS</h2><p>PKCS(Public key Cryptography Standard)ëŠ” ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì•ˆì „í•˜ê²Œ ì •ë³´ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œì…ë‹ˆë‹¤.</p><h3 id="PKCS-8"><a href="#PKCS-8" class="headerlink" title="PKCS#8"></a>PKCS#8</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc5208">RFC5208</a>ë¡œ ì •ì˜ëœ PKCS#8ì€ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê°œì¸í‚¤ë¥¼ í‘œí˜„í•˜ê³  ì €ì¥í•˜ê¸° ìœ„í•œ í‘œì¤€ìœ¼ë¡œ ì•ì„œ X.509 ì¸ì¦ì„œì™€ ê°™ì´ PEM í˜•ì‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="/mutual-tls/">Mutual TLS</a>ì—ì„œëŠ” ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ PEM í˜•ì‹ì˜ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ í†µí•´ í‚¤ ìŠ¤í† ì–´ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ PKCS8EncodedKeySpec ì´ë€ ê²ƒì„ ì‚¬ìš©í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkey -in local.dev+1-key.pem-----BEGIN PRIVATE KEY-----MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDYwndPT50cwnCyAFJP569u4trr87V0hdb28FG8t3T1kHGbkd3C0byHjb+qDjC53/bhmyP6Y5UXAqGcJPhE1GbVa7BbLzWRgoq9+EG15DW/evzPB0jN2QvbKHoo1PDaqFg46+CxrVPhV/KTjh27IyaIsiB+5YO+hKTlK2rJ1Zsek/MaFJcntrItAPlW1fyerZSVyosdKonZYiIgSGNh1pLTfhwSGG7bbkcFzittouyj8E/41EYGZXAKuS5n7vfqU7OWpNo10mp3li5ChdP/UcTMtoxin3U8GKlOGY22c9c17PlHiO4YLD6qa4Z1QZAwHoza1zSdTt/dCG8LYG6Cf1enAgMBAAECggEAIehp2ZJOtY0FLBM4zR8lJmd+b6K0JAI72m1FnAvm0/NAkmGDG1LL9ziJXwTRQoJykGBAhI7HZ84VkeOGot3HKGOsNtdvvc95/LW1Mcr9TXLj0U8GaI0neaUfVvvYoZvsERt1DtZaZMnpPIPiyr9467FRvAgTT95YHTFphyFPHr0kVlAd4qAbyIzOSiGmoBg2Krjk5dXW9Cg7YIxKNUXlxMHNlP3c9zxKyy7Cd3qcp4tFzKxqiTXPEdOxw3b66P/2+RQWi6kCQfu2RINZLjzPBajjEYJ8/o8sVXDs1Bl6pPnpYzMLjHapX8V+NuuG8r9O8Y28siO0NT+tpVnyJHUE4QKBgQDdTb7KJySyUYk+xySCPv3lpBucfnJDy7veWNdiu4KIMVtqnenPJATVE9ovdWFNNrr+1cLJG/uvM3AOSTLHJRXHcFewm2ipxovgr6SKx65zevHbbVMcaDir3hdvh6h7qG/naURQlNz1xups68g89xvbBnFp/X4fTDto+QQUIR5hRQKBgQD6vlcYJUcG7rr6nOEacUtxvhE59qX5sWDCAvrfP/IUjitsqiH9YRTkuUfYQXGQMMfpXCViZ/UVQEsiI4LMY3wM4pquWplZVn9CeyrbgZn/QP2Bp1nExmL21HWGooBG6l2lxGM18lMIzY7vE5GMzGGkH8rRHqgkIAkuTIC5G/sl+wKBgQCGvXUyY87F+zrSzDEAVBYGIXrmN16exIaoA/Nvm7cH8PU13tuiUM3YZfPr/U2202HbEo88HxuIOos5R3vxIDU4bsAVOSnqZIZ50LcgAB/JE8v5y4BUxWfrzJb8Qt5kG9O2U7NSVLCLvAazNoN+Cv4cxrl6zOpjZ+isKyE+mEOE+QKBgQC5M1l09iOuFSp57OG+/CtzSaXDoFAbS05iPn055CtTz2Z3jnoogkpCXi+YpU3R6JXf4TWjp5E4LxLPllcHy/tWMRF68mQNvnukiQCwvNsX09Lqrsb5NmbmVSqxVNlWh8i/pXx53hBCkkGeiF+bFWKRLQJKz0/1zsu5LLxu/SHVfQKBgGuldPS/1zqt1eblPAeobBot1LMCxS8Bk6n1dMiWDM0+yANwh+tkA+MFyZTbdPjjf2e+RAXwUtsKLSvJha0EXLEZPSQL7WDIleYVJ5oAX4nfHS4eNZzvxnL7bblcWtekrBNnHinKS+Cqd+ATLixLnDpi0w+DTfQu93eKXg1NCYrg-----END PRIVATE KEY-----ubuntu@ubuntu:~/x509$ openssl pkey -in local.dev+1-key.pem -text -nooutRSA Private-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit, <span class="token number">2</span> primes<span class="token punctuation">)</span>modulus:    00<span class="token punctuation">..</span>.<span class="token punctuation">..</span>.</code></pre><h3 id="PKCS-12"><a href="#PKCS-12" class="headerlink" title="PKCS#12"></a>PKCS#12</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc7292">RFC7292</a>ë¡œ ì •ì˜ëœ PKCS#12ëŠ” ì¸ì¦ì„œì™€ ê°œì¸í‚¤ ë“± ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë‹¤ì–‘í•œ í•­ëª©ë“¤ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ êµí™˜í•˜ê¸° ìœ„í•œ ì •ë³´ êµí™˜ì˜ í‘œì¤€ì…ë‹ˆë‹¤. </p><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkcs12 -in local.dev+1.pkcs12Enter Import Password: mamboBag Attributes    localKeyID: <span class="token number">16</span> CC 2D CE 9F D0 <span class="token number">52</span> C9 <span class="token number">72</span> <span class="token number">97</span> <span class="token number">90</span> DC EC AB DF <span class="token number">28</span> 0B EA B6 AA<span class="token assign-left variable">subject</span><span class="token operator">=</span>O <span class="token operator">=</span> mkcert development certificate, OU <span class="token operator">=</span> ubuntu@ubuntu<span class="token assign-left variable">issuer</span><span class="token operator">=</span>O <span class="token operator">=</span> mkcert development CA, OU <span class="token operator">=</span> ubuntu@ubuntu, CN <span class="token operator">=</span> mkcert ubuntu@ubuntu-----BEGIN CERTIFICATE-----MIIEDDCCAnSgAwIBAgIRAOUpmrpmzWKOajX3U1ze1McwDQYJKoZIhvcNAQELBQAwVzEeMBwGA1UEChMVbWtjZXJ0IGRldmVsb3BtZW50IENBMRYwFAYDVQQLDA11YnVudHVAdWJ1bnR1MR0wGwYDVQQDDBRta2NlcnQgdWJ1bnR1QHVidW50dTAeFw0yMjA3MTIyMTU1NDNaFw0yNDEwMTIyMTU1NDNaMEExJzAlBgNVBAoTHm1rY2VydCBkZXZlbG9wbWVudCBjZXJ0aWZpY2F0ZTEWMBQGA1UECwwNdWJ1bnR1QHVidW50dTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANjCd09PnRzCcLIAUk/nr27i2uvztXSF1vbwUby3dPWQcZuR3cLRvIeNv6oOMLnf9uGbI/pjlRcCoZwk+ETUZtVrsFsvNZGCir34QbXkNb96/M8HSM3ZC9soeijU8NqoWDjr4LGtU+FX8pOOHbsjJoiyIH7lg76EpOUrasnVmx6T8xoUlye2si0A+VbV/J6tlJXKix0qidliIiBIY2HWktN+HBIYbttuRwXOK22i7KPwT/jURgZlcAq5Lmfu9+pTs5ak2jXSaneWLkKF0/9RxMy2jGKfdTwYqU4ZjbZz1zXs+UeI7hgsPqprhnVBkDAejNrXNJ1O390IbwtgboJ/V6cCAwEAAaNpMGcwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMB8GA1UdIwQYMBaAFDsxXS981ubi9ZtmHeV1XBHGhYxtMB8GA1UdEQQYMBaCCWxvY2FsLmRldoIJbG9jYWxob3N0MA0GCSqGSIb3DQEBCwUAA4IBgQBD4YEY1QTK1HNohU0d1HnLAg3Pm9bUJxGWw2bOAO+0Dgdau3Fn+72JPz7ZYGX3Deny01TYDEoeno7VOY+gq2u0F4L1SBNWdXhdxxfj/4JK3r1FpmgmEpPOVyrO2KMWgPlNu4JV8jUc/OIOeKYe8S9VddM7VyRjZSCNKsI4kneeu/fZFXLMtWS8lcj/hubQdGYXuSaSZHihpTPvCR2XP6z+NbeDndqo4YemGIUS2eyp4MQCwlR910FUv3NNgk43iJw368ma8p/jigQeUx9reyYKijxd/rbwmg9k5Mks+CgK7pi0Bd8uJxD5i9KgitDBetjoPbw8xIazDUbhtPofs3y8HTGqR4kszm4JZMh0310Ff3hkqjXwT1oVEMrBUUUZrSBjuUEy7bujgu1JBV1f/j5lLzS5dMOM68x7my7YVSUG+hbjeB9w9eZWLx/YZ707ssvAfKVvWoyKrwwlZTQRs7mIHRcM9stz0/k/ZQZH0IBerjuPJ93BKH0wRYxU33i3htQ<span class="token operator">=</span>-----END CERTIFICATE-----Bag Attributes    localKeyID: <span class="token number">16</span> CC 2D CE 9F D0 <span class="token number">52</span> C9 <span class="token number">72</span> <span class="token number">97</span> <span class="token number">90</span> DC EC AB DF <span class="token number">28</span> 0B EA B6 AAKey Attributes: <span class="token operator">&lt;</span>No Attributes<span class="token operator">></span>Enter PEM pass phrase: mamboVerifying - Enter PEM pass phrase: mambo-----BEGIN ENCRYPTED PRIVATE KEY-----MIIFHDBOBgkqhkiG9w0BBQ0wQTApBgkqhkiG9w0BBQwwHAQIUCWpIEy8DAECAggAMAwGCCqGSIb3DQIJBQAwFAYIKoZIhvcNAwcECAwP9e11T4W6BIIEyP1XL6GHaVmqcgu+jiWoeopRciYOLS0MWB8Yzb/8Rslyx1l1MAluW+QP30qCbVhhO6l7ulziGC0hRNNNittmdSrZKPbNtch8ZY0G/dWoMY9VfjJSdndbWwXv8zulRXMYiXeVME8MsmG5HPTZyc785dVpeCYaFt6muWw2ABnP97ShSLdIRAeY2G6HDLnEz3/hjbYfE2UFF68ik/wEEtK5f48XxM+PuyDKk4b3+qFfqVSRS6QbdCnrKVQfGqeiWQKOdt/FQZ82/xIqlu3kVuXPmEaN8W62MK1vCocjm/AXJ6l01gUqL00a6ntdTdsCXA6g0qpcwZDd6/1gVgsEK0Y1mbzfq1YS52zw+obHp6nIJpA7Fnllf6irT3mSyEIzorIZ4z4As6CA91EmM4DjFJ6FlLpmVIofe0JlzGxTZ1yueWLZjGf+3sEImikF6ndzh+dCV0ox73h6g8VsD79MHkaZfuBL0ZrxyGSOomRO9WhRrjUihlgILLtMHStWDDTp4F194SiD2T+xC25LuvpfQAmLYYL+otb9n2cv1thik/MjZCDk5duYcRDLUJ3G23MaHk6DC13JaDk925zFhbnFCt1PTzvWZ+HjE1GEFiDr88YJkyLdI7VKTsMC/bcfAE7SrpaqX0cLVjnmlIQK5ScNYvB+PxCJj95YZsVpZ8cw9V/NlkWT1kpSX//G8Wl4YKW0vM25aBCca2hFqbCDC3/6vqqx4z8D+r3K8KRVV/7y94JaMoHjrvd1fjUDOQfuilh3bgfCmhuFS8IV/HjBbkuPY/O8O8abcb16wTMReKqahpmFsdOwIC/2gqoTQbKp2xbtY+gcvcObsWQRMcMHmrHx2vMO4Tr4BKgNBxz4Gv5KAE/Pa2Gvqs0O5xsLNxF1kMUyT5CkrAuUayvysGHvY98p7ORHFKfA+tFOxgf7jBrs6/BpQmZHrbOU4v4WplpcbUe9e31l11n8BkQ/qhcOrtsxqcYub3PRXwpm68LhDacKTdtyVv/j6yYba/RbfSn8ZwZAiwS6oW69qa/JCtECiw0058pNxHujA/A4Ceb7G9uFPhNb2UfgwzmID5tzxOhQype0vi02Vc1sMZHAsmIIiIpJUmh37Td1VkxUg+3FspeOmw00z4WNkrf1SMpFabpySw4BXcJMDIOxYhQI/ij6mPglTjvJHF6eMw53l84MJIUHFkQDGTX2eLZBW91lDxVxmMkt74G7rD9j6pfm/Eo5gezjc9DcX3ot1T6Gv0rk0ilF3Vfuw5+f46ZtZBQqYlFalKgYVpelidv2y5kC7gEnfabH93l9GFHU4OKT1IESwPt4E0pJttVfTAwx3dBT/h8BgfN3bOqM1EdZF0/KIoc1NLl1H2o/EZ94Jig25N3jqJ7w0riNE3dE891Fu715nfEjfSxIpMKC78FR/J9qTXgu6sUwNgCs/DdVqruOjwFKupNgQcj7fwSJtnyQGY9fpZjAG+e5MiPxNFDjaoLu8M7k<span class="token number">5</span>+CGelITcwbq2U8InZIpZTOCLif3zuHg0hkf3GXCsAapfQnmovR/xjtJBWEZVw+Z2otgK9OruIMuEwxzxX2awqI5zDN2yBCnP62eEYoJ+HKM21i/hexMF4jIh9H+H99W<span class="token assign-left variable">oFgNCNUwDw6RXPEUEqnTzQ</span><span class="token operator">==</span>-----END ENCRYPTED PRIVATE KEY-----</code></pre><h4 id="Convert-PEM-to-PKCS-12"><a href="#Convert-PEM-to-PKCS-12" class="headerlink" title="Convert PEM to PKCS#12"></a>Convert PEM to PKCS#12</h4><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkcs12 -export -in local.dev+1.pem -inkey local.dev+1-key.pem -out local.dev+1.pkcs12Enter Export Password: mamboVerifying - Enter Export Password: mambo</code></pre><h4 id="Convert-PKCS-12-to-JKS"><a href="#Convert-PKCS-12-to-JKS" class="headerlink" title="Convert PKCS#12 to JKS"></a>Convert PKCS#12 to JKS</h4><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ keytool -importkeystore -srckeystore local.dev+1.pkcs12 -srcstoretype PKCS12 -deststoretype JKS -destkeystore local.dev+1.jksImporting keystore local.dev+1.pkcs12 to local.dev+1.jks<span class="token punctuation">..</span>.Enter destination keystore password: mamboRe-enter new password: mamboEnter <span class="token builtin class-name">source</span> keystore password: mamboEntry <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token number">1</span> successfully imported.Import <span class="token builtin class-name">command</span> completed:  <span class="token number">1</span> entries successfully imported, <span class="token number">0</span> entries failed or cancelledWarning:The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 <span class="token function">which</span> is an industry standard <span class="token function">format</span> using <span class="token string">"keytool -importkeystore -srckeystore local.dev+1.jks -destkeystore local.dev+1.jks -deststoretype pkcs12"</span><span class="token builtin class-name">.</span></code></pre><p>Java KeyStore APIì—ì„œëŠ” PKCS#12ë¥¼ ê¸°ë³¸ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ PKCS#12ë¡œ ë˜ì–´ìˆëŠ” íŒŒì¼ì„ ê·¸ëŒ€ë¡œ KeyStoreë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ êµ³ì´ JKS í˜•ì‹ì˜ íŒŒì¼ë¡œ ë³€í™˜í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ë§ˆì§€ë§‰ ê²½ê³  ë¬¸êµ¬ì—ì„œ ì•Œë ¤ì£¼ëŠ” ê²ƒì²˜ëŸ¼ JKS í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” í‚¤ìŠ¤í† ì–´ íŒŒì¼ì„ PKCS#12ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì•„ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ keytool -importkeystore -srckeystore local.dev+1.jks -destkeystore local.dev+1.jks -deststoretype pkcs12Enter <span class="token builtin class-name">source</span> keystore password: mamboEntry <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token number">1</span> successfully imported.Import <span class="token builtin class-name">command</span> completed:  <span class="token number">1</span> entries successfully imported, <span class="token number">0</span> entries failed or cancelledWarning:Migrated <span class="token string">"local.dev+1.jks"</span> to PKCS12. The JKS keystore is backed up as <span class="token string">"local.dev+1.jks.old"</span><span class="token builtin class-name">.</span></code></pre><h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul><li><a href="https://www.youtube.com/watch?v=t0F7fe5Alwg">Public Key Infrastructure PKI Concepts</a></li><li><a href="https://stackoverflow.com/a/7886248">Using openssl to get the certificate from a server</a></li><li><a href="https://stackoverflow.com/a/15144560">Converting PKCS#12 certificate into PEM using OpenSSL</a></li><li><a href="https://d2.naver.com/helloworld/197937">JCAë¡œ ì´í•´í•˜ëŠ” ì•”í˜¸í™”ì™€ ë³´ì•ˆ</a></li><li><a href="https://d2.naver.com/helloworld/227016">JCAë¡œ ì´í•´í•˜ëŠ” ì•”í˜¸í™”ì™€ ë³´ì•ˆ 2</a></li><li><a href="https://gruuuuu.github.io/security/what-is-x509/">í˜¸ë‹¤ë‹¥ ê³µë¶€í•´ë³´ëŠ” x509ì™€ ì¹œêµ¬ë“¤</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ì •ë³´ë³´ì•ˆ ì „ë¬¸ê°€ì˜ ìˆ˜ì¤€ì€ ì•„ë‹ì§€ë¼ë„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³´ì•ˆ ê¸°ìˆ ì— ëŒ€í•´ì„œ ì–´ëŠì •ë„ ì´í•´í•˜ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤. ì´ ê¸€ì€ &lt;a href=&quot;/ssl-certificate/&quot;&gt;SSL ì¸ì¦ì„œ&lt;/a&gt;ì™€ &lt;a href=&quot;/mut</summary>
      
    
    
    
    
    <category term="X.509" scheme="https://kdevkr.github.io/tags/X-509/"/>
    
    <category term="PKI" scheme="https://kdevkr.github.io/tags/PKI/"/>
    
    <category term="PKCS#8" scheme="https://kdevkr.github.io/tags/PKCS-8/"/>
    
    <category term="PKCS#12" scheme="https://kdevkr.github.io/tags/PKCS-12/"/>
    
  </entry>
  
  <entry>
    <title>Mutual TLS</title>
    <link href="https://kdevkr.github.io/mutual-tls/"/>
    <id>https://kdevkr.github.io/mutual-tls/</id>
    <published>2022-07-13T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ë³¸ ê¸€ì€ ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ìˆ˜ìš” ë°˜ì‘(DR) ì´ë²¤íŠ¸ë¥¼ ì†¡ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <a href="https://www.openadr.org/">OpenADR í”„ë¡œí† ì½œ</a>ì—ì„œ VTNê³¼ VENì´ ì„œë¡œ ìƒí˜¸ ì¸ì¦(Mutual Authentication)ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬ì¡°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.</p></blockquote><h2 id="Mutual-Authentication"><a href="#Mutual-Authentication" class="headerlink" title="Mutual Authentication"></a>Mutual Authentication</h2><p><em>Client certificates must be used for HTTP client authentication. The entity initiating the request(the client) must have an X.509 certificate that is validated by the server during the TLS handshake. If no client certificate is supplied, or if the certificate is not valid (e.g., it is not signed by a trusted CA, or it is expired) the server must terminate the connection during the TLS handshake.</em></p><p>OpenADR í”„ë¡œí† ì½œì—ì„œ VTN ì‹œìŠ¤í…œê³¼ VEN ë””ë°”ì´ìŠ¤ ê°„ í†µì‹ ì„ ìœ„í•´ì„œëŠ” HTTP ë˜ëŠ” XMPPë¥¼ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤. HTTP í´ë¼ì´ì–¸íŠ¸ í†µì‹ ì„ ìœ„í•´ì„œëŠ” VTNê³¼ VENì€ ì„œë¡œë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” X.509 ê³µê°œí‚¤ ì¸ì¦ì„œë¥¼ ì œê³µí•´ì•¼í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ì„œë²„ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸°ê´€ìœ¼ë¡œë¶€í„° ì„œëª…ëœ X.509 ì¸ì¦ì„œê°€ í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ ì„œë²„ ì‹œìŠ¤í…œì—ì„œëŠ” TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ì—°ê²°ì„ í•´ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><h3 id="X-509-Client-Certificate"><a href="#X-509-Client-Certificate" class="headerlink" title="X.509 Client Certificate"></a>X.509 Client Certificate</h3><p>OpenADR í”„ë¡œí† ì½œì—ì„œì˜ ë³´ì•ˆì€ ê³µê°œí‚¤ ê¸°ë°˜ ì¸í”„ë¼(PKI)ì˜ X.509 ì¸ì¦ì„œë¡œ ìˆ˜í–‰í•˜ë©° ë” ë†’ì€ ë³´ì•ˆ ë ˆë²¨ì„ ìš”êµ¬í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê³  ì‹¶ë‹¤ë©´ XML í˜ì´ë¡œë“œì— ëŒ€í•œ ì„œëª…ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2048 ë¹„íŠ¸ ì´ìƒì˜ RSA ë˜ëŠ” 256 ë¹„íŠ¸ ì´ìƒì˜ ECC í‚¤ ê¸°ë°˜ì˜ ê³µê°œí‚¤ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ VENì€ ì„ë² ë””ë“œ ë””ë°”ì´ìŠ¤ì´ë¯€ë¡œ RSA ë³´ë‹¤ëŠ” ECC í‚¤ ê¸°ë°˜ì˜ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. OpenADR í”„ë¡œí† ì½œì—ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ìµœì†Œí•œ TLS 1.2 ë²„ì „ê³¼ í•¨ê»˜ ê·¸ì— ìƒì‘í•˜ëŠ” ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p><ul><li>Transport Layer Security: TLS 1.2+</li><li>Cipher Suites: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256</li></ul><h4 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h4><p>ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” HTTP í´ë¼ì´ì–¸íŠ¸ í†µì‹  ë„êµ¬ì¸ <a href="https://curl.se/">cURL</a>ë¥¼ ì‚¬ìš©í•´ì„œ EiRegisterParty ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•´ ìš”ì²­í•˜ë©´ VTN ê³¼ì˜ ìƒí˜¸ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://downey.io/notes/dev/curl-using-mutual-tls/">how to curl an endpoint protected by mutual tls (mtls)</a>ì—ì„œëŠ” cURLë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ê³  ìˆì–´ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p><pre class="language-sh" data-language="sh"><code class="language-sh">curl -v --tlsv1.2 --tls-max 1.3 --cert .&#x2F;cert.pem --key .&#x2F;privkey.pem https:&#x2F;&#x2F;Host&#x2F;OpenADR2&#x2F;Simple&#x2F;2.0b&#x2F;EiRegisterParty</code></pre><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ë¿ë§Œ ì•„ë‹ˆë¼ VEN ë””ë°”ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ìë°” ì–¸ì–´ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” KeyStoreë¼ëŠ” ë³„ë„ì˜ í‚¤ ì €ì¥ì†Œ í´ë˜ìŠ¤ë¥¼ ì œê³µí•˜ë¯€ë¡œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì‹œ X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” PKI ë° PKCS í‘œì¤€ì— ëŒ€í•œ ì¼ë ¨ì˜ í´ë˜ìŠ¤ë“¤ì„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œëŠ” PEM í˜•ì‹ìœ¼ë¡œ êµí™˜ë˜ë¯€ë¡œ KeyStoreë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ <a href="https://www.bouncycastle.org/java.html">BouncyCastle API</a> ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ X.509 ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ ë¶ˆëŸ¬ì™€ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì‹œë„í•˜ëŠ” ì½”ë“œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MutualTlsTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MutualTlsTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Test mutual authentication"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testMutualAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"javax.net.debug"</span><span class="token punctuation">,</span> <span class="token string">"ssl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> certPemText <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"cert.pem"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> privateKeyText <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"privkey.pem"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> certPem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>certPemText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> privateKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>privateKeyText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">KeyStore</span> clientKeyStore <span class="token operator">=</span> <span class="token class-name">KeyStore</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"jks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            clientKeyStore<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Certificate</span><span class="token punctuation">></span></span> chain <span class="token operator">=</span> <span class="token class-name">CertificateFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"X.509"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">generateCertificates</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>certPem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> password <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            clientKeyStore<span class="token punctuation">.</span><span class="token function">setKeyEntry</span><span class="token punctuation">(</span><span class="token string">"client"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> password<span class="token punctuation">,</span> chain<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Certificate</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">KeyManagerFactory</span> keyManagerFactory <span class="token operator">=</span> <span class="token class-name">KeyManagerFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"SunX509"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            keyManagerFactory<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>clientKeyStore<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// NOTE: If server generate client certificate from self-signed root CA, you can use trustKeyStore.</span>            <span class="token class-name">KeyStore</span> trustKeyStore <span class="token operator">=</span> <span class="token class-name">KeyStore</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"jks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            trustKeyStore<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"ca.jks"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">TrustManagerFactory</span> trustManagerFactory <span class="token operator">=</span> <span class="token class-name">TrustManagerFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">TrustManagerFactory</span><span class="token punctuation">.</span><span class="token function">getDefaultAlgorithm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            trustManagerFactory<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>trustKeyStore<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">SSLContext</span> sslcontext <span class="token operator">=</span> <span class="token class-name">SSLContexts</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadTrustMaterial</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TrustAllStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sslcontext<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>keyManagerFactory<span class="token punctuation">.</span><span class="token function">getKeyManagers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> trustManagerFactory<span class="token punctuation">.</span><span class="token function">getTrustManagers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tlsVersions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"TLSv1.2"</span><span class="token punctuation">,</span><span class="token string">"TLSv1.3"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cipherSuites <span class="token operator">=</span> <span class="token class-name">SSLContext</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultSSLParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCipherSuites</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">SSLConnectionSocketFactory</span> sslSocketFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSLConnectionSocketFactory</span><span class="token punctuation">(</span>sslcontext<span class="token punctuation">,</span> tlsVersions<span class="token punctuation">,</span> cipherSuites<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">NoopHostnameVerifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">CloseableHttpClient</span> client <span class="token operator">=</span> <span class="token class-name">HttpClientBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSSLSocketFactory</span><span class="token punctuation">(</span>sslSocketFactory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">HttpPost</span> httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"https://Host/OpenADR2/Simple/2.0b/EiRegisterParty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            httpPost<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/xml; charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> payload <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"payload.xml"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>            httpPost<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringEntity</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">CloseableHttpResponse</span> httpResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> response <span class="token operator">=</span> <span class="token class-name">EntityUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>httpResponse<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"&lt;?xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h4><p>ê°œì¸ì ìœ¼ë¡œ í•™ìŠµì¤‘ì¸ Go ì–¸ì–´ì—ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ê³¼ í•¨ê»˜ X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤. <a href="https://venilnoronha.io/a-step-by-step-guide-to-mtls-in-go">A step by step guide to mTLS in Go</a>ì— ì˜ ì„¤ëª…ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"crypto/tls"</span><span class="token string">"crypto/x509"</span><span class="token string">"fmt"</span><span class="token string">"io/ioutil"</span><span class="token string">"log"</span><span class="token string">"net/http"</span><span class="token string">"os"</span><span class="token string">"strings"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cert<span class="token punctuation">,</span> err <span class="token operator">:=</span> tls<span class="token punctuation">.</span><span class="token function">LoadX509KeyPair</span><span class="token punctuation">(</span><span class="token string">"cert.pem"</span><span class="token punctuation">,</span> <span class="token string">"privkey.pem"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>caCert<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">"ca.pem"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>caCertPool <span class="token operator">:=</span> x509<span class="token punctuation">.</span><span class="token function">NewCertPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>caCertPool<span class="token punctuation">.</span><span class="token function">AppendCertsFromPEM</span><span class="token punctuation">(</span>caCert<span class="token punctuation">)</span>client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">&#123;</span>Transport<span class="token punctuation">:</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Transport<span class="token punctuation">&#123;</span>TLSClientConfig<span class="token punctuation">:</span> <span class="token operator">&amp;</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">&#123;</span>ClientAuth<span class="token punctuation">:</span>   tls<span class="token punctuation">.</span>RequireAndVerifyClientCert<span class="token punctuation">,</span>ClientCAs<span class="token punctuation">:</span>    caCertPool<span class="token punctuation">,</span>Certificates<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>tls<span class="token punctuation">.</span>Certificate<span class="token punctuation">&#123;</span>cert<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>MinVersion<span class="token punctuation">:</span>   tls<span class="token punctuation">.</span>VersionTLS12<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>payloadXml<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"payload.xml"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> payloadXml<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>payload<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>payloadXml<span class="token punctuation">)</span>r<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">"https://Host/OpenADR2/Simple/2.0b/EiRegisterParty"</span><span class="token punctuation">,</span> <span class="token string">"application/xml"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> r<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="X-509-Client-Certificate-Proxy"><a href="#X-509-Client-Certificate-Proxy" class="headerlink" title="X.509 Client Certificate Proxy"></a>X.509 Client Certificate Proxy</h3><p>ì˜¤ëŠ˜ë‚ ì˜ ì¸í”„ë¼ ì‹œìŠ¤í…œì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì •ë³´ë¥¼ ê°ì¶”ê³  í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•´ ì „ì²˜ë¦¬ ë™ì‘ì„ ìˆ˜í–‰í•˜ê³  ë„˜ê²¨ì£¼ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œëŠ” Nginxì™€ ê°™ì€ ì›¹ ì„œë²„ ë˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì§€ì›í•˜ë©° ì´ëŸ¬í•œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¸í”„ë¼ êµ¬ì„±ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ì „ë‹¬ëœ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ë³„ë„ì˜ í”„ë¡ì‹œ í—¤ë”ì— í¬í•¨ì‹œì¼œ ë„˜ê²¨ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p><h4 id="X-SSL-CERT"><a href="#X-SSL-CERT" class="headerlink" title="X-SSL-CERT"></a>X-SSL-CERT</h4><p>ì¼ë°˜ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì— ëŒ€í•œ í”„ë¡ì‹œ í—¤ë”ì˜ í‘œì¤€ì€ ì—†ìœ¼ë¯€ë¡œ X-SSL-CERTì™€ ê°™ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” í—¤ë”ë¥¼ ì •í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œì¼œ ì „ë‹¬í•˜ë„ë¡ êµ¬ì„±í•˜ë©´ ë©ë‹ˆë‹¤. ë‹¤ìŒì€ Nginxì—ì„œì˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„± ì‹œ X-SSL-CERT í—¤ë”ì— í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.</p><pre class="language-conf" data-language="conf"><code class="language-conf">server &#123;    ssl_verify_client optional_no_ca;    location &#x2F; &#123;        proxy_set_header X-SSL-CERT $ssl_client_escaped_cert;    &#125;&#125;</code></pre><blockquote><p>ì¼ë°˜ì ìœ¼ë¡œ mTLSë¥¼ ìˆ˜í–‰í•  ë•Œ ì „ë‹¬ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ì—ì„œ ë°œê¸‰ëœ ê²ƒì¸ì§€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œ ìì²´ì ìœ¼ë¡œ ì„œëª…í•œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œëŠ” ì‹ ë¢°í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì˜ ê²€ì¦ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="Webpack-Certificate-Proxy"><a href="#Webpack-Certificate-Proxy" class="headerlink" title="Webpack Certificate Proxy"></a>Webpack Certificate Proxy</h4><p>ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” Webpackì—ì„œëŠ” ìì²´ì ìœ¼ë¡œ í”„ë¡ì‹œ êµ¬ì„±ì„ ì§€ì›í•˜ëŠ” <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a>ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ê³¼ ë™ì¼í•˜ë¯€ë¡œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ Webpack í”„ë¡ì‹œ ì„œë²„ë¥¼ ê²½ìœ í•˜ë„ë¡ í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'spdy'</span><span class="token punctuation">,</span> <span class="token comment">// https</span>            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'cert.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'privkey.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token literal-property property">requestCert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token literal-property property">rejectUnauthorized</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                <span class="token literal-property property">minVersion</span><span class="token operator">:</span> <span class="token string">'TLSv1.2'</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://127.0.0.1:5000'</span><span class="token punctuation">,</span>                <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token literal-property property">xfwd</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                <span class="token literal-property property">rejectUnauthorized</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                <span class="token function">onProxyReq</span><span class="token punctuation">(</span><span class="token parameter">proxyReq<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">const</span> cert <span class="token operator">=</span> req<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">getPeerCertificate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>cert <span class="token operator">&amp;&amp;</span> cert<span class="token punctuation">.</span>raw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">const</span> pem <span class="token operator">=</span> <span class="token string">'-----BEGIN CERTIFICATE-----'</span> <span class="token operator">+</span> cert<span class="token punctuation">.</span>raw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-----END CERTIFICATE-----'</span><span class="token punctuation">;</span>                        proxyReq<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'X-SSL-CERT'</span><span class="token punctuation">,</span> pem<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>requestCert ì˜µì…˜ì„ ì¼œì•¼ onProxyReq í•¨ìˆ˜ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ê°€ì ¸ì™€ì„œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://www.cloudflare.com/ko-kr/learning/access-management/what-is-mutual-authentication/">What protocols support mutual authentication?</a></li><li><a href="https://www.cloudflare.com/ko-kr/learning/access-management/what-is-mutual-tls/">What is mutual TLS (mTLS)?</a></li><li><a href="https://downey.io/notes/dev/curl-using-mutual-tls/">how to curl an endpoint protected by mutual tls (mtls)</a></li><li><a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#var_ssl_client_escaped_cert">Nginx SSL Client Cert</a></li><li><a href="https://webpack.js.org/configuration/dev-server/#devserverserver">Webpack DevServer.server</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ë³¸ ê¸€ì€ ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ìˆ˜ìš” ë°˜ì‘(DR) ì´ë²¤íŠ¸ë¥¼ ì†¡ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” &lt;a href=&quot;https://www.openadr.org/&quot;&gt;OpenADR í”„ë¡œí† ì½œ&lt;/a&gt;ì—ì„œ VTNê³¼ VENì´ ì„œë¡œ ìƒí˜¸ ì¸ì¦(Mutual </summary>
      
    
    
    
    
    <category term="X.509" scheme="https://kdevkr.github.io/tags/X-509/"/>
    
    <category term="mTLS" scheme="https://kdevkr.github.io/tags/mTLS/"/>
    
    <category term="X-SSL-CERT" scheme="https://kdevkr.github.io/tags/X-SSL-CERT/"/>
    
  </entry>
  
  <entry>
    <title>SHA-256</title>
    <link href="https://kdevkr.github.io/sha-256/"/>
    <id>https://kdevkr.github.io/sha-256/</id>
    <published>2022-07-10T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SHA"><a href="#SHA" class="headerlink" title="SHA"></a>SHA</h2><p><a href="https://ko.wikipedia.org/wiki/SHA">SHA(Secure Hash Algorithm)</a>ì€ NISTì— ì˜í•´ì„œ ê´€ë¦¬ë˜ëŠ” ì•ˆì „í•œ í•´ì‹œ í‘œì¤€ í•¨ìˆ˜ë“¤ì˜ ëª¨ìŒì´ë©° í˜„ì¬ëŠ” NIST FIPS 180-3 ê·œê²©ì˜ <a href="https://ko.wikipedia.org/wiki/SHA-2">SHA-2</a>ë¥¼ ê¶Œì¥í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•´ì‹œ í•¨ìˆ˜ëŠ” ì–´ë– í•œ ë¬¸ìì—´ì„ ì¼ì •í•œ ê¸¸ì´ë¥¼ ê°€ì§„ ì„ì˜ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìˆ˜ ë§ì€ ì—°êµ¬ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì—¬ëŸ¬ê°€ì§€ í•´ì‹œ í•¨ìˆ˜ ì¤‘ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ SHA-256ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ëª©ì ì— ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹ì •í•œ ë¬¸ìì—´ì— ëŒ€í•´ì„œëŠ” ë™ì¼í•œ í•´ì‹œê°’(ë‹¤ì´ì œìŠ¤íŠ¸)ìœ¼ë¡œ ë³€í™˜ë˜ë©° í•´ì‹œê°’ì„ ê¸°ì¤€ìœ¼ë¡œëŠ” ë™ì¼í•œ íŒ¨í„´ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ì„œ ë³¸ë˜ì˜ ë¬¸ìì—´ì„ ìœ ì¶”í•  ìˆ˜ ì—†ë„ë¡ í•˜ê³ ì í•˜ëŠ” ê²ƒì— ìˆìŠµë‹ˆë‹¤.</p><p>SHA-256 í•´ì‹œ í•¨ìˆ˜ì˜ ë™ì‘ ê³¼ì •ì€ <a href="https://sha256algorithm.com/">Sha256 Algorithm Explained</a>ë¥¼ ì´ìš©í•˜ë©´ ëˆˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p><h3 id="ë©”ì‹œì§€-ë‹¤ì´ì œìŠ¤íŠ¸"><a href="#ë©”ì‹œì§€-ë‹¤ì´ì œìŠ¤íŠ¸" class="headerlink" title="ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸"></a>ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸</h3><p>í•´ì‹œ í•¨ìˆ˜ëŠ” ì–´ë– í•œ ì…ë ¥ì— ëŒ€í•´ì„œ ì¼ì •í•œ ê¸¸ì´ì˜ ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì§„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸ë€ ì–´ë–¤ ë¬¸ìì—´ ë°ì´í„°ë¥¼ ì¼ì •í•œ ê¸¸ì´ì˜ ë‹¤ì´ì œìŠ¤íŠ¸ë¡œ ë³€í™˜í•œ ê²ƒì„ ë§í•˜ë©° ë‹¨ìˆœí•˜ê²Œ í•´ì‹œ í•¨ìˆ˜ë¡œ ì²˜ë¦¬ëœ í•´ì‹œê°’ì¼ ë¿ì…ë‹ˆë‹¤.</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"crypto/sha256"</span><span class="token string">"encoding/hex"</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>plain <span class="token operator">:=</span> <span class="token string">"HelloWorld"</span>hash <span class="token operator">:=</span> sha256<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>hash<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>plain<span class="token punctuation">)</span><span class="token punctuation">)</span>hashed <span class="token operator">:=</span> hash<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"plain:"</span><span class="token punctuation">,</span> plain<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hashed:"</span><span class="token punctuation">,</span> hex<span class="token punctuation">.</span><span class="token function">EncodeToString</span><span class="token punctuation">(</span>hashed<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-bash" data-language="bash"><code class="language-bash">plain: HelloWorldhashed: 872e4e50ce9990d8b041330c47c9ddd11bec6b503ae9386a99da8584e9bb12c4</code></pre><h3 id="íŒŒì¼-ì²´í¬ì„¬"><a href="#íŒŒì¼-ì²´í¬ì„¬" class="headerlink" title="íŒŒì¼ ì²´í¬ì„¬"></a>íŒŒì¼ ì²´í¬ì„¬</h3><p>ìœ„ ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸ë¥¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì— í™œìš©í•œ ë¶€ë¶„ì´ íŒŒì¼ ì²´í¬ì„¬ì…ë‹ˆë‹¤. <a href="https://ubuntu.com/tutorials/how-to-verify-ubuntu#5-verify-the-sha256-checksum">how-to-verify-ubuntu</a>ì—ì„œ ì²˜ëŸ¼ ë‹¤ìš´ë¡œë“œ ë°›ì€ íŒŒì¼ì˜ ìœ„ë³€ì¡° ì—¬ë¶€ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œ MD5 ë˜ëŠ” SHA-256ë¡œ í•´ì‹œëœ ë‹¤ì´ì œìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ë©° ì´ë¥¼ í†µí•´ ì˜¬ë°”ë¥¸ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ì„ ê²€ì¦í•˜ê³  ì•ˆì „í•˜ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œëŠ” ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œ <a href="https://docs.microsoft.com/ko-kr/windows-server/administration/windows-commands/certutil">CertUtil</a>ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ì²´í¬ì„¬ì„ í™•ì¸í•œ ê²ƒì´ë©° <a href="https://gtkhash.org/">GtkHash</a>ì™€ ê°™ì€ ë„êµ¬ë¡œë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> certutil <span class="token operator">-</span>hashfile orig<span class="token punctuation">.</span>txt sha256SHA256ì˜ orig<span class="token punctuation">.</span>txt í•´ì‹œ:872e4e50ce9990d8b041330c47c9ddd11bec6b503ae9386a99da8584e9bb12c4CertUtil: <span class="token operator">-</span>hashfile ëª…ë ¹ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤<span class="token punctuation">.</span></code></pre><h3 id="ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”"><a href="#ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”" class="headerlink" title="ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”"></a>ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í•  ë•ŒëŠ” <a href="https://d2.naver.com/helloworld/318732">ì•ˆì „í•œ íŒ¨ìŠ¤ì›Œë“œ ì €ì¥</a>ì—ì„œ ì–¸ê¸‰ëœ PBKDF2 ë˜ëŠ” bcryptë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆìŠµë‹ˆë‹¤. bcryptëŠ” NIST ì—ì„œ ê¶Œì¥í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì— ì†í•˜ì§€ëŠ” ì•Šì•˜ìœ¼ë‚˜ OpenBSDë‚˜ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë³¸ íŒ¨ìŠ¤ì›Œë“œ ì¸ì½”ë”ë¡œ ì§€ì •ëœ ë¹„êµì  ì•ˆì „í•œ ì•Œê³ ë¦¬ì¦˜ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì•„ë¬´íŠ¼ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ í•˜ë‚˜ì¸ <a href="https://code.kx.com/q/basics/cmdline/#-u-usr-pwd-local">KDB+ëŠ” MD5 ë˜ëŠ” SHA-1 ì•Œê³ ë¦¬ì¦˜ ë°©ì‹ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§€ì›</a>í•˜ê¸°ì— ì‚¬ìš©í•˜ëŠ” ì‹œìŠ¤í…œë§ˆë‹¤ ì§€ì›í•˜ëŠ” ë°©ì‹ì— ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”-ê´€ë ¨-ì½ìœ¼ë©´-ì¢‹ì€-ê¸€"><a href="#ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”-ê´€ë ¨-ì½ìœ¼ë©´-ì¢‹ì€-ê¸€" class="headerlink" title="ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê´€ë ¨ ì½ìœ¼ë©´ ì¢‹ì€ ê¸€"></a>ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê´€ë ¨ ì½ìœ¼ë©´ ì¢‹ì€ ê¸€</h4><ul><li><a href="https://d2.naver.com/helloworld/318732">ì•ˆì „í•œ íŒ¨ìŠ¤ì›Œë“œ ì €ì¥</a></li><li><a href="https://lovejaco.github.io/posts/cryptographic-hash-function/">í•´ì‹œ í•¨ìˆ˜, ì•”í˜¸í™” í•´ì‹œ í•¨ìˆ˜, ê·¸ë¦¬ê³  SHA</a></li><li><a href="https://auth0.com/blog/hashing-in-action-understanding-bcrypt/">Hashing in Action: Understanding bcrypt</a></li></ul><h3 id="í‚¤-ì„œëª…-ì§€ë¬¸"><a href="#í‚¤-ì„œëª…-ì§€ë¬¸" class="headerlink" title="í‚¤ ì„œëª… ì§€ë¬¸"></a>í‚¤ ì„œëª… ì§€ë¬¸</h3><p><a href="/ssh">SSH í‚¤ í˜ì–´ ë°œê¸‰ ë° ì›ê²© í˜¸ìŠ¤íŠ¸ ì—°ê²°í•˜ê¸°</a>ì—ì„œì²˜ëŸ¼ SSH í‚¤ì— ëŒ€í•´ ì§€ë¬¸(Fingerprint)ì„ ìƒì„±í•´ë†“ê³  í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ê³µê°œí‚¤ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ”ë° ì‚¬ìš©ë˜ê¸°ë„ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í‚¤ ì„œëª… ì§€ë¬¸ì€ ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ê°™ì´ SSL ì¸ì¦ì„œ ì •ë³´ì—ë„ ì„œëª… í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œë„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/sha-256/01.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;SHA&quot;&gt;&lt;a href=&quot;#SHA&quot; class=&quot;headerlink&quot; title=&quot;SHA&quot;&gt;&lt;/a&gt;SHA&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://ko.wikipedia.org/wiki/SHA&quot;&gt;SHA(Secure Hash Algori</summary>
      
    
    
    
    
    <category term="Hashing" scheme="https://kdevkr.github.io/tags/Hashing/"/>
    
    <category term="Message Disgest" scheme="https://kdevkr.github.io/tags/Message-Disgest/"/>
    
    <category term="Checksum" scheme="https://kdevkr.github.io/tags/Checksum/"/>
    
  </entry>
  
  <entry>
    <title>SSH í‚¤ í˜ì–´ ë°œê¸‰ ë° ì›ê²© í˜¸ìŠ¤íŠ¸ ì—°ê²°í•˜ê¸°</title>
    <link href="https://kdevkr.github.io/ssh/"/>
    <id>https://kdevkr.github.io/ssh/</id>
    <published>2022-07-03T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>ì¼ë°˜ì ìœ¼ë¡œ (ì›ê²© í˜¸ìŠ¤íŠ¸ì¸) ì„œë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ì ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê³µìœ í•˜ê¸°ë³´ë‹¤ëŠ” SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ TCP ë³´ì•ˆ ì±„ë„ì„ ì—°ê²°í•˜ê³  í†µì‹  ë‚´ìš©ì— ëŒ€í•œ ì•”í˜¸í™”ë¥¼ í†µí•´ íŒ¨í‚·ì„ ë³´í˜¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì„œë²„ì— ì ‘ì†í•´ì„œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ SSH í”„ë¡œí† ì½œì„ í†µí•´ ì„œë²„ì— ì ‘ì†í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ë©´ì„œ ê·¸ì € ì„œë²„ ì ‘ì†ì„ ìœ„í•œ PEM íŒŒì¼ì„ ë°›ì•„ì„œ ì ‘ì†í•  ë¿ì´ì—ˆë˜ ë¶€ë¶„ì„ ë¨¸ë¦¬ì†ì—ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì €ì™€ í•¨ê»˜ SSH í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•´ë³´ê³  ë°œê¸‰ëœ í‚¤ í˜ì–´ë¥¼ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ë“±ë¡í•œ í›„ ì›ê²© í˜¸ìŠ¤íŠ¸ì— ì—°ê²°í•˜ì—¬ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><h2 id="SSH-í‚¤-í˜ì–´"><a href="#SSH-í‚¤-í˜ì–´" class="headerlink" title="SSH í‚¤ í˜ì–´"></a>SSH í‚¤ í˜ì–´</h2><p>SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” SSH í‚¤ í˜ì–´ë¼ê³  í•˜ëŠ” ê³µê°œí‚¤ì™€ ë¹„ë°€í‚¤(í¼ë¸”ë¦­ í‚¤ì™€ í”„ë¼ì´ë¹— í‚¤)ë¡œ êµ¬ì„±ëœ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ê³ ë‚˜ì„œ ì„œë²„ì—ì„œëŠ” ê³µê°œí‚¤ë¥¼ ë³´ìœ í•˜ë„ë¡ í•˜ê³  ì„œë²„ì— ì ‘ì† ë˜ëŠ” ì¸ì¦í•˜ê³ ìí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ” ë¹„ë°€í‚¤ë¥¼ ê°€ì§€ê³  ìˆìŒìœ¼ë¡œì¨ ê³µê°œí‚¤ ê¸°ë°˜ì˜ ì¸ì¦ì„ ìˆ˜í–‰í•˜ì—¬ ë³´ì•ˆ ì±„ë„ì„ ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤. SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ì„œ TCP ë³´ì•ˆ ì±„ë„ì„ ì—°ê²°í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œëŠ” ë³¸ ê¸€ì—ì„œ ë‹¤ë£¨ê³ ìí•˜ëŠ” ë¶€ë¶„ì´ ì•„ë‹ˆë¯€ë¡œ ìì„¸íˆ ì„¤ëª…ëœ ë‹¤ë¥¸ ê¸€ë“¤ì„ ì°¾ì•„ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p><h3 id="SSH-í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°"><a href="#SSH-í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°" class="headerlink" title="SSH í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°"></a>SSH í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê³  ìˆëŠ” ê°œë°œìë¼ë©´ ì›¹ ì½˜ì†”ì´ë‚˜ AWS CLIì˜ create-key-pair ëª…ë ¹ì„ ì‚¬ìš©í•´ì„œ RSA ë˜ëŠ” ED25519 ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ë§Œ, ì¼ë°˜ì ì¸ ê°œë°œìë¼ë©´ ì–´ë–¤ í™˜ê²½ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” OpenSSHì— í¬í•¨ë˜ëŠ” ssh-keygen ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” ìš´ì˜ì²´ì œì— ë”°ë¼ì„œ ê¸°ë³¸ìœ¼ë¡œ í¬í•¨ëœ OpenSSHë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì„¤ì¹˜í•˜ë©´ ë©ë‹ˆë‹¤. ë§Œì•½ ìœˆë„ìš° 10ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ Git Bashë¥¼ ì„¤ì¹˜í•˜ë©´ ssh-keygenì´ í¬í•¨ë˜ì–´ìˆê³  ì„ íƒì  ê¸°ëŠ¥ì„ í†µí•´ì„œ OpenSSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ssh/ssh-01.png" alt="ìœˆë„ìš° 10ì˜ ì„ íƒì  ê¸°ëŠ¥ì„ í†µí•´ì„œ ì„¤ì¹˜í•œ OpenSSH í´ë¼ì´ì–¸íŠ¸"></p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># in Windows Terminal</span><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>VOpenSSH_for_Windows_7<span class="token punctuation">.</span>7p1<span class="token punctuation">,</span> LibreSSL 2<span class="token punctuation">.</span>6<span class="token punctuation">.</span>5<span class="token comment"># in Git Bash</span>$ ssh <span class="token operator">-</span>VOpenSSH_9<span class="token punctuation">.</span>0p1<span class="token punctuation">,</span> OpenSSL 1<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1p  21 Jun 2022</code></pre><p>ì•„ë¬´íŠ¼ OpenSSHë¥¼ í™•ì¸í–ˆë‹¤ë©´ <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">Generating a new SSH key and adding it to the ssh-agent</a>ì™€ ê°™ì€ ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì„œ ssh-keygenìœ¼ë¡œ SSH í‚¤ í˜ì–´ë¥¼ ìƒì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><p>ë¨¼ì €, RSA ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ë•ŒëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 2048 ë¹„íŠ¸ ì´ìƒìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê²Œ ë˜ë©° ì´ ê¸€ì„ ì‘ì„±í•˜ëŠ” ì‹œì ì—ì„œëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë‚˜ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œ ëª¨ë‘ 4096 ë¹„íŠ¸ë¥¼ ì§€ì›í•˜ê³  ê¶Œì¥í•˜ëŠ” í¸ì…ë‹ˆë‹¤.</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh-keygen <span class="token operator">-</span>t rsa <span class="token operator">-</span>b 4096 <span class="token operator">-</span>m PEM <span class="token operator">-</span>f win-mambo-rsa-4096<span class="token punctuation">.</span>pemGenerating public/private rsa key pair<span class="token punctuation">.</span>Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:Enter same passphrase again:Your identification has been saved in win-mambo-rsa-4096<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>Your public key has been saved in win-mambo-rsa-4096<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>pub<span class="token punctuation">.</span>The key fingerprint is:SHA256:F3ECBEjeXszb6ccTJ2EWz9eaxvZoAg4f6F4rU0aDYJY mambo@DESKTOP-OJJ4TB3The key's randomart image is:<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span><span class="token namespace">[RSA 4096]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token punctuation">|</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span>o<span class="token punctuation">.</span>o o    <span class="token punctuation">|</span><span class="token punctuation">|</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Eo   <span class="token operator">+</span> <span class="token operator">+</span>  <span class="token punctuation">.</span><span class="token punctuation">|</span><span class="token punctuation">|</span>    <span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> o o<span class="token punctuation">|</span><span class="token punctuation">|</span>     <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span>o= o <span class="token operator">+</span> <span class="token punctuation">|</span><span class="token punctuation">|</span>      <span class="token punctuation">.</span> S<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span>o B  <span class="token punctuation">|</span><span class="token punctuation">|</span>       <span class="token punctuation">.</span> <span class="token operator">*</span>o+ <span class="token operator">*</span> o <span class="token punctuation">|</span><span class="token punctuation">|</span>        <span class="token punctuation">.</span>o= = o <span class="token punctuation">.</span><span class="token punctuation">|</span><span class="token punctuation">|</span>       <span class="token punctuation">.</span>o<span class="token punctuation">.</span> o <span class="token operator">+</span>   <span class="token punctuation">|</span><span class="token punctuation">|</span>        <span class="token punctuation">.</span>o<span class="token punctuation">.</span>      <span class="token punctuation">|</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token namespace">[SHA256]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></code></pre><p>4096 ë¹„íŠ¸ë¥¼ ê°€ì§€ëŠ” RSA í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ê²Œë˜ë©´ í‚¤ì˜ ê¸¸ì´ê°€ ë„ˆë¬´ ê¸¸ì–´ì§€ê²Œ ë˜ë¯€ë¡œ ED25519 ì•Œê³ ë¦¬ì¦˜ì„ ì§€ì›í•˜ëŠ” ì›ê²© í˜¸ìŠ¤íŠ¸ë¼ë©´ ED25519 ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•˜ê³  ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ì¢‹ìŠµë‹ˆë‹¤. ì§€ë‚œ <a href="/ed25519/">ed25519</a> ê¸€ì„ ì½ì–´ë³´ì‹œë©´ RSA ë³´ë‹¤ ED25519ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì•Œì•„ê°€ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh-keygen <span class="token operator">-</span>t ed25519 <span class="token operator">-</span>m PEM <span class="token operator">-</span>f win-mambo-ed25519<span class="token punctuation">.</span>pemGenerating public/private ed25519 key pair<span class="token punctuation">.</span>Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:Enter same passphrase again:Your identification has been saved in win-mambo-ed25519<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>Your public key has been saved in win-mambo-ed25519<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>pub<span class="token punctuation">.</span>The key fingerprint is:SHA256:oad/A11tVJQFxRIDA63pozCFj/FsTCDh51hALNdFBVU mambo@DESKTOP-OJJ4TB3The key's randomart image is:<span class="token operator">+</span><span class="token operator">--</span><span class="token namespace">[ED25519 256]</span><span class="token operator">--</span><span class="token operator">+</span><span class="token punctuation">|</span>   o+o o+<span class="token operator">++</span><span class="token operator">+</span>E<span class="token punctuation">.</span><span class="token operator">+</span>BB<span class="token punctuation">|</span><span class="token punctuation">|</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">.</span>o     <span class="token punctuation">.</span><span class="token punctuation">.</span>oo<span class="token punctuation">.</span><span class="token punctuation">|</span><span class="token punctuation">|</span>   o<span class="token punctuation">.</span><span class="token punctuation">.</span>oo<span class="token punctuation">.</span>  o o <span class="token punctuation">.</span> <span class="token punctuation">|</span><span class="token punctuation">|</span>     =o<span class="token punctuation">.</span>o<span class="token punctuation">.</span>o <span class="token punctuation">.</span> o  <span class="token punctuation">|</span><span class="token punctuation">|</span>    <span class="token punctuation">.</span> oXSo <span class="token punctuation">.</span> <span class="token punctuation">.</span>   <span class="token punctuation">|</span><span class="token punctuation">|</span>      <span class="token operator">+</span>oB <span class="token operator">+</span>      <span class="token punctuation">|</span><span class="token punctuation">|</span>      <span class="token punctuation">.</span><span class="token operator">+</span> o <span class="token punctuation">.</span>     <span class="token punctuation">|</span><span class="token punctuation">|</span>       <span class="token punctuation">.</span><span class="token punctuation">.</span> o      <span class="token punctuation">|</span><span class="token punctuation">|</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span>     <span class="token punctuation">|</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token namespace">[SHA256]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></code></pre><h3 id="ê¹ƒí—ˆë¸Œ-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°"><a href="#ê¹ƒí—ˆë¸Œ-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°" class="headerlink" title="ê¹ƒí—ˆë¸Œ ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°"></a>ê¹ƒí—ˆë¸Œ ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°</h3><p>ì‚¬ìš©ì ê³„ì • ì„¤ì • &gt; ì•¡ì„¸ìŠ¤ &gt; <a href="https://github.com/settings/keys">SSH and GPG Keys</a> ë©”ë‰´ë¡œ ì§„ì…í•˜ë©´ SSH í‚¤ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•ì„œ ë§Œë“¤ì—ˆë˜ ED25519 í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•˜ê³  ê¹ƒí—ˆë¸Œì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ssh/ssh-02.png"></p><p><img data-src="/images/posts/ssh/ssh-03.png"></p><p><img data-src="/images/posts/ssh/ssh-04.png"></p><p>ì ì´ì œ ê¹ƒí—ˆë¸Œì— ë“±ë¡í•œ ê³µê°œí‚¤ì— ëŒ€í•œ ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ SSH ì ‘ì†ì„ ì‹œë„í•´ë³´ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i win-mambo-ed25519<span class="token punctuation">.</span>pem <span class="token operator">-</span>T git@github<span class="token punctuation">.</span>comThe authenticity of host <span class="token string">'github.com (15.164.81.167)'</span> cannot be established<span class="token punctuation">.</span>ECDSA key fingerprint is SHA256:p2QAMXNIC1TJYWeIOttrVc98/R1BUFWu3/LiyKgUfQM<span class="token punctuation">.</span>Are you sure you want to <span class="token keyword">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? yesWarning: Permanently added <span class="token string">'github.com,15.164.81.167'</span> <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts<span class="token punctuation">.</span>Hi kdevkr! You've successfully authenticated<span class="token punctuation">,</span> but GitHub does not provide shell access<span class="token punctuation">.</span></code></pre><h3 id="EC2-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°"><a href="#EC2-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°" class="headerlink" title="EC2 ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°"></a>EC2 ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ì§€ ì•Šì•„ë„ ì´ë¯¸ ë§Œë“¤ì–´ì§„ SSH í‚¤ í˜ì–´ë¥¼ ê°€ì ¸ì™€ì„œ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ssh/ssh-05.png"></p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i win-mambo-ed25519<span class="token punctuation">.</span>pem ec2-user@15<span class="token punctuation">.</span>164<span class="token punctuation">.</span>219<span class="token punctuation">.</span>55The authenticity of host <span class="token string">'15.164.219.55 (15.164.219.55)'</span> cannot be established<span class="token punctuation">.</span>ECDSA key fingerprint is SHA256:64Ca/STwUWZkN+ggo5jx6BCvwyhNRcCY5/xjk0SkSjU<span class="token punctuation">.</span>Are you sure you want to <span class="token keyword">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? yesWarning: Permanently added <span class="token string">'15.164.219.55'</span> <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts<span class="token punctuation">.</span>       __<span class="token punctuation">|</span>  __<span class="token punctuation">|</span>_  <span class="token punctuation">)</span>       _<span class="token punctuation">|</span>  <span class="token punctuation">(</span>     <span class="token operator">/</span>   Amazon Linux 2 AMI      ___<span class="token punctuation">|</span>\___<span class="token punctuation">|</span>___<span class="token punctuation">|</span>https:<span class="token operator">/</span><span class="token operator">/</span>aws<span class="token punctuation">.</span>amazon<span class="token punctuation">.</span>com/amazon-linux-2/<span class="token namespace">[ec2-user@ip-10-0-2-243 ~]</span>$ <span class="token function">cat</span> ~<span class="token operator">/</span><span class="token punctuation">.</span>ssh/authorized_keysssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOy21gZ45To8FNf6hilxV51QqT9JCBjIpVKCRlup7m4D window-mambo</code></pre><p>í¼ë¸”ë¦­ ì„œë¸Œë„·ì— ìœ„ì¹˜í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— SSH ì ‘ì†ì´ ê°€ëŠ¥í•¨ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. </p><h2 id="AWS-ED25519-Invalid-Format"><a href="#AWS-ED25519-Invalid-Format" class="headerlink" title="AWS ED25519 Invalid Format"></a>AWS ED25519 Invalid Format</h2><p>ì§€ë‚œ <a href="/ed25519">ED25519</a> ê¸€ì„ ì˜ ì½ì–´ë³´ì‹  ë¶„ë“¤ì´ë¼ë©´ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ì›¹ ì½˜ì†”ì´ë‚˜ AWS CLIë¥¼ í†µí•´ì„œ ED25519 í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³  ìœˆë„ìš° í™˜ê²½ì—ì„œ ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ì¸ì¦ì„ ì‹œë„í•˜ë©´ í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆì„í…ë°ìš”. ì§€ë‚œ ê¸€ì—ì„œëŠ” ë‹¨ìˆœíˆ ì•ˆë˜ëŠ” ê²ƒ ê°™ë‹¤ê³  ë§ˆë¬´ë¦¬ í•˜ì˜€ì§€ë§Œ ì´ ë¬¸ì œì— ëŒ€í•´ì„œ ì™œ ê·¸ëŸ°ê²ƒì¸ê°€ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•´ì ¸ì„œ <a href="https://github.com/aws/aws-cli/discussions/7074">aws-cli&#x2F;discussions&#x2F;7074</a>ë¡œ ê´€ë ¨ ë¬¸ì œì— ëŒ€í•´ì„œ ì§ˆë¬¸ì„ í•˜ì˜€ê³  ì›ì¸ì„ ì°¾ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/ssh/ssh-06.png"></p><p>ìœˆë„ìš° í™˜ê²½ì—ì„œ AWS CLIë¥¼ í†µí•´ í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³  ë¹„ë°€í‚¤ë¥¼ íŒŒì¼ë¡œ ë§Œë“¤ë©´ ìœ„ì™€ ê°™ì´ UTF-16LE ì¸ì½”ë”© í˜•ì‹ê³¼ CRLF ê°œí–‰ ë°©ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. OpenSSHì˜ ssh-keygenìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í‚¤í˜ì–´ íŒŒì¼ì„ UTF-8ê³¼ LFë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. Git Bashì— í¬í•¨ë˜ì–´ìˆëŠ” dos2unixë¼ëŠ” ë„êµ¬ë¥¼ í†µí•´ì„œ UTF-16LEë¡œ ë˜ì–´ìˆëŠ” ì¸ì½”ë”© í˜•ì‹ì„ UTF-8ë¡œ ë³€ê²½í•´ë³´ê³  ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><pre class="language-sh" data-language="sh"><code class="language-sh">$ dos2unix aws-mambo.pemdos2unix: converting UTF-16LE file aws-mambo.pem to UTF-8 Unix format...</code></pre><p>ìœˆë„ìš° í„°ë¯¸ë„ì„ í†µí•´ì„œ UTF-16LE ë° CRLFë¡œ ë˜ì–´ìˆëŠ” ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì˜¬ë°”ë¥´ì§€ ì•Šì•˜ë˜ í‚¤ í˜•ì‹ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆê³  ë‹¤ìŒê³¼ ê°™ì´ ì„±ê³µì ìœ¼ë¡œ ì ‘ì†ë˜ì—ˆìŠµë‹ˆë‹¤.</p><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i aws-mambo<span class="token punctuation">.</span>pem ec2-user@3<span class="token punctuation">.</span>34<span class="token punctuation">.</span>188<span class="token punctuation">.</span>47       __<span class="token punctuation">|</span>  __<span class="token punctuation">|</span>_  <span class="token punctuation">)</span>       _<span class="token punctuation">|</span>  <span class="token punctuation">(</span>     <span class="token operator">/</span>   Amazon Linux 2 AMI      ___<span class="token punctuation">|</span>\___<span class="token punctuation">|</span>___<span class="token punctuation">|</span>https:<span class="token operator">/</span><span class="token operator">/</span>aws<span class="token punctuation">.</span>amazon<span class="token punctuation">.</span>com/amazon-linux-2/<span class="token namespace">[ec2-user@ip-10-0-2-42 ~]</span>$</code></pre><p>ì´ ìƒíƒœì—ì„œ ìœˆë„ìš° í„°ë¯¸ë„ì´ ì•„ë‹Œ Git Bashì—ì„œë„ ì‹œë„ë¥¼ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì‹œ í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p><pre class="language-sh" data-language="sh"><code class="language-sh">$ ssh -i aws-mambo.pem ec2-user@3.34.188.47Load key &quot;aws-mambo.pem&quot;: invalid formatec2-user@3.34.188.47: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</code></pre><p>ì´ë•ŒëŠ” CRLFë¡œ ë˜ì–´ìˆë˜ ê°œí–‰ í˜•ì‹ì„ LFë¡œ ë³€ê²½í•˜ë©´ ì„±ê³µì ìœ¼ë¡œ ì ‘ì†ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-sh" data-language="sh"><code class="language-sh">$ ssh -i aws-mambo.pem ec2-user@3.34.188.47       __|  __|_  )       _|  (     &#x2F;   Amazon Linux 2 AMI      ___|\___|___|https:&#x2F;&#x2F;aws.amazon.com&#x2F;amazon-linux-2&#x2F;[ec2-user@ip-10-0-2-42 ~]$</code></pre><p>ì´ë ‡ê²Œ SSH í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³  ì›ê²© í˜¸ìŠ¤íŠ¸ì— ì—°ê²°í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ê³  ì§€ë‚œ ê¸€ì—ì„œ ê²½í—˜í–ˆë˜ ë¬¸ì œì— ëŒ€í•´ì„œ ë‹¤ì‹œí•œë²ˆ ì‚´í´ë³´ë©° ì›ì¸ì„ ì°¾ì•„ë³´ëŠ” ê²½í—˜ë„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">Connect to your Linux instance using SSH</a>  </li><li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">Connecting to GitHub with SSH</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì¼ë°˜ì ìœ¼ë¡œ (ì›ê²© í˜¸ìŠ¤íŠ¸ì¸) ì„œë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ì ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê³µìœ í•˜ê¸°ë³´ë‹¤ëŠ” SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ TCP ë³´ì•ˆ ì±„ë„ì„ ì—°ê²°í•˜ê³  í†µì‹  ë‚´ìš©ì— ëŒ€í•œ ì•”í˜¸í™”ë¥¼ í†µí•´ íŒ¨í‚·ì„ ë³´í˜¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì„œë²„ì— ì ‘ì†í•´ì„œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆ</summary>
      
    
    
    
    
    <category term="SSH" scheme="https://kdevkr.github.io/tags/SSH/"/>
    
    <category term="Key Pair" scheme="https://kdevkr.github.io/tags/Key-Pair/"/>
    
    <category term="RSA" scheme="https://kdevkr.github.io/tags/RSA/"/>
    
    <category term="ED25519" scheme="https://kdevkr.github.io/tags/ED25519/"/>
    
  </entry>
  
  <entry>
    <title>ê°œë°œìê°€ ì•Œì•„ì•¼í•  ë„¤íŠ¸ì›Œí¬ ì§€ì‹</title>
    <link href="https://kdevkr.github.io/network/"/>
    <id>https://kdevkr.github.io/network/</id>
    <published>2022-05-27T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p><img data-src="/images/posts/network/01.jpg" alt="ë…¸ë€ê±´ ëŒëŒì´..."></p><p><a href="https://roadmap.sh/backend">roadmap.sh</a>ë¥¼ ì°¸ê³ í•˜ë©´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°œë°œì ëª¨ë‘ ì¸í„°ë„·ì´ë¼ëŠ” ê¸°ì´ˆ ì§€ì‹ì„ í•„ìš”ë¡œ í•˜ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìœ„ ì¥ë¹„ë“¤ì´ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì–´ë– í•œ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ë¹„ë¼ëŠ” ê²ƒì„ ì•„ëŠ” ê°œë°œìê°€ ì–¼ë§ˆë‚˜ ë ê¹Œìš”? ì´ë¯¸ ì´ê²ƒë“¤ì„ ì•Œê±°ë‚˜ ë‹¤ë£¨ì§€ ì•ŠëŠ” ê²½í—˜ ë§ì€ ê°œë°œìë“¤ì€ â€œê°œë°œìëŠ” ì €ê²ƒì„ ì‚¬ìš©í•  ì¼ì´ ì—†ì–´ìš”â€ë¼ê³  í• í…Œì§€ìš”. ë¬¼ë¡  ì €ë„ ìœ„ ì¥ë¹„ë“¤ì„ ê²½í—˜í•œ ê²ƒì€ ê°œë°œìë¡œ ì¼í•˜ê³  ìˆëŠ” ì§€ê¸ˆì´ ì•„ë‹ˆë¼ ì»´í“¨í„°ê³µí•™ê³¼ë¼ëŠ” ì´ìœ ë¡œ ê°€ì„¤ë³‘ ë³´ì§ì„ ë°›ê³ ë‚˜ì„œ ì‚¬ë‹¨ ë‚´ ìœ ì„  ì „í™”ë¥¼ ê³ ì¹˜ê±°ë‚˜ ì‹ ê·œë¡œ ë‹¤ì´ë ‰íŠ¸ ì „í™”ì„ ì„ ì¶”ê°€í•´ì•¼í•˜ëŠ” ìš”ê±´ì´ ìˆì„ë•Œ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆì„ ë¿ì…ë‹ˆë‹¤.</p><blockquote><p>ì‹¬ì§€ì–´ëŠ” ìœ ì„ ë³‘ì´ë¼ëŠ” ì´ìœ ë¡œ ëŠ˜ì–´ì§„ í†µì‹ ì„ ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì „ë´‡ëŒ€ë„ íƒ€ì•¼í•˜ëŠ” ìƒí™©ë„â€¦</p></blockquote><p>ì•„ë¬´íŠ¼ ìœ„ì™€ ê°™ì€ ê²½í—˜ì´ ì—†ì—ˆë”ë¼ë©´ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <em>RJ45 ì»¤ë„¥í„° ê·œê²©</em>ì´ë€ ê²ƒì„ ë– ì˜¬ë¦¬ê±°ë‚˜ UTP ì¼€ì´ë¸”ì„ ì»¤ë„¥í„°ì™€ ê²°í•©í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ ë‚˜ì—´í•˜ëŠ” <em>ìƒ‰ìƒì˜ ìˆœì„œê°€ í‘œì¤€ìœ¼ë¡œ ì •í•´ì ¸ìˆë‹¤</em>ëŠ” ê²ƒì„ ì•Œì§€ ëª»í–ˆì„ ê²ë‹ˆë‹¤. ì™œëƒí•˜ë©´ í˜„ì¬ ê°œë°œìë¡œ ì¼í• ë•Œì—ëŠ” ì¸í„°ë„· ì„ ì— ëŒ€í•œ ë¶€ë¶„ì„ ì§ì ‘ ë‹¤ë£¨ì–´ë³¸ë‹¤ê±°ë‚˜ ì´ë¯¸ êµ¬ì„±ëœ ì„œë²„ ì¸í”„ë¼ í™˜ê²½ì„ í†µí•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê¸° ë•Œë¬¸ì´ì£ .</p><p><img data-src="/images/posts/network/02.png" alt="ëŒ€í•œë¯¼êµ­ í•´ì € ì¼€ì´ë¸” ìœ„ì¹˜"></p><p>ì¸í„°ë„·ìœ¼ë¡œ ì „ì„¸ê³„ê°€ ì—°ê²°ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë„ ìš°ë¦¬ë‚˜ë¼ì—ì„œ ë‹¤ë¥¸ ë‚˜ë¼ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ê¸° ìœ„í•´ì„œëŠ” ìˆ˜ ë§ì€ <a href="https://www.submarinecablemap.com/country/south-korea">í•´ì € ê´‘ ì¼€ì´ë¸”</a>ì´ ì„¤ì¹˜ë˜ê³  ê²½ìœ í•œë‹¤ëŠ” ê²ƒê¹Œì§€ëŠ” ëª¨ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ê°œë°œì ë˜ëŠ” ì—”ì§€ë‹ˆì–´ê°€ ì•„ë‹Œ ì‚¬ì—…íŒ€ì—ê²Œ ì‚¬ìš©ìì˜ í´ë¦­ìœ¼ë¡œ ì¸í•´ ì–´ë– í•œ ìš”ì²­ì´ ì„œë²„ë¡œ ì „ë‹¬ë˜ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ëŠ”ë°ê¹Œì§€ ì„¤ëª…í•˜ë”ë¼ë„ ë°”ë‹¤ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ ë‚˜ë¼ë¡œ ê±´ë„ˆê°€ì„œ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ê²Œ ëœë‹¤ë¼ê³  ì„¤ëª…í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p><blockquote><p>ê°œì¸ì ìœ¼ë¡œ ê¶ê¸ˆí•  ìˆ˜ëŠ” ìˆì§€ë§Œ êµ³ì´ ëª¨ë¥¸ë‹¤ê³ í•´ë„ ì¼í•˜ê±°ë‚˜ ì´í•´í•˜ëŠ”ë° ì§€ì¥ì´ ì—†ê¸° ë•Œë¬¸ì´ì£ .</p></blockquote><h4 id="í•´ì €-ì¼€ì´ë¸”-ê´€ë ¨-ì •ë³´"><a href="#í•´ì €-ì¼€ì´ë¸”-ê´€ë ¨-ì •ë³´" class="headerlink" title="í•´ì € ì¼€ì´ë¸” ê´€ë ¨ ì •ë³´"></a>í•´ì € ì¼€ì´ë¸” ê´€ë ¨ ì •ë³´</h4><ul><li><a href="https://www.yna.co.kr/view/AKR20210108069100051">í•´ì €ì¼€ì´ë¸” ìˆê¸°ì— ê°€ëŠ¥í•œ ì§€êµ¬ì´Œ ì†Œí†µ</a></li><li><a href="https://brunch.co.kr/@go2hanoi/14">ë² íŠ¸ë‚¨ í•´ì € ì¼€ì´ë¸”ì€ ì™œ ìì£¼ ëŠê¸¸ê¹Œ?</a></li><li><a href="http://www.goodmorningvietnam.co.kr/mobile/article.html?no=49888">í•´ì € ì¼€ì´ë¸” ë£¨íŠ¸ 2ê°œì— ë¬¸ì œê°€ ìˆëŠ”ë° ì—¬ì „íˆ ê³ ì¹  ìˆ˜ ì—†ë‹¤</a></li></ul><p>ì¡°ì§ë‚´ì— ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ê°€ ìˆê±°ë‚˜ ì¸í”„ë¼ íŒ€ì´ ì¡´ì¬í•œë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ë„ë¡ <a href="https://aws.amazon.com/ko/route53/what-is-dns/">DNS</a>ì™€ <a href="https://docs.microsoft.com/ko-kr/azure/rtos/netx-duo/netx-duo-nat/chapter1">NAT</a>ì™€ ê°™ì€ ì„¤ì •ë“¤ì„ ê°œë°œìê°€ ë‹´ë‹¹í•˜ì§€ëŠ” ì•Šì„ê²ë‹ˆë‹¤. AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ì›¹ ì½˜ì†”ì„ í†µí•´ì„œ í´ë¦­ë§Œìœ¼ë¡œë„ ì„œë²„ ì¸í”„ë¼ êµ¬ì„±ì— ëŒ€í•œ ì„¤ì •ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê¸´ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ í´ë¼ìš°ë“œ ì¸í”„ë¼ í™˜ê²½ì„ ì§ì ‘ ë‹¤ë£¨ëŠ” ì €ì™€ ê°™ì€ ê°œë°œìë“¤ì€ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ì„œ ì¸í”„ë¼ êµ¬ì„±ì„ ê²€í† í•˜ê±°ë‚˜ ì„¤ì •ì„ ë³€ê²½í•´ì•¼í•˜ëŠ” ì‘ì—…ë„ í•´ì•¼í•  ìˆ˜ ìˆê¸°ì— ì–´ëŠì •ë„ì˜ ì¸í”„ë¼ ì§€ì‹ë„ í•„ìš”í•˜ê²Œ ë˜ì£ .</p><blockquote><p>ì•Œì•„ì•¼í•˜ëŠ” ì¸í”„ë¼ ì§€ì‹ì€ í˜„ì¬ ì¡°ì§ì—ì„œ ì–´ë–¤ ê²ƒì„ ê²½í—˜í•˜ëŠëƒì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p></blockquote><p>ì¼ë°˜ì ìœ¼ë¡œëŠ” HTTPë¼ëŠ” í†µì‹  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì§€ë§Œ ì‚¬ì—… ë¶„ì•¼ì— ë”°ë¼ì„œ <a href="https://mqtt.org/">MQTT í†µì‹  í”„ë¡œí† ì½œ</a>ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬ëœë‹¤ê±°ë‚˜ <a href="https://ko.wikipedia.org/w/index.php?title=%EB%AA%A8%EB%93%9C%EB%B2%84%EC%8A%A4&tableofcontents=0">Modbus TCP</a>ë¥¼ í†µí•´ ì‚°ì—… ìë™í™” ì¥ë¹„ì™€ì˜ í†µì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì‹¬ì§€ì–´ëŠ” ì°¨ëŸ‰ì—ì„œëŠ” <a href="https://ko.wikipedia.org/wiki/CAN_%EB%B2%84%EC%8A%A4">CAN í†µì‹ </a>ì„ ì‚¬ìš©í•˜ê³  OBD ëª¨ë“ˆì„ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ê¸°ë„ í•˜ì£ . í†µì‹  í”„ë¡œí† ì½œ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë”ë„·ìœ¼ë¡œ ì¸í„°ë„·ì— ì ‘ì†í•˜ì§€ ì•Šê³  í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ í™˜ê²½ìœ¼ë¡œ ì—°ê²°í•˜ë©° ë¬´ì„  í†µì‹ ì„ í†µí•´ì„œ ì¸í„°ë„·ìœ¼ë¡œ ì ‘ì†í•˜ëŠ” ì¸í”„ë¼ í™˜ê²½ì„ ê²½í—˜í•´ë³´ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë§ˆë„ ë„¤íŠ¸ì›Œí¬ ìš°ì„  ìˆœìœ„ê°€ ìˆë‹¤ëŠ” ì§€ì‹ì„ ì•Œì§€ ëª»í•˜ê³  ìˆì„ ìˆ˜ ìˆì”ë‹ˆë‹¤.</p><blockquote><p>ì…€ë£°ëŸ¬ ëª¨ë“ˆì´ í¬í•¨ëœ í´ë¼ì´ì–¸íŠ¸ ì¥ë¹„ë¥¼ ì „ë‹¬í•˜ê³ ë‚˜ì„œ ìœ ì„  ì—°ê²°ì„ ì‹œë„í•œ ìˆœê°„ ì¸í„°ë„· ì—°ê²°ì´ ëŠì–´ì ¸ì„œ ì›ê²©ì´ í•´ì œë˜ì—ˆë˜ ê²ƒì„ ì‹¤ì œë¡œ ê²½í—˜í•˜ê¸°ë„ í–ˆì£ .</p></blockquote><p>ëŒ€ë¶€ë¶„ì˜ ê°œë°œìê°€ ì›¹ ì„œë²„ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— SSL ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•´ì„œ HTTPS í†µì‹ ì„ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆì§€ë§Œ AWS í´ë¼ìš°ë“œ í™˜ê²½ì„ ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ ELB ì¤‘ NLBë¥¼ í†µí•´ì„œ ECC ê¸°ë°˜ì˜ SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•˜ì—¬ TLS ì˜¤í”„ë¡œë“œ ê¸°ëŠ¥ì„ ì„¤ì •í•˜ë ¤ê³  ì‹œë„í•˜ì§€ ì•Šì•˜ë‹¤ë©´ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/create-tls-listener.html#tls-listener-certificates">2048 ì´ìƒì˜ RSA í‚¤ ë˜ëŠ” EC í‚¤ê°€ í¬í•¨ëœ ì¸ì¦ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ</a>ì— ëŒ€í•œ ê²ƒì„ ì•Œì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p>ê²°êµ­ì€ ê°œë°œìë¼ëŠ” ì§ë¬´ì—ì„œ ì•Œì•„ì•¼í•  ë„¤íŠ¸ì›Œí¬ ì§€ì‹ì€ ì •í•´ì ¸ìˆì§€ ì•Šìœ¼ë©° í˜„ì¬ ë‚´ê°€ ì¡°ì§ì—ì„œ ì–´ë– í•œ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬í•˜ëŠ”ê°€ ë˜ëŠ” ì–´ë–¤ ê²ƒê¹Œì§€ ë‹´ë‹¹í•˜ê³  ê²½í—˜í•˜ëŠ”ê°€ì— ë”°ë¼ ê·¸ ê¹Šì´ì™€ ë²”ìœ„ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ì¸ì§€í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img data-src=&quot;/images/posts/network/01.jpg&quot; alt=&quot;ë…¸ë€ê±´ ëŒëŒì´...&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://roadmap.sh/backend&quot;&gt;roadmap.sh&lt;/a&gt;ë¥¼ ì°¸ê³ í•˜ë©´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”</summary>
      
    
    
    
    
    <category term="ê°œë°œì" scheme="https://kdevkr.github.io/tags/%EA%B0%9C%EB%B0%9C%EC%9E%90/"/>
    
    <category term="ë„¤íŠ¸ì›Œí¬" scheme="https://kdevkr.github.io/tags/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/"/>
    
  </entry>
  
  <entry>
    <title>Gmail SMTP</title>
    <link href="https://kdevkr.github.io/gmail-smtp/"/>
    <id>https://kdevkr.github.io/gmail-smtp/</id>
    <published>2022-05-23T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.139Z</updated>
    
    <content type="html"><![CDATA[<p>ì˜¤ë˜ì „ì— <a href="/sending-mail-with-freemarker-template/">í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</a>ë¼ëŠ” ì£¼ì œë¡œ êµ¬ê¸€ SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ê²ƒì„ ë‹¤ë£¨ì–´ ë³´ì•˜ì—ˆëŠ”ë°ìš”. êµ¬ê¸€ì˜ ë³´ì•ˆ ì •ì±…ì˜ ë³€ê²½ì— ë”°ë¼ì„œ <a href="https://support.google.com/accounts/answer/6010255">2022ë…„ 5ì›” 30</a>ì¼ë¶€í„°ëŠ” ë³´ì•ˆ ìˆ˜ì¤€ì´ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ê°€ í™œì„±ëœ ê³„ì •ìœ¼ë¡œëŠ” SMTP ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ êµ¬ê¸€ SMTP ì„œë²„ë¥¼ ë”ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²ƒì¼ê¹Œìš”?</p><h2 id="Gmail-SMTP"><a href="#Gmail-SMTP" class="headerlink" title="Gmail SMTP"></a>Gmail SMTP</h2><p>ë³´ì•ˆ ìˆ˜ì¤€ì´ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ë¥¼ í™œì„±í™”í•œ ê³„ì •ì—ì„œëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì„œ Gmail SMTPì™€ ê°™ì€ ì„œë“œ íŒŒí‹° ì•±ì— ì¸ì¦í•  ìˆ˜ ìˆì—ˆì§€ë§Œ ì´ì œëŠ” ì‚¬ìš©ìì˜ ê³„ì •ì„ ë” ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì„œ ì„œë“œ íŒŒí‹° ì•±ê³¼ ê¸°ê¸°ì— ë¡œê·¸ì¸ ìš”ì²­í•˜ëŠ” ê²ƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ì œëŠ” Gmail SMTP ì„œë²„ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë³´ì•ˆ ìˆ˜ì¤€ì´ ë†’ì€ Gmail ê³„ì •ì„ ë§Œë“¤ê³ ë‚˜ì„œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¸ì¦ì„ ìš”ì²­í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p><h3 id="2ë‹¨ê³„-ì¸ì¦-í™œì„±í™”"><a href="#2ë‹¨ê³„-ì¸ì¦-í™œì„±í™”" class="headerlink" title="2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”"></a>2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”</h3><p>ë³´ì•ˆ ìˆ˜ì¤€ì´ ë†’ì€ Gmail ê³„ì •ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € 2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™”í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤. êµ¬ê¸€ ê³„ì • ê´€ë¦¬ &gt; ë³´ì•ˆ ë©”ë‰´ì— ë“¤ì–´ê°€ë©´ ì•„ë˜ì™€ ê°™ì´ 2ë‹¨ê³„ ì¸ì¦ì„ ì‚¬ìš©ì¤‘ì¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/gmail-smtp/02.png"></p><p>ìœ„ì™€ ê°™ì´ 2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™” í•˜ì§€ ì•Šì•˜ë‹¤ë©´ 2ë‹¨ê³„ ì¸ì¦ì„ í´ë¦­í•´ì„œ ì•ˆë‚´ì— ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì¸ì¦ì„ ì™„ë£Œí•˜ê³  2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™”í•©ë‹ˆë‹¤.</p><p><img data-src="/images/posts/gmail-smtp/03.png" alt="êµ¬ê¸€ ê³„ì •ì— ì…ë ¥ëœ ì „í™”ë²ˆí˜¸ë¡œ ì¸ì¦"></p><p><img data-src="/images/posts/gmail-smtp/04.png" alt="ì „í™” ë˜ëŠ” ë¬¸ìë©”ì‹œì§€ë¡œ ë°›ì€ ì¸ì¦ë²ˆí˜¸ ì…ë ¥ í›„ ì¸ì¦ ì™„ë£Œ"></p><p><img data-src="/images/posts/gmail-smtp/05.png" alt="2ë‹¨ê³„ ì¸ì¦ í™œì„±í™” ì™„ë£Œ"></p><h3 id="ì•±-ë¹„ë°€ë²ˆí˜¸-ì¶”ê°€"><a href="#ì•±-ë¹„ë°€ë²ˆí˜¸-ì¶”ê°€" class="headerlink" title="ì•± ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€"></a>ì•± ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€</h3><p>2ë‹¨ê³„ ì¸ì¦ì´ í™œì„±í™” ë˜ê³ ë‚˜ì„œ ì•± ë¹„ë°€ë²ˆí˜¸ë¼ëŠ” ë¶€ë¶„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¶”ê°€í•˜ë©´ Gmail SMTPì™€ ê°™ì€ 2ë‹¨ê³„ ì¸ì¦ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì•±ì—ì„œë„ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë‹¤ê³  ì•Œë ¤ì£¼ëŠ”ë°ìš”. ì•ì„œ ë§í•œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ ë°©ì‹ì´ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¸ì¦í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p><p><img data-src="/images/posts/gmail-smtp/06.png"></p><p><img data-src="/images/posts/gmail-smtp/07.png"></p><p>ì´ì œ ë°œê¸‰ëœ 16ìë¦¬ì˜ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜ ë³µì‚¬í•´ë‘ê³  Gmail SMTP ì¸ì¦ì— ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p><h3 id="ì´ë©”ì¼-ë°œì†¡"><a href="#ì´ë©”ì¼-ë°œì†¡" class="headerlink" title="ì´ë©”ì¼ ë°œì†¡"></a>ì´ë©”ì¼ ë°œì†¡</h3><p><a href="https://github.com/kdevkr/spring-demo-freemarker/tree/main/src/main/resources/config">Gmail SMTPë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì •ë³´</a>ëŠ” ë‹¬ë¼ì§€ì§€ ì•Šìœ¼ë©° ìš°ë¦¬ê°€ ìˆ˜ì •í•´ì•¼í•  ë¶€ë¶„ì€ êµ¬ê¸€ ì´ë©”ì¼ ê³„ì •ì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ ëŒ€ì‹ ì— ì•ì„œ ë°œê¸‰í•œ 16ìë¦¬ì˜ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p><p><img data-src="/images/posts/gmail-smtp/08.png"></p><p>ë”ì´ìƒ ë³´ì•ˆ ìˆ˜ì¤€ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ í™œì„±í™” ì—†ì´ë„ Gmail SMTP ì„œë²„ë¥¼ ì´ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì˜¤ë˜ì „ì— &lt;a href=&quot;/sending-mail-with-freemarker-template/&quot;&gt;í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°&lt;/a&gt;ë¼ëŠ” ì£¼ì œë¡œ êµ¬ê¸€ SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ê²ƒì„ ë‹¤ë£¨ì–´ ë³´ì•˜</summary>
      
    
    
    
    
    <category term="Gmail" scheme="https://kdevkr.github.io/tags/Gmail/"/>
    
    <category term="SMTP" scheme="https://kdevkr.github.io/tags/SMTP/"/>
    
  </entry>
  
  <entry>
    <title>EC2 Node Exporter</title>
    <link href="https://kdevkr.github.io/ec2-node-exporter/"/>
    <id>https://kdevkr.github.io/ec2-node-exporter/</id>
    <published>2022-05-21T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.139Z</updated>
    
    <content type="html"><![CDATA[<p>ì¡°ì§ì—ì„œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ê³¤ ìˆì§€ë§Œ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¡œ êµ¬ì„±ëœ ì¸í”„ë¼íŒ€ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë³´ë‹ˆ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ì•Šê³  í•„ìš”í•˜ë‹¤ê³  ìƒê°ë  ë•Œ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ê°€ë¥¼ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ëª¨ë‹ˆí„°ë§ì— ëŒ€í•´ì„œë„ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì›¹ ì½˜ì†”ì—ì„œ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/monitoring_ec2.html">Amazon EC2 ëª¨ë‹ˆí„°ë§</a>ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆì§€ë§Œ 5ë¶„ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘ë˜ëŠ” ì§€í‘œë¥¼ 1ë¶„ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/using-cloudwatch-new.html">ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì„¸ë¶€ ëª¨ë‹ˆí„°ë§ í™œì„±í™”</a>ë¥¼ í•´ì•¼í•˜ê³  ë” ë§ì€ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì§€í‘œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— <a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/installing-cloudwatch-agent-ssm.html">CloudWatch ì—ì´ì „íŠ¸ ì„¤ì¹˜</a>í•´ì•¼í•˜ê³  ë³„ë„ì˜ ë¹„ìš©ì´ ì¶”ê°€ì ìœ¼ë¡œ ë“ ë‹¤ëŠ” ì ìœ¼ë¡œ ì¸í•˜ì—¬ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šê³  ìˆìŠµë‹ˆë‹¤.</p><p>íšŒì‚¬ ì‚¬ë‚´ ì„œë²„ì— ê°œì¸ì ìœ¼ë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ ë° ê·¸ë¼íŒŒë‚˜ ì„œë²„ë¥¼ ì‹¤í–‰í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— Node Exporterë¥¼ í™œìš©í•´ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆë‹¤ë©´ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°ë˜ì—ˆìŠµë‹ˆë‹¤. ê³ ê°ìœ¼ë¡œ ë¶€í„° ì›¹ ì½˜ì†”ì„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬ë°›ê¸°ë„ í•˜ê³  ì–´ë–¤ ê³ ê°ì€ ë³´ì•ˆ ìƒ ì´ìœ ë¡œ ì¸í•˜ì—¬ ì¸í”„ë¼ êµ¬ì„±ê³¼ ê´€ë¦¬ëŠ” ì§ì ‘ ë‹´ë‹¹í•˜ê³  ì •í•´ì§„ ìŠ¤í™ì— ë”°ë¼ì„œ ìƒì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ì† ê¶Œí•œë§Œ ë¶€ì—¬í•˜ê¸° ë•Œë¬¸ì— CloudWatchë¥¼ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><blockquote><p>íšŒì‚¬ ì‚¬ë‚´ ì„œë²„ì— ì„ì‹œì ìœ¼ë¡œ êµ¬ì„±í•œ í”„ë¡œë©”í…Œìš°ìŠ¤ ë° ê·¸ë¼íŒŒë‚˜ëŠ” ëª¨ë‹ˆí„°ë§ ë°©ì•ˆì´ ê²€í† ë˜ë©´ ì¡°ì§ë‚´ì—ì„œ ìš´ì˜ì¤‘ì¸ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì´ì „í•  ìƒê°ì…ë‹ˆë‹¤.</p></blockquote><p>ì•„ë¬´íŠ¼ í˜„ì¬ ì¡°ì§ì—ì„œ ëª¨ë‹ˆí„°ë§ ë°©ì•ˆì„ ì œëŒ€ë¡œ ê²€í† í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ëŠ” ì•„ë‹ˆì§€ë§Œ ê³ ê°ì˜ ì¸í”„ë¼ í™˜ê²½ì— ì‹œìŠ¤í…œì„ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê³  ìˆìœ¼ë¯€ë¡œ ìµœì†Œí•œ ì›ì¸ì„ ì°¾ì•„ê°€ê¸° ìœ„í•œ ì§€í‘œëŠ” ë‚¨ê²¨ë‘ì–´ì•¼í•œë‹¤ê³  ìƒê°í•˜ê¸°ì— Node Exporterë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í–ˆê³  ì´ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚¨ê¸°ê³ ì í•©ë‹ˆë‹¤.</p><h2 id="Node-Exporter"><a href="#Node-Exporter" class="headerlink" title="Node Exporter"></a>Node Exporter</h2><p><a href="https://github.com/prometheus/node_exporter">Node Exporter</a>ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ í”„ë¡œì íŠ¸ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ì‹œìŠ¤í…œ ë§¤íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ëŠ” Exporter ì…ë‹ˆë‹¤. <a href="https://prometheus.io/docs/guides/node-exporter/#installing-and-running-the-node-exporter">Installing and running the Node Exporter</a>ì™€ ê°™ì´ Node Exporterë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œ ë¬¸ì„œë„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p>EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒíƒœê°€ ì •ìƒì ì´ì§€ ì•ŠìŒì´ í™•ì¸ë˜ë©´ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-instance-recover.html">ì¸ìŠ¤í„´ìŠ¤ ë³µêµ¬</a> ê¸°ëŠ¥ìœ¼ë¡œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì–¸ì œë“ ì§€ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì¬ë¶€íŒ…ë˜ì–´ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¬ë¶€íŒ…ë˜ì–´ë„ ìë™ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ë„ë¡ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ Systemdì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p><h3 id="EC2-ì¸ìŠ¤í„´ìŠ¤-ì•„í‚¤í…ì²˜"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-ì•„í‚¤í…ì²˜" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ ì•„í‚¤í…ì²˜"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ ì•„í‚¤í…ì²˜</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” amd64 ê¸°ë°˜ì˜ ì•„í‚¤í…ì²˜ ë¿ë§Œ ì•„ë‹ˆë¼ <a href="https://aws.amazon.com/ko/ec2/graviton/">Arm ê¸°ë°˜ì˜ AWS Graviton í”„ë¡œì„¸ì„œ</a>ë¡œ ì œê³µë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìµœê·¼ì—ëŠ” Arm ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ë” ì €ë ´í•œ ê°€ê²©ìœ¼ë¡œ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì•„í‚¤í…ì²˜ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥´ê²Œ ë¹Œë“œëœ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">uname</span> -rmpo<span class="token number">4.14</span>.256-197.484.amzn2.aarch64 aarch64 aarch64 GNU/Linux</code></pre><h3 id="ë¦´ë¦¬ì¦ˆ-íŒŒì¼-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜"><a href="#ë¦´ë¦¬ì¦ˆ-íŒŒì¼-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜" class="headerlink" title="ë¦´ë¦¬ì¦ˆ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜"></a>ë¦´ë¦¬ì¦ˆ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜</h3><p>EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì•„í‚¤í…ì²˜ ìœ í˜•ì„ í™•ì¸í–ˆë‹¤ë©´ <a href="https://github.com/prometheus/node_exporter/releases">ë¦´ë¦¬ì¦ˆ íŒŒì¼</a>ì—ì„œ ìœ„ ì•„í‚¤í…ì²˜ì— ë§ëŠ” arm64ê°€ í¬í•¨ëœ ë¦´ë¦¬ì¦ˆ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” x86_64 ì•„í‚¤í…ì²˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— amd64ë¥¼ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-arm64.tar.gz<span class="token function">tar</span> zxvf node_exporter-1.3.1.linux-arm64.tar.gz<span class="token function">sudo</span> <span class="token function">cp</span> node_exporter-1.3.1.linux-arm64/node_exporter /usr/local/bin/<span class="token function">sudo</span> <span class="token function">useradd</span> -M -r -s /bin/false node_exporter<span class="token function">sudo</span> <span class="token function">chown</span> node_exporter:node_exporter /usr/local/bin/node_exporter</code></pre><h4 id="Node-Exporter-ìš©-ì‚¬ìš©ì-ì¶”ê°€"><a href="#Node-Exporter-ìš©-ì‚¬ìš©ì-ì¶”ê°€" class="headerlink" title="Node Exporter ìš© ì‚¬ìš©ì ì¶”ê°€"></a>Node Exporter ìš© ì‚¬ìš©ì ì¶”ê°€</h4><p>ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ê°€ ì•„ë‹ˆê¸°ì— ì‚¬ìš©ìë¥¼ ì§ì ‘ ì¶”ê°€í•´ë³¸ì ì´ ì—†ì–´ì„œ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ëŠ” ëª…ë ¹ì–´ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•„ì•¼í–ˆìŠµë‹ˆë‹¤. ë§ì€ ì˜ˆì œë“¤ì—ì„œ ì‚¬ìš©ì ì¶”ê°€ ì‹œ ì ìš©í•˜ëŠ” ì˜µì…˜ì´ ì œê°ê°ì´ë¼ì„œ ë” í˜¼ë€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. </p><ul><li><a href="https://linux.die.net/man/8/useradd">useradd(8) - Linux man page</a></li><li><a href="https://faq.hostway.co.kr/Linux_ETC/1624">&#x2F;bin&#x2F;false, &#x2F;sbin&#x2F;nologin ì˜ ì°¨ì´ì </a></li><li><a href="https://linuxhint.com/add-user-linux/">How do I add a user in Linux without a home directory?</a></li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># sudo useradd --no-create-home --system --shell /bin/false node_exporter</span><span class="token function">sudo</span> <span class="token function">useradd</span> -M -r -s /bin/false node_exporter</code></pre><blockquote><p>ì‹œìŠ¤í…œ ê³„ì •ì„ ìƒì„±í•˜ë˜ ë¡œê·¸ì¸ì´ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ í•˜ë©´ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="Systemd-ì„œë¹„ìŠ¤-ë“±ë¡"><a href="#Systemd-ì„œë¹„ìŠ¤-ë“±ë¡" class="headerlink" title="Systemd ì„œë¹„ìŠ¤ ë“±ë¡"></a>Systemd ì„œë¹„ìŠ¤ ë“±ë¡</h3><p>ì„¤ì¹˜í•œ ë°”ì´ë„ˆë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ Systemd ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ê³  Systemctl ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì„œë²„ê°€ ë¶€íŒ…ë  ë•Œ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ í™œì„±í™”í•©ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tee</span> /etc/systemd/system/node_exporter.service <span class="token operator">&lt;&lt;</span><span class="token string">"EOF"[Unit]Description=Node ExporterAfter=network.target[Service]User=node_exporterGroup=node_exporterExecStart=/usr/local/bin/node_exporter[Install]WantedBy=multi-user.targetEOF</span><span class="token function">sudo</span> systemctl daemon-reload<span class="token function">sudo</span> systemctl start node_exporter<span class="token function">sudo</span> systemctl status node_exporter<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> node_exporter</code></pre><h3 id="ë§¤íŠ¸ë¦­-í™•ì¸"><a href="#ë§¤íŠ¸ë¦­-í™•ì¸" class="headerlink" title="ë§¤íŠ¸ë¦­ í™•ì¸"></a>ë§¤íŠ¸ë¦­ í™•ì¸</h3><p>Node Exporter ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¬ë‹¤ë©´ curl ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì§€í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¢…ë£Œí•©ë‹ˆë‹¤.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> -s localhost:9100/metrics</code></pre><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://docs.vmware.com/en/VMware-vRealize-Operations-Management-Pack-for-Kubernetes/1.6/kubernetes-solution/GUID-A1B68BE5-EF38-48E1-AA80-FD71E6F19989.html">Node Exporter Setup on Linux Nodes</a></li><li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-prometheus-on-ubuntu-16-04">How To Install Prometheus on Ubuntu 16.04</a></li><li><a href="https://devdojo.com/ruanbekker/getting-started-with-prometheus-and-node-exporter">Getting Started with Prometheus and Node Exporter</a></li><li><a href="https://devopscube.com/monitor-linux-servers-prometheus-node-exporter/">How To Monitor Linux Servers Using Prometheus Node Exporter</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì¡°ì§ì—ì„œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ê³¤ ìˆì§€ë§Œ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¡œ êµ¬ì„±ëœ ì¸í”„ë¼íŒ€ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë³´ë‹ˆ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ì•Šê³  í•„ìš”í•˜ë‹¤ê³  ìƒê°ë  ë•Œ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ê°€ë¥¼ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. </summary>
      
    
    
    
    
    <category term="EC2" scheme="https://kdevkr.github.io/tags/EC2/"/>
    
    <category term="node-exporter" scheme="https://kdevkr.github.io/tags/node-exporter/"/>
    
  </entry>
  
  <entry>
    <title>íƒ„ë ¥ì  ë³¼ë¥¨ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ</title>
    <link href="https://kdevkr.github.io/not-support-ebs-modify-volume/"/>
    <id>https://kdevkr.github.io/not-support-ebs-modify-volume/</id>
    <published>2022-05-19T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.143Z</updated>
    
    <content type="html"><![CDATA[<p>ì§€ë‚œë²ˆì— ê³µìœ í•œ <a href="https://kdevkr.github.io/reason-for-replacing-ec2-instance-type/">EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ êµì²´í•˜ëŠ” ì´ìœ </a>ë¥¼ í†µí•´ ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì‚¬ìš©í•˜ë©´ ë¹„ìŠ·í•œ ì„±ëŠ¥ì´ì§€ë§Œ ë” ì ì€ ë¹„ìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì†Œê°œí–ˆìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ ì¡°ì§ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ìš© ì¸ìŠ¤í„´ìŠ¤ë¥¼ <a href="https://aws.amazon.com/ko/blogs/korea/new-amazon-ec2-r5b-instances-providing-3x-higher-ebs-performance/">Amazon EC2 R5b</a>ë¡œ ë³€ê²½í•˜ì—¬ ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ìœ¼ë¡œ ì¸í•œ ë¹„ìš© ì ˆê°ê³¼ ë” ë†’ì€ EBS ì„±ëŠ¥ì„ ì œê³µë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p><p>ê·¸ëŸ¬ë‚˜, ì–´ë– í•œ ì‚¬ìœ ë¡œ ì¸í•˜ì—¬ ë” ë†’ì€ ë³¼ë¥¨ ì²˜ë¦¬ ì„±ëŠ¥ì„ ìœ„í•´ì„œ ê¸°ì¡´ì— ì—°ê²°í•˜ì˜€ë˜ gp3 ë³¼ë¥¨ ëŒ€ì‹ ì— io2 ë³¼ë¥¨ìœ¼ë¡œ ëŒ€ì²´í•˜ì˜€ê³  í™•ì‹¤ì´ í”„ë¡œë¹„ì €ë‹ëœ ë³¼ë¥¨ì˜ ì²˜ë¦¬ ì„±ëŠ¥ì´ ì¢‹ë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì´ë•ŒëŠ” ì•Œì§€ ëª»í–ˆë˜ í° ì œì•½ì‚¬í•­ì´ ìµœê·¼ì— ë°œê²¬ë˜ì—ˆìœ¼ë©° ì´ì— ëŒ€í•œ ë‚´ìš©ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.</p><h2 id="íƒ„ë ¥ì -ë³¼ë¥¨"><a href="#íƒ„ë ¥ì -ë³¼ë¥¨" class="headerlink" title="íƒ„ë ¥ì  ë³¼ë¥¨"></a>íƒ„ë ¥ì  ë³¼ë¥¨</h2><p><a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ebs-modify-volume.html">Amazon EBS íƒ„ë ¥ì  ë³¼ë¥¨</a>ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš©ì¤‘ì¸ ë³¼ë¥¨ì„ ë¶„ë¦¬í•˜ì§€ ì•Šë”ë¼ë„ ë³¼ë¥¨ì˜ ìœ í˜•ì„ ë³€ê²½í•˜ê±°ë‚˜ í¬ê¸°ë‚˜ IOPSì™€ ê°™ì€ ì„±ëŠ¥ì„ ì¡°ì •í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ íƒ„ë ¥ì  ë³¼ë¥¨ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¤‘ì§€í•œë‹¤ë˜ê°€ ë³¼ë¥¨ì„ ë¶„ë¦¬í•˜ì§€ ì•Šì•„ë„ ì‰½ê²Œ ë³¼ë¥¨ì˜ í¬ê¸° ë˜ëŠ” ì„±ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/modify-volume-requirements.html">ëª¨ë“  í˜„ì¬ ì„¸ëŒ€ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ íƒ„ë ¥ì  ë³¼ë¥¨ì„ ì§€ì›í•œë‹¤</a>ëŠ” ë‚´ìš©ë§Œ í™•ì¸í•˜ê³ ì„œëŠ” ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì´ë¼ë©´ ë‹¹ì—°íˆ ë³¼ë¥¨ ìˆ˜ì •ì´ ê°€ëŠ¥í•  ê²ƒì´ë¼ê³  ìƒê°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p><h3 id="Amazon-EC2-R5b"><a href="#Amazon-EC2-R5b" class="headerlink" title="Amazon EC2 R5b"></a>Amazon EC2 R5b</h3><p>Amazon EC2 R5bëŠ” ë‹ˆíŠ¸ë¡œ ì‹œìŠ¤í…œ ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì—°ê²°ë˜ëŠ” EBS ë³¼ë¥¨ì€ NVMe ìŠ¤í† ë¦¬ì§€ ì…ë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ë³€ê²½í–ˆì„ ë‹¹ì‹œì— ì‚¬ìš©í–ˆë˜ ë³¼ë¥¨ì€ gp3ë¡œ íƒ„ë ¥ì  ë³¼ë¥¨ìœ¼ë¡œ ì ì¬ë˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ë§ì•„ì§€ë©´ì„œ ë””ìŠ¤í¬ ìš©ëŸ‰ì´ ë¶€ì¡±í•´ì§ˆë•Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¤‘ì§€í•˜ì§€ ì•Šê³ ì„œë„ ë³¼ë¥¨ì„ ì‰½ê²Œ í™•ì¥í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p><h3 id="io2-Block-Express-ë³¼ë¥¨"><a href="#io2-Block-Express-ë³¼ë¥¨" class="headerlink" title="io2 Block Express ë³¼ë¥¨"></a>io2 Block Express ë³¼ë¥¨</h3><blockquote><p>R5b, X2idn ë° X2iedn ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°ëœ io2 ë³¼ë¥¨ì˜ í¬ê¸° ë˜ëŠ” í”„ë¡œë¹„ì €ë‹ëœ IOPSëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></blockquote><p>ìœ„ ë¬¸ì¥ì€ ì˜¤ëŠ˜ì˜ í•µì‹¬ ë‚´ìš©ì…ë‹ˆë‹¤. Amazon EC2 R5bì™€ ê°™ì€ ì¼ë¶€ ì°¨ì„¸ëŒ€ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì—ì„œëŠ” io2 ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. R5b ì¸ìŠ¤í„´ìŠ¤ëŠ” io2 ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë” ì¢‹ì€ ì„±ëŠ¥ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ì„œ io2 Block Expressë¼ëŠ” ì°¨ì„¸ëŒ€ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ì œê³µë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ebs-volume-types.html#io2-bx-considerations">io2 Block Express ë³¼ë¥¨ì€ íƒ„ë ¥ì  ë³¼ë¥¨ ì‘ì—…ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ</a></p><p>Amazon EC2 R5bì™€ ê°™ì€ ì¼ë¶€ ì°¨ì„¸ëŒ€ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì—ì„œëŠ” io2 ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. ë‹ˆíŠ¸ë¡œ ì‹œìŠ¤í…œ ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ì„œ io2 Block Expressë¼ëŠ” ì°¨ì„¸ëŒ€ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í˜„ì¬ ì‹œì ì—ì„œëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ebs-volume-types.html#io2-bx-considerations">io2 Block Express ë³¼ë¥¨ì€ íƒ„ë ¥ì  ë³¼ë¥¨ ì‘ì—…ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ</a>ì„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.</p><blockquote><p>ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ê¸°ëŠ¥ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì–¸ì  ê°€ëŠ” io2 Block Express ë³¼ë¥¨ë„ íƒ„ë ¥ì  ë³¼ë¥¨ì´ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p>ì‚¬ìš©í•˜ê³  ìˆëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ ì—”ì§„ì„ ì‚¬ìš©í•˜ì§€ë§Œ ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ê³¼ê±° ë°ì´í„°ëŠ” íŒŒì¼ë¡œ ë³´ê´€í•´ë‘ê³  ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ì´ê¸°ì— ë©”ëª¨ë¦¬ì™€ ë””ìŠ¤í¬ ì„±ëŠ¥ì´ ëª¨ë‘ ì¤‘ìš”í•˜ë‹¤ê³  íŒë‹¨í•´ì„œ ë” ì¢‹ì€ ì„±ëŠ¥ì˜ io2 ë³¼ë¥¨ìœ¼ë¡œ êµì²´í•œ ê²ƒì¸ë° íƒ„ë ¥ì  ë³¼ë¥¨ì˜ ë¯¸ì§€ì›ì— ëŒ€í•œ ë¶€ë¶„ì„ ê²€í† í•˜ì§€ ì•ŠìŒìœ¼ë¡œ ì¸í•˜ì—¬ ì˜¤íˆë ¤ í° ì œì•½ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>ì‹œìŠ¤í…œì— ë“±ë¡ë˜ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ê³„ì† ì €ì¥í•˜ê³  ìœ ì§€í•˜ê³  ìˆì–´ì•¼í•˜ë¯€ë¡œ ë””ìŠ¤í¬ ë³¼ë¥¨ì˜ í¬ê¸°ë¥¼ í™•ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì€ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ io2 ë³¼ë¥¨ì—ì„œëŠ” gp3 ë³¼ë¥¨ìœ¼ë¡œ ì „í™˜ì´ ê°€ëŠ¥í•˜ì—¬ gp3 ìœ í˜•ì˜ ë³¼ë¥¨ì— IOPSì™€ ì²˜ë¦¬ëŸ‰ì„ ë†’ì´ëŠ” ì •ë„ë¡œ ì‚¬ìš©í•˜ê³ ì ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p><p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì§€ë‚œë²ˆì— ê³µìœ í•œ &lt;a href=&quot;https://kdevkr.github.io/reason-for-replacing-ec2-instance-type/&quot;&gt;EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ êµì²´í•˜ëŠ” ì´ìœ &lt;/a&gt;ë¥¼ í†µí•´ ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì‚¬ìš©í•˜ë©´ ë¹„ìŠ·í•œ ì„±ëŠ¥ì´</summary>
      
    
    
    
    
    <category term="AWS" scheme="https://kdevkr.github.io/tags/AWS/"/>
    
    <category term="EBS" scheme="https://kdevkr.github.io/tags/EBS/"/>
    
    <category term="R5b" scheme="https://kdevkr.github.io/tags/R5b/"/>
    
    <category term="io2 Block Express" scheme="https://kdevkr.github.io/tags/io2-Block-Express/"/>
    
  </entry>
  
  <entry>
    <title>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì´ë©”ì¼ ë°œì†¡ ë„ë©”ì¸</title>
    <link href="https://kdevkr.github.io/email-spf-dkim-dmarc/"/>
    <id>https://kdevkr.github.io/email-spf-dkim-dmarc/</id>
    <published>2022-05-18T00:00:00.000Z</published>
    <updated>2022-09-13T14:55:18.139Z</updated>
    
    <content type="html"><![CDATA[<p>ì‹œìŠ¤í…œì„ ê°œë°œí•˜ëŠ” ë‹¨ê³„ì—ì„œëŠ” ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ ìœ„í•´ì„œ íšŒì‚¬ ë‚´ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¶„ê»˜ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ë¥¼ ëŒ€ì‹  ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìš”ì²­í•˜ê³  ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” SMTP ì„œë²„ì™€ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ í…ŒìŠ¤íŠ¸í•˜ê³¤ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‹¤ì œë¡œ ì‹œìŠ¤í…œì„ ìš´ìš©í•˜ëŠ” ì‹œì ì— ë“¤ì–´ì„œì íšŒì‚¬ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” ì „ì†¡ ê±´ë“¤ì´ ë§ì•„ì ¸ì„œ íšŒì‚¬ ì¸í”„ë¼ ë‹´ë‹¹ ì—”ì§€ë‹ˆì–´ë¶„ìœ¼ë¡œë¶€í„° <a href="https://aws.amazon.com/ko/ses/">Amazon SES</a>ë¡œ ë©”ì¼ ì„œë²„ë¥¼ ì „í™˜í•´ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë°›ê³  í™”ì‚¬ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ ëŒ€ì‹ ì— í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì œê³µí•˜ëŠ” SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì‘ì—…ì„ í•˜ì˜€ìŠµë‹ˆë‹¤. </p><h2 id="Amazon-SES"><a href="#Amazon-SES" class="headerlink" title="Amazon SES"></a>Amazon SES</h2><p>ì €ëŠ” ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ëŠ” ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¸í”„ë¼ ì˜ì—­ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ì§€ì‹ì„ ì•Œì§€ëŠ” ëª»í•˜ëŠ”ë°ìš”. ê°œë°œìë¡œì¨ ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ë©´ <a href="/sending-mail-with-freemarker-template/">í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</a>ì™€ ê°™ì´ SMTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p><p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-01.png"></p><p>Amazon SESëŠ” SMTP ì—”ë“œí¬ì¸íŠ¸ì™€ STARTTLS&#x2F;TLS ì˜µì…˜ì— ë”°ë¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” í¬íŠ¸ì™€ SMTP ì¸ì¦ì„ ìœ„í•œ í¬ë ˆë´ì…œì„ ë°œê¸‰í•˜ê³  ì¸ì¦ë§Œ í•˜ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ í´ë¦­ë§Œìœ¼ë¡œë„ SMTP í¬ë ˆë´ì…œì„ ë°œê¸‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°œë°œìë¼ë©´ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Amazon SESëŠ” ì¸ì¦ëœ ì´ë©”ì¼ ì£¼ì†Œë¡œ ë©”ì¼ì„ ë°œì†¡í•  ìˆ˜ ìˆê±°ë‚˜ ë„ë©”ì¸ì„ ì¸ì¦í•˜ì—¬ ì´ë©”ì¼ ë°œì†¡ì— ëŒ€í•œ ì‹ ì›ì„ ê²€ì¦í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆëŠ”ë°ìš”. ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ ì´ë©”ì¼ ìˆ˜ì‹ ì´ ê°€ëŠ¥í•œ ë°œì‹  ì´ë©”ì¼ì´ ì¡´ì¬í•œë‹¤ë©´ ê°„ë‹¨í•˜ê²Œ ë°œì‹  ì£¼ì†Œë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-02.png"></p><h3 id="ì´ë©”ì¼ì—-ëŒ€í•œ-ë°œì‹ -ì£¼ì†Œë¥¼-ì‹ ë¢°í• -ìˆ˜-ì—†ìŒ"><a href="#ì´ë©”ì¼ì—-ëŒ€í•œ-ë°œì‹ -ì£¼ì†Œë¥¼-ì‹ ë¢°í• -ìˆ˜-ì—†ìŒ" class="headerlink" title="ì´ë©”ì¼ì— ëŒ€í•œ ë°œì‹  ì£¼ì†Œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ"></a>ì´ë©”ì¼ì— ëŒ€í•œ ë°œì‹  ì£¼ì†Œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ</h3><p>ê°„ë‹¨í•˜ê²Œ SMTP ë©”ì¼ ì„œë²„ë¥¼ ì „í™˜í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì–´ë ¤ìš´ ì‘ì—…ì€ ì•„ë‹ˆë¼ê³  ìƒê°í–ˆì—ˆëŠ”ë° ì ì‹œ í›„ ì˜ˆìƒí•˜ì§€ ëª»í–ˆë˜ ë¬¸ì œê°€ íŒŒì•…ë˜ì—ˆì–´ìš”. Amazon SESì˜ SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì „í™˜í•˜ê³ ë‚˜ì„œ ì‹œìŠ¤í…œì—ì„œ ë°œì†¡í•˜ëŠ” ì´ë©”ì¼ì„ ìˆ˜ì‹ ìê°€ ë°›ì•˜ì„ë•Œ ìŠ¤íŒ¸ ë©”ì¼í•¨ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆ <a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ses-email-flagged-as-spam/">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?</a>ì™€ ê°™ì€ ê°€ì´ë“œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. SMTP ì„œë²„ì— ì˜í•´ ì „ë‹¬ë˜ëŠ” ì´ë©”ì¼ì„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì€ Amazon SESê°€ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¶€ë¶„ê³¼ ë‹¤ìŒì˜ ìš”ì¸ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•ˆë‚´í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p><blockquote><p><a href="https://docs.aws.amazon.com/ses/latest/dg/send-email-authentication-dkim.html">DomainKeys Identified Mail(DKIM)</a> ë˜ëŠ” <a href="https://docs.aws.amazon.com/ses/latest/dg/send-email-authentication-spf.html">Sender Policy Framework(SPF)</a>ì™€ ê°™ì€ ì´ë©”ì¼ ì¸ì¦ ë¶€ì¡±</p></blockquote><h3 id="ë°œì‹ -ë„ë©”ì¸-ê²€ì¦"><a href="#ë°œì‹ -ë„ë©”ì¸-ê²€ì¦" class="headerlink" title="ë°œì‹  ë„ë©”ì¸ ê²€ì¦"></a>ë°œì‹  ë„ë©”ì¸ ê²€ì¦</h3><p><a href="https://docs.aws.amazon.com/ses/latest/dg/configure-identities.html">Configuring identities in Amazon SES</a> ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ SMTP í”„ë¡œí† ì½œì€ ìì²´ì ìœ¼ë¡œ ì¸ì¦ ê¸°ëŠ¥ì´ ì—†ë‹¤ëŠ” ê²ƒê³¼ ì´ëŸ¬í•œ ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ ìŠ¤íŒ¨ë¨¸ê°€ ë°œì‹  ì£¼ì†Œë¥¼ ìœ„ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ SPF ë˜ëŠ” DKIMì™€ ê°™ì€ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ê³  ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ì œê» ë“£ë„ë³´ë„ ëª»í•œ ìƒˆë¡œìš´ ìš©ì–´ê°€ ë‚˜íƒ€ë‚˜ê²Œ ëœê±°ì£ . <a href="https://blog.cloudflare.com/ko-kr/tackling-email-spoofing-ko-kr/">ì´ë©”ì¼ ìŠ¤í‘¸í•‘ê³¼ í”¼ì‹±ì— ëŒ€ì²˜í•˜ê¸°</a>ì—ì„œ DNSì˜ ë„ë©”ì¸ ë ˆì½”ë“œë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í‘¸í•‘ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ë§¤ì»¤ë‹ˆì¦˜ì„ êµ¬ì„±í•œë‹¤ëŠ” ì ì„ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. </p><p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-03.png"></p><p>ìˆ˜ì‹ ëœ ì´ë©”ì¼ì´ ì˜¬ë°”ë¥¸ ê³³ìœ¼ë¡œë¶€í„° ë°œì†¡ëœ ê²ƒì¸ì§€ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ë©”ì¸ ê¸°ë°˜ìœ¼ë¡œ ì‹ ì›ì„ ê²€ì¦í•˜ê³  SPF, DKIM, DMARCì™€ ê°™ì€ DNS ë ˆì½”ë“œë¥¼ ë„ë©”ì¸ì— ì„¤ì •í•´ì•¼í–ˆìŠµë‹ˆë‹¤. ë‹¤í–‰íˆë„ Route53ìœ¼ë¡œ ë„ë©”ì¸ì„ ì‚¬ìš©ì¤‘ì´ê¸°ì— Amazon SESì—ì„œ ìë™ìœ¼ë¡œ DNS ë ˆì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/ses/latest/dg/send-email-authentication-dmarc.html">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ DMARC ì¤€ìˆ˜</a>ì— ë”°ë¼ ë„ë©”ì¸ ë ˆì½”ë“œì— DMARC ì •ì±…ì´ ì„¤ì •ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  Amazon SESê°€ ë„ë©”ì¸ì„ ê²€ì¦í•˜ê¸°ë¥¼ ê¸°ë‹¤ë ¸ìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-04.png"></p><h3 id="ì´ë©”ì¼-ë³´ì•ˆ-DNS-ë ˆì½”ë“œ-ì§ˆì˜"><a href="#ì´ë©”ì¼-ë³´ì•ˆ-DNS-ë ˆì½”ë“œ-ì§ˆì˜" class="headerlink" title="ì´ë©”ì¼ ë³´ì•ˆ DNS ë ˆì½”ë“œ ì§ˆì˜"></a>ì´ë©”ì¼ ë³´ì•ˆ DNS ë ˆì½”ë“œ ì§ˆì˜</h3><p>DKIMìœ¼ë¡œ ë„ë©”ì¸ ê²€ì¦ì„ í•˜ì˜€ìŒì„ í™•ì¸í•˜ì˜€ê³  ì¶”ê°€ì ìœ¼ë¡œ digì™€ ê°™ì€ DNS ì§ˆì˜ ëª…ë ¹ì–´ ë„êµ¬ë¥¼ í†µí•´ì„œ DNS ë ˆì½”ë“œê°€ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># SPF ë ˆì½”ë“œ í™•ì¸</span><span class="token function">dig</span> TXT example.com +short<span class="token string">"v=spf1 include:_spf.google.com ip4:xxx.xxx.xxx.xxx a:mail.example.com ~all"</span><span class="token comment"># DKIM ë ˆì½”ë“œ í™•ì¸</span><span class="token function">dig</span> TXT google._domainkey.example.com +short<span class="token string">"v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoamWoQQ5zEdcFQnGaWN055oT3sEnCgN5bcAze5R6uvI1P"</span> <span class="token string">"X4d+CGbNDSVJqOmQPyrJdK2fOVG3hvjMkoilYcgWrGKDat2Nh29ftN5tTx5SVK/kl+5aPKRd9q6q9c9EWL7aRS2hqoGRyzW0Nb0ilKZc/"</span> <span class="token string">"odDbh3bgNhN6AJqIZwlE9BJgkYT5aT6TGJM/Vi4GJcYDEKm6yDexTJKzfZ8o8TCRDufCYDF8F+dKKyLvyaKrngfgIjRi5PiGVGbyNrIL7iMp1CkJ7ErpkYCJw5DeTQkXi8Gxt+Km61sIP2F8IZyd/"</span> <span class="token string">"WrEXJmk2pHzRfiJJqIiY4r3s4loR/sJ4hQPS6HEq7JQIDAQAB"</span><span class="token comment"># DMARC ë ˆì½”ë“œ í™•ì¸</span><span class="token function">dig</span> TXT _dmarc.example.com +short<span class="token string">"v=DMARC1; p=quarantine; rua=mailto:postmaster@example.com; ruf=mailto:postmaster@example.com"</span></code></pre><h3 id="ë°œì‹ -ë„ë©”ì¸-ì‹ ë¢°-í™•ì¸"><a href="#ë°œì‹ -ë„ë©”ì¸-ì‹ ë¢°-í™•ì¸" class="headerlink" title="ë°œì‹  ë„ë©”ì¸ ì‹ ë¢° í™•ì¸"></a>ë°œì‹  ë„ë©”ì¸ ì‹ ë¢° í™•ì¸</h3><p>ë„ë©”ì¸ ê¸°ë°˜ì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì´ ì ìš©ë˜ê³ ë‚˜ì„œëŠ” ìˆ˜ì‹ ëœ ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ ë¶„ë¥˜ë˜ì§€ ì•Šê²Œ ë˜ì—ˆê³  ì›ë³¸ ë©”ì¼ ì •ë³´ë¥¼ í™•ì¸í•˜ë©´ SPF, DKIM, DMARCì— ëŒ€í•œ ê²€ì¦ì´ í†µê³¼ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-05.png"></p><blockquote><p>ì›ë³¸ ë©”ì¼ì„ í™•ì¸í•˜ëŠ” ê²ƒì€ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¶„ì´ ì•Œë ¤ì£¼ì…¨ì–´ìš”! ğŸ˜</p></blockquote><p>SMTP ì„œë²„ë¥¼ Amazon SESë¡œ ì „í™˜í•˜ëŠ” ê²½í—˜ì„ í†µí•´ì„œ ì´ë©”ì¼ì´ ì •ìƒì ì¸ ê³³ìœ¼ë¡œë¶€í„° ë°œì‹ ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œ ë„ë©”ì¸ ë ˆì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•œë‹¤ëŠ” ì§€ì‹ì„ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ì‹ ëœ ì´ë©”ì¼ì„ ê²€ì¦í•˜ëŠ” ê³¼ì •ì„ ë” ìì„¸í•˜ê²Œ ì•Œê³  ì‹¶ë‹¤ë©´ <a href="https://www.learndmarc.com/">ì´ë©”ì¼ì˜ SPF&#x2F;DKIM&#x2F;DMARCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì¸í„°ë™í‹°ë¸Œí•˜ê²Œ ë³´ê¸°</a>ë¥¼ ì´ìš©í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. </p><h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul><li><a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ses-email-flagged-as-spam/">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?</a></li><li><a href="https://blog.cloudflare.com/ko-kr/tackling-email-spoofing-ko-kr/">ì´ë©”ì¼ ìŠ¤í‘¸í•‘ê³¼ í”¼ì‹±ì— ëŒ€ì²˜í•˜ê¸°</a></li><li><a href="https://www.learndmarc.com/">ì´ë©”ì¼ì˜ SPF&#x2F;DKIM&#x2F;DMARCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì¸í„°ë™í‹°ë¸Œí•˜ê²Œ ë³´ê¸°</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì‹œìŠ¤í…œì„ ê°œë°œí•˜ëŠ” ë‹¨ê³„ì—ì„œëŠ” ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ ìœ„í•´ì„œ íšŒì‚¬ ë‚´ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¶„ê»˜ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ë¥¼ ëŒ€ì‹  ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìš”ì²­í•˜ê³  ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” SMTP ì„œë²„ì™€ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ í…ŒìŠ¤íŠ¸í•˜ê³¤ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‹¤</summary>
      
    
    
    
    
    <category term="SPF" scheme="https://kdevkr.github.io/tags/SPF/"/>
    
    <category term="DKIM" scheme="https://kdevkr.github.io/tags/DKIM/"/>
    
    <category term="DMARC" scheme="https://kdevkr.github.io/tags/DMARC/"/>
    
  </entry>
  
</feed>
