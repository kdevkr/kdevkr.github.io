<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":{"enable":false,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="공공데이터포털의 오픈 API는 많은 웹 서비스나 시스템에서 활용할 수 있는 데이터를 제공하고 있어서 웹 개발자들에게 필수적으로 연동을 요구하는 인터페이스이다. 많은 기업에서 오픈 API를 활용해야하기 때문에 수 많은 웹 개발자가 오픈 API에 대한 연동 오류 때문에 힘들어했다. 지금은 인증키 문제를 해결하고자 URL 인코딩된 키와 원본을 구별해서 제공하기"><meta property="og:type" content="article"><meta property="og:title" content="공공데이터포털 오픈 API는 웹 개발자를 괴롭혀 (Feat. XML)"><meta property="og:url" content="https://kdevkr.github.io/data-go-openapi/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="공공데이터포털의 오픈 API는 많은 웹 서비스나 시스템에서 활용할 수 있는 데이터를 제공하고 있어서 웹 개발자들에게 필수적으로 연동을 요구하는 인터페이스이다. 많은 기업에서 오픈 API를 활용해야하기 때문에 수 많은 웹 개발자가 오픈 API에 대한 연동 오류 때문에 힘들어했다. 지금은 인증키 문제를 해결하고자 URL 인코딩된 키와 원본을 구별해서 제공하기"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kdevkr.github.io/images/posts/data-go-openapi/01.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/data-go-openapi/02.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/data-go-openapi/03.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/data-go-openapi/04.png"><meta property="article:published_time" content="2023-05-28T15:00:00.000Z"><meta property="article:modified_time" content="2024-01-28T13:42:06.318Z"><meta property="article:author" content="Mambo"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kdevkr.github.io/images/posts/data-go-openapi/01.png"><link rel="canonical" href="https://kdevkr.github.io/data-go-openapi/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/data-go-openapi/","path":"data-go-openapi/","title":"공공데이터포털 오픈 API는 웹 개발자를 괴롭혀 (Feat. XML)"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>공공데이터포털 오픈 API는 웹 개발자를 괴롭혀 (Feat. XML) | Mambo</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V8LF04VMBF"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned 🔥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">124</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">124</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">198</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail → mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/data-go-openapi/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="공공데이터포털 오픈 API는 웹 개발자를 괴롭혀 (Feat. XML) | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">공공데이터포털 오픈 API는 웹 개발자를 괴롭혀 (Feat. XML)</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2023-05-29 00:00:00" itemprop="dateCreated datePublished" datetime="2023-05-29T00:00:00+09:00">2023-05-29</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>공공데이터포털의 오픈 API는 많은 웹 서비스나 시스템에서 활용할 수 있는 데이터를 제공하고 있어서 웹 개발자들에게 필수적으로 연동을 요구하는 인터페이스이다. 많은 기업에서 오픈 API를 활용해야하기 때문에 수 많은 웹 개발자가 오픈 API에 대한 연동 오류 때문에 힘들어했다. 지금은 인증키 문제를 해결하고자 URL 인코딩된 키와 원본을 구별해서 제공하기 때문에 OpenAPI 활용 자체는 어려움이 없다고 생각이 된다. 만약, 스프링 프레임워크를 사용하고 있는 개발자라면 인코딩되지 않은 인증키(Decoding)을 복사하여 사용하면 된다.</p><p><img data-src="/images/posts/data-go-openapi/01.png"></p><p>하지만, 공공데이터포털의 오픈 API가 웹 개발자들을 괴롭히는 문제는 생각보다 많은데 함께 알아보도록 하자.</p><h4 id="간헐적-SERVICE-KEY-IS-NOT-REGISTERED-ERROR-오류"><a href="#간헐적-SERVICE-KEY-IS-NOT-REGISTERED-ERROR-오류" class="headerlink" title="간헐적 SERVICE_KEY_IS_NOT_REGISTERED_ERROR 오류"></a>간헐적 SERVICE_KEY_IS_NOT_REGISTERED_ERROR 오류</h4><p><img data-src="/images/posts/data-go-openapi/02.png"></p><p>공공데이터 포털의 자주하는 질문 중 서비스 오류에 대한 내용으로 <code>SERVICE_KEY_IS_NOT_REGISTERED_ERROR</code> 오류에 대한 원인을 간단하게 소개하고 있다. 잘못된 인증키를 넣어서 호출하였거나 인증 기관 서버로 동기화되지 않아서 발생한다고 되어있다. 해당 인증키를 사용하여 정상적으로 OpenAPI를 호출할 수 있었음에도 불구하고 몇 초 만에 인증키가 올바르지 않다는 오류가 간헐적으로 발생하기도 한다.</p><h4 id="통일되지-않은-오픈-API-참고-문서"><a href="#통일되지-않은-오픈-API-참고-문서" class="headerlink" title="통일되지 않은 오픈 API 참고 문서"></a>통일되지 않은 오픈 API 참고 문서</h4><p>오픈 API에 대한 참고 문서의 형식을 강제하지 않는 결과로 많은 <code>기업에서 사용하지 않는 확장자인 .hwp로 작성되어 공유</code>되는 경우가 많다. 그로 인해 웹 개발자들은 한글 문서를 사용하지 않음에도 불구하고 한글 문서를 열 수 있는 뷰어를 설치해야만 한다. 공공데이터포털의 오픈 API 중에는 <code>Swagger UI 기반의 OpenAPI 명세서를 제공</code>하기도 한다.</p><p><img data-src="/images/posts/data-go-openapi/03.png"></p><h4 id="해외-아이피-요청-제한"><a href="#해외-아이피-요청-제한" class="headerlink" title="해외 아이피 요청 제한"></a>해외 아이피 요청 제한</h4><p>공공데이터포털에서 제공하는 모든 오픈 API에 해당하는 문제는 아니지만 오픈 API 중 보안 상 국내 아이피 대역이 아닌 해외 아이피에서 호출하는 것이 웹 방화벽으로 막혀져있는 경우도 있다. 대표적으로 <a target="_blank" rel="noopener" href="https://www.data.go.kr/data/15056640/openapi.do">한국전력거래소에서 제공하는 오픈 API</a>로 참고 문서에 나와있지 않은 내용이지만 공공데이터포털의 게이트웨이 방식이 아닌 KPX에서 관리하는 서버로 요청되기 때문에 AWS와 같은 클라우드 환경에서 호출할 수 없고 <code>국내 서비스로 우회</code>하거나 사용중인 아이피 대역을 전달하여 <code>방화벽 해제 신청</code>을 해야한다.</p><h4 id="게이트웨이-방식-오픈-API"><a href="#게이트웨이-방식-오픈-API" class="headerlink" title="게이트웨이 방식 오픈 API"></a>게이트웨이 방식 오픈 API</h4><p><img data-src="/images/posts/data-go-openapi/04.png"></p><p>공공데이터포털의 게이트방식 오픈 API는 엔드포인트가 <code>apis.data.go.kr</code>와 같이 구성되며 위에서 확인할 수 있듯이 게이트웨이에서 문제가 발생하면 오픈 API가 JSON 타입의 응답 결과를 지원하더라도 <code>XML로만 출력된다는 제약사항</code>이 있다. 이러한 제약사항을 고려하지 않고 응답결과를 JSON으로 오해하고 코드를 작성한다면 아래와 같이 오류가 발생할 수 있다. 심지어 HTTP 상태 코드가 200으로 응답되지만 <code>응답 결과에 오류에 대한 내용으로 제공한다는 점</code>으로 인해 HTTP 상태 코드를 통해서 1차적으로 구분할 수 없고 응답 바디를 무조건 확인해서 정상적인 호출인지 아닌지를 구별해야한다.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Unexpected</span> exception thrown<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">net<span class="token punctuation">.</span>minidev<span class="token punctuation">.</span>json<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span>ParseException</span><span class="token operator">:</span> <span class="token class-name">Unexpected</span> token <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OpenAPI_ServiceResponse</span><span class="token punctuation">></span></span>
	<span class="token generics"><span class="token punctuation">&lt;</span>cmmMsgHeader<span class="token punctuation">></span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>errMsg<span class="token punctuation">></span></span><span class="token constant">SERVICE</span> <span class="token constant">ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>errMsg<span class="token operator">></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>returnAuthMsg<span class="token punctuation">></span></span><span class="token constant">SERVICE_KEY_IS_NOT_REGISTERED_ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>returnAuthMsg<span class="token operator">></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>returnReasonCode<span class="token punctuation">></span></span><span class="token number">30</span><span class="token operator">&lt;</span><span class="token operator">/</span>returnReasonCode<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>cmmMsgHeader<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">OpenAPI_ServiceResponse</span><span class="token operator">></span> at position <span class="token number">229.</span></code></pre><p>따라서, 공공데이터포털에 대한 연동을 하는 경우 웹 개발자는 아래에 대해 고려 또는 대응을 해야한다.</p><ol><li>게이트웨이 방식 API 확인</li><li>API 호출 제한 제약 확인</li><li>JSON 과 XML 처리 모두 고려</li><li>간헐적 인증키 오류 케이스 대응 (API 점검 포함)</li></ol></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/don't-change-server-timezone/" rel="prev" title="서버 타임존을 바꾸지 말자 (Feat. 글로벌)"><i class="fa fa-chevron-left"></i> 서버 타임존을 바꾸지 말자 (Feat. 글로벌)</a></div><div class="post-nav-item"><a href="/jenkins-agent/" rel="next" title="젠킨스 에이전트 (Feat. 빌드 환경)">젠킨스 에이전트 (Feat. 빌드 환경) <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments giscus-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌗",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"kdevkr/kdevkr.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxNTQxNjA4OTA=","category":"Announcements","category_id":"DIC_kwDOCTBO-s4CYmQM","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"ko","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script></body></html>