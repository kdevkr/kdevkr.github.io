<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta property="og:type" content="website"><meta property="og:title" content="Mambo"><meta property="og:url" content="https://kdevkr.github.io/page/80/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:locale" content="en_US"><meta property="article:author" content="Mambo"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://kdevkr.github.io/page/80/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/80/index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Mambo</title><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":true}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Mambo</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned ğŸ”¥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">81</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">81</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">133</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail â†’ mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/understanding-spring-security/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/understanding-spring-security/" class="post-title-link" itemprop="url">ì´ˆë³´ê°€ ì´í•´í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2017-03-29 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-29T00:00:00+09:00">2017-03-29</time></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>ë³¸ ê¸€ì€ OKKYì— ê³µìœ ëœ <a target="_blank" rel="noopener" href="https://okky.kr/article/382738">ì´ˆë³´ê°€ ì´í•´í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a> ì…ë‹ˆë‹¤.</p></blockquote><h2 id="ë“¤ì–´ê°€ë©°"><a href="#ë“¤ì–´ê°€ë©°" class="headerlink" title="ë“¤ì–´ê°€ë©°"></a>ë“¤ì–´ê°€ë©°</h2><h2 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ë€-ë¬´ì—‡ì¸ê°€"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ë€-ë¬´ì—‡ì¸ê°€" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€ ë¬´ì—‡ì¸ê°€?"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€ ë¬´ì—‡ì¸ê°€?</h2><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ìë°” EE ê¸°ë°˜ì˜ ì—”í„°í”„ë¼ì´ì¦ˆ ì†Œí”„íŠ¸ì›¨ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ í¬ê´„ì ì¸ ë³´ì•ˆ ì„œë¹„ìŠ¤ë“¤ì„ ì œê³µí•˜ê³  ì˜¤í”ˆ í”Œë«í¼ì´ë©´ì„œ ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ìë‘(?)í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p>í•˜ì§€ë§Œ, ì‹ ì… ê°œë°œìë“¤ ìˆ˜ì¤€ì—ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ê°™ì€ ë³´ì•ˆ ê¸°ìˆ ì„ ì´í•´í•˜ê¸°ë€ ì°¸ í˜ë“  ê³¼ì •ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.</p><blockquote><p>ì €ë§Œ ì´í•´í•˜ê¸° í˜ë“¤ ìˆ˜ ìˆì–´ìš” ã… ã… </p></blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆì„ êµ¬ì„±í•˜ëŠ” ë‘ê°€ì§€ ì˜ì—­ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ ì¸ì¦(Authentication)ê³¼ ê¶Œí•œ(Authorization)ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë‘ ì˜ì—­ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ëª©í‘œì´ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì´í•´í•˜ê³  ë„˜ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. <code>ì¸ì¦</code>ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì£¼ì²´(ì‚¬ìš©ì)ë¼ê³  ì£¼ì¥í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•˜ë©° ê¶Œí•œì€ ì¸ì¦ëœ ì£¼ì²´ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í—ˆë½ë˜ìˆëŠ”ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê¶Œí•œ ìŠ¹ì¸ì´ í•„ìš”í•œ ë¶€ë¶„ìœ¼ë¡œ ì ‘ê·¼í•˜ë ¤ë©´ ì¸ì¦ ê³¼ì •ì„ í†µí•´ ì£¼ì²´ê°€ ì¦ëª… ë˜ì–´ì•¼ë§Œ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>ì•ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ìë‘í•œë‹¤ê³  í–ˆëŠ”ë°ìš”. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì´ì™€ ê´€ë ¨í•´ì„œ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ê³¼ ê´€ê³„ì—†ì´ ìƒë‹¹íˆ ê¹Šì€ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¶Œí•œ ë¶€ì—¬ì—ë„ ë‘ê°€ì§€ ì˜ì—­ì´ ì¡´ì¬í•˜ëŠ”ë° ì›¹ ìš”ì²­ ê¶Œí•œ, ë©”ì†Œë“œ í˜¸ì¶œ ë° ë„ë©”ì¸ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬ì…ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì´ë ‡ê²Œ ëª¨ë“  ì¤‘ìš”í•œ ì˜ì—­ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p><a target="_blank" rel="noopener" href="http://zgundam.tistory.com/43">ì œíƒ€ê±´ë‹´ë‹˜ì˜ ê¸€</a>ì—ì„œëŠ” ë¡œê·¸ì¸ í™”ë©´ì„ í†µí•´ì„œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ ë¡œê·¸ì¸í•˜ëŠ” ê³¼ì •ì„ ì¸ì¦ì´ë¼ê³  ì„œìˆ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê´€ë ¨ëœ ìš©ì–´ê°€ ë°”ë¡œ HTTP ê¸°ë³¸ ì¸ì¦(HTTP Basic Authentication) ë§¤ì»¤ë‹ˆì¦˜ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ HTTP ê¸°ë³¸ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ ë°”ë¡œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ì„¤ëª…í•˜ëŠ” í¼ ê¸°ë°˜ ë¡œê·¸ì¸ì´ ë©ë‹ˆë‹¤.</p><blockquote><p>ì•„ ë¬¼ë¡ , HTTP ê¸°ë³¸ ì¸ì¦ &#x3D;&#x3D; í¼ ê¸°ë°˜ ë¡œê·¸ì¸ì´ë¼ëŠ” ë§ì€ ì•„ë‹™ë‹ˆë‹¤. í¼ ì–‘ì‹ì„ í†µí•œ ë¡œê·¸ì¸ë„ usernameê³¼ passwordë¥¼ í†µí•´ ì¸ì¦í•˜ê¸° ë•Œë¬¸ì— HTTP ê¸°ë³¸ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p></blockquote><p>ì‹¤ì œë¡œ <a target="_blank" rel="noopener" href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#basic">ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œì˜ Basic and Digest Authentication</a>ì—ì„œëŠ” ë‹¤ìŒì„ ì–¸ê¸‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><p>Basic authentication is often used with stateless clients which pass their credentials on each request. Itâ€™s quite common to use it in combination with form-based authentication where an application is used through both a browser-based user interface and as a web-service.</p><blockquote><p>ì¸ì¦ê³¼ ê¶Œí•œì´ë¼ëŠ” ê°œë…ì„ ì´í•´í•˜ì…¨ë‹¤ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•´ì„œ ë°°ì›Œë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì‹œì‘í•˜ê¸°"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì‹œì‘í•˜ê¸°" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‹œì‘í•˜ê¸°"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‹œì‘í•˜ê¸°</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë©”ì´ë¸ì´ë‚˜ ê·¸ë˜ë“¤ê°™ì€ ë¹Œë“œë„êµ¬ë¥¼ í†µí•´ ì‰½ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h4 id="with-Maven"><a href="#with-Maven" class="headerlink" title="with Maven"></a>with Maven</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- ... other dependency elements ... --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-security-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-security-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><h4 id="with-Gradle"><a href="#with-Gradle" class="headerlink" title="with Gradle"></a>with Gradle</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript">dependencies <span class="token punctuation">&#123;</span>
	compile <span class="token string">'org.springframework.security:spring-security-web:4.2.2.RELEASE'</span>
	compile <span class="token string">'org.springframework.security:spring-security-config:4.2.2.RELEASE'</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì €ëŠ” ë©”ì´ë¸ ëŒ€ì‹  ê·¸ë˜ë“¤ì„ ì‚¬ìš©í•´ë´¤ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="Java-Configuration"><a href="#Java-Configuration" class="headerlink" title="Java Configuration"></a>Java Configuration</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ìë°” ê¸°ë°˜ì˜ ì„¤ì •ìœ¼ë¡œ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 3.1ì—ì„œë¶€í„° ì–´ë…¸í…Œì´ì…˜ì„ í†µí•œ ìë°” ì„¤ì •ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.2ë¶€í„°ëŠ” XMLë¡œ ì„¤ì •í•˜ì§€ ì•Šê³ ë„ ê°„ë‹¨í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ì›ë˜ XML ê¸°ë°˜ì˜ ì„¤ì •ì—ì„œëŠ” web.xmlì— org.springframework.web.filter.DelegatingFilterProxyë¼ëŠ” springSecurityFilterChainì„ ë“±ë¡í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤ë§Œ, ìë°” ê¸°ë°˜ì˜ ì„¤ì •ì—ì„œëŠ” WebSecurityConfigurerAdapterë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ì— @EnableWebSecurity ì–´ë…¸í…Œì´ì…˜ì„ ëª…ì‹œí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ springSecurityFilterChainê°€ ìë™ìœ¼ë¡œ í¬í•¨ë˜ì–´ì§‘ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ê·¸ë¦¬ê³  í¬í•¨ëœ springSecurityFilterChainì„ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” AbstractSecurityWebApplicationInitializerë¥¼ ìƒì†ë°›ì€ WebApplicationInitializerë¥¼ ë§Œë“¤ì–´ë‘ë©´ ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityWebApplicationInitializer</span>
	<span class="token keyword">extends</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span> <span class="token punctuation">&#123;</span>

<span class="token punctuation">&#125;</span></code></pre><blockquote><p>XMLì„ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ìë°” ê¸°ë°˜ì˜ êµ¬ì„±ì´ ë”ìš± ì‰½ìŠµë‹ˆë‹¤.</p></blockquote><p>ê·¸ ë‹¤ìŒì—ëŠ” ë³´í†µ ìŠ¤í”„ë§ MVCë¥¼ ì´ìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— ApplicationIniticalizerì— WebSecurityConfigurerAdapterë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ë¥¼ getRootConfigClasses() ë©”ì†Œë“œì— ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì ìš©ì€ ëì…ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationInitializer</span> <span class="token keyword">extends</span>
		<span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token class-name">WebSecurityConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token comment">// ... other overrides ...</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì´ë¡œì¨ ìœ ì¶” í•´ë³¼ë•Œ, springSecurityFilterChainì€ ë£¨íŠ¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë“±ë¡ë˜ì–´ì•¼í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ê° í•„í„°ì— ëŒ€í•œ ìš°ì„ ìˆœìœ„ì— ëŒ€í•´ì„œë„ ì¶”ê°€ì ìœ¼ë¡œ ì•Œ í•„ìš”ì„±ì´ ìƒê¸°ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</p></blockquote><h4 id="HttpSecurity"><a href="#HttpSecurity" class="headerlink" title="HttpSecurity"></a>HttpSecurity</h4><p>ê·¸ë¦¬ê³ ë‚˜ì„œ configure(HttpSecurity http) ë©”ì†Œë“œë¥¼ í†µí•´ì„œ ìš°ë¦¬ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì•„ì§ê¹Œì§€ëŠ” ì–´ë–»ê²Œ êµ¬ì„±í•´ì•¼í• ì§€ ë§‰ë§‰í•˜ê¸°ë§Œ í•©ë‹ˆë‹¤. ê´€ë ¨ëœ ì •ë³´ë¥¼ ì¢€ë” ì°¾ì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	http<span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/users/&#123;userId&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"@authenticationCheckHandler.checkUserId(authentication,#userId)"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/admin/db/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"hasRole('ADMIN_MASTER') or hasRole('ADMIN') and hasRole('DBA')"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/register/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"ANONYMOUS"</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ë­ ì‚¬ì‹¤ìƒ ë³„ê²Œ ì—†ìŠµë‹ˆë‹¤. HttpSecurityì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì„¤ì •ì€ ì—¬ê¸°ë¥¼ í†µí•˜ê²Œ ë˜ë‹ˆê¹Œìš” .authorizeRequests()ë¥¼ í†µí•´ ìš”ì²­ì— ëŒ€í•œ ê¶Œí•œì„ ì§€ì •í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ë³¸ì ì¸ í˜•íƒœì˜ <code>.anyRequest().authenticated()</code>ë¼ëŠ” ì˜ë¯¸ëŠ” ì–´ë– í•œ ìš”ì²­ì´ë“ ì§€ ì¸ì¦ë˜ì–´ì•¼í•œë‹¤ëŠ” ê²ƒì´ê²Ÿì£ ? .formLogin()ì€ í¼ì„ í†µí•œ ë¡œê·¸ì¸ì„ ì´ìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë©°, .loginPage(â€œ&#x2F;loginâ€)ì„ í†µí•´ ë¡œê·¸ì¸ í˜ì´ì§€ëŠ” &#x2F;login ê²½ë¡œë¡œ ì œê³µí•˜ë©° &#x2F;loginì˜ POST ìš”ì²­ì´ ë°”ë¡œ ë¡œê·¸ì¸ ì²˜ë¦¬ ê³¼ì •ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>í™•ì¥ëœ í˜•íƒœì—ì„œì˜ .antMatchers().hasRole() ë˜ëŠ” .antMatchers().access()ëŠ” í•´ë‹¹ ê²½ë¡œì— ëŒ€í•´ì„œ ì–´ë– í•œ ê¶Œí•œì„ ê°€ì ¸ì•¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ê°€ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒì€ antMatchers() ë‹¤ìŒìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆëŠ” í•­ëª©ë“¤ì…ë‹ˆë‹¤.</p><ul><li>anonymous()<br>ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>authenticated()<br>ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>fullyAuthenticated()<br>ì™„ì „íˆ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(?)</li><li>hasRole() or hasAnyRole()<br>íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>hasAuthority() or hasAnyAuthority()<br>íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>hasIpAddress()<br>íŠ¹ì • ì•„ì´í”¼ ì£¼ì†Œë¥¼ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>access()<br>SpEL í‘œí˜„ì‹ì— ì˜í•œ ê²°ê³¼ì— ë”°ë¼ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li><li>not()<br>ì ‘ê·¼ ì œí•œ ê¸°ëŠ¥ì„ í•´ì œí•©ë‹ˆë‹¤.</li><li>permitAll() or denyAll()<br>ì ‘ê·¼ì„ ì „ë¶€ í—ˆìš©í•˜ê±°ë‚˜ ì œí•œí•©ë‹ˆë‹¤.</li><li>rememberMe()<br>ë¦¬ë©¤ë²„ ê¸°ëŠ¥ì„ í†µí•´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li></ul><blockquote><p>Roleì€ ì—­í• ì´ê³  AuthorityëŠ” ê¶Œí•œì´ì§€ë§Œ ì‚¬ì‹¤ì€ í‘œí˜„ì˜ ì°¨ì´ì…ë‹ˆë‹¤. Roleì€ â€œADMINâ€ìœ¼ë¡œ í‘œí˜„í•˜ê³  AuthorityëŠ” â€œROLE_ADMINâ€ìœ¼ë¡œ í‘œê¸°í•˜ëŠ” ê²ƒ ë¿ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ hasRole()ì— ROLE_ADMINìœ¼ë¡œ í‘œê¸°í•˜ë©´ ROLEì„ ì§€ìš°ë¼ëŠ” ì—ëŸ¬ë¥¼ ë³¼ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p></blockquote><blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜í•œ SpEL í‘œí˜„ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;sec:authentication /&gt; ì´ë ‡ê²Œ ë§ì…ë‹ˆë‹¤.</p></blockquote><h4 id="AuthenticationManagerBuilder"><a href="#AuthenticationManagerBuilder" class="headerlink" title="AuthenticationManagerBuilder"></a>AuthenticationManagerBuilder</h4><p>AuthenticationManagerBuilderë¥¼ í†µí•´ ì¸ì¦ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ì•Œë ¤ì£¼ëŠ” ë°©ì‹ì¸ë° AuthenticationManagerBuilderë¥¼ ë©”ì†Œë“œë¥¼ í†µí•´ ì£¼ì…ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. WebSecurityConfigurerAdapterì˜ configure(AuthenticationManagerBuilder auth)ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì°¨ì´ëŠ” ì—†ìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureGlobal</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"scott"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"tiger"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"ROLE_USER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// TODO Auto-generated method stub</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"ADMIN"</span><span class="token punctuation">,</span> <span class="token string">"DBA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"scott"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"tiger"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">,</span> <span class="token string">"SETTING"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ì›í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì™€ ìƒ˜í”Œì„ ë§Œë“  ê°œë°œìê°€ ì™œ ì²«ë²ˆì§¸ ë°©ì‹ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ”ì§€ì— ëŒ€í•œ ì˜ë¯¸ë¥¼ ìƒê°í•´ë´…ì‹œë‹¤.</p><blockquote><p>ì•„ì‹œëŠ” ë¶„ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì†ìœ¼ë¡œ-ë“¤ì–´ê°€ê¸°"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì†ìœ¼ë¡œ-ë“¤ì–´ê°€ê¸°" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì†ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì†ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°</h3><p>ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ì„¤ì •ë“¤ì€ ì•„ì£¼ ê¸°ë³¸ì ì¸ í˜•íƒœë“¤ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ìš°ë¦¬ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•œ ë’¤ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì œê³µí•˜ëŠ” ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.</p><h4 id="Method-Security"><a href="#Method-Security" class="headerlink" title="Method Security"></a>Method Security</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 2.0 ì—ì„œë¶€í„° ì„œë¹„ìŠ¤ ê³„ì¸µì˜ ë©”ì†Œë“œì— ë³´ì•ˆì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. @Secured ì–´ë…¸í…Œì´ì…˜ ë¿ë§Œ ì•„ë‹ˆë¼ JSR-250 ì–´ë…¸í…Œì´ì…˜ë„ ì§€ì›í•˜ë„ë¡ ì œê³µë©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.0ì—ì„œëŠ” í‘œí˜„ ê¸°ë°˜ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p><p>ìš°ë¦¬ëŠ” Configuration í´ë˜ìŠ¤ì— @EnableGlobalMethodSecurityë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ë³´ì•ˆì„ í™œì„±í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ @Secured ì–´ë…¸í…Œì´ì…˜ì„ í™œì„±í™”ì‹œí‚¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>securedEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token punctuation">&#123;</span>
<span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span></code></pre><p>ê·¸ë¦¬ê³ ë‚˜ì„œ í´ë˜ìŠ¤ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì†Œë“œì— @Secured ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ ê·¸ì— ë”°ë¥¸ í•´ë‹¹ ë©”ì†Œë“œì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ê°€ ì œí•œë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BankService</span> <span class="token punctuation">&#123;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"IS_AUTHENTICATED_ANONYMOUSLY"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">readAccount</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"IS_AUTHENTICATED_ANONYMOUSLY"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">findAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"ROLE_TELLER"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ì—­í•  ë‹¨ìœ„ë¡œ ì œì•½ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.0ë¶€í„° ì§€ì›í•˜ëŠ” í‘œí˜„ì‹ ê¸°ë°˜ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>prePostEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodSecurityConfig</span> <span class="token punctuation">&#123;</span>
<span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BankService</span> <span class="token punctuation">&#123;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"isAnonymous()"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">readAccount</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"isAnonymous()"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">findAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"hasAuthority('ROLE_TELLER')"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h4 id="Remember-Me"><a href="#Remember-Me" class="headerlink" title="Remember-Me"></a>Remember-Me</h4><p>ë¦¬ë©¤ë²„-ë¯¸ ê¸°ëŠ¥ì€ ë„ëŒ€ì²´ ë¬´ì—‡ì¼ê¹Œìš”? êµ¬ê¸€ì— what is remember me ë¼ëŠ” í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p><ul><li><a target="_blank" rel="noopener" href="https://www.formsite.com/faq/general/What-does-Remember-Me-mean-on-the-Login-page.html">What-does-Remember-Me-mean-on-the-Login-page</a></li><li><a target="_blank" rel="noopener" href="http://help.thunderbird.edu/portal-login/remember-me">What is â€œRemember Meâ€ ?</a></li></ul><p>ë‹¨ìˆœíˆ ì•„ì´ë””ë¥¼ ê¸°ì–µí•´ë†“ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.</p><p>Do NOT use â€œRemember Meâ€ on any public computer, on campus, in Internet cafeâ€™s, or anywhere else where you cannot control access!</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	http<span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rememberMeParameter</span><span class="token punctuation">(</span><span class="token string">"remember-me"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span>REMEMBER_ME_KEY<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rememberMeServices</span><span class="token punctuation">(</span><span class="token function">persistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PersistentTokenBasedRememberMeServices</span> <span class="token function">persistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">PersistentTokenBasedRememberMeServices</span> persistentTokenBasedRememberMeServices <span class="token operator">=</span>
			<span class="token keyword">new</span> <span class="token class-name">PersistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span>REMEMBER_ME_KEY<span class="token punctuation">,</span> userDetailsService<span class="token punctuation">,</span> <span class="token function">persistentTokenRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> persistentTokenBasedRememberMeServices<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PersistentTokenRepository</span> <span class="token function">persistentTokenRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">TokenRepositoryImpl</span> tokenRepositoryImpl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenRepositoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tokenRepositoryImpl<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ì €ëŠ” ì˜ì†ì„± ê¸°ë°˜ì˜ ë¦¬ë©¤ë²„-ë¯¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë•Œ, ë¦¬ë©¤ë²„-ë¯¸ í† í°ì„ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ TokenRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼í•˜ëŠ”ë°ìš”. ì¼ì¢…ì˜ ì„œë¹„ìŠ¤ ê°ì²´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenRepositoryImpl</span>  <span class="token keyword">implements</span> <span class="token class-name">PersistentTokenRepository</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">TokenRepository</span> tokenRepository<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createNewToken</span><span class="token punctuation">(</span><span class="token class-name">PersistentRememberMeToken</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">Token</span> newToken <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Token</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getTokenValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setLast_used</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setSeries</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getSeries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>newToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> series<span class="token punctuation">,</span> <span class="token class-name">String</span> tokenValue<span class="token punctuation">,</span> <span class="token class-name">Date</span> lastUsed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>

		<span class="token class-name">Token</span> updateToken <span class="token operator">=</span> tokenRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setLast_used</span><span class="token punctuation">(</span>lastUsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setSeries</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>updateToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">PersistentRememberMeToken</span> <span class="token function">getTokenForSeries</span><span class="token punctuation">(</span><span class="token class-name">String</span> series<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">Token</span> token <span class="token operator">=</span> tokenRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">PersistentRememberMeToken</span> persistentRememberMeToken <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersistentRememberMeToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> series<span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">getLast_used</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> persistentRememberMeToken<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeUserTokens</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">deleteByEmail</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><p><code>ë³¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ Emailì€ ìœ ë‹ˆí¬í•œ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.</code></p><h4 id="Password-Encoding"><a href="#Password-Encoding" class="headerlink" title="Password Encoding"></a>Password Encoding</h4><p>AuthenticationManagerBuilder.userDetailsService().passwordEncoder()ë¥¼ í†µí•´ íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”ì— ì‚¬ìš©ë  PasswordEncoder êµ¬í˜„ì²´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PasswordEncoder ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PasswordEncoder</span> <span class="token punctuation">&#123;</span>

	<span class="token comment">/**
	 * Encode the raw password. Generally, a good encoding algorithm applies a SHA-1 or
	 * greater hash combined with an 8-byte or greater randomly generated salt.
	 */</span>
	<span class="token class-name">String</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> rawPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Verify the encoded password obtained from storage matches the submitted raw
	 * password after it too is encoded. Returns true if the passwords match, false if
	 * they do not. The stored password itself is never decoded.
	 *
	 * @param rawPassword the raw password to encode and match
	 * @param encodedPassword the encoded password from storage to compare with
	 * @return true if the raw password, after encoding, matches the encoded password from
	 * storage
	 */</span>
	<span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> rawPassword<span class="token punctuation">,</span> <span class="token class-name">String</span> encodedPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ë‹¨ìˆœíˆ ì¸ì½”ë”©í•˜ëŠ” í•¨ìˆ˜ì™€ í‰ë¬¸ìœ¼ë¡œ ì œê³µë˜ëŠ” íŒ¨ìŠ¤ì›Œë“œì™€ ì¸ì½”ë”©ë˜ì–´ìˆëŠ” íŒ¨ìŠ¤ì›Œë“œ(ì˜ˆë¥¼ë“¤ì–´, ë°ì´í„°ë² ì´ìŠ¤ì— ì¸ì½”ë”©ë˜ì–´ ì €ì¥ë˜ì–´ ìˆëŠ” íŒ¨ìŠ¤ì›Œë“œ)ë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><p>ì €ëŠ” PasswordEncoder êµ¬í˜„ì²´ì¸ BCryptPasswordEncoderë¥¼ ì§€ì •í–ˆìŠµë‹ˆë‹¤. ë‹¹ì—°íˆ ì§ì ‘ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì ìš©í•´ë„ ë©ë‹ˆë‹¤! (ì•„ë¬´ë˜ë„ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ê²Ÿì£ ?)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// TODO Auto-generated method stub</span>
	auth<span class="token punctuation">.</span><span class="token function">userDetailsService</span><span class="token punctuation">(</span>userDetailsService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>PasswordEncoderë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ë‘ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ëœ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ì¥ëœ íŒ¨ìŠ¤ì›Œë“œëŠ” PasswordEncoderì— ì˜í•´ ì•”í˜¸í™”ëœ í‰ë¬¸ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/users/&#123;userId&#125;"</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"#updateUser.email == authentication.name"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@ModelAttribute</span> <span class="token annotation punctuation">@Valid</span> <span class="token class-name">UserDTO<span class="token punctuation">.</span>Update</span> updateUser<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">User</span> currentUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>passwordEncoder<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>updateUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> currentUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"Not password equals..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">//...</span>
<span class="token punctuation">&#125;</span></code></pre><h4 id="WebSecurity-Ignoring"><a href="#WebSecurity-Ignoring" class="headerlink" title="WebSecurity Ignoring"></a>WebSecurity Ignoring</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì™€ëŠ” ë‹¬ë¦¬ ë¦¬ì†ŒìŠ¤ì™€ ê´€ë ¨í•´ì„œëŠ” <code>WebSecurity.ignoring()</code>ë¥¼ ì´ìš©í•´ì„œ ë³´ì•ˆì´ ì ìš©ë˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° API ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° ë ˆí¼ëŸ°ìŠ¤ì— ì„¤ëª…ì´ ì—†ë‹¤ëŠ” ê²ƒì´ ì¢€ ì•„ì‰¬ìš´ ë¶€ë¶„ì…ë‹ˆë‹¤.</p><p><code>ìŒ... permitAllê³¼ ignoringì˜ ì°¨ì´ê°€ ìˆëŠ”ê°€ë¥¼ ì•„ì‹œëŠ”ë¶„ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤ ã… ã… </code></p><h4 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë©”ì‹œì§€ì— ëŒ€í•œ í˜„ì§€í™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ë©”ì‹œì§€ ì†ŒìŠ¤ ê´€ë ¨ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì€ spring-security-core.jarì— í¬í•¨ ë˜ì–´ì ¸ìˆìŠµë‹ˆë‹¤.</p><p>ìš°ë¦¬ëŠ” ë©”ì‹œì§€ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì„ ë©”ì‹œì§€ì†ŒìŠ¤ë¡œ ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">MessageSource</span> <span class="token function">messageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">ResourceBundleMessageSource</span> messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		messageSource<span class="token punctuation">.</span><span class="token function">addBasenames</span><span class="token punctuation">(</span><span class="token string">"security/messages"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		messageSource<span class="token punctuation">.</span><span class="token function">setDefaultEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">LocaleChangeInterceptor</span> <span class="token function">localeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">LocaleChangeInterceptor</span> localeChangeInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocaleChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		localeChangeInterceptor<span class="token punctuation">.</span><span class="token function">setParamName</span><span class="token punctuation">(</span><span class="token string">"lang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> localeChangeInterceptor<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">LocaleResolver</span> <span class="token function">localeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">SessionLocaleResolver</span> localeResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		localeResolver<span class="token punctuation">.</span><span class="token function">setDefaultLocale</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span>KOREAN<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> localeResolver<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token function">localeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>ë©”ì‹œì§€ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì€ src&#x2F;main&#x2F;resource&#x2F;security í´ë”ì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="AuthenticationSuccessHandler-amp-AuthenticationFailureHandler"><a href="#AuthenticationSuccessHandler-amp-AuthenticationFailureHandler" class="headerlink" title="AuthenticationSuccessHandler &amp; AuthenticationFailureHandler"></a>AuthenticationSuccessHandler &amp; AuthenticationFailureHandler</h4><p>OKKYì˜ ì§ˆë¬¸ê²Œì‹œíŒì—ì„œ ë¡œê·¸ì¸ ì‹¤íŒ¨ë¥¼ ì–´ë–»ê²Œ ì²´í¬í•˜ëŠ”ê°€ì— ëŒ€í•´ì„œ ì§ˆë¬¸í•˜ëŠ” ê¸€ì„ ë³´ì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” AuthenticationFailureHandler êµ¬í˜„ì²´ë¥¼ ìƒì†ë°›ì•„ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationSuccessHandlerImpl</span> <span class="token keyword">extends</span> <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span>  <span class="token punctuation">&#123;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationSuccessHandlerImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationSuccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
			<span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
		logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Login Success... - &#123;&#125;"</span><span class="token punctuation">,</span> authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/?login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre><p>AuthenticationSuccessHandler êµ¬í˜„ì²´ì—ì„œëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µí–ˆì„ë•Œ í˜¸ì¶œ(ì¸ì¦ ê°ì²´ê°€ ìƒì„±ë˜ì–´ì§„ í›„)ë˜ê¸° ë•Œë¬¸ì— Authentication ì¸ìŠ¤í„´ìŠ¤ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. authentication.getPrincipal()ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ì € ê°™ì€ ê²½ìš°ì—ëŠ” org.springframework.security.core.userdetails.User ê°€ ì•„ë‹Œ com.kdev.app.security.userdetails.UserDetailsë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationFailureHandlerImpl</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleUrlAuthenticationFailureHandler</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationFailureHandlerImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">AuthenticationFailureHandlerImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDefaultFailureUrl</span><span class="token punctuation">(</span><span class="token string">"/login?error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
			<span class="token class-name">AuthenticationException</span> exception<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
		logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Login Failed... - &#123;&#125;"</span><span class="token punctuation">,</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre><p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ SimpleUrlAuthenticationFailureHandlerì˜ defaultFailureUrlë¥¼ ì§€ì •í•˜ë©´ SPRING_SECURITY_LAST_EXCEPTIONì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ë©´ì„œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤.</p><p>AuthenticationExceptionìœ¼ë¡œ ë¡œê·¸ì¸ ì‹¤íŒ¨ì˜ ì´ìœ ë„ ì²´í¬í•  ìˆ˜ ìˆê²Œ ë˜ì£ </p><h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-í˜ì´ì§€"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-í˜ì´ì§€" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í˜ì´ì§€"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í˜ì´ì§€</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì œê³µí•´ì£¼ëŠ” ê¸°ë³¸ ë¡œê·¸ì¸ í˜ì´ì§€ ëŒ€ì‹ ì— ìš°ë¦¬ë§Œì˜ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p><pre class="language-markup" data-language="markup"><code class="language-markup">&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
&lt;%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ko<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!--
		&lt;meta id="_csrf" name="_csrf" content="$&#123;_csrf.token&#125;" />
		&lt;meta id="_csrf_header" name="_csrf_header" content="$&#123;_csrf.headerName&#125;" />
	 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>csrfMetaTags</span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Spring Security + JPA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>page-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Login Page <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>with Bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container-fluid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		&lt;%-- <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;_csrf.parameterName&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;_csrf.token&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> --%>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>csrfInput</span> <span class="token punctuation">/></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ì´ë©”ì¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Email<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ë¹„ë°€ë²ˆí˜¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Password<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>
		      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remember-me<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span> Remember me
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;not empty SPRING_SECURITY_LAST_EXCEPTION&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;SPRING_SECURITY_LAST_EXCEPTION.message&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
		  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>remove</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SPRING_SECURITY_LAST_EXCEPTION<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>session<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
		  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ë¡œê·¸ì¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>íšŒì›ê°€ì…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--[if lt IE 9]>
   &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js">&lt;/script>
   &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">&lt;/script>
&lt;![endif]--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p><code>SPRING_SECURITY_LAST_EXCEPTION</code>ì˜ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ë‹¨ìˆœíˆ íŒŒë¼ë¯¸í„°ì˜ ì¡´ì¬ì—¬ë¶€ì— ë”°ë¼ì„œ ì¶œë ¥í˜•íƒœë¥¼ ì§€ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ë„ ì°¸ ì•„ì‰½ìŠµë‹ˆë‹¤.</p></blockquote><h3 id="UserDetails-amp-UserDetailsService"><a href="#UserDetails-amp-UserDetailsService" class="headerlink" title="UserDetails &amp; UserDetailsService"></a>UserDetails &amp; UserDetailsService</h3><p>ì•„ ì£„ì†¡í•©ë‹ˆë‹¤. UserDetails ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ì„œ ì„¤ëª…ì„ ì•ˆí–ˆë„¤ìš” ã… ã… </p><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ UserDetails êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” org.springframework.security.core.userdetails.Userë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì´ë¦„ê³¼ íŒ¨ìŠ¤ì›Œë“œ ê·¸ë¦¬ê³  ê¶Œí•œë“¤ì— ëŒ€í•œ í•„ë“œë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì´ë©”ì¼ ì •ë³´ ë˜ëŠ” í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ ë“±ê³¼ ê°™ì€ ë¶€ê°€ì ì¸ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><p>ë”°ë¼ì„œ, UserDetails êµ¬í˜„ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. org.springframework.security.core.userdetails.User ìì²´ë„ UserDetails êµ¬í˜„ì²´ì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìƒì†ë°›ì•„ì„œ êµ¬í˜„í•´ë„ ë©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDetails</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>User</span> <span class="token punctuation">&#123;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4855890427225819382L</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> nickname<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Date</span> createdAt<span class="token punctuation">;</span>


	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">authorities</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>createdAt <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> nickname<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> nickname<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> email<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> createdAt<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token class-name">Date</span> createdAt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>createdAt <span class="token operator">=</span> createdAt<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> <span class="token function">authorities</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>a <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
			authorities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getAuthority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> authorities<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">,</span>
			<span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> nickname<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> username<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">,</span> <span class="token keyword">boolean</span> accountNonExpired<span class="token punctuation">,</span>
			<span class="token keyword">boolean</span> credentialsNonExpired<span class="token punctuation">,</span> <span class="token keyword">boolean</span> accountNonLocked<span class="token punctuation">,</span>
			<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” Authentication.getPrincipal() ë©”ì†Œë“œë¥¼ í†µí•´ ì–»ì€ Principal ê°ì²´ë¥¼ í†µí•´ì„œë„ ë¶€ê°€ì ì¸ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>authentication</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>principal.email<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>org.springframework.security.core.userdetails.UserDetailsService êµ¬í˜„ì²´ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì¸ì¦ ì‹œì— ì‚¬ìš©ë©ë‹ˆë‹¤. UserRepositoryë¥¼ í†µí•´ ì˜ì†ì„±ìœ¼ë¡œ ì €ì¥ëœ ì¸ì¦ì •ë³´ë¥¼ ê²€ìƒ‰í•œ í›„ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë©´ UsernameNotFoundExceptionì„ ë˜ì§€ê³  ìˆë‹¤ë©´ UserDetails ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDetailsService</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetailsService</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>kdev<span class="token punctuation">.</span>app<span class="token punctuation">.</span>security<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetails</span> userDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>kdev<span class="token punctuation">.</span>app<span class="token punctuation">.</span>security<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetails</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> userDetails<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><p>ê·¸ëŸ°ë° ì¢€ ì´ìƒí•˜ë‹¤ê³  ëŠê»´ì§‘ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ íŒ¨ìŠ¤ì›Œë“œ ê²€ì¦ì€ ì–¸ì œí•˜ëŠ”ê²ƒì¼ê¹Œìš”? ë°”ë¡œ AuthenticationProvider êµ¬í˜„ì²´ì—ì„œ ì§„í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. AuthenticationProvider êµ¬í˜„ì²´ì—ì„œëŠ” authenticate() ë©”ì†Œë“œë¥¼ í†µí•´ì„œ Authentication ê°ì²´(UsernamePasswordAuthentication)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì¦‰, ë°˜í™˜í•˜ê¸° ì§ì „ì— íŒ¨ìŠ¤ì›Œë“œë¥¼ ê²€ì¦í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>ìš°ë¦¬ëŠ” AuthenticationProviderë¥¼ ì§ì ‘ì ìœ¼ë¡œ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆê¹Œ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ëª¨ë¥´ê³  ë„˜ì–´ê°ˆ ë»” í–ˆìŠµë‹ˆë‹¤.</p><p><a target="_blank" rel="noopener" href="http://syaku.tistory.com/286">ìƒ¤ì¿ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì»¤ìŠ¤í…€ ë¡œê·¸ì¸</a>ì´ë¼ëŠ” ê¸€ì—ì„œ ì§ì ‘ AuthenticationProviderë¥¼ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>ìš°ë¦¬ê°€ ì•Œì•„ë³¸ ê²ƒ ì´ì™¸ì—ë„ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì´ ë” ì¡´ì¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ì†Œì¼“, RESTful APIë“±ì—ë„ ë³´ì•ˆì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ê³µë¶€í•˜ë©´ì„œ ì•Œê²Œëœ ë¶€ë¶„ì¸ë°, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ì¸-ë©”ëª¨ë¦¬ ê¸°ë°˜ ì¸ì¦ ê°ì²´(inMemoryAuthentication())ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì œê³µë˜ëŠ” UserDetailsì˜ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ User ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— UserDetailsì˜ êµ¬í˜„ì²´ë¥¼ ë§Œë“ ë‹¤ í•˜ë”ë¼ë„ ì˜ë¯¸ê°€ ì—†ê²Œ ë©ë‹ˆë‹¤. ë§Œì•½, ì¸ ë©”ëª¨ë¦¬ ë°©ì‹ê³¼ ì˜ì†ì„± ë°©ì‹ì„ í˜¼ìš©í•´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì—°êµ¬í•´ë³¼ í•„ìš”ê°€ ìˆê² ìŠµë‹ˆë‹¤.</p><p>ë‹¤ìŒì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ë•Œ ì¢‹ì€ í¬ìŠ¤íŠ¸ ë° ë™ì˜ìƒë“¤ì…ë‹ˆë‹¤.</p><ul><li><a target="_blank" rel="noopener" href="http://syaku.tistory.com/278">ìƒ¤ì¿ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì»¤ìŠ¤í…€ ë¡œê·¸ì¸</a></li><li><a target="_blank" rel="noopener" href="http://zgundam.tistory.com/43">ì œíƒ€ê±´ë‹´ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></li><li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=C0BQplG7Epo&list=PLvudjKUrAA6bLu1CvgSPEKLhlIEIAJXjm">ì•„ë¼í•œì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë”°ë¼í•´ë³´ê¸°</a></li><li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=AiDjJzMXWmM">ë°±ê¸°ì„ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></li><li><a target="_blank" rel="noopener" href="http://hamait.tistory.com/325">í•˜ë§ˆë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></li></ul><blockquote><p>ì•„ëŠ”ê²Œ ì—†ìœ¼ë‹ˆ ì‰½ê²Œ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ë¶€ë¶„ì´ ë§ìŠµë‹ˆë‹¤. ë§ì€ ì‹ ì… ê°œë°œìë“¤ì„ ì‘ì›í•©ë‹ˆë‹¤ ^ã…¡^</p></blockquote></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" href="/page/79/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/79/">79</a><span class="page-number current">80</span><a class="page-number" href="/page/81/">81</a><a class="extend next" rel="next" href="/page/81/"><i class="fa fa-angle-right" aria-label="Next page"></i></a></nav></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"ğŸŒ—",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script></body></html>