<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":{"enable":false,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏùÄ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏßÄ ÏïäÍ≥† ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌï¥ ÏßÄÎ¨∏Ïù¥ÎÇò ÏñºÍµ¥ Ïù∏Ïãù Í∑∏Î¶¨Í≥† Î≥¥ÏïàÌÇ§ Îì±ÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú ÎØ∏Î¶¨ Ïù∏Ï¶ù Ï†ïÎ≥¥Î•º Îì±Î°ùÌï¥ÎÜìÍ≥† ÏÇ¨Ïö©ÏûêÏùò Ïù∏Ï¶ù Í∏∞Í∏∞Î•º ÏÇ¨Ïö©Ìï¥ÏÑú Î°úÍ∑∏Ïù∏ÏùÑ ÏàòÌñâÌïòÎèÑÎ°ù Ï†úÍ≥µÌïòÎäî Í±∏ ÎßêÌï©ÎãàÎã§. Ìå®Ïä§ÌÇ§Îäî Î°úÍ∑∏Ïù∏ ÎøêÎßå ÏïÑÎãàÎùº ÏïÑÎßàÏ°¥ Ïõπ ÏÑúÎπÑÏä§ÏôÄ ÍπÉÌóàÎ∏åÏ≤òÎüº 2Ï∞® Ïù∏Ï¶ùÏùÑ ÏúÑÌï¥ÏÑúÎèÑ ÎèÑÏûÖÎê† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥ Í∏ÄÏùÑ ÏûëÏÑ±Ìï¥Î≥¥Îäî Ïù¥Ïú†Îäî"><meta property="og:type" content="article"><meta property="og:title" content="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏"><meta property="og:url" content="https://kdevkr.github.io/passkey-login/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏùÄ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏßÄ ÏïäÍ≥† ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌï¥ ÏßÄÎ¨∏Ïù¥ÎÇò ÏñºÍµ¥ Ïù∏Ïãù Í∑∏Î¶¨Í≥† Î≥¥ÏïàÌÇ§ Îì±ÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú ÎØ∏Î¶¨ Ïù∏Ï¶ù Ï†ïÎ≥¥Î•º Îì±Î°ùÌï¥ÎÜìÍ≥† ÏÇ¨Ïö©ÏûêÏùò Ïù∏Ï¶ù Í∏∞Í∏∞Î•º ÏÇ¨Ïö©Ìï¥ÏÑú Î°úÍ∑∏Ïù∏ÏùÑ ÏàòÌñâÌïòÎèÑÎ°ù Ï†úÍ≥µÌïòÎäî Í±∏ ÎßêÌï©ÎãàÎã§. Ìå®Ïä§ÌÇ§Îäî Î°úÍ∑∏Ïù∏ ÎøêÎßå ÏïÑÎãàÎùº ÏïÑÎßàÏ°¥ Ïõπ ÏÑúÎπÑÏä§ÏôÄ ÍπÉÌóàÎ∏åÏ≤òÎüº 2Ï∞® Ïù∏Ï¶ùÏùÑ ÏúÑÌï¥ÏÑúÎèÑ ÎèÑÏûÖÎê† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥ Í∏ÄÏùÑ ÏûëÏÑ±Ìï¥Î≥¥Îäî Ïù¥Ïú†Îäî"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kdevkr.github.io/images/posts/passkey-login/01.png"><meta property="article:published_time" content="2024-07-14T03:00:00.000Z"><meta property="article:modified_time" content="2024-09-05T15:10:00.482Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="Passkey"><meta property="article:tag" content="WebAuthn"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kdevkr.github.io/images/posts/passkey-login/01.png"><link rel="canonical" href="https://kdevkr.github.io/passkey-login/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/passkey-login/","path":"passkey-login/","title":"Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ | Mambo</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V8LF04VMBF"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned üî•</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">161</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">161</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">251</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail ‚Üí mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/passkey-login/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2024-07-14 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-14T12:00:00+09:00">2024-07-14</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏùÄ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏßÄ ÏïäÍ≥† ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌï¥ ÏßÄÎ¨∏Ïù¥ÎÇò ÏñºÍµ¥ Ïù∏Ïãù Í∑∏Î¶¨Í≥† Î≥¥ÏïàÌÇ§ Îì±ÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú ÎØ∏Î¶¨ Ïù∏Ï¶ù Ï†ïÎ≥¥Î•º Îì±Î°ùÌï¥ÎÜìÍ≥† ÏÇ¨Ïö©ÏûêÏùò Ïù∏Ï¶ù Í∏∞Í∏∞Î•º ÏÇ¨Ïö©Ìï¥ÏÑú Î°úÍ∑∏Ïù∏ÏùÑ ÏàòÌñâÌïòÎèÑÎ°ù Ï†úÍ≥µÌïòÎäî Í±∏ ÎßêÌï©ÎãàÎã§. Ìå®Ïä§ÌÇ§Îäî Î°úÍ∑∏Ïù∏ ÎøêÎßå ÏïÑÎãàÎùº <a target="_blank" rel="noopener" href="https://aws.amazon.com/ko/about-aws/whats-new/2024/06/aws-identity-access-management-passkey-authentication-factor/?nc1=h_ls">ÏïÑÎßàÏ°¥ Ïõπ ÏÑúÎπÑÏä§</a>ÏôÄ <a target="_blank" rel="noopener" href="https://docs.github.com/ko/authentication/authenticating-with-a-passkey/signing-in-with-a-passkey">ÍπÉÌóàÎ∏å</a>Ï≤òÎüº 2Ï∞® Ïù∏Ï¶ùÏùÑ ÏúÑÌï¥ÏÑúÎèÑ ÎèÑÏûÖÎê† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥ Í∏ÄÏùÑ ÏûëÏÑ±Ìï¥Î≥¥Îäî Ïù¥Ïú†Îäî Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏Ïóê ÎåÄÌïú ÌùêÎ¶ÑÏùÄ ÏÉùÍ∞ÅÎ≥¥Îã§ Í∞ÑÎã®ÌïúÎç∞ Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú ÌëúÏ§ÄÏóêÏÑú ÏÇ¨Ïö©ÎêòÎäî Ïö©Ïñ¥ÏôÄ Íµ¨ÌòÑ Í≥ºÏ†ïÏóêÏÑúÏùò Ïó¨Îü¨Í∞ÄÏßÄ Ïù¥ÏäàÎì§Ïù¥ ÎßéÏïÑÎ≥¥Ïù¥Í∏∞ ÎïåÎ¨∏ÏûÖÎãàÎã§. Ïù¥Ï†ú Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏Ïóê ÎåÄÌï¥ÏÑú Ï†ïÎ¶¨Ìï¥Î≥¥ÎèÑÎ°ù ÌïòÏ£†.</p><h4 id="Ìå®Ïä§ÌÇ§-Î°úÍ∑∏Ïù∏ÏóêÏÑú-Îì±Î°ùÍ≥º-Ïù∏Ï¶ùÏùò-ÌùêÎ¶Ñ"><a href="#Ìå®Ïä§ÌÇ§-Î°úÍ∑∏Ïù∏ÏóêÏÑú-Îì±Î°ùÍ≥º-Ïù∏Ï¶ùÏùò-ÌùêÎ¶Ñ" class="headerlink" title="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏóêÏÑú Îì±Î°ùÍ≥º Ïù∏Ï¶ùÏùò ÌùêÎ¶Ñ"></a>Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏóêÏÑú Îì±Î°ùÍ≥º Ïù∏Ï¶ùÏùò ÌùêÎ¶Ñ</h4><p>Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ Ïãú Îì±Î°ùÍ≥º Ïù∏Ï¶ù Í≥ºÏ†ïÏùÄ ÏÉùÍ∞ÅÎ≥¥Îã§ Í∞ÑÎã®Ìï©ÎãàÎã§. ÏÇ¨Ïö©ÏûêÎäî Î≥∏Ïù∏Ïù¥ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎäî Ïù∏Ï¶ù Í∏∞Í∏∞Ïóê Î∞úÍ∏âÌïú Ìå®Ïä§ÌÇ§ Ï†ïÎ≥¥Î•º RP ÎèÑÎ©îÏù∏Ïóê ÎåÄÌïú Ìå®Ïä§ÌÇ§Î•º Îì±Î°ùÌïòÍ≥† Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ÏóêÏÑú ÏãúÏä§ÌÖúÏóêÏÑú Ï†úÍ≥µÌïòÎäî Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ÏùÑ ÏÇ¨Ïö©Ìï¥ Ïù∏Ï¶ù Í∏∞Í∏∞Ïóê Ï°¥Ïû¨ÌïòÎäî Ìå®Ïä§ÌÇ§Î•º ÏÑ†ÌÉùÌïòÏó¨ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú Ïù∏Ï¶ùÏùÑ ÏöîÏ≤≠ÌïòÍ≥† ÏäπÏù∏Î∞õÏïÑ Î°úÍ∑∏Ïù∏ÏùÑ ÏôÑÎ£åÌï©ÎãàÎã§. Ìå®Ïä§ÌÇ§Î•º Îì±Î°ùÌïòÍ≥† Ïù∏Ï¶ùÌïòÎäî Í≥ºÏ†ïÏóêÏÑú ÏÑúÎ≤ÑÏóêÏÑú Ï†úÍ≥µÎ∞õÏùÄ Ï±åÎ¶∞ÏßÄÏôÄ Í≥µÍ∞úÌÇ§Ïóê ÎåÄÌïú ÏÑúÎ™Ö Ï†ïÎ≥¥Î•º Ï†úÍ≥µÌï®ÏúºÎ°úÏç® Ìå®Ïä§ÌÇ§Î•º ÏÇ¨Ïö©ÌïòÏó¨ Î°úÍ∑∏Ïù∏ÏùÑ ÏßÄÏõêÌïòÎäî ÏÑúÎ≤ÑÏóêÏÑúÎäî ÏÇ¨Ïö©ÏûêÏóê ÎåÄÌïú Ïã†ÏõêÏùÑ ÏïàÏ†ÑÌïòÍ≤å Ï¶ùÎ™Ö(Attestation) ÎòêÎäî Í≤ÄÏ¶ù(Assertion)Ìï† Ïàò ÏûàÏäµÎãàÎã§.</p><blockquote><p>Ìå®Ïä§ÌÇ§ Í¥ÄÎ†® ÌëúÏ§ÄÏóêÏÑú Îì±Î°ù(Registration)Í≥º Ïù∏Ï¶ù(Authentication)Ïóê ÎåÄÌïú Í≥ºÏ†ïÏùÄ Îã®ÏàúÌïú Ïù∏Ï¶ù Í≥ºÏ†ïÏù¥ ÏïÑÎãàÎùº ÌïòÎÇòÏùò Ï§ëÏöîÌïú ÏùòÏãùÏù¥ÎùºÎäî Í¥ÄÏ†êÏúºÎ°ú <strong>ÏÑ∏Î†àÎ™®Îãà(Ceremony)</strong> ÎùºÍ≥† ÌëúÌòÑÌï©ÎãàÎã§. Îî∞ÎùºÏÑú, Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú Ïó¨Îü¨Í∞ÄÏßÄ Ï†ïÎ≥¥Î•º Ï∞∏Í≥†Ìï† Îïå ÏÑ∏Î†àÎ™®ÎãàÎùºÎäî Îã®Ïñ¥Í∞Ä ÎÇòÏò§Î©¥ Í≥ºÏ†ïÏù¥ÎùºÍ≥† Ïù¥Ìï¥ÌïòÏãúÎ©¥ Îê©ÎãàÎã§.</p></blockquote><h4 id="Ìå®Ïä§ÌÇ§-Îì±Î°ùÏùÑ-ÏúÑÌïú-ÏÑúÎπÑÏä§-Ï†úÍ≥µÏûê"><a href="#Ìå®Ïä§ÌÇ§-Îì±Î°ùÏùÑ-ÏúÑÌïú-ÏÑúÎπÑÏä§-Ï†úÍ≥µÏûê" class="headerlink" title="Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏúÑÌïú ÏÑúÎπÑÏä§ Ï†úÍ≥µÏûê"></a>Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏúÑÌïú ÏÑúÎπÑÏä§ Ï†úÍ≥µÏûê</h4><p>Ìå®Ïä§ÌÇ§Î•º ÌÜµÌï¥ Ïã†ÏõêÏùÑ Í¥ÄÎ¶¨ÌïòÍ≥† Í≤ÄÏ¶ùÌïòÎäî Ï£ºÏ≤¥Ïù∏ ÏÑúÎπÑÏä§ Ï†úÍ≥µÏûêÎäî Ïã†Î¢∞ÎãπÏÇ¨Ïûê(Relyting Party)ÎùºÍ≥† Ìï©ÎãàÎã§. RPÎäî ÎèÑÎ©îÏù∏ÏùÑ ÏùòÎØ∏ÌïòÎ©∞ Ìå®Ïä§ÌÇ§ Îì±Î°ùÍ≥º Ïù∏Ï¶ùÏùÑ ÏöîÏ≤≠Ìï†ÎïåÎßàÎã§ Ï±åÎ¶∞ÏßÄ(Challenge)Î•º Î∞õÏïÑÍ∞ÄÎèÑÎ°ù ÏöîÍµ¨Ìï©ÎãàÎã§. RPÏóêÏÑú ÏùëÎãµÌïòÎäî Ï±åÎ¶∞ÏßÄÎäî ÎÇúÏàòÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ Î∞îÏù¥Ìä∏ Î∞∞Ïó¥Î°ú ÏïåÏàòÏóÜÎäî ÏãùÎ≥ÑÏûêÎ°ú CSRF ÌÜ†ÌÅ∞Í≥º ÎπÑÏä∑Ìïú Ïö©ÎèÑÎ°ú ÏÇ¨Ïö©Îê©ÎãàÎã§. ÎòêÌïú, RPÏóê ÎåÄÌïú ÏïÑÏù¥ÎîîÎäî ÎèÑÎ©îÏù∏ÏúºÎ°ú Íµ¨ÏÑ±ÎêòÍ∏∞ ÎïåÎ¨∏Ïóê ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Î°úÎ∂ÄÌÑ∞ Ï†ÑÎã¨ÎêòÎäî Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú Í≥µÍ∞úÌÇ§ Ïù∏Ï¶ù Ï†ïÎ≥¥Í∞Ä Ïò¨Î∞îÎ•∏ Ï∂úÏ≤òÏóê ÏûàÏùåÏùÑ ÏâΩÍ≤å ÌôïÏù∏Ìï† Ïàò ÏûàÍ≤å Îê©ÎãàÎã§. Í∑∏Îü¨Î©¥ ÏûêÎ∞î Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÑúÎ≤ÑÏóêÏÑú RPÎ•º Íµ¨ÏÑ±Ìï¥Î≥¥ÎèÑÎ°ù Ìï†ÍπåÏöî?</p><pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'com.yubico:webauthn-server-core:2.5.2'</span>
    implementation <span class="token string">'com.yubico:webauthn-server-attestation:2.5.2'</span>
    implementation <span class="token string">'com.yubico:yubico-util:2.5.2'</span>
<span class="token punctuation">&#125;</span></code></pre><p>Î®ºÏ†Ä, ÏûêÎ∞î Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóêÏÑú WebAuthnÏóê ÎåÄÌïú Relyting PartyÎ•º Íµ¨ÏÑ±ÌïòÍ∏∞ ÏúÑÌï¥ÏÑú <a target="_blank" rel="noopener" href="https://developers.yubico.com/java-webauthn-server/">java-webauthn-server</a> ÎùºÏù¥Î∏åÎü¨Î¶¨Î•º ÏùòÏ°¥ÏÑ±Ïóê Ï∂îÍ∞ÄÌï¥ÏïºÌï©ÎãàÎã§. Í∑∏Î¶¨Í≥† ÏïÑÎûòÏôÄ Í∞ôÏù¥ RelyingPartyIdentityÎ°ú RP ÎèÑÎ©îÏù∏Ïóê ÎåÄÌïú Ïã†ÏõêÏùÑ Ï†ïÏùòÌïòÍ≥† RelyingPartyÎ•º Ï¥àÍ∏∞ÌôîÌïòÎ©¥ Îê©ÎãàÎã§. CredentialRepository Îäî Ìå®Ïä§ÌÇ§ Îì±Î°ùÍ≥º Ïù∏Ï¶ù Í≥ºÏ†ïÏóêÏÑú Ïù¥ÎØ∏ Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§ Ï†ïÎ≥¥Î•º Ï†úÍ≥µÌïòÍ∏∞ ÏúÑÌïú Ïö©ÎèÑÎ°ú ÏÇ¨Ïö©Îê©ÎãàÎã§.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RelyingParty</span> <span class="token function">generateRelyingParty</span><span class="token punctuation">(</span><span class="token class-name">PasskeyCredentialRepository</span> passkeyCredentialRepository<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">RelyingPartyIdentity</span> rpID <span class="token operator">=</span> <span class="token class-name">RelyingPartyIdentity</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"kdev.ing"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Mambo App"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">RelyingParty</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span>rpID<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">credentialRepository</span><span class="token punctuation">(</span>passkeyCredentialRepository<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowOriginSubdomain</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">origins</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"https://kdev.ing"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h5 id="üî•-SecurityError-The-RP-ID-‚Äúmambo‚Äù-is-invalid-for-this-domain"><a href="#üî•-SecurityError-The-RP-ID-‚Äúmambo‚Äù-is-invalid-for-this-domain" class="headerlink" title="üî• SecurityError: The RP ID ‚Äúmambo‚Äù is invalid for this domain"></a>üî• SecurityError: The RP ID ‚Äúmambo‚Äù is invalid for this domain</h5><pre class="language-bash" data-language="bash"><code class="language-bash">SecurityError: The RP ID <span class="token string">"mambo"</span> is invalid <span class="token keyword">for</span> this domain
    at identifyAuthenticationError <span class="token punctuation">(</span>@simplewebauthn_browser.js?v<span class="token operator">=</span>db6ca826:278:14<span class="token punctuation">)</span>
    at startAuthentication <span class="token punctuation">(</span>@simplewebauthn_browser.js?v<span class="token operator">=</span>db6ca826:325:11<span class="token punctuation">)</span>
    Caused by: DOMException: The relying party ID is not a registrable domain suffix of, nor equal to the current domain.</code></pre><p>RP ÏÑúÎ≤ÑÏóê ÎåÄÌïú ÏïÑÏù¥ÎîîÎäî WebAuthn ÌëúÏ§ÄÏóê Îî∞Îùº Î∞òÎìúÏãú ÎèÑÎ©îÏù∏ÏúºÎ°ú Íµ¨ÏÑ±ÎêòÏñ¥ÏïºÌï©ÎãàÎã§. Í∑∏Î†áÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ ÏúÑÏôÄ Í∞ôÏù¥ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌï† Ïàò ÏûàÏäµÎãàÎã§.</p><h5 id="RelyingParty-generateChallenge"><a href="#RelyingParty-generateChallenge" class="headerlink" title="RelyingParty.generateChallenge"></a>RelyingParty.generateChallenge</h5><p>RelyingPartyÏùò startRegistartion Î•º ÌÜµÌï¥ Ìå®Ïä§ÌÇ§ Îì±Î°ùÏóê ÎåÄÌïú Ï±åÎ¶∞ÏßÄÏôÄ Í≥µÍ∞úÌÇ§ ÏÉùÏÑ± ÏòµÏÖòÏùÑ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÍ≤å Ï†úÍ≥µÌï† Ïàò ÏûàÎäîÎç∞ Ïù¥Îïå Ìè¨Ìï®ÎêòÎäî Ï±åÎ¶∞ÏßÄÎäî RelyingPartyÏóê 32Î∞îÏù¥Ìä∏Î°ú Íµ¨ÏÑ±Îêú ÎÇúÏàòÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ Î∞îÏù¥Ìä∏ Î∞∞Ïó¥Î°ú Íµ¨ÌòÑÎêòÏñ¥ÏûàÏäµÎãàÎã§.</p><pre class="language-java" data-language="java"><div class="caption"><span>RelyingParty.java</span></div><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">SecureRandom</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ByteArray</span> <span class="token function">generateChallenge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    random<span class="token punctuation">.</span><span class="token function">nextBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ByteArray</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h4 id="Ìå®Ïä§ÌÇ§-Îì±Î°ùÏùÑ-ÏúÑÌïú-ÏÉùÏÑ±-ÏòµÏÖò-Î∞úÍ∏â"><a href="#Ìå®Ïä§ÌÇ§-Îì±Î°ùÏùÑ-ÏúÑÌïú-ÏÉùÏÑ±-ÏòµÏÖò-Î∞úÍ∏â" class="headerlink" title="Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏúÑÌïú ÏÉùÏÑ± ÏòµÏÖò Î∞úÍ∏â"></a>Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏúÑÌïú ÏÉùÏÑ± ÏòµÏÖò Î∞úÍ∏â</h4><p>RelyingPartyÏùò startRegistration Îß§Í∞úÎ≥ÄÏàòÏóê StartRegistrationOptionsÎ•º Ï†ÑÎã¨Ìï®ÏúºÎ°úÏç® Ìå®Ïä§ÌÇ§ Îì±Î°ù Ïãú ÏÇ¨Ïö©Îê† Ï±åÎ¶∞ÏßÄÏôÄ ÏÉùÏÑ± ÏòµÏÖòÏù∏ PublicKeyCredentialCreationOptionsÎ•º ÎßåÎì§ Ïàò ÏûàÏäµÎãàÎã§. PublicKeyCredentialCreationOptionsÏùò toCredentialsCreateJson Ìï®ÏàòÎäî RP ÏÑúÎ≤ÑÏóêÏÑú ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Î°ú ÏùëÎãµÌï† Îïå Î∞îÏù¥Ìä∏ Î∞∞Ïó¥Î°ú Ïù¥Î£®Ïñ¥Ï†∏ÏïºÌïòÎäî Ìï≠Î™©Ïóê ÎåÄÌï¥ Base64URLÏùÑ Ï†ÅÏö©Ìïú JSONÏúºÎ°ú Íµ¨ÏÑ±ÎêòÎèÑÎ°ù Íµ¨ÌòÑÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú ÏâΩÍ≤å ÏùëÎãµÌï† Ïàò ÏûàÏäµÎãàÎã§.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">createUserHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchAlgorithmException</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> userHandle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">SecureRandom</span><span class="token punctuation">.</span><span class="token function">getInstanceStrong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextBytes</span><span class="token punctuation">(</span>userHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userHandle<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/registration/challenge"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">startRegistration</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> httpSession<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">UserIdentity</span> userIdentity <span class="token operator">=</span> <span class="token class-name">UserIdentity</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"mambo"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">displayName</span><span class="token punctuation">(</span><span class="token string">"Mambo"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArray</span><span class="token punctuation">(</span><span class="token function">createUserHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">PublicKeyCredentialCreationOptions</span> publicKeyCredentialCreationOptions <span class="token operator">=</span> rp<span class="token punctuation">.</span><span class="token function">startRegistration</span><span class="token punctuation">(</span>
                <span class="token class-name">StartRegistrationOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">user</span><span class="token punctuation">(</span>userIdentity<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">authenticatorSelection</span><span class="token punctuation">(</span><span class="token class-name">AuthenticatorSelectionCriteria</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">residentKey</span><span class="token punctuation">(</span><span class="token class-name">ResidentKeyRequirement</span><span class="token punctuation">.</span><span class="token constant">REQUIRED</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">authenticatorAttachment</span><span class="token punctuation">(</span><span class="token class-name">AuthenticatorAttachment</span><span class="token punctuation">.</span><span class="token constant">CROSS_PLATFORM</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    httpSession<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"publicKeyCredentialCreationOptions"</span><span class="token punctuation">,</span> publicKeyCredentialCreationOptions<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> publicKeyCredentialCreationOptions<span class="token punctuation">.</span><span class="token function">toCredentialsCreateJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>UserIdentityÏùò idÎäî Í≥µÍ∞úÌÇ§ Ïù∏Ï¶ù Ï†ïÎ≥¥Ïóê Ìè¨Ìï®ÎêòÎäî User HandleÍ≥º ÎèôÏùºÌï©ÎãàÎã§. Ìå®Ïä§ÌÇ§ ÌëúÏ§ÄÏóêÏÑúÎäî ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú ÏãùÎ≥ÑÏûêÎ•º Í∑∏ÎåÄÎ°ú Ïù¥Ïö©ÌïòÏßÄ ÏïäÍ≥† Î≥ÑÎèÑÎ°ú ÎÇúÏàòÎ°ú Ïù¥Î£®Ïñ¥ÏßÑ ÏãùÎ≥ÑÏûêÎ•º ÏÇ¨Ïö©ÌïòÎèÑÎ°ù ÏöîÍµ¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§. ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌï¥ Ïú†ÏùºÌïú ÏãùÎ≥ÑÏûêÎ°ú ÏÉùÏÑ±ÌïòÎäî Î°úÏßÅÏùÑ Íµ¨ÌòÑÌïòÎèÑÎ°ù ÌïòÏÑ∏Ïöî.</p></blockquote><h5 id="simplewebauthn-browser-startRegistration"><a href="#simplewebauthn-browser-startRegistration" class="headerlink" title="@simplewebauthn&#x2F;browser.startRegistration"></a>@simplewebauthn&#x2F;browser.startRegistration</h5><p>ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑúÎäî ÏïÑÎûòÏôÄ Í∞ôÏù¥ Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏúÑÌï¥ Ï±åÎ¶∞ÏßÄÎ•º ÏöîÏ≤≠ÌïòÍ≥† Î∞õÏùÄ Í≤∞Í≥ºÎ•º startRegistartionÏùò Îß§Í∞úÎ≥ÄÏàòÏóê Ï†ÑÎã¨Ìï®ÏúºÎ°úÏç® ÏÇ¨Ïö©ÏûêÏóêÍ≤å Ìå®Ïä§ÌÇ§ Îì±Î°ùÏóê ÎåÄÌïú ÎåÄÌôîÏÉÅÏûêÎ•º ÌëúÏãúÌï¥Ï£ºÍ≥† Ï†ÑÎã¨Î∞õÏùÄ Í≤∞Í≥ºÎ•º ÏÑúÎ≤ÑÏóê Ï†ÑÎã¨Ìï®ÏúºÎ°úÏç® Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏôÑÎ£åÌïòÎäî Î°úÏßÅÏùÑ Íµ¨ÌòÑÌï† Ïàò ÏûàÏäµÎãàÎã§. ÏïÑÎûòÏùò ÏΩîÎìúÎäî Ïù¥ÎØ∏ Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú Ïò§Î•òÏóê ÎåÄÌïú ÏòàÏô∏ Ï≤òÎ¶¨Í∞Ä ÏóÜÏúºÎØÄÎ°ú Ïó¨Îü¨Í∞ÄÏßÄ ÏòàÏô∏ ÏÉÅÌô©ÏùÑ ÌôïÏù∏ÌïòÍ≥† ÏïåÎßûÍ≤å Ï≤òÎ¶¨ÌïòÎèÑÎ°ù Íµ¨ÌòÑÌï¥ÏïºÌï©ÎãàÎã§.</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">registerPasskey</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> challenge  <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/registration/challenge'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> registrationResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startRegistration</span><span class="token punctuation">(</span>challenge<span class="token punctuation">.</span>data<span class="token punctuation">.</span>publicKey<span class="token punctuation">)</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/registration/verify'</span><span class="token punctuation">,</span> registrationResponse<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre><h4 id="Ìå®Ïä§ÌÇ§-Í≤ÄÏ¶ù-Î∞è-Îì±Î°ù"><a href="#Ìå®Ïä§ÌÇ§-Í≤ÄÏ¶ù-Î∞è-Îì±Î°ù" class="headerlink" title="Ìå®Ïä§ÌÇ§ Í≤ÄÏ¶ù Î∞è Îì±Î°ù"></a>Ìå®Ïä§ÌÇ§ Í≤ÄÏ¶ù Î∞è Îì±Î°ù</h4><p>Relying PartyÏùò finishRegistartion Ìï®ÏàòÎ•º ÌÜµÌï¥ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑú Ï†ÑÎã¨Ìïú Ìå®Ïä§ÌÇ§ Ï†ïÎ≥¥Í∞Ä Ïò¨Î∞îÎ•¥Í≤å ÏÑúÎ™ÖÎêòÏñ¥ÏûàÎäîÏßÄÎ•º Í≤ÄÏ¶ùÌïòÍ≥† Ï†ÑÎã¨Î∞õÏùÄ Ï†ïÎ≥¥ÏóêÏÑú ÏùºÎ∂Ä Ìï≠Î™©ÏùÑ Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïóê Ï†ÄÏû•ÌïòÎ©¥ Îê©ÎãàÎã§.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/registration/verify"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">finishRegistration</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> httpSession<span class="token punctuation">,</span>
                                  <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> credential<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RegistrationFailedException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> credentialsCreateJson <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> httpSession<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"publicKeyCredentialCreationOptions"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    httpSession<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"publicKeyCredentialCreationOptions"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">PublicKeyCredentialCreationOptions</span> publicKeyCredentialCreationOptions <span class="token operator">=</span>
            <span class="token class-name">PublicKeyCredentialCreationOptions</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>credentialsCreateJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PublicKeyCredential</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticatorAttestationResponse</span><span class="token punctuation">,</span> <span class="token class-name">ClientRegistrationExtensionOutputs</span><span class="token punctuation">></span></span> publicKeyCredential <span class="token operator">=</span>
            <span class="token class-name">PublicKeyCredential</span><span class="token punctuation">.</span><span class="token function">parseRegistrationResponseJson</span><span class="token punctuation">(</span>credential<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">RegistrationResult</span> result <span class="token operator">=</span> relyingParty<span class="token punctuation">.</span><span class="token function">finishRegistration</span><span class="token punctuation">(</span>
            <span class="token class-name">FinishRegistrationOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>publicKeyCredentialCreationOptions<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span>publicKeyCredential<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ByteArray</span> aaguid <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getAaguid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ByteArray</span> credentialId <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ByteArray</span> userHandle <span class="token operator">=</span> publicKeyCredentialCreationOptions<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ByteArray</span> publicKey <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getPublicKeyCose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> transports <span class="token operator">=</span> publicKeyCredential<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">AuthenticatorTransport</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> signatureCounter <span class="token operator">=</span> publicKeyCredential<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttestation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthenticatorData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSignatureCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Authenticator</span> authenticator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Authenticator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setCredentialId</span><span class="token punctuation">(</span>credentialId<span class="token punctuation">.</span><span class="token function">getBase64Url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setUserHandle</span><span class="token punctuation">(</span>userHandle<span class="token punctuation">.</span><span class="token function">getBase64Url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAaguid</span><span class="token punctuation">(</span>aaguid<span class="token punctuation">.</span><span class="token function">getBase64Url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setPublicKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">.</span><span class="token function">getBase64Url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setSignatureCount</span><span class="token punctuation">(</span>signatureCounter<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTransports</span><span class="token punctuation">(</span>transports<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLastAccessTime</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token class-name">OffsetDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> authenticatorRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>authenticator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h5 id="Í≥ÑÏ†ï-ÏÑ§Ï†ï-ÎÇ¥-Ìå®Ïä§ÌÇ§-ÌëúÏãú"><a href="#Í≥ÑÏ†ï-ÏÑ§Ï†ï-ÎÇ¥-Ìå®Ïä§ÌÇ§-ÌëúÏãú" class="headerlink" title="Í≥ÑÏ†ï ÏÑ§Ï†ï ÎÇ¥ Ìå®Ïä§ÌÇ§ ÌëúÏãú"></a>Í≥ÑÏ†ï ÏÑ§Ï†ï ÎÇ¥ Ìå®Ïä§ÌÇ§ ÌëúÏãú</h5><p>Ìå®Ïä§ÌÇ§ Îì±Î°ù Ïãú ÏÑúÎ≤ÑÏóê Ï†ÄÏû•Îêú Ï†ïÎ≥¥ÏóêÎäî ÏÇ¨Ïö©Ïûê ÏπúÌôîÏ†ÅÏúºÎ°ú ÌëúÏãúÌï† Ïàò ÏûàÎäî Ï†ïÎ≥¥Í∞Ä Ìè¨Ìï®ÎêòÏñ¥ÏûàÏßÄ ÏïäÏäµÎãàÎã§. <a target="_blank" rel="noopener" href="https://developers.google.com/identity/passkeys/ux/communicating-passkeys?hl=ko#what_information_to_use_to_create_a_passkey">Ìå®Ïä§ÌÇ§Î•º ÎßåÎìúÎäî Îç∞ ÏÇ¨Ïö©Ìï† Ï†ïÎ≥¥</a>ÎÇò <a target="_blank" rel="noopener" href="https://developers.google.com/identity/passkeys/ux/user-interface-design?hl=ko">Í≥ÑÏ†ï ÏÑ§Ï†ï ÎÇ¥ Ìå®Ïä§ÌÇ§ Ïπ¥Îìú ÌëúÏãú</a>ÏôÄ Í∞ôÏùÄ Ï†ïÎ≥¥Îì§ÏùÑ Ï∞∏Í≥†ÌïòÏó¨ Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌï¥ ÏïÑÎûòÏôÄ Í∞ôÏùÄ Ìï≠Î™©Ïù¥ Ìè¨Ìï®ÎêòÎèÑÎ°ù ÏÑ§Í≥ÑÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.</p><ul><li>Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌï¥ ÌëúÏãúÌï† Ïù¥Î¶Ñ (Nickname)</li><li>Ìå®Ïä§ÌÇ§Í∞Ä ÎßàÏßÄÎßâÏúºÎ°ú ÏÇ¨Ïö©Îêú ÏãúÍ∞Ñ (Last Access Time)</li><li>Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ù Í∏∞Í∏∞ Ïú†Ìòï (AAGUID)</li></ul><p>Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌï¥ ÌëúÏãúÌï† Ïù¥Î¶ÑÏùÑ ÏÑ§Ï†ïÌïòÎäî Í±¥ ÌïÑÏàò ÏÇ¨Ìï≠ÏùÄ ÏïÑÎãàÏßÄÎßå ÍπÉÌóàÎ∏åÏóêÏÑúÏùò Ìå®Ïä§ÌÇ§ Í¥ÄÎ¶¨ Ïãú Ïù¥Î¶ÑÏùÑ ÏÑ§Ï†ïÌï† Ïàò ÏûàÍ≤å Ï†úÍ≥µÌïòÎäîÎç∞ ÏÇ¨Ïö©Ïûê Ïä§Ïä§Î°ú Íµ¨Î∂ÑÌï† Ïàò ÏûàÍ≤å ÏßÄÏõêÌï¥Ï§Ñ Ïàò ÏûàÎäî Í≤É Í∞ôÏäµÎãàÎã§. Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ù Í∏∞Í∏∞ Ï†ïÎ≥¥Ïùò Í≤ΩÏö∞ AttestedCredentialDataÏóê Ìè¨Ìï®Îêú AAGUIDÎ•º ÌÜµÌï¥ Ïù∏Ï¶ù Í∏∞Í∏∞Î•º Ï†úÍ≥µÌïòÎäî ÏóÖÏ≤¥ÏùÑ ÏãùÎ≥ÑÌï† Ïàò ÏûàÎäîÎç∞ AAGUIDÎäî ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏÇ¨ÎûåÏù¥ Ïù∏ÏßÄÌï† Ïàò ÏûàÎäî Î¨∏ÏûêÏó¥ÏùÄ ÏïÑÎãàÎØÄÎ°ú AAGUID Ï†ÄÏû•ÏÜåÏùò <a target="_blank" rel="noopener" href="https://github.com/passkeydeveloper/passkey-authenticator-aaguids/blob/main/aaguid.json">aaguid.json</a> Ïù∏Ï¶ù Ïû•ÏπòÏùò Ïú†ÌòïÏóê ÎåÄÌï¥ÏÑú Ïù¥Î¶ÑÏù¥ÎÇò ÏïÑÏù¥ÏΩòÏùÑ ÌëúÏãúÌï† Ïàò ÏûàÍ∏∞ÎèÑ Ìï©ÎãàÎã§.</p><h5 id="Îì±Î°ùÎêú-Ìå®Ïä§ÌÇ§-ÏÇ≠Ï†ú"><a href="#Îì±Î°ùÎêú-Ìå®Ïä§ÌÇ§-ÏÇ≠Ï†ú" class="headerlink" title="Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§ ÏÇ≠Ï†ú"></a>Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§ ÏÇ≠Ï†ú</h5><p><img data-src="/images/posts/passkey-login/01.png"></p><p>ÏúÑ ÌôîÎ©¥ÏùÄ ÍπÉÌóàÎ∏åÏóêÏÑú ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê Îì±Î°ùÌñàÎçò Ìå®Ïä§ÌÇ§Î•º ÏÇ≠Ï†úÌïòÎ†§Í≥† ÌñàÏùÑÎïå Ï†úÍ≥µÎêòÎäî Î©îÏãúÏßÄÏûÖÎãàÎã§. Ìå®Ïä§ÌÇ§ Í¥ÄÎ¶¨ Ïãú Îì±Î°ùÌïú Ìå®Ïä§ÌÇ§Î•º ÏÇ≠Ï†úÌïòÎ©¥ ÎêòÍ≤†ÏßÄÎßå Í≥†Î†§Ìï¥ÏïºÌï† Î∂ÄÎ∂ÑÏù¥ ÏûàÏäµÎãàÎã§. ÏÑúÎ≤ÑÏóê Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§Î•º ÏÇ≠Ï†úÌïúÎã§Í≥†Ìï¥ÏÑú ÏÇ¨Ïö©ÏûêÍ∞Ä ÏÇ¨Ïö©ÌñàÎçò Ïù∏Ï¶ù Í∏∞Í∏∞Ïùò Ìå®Ïä§ÌÇ§ Îì±Î°ù Ï†ïÎ≥¥Îäî ÏÇ≠Ï†úÎêòÏßÄ ÏïäÎäîÎã§Îäî Í≤ÉÏûÖÎãàÎã§. ÎòêÌïú, ÏÇ¨Ïö©ÏûêÍ∞Ä Ïù∏Ï¶ù Í∏∞Í∏∞Ïùò Ìå®Ïä§ÌÇ§Î•º ÏÇ≠Ï†úÌï¥Î≤ÑÎ¶¨Îäî Í≤ΩÏö∞ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§Îäî Î¨¥Ïö©ÏßÄÎ¨ºÏù¥ ÎêòÎ©∞ Î∂àÌïÑÏöîÌïòÍ≤å Ìå®Ïä§ÌÇ§ Îì±Î°ù Ï†ïÎ≥¥Î°ú ÎÇ®ÏïÑÏûàÍ≤å ÎêòÏñ¥Î≤ÑÎ¶ΩÎãàÎã§.</p><p>Ìå®Ïä§ÌÇ§ Îì±Î°ùÏùÑ ÏßÄÏõêÌïòÎäî Ïù∏Ï¶ù Í∏∞Í∏∞Î≥ÑÎ°ú ÏûêÏÑ∏Ìïú Ìå®Ïä§ÌÇ§ ÏÇ≠Ï†ú Í∞ÄÏù¥ÎìúÎ•º Ï†úÍ≥µÌï† Ïàú ÏóÜÏúºÎØÄÎ°ú ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóêÏÑú Ìå®Ïä§ÌÇ§Î•º ÏÇ≠Ï†úÌïòÎçîÎùºÎèÑ Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ ÏãúÏóêÎäî Ìå®Ïä§ÌÇ§ ÏòµÏÖòÏúºÎ°ú ÌëúÏãúÎê† Ïàò ÏûàÏùåÏùÑ ÏïåÎ†§Ï£ºÍ≥† ÏûàÎäî Í≤É Í∞ôÏäµÎãàÎã§. Îã§ÏùåÏùÄ ÏûêÏ£º ÏÇ¨Ïö©Îê†ÎßåÌïú Ïù∏Ï¶ù Í∏∞Í∏∞ÏóêÏÑúÏùò Ìå®Ïä§ÌÇ§ ÏÇ≠Ï†ú Î∞©Î≤ïÏù¥ÎØÄÎ°ú Ï∞∏Í≥†Ìï¥Î≥¥ÏÑ∏Ïöî.</p><ul><li>Google Passsword Manager: Î∏åÎùºÏö∞Ï†Ä URLÏóê <a href="chrome://settings/passkeys">chrome:&#x2F;&#x2F;settings&#x2F;passkeys</a> ÏûÖÎ†•</li><li>iCloud Keychain: <a target="_blank" rel="noopener" href="https://support.apple.com/ko-kr/guide/mac-help/mchl77e2cb66/mac">Mac Î∞è iCloud ÌÇ§Ï≤¥Ïù∏ÏóêÏÑú Ìå®Ïä§ÌÇ§ ÎòêÎäî ÏïîÌò∏ Ï†úÍ±∞ÌïòÍ∏∞</a></li><li>Chrome Profile: <a target="_blank" rel="noopener" href="https://support.google.com/chrome/answer/13168025?hl=ko">ChromeÏóêÏÑú Ìå®Ïä§ÌÇ§ Í¥ÄÎ¶¨ÌïòÍ∏∞</a></li><li>Samsung Pass: Samsung Wallet ‚Üí Samsung Pass ‚Üí Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ ‚Üí Ìå®Ïä§ÌÇ§</li></ul><h4 id="Ìå®Ïä§ÌÇ§-Ïù∏Ï¶ù-ÏöîÏ≤≠Ïóê-ÎåÄÌïú-ÏòµÏÖò-Î∞úÍ∏â"><a href="#Ìå®Ïä§ÌÇ§-Ïù∏Ï¶ù-ÏöîÏ≤≠Ïóê-ÎåÄÌïú-ÏòµÏÖò-Î∞úÍ∏â" class="headerlink" title="Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ù ÏöîÏ≤≠Ïóê ÎåÄÌïú ÏòµÏÖò Î∞úÍ∏â"></a>Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ù ÏöîÏ≤≠Ïóê ÎåÄÌïú ÏòµÏÖò Î∞úÍ∏â</h4><p>Relying PartyÏùò startAssertion Ìï®ÏàòÎ•º ÌÜµÌï¥ ÏÇ¨Ïö©Ïûê Í≥ÑÏ©°Ïóê Îì±Î°ùÎêú Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌï¥ Î°úÍ∑∏Ïù∏Ìï† Ïàò ÏûàÎèÑÎ°ù Ï±åÎ¶∞ÏßÄÎ•º Î∞úÍ∏âÌï† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥Îïå, Îß§Í∞úÎ≥ÄÏàòÎ°ú Ï†ÑÎã¨Ìï† StartAssertionOptionsÏùÑ Íµ¨ÏÑ±Ìï† Îïå ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Îäî ÏÇ¨Ïö©ÏûêÍ∞Ä ÏûÖÎ†•Ìïú ÏïÑÏù¥ÎîîÎ•º ÏöîÏ≤≠ Ïãú Ï†úÍ≥µÌïúÎã§Î©¥ ÌäπÏ†ï ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌïú Í≥µÍ∞úÌÇ§Îßå Ï°∞ÌöåÌïòÏó¨ Ìè¨Ìï®ÏãúÌÇ¨ Ïàò ÏûàÏäµÎãàÎã§.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/authentication/challenge"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">startAssertion</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> httpSession<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">StartAssertionOptions<span class="token punctuation">.</span>StartAssertionOptionsBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">StartAssertionOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>username<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        builder<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token class-name">AssertionRequest</span> assertionRequest <span class="token operator">=</span> relyingParty<span class="token punctuation">.</span><span class="token function">startAssertion</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    httpSession<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"assertionRequest"</span><span class="token punctuation">,</span> assertionRequest<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> assertionRequest<span class="token punctuation">.</span><span class="token function">toCredentialsGetJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h5 id="Ìå®Ïä§ÌÇ§-Í≤ÄÏ¶ù-Î∞è-Ïù∏Ï¶ù"><a href="#Ìå®Ïä§ÌÇ§-Í≤ÄÏ¶ù-Î∞è-Ïù∏Ï¶ù" class="headerlink" title="Ìå®Ïä§ÌÇ§ Í≤ÄÏ¶ù Î∞è Ïù∏Ï¶ù"></a>Ìå®Ïä§ÌÇ§ Í≤ÄÏ¶ù Î∞è Ïù∏Ï¶ù</h5><p>Relying PartyÏùò finishAssertion Ìï®ÏàòÎ•º ÌÜµÌï¥ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑú Ï†ÑÎã¨Ìïú Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ù Ï†ïÎ≥¥Î•º Ïã†Î¢∞Ìï† Ïàò ÏûàÎäîÏßÄ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§. Ïù∏Ï¶ù Ï†ïÎ≥¥Ïóê Ìè¨Ìï®Îêú credentailIdÏôÄ userHandleÏùÑ ÌÜ†ÎåÄÎ°ú ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏóê ÎåÄÌï¥ Î°úÍ∑∏Ïù∏ÏùÑ Ï≤òÎ¶¨ÌïòÎ©¥ Îê©ÎãàÎã§.</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> startAuthentication <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@simplewebauthn/browser'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">passkeyLogin</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> challenge  <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/authentication/challenge'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> authenticationResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startAuthentication</span><span class="token punctuation">(</span>challenge<span class="token punctuation">.</span>data<span class="token punctuation">.</span>publicKey<span class="token punctuation">)</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/authentication/verify'</span><span class="token punctuation">,</span> authenticationResponse<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/authentication/verify"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">finishAssertion</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> httpSession<span class="token punctuation">,</span>
                              <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> credential<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">AssertionFailedException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> assertionRequestJson <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> httpSession<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"assertionRequest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AssertionRequest</span> assertionRequest <span class="token operator">=</span> <span class="token class-name">AssertionRequest</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>assertionRequestJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PublicKeyCredential</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticatorAssertionResponse</span><span class="token punctuation">,</span> <span class="token class-name">ClientAssertionExtensionOutputs</span><span class="token punctuation">></span></span> publicKeyCredential
            <span class="token operator">=</span> <span class="token class-name">PublicKeyCredential</span><span class="token punctuation">.</span><span class="token function">parseAssertionResponseJson</span><span class="token punctuation">(</span>credential<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">AssertionResult</span> result <span class="token operator">=</span> relyingParty<span class="token punctuation">.</span><span class="token function">finishAssertion</span><span class="token punctuation">(</span><span class="token class-name">FinishAssertionOptions</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>assertionRequest<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">response</span><span class="token punctuation">(</span>publicKeyCredential<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// todo: process authenticate</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ByteArray</span> credentialId <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getCredential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCredentialId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ByteArray</span> userHandle <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getCredential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><h5 id="ÏÇ¨Ïö©Ïûê-ÏïÑÏù¥Îîî-ÌïÑÎìúÏóê-ÏûêÎèô-ÏôÑÏÑ±-UI-ÌëúÏãú"><a href="#ÏÇ¨Ïö©Ïûê-ÏïÑÏù¥Îîî-ÌïÑÎìúÏóê-ÏûêÎèô-ÏôÑÏÑ±-UI-ÌëúÏãú" class="headerlink" title="ÏÇ¨Ïö©Ïûê ÏïÑÏù¥Îîî ÌïÑÎìúÏóê ÏûêÎèô ÏôÑÏÑ± UI ÌëúÏãú"></a>ÏÇ¨Ïö©Ïûê ÏïÑÏù¥Îîî ÌïÑÎìúÏóê ÏûêÎèô ÏôÑÏÑ± UI ÌëúÏãú</h5><p>Ìå®Ïä§ÌÇ§ Ïù∏Ï¶ùÏùÑ ÏúÑÌï¥ startAuthenticationÎ•º Ìò∏Ï∂úÌï† Îïå useBrowserAutofill Îß§Í∞úÎ≥ÄÏàòÎ•º ÏÑ§Ï†ïÌïòÎäî Í≤ΩÏö∞ mediation ÏòµÏÖòÏù¥ conditionalÎ°ú ÏßÄÏ†ïÎêòÎ©¥ÏÑú ÏÇ¨Ïö©ÏûêÏóêÍ≤å Î∞îÎ°ú Ìå®Ïä§ÌÇ§ ÏÑ†ÌÉùÏùÑ ÏöîÍµ¨ÌïòÎäî ÎåÄÌôîÏÉÅÏûêÎ•º ÌëúÏãúÌïòÏßÄ ÏïäÍ≥† Î∏åÎùºÏö∞Ï†ÄÎßàÎã§ Íµ¨ÌòÑÎêú Î∞©ÏãùÏúºÎ°ú ÏûêÎèô ÏôÑÏÑ±(Ï°∞Í±¥Î∂Ä UI)Ïù¥ ÌëúÏãúÎê©ÎãàÎã§. Ìå®Ïä§ÌÇ§ ÏûêÎèô ÏôÑÏÑ±ÏùÑ ÏúÑÌï¥ Ìò∏Ï∂úÌñàÎã§Î©¥ ÏÇ¨Ïö©Ïûê Í≥ÑÏ†ïÏùÑ ÏûÖÎ†•ÌïòÎäî ÌïÑÎìúÏùò autocomplete ÏÜçÏÑ±Ïóê webauthn ÏùÑ Ìè¨Ìï®ÏãúÌÇ§Î©¥ Îê©ÎãàÎã§.</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// Login.vue</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">await</span> <span class="token function">processAutofill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// passkey.js</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>browserSupportsWebAuthnAutofill<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@simplewebauthn/browser'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">processAutofill</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">browserSupportsWebAuthnAutofill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> challenge <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/authentication/challenge'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> authenticationResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startAuthentication</span><span class="token punctuation">(</span>challenge<span class="token punctuation">.</span>data<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/passkey/authentication/verify'</span><span class="token punctuation">,</span> authenticationResponse<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>Ï°∞Í±¥Î∂Ä UIÎ°ú ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏûêÎèô ÏôÑÏÑ±ÏùÑ Ï†úÍ≥µÌï† Îïå Ìå®Ïä§ÌÇ§Ïóê ÎåÄÌïú ÌîÑÎ°úÎØ∏Ïä§Í∞Ä Í≥ÑÏÜç ÎåÄÍ∏∞ÌïòÎäî ÏÉÅÌÉúÎ°ú ÏßÑÌñâÌïòÍ≥† ÏûàÎäîÎç∞Ïöî. Í∏∞Ï°¥Ïóê ÏßÑÌñâÏ§ëÏù∏ Ìå®Ïä§ÌÇ§Î•º Ï∑®ÏÜåÌï† Ïàò ÏûàÎèÑÎ°ù SimpleWebAuthnÏùò startAuthenticationÏùÄ ÎÇ¥Î∂ÄÏ†ÅÏúºÎ°ú Íµ¨ÌòÑÎêòÏñ¥ÏûàÏúºÎØÄÎ°ú Ïã†Í≤Ω Ïì∏ ÌïÑÏöîÎäî ÏóÜÏäµÎãàÎã§.</p></blockquote><hr><p>Î≥∏ Í∏ÄÏùÑ ÏûëÏÑ±ÌïòÍ∏∞ ÏúÑÌï¥ÏÑú ÏïÑÎûòÏôÄ Í∞ôÏùÄ Ï†ïÎ≥¥Îì§ÏùÑ Ï∞∏Í≥†ÌñàÏäµÎãàÎã§.</p><ul><li><a target="_blank" rel="noopener" href="https://webauthn.io/">WebAuthn.io Îç∞Î™® ÏÇ¨Ïù¥Ìä∏</a></li><li><a target="_blank" rel="noopener" href="https://webauthn.guide/">WebAuthn Í∞ÄÏù¥Îìú</a></li><li><a target="_blank" rel="noopener" href="https://passkeys.dev/device-support/">Passkeys Device Support</a></li><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API">WebAuthn: Web Authentication API</a></li><li><a target="_blank" rel="noopener" href="https://webauthn.wtf/">What is WebAuthn?</a></li><li><a target="_blank" rel="noopener" href="https://passkeys.dev/docs/intro/what-are-passkeys/">What are passkeys?</a></li><li><a target="_blank" rel="noopener" href="https://webauthn.me/passkeys">Web Authentication and Passkeys</a></li><li><a target="_blank" rel="noopener" href="https://www.corbado.com/assets/Passkeys-Developer-Cheatsheet.pdf">Passkeys Cheet Sheet</a></li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Passkey/" rel="tag"># Passkey</a> <a href="/tags/WebAuthn/" rel="tag"># WebAuthn</a></div><div class="post-nav"><div class="post-nav-item"><a href="/amazon-sns-fcm-mobile-push/" rel="prev" title="Amazon SNS - FCM Î™®Î∞îÏùº Ìë∏Ïãú"><i class="fa fa-chevron-left"></i> Amazon SNS - FCM Î™®Î∞îÏùº Ìë∏Ïãú</a></div><div class="post-nav-item"><a href="/passkey-login-advanced/" rel="next" title="Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ Í≥†ÎèÑÌôî">Ìå®Ïä§ÌÇ§ Î°úÍ∑∏Ïù∏ Í≥†ÎèÑÌôî <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments giscus-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"üåó",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"kdevkr/kdevkr.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxNTQxNjA4OTA=","category":"Announcements","category_id":"DIC_kwDOCTBO-s4CYmQM","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"ko","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script></body></html>