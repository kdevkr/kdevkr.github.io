<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="일반적인 웹 서비스처럼 많은 사용자와 사용자에 의해 대량의 트래픽이 발생하는 시스템은 아니지만 스케일 아웃되어야하는 분산 애플리케이션에서 세션을 공유해야하는 목적과 자주 변경되지는 않지만 생각보다 많이 활용되어 데이터베이스 조회에 대한 부하가 높을 것으로 보이는 일부 데이터에 대해서 캐시하기 위해서 레디스라는 인메모리 저장소를 사용하고 있습니다. 시스템 특"><meta property="og:type" content="article"><meta property="og:title" content="레디스의 메모리 사용량이 계속해서 증가하는 이슈"><meta property="og:url" content="https://kdevkr.github.io/redis-memory-usage-issue/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="일반적인 웹 서비스처럼 많은 사용자와 사용자에 의해 대량의 트래픽이 발생하는 시스템은 아니지만 스케일 아웃되어야하는 분산 애플리케이션에서 세션을 공유해야하는 목적과 자주 변경되지는 않지만 생각보다 많이 활용되어 데이터베이스 조회에 대한 부하가 높을 것으로 보이는 일부 데이터에 대해서 캐시하기 위해서 레디스라는 인메모리 저장소를 사용하고 있습니다. 시스템 특"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-12-01T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-01T15:48:32.589Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="트러블슈팅"><meta property="article:tag" content="메모리 사용량"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://kdevkr.github.io/redis-memory-usage-issue/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/redis-memory-usage-issue/","path":"redis-memory-usage-issue/","title":"레디스의 메모리 사용량이 계속해서 증가하는 이슈"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>레디스의 메모리 사용량이 계속해서 증가하는 이슈 | Mambo</title><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-93954323-1","only_pageview":true}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned 🔥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">67</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">67</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">122</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail → mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/redis-memory-usage-issue/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="레디스의 메모리 사용량이 계속해서 증가하는 이슈 | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">레디스의 메모리 사용량이 계속해서 증가하는 이슈</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-12-01 00:00:00" itemprop="dateCreated datePublished" datetime="2022-12-01T00:00:00Z">2022-12-01</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>일반적인 웹 서비스처럼 많은 사용자와 사용자에 의해 대량의 트래픽이 발생하는 시스템은 아니지만 스케일 아웃되어야하는 분산 애플리케이션에서 세션을 공유해야하는 목적과 자주 변경되지는 않지만 생각보다 많이 활용되어 데이터베이스 조회에 대한 부하가 높을 것으로 보이는 일부 데이터에 대해서 캐시하기 위해서 레디스라는 인메모리 저장소를 사용하고 있습니다. 시스템 특성 상 많은 사용자의 세션 데이터가 발생할 가능성은 없기에 1GB 정도의 메모리 사양을 가지는 작은 단일 인스턴스에 레디스를 설치하여 클러스터 방식이 아닌 스탠다드-얼론 모드로써 사용하고 있습니다.</p><p>아마도 대부분이 스프링 부트와 함께 스프링 세션을 사용중이라면 별다른 구현 작업 없이도 세션 데이터를 레디스에 저장하고 조회할 수 있도록 제공하므로 JDBC 기반이 아닌 레디스 방식을 도입하게 될 것입니다. 다만, 레디스에 대한 기술적인 경험이 부족하였기에 기본값으로 제공하는 옵션들을 그대로 사용하는 편일 것입니다.</p><h4 id="레디스의-메모리-사용량이-조금씩-늘어나는-현상"><a href="#레디스의-메모리-사용량이-조금씩-늘어나는-현상" class="headerlink" title="레디스의 메모리 사용량이 조금씩 늘어나는 현상"></a>레디스의 메모리 사용량이 조금씩 늘어나는 현상</h4><p>사용자의 세션이 많아진다거나 캐시되는 데이터가 늘어남으로써 메모리 사용량이 증가하는 건 당연할 일입니다. 그러나, 고객측에서 전달한 최근 30일 간의 모니터링 지표에는 특정 시점부터 메모리 사용량이 지속적으로 급격하게 증가함을 보이고 있었습니다. 처음에는 고객측에서 보안 백신 프로그램과 함께 모니터링을 위한 에이전트로 인하여 OS 메모리가 증가했을 것이라 생각했지만 레디스에서 저장한 스냅샷(dump.rdb) 파일의 용량이 생각보다 크고 레디스 프로세스에서 점유중인 메모리 사용량이 높은 것을 보고 이상함을 인지하게 됩니다.</p><h4 id="레디스에-세션-데이터가-무분별하게-저장되어있음"><a href="#레디스에-세션-데이터가-무분별하게-저장되어있음" class="headerlink" title="레디스에 세션 데이터가 무분별하게 저장되어있음"></a>레디스에 세션 데이터가 무분별하게 저장되어있음</h4><p>해당 시점 부근에 애플리케이션에 대한 버전 패치가 이루어졌으나 변경사항을 대략적으로 검토한 결과로는 레디스에 영향이 될 만한 작업이 없다고 판단되었기에 레디스에서 저장한 스냅샷 파일을 복사하여 로컬 환경에서 스냅샷 파일을 토대로 레디스를 실행한 후 저장되어있는 데이터들을 확인해보았습니다. 다른 환경보다 캐시된 데이터의 수가 많았으나 대부분의 용량을 차지하고 있었던 것은 무분별하게 저장되어있는 스프링 세션 관련 키들이었습니다. spring:session:으로 시작되는 세션 관련 키가 60만개를 넘어서 저장된 상태에 있었고 기본 세션 만료 정책은 7일이므로 대부분의 키들이 오래 남아있을 수 있는 상태에 있었습니다.</p><blockquote><p>일반적인 웹 서비스라면 세션 유지 시간을 작게 설정하겠지만 시스템 특성 상 로그인을 길게 유지할 수 있도록하는 요구사항이 있으며 레디스는 기본값에 따라 최대 메모리 설정이 되어있지 않았으므로 레디스에서는 메모리 할당이 불가능한 경우 가상 메모리를 통해 스왑까지 시도할 수 있는 상황이 되어버린 상태입니다.</p></blockquote><p>아무튼 무분별하게 저장된 세션 키들은 만료 시점이 되어서야 자동으로 키가 삭제되므로 레디스의 메모리 사용량이 조금씩 늘어나는 것을 모니터링 지표에 나타나게 된 것입니다. 메모리 사용량이 늘어나는 이유에 대해서 이렇게 무분별하게 저장되는 원인을 찾아야하는데 레디스에 세션 데이터를 등록하는 것은 애플리케이션일 것이므로 변경사항에 대해서 다시 자세하게 검토해야 했습니다.</p><h4 id="스프링-프레임워크의-구현을-이해하지-못한-이유로-무분별한-세션-데이터가-저장될-수-있음"><a href="#스프링-프레임워크의-구현을-이해하지-못한-이유로-무분별한-세션-데이터가-저장될-수-있음" class="headerlink" title="스프링 프레임워크의 구현을 이해하지 못한 이유로 무분별한 세션 데이터가 저장될 수 있음"></a>스프링 프레임워크의 구현을 이해하지 못한 이유로 무분별한 세션 데이터가 저장될 수 있음</h4><p>변경사항 중 보안 요구사항에 따라 사용자의 요청이나 내부적인 작업으로 데이터베이스에 대해 SQL이 호출되기까지의 일련의 과정을 감사할 수 있도록 로그로 저장하거나 출력해야했고 그 과정에서 요청된 세션 아이디가 항목에 포함되어 있었습니다. 세션 아이디를 기록하기 위해서 스프링 프레임워크에서 제공하는 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/context/request/RequestContextHolder.java">RequestContextHolder</a>를 통해 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/context/request/RequestAttributes.java">RequestAttributes</a>를 가져온 후 세션 아이디를 반환하는 함수를 호출하도록 코드가 작성되었습니다.</p><p>단순히 코드만을 바라보았을때는 해당 요구사항에 대한 처리 로직으로 인하여 무분별하게 세션 데이터가 저장될 수 있는지 이해하지 못하는 것이 당연합니다. 세션 아이디를 가져오는 함수에 대해서 자세히 살펴보면 아래와 같이 빈 값(NULL)이 될 수 없다는 것이 주석으로 설명되어있습니다.</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * Return an id for the current underlying session.
 * @return the session id as String (never &#123;@code null&#125;)
 */</span>
<span class="token class-name">String</span> <span class="token function">getSessionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>이에 따라 스프링 프레임워크 개발자는 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework/blob/52e967a5256d389f486b0159e05e2656e4411701/spring-web/src/main/java/org/springframework/web/context/request/ServletRequestAttributes.java#L138-L142">ServletRequestAttributes</a> 구현체에서 세션 아이디가 반드시 반환되어야하므로 요청 정보에서 세션을 가져올 때 없으면 생성되도록 인자가 반드시 true인 상태로 동작하게 구현해두었기 때문입니다. 일반적으로 웹 요청은 세션 방식이 많기 때문에 문제가 되지 않을 코드로 바라볼 수 있습니다. 그러나 시스템에서는 사용자의 로그인을 통해 세션으로써 웹 요청을 시도하는 것과 IoT 연계와 같이 데이터 등록이나 일부 데이터를 조회하기 위해서 사용하는 토큰 기반 인증 방식의 OAuth API를 제공하고 있습니다.</p><p>토큰 기반 인증 방식의 요청이라는 것은 세션이 생성될 필요가 없으며 레디스에 세션을 저장할 이유가 없어지게 됩니다. 그러나, 이를 고려하지 않고 단순히 쉽게 세션 아이디를 제공하는 함수가 있으므로 이를 활용하였기에 세션이 없는 상태에서 해당 함수를 호출하여 세션 아이디를 가져오는 시점에 의미없는 새로운 세션이 만들어지고 스프링 세션의 내부 구현으로 인하여 새로운 세션에 대한 정보를 레디스에 저장하는 과정이 수행되게 된 것입니다. 해당 보안 요구사항으로 타 환경에서 관련된 증상이 발견되지 않은 이유는 OAuth API를 활용하여 데이터를 연계하지 않기 때문입니다. 대부분의 데이터는 AWS의 SQS를 통해 백그라운드 스케줄 작업에 의해 처리되었기에 OAuth API로 인해 생성되는 세션이 그다지 많지 않았기에 모니터링 될 수 없는 상태에 있었습니다.</p><blockquote><p>결국은 타 환경에서의 요구사항이 공통 모듈로써 처리되었지만 전혀 예상하지 못했던 상황으로 인하여 의도하지 않은 다른 환경에서만 사이드 이펙트 문제가 발생한 것입니다. 모듈화 프로젝트는 반복적인 코드를 작성하지 않는 장점이 있지만 어떠한 문제가 어디에서 영향을 미칠지 모르는 단점이 있습니다.</p></blockquote><h4 id="세션-아이디를-조회하는-코드-로직의-변경"><a href="#세션-아이디를-조회하는-코드-로직의-변경" class="headerlink" title="세션 아이디를 조회하는 코드 로직의 변경"></a>세션 아이디를 조회하는 코드 로직의 변경</h4><p>스프링 프레임워크의 구현을 제대로 이해하지 못한 상태에서 요구사항을 처리한 개발자의 실수인 것은 명확합니다. ervletRequestAttributes를 통해 세션 아이디를 쉽게 가져올 수 있었으나 상황에 따라 예상하지 못했던 결과를 가져오게 되었으므로 세션 아이디를 조회하는 코드를 HttpServletRequest로부터 현재 스레드 로컬 내에 세션이 있다면 가져오도록 변경했습니다. 이로써 토큰 기반 인증 시에도 새로운 세션을 생성하지 않게 되었으므로 레디스에 메모리 사용량이 주기적으로 늘어나는 현상은 재현되지 않게 되었습니다.</p><h4 id="운영적인-측면의-레디스-옵션-권고"><a href="#운영적인-측면의-레디스-옵션-권고" class="headerlink" title="운영적인 측면의 레디스 옵션 권고"></a>운영적인 측면의 레디스 옵션 권고</h4><p>본 문제에 대한 원인을 찾아가기까지 생각보다 어려웠기 때문에 임시 대응책으로 최대 메모리 설정을 권고하였습니다. 그러나, 운영적인 측면으로 바라보았을때는 최대 메모리 제한 및 메모리 정책에 대한 옵션들은 반드시 적용해두었어야할 항목입니다. 아마도 문제가 발생하기 전까지는 여러가지 항목에 대해서 신경쓰지 않아도 정상적으로 운용되었기에 기본값으로도 충분하다고 생각되었을지 모릅니다.</p><pre class="language-conf" data-language="conf"><code class="language-conf">tcp-backlog 1024
maxmemory 400mb
maxmemory-policy allkeys-lfu</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">ulimit</span> -n <span class="token number">65535</span>
<span class="token builtin class-name">echo</span> <span class="token string">'net.ipv4.tcp_max_syn_backlog=1024'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">'net.core.somaxconn = 65535'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">'vm.overcommit_memory = 1'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> never <span class="token operator">></span> /sys/kernel/mm/transparent_hugepage/enabled</code></pre><blockquote><p>위 내용은 레디스 운영 관련 글을 검색해보고 정리한 항목인데 리눅스 커널 파라미터 조정에 대해서는 아직은 고객측에게 전달하지 않은 상태입니다.</p></blockquote><p>한가지 명확하지 않은 부분은 최대 메모리 옵션에 적용되어야할 수치인데 BGSAVE를 통해 RDB 스냅샷을 수행하는 경우 Fork 방식으로 프로세스를 복제하여 덤프 파일을 생성하기 때문에 실제로 메모리 사용량이 두배 이상이 될 수 있다는 점입니다. 대부분 OS 메모리의 60% ~ 70% 정도의 값으로 설정하라고 설명하지만 이 부분을 고려하지 않은 수치 이거나 클러스터를 구성하였을 경우를 이야기할 지 모르겠습니다.</p><h4 id="트러블슈팅-회고"><a href="#트러블슈팅-회고" class="headerlink" title="트러블슈팅 회고"></a>트러블슈팅 회고</h4><p>개발자로써는 생각지도 못한 이슈를 경험하였지만 고객은 사용중인 제품에 대한 안정성을 문제삼을 수 있는 큰 이슈였습니다. 그러나, 개인적으로는 원인을 찾아가는 과정에서 redis-cli를 통해서 여러가지 명령어를 수행하며 데이터를 확인해볼 수 있는 좋은 경험이었다고 생각됩니다. 또한, 원인을 확정해가는 과정에서 부하 테스트 도구인 k6를 이용해서 가상의 사용자를 통해 OpenAPI를 호출해보기도 하였습니다. 이 문제에 대해서 돌아보면서 이 경험과 비슷한 <a target="_blank" rel="noopener" href="https://perfectacle.github.io/2019/05/29/redis-monitoring/">(Troubleshooting) 레디스 사망일기</a>라는 글도 확인한다거나 <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=92NizoBL4uA">Redis 야무지게 사용하기</a>를 통해서 레디스에 대해서도 다시한번 학습하는 계기가 되었습니다.</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85/" rel="tag"># 트러블슈팅</a> <a href="/tags/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%82%AC%EC%9A%A9%EB%9F%89/" rel="tag"># 메모리 사용량</a></div><div class="post-nav"><div class="post-nav-item"><a href="/quartz/" rel="prev" title="쿼츠 스케줄러"><i class="fa fa-chevron-left"></i> 쿼츠 스케줄러</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comments"><script src="https://utteranc.es/client.js" repo="kdevkr/kdevkr.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌗",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script></body></html>