<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MariaDB Timestamp Y2K38</title>
    <url>/mariadb-timestamp-y2k38/</url>
    <content><![CDATA[<h4 id="Whatâ€™s-Y2K38"><a href="#Whatâ€™s-Y2K38" class="headerlink" title="Whatâ€™s Y2K38 ???"></a>Whatâ€™s Y2K38 ???</h4><blockquote>
<p>Timestamps in MariaDB have a maximum value of 2147483647, equivalent to 2038-01-19 05:14:07. This is due to the underlying 32-bit limitation. Using the function on a date beyond this will result in NULL being returned. Use DATETIME as a storage type if you require dates beyond this.</p>
</blockquote>
<p>2038ë…„ ë¬¸ì œëŠ” ì‹œê°„ì„ 32ë¹„íŠ¸ ì •ìˆ˜í˜•ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤. MariaDB(MySQL)ì€ ì‹œê°„ì„ í‘œí˜„í•˜ëŠ” ê²½ìš°  ë¬¸ìì—´ë¡œ ì €ì¥ë˜ëŠ” DATETIMEê³¼ UTCë¡œ ì €ì¥ë˜ëŠ” TIMESTAMPë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° TIMESTAMP í˜•ì‹ì€ 4ë°”ì´íŠ¸ë¡œ ì €ì¥ëœë‹¤. ë”°ë¼ì„œ, DATETIMEì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œê³ í•˜ëŠ” í¸ì´ë©° DATETIMEì€ ë¬¸ìì—´ë¡œ ì €ì¥ë˜ë¯€ë¡œ DATETIMEì„ ì €ì¥í•˜ëŠ” ì‹œì ì— UTCë¡œ ì €ì¥ë  ìˆ˜ ìˆë„ë¡ íƒ€ì„ì¡´ì„ UTCë¡œ ì„¤ì •í•˜ëŠ” ê²Œ ì¢‹ë‹¤.</p>
<blockquote>
<p>MariaDB íƒ€ì„ì¡´ì„ UTCê°€ ì•„ë‹Œ Aisa&#x2F;Seoulë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°ì—ëŠ” SQL ì¡°íšŒ ì‹œ CONVERT_TZ í•¨ìˆ˜ë¥¼ ë§¤ë²ˆ ì‚¬ìš©í•´ì•¼í•  í•„ìš”ê°€ ìˆë‹¤.</p>
</blockquote>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%time_zone%'</span><span class="token punctuation">;</span>
<span class="token comment">-- timezone: Asia/Seoul</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">TABLE</span> test
<span class="token punctuation">(</span>
    id         <span class="token keyword">BIGINT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">COMMENT</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>
    name       <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>           <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'Name'</span><span class="token punctuation">,</span>
    created_at <span class="token keyword">DATETIME</span>              <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> test <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'mambo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> convert_tz<span class="token punctuation">(</span>created_at<span class="token punctuation">,</span> <span class="token string">'+09:00'</span><span class="token punctuation">,</span> <span class="token string">'+00:00'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> created_at <span class="token keyword">FROM</span> test<span class="token punctuation">;</span>
<span class="token comment">-- created_at,created_at_utc</span>
<span class="token comment">-- 2023-09-24 16:36:30,2023-09-24 07:36:30</span></code></pre>
]]></content>
      <tags>
        <tag>MariaDB</tag>
        <tag>Y2K38</tag>
      </tags>
  </entry>
  <entry>
    <title>ëª¨ë“œë²„ìŠ¤ TCP</title>
    <url>/modbus-tcp/</url>
    <content><![CDATA[<p>ëª¨ë“œë²„ìŠ¤(Modbus) í”„ë¡œí† ì½œì€ PLCì™€ ê°™ì€ ìë™í™” ì œì–´ ì„¤ë¹„ê°€ í¬í•¨ë˜ëŠ” ì‚°ì—…ì—ì„œ ê³µì‹ì ì¸ í‘œì¤€ì€ ì•„ë‹ˆì§€ë§Œ ê±°ì˜ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©ë˜ê³  ìˆëŠ” í†µì‹  í”„ë¡œí† ì½œì´ë‹¤. ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì— ëŒ€í•œ ìŠ¤í™ì€ <a href="https://modbus.org/docs/Modbus_Messaging_Implementation_Guide_V1_0b.pdf">Modbus_Messaging_Implementation_Guide_V1_0b.pdf</a>ë¡œ ê³µê°œë˜ì–´ìˆë‹¤. ë³¸ì¸ì€ ì—ë„ˆì§€ ë¶„ì•¼ ë„ë©”ì¸ì—ì„œ ì¼í•˜ê³  ìˆëŠ” ê°œë°œìë¡œ ê°ì¢… ì—ë„ˆì§€ ê´€ë ¨ ì„¤ë¹„ì—ì„œë„ ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì„ ì§€ì›í•˜ëŠ” ì œí’ˆì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„¤ë¹„ë“¤ì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ì‹œê³„ì—´ ë°ì´í„°ë“¤ì„ ìˆ˜ì§‘í•˜ê¸° ìœ„í•˜ì—¬ ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ìë™í™” ì œì–´ì˜ ëª©ì ì´ ì•„ë‹ˆë¯€ë¡œ ì‹œë¦¬ì–¼ í†µì‹ ì´ ì•„ë‹Œ SCADA, RTU, PLCì™€ ê°™ì€ ì„¤ë¹„ì™€ TCP&#x2F;IP ë°©ì‹ìœ¼ë¡œ í†µì‹ í•œë‹¤.</p>
<h2 id="Modbus-TCP-x2F-IP"><a href="#Modbus-TCP-x2F-IP" class="headerlink" title="Modbus TCP&#x2F;IP"></a>Modbus TCP&#x2F;IP</h2><p>ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì€ ìë™í™” ì„¤ë¹„ ì‚°ì—…ì—ì„œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ì›¹ ê°œë°œìë“¤ì´ ê²½í—˜í•  ìˆ˜ ìˆê±°ë‚˜ ì•Œì•„ì•¼í•  ë²”ìš©ì ì¸ í†µì‹  í”„ë¡œí† ì½œì€ ì•„ë‹ˆë‹¤. ëª¨ë“œë²„ìŠ¤ TCPì—ì„œëŠ” MBAP(MODBUS Application Protocol) í—¤ë”ì™€ Function Code ê·¸ë¦¬ê³  ë°ì´í„° í”„ë ˆì„ì„ í•˜ë‚˜ë¡œ ì „ë‹¬í•˜ê²Œ ë˜ë©° ì¼ë°˜ì ì¸ ì†Œì¼“ í†µì‹ ê³¼ ë™ì¼í•˜ë‹¤. ë˜í•œ, ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œì€ ë§ˆìŠ¤í„° â€¢ ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡°ë¡œ ë™ì‘í•˜ë©° ë§ˆìŠ¤í„°(í´ë¼ì´ì–¸íŠ¸)ëŠ” ìŠ¬ë ˆì´ë¸Œ(ì„œë²„)ì—ì„œ ì •ì˜í•œ ë©”ëª¨ë¦¬ ë§µ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´ìˆëŠ” ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì›í•˜ëŠ” ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë„ë¡ ë©”ëª¨ë¦¬ ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>
<h4 id="MBAP-í—¤ë”"><a href="#MBAP-í—¤ë”" class="headerlink" title="MBAP í—¤ë”"></a>MBAP í—¤ë”</h4><p>MBAP í—¤ë”ë¥¼ êµ¬ì„±í•˜ëŠ” Unit IdentifierëŠ” ëª¨ë“œë²„ìŠ¤ TCP ì—ì„œëŠ” IP ì£¼ì†Œë¡œ ì‹ë³„í•˜ê¸° ë•Œë¬¸ì— Unit IdentifierëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í•­ëª©ì´ì§€ë§Œ 255(0xFF)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. â€» <a href="https://sol.ls-electric.com/uploads/document/16419540742910/20130809_%EA%B9%80%EC%A7%80%EC%9A%A9D_iS7%20MODBUS-TCP.pdf">LS ì‚°ì „ì˜ ìƒë‹´í’ˆì§ˆ í–¥ìƒ êµìœ¡ ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•´ë´ë„ 0xFFë¡œ ê³ ì •í•œë‹¤ê³  í•œë‹¤.</p>
<h4 id="Function-Code"><a href="#Function-Code" class="headerlink" title="Function Code"></a>Function Code</h4><p><img data-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*lOma7y90Hjtdc88d.jpg" alt="Functional codes of Modbus registers"></p>
<p>ì¼ë°˜ì ì¸ ì¸¡ì •ê°’ì„ í‘œí˜„í•˜ëŠ” <strong>ì•„ë‚ ë¡œê·¸</strong>ì™€ 0ê³¼ 1ë¡œ êµ¬ì„±ë˜ëŠ” ìƒíƒœê°’ì„ í‘œí˜„í•˜ëŠ” <strong>ë””ì§€í„¸</strong>ë¡œ ë‚˜ëˆ„ì–´ì„œ ê¸°ëŠ¥ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤. ì£¼ì†Œ ë²”ìœ„ì— ë”°ë¼ 01(0x01, Read Coil)ê³¼ 02(0x02, Read Discrete Inputs)ë¥¼ ì‚¬ìš©í•˜ë©° ì•„ë‚ ë¡œê·¸ëŠ” ì£¼ë¡œ 03(0x03, Read Holding Registers)ë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì´ë‹¤. â€» ê¸°ëŠ¥ ì½”ë“œí‘œë¥¼ ì‚´í´ë³´ë©´ 02(0x02, REad Discrete Inputs)ì™€ 04(0x04, Read Input Registers)ëŠ” ì½ê¸°ë§Œ ìˆ˜í–‰í•˜ëŠ” ë©”ëª¨ë¦¬ ë²”ìœ„ì—ì„œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ëŠ” ê²ƒì„ ì•Œì•„ì±Œ ìˆ˜ ìˆë‹¤.</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><p>ë„¤í‹° ê¸°ë°˜ì˜ <a href="https://github.com/digitalpetri/modbus">digitalpetri&#x2F;modbus</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë‚˜ <a href="https://github.com/steveohara/j2mod">steveohara&#x2F;j2mod</a>ë¼ëŠ” ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ëª¨ë“œë²„ìŠ¤ TCP í†µì‹ ì„ êµ¬í˜„í•˜ëŠ”ê²Œ ê°„ë‹¨í•  ê²ƒ ê°™ë‹¤. ë‹¤ìŒì˜ ì½”ë“œëŠ” ê°„ë‹¨í•˜ê²Œ ìŠ¬ë ˆì´ë¸Œì— ëª¨ë“œë²„ìŠ¤ ë§µì„ ì´ë¯¸ì§€ë¡œ ì •ì˜í•˜ê³  ë§ˆìŠ¤í„°ì—ì„œ ì •ì˜ëœ ëª¨ë“œë²„ìŠ¤ ë§µì— ëŒ€í•´ì„œ ì½ì–´ë³´ëŠ” ìƒ˜í”Œì´ë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token string">'com.ghgande:j2mod:3.1.1'</span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModbusTCP</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">TCP_UNIT_ID</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// 0xFF</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DefaultProcessImageFactory</span> imageFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultProcessImageFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ProcessImageImplementation</span> memoryMap <span class="token operator">=</span> imageFactory<span class="token punctuation">.</span><span class="token function">createProcessImageImplementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        memoryMap<span class="token punctuation">.</span><span class="token function">addDigitalOut</span><span class="token punctuation">(</span>imageFactory<span class="token punctuation">.</span><span class="token function">createDigitalOut</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ObservableRegister</span> register <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObservableRegister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        register<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memoryMap<span class="token punctuation">.</span><span class="token function">addRegister</span><span class="token punctuation">(</span>register<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ModbusSlave</span> tcpSlave <span class="token operator">=</span> <span class="token class-name">ModbusSlaveFactory</span><span class="token punctuation">.</span><span class="token function">createTCPSlave</span><span class="token punctuation">(</span><span class="token class-name">Modbus</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_PORT</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tcpSlave<span class="token punctuation">.</span><span class="token function">addProcessImage</span><span class="token punctuation">(</span><span class="token constant">TCP_UNIT_ID</span><span class="token punctuation">,</span> memoryMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tcpSlave<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ModbusTCPMaster</span> modbusTCPMaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModbusTCPMaster</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token class-name">Modbus</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modbusTCPMaster<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modbusTCPMaster<span class="token punctuation">.</span><span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">BitVector</span> bitVector <span class="token operator">=</span> modbusTCPMaster<span class="token punctuation">.</span><span class="token function">readCoils</span><span class="token punctuation">(</span><span class="token constant">TCP_UNIT_ID</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bools <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>bitVector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bitVector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                bools<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> bitVector<span class="token punctuation">.</span><span class="token function">getBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">Register</span><span class="token punctuation">[</span><span class="token punctuation">]</span> registers <span class="token operator">=</span> modbusTCPMaster<span class="token punctuation">.</span><span class="token function">readMultipleRegisters</span><span class="token punctuation">(</span><span class="token constant">TCP_UNIT_ID</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"booleans, &#123;&#125;"</span><span class="token punctuation">,</span> bools<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"registers, &#123;&#125;"</span><span class="token punctuation">,</span> registers<span class="token punctuation">)</span><span class="token punctuation">;</span>
            modbusTCPMaster<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token class-name">ModbusSlaveFactory</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìŠ¬ë ˆì´ë¸Œ ì´ë¯¸ì§€ êµ¬ì„± ì‹œ 10001-20000ì€ DigitalInë¥¼ ì‚¬ìš©í•˜ë©° 30001-40000ì€ InputRegisterë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì½ê¸° ë¿ë§Œ ì•„ë‹ˆë¼ ì“°ê¸°ë„ ê°€ëŠ¥í•œ DigitalOutê³¼ Registerì— ëŒ€í•´ì„œëŠ” ìŠ¬ë ˆì´ë¸Œì—ì„œ ë³€ê²½ì— ëŒ€í•´ ê°ì§€í•  ìˆ˜ ìˆëŠ” ObservableDigitalOutê³¼ ObservableRegisterë¥¼ ì œê³µí•œë‹¤.</p>
</blockquote>
<h4 id="PLC-Simulator"><a href="#PLC-Simulator" class="headerlink" title="PLC Simulator"></a>PLC Simulator</h4><p><a href="https://sourceforge.net/projects/modrssim2/">ModRSsim2</a> í”„ë¡œê·¸ë¨ì„ í†µí•´ TCP&#x2F;IP ê¸°ë°˜ì˜ PLC ìŠ¬ë ˆì´ë¸Œì— ëŒ€í•œ ì‹œë®¬ë ˆì´í„°ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ìœ„ ì½”ë“œì—ì„œ ìŠ¬ë ˆì´ë¸Œ ë©”ëª¨ë¦¬ ë§µ ì •ë³´ë¥¼ ë§Œë“¤ê¸°ë³´ë‹¤ ì‹œë®¬ë ˆì´í„° í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë°ì´í„°ë¥¼ ì‰½ê²Œ ì •ì˜í•˜ê³  ëª¨ë“œë²„ìŠ¤ ë§ˆìŠ¤í„°ì¸ í´ë¼ì´ì–¸íŠ¸ ë¡œì§ êµ¬í˜„ì— ì§‘ì¤‘í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. </p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://modbus.org/docs/Modbus_Messaging_Implementation_Guide_V1_0b.pdf">MODBUS Messaging on TCP&#x2F;IP Implementation Guide V1.0b</a></li>
<li><a href="https://www.youtube.com/watch?v=eb8iophBMLs">ëª¨ë“œë²„ìŠ¤ í”„ë¡œí† ì½œ 11ë¶€ - ëª¨ë“œë²„ìŠ¤ TCP(ë” ë„“ì€ ì„¸ìƒìœ¼ë¡œ)</a></li>
<li><a href="https://www.youtube.com/watch?v=ImVbnyqAqX4">[ëª¨ë“œë²„ìŠ¤ í•¸ë“œë¶] 09ê°• ëª¨ë“œë²„ìŠ¤ TCP í†µì‹  ì˜ˆì œ</a></li>
</ul>
]]></content>
      <tags>
        <tag>Modbus</tag>
        <tag>TCP/IP</tag>
      </tags>
  </entry>
  <entry>
    <title>ê¸°ë¡ë³´ë‹¤ ë” ì¤‘ìš”í•œ ê²ƒ</title>
    <url>/more-important-than-blogging/</url>
    <content><![CDATA[<p>ì‹ ì… ê°œë°œì ì¸í„°ë·° ê³¼ì •ì—ì„œ ë°°ìš°ê²Œ ëœ ê±´ <strong>ê¸°ë¡ë³´ë‹¤ ì¤‘ìš”í•œ ê²ƒì€ ë‹¤ì‹œ ë˜ëŒì•„ë³´ëŠ” í–‰ìœ„</strong>ì¸ ê²ƒ ê°™ë‹¤.</p>
<p>ì‹ ì… ê°œë°œì ì´ë ¥ì„œë¥¼ ê²€í† í•˜ë‹¤ë³´ë©´ ê²½ë ¥ ê°œë°œìì™€ ë‹¤ë¥´ê²Œ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ í•„ìˆ˜ë¡œ ì²¨ë¶€í•˜ê±°ë‚˜ <strong>ê¸°ì–µë³´ë‹¤ ê¸°ë¡ì„</strong> ì–´í•„í•˜ëŠ” ë¶„ë“¤ì´ ìƒë‹¹íˆ ë§ë‹¤ê³  ëŠë‚€ë‹¤. ì´ë ‡ê²Œ ì‹ ì… ê°œë°œìë“¤ì—ê²Œ ê¸°ìˆ  ë¸”ë¡œê·¸ê°€ ê±°ì˜ í•„ìˆ˜ê°€ ëœ ì´ìœ ëŠ” ê¾¸ì¤€í•˜ê²Œ ë¸”ë¡œê·¸ì— ìì‹ ì˜ ìƒê°ì´ë‚˜ ê²½í—˜í•œ ê²ƒë“¤ì„ ê¸°ë¡í•˜ëŠ” ìœ íŠœë¸Œ ê°œë°œë°”ë‹¥ì˜ í–¥ë¡œë‹˜ì˜ ì˜í–¥ì´ í´ ê²ƒ ê°™ë‹¤ê³  ìƒê°ëœë‹¤.</p>
<p>ì•„ë¬´íŠ¼ ì‹ ì… ê°œë°œì ì¸í„°ë·° ê³¼ì •ì—ì„œ ê¸°ìˆ  ë¸”ë¡œê·¸ì— ìˆëŠ” ë‚´ìš©ì„ í† ëŒ€ë¡œ ë¬¼ì–´ë³´ê²Œ ë˜ë©´ ë‹µë³€ì„ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìƒê°ë³´ë‹¤ ë§ë‹¤. ì•„ë¬´ë˜ë„ ë‹¹ì¥ ë°°ì›Œì•¼í•  ê²ƒì´ ë§ê³  ìŠì–´ë²„ë¦¬ê±°ë‚˜ ìš°ì„ ìˆœìœ„ì— ë°€ë ¤ì„œ ì‹ ê²½ì“°ì§€ ì•Šë˜ ì§€ì‹ë“¤ì´ê¸° ë•Œë¬¸ì¼ ê²ƒ ê°™ë‹¤. êµ­ë¹„ì§€ì›ì´ë‚˜ ë¶€íŠ¸ìº í”„ì—ì„œ ë§ì€ ê±¸ì„ ë°°ì› ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ ì§§ì€ ê¸°ê°„ìœ¼ë¡œ ì¸í•´ ìƒëµí•˜ê³  ë„˜ì–´ê°„ ê¸°ë³¸ì ìœ¼ë¡œ ì•Œì•„ì•¼í•  ì§€ì‹ë“¤ë„ ë§ë‹¤.</p>
<p>ê°œì¸ì ìœ¼ë¡œ ì†”ì§í•˜ê²Œ ì‹ ì… ê°œë°œìë“¤ì—ê²Œ ë¬¼ì–´ë³¼ë§Œí•œ ê²ƒë“¤ì€ ì´ë¯¸ ì¸í„°ë„·ì— ì‹ ì… ê°œë°œì ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ë¼ë©° ë¬¸ì œ ì€í–‰ì‹ìœ¼ë¡œ ê½¤ë‚˜ ë§ì´ ê³µìœ ë˜ì–´ ìˆë‹¤. ê·¸ë˜ì„œ ì§€ì›ìë§ˆë‹¤ ë‹¤ë¥´ê²Œ ë¬¼ì–´ë³´ê²Œ ë˜ëŠ” ê±´ <strong>ë¸”ë¡œê·¸ì— ìˆëŠ” ë‚´ìš©ì„ í† ëŒ€ë¡œ ì–¼ë§ˆë‚˜ ë” ì°¾ì•„ë³´ê³  ì´í•´í–ˆëŠ”ê°€</strong> ì´ë‹¤.</p>
<p>ìµœì†Œí•œ ë©´ì ‘ì„ ë³´ê¸° ì „ì— <strong>ìì‹ ì´ ì‘ì„±í–ˆë˜ ë‚´ìš©ì„ ë‹¤ì‹œ ì‚´í´ë³´ëŠ” ê²Œ ì¤‘ìš”</strong>í•  ê²ƒ ê°™ë‹¤. í˜„ì¬ ì§„í–‰í•˜ê³  ìˆëŠ” ì±„ìš©ì—ì„œ ì¸í„°ë·° ê³¼ì •ì„ ë˜ëŒì•„ë³´ì•˜ì„ ë•Œ ìì„¸íˆ ë‹µë³€ì„ í•˜ì§€ ëª»í•˜ë”ë¼ë„ ì§€ì‹ì— ëŒ€í•œ í‚¤ì›Œë“œë¥¼ ë“¤ì–´ë³¸ ë“¯í•œ ë°˜ì‘ì´ ìˆëŠ” ê²ƒê³¼ ì „í˜€ ì•Œì•„ì±„ì§€ ëª»í•˜ëŠ” ê±´ í™•ì‹¤í•˜ê²Œ ëŠë‚Œì´ ë‹¤ë¥´ë‹¤.</p>
<p>ë‚˜ë„ ì´ ë¸”ë¡œê·¸ì— ì‘ì„±í–ˆë˜ ê²ƒë“¤ì„ ìì£¼ ë˜ëŒì•„ë³´ì•„ì•¼ ê² ë‹¤. ğŸ™„</p>
]]></content>
      <tags>
        <tag>ê°œë°œì ì¸í„°ë·°</tag>
        <tag>ê¸°ìˆ  ë¸”ë¡œê·¸</tag>
      </tags>
  </entry>
  <entry>
    <title>Mutual TLS</title>
    <url>/mutual-tls/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì€ ì—ë„ˆì§€ ë¶„ì•¼ì—ì„œ ìˆ˜ìš” ë°˜ì‘(DR) ì´ë²¤íŠ¸ë¥¼ ì†¡ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <a href="https://www.openadr.org/">OpenADR í”„ë¡œí† ì½œ</a>ì—ì„œ VTNê³¼ VENì´ ì„œë¡œ ìƒí˜¸ ì¸ì¦(Mutual Authentication)ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬ì¡°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="Mutual-Authentication"><a href="#Mutual-Authentication" class="headerlink" title="Mutual Authentication"></a>Mutual Authentication</h2><p><em>Client certificates must be used for HTTP client authentication. The entity initiating the request(the client) must have an X.509 certificate that is validated by the server during the TLS handshake. If no client certificate is supplied, or if the certificate is not valid (e.g., it is not signed by a trusted CA, or it is expired) the server must terminate the connection during the TLS handshake.</em></p>
<p>OpenADR í”„ë¡œí† ì½œì—ì„œ VTN ì‹œìŠ¤í…œê³¼ VEN ë””ë°”ì´ìŠ¤ ê°„ í†µì‹ ì„ ìœ„í•´ì„œëŠ” HTTP ë˜ëŠ” XMPPë¥¼ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤. HTTP í´ë¼ì´ì–¸íŠ¸ í†µì‹ ì„ ìœ„í•´ì„œëŠ” VTNê³¼ VENì€ ì„œë¡œë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” X.509 ê³µê°œí‚¤ ì¸ì¦ì„œë¥¼ ì œê³µí•´ì•¼í•©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ì„œë²„ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸°ê´€ìœ¼ë¡œë¶€í„° ì„œëª…ëœ X.509 ì¸ì¦ì„œê°€ í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ ì„œë²„ ì‹œìŠ¤í…œì—ì„œëŠ” TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ì—°ê²°ì„ í•´ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="X-509-Client-Certificate"><a href="#X-509-Client-Certificate" class="headerlink" title="X.509 Client Certificate"></a>X.509 Client Certificate</h3><p>OpenADR í”„ë¡œí† ì½œì—ì„œì˜ ë³´ì•ˆì€ ê³µê°œí‚¤ ê¸°ë°˜ ì¸í”„ë¼(PKI)ì˜ X.509 ì¸ì¦ì„œë¡œ ìˆ˜í–‰í•˜ë©° ë” ë†’ì€ ë³´ì•ˆ ë ˆë²¨ì„ ìš”êµ¬í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê³  ì‹¶ë‹¤ë©´ XML í˜ì´ë¡œë“œì— ëŒ€í•œ ì„œëª…ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2048 ë¹„íŠ¸ ì´ìƒì˜ RSA ë˜ëŠ” 256 ë¹„íŠ¸ ì´ìƒì˜ ECC í‚¤ ê¸°ë°˜ì˜ ê³µê°œí‚¤ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ VENì€ ì„ë² ë””ë“œ ë””ë°”ì´ìŠ¤ì´ë¯€ë¡œ RSA ë³´ë‹¤ëŠ” ECC í‚¤ ê¸°ë°˜ì˜ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. OpenADR í”„ë¡œí† ì½œì—ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ìµœì†Œí•œ TLS 1.2 ë²„ì „ê³¼ í•¨ê»˜ ê·¸ì— ìƒì‘í•˜ëŠ” ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li>Transport Layer Security: TLS 1.2+</li>
<li>Cipher Suites: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256</li>
</ul>
<h4 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h4><p>ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” HTTP í´ë¼ì´ì–¸íŠ¸ í†µì‹  ë„êµ¬ì¸ <a href="https://curl.se/">cURL</a>ë¥¼ ì‚¬ìš©í•´ì„œ EiRegisterParty ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•´ ìš”ì²­í•˜ë©´ VTN ê³¼ì˜ ìƒí˜¸ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://downey.io/notes/dev/curl-using-mutual-tls/">how to curl an endpoint protected by mutual tls (mtls)</a>ì—ì„œëŠ” cURLë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ê³  ìˆì–´ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">--tlsv1.2</span> --tls-max <span class="token number">1.3</span> <span class="token parameter variable">--cert</span> ./cert.pem <span class="token parameter variable">--key</span> ./privkey.pem https://Host/OpenADR2/Simple/2.0b/EiRegisterParty</code></pre>

<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ë¿ë§Œ ì•„ë‹ˆë¼ VEN ë””ë°”ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ìë°” ì–¸ì–´ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” KeyStoreë¼ëŠ” ë³„ë„ì˜ í‚¤ ì €ì¥ì†Œ í´ë˜ìŠ¤ë¥¼ ì œê³µí•˜ë¯€ë¡œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì‹œ X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” PKI ë° PKCS í‘œì¤€ì— ëŒ€í•œ ì¼ë ¨ì˜ í´ë˜ìŠ¤ë“¤ì„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œëŠ” PEM í˜•ì‹ìœ¼ë¡œ êµí™˜ë˜ë¯€ë¡œ KeyStoreë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ <a href="https://www.bouncycastle.org/java.html">BouncyCastle API</a> ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ X.509 ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ ë¶ˆëŸ¬ì™€ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì‹œë„í•˜ëŠ” ì½”ë“œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MutualTlsTest</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MutualTlsTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Test mutual authentication"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testMutualAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"javax.net.debug"</span><span class="token punctuation">,</span> <span class="token string">"ssl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> certPemText <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"cert.pem"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> privateKeyText <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"privkey.pem"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> certPem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>certPemText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> privateKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>privateKeyText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">KeyStore</span> clientKeyStore <span class="token operator">=</span> <span class="token class-name">KeyStore</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"jks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            clientKeyStore<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">final</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Certificate</span><span class="token punctuation">></span></span> chain <span class="token operator">=</span> <span class="token class-name">CertificateFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"X.509"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">generateCertificates</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>certPem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> password <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            clientKeyStore<span class="token punctuation">.</span><span class="token function">setKeyEntry</span><span class="token punctuation">(</span><span class="token string">"client"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> password<span class="token punctuation">,</span> chain<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Certificate</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">KeyManagerFactory</span> keyManagerFactory <span class="token operator">=</span> <span class="token class-name">KeyManagerFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"SunX509"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            keyManagerFactory<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>clientKeyStore<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// NOTE: If server generate client certificate from self-signed root CA, you can use trustKeyStore.</span>
            <span class="token class-name">KeyStore</span> trustKeyStore <span class="token operator">=</span> <span class="token class-name">KeyStore</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"jks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            trustKeyStore<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"ca.jks"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">TrustManagerFactory</span> trustManagerFactory <span class="token operator">=</span> <span class="token class-name">TrustManagerFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token class-name">TrustManagerFactory</span><span class="token punctuation">.</span><span class="token function">getDefaultAlgorithm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            trustManagerFactory<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>trustKeyStore<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">SSLContext</span> sslcontext <span class="token operator">=</span> <span class="token class-name">SSLContexts</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadTrustMaterial</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TrustAllStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sslcontext<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>keyManagerFactory<span class="token punctuation">.</span><span class="token function">getKeyManagers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> trustManagerFactory<span class="token punctuation">.</span><span class="token function">getTrustManagers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tlsVersions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"TLSv1.2"</span><span class="token punctuation">,</span><span class="token string">"TLSv1.3"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cipherSuites <span class="token operator">=</span> <span class="token class-name">SSLContext</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultSSLParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCipherSuites</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SSLConnectionSocketFactory</span> sslSocketFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSLConnectionSocketFactory</span><span class="token punctuation">(</span>sslcontext<span class="token punctuation">,</span> tlsVersions<span class="token punctuation">,</span> cipherSuites<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">NoopHostnameVerifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">CloseableHttpClient</span> client <span class="token operator">=</span> <span class="token class-name">HttpClientBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSSLSocketFactory</span><span class="token punctuation">(</span>sslSocketFactory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">HttpPost</span> httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"https://Host/OpenADR2/Simple/2.0b/EiRegisterParty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            httpPost<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/xml; charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> payload <span class="token operator">=</span> <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"payload.xml"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            httpPost<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringEntity</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">CloseableHttpResponse</span> httpResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> response <span class="token operator">=</span> <span class="token class-name">EntityUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>httpResponse<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"&lt;?xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h4><p>ê°œì¸ì ìœ¼ë¡œ í•™ìŠµì¤‘ì¸ Go ì–¸ì–´ì—ì„œ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ê³¼ í•¨ê»˜ X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤. <a href="https://venilnoronha.io/a-step-by-step-guide-to-mtls-in-go">A step by step guide to mTLS in Go</a>ì— ì˜ ì„¤ëª…ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"crypto/tls"</span>
	<span class="token string">"crypto/x509"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"io/ioutil"</span>
	<span class="token string">"log"</span>
	<span class="token string">"net/http"</span>
	<span class="token string">"os"</span>
	<span class="token string">"strings"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	cert<span class="token punctuation">,</span> err <span class="token operator">:=</span> tls<span class="token punctuation">.</span><span class="token function">LoadX509KeyPair</span><span class="token punctuation">(</span><span class="token string">"cert.pem"</span><span class="token punctuation">,</span> <span class="token string">"privkey.pem"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>

	caCert<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">"ca.pem"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	caCertPool <span class="token operator">:=</span> x509<span class="token punctuation">.</span><span class="token function">NewCertPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	caCertPool<span class="token punctuation">.</span><span class="token function">AppendCertsFromPEM</span><span class="token punctuation">(</span>caCert<span class="token punctuation">)</span>

	client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">&#123;</span>
		Transport<span class="token punctuation">:</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Transport<span class="token punctuation">&#123;</span>
			TLSClientConfig<span class="token punctuation">:</span> <span class="token operator">&amp;</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">&#123;</span>
				ClientAuth<span class="token punctuation">:</span>   tls<span class="token punctuation">.</span>RequireAndVerifyClientCert<span class="token punctuation">,</span>
				ClientCAs<span class="token punctuation">:</span>    caCertPool<span class="token punctuation">,</span>
				Certificates<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>tls<span class="token punctuation">.</span>Certificate<span class="token punctuation">&#123;</span>cert<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				MinVersion<span class="token punctuation">:</span>   tls<span class="token punctuation">.</span>VersionTLS12<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span>

	payloadXml<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"payload.xml"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">defer</span> payloadXml<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	payload<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>payloadXml<span class="token punctuation">)</span>
	r<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">"https://Host/OpenADR2/Simple/2.0b/EiRegisterParty"</span><span class="token punctuation">,</span> <span class="token string">"application/xml"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">defer</span> r<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> body<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="X-509-Client-Certificate-Proxy"><a href="#X-509-Client-Certificate-Proxy" class="headerlink" title="X.509 Client Certificate Proxy"></a>X.509 Client Certificate Proxy</h3><p>ì˜¤ëŠ˜ë‚ ì˜ ì¸í”„ë¼ ì‹œìŠ¤í…œì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì •ë³´ë¥¼ ê°ì¶”ê³  í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•´ ì „ì²˜ë¦¬ ë™ì‘ì„ ìˆ˜í–‰í•˜ê³  ë„˜ê²¨ì£¼ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œëŠ” Nginxì™€ ê°™ì€ ì›¹ ì„œë²„ ë˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì§€ì›í•˜ë©° ì´ëŸ¬í•œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¸í”„ë¼ êµ¬ì„±ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ì „ë‹¬ëœ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ë³„ë„ì˜ í”„ë¡ì‹œ í—¤ë”ì— í¬í•¨ì‹œì¼œ ë„˜ê²¨ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p>
<h4 id="X-SSL-CERT"><a href="#X-SSL-CERT" class="headerlink" title="X-SSL-CERT"></a>X-SSL-CERT</h4><p>ì¼ë°˜ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì— ëŒ€í•œ í”„ë¡ì‹œ í—¤ë”ì˜ í‘œì¤€ì€ ì—†ìœ¼ë¯€ë¡œ X-SSL-CERTì™€ ê°™ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” í—¤ë”ë¥¼ ì •í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œì¼œ ì „ë‹¬í•˜ë„ë¡ êµ¬ì„±í•˜ë©´ ë©ë‹ˆë‹¤. ë‹¤ìŒì€ Nginxì—ì„œì˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„± ì‹œ X-SSL-CERT í—¤ë”ì— í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre class="language-conf" data-language="conf"><code class="language-conf">server &#123;
    ssl_verify_client optional_no_ca;

    location &#x2F; &#123;
        proxy_set_header X-SSL-CERT $ssl_client_escaped_cert;
    &#125;
&#125;</code></pre>

<blockquote>
<p>ì¼ë°˜ì ìœ¼ë¡œ mTLSë¥¼ ìˆ˜í–‰í•  ë•Œ ì „ë‹¬ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ì—ì„œ ë°œê¸‰ëœ ê²ƒì¸ì§€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œ ìì²´ì ìœ¼ë¡œ ì„œëª…í•œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œëŠ” ì‹ ë¢°í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì˜ ê²€ì¦ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ìœ„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="Webpack-Certificate-Proxy"><a href="#Webpack-Certificate-Proxy" class="headerlink" title="Webpack Certificate Proxy"></a>Webpack Certificate Proxy</h4><p>ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” Webpackì—ì„œëŠ” ìì²´ì ìœ¼ë¡œ í”„ë¡ì‹œ êµ¬ì„±ì„ ì§€ì›í•˜ëŠ” <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a>ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ê³¼ ë™ì¼í•˜ë¯€ë¡œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ Webpack í”„ë¡ì‹œ ì„œë²„ë¥¼ ê²½ìœ í•˜ë„ë¡ í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'spdy'</span><span class="token punctuation">,</span> <span class="token comment">// https</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'cert.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'privkey.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">requestCert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">rejectUnauthorized</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">minVersion</span><span class="token operator">:</span> <span class="token string">'TLSv1.2'</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://127.0.0.1:5000'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">xfwd</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">rejectUnauthorized</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token function">onProxyReq</span><span class="token punctuation">(</span><span class="token parameter">proxyReq<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">const</span> cert <span class="token operator">=</span> req<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">getPeerCertificate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>cert <span class="token operator">&amp;&amp;</span> cert<span class="token punctuation">.</span>raw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">const</span> pem <span class="token operator">=</span> <span class="token string">'-----BEGIN CERTIFICATE-----'</span> <span class="token operator">+</span> cert<span class="token punctuation">.</span>raw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-----END CERTIFICATE-----'</span><span class="token punctuation">;</span>
                        proxyReq<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'X-SSL-CERT'</span><span class="token punctuation">,</span> pem<span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>requestCert ì˜µì…˜ì„ ì¼œì•¼ onProxyReq í•¨ìˆ˜ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ê°€ì ¸ì™€ì„œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://www.cloudflare.com/ko-kr/learning/access-management/what-is-mutual-authentication/">What protocols support mutual authentication?</a></li>
<li><a href="https://www.cloudflare.com/ko-kr/learning/access-management/what-is-mutual-tls/">What is mutual TLS (mTLS)?</a></li>
<li><a href="https://downey.io/notes/dev/curl-using-mutual-tls/">how to curl an endpoint protected by mutual tls (mtls)</a></li>
<li><a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#var_ssl_client_escaped_cert">Nginx SSL Client Cert</a></li>
<li><a href="https://webpack.js.org/configuration/dev-server/#devserverserver">Webpack DevServer.server</a></li>
</ul>
]]></content>
      <tags>
        <tag>X.509</tag>
        <tag>mTLS</tag>
        <tag>X-SSL-CERT</tag>
      </tags>
  </entry>
  <entry>
    <title>PKI(Public Key Infrastructure)</title>
    <url>/pki/</url>
    <content><![CDATA[<blockquote>
<p>ì •ë³´ë³´ì•ˆ ì „ë¬¸ê°€ì˜ ìˆ˜ì¤€ì€ ì•„ë‹ì§€ë¼ë„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³´ì•ˆ ê¸°ìˆ ì— ëŒ€í•´ì„œ ì–´ëŠì •ë„ ì´í•´í•˜ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤. ì´ ê¸€ì€ <a href="/ssl-certificate/">SSL ì¸ì¦ì„œ</a>ì™€ <a href="/mutual-tls/">Mutual TLS</a>ì—ì„œ ì–¸ê¸‰í•˜ê±°ë‚˜ ë‹¤ë£¨ì–´ë³¸ X.509 ì¸ì¦ì„œì™€ í•¨ê»˜ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ë¼ê³  í•˜ëŠ” PKIì™€ ê´€ë ¨ëœ ìš©ì–´ì™€ ê°œë…ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë´…ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="X-509-Certificate"><a href="#X-509-Certificate" class="headerlink" title="X.509 Certificate"></a>X.509 Certificate</h2><p><em>A public key infrastructure (PKI) is a set of roles, policies, hardware, software and procedures needed to create, manage, distribute, use, store and revoke digital certificates and manage public-key encryption.</em></p>
<p>X.509ëŠ” <a href="https://datatracker.ietf.org/doc/html/rfc5280">RFC5280</a>ë¡œ ì •ì˜ë˜ì–´ìˆëŠ” ë””ì§€í„¸ ì¸ì¦ì„œ(ê³µê°œí‚¤ ì¸ì¦ì„œ)ì˜ í‘œì¤€ í˜•ì‹ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ëŠ” HTTPS í”„ë¡œí† ì½œì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì¸ì¦ì„œ í˜•ì‹ì´ê¸°ë„ í•˜ë“¯ì´ ì „ì„¸ê³„ì ìœ¼ë¡œ ë””ì§€í„¸ ì¸ì¦ì„œë¼ í•¨ì€ ITU-T X.509 í‘œì¤€ ë°©ì‹ìœ¼ë¡œ ì‘ì„±ëœ X.509 ì¸ì¦ì„œë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ­ë‚´ì—ì„œ ì‚¬ìš©ë˜ë˜ <a href="https://ko.wikipedia.org/wiki/%EA%B3%B5%EB%8F%99%EC%9D%B8%EC%A6%9D%EC%84%9C">ê³µë™ì¸ì¦ì„œ(ê³µì¸ì¸ì¦ì„œ)</a>ë„ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ ê¸°ìˆ ì„ í™œìš©í•´ì„œ ë§Œë“  ë””ì§€í„¸ ì¸ì¦ì„œì´ì§€ë§Œ í•œêµ­ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¸ì¦ì„œ í˜•ì‹ì´ë¼ëŠ” ì ì…ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl x509 <span class="token parameter variable">-in</span> local.dev+1.pem <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span>
Certificate:
    Data:
        Version: <span class="token number">3</span> <span class="token punctuation">(</span>0x2<span class="token punctuation">)</span>
        Serial Number:
            e5:29:9a:ba:66:<span class="token punctuation">..</span>.
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: O <span class="token operator">=</span> mkcert development CA, OU <span class="token operator">=</span> ubuntu@ubuntu, CN <span class="token operator">=</span> mkcert ubuntu@ubuntu
        Validity
            Not Before: Jul <span class="token number">12</span> <span class="token number">21</span>:55:43 <span class="token number">2022</span> GMT
            Not After <span class="token builtin class-name">:</span> Oct <span class="token number">12</span> <span class="token number">21</span>:55:43 <span class="token number">2024</span> GMT
        Subject: O <span class="token operator">=</span> mkcert development certificate, OU <span class="token operator">=</span> ubuntu@ubuntu
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit<span class="token punctuation">)</span>
                Modulus:
                    00:d8:c2:77:4f:4f:9d:1c:c2:70:b2:00:52:4f:e7:
                    <span class="token punctuation">..</span>.
                Exponent: <span class="token number">65537</span> <span class="token punctuation">(</span>0x10001<span class="token punctuation">)</span>
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Server Authentication
            X509v3 Authority Key Identifier:
                keyid:3B:31:5D:2F:7C:D6:E6:E2:F5:9B:66:1D:E5:75:5C:11:C6:85:8C:6D

            X509v3 Subject Alternative Name:
                DNS:local.dev, DNS:localhost
    Signature Algorithm: sha256WithRSAEncryption
         <span class="token number">43</span>:e1:81:18:d5:04:ca:d4:73:68:85:4d:1d:d4:79:cb:02:0d:
         <span class="token punctuation">..</span>.</code></pre>

<p>ìœ„ ì˜ˆì‹œëŠ” ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ì„¤ ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬ì¸ <a href="https://github.com/FiloSottile/mkcert">mkcert</a>ë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ X.509 ì¸ì¦ì„œì— ëŒ€í•œ ì •ë³´ë¥¼ openssl ë„êµ¬ë¡œ ì¸ì¦ì„œì— í¬í•¨ëœ ì •ë³´ë¥¼ í™•ì¸í•´ë³¸ ê²ƒì…ë‹ˆë‹¤. ì¸ì¦ì„œì— í¬í•¨ë  ìˆ˜ ìˆëŠ” í•„ë“œë“¤ì€ RFC5280 ë¬¸ì„œì— ì„¤ëª…ë˜ì–´ìˆëŠ”ë° ë°œê¸‰ì(Issuer), ì„œëª… ì•Œê³ ë¦¬ì¦˜(Signature Algorithm), ì†Œìœ ì(Subject), ì†Œìœ ìì˜ ê³µê°œí‚¤(Subject Public Key Info) ê·¸ë¦¬ê³  ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë¶€ê°€ ì •ë³´(Extensions)ì…ë‹ˆë‹¤. </p>
<p>HTTPS í”„ë¡œí† ì½œ í†µì‹ ì—ì„œ TLS í•¸ë“œì‰ì´í‚¹ ê³¼ì • ì¤‘ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì—ì„œ ì œê³µí•œ X.509 ì¸ì¦ì„œ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬ ë¶€ê°€ ì •ë³´ ì¤‘ SAN(X509v3 Subject Alternative Name)ì— ì…ë ¥ëœ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ë„ë©”ì¸ì´ë‚˜ IP ì£¼ì†Œì— ëŒ€í•œ ì‹ ì›ì„ ì¶”ê°€ì ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ„ ì˜ˆì‹œì—ì„œëŠ” localhostì™€ local.devë¼ëŠ” í˜¸ìŠ¤íŠ¸ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>X.509 ì¸ì¦ì„œëŠ” ìƒìœ„ ê¸°ê´€ì—ì„œ ì†Œìœ ìì˜ ê³µê°œí‚¤ë¥¼ ì „ìì„œëª…í•œ ê²ƒìœ¼ë¡œ ì•”í˜¸í™”ê°€ ëª©ì ì´ ì•„ë‹Œ ê³µê°œí‚¤ì— ëŒ€í•œ ì†Œìœ ìì˜ ì‹ ì›ì„ ê²€ì¦í•˜ê³ ì í•¨ì— ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="PEM-Format"><a href="#PEM-Format" class="headerlink" title="PEM Format"></a>PEM Format</h3><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl x509 <span class="token parameter variable">-in</span> local.dev+1.pem
-----BEGIN CERTIFICATE-----
MIIEDDCCAnSgAwIBAgIRAOUpmrpmzWKOajX3U1ze1McwDQYJKoZIhvcNAQELBQAw
VzEeMBwGA1UEChMVbWtjZXJ0IGRldmVsb3BtZW50IENBMRYwFAYDVQQLDA11YnVu
dHVAdWJ1bnR1MR0wGwYDVQQDDBRta2NlcnQgdWJ1bnR1QHVidW50dTAeFw0yMjA3
MTIyMTU1NDNaFw0yNDEwMTIyMTU1NDNaMEExJzAlBgNVBAoTHm1rY2VydCBkZXZl
bG9wbWVudCBjZXJ0aWZpY2F0ZTEWMBQGA1UECwwNdWJ1bnR1QHVidW50dTCCASIw
DQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANjCd09PnRzCcLIAUk/nr27i2uvz
tXSF1vbwUby3dPWQcZuR3cLRvIeNv6oOMLnf9uGbI/pjlRcCoZwk+ETUZtVrsFsv
NZGCir34QbXkNb96/M8HSM3ZC9soeijU8NqoWDjr4LGtU+FX8pOOHbsjJoiyIH7l
g76EpOUrasnVmx6T8xoUlye2si0A+VbV/J6tlJXKix0qidliIiBIY2HWktN+HBIY
bttuRwXOK22i7KPwT/jURgZlcAq5Lmfu9+pTs5ak2jXSaneWLkKF0/9RxMy2jGKf
dTwYqU4ZjbZz1zXs+UeI7hgsPqprhnVBkDAejNrXNJ1O390IbwtgboJ/V6cCAwEA
AaNpMGcwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMB8GA1Ud
IwQYMBaAFDsxXS981ubi9ZtmHeV1XBHGhYxtMB8GA1UdEQQYMBaCCWxvY2FsLmRl
doIJbG9jYWxob3N0MA0GCSqGSIb3DQEBCwUAA4IBgQBD4YEY1QTK1HNohU0d1HnL
Ag3Pm9bUJxGWw2bOAO+0Dgdau3Fn+72JPz7ZYGX3Deny01TYDEoeno7VOY+gq2u0
F4L1SBNWdXhdxxfj/4JK3r1FpmgmEpPOVyrO2KMWgPlNu4JV8jUc/OIOeKYe8S9V
ddM7VyRjZSCNKsI4kneeu/fZFXLMtWS8lcj/hubQdGYXuSaSZHihpTPvCR2XP6z+
NbeDndqo4YemGIUS2eyp4MQCwlR910FUv3NNgk43iJw368ma8p/jigQeUx9reyYK
ijxd/rbwmg9k5Mks+CgK7pi0Bd8uJxD5i9KgitDBetjoPbw8xIazDUbhtPofs3y8
HTGqR4kszm4JZMh0310Ff3hkqjXwT1oVEMrBUUUZrSBjuUEy7bujgu1JBV1f/j5l
LzS5dMOM68x7my7YVSUG+hbjeB9w9eZWLx/YZ707ssvAfKVvWoyKrwwlZTQRs7mI
HRcM9stz0/k/ZQZH0IBerjuPJ93BKH0wRYxU33i3htQ<span class="token operator">=</span>
-----END CERTIFICATE-----</code></pre>

<p>ìœ„ ê²°ê³¼ëŠ” X.509 ì¸ì¦ì„œê°€ ì‹¤ì œë¡œ íŒŒì¼ì— ì €ì¥ëœ í˜•íƒœë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê°™ì´ êµ¬ì„±ë˜ëŠ” ë°©ì‹ì„ PEM(Privacy Enhanced Mail)ì´ë¼ê³  í•˜ëŠ”ë° X.509 ì¸ì¦ì„œë¥¼ ì €ì¥í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ í˜•ì‹ì…ë‹ˆë‹¤. ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¡œ ì €ì¥ë˜ëŠ” DER(Distinguished Encoding Representation)ë¡œë„ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë‚˜ ì‹œìŠ¤í…œ ê°„ ì•ˆì „í•˜ê²Œ ì „ë‹¬ë  ìˆ˜ ìˆë„ë¡ <a href="/base64/">Base64</a>ë¡œ ì¸ì½”ë”©ë˜ì–´ ì•„ìŠ¤í‚¤ ì½”ë“œí˜•íƒœë¡œ ë˜ì–´ìˆëŠ” PEM í˜•ì‹ì´ ì„ í˜¸ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<h3 id="Certificate-Profiles"><a href="#Certificate-Profiles" class="headerlink" title="Certificate Profiles"></a>Certificate Profiles</h3><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl s_client <span class="token parameter variable">-showcerts</span> <span class="token parameter variable">-connect</span> naver.com:443 <span class="token operator">&lt;</span>/dev/null
ubuntu@ubuntu:~/x509$ openssl x509 <span class="token parameter variable">-in</span> naver.com.pem <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span>
Certificate:
    Data:
        Version: <span class="token number">3</span> <span class="token punctuation">(</span>0x2<span class="token punctuation">)</span>
        Serial Number:
            07:f2:85:21:53:b1:50:67:e3:c6:77:aa:3a:83:be:dd
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C <span class="token operator">=</span> US, O <span class="token operator">=</span> DigiCert Inc, CN <span class="token operator">=</span> DigiCert TLS RSA SHA256 <span class="token number">2020</span> CA1
        Validity
            Not Before: May <span class="token number">23</span> 00:00:00 <span class="token number">2022</span> GMT
            Not After <span class="token builtin class-name">:</span> Jun  <span class="token number">7</span> <span class="token number">23</span>:59:59 <span class="token number">2023</span> GMT
        Subject: C <span class="token operator">=</span> KR, ST <span class="token operator">=</span> Gyeonggi-do, L <span class="token operator">=</span> Seongnam-si, O <span class="token operator">=</span> NAVER Corp., CN <span class="token operator">=</span> www.naver.net
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit<span class="token punctuation">)</span>
                Modulus:
                    00<span class="token punctuation">..</span>.
                Exponent: <span class="token number">65537</span> <span class="token punctuation">(</span>0x10001<span class="token punctuation">)</span>
        X509v3 extensions:
            X509v3 Authority Key Identifier:
                keyid:B7:6B:A2:EA:A8:AA:84:8C:79:EA:B4:DA:0F:98:B2:C5:95:76:B9:F4

            X509v3 Subject Key Identifier:
                F5:3C:13:14:C9:7B:15:36:50:8C:3E:89:40:EE:2C:E0:22:2F:9E:61
            X509v3 Subject Alternative Name:
                DNS:www.naver.net, DNS:www.naver.asia, DNS:www.naver.co, DNS:www.naver.kr, DNS:www.naver.co.kr, DNS:naver.com, DNS:naver.net, DNS:naver.asia, DNS:naver.co, DNS:naver.kr, DNS:naver.co.kr
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 CRL Distribution Points:

                Full Name:
                  URI:http://crl3.digicert.com/DigiCertTLSRSASHA2562020CA1-4.crl

                Full Name:
                  URI:http://crl4.digicert.com/DigiCertTLSRSASHA2562020CA1-4.crl

            X509v3 Certificate Policies:
                Policy: <span class="token number">2.23</span>.140.1.2.2
                  CPS: http://www.digicert.com/CPS

            Authority Information Access:
                OCSP - URI:http://ocsp.digicert.com
                CA Issuers - URI:http://cacerts.digicert.com/DigiCertTLSRSASHA2562020CA1-1.crt

            <span class="token punctuation">..</span>.
    Signature Algorithm: sha256WithRSAEncryption
         2e<span class="token punctuation">..</span>.</code></pre>

<p>ë„¤ì´ë²„ ì‚¬ì´íŠ¸ì˜ ì„œë²„ ì¸ì¦ì„œë¥¼ ì „ë‹¬ë°›ì€ í›„ X.509 ì¸ì¦ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•´ë³´ë©´ ë„¤ì´ë²„ì˜ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•œ ê¸°ê´€ì€ DigiCert ì´ë©° ë„¤ì´ë²„ ì¸ì¦ì„œì— í¬í•¨ë˜ëŠ” ê³µê°œí‚¤ë¥¼ sha256WithRSAEncryption ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œ ì „ì ì„œëª…ì„ í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì¸ì¦ì„œ ë°œê¸‰ ê¸°ê´€(Issuer)</li>
<li>ì¸ì¦ì„œ ë§Œë£Œ ê¸°í•œ(Validity) </li>
<li>ê³µê°œí‚¤ ì†Œìœ ì(Subject) </li>
<li>ê³µê°œí‚¤(Subject Public Key Info)</li>
<li>ì„œëª… ì•Œê³ ë¦¬ì¦˜(Signature Algorithm)</li>
<li>ì†Œìœ ì ëŒ€ì²´ ì´ë¦„(Subject Alternative Name)</li>
</ul>
<h2 id="PKCS"><a href="#PKCS" class="headerlink" title="PKCS"></a>PKCS</h2><p>PKCS(Public key Cryptography Standard)ëŠ” ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì•ˆì „í•˜ê²Œ ì •ë³´ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œì…ë‹ˆë‹¤.</p>
<h3 id="PKCS-8"><a href="#PKCS-8" class="headerlink" title="PKCS#8"></a>PKCS#8</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc5208">RFC5208</a>ë¡œ ì •ì˜ëœ PKCS#8ì€ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê°œì¸í‚¤ë¥¼ í‘œí˜„í•˜ê³  ì €ì¥í•˜ê¸° ìœ„í•œ í‘œì¤€ìœ¼ë¡œ ì•ì„œ X.509 ì¸ì¦ì„œì™€ ê°™ì´ PEM í˜•ì‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="/mutual-tls/">Mutual TLS</a>ì—ì„œëŠ” ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ PEM í˜•ì‹ì˜ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ í†µí•´ í‚¤ ìŠ¤í† ì–´ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ PKCS8EncodedKeySpec ì´ë€ ê²ƒì„ ì‚¬ìš©í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkey <span class="token parameter variable">-in</span> local.dev+1-key.pem
-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDYwndPT50cwnCy
AFJP569u4trr87V0hdb28FG8t3T1kHGbkd3C0byHjb+qDjC53/bhmyP6Y5UXAqGc
JPhE1GbVa7BbLzWRgoq9+EG15DW/evzPB0jN2QvbKHoo1PDaqFg46+CxrVPhV/KT
jh27IyaIsiB+5YO+hKTlK2rJ1Zsek/MaFJcntrItAPlW1fyerZSVyosdKonZYiIg
SGNh1pLTfhwSGG7bbkcFzittouyj8E/41EYGZXAKuS5n7vfqU7OWpNo10mp3li5C
hdP/UcTMtoxin3U8GKlOGY22c9c17PlHiO4YLD6qa4Z1QZAwHoza1zSdTt/dCG8L
YG6Cf1enAgMBAAECggEAIehp2ZJOtY0FLBM4zR8lJmd+b6K0JAI72m1FnAvm0/NA
kmGDG1LL9ziJXwTRQoJykGBAhI7HZ84VkeOGot3HKGOsNtdvvc95/LW1Mcr9TXLj
0U8GaI0neaUfVvvYoZvsERt1DtZaZMnpPIPiyr9467FRvAgTT95YHTFphyFPHr0k
VlAd4qAbyIzOSiGmoBg2Krjk5dXW9Cg7YIxKNUXlxMHNlP3c9zxKyy7Cd3qcp4tF
zKxqiTXPEdOxw3b66P/2+RQWi6kCQfu2RINZLjzPBajjEYJ8/o8sVXDs1Bl6pPnp
YzMLjHapX8V+NuuG8r9O8Y28siO0NT+tpVnyJHUE4QKBgQDdTb7KJySyUYk+xySC
Pv3lpBucfnJDy7veWNdiu4KIMVtqnenPJATVE9ovdWFNNrr+1cLJG/uvM3AOSTLH
JRXHcFewm2ipxovgr6SKx65zevHbbVMcaDir3hdvh6h7qG/naURQlNz1xups68g8
9xvbBnFp/X4fTDto+QQUIR5hRQKBgQD6vlcYJUcG7rr6nOEacUtxvhE59qX5sWDC
AvrfP/IUjitsqiH9YRTkuUfYQXGQMMfpXCViZ/UVQEsiI4LMY3wM4pquWplZVn9C
eyrbgZn/QP2Bp1nExmL21HWGooBG6l2lxGM18lMIzY7vE5GMzGGkH8rRHqgkIAku
TIC5G/sl+wKBgQCGvXUyY87F+zrSzDEAVBYGIXrmN16exIaoA/Nvm7cH8PU13tui
UM3YZfPr/U2202HbEo88HxuIOos5R3vxIDU4bsAVOSnqZIZ50LcgAB/JE8v5y4BU
xWfrzJb8Qt5kG9O2U7NSVLCLvAazNoN+Cv4cxrl6zOpjZ+isKyE+mEOE+QKBgQC5
M1l09iOuFSp57OG+/CtzSaXDoFAbS05iPn055CtTz2Z3jnoogkpCXi+YpU3R6JXf
4TWjp5E4LxLPllcHy/tWMRF68mQNvnukiQCwvNsX09Lqrsb5NmbmVSqxVNlWh8i/
pXx53hBCkkGeiF+bFWKRLQJKz0/1zsu5LLxu/SHVfQKBgGuldPS/1zqt1eblPAeo
bBot1LMCxS8Bk6n1dMiWDM0+yANwh+tkA+MFyZTbdPjjf2e+RAXwUtsKLSvJha0E
XLEZPSQL7WDIleYVJ5oAX4nfHS4eNZzvxnL7bblcWtekrBNnHinKS+Cqd+ATLixL
nDpi0w+DTfQu93eKXg1NCYrg
-----END PRIVATE KEY-----

ubuntu@ubuntu:~/x509$ openssl pkey <span class="token parameter variable">-in</span> local.dev+1-key.pem <span class="token parameter variable">-text</span> <span class="token parameter variable">-noout</span>
RSA Private-Key: <span class="token punctuation">(</span><span class="token number">2048</span> bit, <span class="token number">2</span> primes<span class="token punctuation">)</span>
modulus:
    00<span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.</code></pre>

<h3 id="PKCS-12"><a href="#PKCS-12" class="headerlink" title="PKCS#12"></a>PKCS#12</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc7292">RFC7292</a>ë¡œ ì •ì˜ëœ PKCS#12ëŠ” ì¸ì¦ì„œì™€ ê°œì¸í‚¤ ë“± ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬ì¡°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë‹¤ì–‘í•œ í•­ëª©ë“¤ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ êµí™˜í•˜ê¸° ìœ„í•œ ì •ë³´ êµí™˜ì˜ í‘œì¤€ì…ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkcs12 <span class="token parameter variable">-in</span> local.dev+1.pkcs12
Enter Import Password: mambo
Bag Attributes
    localKeyID: <span class="token number">16</span> CC 2D CE 9F D0 <span class="token number">52</span> C9 <span class="token number">72</span> <span class="token number">97</span> <span class="token number">90</span> DC EC AB DF <span class="token number">28</span> 0B EA B6 AA
<span class="token assign-left variable">subject</span><span class="token operator">=</span>O <span class="token operator">=</span> mkcert development certificate, OU <span class="token operator">=</span> ubuntu@ubuntu

<span class="token assign-left variable">issuer</span><span class="token operator">=</span>O <span class="token operator">=</span> mkcert development CA, OU <span class="token operator">=</span> ubuntu@ubuntu, CN <span class="token operator">=</span> mkcert ubuntu@ubuntu

-----BEGIN CERTIFICATE-----
MIIEDDCCAnSgAwIBAgIRAOUpmrpmzWKOajX3U1ze1McwDQYJKoZIhvcNAQELBQAw
VzEeMBwGA1UEChMVbWtjZXJ0IGRldmVsb3BtZW50IENBMRYwFAYDVQQLDA11YnVu
dHVAdWJ1bnR1MR0wGwYDVQQDDBRta2NlcnQgdWJ1bnR1QHVidW50dTAeFw0yMjA3
MTIyMTU1NDNaFw0yNDEwMTIyMTU1NDNaMEExJzAlBgNVBAoTHm1rY2VydCBkZXZl
bG9wbWVudCBjZXJ0aWZpY2F0ZTEWMBQGA1UECwwNdWJ1bnR1QHVidW50dTCCASIw
DQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANjCd09PnRzCcLIAUk/nr27i2uvz
tXSF1vbwUby3dPWQcZuR3cLRvIeNv6oOMLnf9uGbI/pjlRcCoZwk+ETUZtVrsFsv
NZGCir34QbXkNb96/M8HSM3ZC9soeijU8NqoWDjr4LGtU+FX8pOOHbsjJoiyIH7l
g76EpOUrasnVmx6T8xoUlye2si0A+VbV/J6tlJXKix0qidliIiBIY2HWktN+HBIY
bttuRwXOK22i7KPwT/jURgZlcAq5Lmfu9+pTs5ak2jXSaneWLkKF0/9RxMy2jGKf
dTwYqU4ZjbZz1zXs+UeI7hgsPqprhnVBkDAejNrXNJ1O390IbwtgboJ/V6cCAwEA
AaNpMGcwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMB8GA1Ud
IwQYMBaAFDsxXS981ubi9ZtmHeV1XBHGhYxtMB8GA1UdEQQYMBaCCWxvY2FsLmRl
doIJbG9jYWxob3N0MA0GCSqGSIb3DQEBCwUAA4IBgQBD4YEY1QTK1HNohU0d1HnL
Ag3Pm9bUJxGWw2bOAO+0Dgdau3Fn+72JPz7ZYGX3Deny01TYDEoeno7VOY+gq2u0
F4L1SBNWdXhdxxfj/4JK3r1FpmgmEpPOVyrO2KMWgPlNu4JV8jUc/OIOeKYe8S9V
ddM7VyRjZSCNKsI4kneeu/fZFXLMtWS8lcj/hubQdGYXuSaSZHihpTPvCR2XP6z+
NbeDndqo4YemGIUS2eyp4MQCwlR910FUv3NNgk43iJw368ma8p/jigQeUx9reyYK
ijxd/rbwmg9k5Mks+CgK7pi0Bd8uJxD5i9KgitDBetjoPbw8xIazDUbhtPofs3y8
HTGqR4kszm4JZMh0310Ff3hkqjXwT1oVEMrBUUUZrSBjuUEy7bujgu1JBV1f/j5l
LzS5dMOM68x7my7YVSUG+hbjeB9w9eZWLx/YZ707ssvAfKVvWoyKrwwlZTQRs7mI
HRcM9stz0/k/ZQZH0IBerjuPJ93BKH0wRYxU33i3htQ<span class="token operator">=</span>
-----END CERTIFICATE-----
Bag Attributes
    localKeyID: <span class="token number">16</span> CC 2D CE 9F D0 <span class="token number">52</span> C9 <span class="token number">72</span> <span class="token number">97</span> <span class="token number">90</span> DC EC AB DF <span class="token number">28</span> 0B EA B6 AA
Key Attributes: <span class="token operator">&lt;</span>No Attributes<span class="token operator">></span>
Enter PEM pass phrase: mambo
Verifying - Enter PEM pass phrase: mambo
-----BEGIN ENCRYPTED PRIVATE KEY-----
MIIFHDBOBgkqhkiG9w0BBQ0wQTApBgkqhkiG9w0BBQwwHAQIUCWpIEy8DAECAggA
MAwGCCqGSIb3DQIJBQAwFAYIKoZIhvcNAwcECAwP9e11T4W6BIIEyP1XL6GHaVmq
cgu+jiWoeopRciYOLS0MWB8Yzb/8Rslyx1l1MAluW+QP30qCbVhhO6l7ulziGC0h
RNNNittmdSrZKPbNtch8ZY0G/dWoMY9VfjJSdndbWwXv8zulRXMYiXeVME8MsmG5
HPTZyc785dVpeCYaFt6muWw2ABnP97ShSLdIRAeY2G6HDLnEz3/hjbYfE2UFF68i
k/wEEtK5f48XxM+PuyDKk4b3+qFfqVSRS6QbdCnrKVQfGqeiWQKOdt/FQZ82/xIq
lu3kVuXPmEaN8W62MK1vCocjm/AXJ6l01gUqL00a6ntdTdsCXA6g0qpcwZDd6/1g
VgsEK0Y1mbzfq1YS52zw+obHp6nIJpA7Fnllf6irT3mSyEIzorIZ4z4As6CA91Em
M4DjFJ6FlLpmVIofe0JlzGxTZ1yueWLZjGf+3sEImikF6ndzh+dCV0ox73h6g8Vs
D79MHkaZfuBL0ZrxyGSOomRO9WhRrjUihlgILLtMHStWDDTp4F194SiD2T+xC25L
uvpfQAmLYYL+otb9n2cv1thik/MjZCDk5duYcRDLUJ3G23MaHk6DC13JaDk925zF
hbnFCt1PTzvWZ+HjE1GEFiDr88YJkyLdI7VKTsMC/bcfAE7SrpaqX0cLVjnmlIQK
5ScNYvB+PxCJj95YZsVpZ8cw9V/NlkWT1kpSX//G8Wl4YKW0vM25aBCca2hFqbCD
C3/6vqqx4z8D+r3K8KRVV/7y94JaMoHjrvd1fjUDOQfuilh3bgfCmhuFS8IV/HjB
bkuPY/O8O8abcb16wTMReKqahpmFsdOwIC/2gqoTQbKp2xbtY+gcvcObsWQRMcMH
mrHx2vMO4Tr4BKgNBxz4Gv5KAE/Pa2Gvqs0O5xsLNxF1kMUyT5CkrAuUayvysGHv
Y98p7ORHFKfA+tFOxgf7jBrs6/BpQmZHrbOU4v4WplpcbUe9e31l11n8BkQ/qhcO
rtsxqcYub3PRXwpm68LhDacKTdtyVv/j6yYba/RbfSn8ZwZAiwS6oW69qa/JCtEC
iw0058pNxHujA/A4Ceb7G9uFPhNb2UfgwzmID5tzxOhQype0vi02Vc1sMZHAsmII
iIpJUmh37Td1VkxUg+3FspeOmw00z4WNkrf1SMpFabpySw4BXcJMDIOxYhQI/ij6
mPglTjvJHF6eMw53l84MJIUHFkQDGTX2eLZBW91lDxVxmMkt74G7rD9j6pfm/Eo5
gezjc9DcX3ot1T6Gv0rk0ilF3Vfuw5+f46ZtZBQqYlFalKgYVpelidv2y5kC7gEn
fabH93l9GFHU4OKT1IESwPt4E0pJttVfTAwx3dBT/h8BgfN3bOqM1EdZF0/KIoc1
NLl1H2o/EZ94Jig25N3jqJ7w0riNE3dE891Fu715nfEjfSxIpMKC78FR/J9qTXgu
6sUwNgCs/DdVqruOjwFKupNgQcj7fwSJtnyQGY9fpZjAG+e5MiPxNFDjaoLu8M7k
<span class="token number">5</span>+CGelITcwbq2U8InZIpZTOCLif3zuHg0hkf3GXCsAapfQnmovR/xjtJBWEZVw+Z
2otgK9OruIMuEwxzxX2awqI5zDN2yBCnP62eEYoJ+HKM21i/hexMF4jIh9H+H99W
<span class="token assign-left variable">oFgNCNUwDw6RXPEUEqnTzQ</span><span class="token operator">==</span>
-----END ENCRYPTED PRIVATE KEY-----</code></pre>

<h4 id="Convert-PEM-to-PKCS-12"><a href="#Convert-PEM-to-PKCS-12" class="headerlink" title="Convert PEM to PKCS#12"></a>Convert PEM to PKCS#12</h4><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ openssl pkcs12 <span class="token parameter variable">-export</span> <span class="token parameter variable">-in</span> local.dev+1.pem <span class="token parameter variable">-inkey</span> local.dev+1-key.pem <span class="token parameter variable">-out</span> local.dev+1.pkcs12
Enter Export Password: mambo
Verifying - Enter Export Password: mambo</code></pre>

<h4 id="Convert-PKCS-12-to-JKS"><a href="#Convert-PKCS-12-to-JKS" class="headerlink" title="Convert PKCS#12 to JKS"></a>Convert PKCS#12 to JKS</h4><pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ keytool <span class="token parameter variable">-importkeystore</span> <span class="token parameter variable">-srckeystore</span> local.dev+1.pkcs12 <span class="token parameter variable">-srcstoretype</span> PKCS12 <span class="token parameter variable">-deststoretype</span> JKS <span class="token parameter variable">-destkeystore</span> local.dev+1.jks
Importing keystore local.dev+1.pkcs12 to local.dev+1.jks<span class="token punctuation">..</span>.
Enter destination keystore password: mambo
Re-enter new password: mambo
Enter <span class="token builtin class-name">source</span> keystore password: mambo
Entry <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token number">1</span> successfully imported.
Import <span class="token builtin class-name">command</span> completed:  <span class="token number">1</span> entries successfully imported, <span class="token number">0</span> entries failed or cancelled

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 <span class="token function">which</span> is an industry standard <span class="token function">format</span> using <span class="token string">"keytool -importkeystore -srckeystore local.dev+1.jks -destkeystore local.dev+1.jks -deststoretype pkcs12"</span><span class="token builtin class-name">.</span></code></pre>

<p>Java KeyStore APIì—ì„œëŠ” PKCS#12ë¥¼ ê¸°ë³¸ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ PKCS#12ë¡œ ë˜ì–´ìˆëŠ” íŒŒì¼ì„ ê·¸ëŒ€ë¡œ KeyStoreë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ êµ³ì´ JKS í˜•ì‹ì˜ íŒŒì¼ë¡œ ë³€í™˜í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ë§ˆì§€ë§‰ ê²½ê³  ë¬¸êµ¬ì—ì„œ ì•Œë ¤ì£¼ëŠ” ê²ƒì²˜ëŸ¼ JKS í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” í‚¤ìŠ¤í† ì–´ íŒŒì¼ì„ PKCS#12ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì•„ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ubuntu@ubuntu:~/x509$ keytool <span class="token parameter variable">-importkeystore</span> <span class="token parameter variable">-srckeystore</span> local.dev+1.jks <span class="token parameter variable">-destkeystore</span> local.dev+1.jks <span class="token parameter variable">-deststoretype</span> pkcs12
Enter <span class="token builtin class-name">source</span> keystore password: mambo
Entry <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token number">1</span> successfully imported.
Import <span class="token builtin class-name">command</span> completed:  <span class="token number">1</span> entries successfully imported, <span class="token number">0</span> entries failed or cancelled

Warning:
Migrated <span class="token string">"local.dev+1.jks"</span> to PKCS12. The JKS keystore is backed up as <span class="token string">"local.dev+1.jks.old"</span><span class="token builtin class-name">.</span></code></pre>

<h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul>
<li><a href="https://www.youtube.com/watch?v=t0F7fe5Alwg">Public Key Infrastructure PKI Concepts</a></li>
<li><a href="https://stackoverflow.com/a/7886248">Using openssl to get the certificate from a server</a></li>
<li><a href="https://stackoverflow.com/a/15144560">Converting PKCS#12 certificate into PEM using OpenSSL</a></li>
<li><a href="https://d2.naver.com/helloworld/197937">JCAë¡œ ì´í•´í•˜ëŠ” ì•”í˜¸í™”ì™€ ë³´ì•ˆ</a></li>
<li><a href="https://d2.naver.com/helloworld/227016">JCAë¡œ ì´í•´í•˜ëŠ” ì•”í˜¸í™”ì™€ ë³´ì•ˆ 2</a></li>
<li><a href="https://gruuuuu.github.io/security/what-is-x509/">í˜¸ë‹¤ë‹¥ ê³µë¶€í•´ë³´ëŠ” x509ì™€ ì¹œêµ¬ë“¤</a></li>
</ul>
]]></content>
      <tags>
        <tag>X.509</tag>
        <tag>PKI</tag>
        <tag>PKCS#8</tag>
        <tag>PKCS#12</tag>
      </tags>
  </entry>
  <entry>
    <title>ê°œë°œìê°€ ì•Œì•„ì•¼í•  ë„¤íŠ¸ì›Œí¬ ì§€ì‹</title>
    <url>/network/</url>
    <content><![CDATA[<p><img data-src="/images/posts/network/01.jpg" alt="ë…¸ë€ê±´ ëŒëŒì´..."></p>
<p><a href="https://roadmap.sh/backend">roadmap.sh</a>ë¥¼ ì°¸ê³ í•˜ë©´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°œë°œì ëª¨ë‘ ì¸í„°ë„·ì´ë¼ëŠ” ê¸°ì´ˆ ì§€ì‹ì„ í•„ìš”ë¡œ í•˜ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìœ„ ì¥ë¹„ë“¤ì´ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì–´ë– í•œ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ë¹„ë¼ëŠ” ê²ƒì„ ì•„ëŠ” ê°œë°œìê°€ ì–¼ë§ˆë‚˜ ë ê¹Œìš”? ì´ë¯¸ ì´ê²ƒë“¤ì„ ì•Œê±°ë‚˜ ë‹¤ë£¨ì§€ ì•ŠëŠ” ê²½í—˜ ë§ì€ ê°œë°œìë“¤ì€ â€œê°œë°œìëŠ” ì €ê²ƒì„ ì‚¬ìš©í•  ì¼ì´ ì—†ì–´ìš”â€ë¼ê³  í• í…Œì§€ìš”. ë¬¼ë¡  ì €ë„ ìœ„ ì¥ë¹„ë“¤ì„ ê²½í—˜í•œ ê²ƒì€ ê°œë°œìë¡œ ì¼í•˜ê³  ìˆëŠ” ì§€ê¸ˆì´ ì•„ë‹ˆë¼ ì»´í“¨í„°ê³µí•™ê³¼ë¼ëŠ” ì´ìœ ë¡œ ê°€ì„¤ë³‘ ë³´ì§ì„ ë°›ê³ ë‚˜ì„œ ì‚¬ë‹¨ ë‚´ ìœ ì„  ì „í™”ë¥¼ ê³ ì¹˜ê±°ë‚˜ ì‹ ê·œë¡œ ë‹¤ì´ë ‰íŠ¸ ì „í™”ì„ ì„ ì¶”ê°€í•´ì•¼í•˜ëŠ” ìš”ê±´ì´ ìˆì„ë•Œ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆì„ ë¿ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ì‹¬ì§€ì–´ëŠ” ìœ ì„ ë³‘ì´ë¼ëŠ” ì´ìœ ë¡œ ëŠ˜ì–´ì§„ í†µì‹ ì„ ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì „ë´‡ëŒ€ë„ íƒ€ì•¼í•˜ëŠ” ìƒí™©ë„â€¦</p>
</blockquote>
<p>ì•„ë¬´íŠ¼ ìœ„ì™€ ê°™ì€ ê²½í—˜ì´ ì—†ì—ˆë”ë¼ë©´ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <em>RJ45 ì»¤ë„¥í„° ê·œê²©</em>ì´ë€ ê²ƒì„ ë– ì˜¬ë¦¬ê±°ë‚˜ UTP ì¼€ì´ë¸”ì„ ì»¤ë„¥í„°ì™€ ê²°í•©í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ ë‚˜ì—´í•˜ëŠ” <em>ìƒ‰ìƒì˜ ìˆœì„œê°€ í‘œì¤€ìœ¼ë¡œ ì •í•´ì ¸ìˆë‹¤</em>ëŠ” ê²ƒì„ ì•Œì§€ ëª»í–ˆì„ ê²ë‹ˆë‹¤. ì™œëƒí•˜ë©´ í˜„ì¬ ê°œë°œìë¡œ ì¼í• ë•Œì—ëŠ” ì¸í„°ë„· ì„ ì— ëŒ€í•œ ë¶€ë¶„ì„ ì§ì ‘ ë‹¤ë£¨ì–´ë³¸ë‹¤ê±°ë‚˜ ì´ë¯¸ êµ¬ì„±ëœ ì„œë²„ ì¸í”„ë¼ í™˜ê²½ì„ í†µí•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê¸° ë•Œë¬¸ì´ì£ .</p>
<p><img data-src="/images/posts/network/02.png" alt="ëŒ€í•œë¯¼êµ­ í•´ì € ì¼€ì´ë¸” ìœ„ì¹˜"></p>
<p>ì¸í„°ë„·ìœ¼ë¡œ ì „ì„¸ê³„ê°€ ì—°ê²°ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë„ ìš°ë¦¬ë‚˜ë¼ì—ì„œ ë‹¤ë¥¸ ë‚˜ë¼ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ê¸° ìœ„í•´ì„œëŠ” ìˆ˜ ë§ì€ <a href="https://www.submarinecablemap.com/country/south-korea">í•´ì € ê´‘ ì¼€ì´ë¸”</a>ì´ ì„¤ì¹˜ë˜ê³  ê²½ìœ í•œë‹¤ëŠ” ê²ƒê¹Œì§€ëŠ” ëª¨ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ê°œë°œì ë˜ëŠ” ì—”ì§€ë‹ˆì–´ê°€ ì•„ë‹Œ ì‚¬ì—…íŒ€ì—ê²Œ ì‚¬ìš©ìì˜ í´ë¦­ìœ¼ë¡œ ì¸í•´ ì–´ë– í•œ ìš”ì²­ì´ ì„œë²„ë¡œ ì „ë‹¬ë˜ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ëŠ”ë°ê¹Œì§€ ì„¤ëª…í•˜ë”ë¼ë„ ë°”ë‹¤ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ ë‚˜ë¼ë¡œ ê±´ë„ˆê°€ì„œ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ê²Œ ëœë‹¤ë¼ê³  ì„¤ëª…í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ê°œì¸ì ìœ¼ë¡œ ê¶ê¸ˆí•  ìˆ˜ëŠ” ìˆì§€ë§Œ êµ³ì´ ëª¨ë¥¸ë‹¤ê³ í•´ë„ ì¼í•˜ê±°ë‚˜ ì´í•´í•˜ëŠ”ë° ì§€ì¥ì´ ì—†ê¸° ë•Œë¬¸ì´ì£ .</p>
</blockquote>
<h4 id="í•´ì €-ì¼€ì´ë¸”-ê´€ë ¨-ì •ë³´"><a href="#í•´ì €-ì¼€ì´ë¸”-ê´€ë ¨-ì •ë³´" class="headerlink" title="í•´ì € ì¼€ì´ë¸” ê´€ë ¨ ì •ë³´"></a>í•´ì € ì¼€ì´ë¸” ê´€ë ¨ ì •ë³´</h4><ul>
<li><a href="https://www.yna.co.kr/view/AKR20210108069100051">í•´ì €ì¼€ì´ë¸” ìˆê¸°ì— ê°€ëŠ¥í•œ ì§€êµ¬ì´Œ ì†Œí†µ</a></li>
<li><a href="https://brunch.co.kr/@go2hanoi/14">ë² íŠ¸ë‚¨ í•´ì € ì¼€ì´ë¸”ì€ ì™œ ìì£¼ ëŠê¸¸ê¹Œ?</a></li>
<li><a href="http://www.goodmorningvietnam.co.kr/mobile/article.html?no=49888">í•´ì € ì¼€ì´ë¸” ë£¨íŠ¸ 2ê°œì— ë¬¸ì œê°€ ìˆëŠ”ë° ì—¬ì „íˆ ê³ ì¹  ìˆ˜ ì—†ë‹¤</a></li>
</ul>
<p>ì¡°ì§ë‚´ì— ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ê°€ ìˆê±°ë‚˜ ì¸í”„ë¼ íŒ€ì´ ì¡´ì¬í•œë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ë„ë¡ <a href="https://aws.amazon.com/ko/route53/what-is-dns/">DNS</a>ì™€ <a href="https://docs.microsoft.com/ko-kr/azure/rtos/netx-duo/netx-duo-nat/chapter1">NAT</a>ì™€ ê°™ì€ ì„¤ì •ë“¤ì„ ê°œë°œìê°€ ë‹´ë‹¹í•˜ì§€ëŠ” ì•Šì„ê²ë‹ˆë‹¤. AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ê°œë°œìê°€ ì§ì ‘ ì›¹ ì½˜ì†”ì„ í†µí•´ì„œ í´ë¦­ë§Œìœ¼ë¡œë„ ì„œë²„ ì¸í”„ë¼ êµ¬ì„±ì— ëŒ€í•œ ì„¤ì •ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê¸´ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ í´ë¼ìš°ë“œ ì¸í”„ë¼ í™˜ê²½ì„ ì§ì ‘ ë‹¤ë£¨ëŠ” ì €ì™€ ê°™ì€ ê°œë°œìë“¤ì€ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ì„œ ì¸í”„ë¼ êµ¬ì„±ì„ ê²€í† í•˜ê±°ë‚˜ ì„¤ì •ì„ ë³€ê²½í•´ì•¼í•˜ëŠ” ì‘ì—…ë„ í•´ì•¼í•  ìˆ˜ ìˆê¸°ì— ì–´ëŠì •ë„ì˜ ì¸í”„ë¼ ì§€ì‹ë„ í•„ìš”í•˜ê²Œ ë˜ì£ .</p>
<blockquote>
<p>ì•Œì•„ì•¼í•˜ëŠ” ì¸í”„ë¼ ì§€ì‹ì€ í˜„ì¬ ì¡°ì§ì—ì„œ ì–´ë–¤ ê²ƒì„ ê²½í—˜í•˜ëŠëƒì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p>
</blockquote>
<p>ì¼ë°˜ì ìœ¼ë¡œëŠ” HTTPë¼ëŠ” í†µì‹  í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì§€ë§Œ ì‚¬ì—… ë¶„ì•¼ì— ë”°ë¼ì„œ <a href="https://mqtt.org/">MQTT í†µì‹  í”„ë¡œí† ì½œ</a>ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬ëœë‹¤ê±°ë‚˜ <a href="https://ko.wikipedia.org/w/index.php?title=%EB%AA%A8%EB%93%9C%EB%B2%84%EC%8A%A4&tableofcontents=0">Modbus TCP</a>ë¥¼ í†µí•´ ì‚°ì—… ìë™í™” ì¥ë¹„ì™€ì˜ í†µì‹ ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì‹¬ì§€ì–´ëŠ” ì°¨ëŸ‰ì—ì„œëŠ” <a href="https://ko.wikipedia.org/wiki/CAN_%EB%B2%84%EC%8A%A4">CAN í†µì‹ </a>ì„ ì‚¬ìš©í•˜ê³  OBD ëª¨ë“ˆì„ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ê¸°ë„ í•˜ì£ . í†µì‹  í”„ë¡œí† ì½œ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë”ë„·ìœ¼ë¡œ ì¸í„°ë„·ì— ì ‘ì†í•˜ì§€ ì•Šê³  í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ í™˜ê²½ìœ¼ë¡œ ì—°ê²°í•˜ë©° ë¬´ì„  í†µì‹ ì„ í†µí•´ì„œ ì¸í„°ë„·ìœ¼ë¡œ ì ‘ì†í•˜ëŠ” ì¸í”„ë¼ í™˜ê²½ì„ ê²½í—˜í•´ë³´ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë§ˆë„ ë„¤íŠ¸ì›Œí¬ ìš°ì„  ìˆœìœ„ê°€ ìˆë‹¤ëŠ” ì§€ì‹ì„ ì•Œì§€ ëª»í•˜ê³  ìˆì„ ìˆ˜ ìˆì”ë‹ˆë‹¤.</p>
<blockquote>
<p>ì…€ë£°ëŸ¬ ëª¨ë“ˆì´ í¬í•¨ëœ í´ë¼ì´ì–¸íŠ¸ ì¥ë¹„ë¥¼ ì „ë‹¬í•˜ê³ ë‚˜ì„œ ìœ ì„  ì—°ê²°ì„ ì‹œë„í•œ ìˆœê°„ ì¸í„°ë„· ì—°ê²°ì´ ëŠì–´ì ¸ì„œ ì›ê²©ì´ í•´ì œë˜ì—ˆë˜ ê²ƒì„ ì‹¤ì œë¡œ ê²½í—˜í•˜ê¸°ë„ í–ˆì£ .</p>
</blockquote>
<p>ëŒ€ë¶€ë¶„ì˜ ê°œë°œìê°€ ì›¹ ì„œë²„ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— SSL ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•´ì„œ HTTPS í†µì‹ ì„ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆì§€ë§Œ AWS í´ë¼ìš°ë“œ í™˜ê²½ì„ ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ ELB ì¤‘ NLBë¥¼ í†µí•´ì„œ ECC ê¸°ë°˜ì˜ SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•˜ì—¬ TLS ì˜¤í”„ë¡œë“œ ê¸°ëŠ¥ì„ ì„¤ì •í•˜ë ¤ê³  ì‹œë„í•˜ì§€ ì•Šì•˜ë‹¤ë©´ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/create-tls-listener.html#tls-listener-certificates">2048 ì´ìƒì˜ RSA í‚¤ ë˜ëŠ” EC í‚¤ê°€ í¬í•¨ëœ ì¸ì¦ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ</a>ì— ëŒ€í•œ ê²ƒì„ ì•Œì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ê²°êµ­ì€ ê°œë°œìë¼ëŠ” ì§ë¬´ì—ì„œ ì•Œì•„ì•¼í•  ë„¤íŠ¸ì›Œí¬ ì§€ì‹ì€ ì •í•´ì ¸ìˆì§€ ì•Šìœ¼ë©° í˜„ì¬ ë‚´ê°€ ì¡°ì§ì—ì„œ ì–´ë– í•œ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬í•˜ëŠ”ê°€ ë˜ëŠ” ì–´ë–¤ ê²ƒê¹Œì§€ ë‹´ë‹¹í•˜ê³  ê²½í—˜í•˜ëŠ”ê°€ì— ë”°ë¼ ê·¸ ê¹Šì´ì™€ ë²”ìœ„ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ì¸ì§€í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
]]></content>
      <tags>
        <tag>ê°œë°œì</tag>
        <tag>ë„¤íŠ¸ì›Œí¬</tag>
      </tags>
  </entry>
  <entry>
    <title>ì  í‚¨ìŠ¤ì— Amazon Corretto JDK ì¶”ê°€í•˜ê¸°</title>
    <url>/add-jdk-installations-jenkins/</url>
    <content><![CDATA[<p>ìµœê·¼ì—ëŠ” <a href="https://www.youtube.com/watch?v=iLqGzEkusIw">ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì˜ ì›Œí¬í”Œë¡œìš° í™œìš©</a>í•˜ëŠ” ê²½ìš°ê°€ ëŠ˜ê³  ìˆëŠ” ê²ƒ ê°™ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ íšŒì‚¬ì—ì„œëŠ” <a href="https://www.youtube.com/watch?v=0Emq5FypiMM">CI&#x2F;CD</a> ë„êµ¬ë¡œ ì  í‚¨ìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ê·¸ëŸ°ë° ëŒ€ë¶€ë¶„ ì–´ë–¤ ê°œë°œìì— ì˜í•´ì„œ ì  í‚¨ìŠ¤ê°€ ì´ë¯¸ êµ¬ì„±ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì‹ ì… ë˜ëŠ” ì£¼ë‹ˆì–´ ê°œë°œìê°€ ì§ì ‘ ê²½í—˜í•˜ëŠ” ë¶€ë¶„ì´ ì—†ì„ ìˆ˜ ìˆë‹¤. ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— JDKë¥¼ ì„¤ì¹˜í•˜ê³  ì  í‚¨ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë”ë¼ë„ ìš´ì˜ë˜ëŠ” í™˜ê²½ì— ë”°ë¼ ì‚¬ìš©ë˜ëŠ” JDKë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤.</p>
<h4 id="JDK-Installations"><a href="#JDK-Installations" class="headerlink" title="JDK Installations"></a>JDK Installations</h4><p>Jenkins ê´€ë¦¬ &gt; Global Tool Configuration &gt; JDK installations ì—ì„œ ì  í‚¨ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ë  JDK ëª©ë¡ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆë‹¤. ì´ë¥¼ í™œìš©í•´ì„œ ê° í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë  JDKì„ ì„¤ì¹˜í•´ì„œ ìš´ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©ë  JVM ë²„ì „ê³¼ ë™ì¼í•œ JDK ë²¤ë”ë¥¼ ì‚¬ìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li><a href="https://github.com/adoptium/temurin17-binaries/releases">https://github.com/adoptium/temurin17-binaries/releases</a></li>
<li><a href="https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.tar.gz">https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.tar.gz</a></li>
</ul>
<p>ì¼ë°˜ì ìœ¼ë¡œ ë²”ìš©ì ì¸ ëª©ì ìœ¼ë¡œëŠ” Temurinì´ë¼ëŠ” OpenJDKë¥¼ ì‚¬ìš©í•˜ê³  íšŒì‚¬ì—ì„œëŠ” ìš´ì˜ í™˜ê²½ì¸ CSPì™€ ë™ì¼í•œ Amazon Corretto JDKë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì  í‚¨ìŠ¤ê°€ ì„¤ì¹˜ëœ ì„œë²„ ì‹œìŠ¤í…œì— <a href="https://www.youtube.com/watch?v=qx3XK82BZPk">ì—¬ëŸ¬ê°œì˜ JDKë¥¼ ì„¤ì¹˜</a>í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ëª…í•œë‹¤. ë‹¤í–‰íˆë„ JDK Tool Plugin ì—ì„œëŠ” ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ì§€ì •í•´ì„œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” <a href="https://stackoverflow.com/a/55244659">Extract .zip&#x2F;.tar.gz</a>ì„ ì œê³µí•˜ê³  ìˆë‹¤. </p>
<blockquote>
<p>Downloads a tool archive and installs it within Jenkinsâ€™s working directory.<br>Example: https:&#x2F;&#x2F;downloads.apache.org&#x2F;ant&#x2F;binaries&#x2F;apache-ant-1.10.12-bin.zip and specify a subdir of apache-ant-1.10.12 .</p>
</blockquote>
<p>ìœ„ ì„¤ëª…ì— ë”°ë¼ì„œ ë‹¤ìš´ë¡œë“œ ë§í¬ì— ì˜í•´ì„œ ì••ì¶•ì´ í•´ì œë  í´ë”ë¥¼ ì§€ì •í•´ì•¼í•œë‹¤.</p>
<p><img data-src="/images/posts/add-jdk-installations-jenkins/01.png"></p>
<h4 id="í”„ë¡œì íŠ¸ì—ì„œ-Amazon-Corretto-JDK-ì‚¬ìš©í•˜ê¸°"><a href="#í”„ë¡œì íŠ¸ì—ì„œ-Amazon-Corretto-JDK-ì‚¬ìš©í•˜ê¸°" class="headerlink" title="í”„ë¡œì íŠ¸ì—ì„œ Amazon Corretto JDK ì‚¬ìš©í•˜ê¸°"></a>í”„ë¡œì íŠ¸ì—ì„œ Amazon Corretto JDK ì‚¬ìš©í•˜ê¸°</h4><p>í”„ë¡œì íŠ¸ ë¹Œë“œ ìœ í˜•ì— ë”°ë¼ì„œ ì„¤ì¹˜í•œ JDKë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•ì„ ê³µìœ í•˜ê³ ì í•œë‹¤. íšŒì‚¬ì—ì„œëŠ” Freestyle Projectë¡œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë° ì¸í„°ë„·ì—ì„œëŠ” íŒŒì´í”„ë¼ì¸ë„ ë§ì´ í™œìš©í•˜ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤.</p>
<p><img data-src="/images/posts/add-jdk-installations-jenkins/02.png" alt="Freestyle Project"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Started by user mambo
Running as SYSTEM
<span class="token punctuation">[</span>EnvInject<span class="token punctuation">]</span> - Loading <span class="token function">node</span> environment variables.
Building <span class="token keyword">in</span> workspace /var/jenkins_home/workspace/Test
<span class="token punctuation">[</span>Test<span class="token punctuation">]</span> $ /bin/sh <span class="token parameter variable">-xe</span> /tmp/jenkins17925040181999271110.sh
+ <span class="token function">which</span> <span class="token function">java</span>
/var/jenkins_home/tools/hudson.model.JDK/Amazon_Corretto_11/amazon-corretto-11.0.17.8.1-linux-x64/bin/java
+ <span class="token function">java</span> <span class="token parameter variable">--version</span>
openjdk <span class="token number">11.0</span>.17 <span class="token number">2022</span>-10-18 LTS
OpenJDK Runtime Environment Corretto-11.0.17.8.1 <span class="token punctuation">(</span>build <span class="token number">11.0</span>.17+8-LTS<span class="token punctuation">)</span>
OpenJDK <span class="token number">64</span>-Bit Server VM Corretto-11.0.17.8.1 <span class="token punctuation">(</span>build <span class="token number">11.0</span>.17+8-LTS, mixed mode<span class="token punctuation">)</span>
Finished: SUCCESS</code></pre>

<p>ìœ„ì™€ ê°™ì´ Execute Shell ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ì„œ í˜„ì¬ ë¹Œë“œ í™˜ê²½ì— ëŒ€í•œ ìë°” ë²„ì „ì„ í™•ì¸í•´ë³´ë‹ˆ ì •ìƒì ìœ¼ë¡œ JDKë¡œ ì§€ì •í•œ Amazon Corretto 11ì„ ì‚¬ìš©ì¤‘ì¸ ê²ƒìœ¼ë¡œ ì¶œë ¥ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  íŒŒì´í”„ë¼ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì–´ë–»ê²Œ ì§€ì •í•˜ëŠ”ì§€ ê²€ìƒ‰í•´ë³´ë‹ˆ ì•„ë˜ì™€ ê°™ì´ ë¬¸ë²•ì„ ì‘ì„±í•œë‹¤ê³  í•œë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">pipeline <span class="token punctuation">&#123;</span>
    agent any
    
    tools <span class="token punctuation">&#123;</span>
        jdk <span class="token interpolation-string"><span class="token string">"Amazon Corretto 11"</span></span>
    <span class="token punctuation">&#125;</span>
    
    environment <span class="token punctuation">&#123;</span>
        JAVA_HOME <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"tool Amazon Corretto 11"</span></span>
    <span class="token punctuation">&#125;</span>

    stages <span class="token punctuation">&#123;</span>
        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Java Version'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            steps <span class="token punctuation">&#123;</span>
                sh <span class="token string">'java -version'</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œì— ì‚¬ìš©ë  Node ë²„ì „ì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ì„œëŠ” NodeJS í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ë©´ ë™ì¼í•˜ê²Œ Global Tool Configuration ê¸°ëŠ¥ì— NodeJS installations í•­ëª©ì´ ì¶”ê°€ë©ë‹ˆë‹¤.</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ëª¨ë“  ë©”ì‹œì§€ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°</title>
    <url>/all-message-codes-in-spring-boot/</url>
    <content><![CDATA[<blockquote>
<p>ê´€ë ¨ ì½”ë“œ:<br><a href="https://github.com/kdevkr/spring-demo/commit/aed02f456d13316aee257aaa04eda49a52e07320">https://github.com/kdevkr/spring-demo/commit/aed02f456d13316aee257aaa04eda49a52e07320</a></p>
</blockquote>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ìë™ êµ¬ì„±ì— ì˜í•´ ì œê³µí•˜ëŠ” ResourceBundleMessageSourceëŠ” íŠ¹ì • ë¡œì¼€ì¼ì— ëŒ€í•œ ëª¨ë“  ë©”ì‹œì§€ ì½”ë“œë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜, ReloadableResourceBundleMessageSourceëŠ” í”„ë¡œí¼í‹° ë¿ë§Œ ì•„ë‹ˆë¼ XML íŒŒì¼ë¡œ ë˜ì–´ìˆëŠ” ë©”ì‹œì§€ ë²ˆë“¤ì„ ë¶ˆëŸ¬ì™€ì„œ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ë©° getMergedProperties(Locale locale) í•¨ìˆ˜ë¥¼ í†µí•´ì„œ íŠ¹ì • ë¡œì¼€ì¼ì— ëŒ€í•œ ë©”ì‹œì§€ í”„ë¡œí¼í‹°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ, getMergedProperties í•¨ìˆ˜ì˜ ì ‘ê·¼ ì œì–´ìê°€ protected ì¸ ê´€ê³„ë¡œ ReloadableResourceBundleMessageSourceì— ëŒ€í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ë„ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token class-name">PropertiesHolder</span> <span class="token function">getMergedProperties</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">PropertiesHolder</span> mergedHolder <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachedMergedProperties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mergedHolder <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> mergedHolder<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="CustomResourceBundleMessageSource"><a href="#CustomResourceBundleMessageSource" class="headerlink" title="CustomResourceBundleMessageSource"></a>CustomResourceBundleMessageSource</h4><p>ReloadableResourceBundleMessageSourceì˜ getMergedProperties í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•˜ì—¬ í™•ì¥ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤. ì•ì„œ ì´ì•¼ê¸°í–ˆë“¯ì´ ì ‘ê·¼ì œì–´ìê°€ protected ì´ë¯€ë¡œ íŠ¹ì • ë¡œì¼€ì¼ì„ ê°€ì§€ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì¡°íšŒí•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomResourceBundleMessageSource</span> <span class="token keyword">extends</span> <span class="token class-name">ReloadableResourceBundleMessageSource</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token class-name">Properties</span> <span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token function">getMergedProperties</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="MessageConfiguration"><a href="#MessageConfiguration" class="headerlink" title="MessageConfiguration"></a>MessageConfiguration</h4><p>ê·¸ë¦¬ê³  ì´ì œ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ì— ì˜í•´ ì¶”ê°€ë˜ëŠ” ë©”ì‹œì§€ ì†ŒìŠ¤ê°€ ì•„ë‹ˆë¼ CustomResourceBundleMessageSourceê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì— ë“±ë¡ë  ìˆ˜ ìˆë„ë¡ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì— ì˜í•´ ìë™ êµ¬ì„±ë˜ì–´ì§€ëŠ” MessageSourceAutoConfigurationëŠ” messageSourceë¼ëŠ” ì´ë¦„ì˜ ë¹ˆì´ ë“±ë¡ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì— í™œì„±í™” ë˜ë„ë¡ ë˜ì–´ìˆìœ¼ë¯€ë¡œ messageSourceë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageConfiguration</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.messages"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageSourceProperties</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MessageSourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageSource</span> <span class="token function">messageSource</span><span class="token punctuation">(</span><span class="token class-name">MessageSourceProperties</span> properties<span class="token punctuation">,</span> <span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">CustomResourceBundleMessageSource</span> messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomResourceBundleMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            messageSource<span class="token punctuation">.</span><span class="token function">setBasenames</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span>
                    <span class="token punctuation">.</span><span class="token function">commaDelimitedListToStringArray</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">trimAllWhitespace</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            messageSource<span class="token punctuation">.</span><span class="token function">setDefaultEncoding</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setFallbackToSystemLocale</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isFallbackToSystemLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Duration</span> cacheDuration <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getCacheDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheDuration <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            messageSource<span class="token punctuation">.</span><span class="token function">setCacheMillis</span><span class="token punctuation">(</span>cacheDuration<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setAlwaysUseMessageFormat</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isAlwaysUseMessageFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setUseCodeAsDefaultMessage</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">isUseCodeAsDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setResourceLoader</span><span class="token punctuation">(</span>resourceLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<h4 id="spring-messages-basename"><a href="#spring-messages-basename" class="headerlink" title="spring.messages.basename"></a>spring.messages.basename</h4><p>ReloadableResourceBundleMessageSourceë¥¼ í™•ì¥í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆì§€ë§Œ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ spring.messages.basename ê°’ì¸ messages ë¡œëŠ” ë©”ì‹œì§€ í”„ë¡œí¼í‹°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ë¡œë”ê°€ DefaultResourceLoader ì´ë¯€ë¡œ ë¦¬ì†ŒìŠ¤ ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ ë©”ì‹œì§€ íŒŒì¼ì„ ì˜¬ë°”ë¥´ê²Œ ì°¾ì„ ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ, spring.messages.basenameì— í´ë˜ìŠ¤íŒ¨ìŠ¤ë¥¼ í¬í•¨í•˜ì—¬ ëª…ì‹œí•´ì•¼ í•œë‹¤.</p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">spring.messages.basename</span><span class="token punctuation">=</span><span class="token value attr-value">classpath:i18n/messages</span></code></pre>

<h4 id="Messages-API"><a href="#Messages-API" class="headerlink" title="Messages API"></a>Messages API</h4><p>ë©”ì‹œì§€ ì†ŒìŠ¤ê°€ CustomResourceBundleMessageSourceë¡œ ë“±ë¡ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë©”ì‹œì§€ ì½”ë“œë¥¼ ì œê³µí•˜ëŠ” APIë¥¼ ë§Œë“¤ì–´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ë™ì¼í•œ ë©”ì‹œì§€ë¥¼ í™œìš©í•  ìˆ˜ ìˆê²Œ ì œê³µí•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/messages"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">messages</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">CustomResourceBundleMessageSource</span> messageSource <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CustomResourceBundleMessageSource</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>messageSource<span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> messages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Properties</span> allMessages <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessages</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> entries <span class="token operator">=</span> allMessages<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> entry <span class="token operator">:</span> entries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Object</span> key <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> value <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        messages<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Message Source</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°(ì½˜ì†”) í—ˆìš©í•˜ê¸°</title>
    <url>/allow-ec2-instance-connect/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°(EC2 Instance Connect) ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì€ SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ EC2 ì½˜ì†”ì„ í†µí•´ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.</p>
<h2 id="EC2-ì¸ìŠ¤í„´ìŠ¤-ì—°ê²°"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-ì—°ê²°" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°</h2><p><strong>EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°</strong>ì€ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì„ í†µí•´ í¼ë¸”ë¦­ IPv4 ì£¼ì†Œê°€ í• ë‹¹ëœ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-instance-connect-methods.html#ec2-instance-connect-connecting-console">EC2 Instance Connectë¥¼ ì‚¬ìš©í•œ ì—°ê²°</a> ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í¼ë¸”ë¦­ IPv4 ì£¼ì†Œê°€ í• ë‹¹ëœ Amazon Linux 2 ë˜ëŠ” Ubuntu 16.04 ì´ìƒì˜ ì¸ìŠ¤í„´ìŠ¤ë¼ë©´ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì—ì„œ ì œê³µí•˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì¸ë°”ìš´ë“œ-SSH-íŠ¸ë˜í”½-í—ˆìš©"><a href="#ì¸ë°”ìš´ë“œ-SSH-íŠ¸ë˜í”½-í—ˆìš©" class="headerlink" title="ì¸ë°”ìš´ë“œ SSH íŠ¸ë˜í”½ í—ˆìš©"></a>ì¸ë°”ìš´ë“œ SSH íŠ¸ë˜í”½ í—ˆìš©</h3><p>ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë³´ì•ˆ ê·¸ë£¹ì—ëŠ” SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” <strong>EC2_INSTANCE_CONNECTë¼ëŠ” ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” IP ëŒ€ì—­ì— ëŒ€í•˜ì—¬ SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•˜ë„ë¡ í—ˆìš©</strong>í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” IP ëŒ€ì—­ì€ <a href="https://ip-ranges.amazonaws.com/ip-ranges.json">AWSIP ì£¼ì†Œ ë²”ìœ„</a>ì—ì„œ EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì™€ VPCê°€ ìƒì„±ëœ regionì— ëŒ€í•˜ì—¬ í•„í„°ë§ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-01.png"></p>
<p>ë‹¤í–‰íˆë„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ë‹¤ë¥´ê²Œ EC2_INSTANCE_CONNECTëŠ” ë¦¬ì „ë³„ë¡œ í•˜ë‚˜ì´ë¯€ë¡œ <strong>13.209.1.56&#x2F;29</strong> IP ëŒ€ì—­ì„ SSH íŠ¸ë˜í”½ìœ¼ë¡œ ìˆ˜ì‹ í•˜ë„ë¡ í—ˆìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<p>íšŒì‚¬ì—ì„œ ì§€ê¸‰ë°›ì€ êµ¬í˜• ë§¥ë¶ì—ì„œ <a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ec2-instance-connect-troubleshooting/">AWS ë¬¸ì„œì—ì„œ ì•Œë ¤ì£¼ëŠ” ë‹¤ìŒì˜ ëª…ë ¹ì–´</a>ë¥¼ ì³ë´ë„ í•˜ë‚˜ë§Œ ë‚˜ì˜µë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://ip-ranges.amazonaws.com/ip-ranges.json<span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.prefixes[] | select(.region=="us-east-1") | select(.service=="EC2_INSTANCE_CONNECT") | .ip_prefix'</span>
<span class="token number">13.209</span>.1.56/29</code></pre>

<p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-02.png"></p>
<p>ìœ„ì™€ ê°™ì´ 13.209.1.56&#x2F;29 ëŒ€ì—­ì— ëŒ€í•œ SSH íŠ¸ë˜í”½ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì˜€ìœ¼ë‹ˆ ì´ì œ ì´ ë³´ì•ˆê·¸ë£¹ì„ ì¸ìŠ¤í„´ìŠ¤ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h3 id="ìƒ˜í”Œ-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±"><a href="#ìƒ˜í”Œ-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±" class="headerlink" title="ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±"></a>ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</h3><p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-03.png"></p>
<p>ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë³´ì•ˆ ê·¸ë£¹ì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ SSH íŠ¸ë˜í”½ì— ëŒ€í•´ì„œ í—ˆìš©í•˜ì§€ ì•Šì€ ìƒíƒœì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì„ ì‹œë„í•˜ë©´ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-04.png"></p>
<p>ì´ì œ ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ì— ec2-instance-connect ë³´ì•ˆê·¸ë£¹ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-05.png"></p>
<p>ë‹¤ì‹œ ì•„ë§ˆì¡´ EC2 ì½˜ì†”ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ìœ¼ë¡œ ìƒ˜í”Œ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/allow-ec2-instance-connect/ec2-instance-connect-06.png"></p>
<p>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì˜ IP ëŒ€ì—­ì„ í—ˆìš©í•˜ì˜€ê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ ì ‘ì†ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/allow-ec2-instance-connect/complete.gif"></p>
<p>ë³´ì•ˆì„ ì¤‘ìš”ì‹œí•˜ëŠ” íšŒì‚¬ë¼ë©´ ëª¨ë“  IP ëŒ€ì—­ì— ëŒ€í•˜ì—¬ SSH ì ‘ì†ì„ í—ˆìš©í•˜ì§€ ì•Šê³  <strong>EC2_INSTANCE_CONNECT ì„œë¹„ìŠ¤ì™€ íšŒì‚¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” IP ëŒ€ì—­ì„ í—ˆìš©í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥</strong>í•©ë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>AWS</tag>
        <tag>EC2</tag>
      </tags>
  </entry>
  <entry>
    <title>Amazon Linux 2ë¥¼ VirtualBoxì—ì„œ ì‹¤í–‰í•˜ê¸°</title>
    <url>/amazonlinux2-virtualbox/</url>
    <content><![CDATA[<p><a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/amazon-linux-2-virtual-machine.html">Amazon Linux 2ë¥¼ ì˜¨í”„ë ˆë¯¸ìŠ¤ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ ì‹¤í–‰</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ Amazon Linux 2 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ í†µí•´ ì˜¨í”„ë ˆë¯¸ìŠ¤ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í™˜ê²½ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì°¸ê³ ë¡œ AL2ì„ ëŒ€ì²´í•˜ëŠ” Amazon Linux 2023ì— ëŒ€í•´ì„œëŠ” <a href="https://github.com/amazonlinux/amazon-linux-2023/issues/102">ì•„ì§ ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”</a> ê²ƒ ê°™ë‹¤. ê·¸ë˜ì„œ AL2ì´ 2025-06-30 ì¼ìë¡œ EOLì´ ë˜ë”ë¼ë„ VirtualBoxì—ì„œ Amazon Linux 2ë¥¼ ì‹¤í–‰í•´ë³´ê³ ì í•œë‹¤.</p>
<h4 id="Amazon-Linux-2-ê°€ìƒ-ë¨¸ì‹ -ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ"><a href="#Amazon-Linux-2-ê°€ìƒ-ë¨¸ì‹ -ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ" class="headerlink" title="Amazon Linux 2 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ"></a>Amazon Linux 2 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</h4><p>ìš°ë¶„íˆ¬ì™€ ê°™ì´ Amazon Linux 2ì— ëŒ€í•œ ì„¤ì¹˜ íŒŒì¼ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ ë¶€íŒ…ì„ ìœ„í•œ ì´ë¯¸ì§€ì™€ ë¯¸ë¦¬ ì •ì˜ëœ ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ì•„ì•¼ í•œë‹¤.</p>
<ul>
<li><a href="https://drive.google.com/file/d/17iBVLBLLJahQDb-3kgsWRCh72hzt1FIp/view?usp=sharing">seed.iso ë¶€íŒ… ì´ë¯¸ì§€</a>  </li>
<li><a href="https://cdn.amazonlinux.com/os-images/2.0.20230926.0/virtualbox/amzn2-virtualbox-2.0.20230926.0-x86_64.xfs.gpt.vdi">Amazon Linux 2 LTS 2.0.20230926.0 x86_64 VirtualBox image</a></li>
</ul>
<h4 id="ê°€ìƒ-ë¨¸ì‹ -ë§Œë“¤ê¸°-ë°-ì‹¤í–‰"><a href="#ê°€ìƒ-ë¨¸ì‹ -ë§Œë“¤ê¸°-ë°-ì‹¤í–‰" class="headerlink" title="ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸° ë° ì‹¤í–‰"></a>ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸° ë° ì‹¤í–‰</h4><p><img data-src="/images/posts/amazonlinux2-virtualbox/01.png" alt="1. ê°€ìƒ ë¨¸ì‹  ë§Œë“¤ê¸°">  </p>
<p>ìƒˆë¡œ ë§Œë“¤ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°€ìƒ ë¨¸ì‹ ì„ ë§Œë“­ë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ ìœ í˜•ì— ëŒ€í•œ ìš´ì˜ ì²´ì œ ì¢…ë¥˜ëŠ” ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ”ëŒ€ë¡œ Red Hat (64-bit)ë¥¼ ì„ íƒí•˜ì. ê·¸ë¦¬ê³  ê°€ìƒ ë””ìŠ¤í¬ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ë¡œ ì¶”ê°€í•´ì•¼ í•œë‹¤. ìœ„ ìŠ¤í¬ë¦°ìƒ·ì— ë‚˜ì™€ìˆëŠ” ë“¯ì´ <a href="https://cdn.amazonlinux.com/os-images/latest/">Amazon Linux 2 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€</a> í˜ì´ì§€ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ë©´ ëœë‹¤.</p>
<p><img data-src="/images/posts/amazonlinux2-virtualbox/02.png" alt="2. ë¶€íŒ… ì´ë¯¸ì§€ ë””ìŠ¤í¬ ì¶”ê°€">  </p>
<p>ê°€ìƒ ë¨¸ì‹ ì„ ì‹¤í–‰í•˜ê¸° ì „ì— í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ ì‚¬ìš©ì ê³„ì • ì •ì˜ë¥¼ ìœ„í•œ ë¶€íŒ… ì´ë¯¸ì§€ë¥¼ ê°€ìƒ ê´‘í•™ ë””ìŠ¤í¬ì— ì¶”ê°€í•´ì•¼í•œë‹¤. Amazon Linux 2 ê°€ìƒ ë¨¸ì‹  ì´ë¯¸ì§€ í˜ì´ì§€ì—ì„œ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆëŠ” seed.iso íŒŒì¼ì´ <code>VERR_NOT_SUPPORTED</code> ì‚¬ìœ ë¡œ ê°€ìƒ ê´‘í•™ ë””ìŠ¤í¬ì— ì¶”ê°€í•  ìˆ˜ ì—†ì„ ìˆ˜ ìˆëŠ”ë° ë³¸ ê¸€ì—ì„œ ì œê³µí•˜ëŠ” seed.iso ë¶€íŒ… ì´ë¯¸ì§€ ë§í¬ë¥¼ í†µí•´ <code>ê¸°ë³¸ ì‚¬ìš©ì(ec2-user:amazon)</code>ë§Œ ì •ì˜ëœ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ë„ë¡ í•˜ì.</p>
<p>â€» ë³¸ ê¸€ì—ì„œ ì œê³µí•˜ëŠ” seed.iso íŒŒì¼ì€ ì•„ë˜ì™€ ê°™ì´ ì •ì˜ë˜ì–´ìˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>user-data</span></div><code class="language-yaml"><span class="token comment">#cloud-config</span>
<span class="token comment">#vim:syntax=yaml</span>
<span class="token key atrule">users</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> default
<span class="token key atrule">chpasswd</span><span class="token punctuation">:</span>
  <span class="token key atrule">list</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    ec2-user:amazon</span>
</code></pre>


<pre class="language-yaml" data-language="yaml"><div class="caption"><span>meta-data</span></div><code class="language-yaml"><span class="token key atrule">local-hostname</span><span class="token punctuation">:</span> amazonlinux</code></pre>

<blockquote>
<p>ë¶€íŒ… ì´ë¯¸ì§€ íŒŒì¼ì€ MacOS í™˜ê²½ì—ì„œ hdiutil ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•˜ì˜€ë‹¤.<br>$ hdiutil makehybrid -o seed.iso -hfs -joliet -iso -default-volume-name cidata seedconfig&#x2F;</p>
</blockquote>
<p><img data-src="/images/posts/amazonlinux2-virtualbox/03.png" alt="3. ì‚¬ìš©ì ê³„ì • êµ¬ì„±">  </p>
<p>ê°€ìƒ ë¨¸ì‹ ì„ ì‹¤í–‰í•˜ê³  ë§¨ì²˜ìŒ ê¸°ë³¸ ì‚¬ìš©ì ê³„ì •ì¸ ec2-userë¥¼ ì…ë ¥í•˜ë©´ ì‚¬ìš©ì ê³„ì •ì— ëŒ€í•œ êµ¬ì„±ì„ ìˆ˜í–‰í•œë‹¤.</p>
<p><img data-src="/images/posts/amazonlinux2-virtualbox/04.png" alt="4. ec2-user ë¡œê·¸ì¸">  </p>
<p>ë‹¤ì‹œí•œë²ˆ ë¡œê·¸ì¸ í™”ë©´ì´ ì¶œë ¥ë˜ë©´ ec2-userì™€ amazonì„ ì…ë ¥í•˜ë©´ ìœ„ì™€ ê°™ì´ Amazon Linux 2ì— ëŒ€í•œ ë¡œê³ ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì²˜ìŒ ë¡œê·¸ì¸ì— ì„±ê³µí–ˆë‹¤ë©´ ê·¸ ì´í›„ì—ëŠ” ë¶€íŒ… ì´ë¯¸ì§€ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤. ê°€ìƒ ë¨¸ì‹ ì„ ì¢…ë£Œí•˜ê³  ë¶€íŒ… ì´ë¯¸ì§€ë¥¼ ê°€ìƒ ê´‘í•™ ë””ìŠ¤í¬ì—ì„œ ì œê±°í•˜ì.</p>
]]></content>
      <tags>
        <tag>AL2</tag>
        <tag>Oracle VirtualBox</tag>
      </tags>
  </entry>
  <entry>
    <title>ì¬ë¶€íŒ… ì‹œ Crontabì— ì˜í•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸°</title>
    <url>/autorun-process-using-crontab-on-reboot/</url>
    <content><![CDATA[<blockquote>
<p>ğŸ¤ª ì¬ë¶€íŒ… ì‹œ Crontabì— ì˜í•´ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì€ ì´ìœ </p>
</blockquote>
<p>í¬ë¡ íƒ­(Crontab)ì€ ë¦¬ëˆ…ìŠ¤ì—ì„œ ì¼ì •ëœ ì‹œì ì´ë‚˜ ì£¼ê¸°ì ìœ¼ë¡œ ëª…ë ¹ì–´ ë˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ ë˜ëŠ” íƒ€ì´ë¨¸ì…ë‹ˆë‹¤. ì´ì „ì— ì‘ì„±í•œ <a href="/maintaining-process-execution-in-linux">ë¦¬ëˆ…ìŠ¤ì—ì„œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€í•˜ê¸°</a>ì—ì„œë„ í¬ë¡ íƒ­ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì–´ë³¸ ì ì´ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ì‹œìŠ¤í…œì´ ì˜ˆê¸°ì§€ ì•Šì€ ìƒí™©ì— ì˜í•´ì„œ ì¬ë¶€íŒ…ë˜ê±°ë‚˜ ì¢…ë£Œë˜ì–´ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ Systemd ë˜ëŠ” Crontabìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ê³  ê³µìœ í–ˆì—ˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ëŸ°ë° ì–¼ë§ˆì „ì— íŠ¹ì • ê³ ê° í™˜ê²½ì˜ ì„œë²„ë“¤ì„ ê³ ê°ì´ ì§€ì§„ê³¼ ê°™ì€ ì˜ˆê¸°ì¹˜ ì•Šì€ ì¥ì• ë¡œ ì¸í•´ì„œ ì„œë²„ê°€ ì¬ë¶€íŒ…ë˜ëŠ” ìƒí™©ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆìŒì„ í…ŒìŠ¤íŠ¸í•˜ë˜ ì¤‘ ì„œë²„ê°€ ì¬ë¶€íŒ…ë  ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆì–´ì•¼í•  í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì‹œì‘ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” í”¼ë“œë°±ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì‹œìŠ¤í…œì´ ì¬ë¶€íŒ…ë  ë•Œ í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•˜ì˜€ê³  í¬ë¡ íƒ­ê³¼ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ì´í•´ê°€ ë¶€ì¡±í–ˆë‹¤ëŠ” ì ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ëŠ” ì„œë²„ì— ëŒ€í•œ ë¶€ë¶„ì„ ì „ë¬¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì„œë²„ ì—”ì§€ë‹ˆì–´ëŠ” ì•„ë‹ˆë¯€ë¡œ í•„ìš”í•œ ë¶€ë¶„ì„ ê²€ìƒ‰í•œ í›„ ì •ë¦¬ëœ ë°”ë¥¼ í† ëŒ€ë¡œ ì‘ì—…ì„ í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. Crontabì— ì˜í•´ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ìœ„í•´ì„œ ê²€í† í•˜ì§€ ì•Šì€ ë¶€ë¶„ì´ ë¬´ì—‡ì¸ì§€ë¥¼ ê³µìœ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h2 id="Crontab"><a href="#Crontab" class="headerlink" title="Crontab"></a>Crontab</h2><p>í¬ë¡ íƒ­ì— ëŒ€í•œ ë©”ë‰´ì–¼ í˜ì´ì§€ë¥¼ ì‚´í´ë³´ë©´ <a href="https://man7.org/linux/man-pages/man5/crontab.5.html#EXTENSIONS">EXTENSIONS</a>ìœ¼ë¡œ ì‹œìŠ¤í…œì´ ì¬ë¶€íŒ…ë˜ì—ˆì„ë•Œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì‹œê°„ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ë³„ì¹­ì´ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://phoenixnap.com/kb/crontab-reboot">Crontab Reboot: How to Execute a Job Automatically at Boot</a>ì™€ ê°™ì€ ê¸€ì—ì„œë„ ê°„ë‹¨í•˜ê²Œ @rebootì„ ì‚¬ìš©í•˜ë©´ ì‹œìŠ¤í…œì´ ë¶€íŒ…ë˜ì—ˆì„ë•Œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ê³  ì •ë¦¬ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë‹¨ìˆœíˆ @rebootë¥¼ ì§€ì •í•˜ê¸°ë§Œ í•˜ë©´ ì‹œìŠ¤í…œì´ ì¬ë¶€íŒ…ë˜ì—ˆì„ë•Œ ì •ìƒì ìœ¼ë¡œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë  ê²ƒì´ë¼ê³  ì˜ˆìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h3 id="Interactive-and-Non-Interactive-Shell"><a href="#Interactive-and-Non-Interactive-Shell" class="headerlink" title="Interactive and Non-Interactive Shell"></a>Interactive and Non-Interactive Shell</h3><p>ì œê°€ ê²€í† í•˜ì§€ ì•Šì€ ë¶€ë¶„ì€ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ë°©ì‹ì´ ë‹¤ì–‘í•˜ë‹¤ëŠ” ê²ƒì— ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ SSH ì ‘ì†ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì‰˜ì€ ë¡œê·¸ì¸ ì‰˜ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ ì‰˜ ë° Bashë¡œ ì‹¤í–‰ë˜ì—ˆì„ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ë“¤ì´ ìë™ìœ¼ë¡œ ë¡œë“œëœë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>&#x2F;etc&#x2F;profile</li>
<li>~&#x2F;.bash_profile</li>
<li>~&#x2F;.bashrc</li>
<li>~&#x2F;.profile</li>
</ul>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•´ë³´ì•˜ì„ë•ŒëŠ” ë¡œê·¸ì¸ ì‰˜ì„ í†µí•´ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì— ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì°¸ì¡°í•˜ëŠ” ë§ì€ í™˜ê²½ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì§€ì •ë˜ì–´ìˆë‹¤ëŠ” ê²ƒì´ ë³´ì¥ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Crontabì— ì˜í•´ì„œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¡œê·¸ì¸ ì‰˜ì—ì„œ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ í™˜ê²½ë³€ìˆ˜ê°€ ì œëŒ€ë¡œ ì§€ì •ëœë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ ê°„ê³¼í•œ ê²ƒì…ë‹ˆë‹¤.</p>
<h3 id="ì‚¬ìš©ì-ê¸°ë³¸-ì‰˜"><a href="#ì‚¬ìš©ì-ê¸°ë³¸-ì‰˜" class="headerlink" title="ì‚¬ìš©ì ê¸°ë³¸ ì‰˜"></a>ì‚¬ìš©ì ê¸°ë³¸ ì‰˜</h3><p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— ì…”ë±…(#!)ì„ Bashë¡œ ì§€ì •í•˜ë”ë¼ë„ í¬ë¡ íƒ­ì— ì˜í•´ì„œ ì‹¤í–‰ë˜ëŠ” ì‰˜ ìœ í˜•ì€ ì‚¬ìš©ìì˜ ê¸°ë³¸ ì‰˜ë¡œ ê³ ì •ë©ë‹ˆë‹¤. SSH ì ‘ì† í›„ ë¡œê·¸ì¸ ì‰˜ ìƒíƒœë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ í˜„ì¬ ì‰˜ì´ Bashì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë¦¬ë¶€íŠ¸ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ í¬ë¡ íƒ­ì— ì˜í•´ì„œ ì‹¤í–‰ëœ ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë©´ Bashê°€ ì•„ë‹Œ ê¸°ë³¸ ì‰˜ì´ë¼ê³  ê¸°ë¡ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">./a.sh
<span class="token environment constant">SHELL</span><span class="token builtin class-name">:</span> /bin/bash

<span class="token comment"># reboot with #!/bin/bash</span>
<span class="token function">tail</span> a.log
<span class="token environment constant">SHELL</span><span class="token builtin class-name">:</span> /bin/sh

<span class="token comment"># reboot with #!/bin/bash --login</span>
<span class="token function">tail</span> a.log
<span class="token environment constant">SHELL</span><span class="token builtin class-name">:</span> /bin/sh

<span class="token comment"># crontab -e &amp;&amp; SHELL=/bin/bash</span>
<span class="token environment constant">SHELL</span><span class="token builtin class-name">:</span> /bin/bash</code></pre>

<p>ìœ„ ê²°ê³¼ë¥¼ í† ëŒ€ë¡œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì…”ë±…ê³¼ í•¨ê»˜ ë¡œê·¸ì¸ ì‰˜ ì˜µì…˜ì„ í™œì„±í™”í•˜ëŠ” ê²ƒê³¼ ìƒê´€ì—†ì´ ì‚¬ìš©ìì˜ ê¸°ë³¸ ì‰˜ì„ ë³€ê²½í•˜ê±°ë‚˜ í¬ë¡ íƒ­ ì„¤ì • ì‹œ ì‰˜ì„ ì§€ì •í•˜ë„ë¡ í•˜ì—¬ì•¼í•œë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="í™˜ê²½ë³€ìˆ˜-íŒŒì¼"><a href="#í™˜ê²½ë³€ìˆ˜-íŒŒì¼" class="headerlink" title="í™˜ê²½ë³€ìˆ˜ íŒŒì¼"></a>í™˜ê²½ë³€ìˆ˜ íŒŒì¼</h3><p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¡œê·¸ì¸ ì‰˜ ì˜µì…˜(â€“login)ì„ ì§€ì •í•˜ëŠ” ê²ƒì€ ì •í•´ì§„ í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì„ ë¡œë“œí•˜ê¸° ìœ„í•œ ë°©ë²•ì…ë‹ˆë‹¤. ë‹¤ë§Œ, ë¡œê·¸ì¸ ì‰˜ì´ ì ìš©ë˜ì—ˆê¸°ì— ë‹¤ìŒê³¼ ê°™ì´ ~&#x2F;.bashrcëŠ” ë¡œë“œë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash --login</span>

<span class="token function">tail</span> a.log
Loaded /etc/profile
Loaded .profile
<span class="token environment constant">SHELL</span><span class="token builtin class-name">:</span> /bin/bash</code></pre>

<blockquote>
<p>í¬ë¡ íƒ­ì— ì˜í•´ì„œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë  ë•Œì—ëŠ” Non-Interactive Shell ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤ëŠ” ì ì„ ì¸ì§€í•´ì•¼í•©ë‹ˆë‹¤. ì´ëŠ” ë¡œê·¸ì¸ ì‰˜ ì˜µì…˜ì„ ì§€ì •í•´ë„ .bashrc íŒŒì¼ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ê²°ê³¼ì ìœ¼ë¡œ, ì¬ë¶€íŒ…ì‹œì—ë„ í¬ë¡ íƒ­ì— ì˜í•´ì„œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì˜ ë°©ì•ˆ ì¤‘ì—ì„œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë  ìˆ˜ ìˆë„ë¡ ë³„ë„ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ol>
<li>.profileì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•œ ê²½ìš° â€“login ì˜µì…˜ ê³ ë ¤</li>
<li>.bashrc ë˜ëŠ” .bash_profileì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•œ ê²½ìš° íŒŒì¼ì„ ì§ì ‘ ëª…ì‹œí•˜ì—¬ ë¡œë“œ</li>
<li>í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ</li>
</ol>
<p>í¬ë¡ íƒ­ì— ì˜í•´ì„œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì•Œë§ì€ ì‰˜ê³¼ í™˜ê²½ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ì˜€ëŠ”ì§€ ê²€í† í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://unix.stackexchange.com/a/46856">Difference between Login Shell and Non-Login Shell?</a>  </li>
<li><a href="https://www.geeksforgeeks.org/shell-scripting-interactive-and-non-interactive-shell/">Shell Scripting â€“ Interactive and Non-Interactive Shell</a>  </li>
<li><a href="https://man7.org/linux/man-pages/man5/crontab.5.html">crontab(5) â€” Linux manual page</a></li>
</ul>
]]></content>
      <tags>
        <tag>Autorun</tag>
        <tag>Crontab</tag>
        <tag>Interactive Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ë° ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸</title>
    <url>/autorun-script/</url>
    <content><![CDATA[<p>Ubuntuì™€ ê°™ì€ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì€ APT ê·¸ë¦¬ê³  CentOSì™€ ê°™ì€ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì€ YUM ì´ë‚˜ DNFë¥¼ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ í†µí•´ì„œ ì„¤ì¹˜í•˜ëŠ” ê²½ìš° <a href="https://systemd.io/">System and Service Manager</a>ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ë“±ë¡ìœ¼ë¡œ ì‰½ê²Œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•  ìˆ˜ ìˆê²Œ ì§€ì›í•©ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> <span class="token function">docker</span> </code></pre>

<p>ê·¸ëŸ¬ë‚˜, ê°€ë”ì€ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ë“±ë¡ëœ ë¦¬íŒŒì§€í† ë¦¬(Repository)ì—ì„œ ë‹¤ì–‘í•œ ë²„ì „ì„ ì§€ì›í•˜ì§€ ì•ŠìŒìœ¼ë¡œ ì¸í•´ <a href="https://www.elastic.co/kr/downloads/past-releases/elasticsearch-7-12-0">ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 7.12.0 ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ</a>ë¥¼ í†µí•´ ìš´ì˜ì²´ì œ ì•„í‚¤í…ì²˜ ë‹¨ìœ„ë¡œ ë¹Œë“œëœ ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš° ì§ì ‘ Systemdì— ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ë“±ë¡í•˜ê±°ë‚˜ í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ë˜ëŠ” ì¢…ë£Œë¥¼ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ì„œë¹„ìŠ¤ ë“±ë¡ ì´ì™¸ì—ë„ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>í˜„ì¬ ë‹´ë‹¹í•˜ê³  ìˆëŠ” ì¼ë³¸ ê³ ê° í™˜ê²½ì˜ ê²½ìš°ì—ëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë„ì¿„(ap-northeast-1) ë¦¬ì „ì˜ ëŒ€ê·œëª¨ ì¥ì• ì™€ ì¦ì€ ì§€ì§„ìœ¼ë¡œ ì¸í•œ ì •ì „ ì‚¬íƒœë“±ì„ ê³ ë ¤í•´ì„œ ì‹œìŠ¤í…œì´ ì•ˆì •ì ì¸ ìƒíƒœë¡œ ìë™ìœ¼ë¡œ ë³µêµ¬ë˜ë„ë¡ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¬ì‹œì‘í•˜ëŠ” ê²ƒì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ì™€ ê°™ì€ ì´ìœ ë¡œ ê³ ê° í™˜ê²½ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì•Œë§ˆë¦¬ëˆ…ìŠ¤(AlmaLinux)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="ì—˜ë¼ìŠ¤í‹±ì„œì¹˜-ì‹¤í–‰-ìŠ¤í¬ë¦½íŠ¸"><a href="#ì—˜ë¼ìŠ¤í‹±ì„œì¹˜-ì‹¤í–‰-ìŠ¤í¬ë¦½íŠ¸" class="headerlink" title="ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸"></a>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">ES_USER</span><span class="token operator">=</span><span class="token string">"ec2-user"</span>
<span class="token assign-left variable">ES_HOME</span><span class="token operator">=</span><span class="token string">"/home/<span class="token variable">$ES_USER</span>/elasticsearch-7.3.2"</span>
<span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> $ES_HOME <span class="token operator">|</span> pidof <span class="token function">java</span><span class="token variable">`</span></span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token variable">$ES_HOME</span> <span class="token operator">|</span> pidof <span class="token function">java</span> <span class="token operator">></span> /dev/null
<span class="token assign-left variable">RESULT</span><span class="token operator">=</span><span class="token variable">$?</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token variable">$RESULT</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [WARN] Already running with pid(<span class="token variable">$PID</span>)."</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [INFO] Starting elasticsearch..."</span>
    <span class="token variable">$&#123;ES_HOME&#125;</span>/bin/elasticsearch <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;ES_HOME&#125;</span>/elasticsearch.pid
<span class="token keyword">fi</span></code></pre>

<p>í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œì—ëŠ” ì˜ˆìƒë˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ì§€ë¥¼ ps ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë¥¼ ì²´í¬í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ê°€ ì¡´ì¬í•˜ëŠ”ì§€ì˜ ê²°ê³¼ì— ë”°ë¼ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•´ì•¼í•˜ëŠ”ì§€ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì™€ ê°™ì´ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²½ìš° í¬ë¡ íƒ­ì„ í†µí•´ì„œ ì„œë²„ ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì˜ˆìƒí•˜ì§€ ëª»í•˜ëŠ” ì´ìœ ë¡œ ì¢…ë£Œë˜ë”ë¼ë„ ë‹¤ì‹œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ì ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h4 id="ì—˜ë¼ìŠ¤í‹±ì„œì¹˜-ì¢…ë£Œ-ìŠ¤í¬ë¦½íŠ¸"><a href="#ì—˜ë¼ìŠ¤í‹±ì„œì¹˜-ì¢…ë£Œ-ìŠ¤í¬ë¦½íŠ¸" class="headerlink" title="ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸"></a>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">ES_USER</span><span class="token operator">=</span><span class="token string">"ec2-user"</span>
<span class="token assign-left variable">ES_HOME</span><span class="token operator">=</span><span class="token string">"/home/<span class="token variable">$ES_USER</span>/elasticsearch-7.3.2"</span>
<span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> $ES_HOME <span class="token operator">|</span> pidof <span class="token function">java</span><span class="token variable">`</span></span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token variable">$ES_HOME</span> <span class="token operator">|</span> pidof <span class="token function">java</span> <span class="token operator">></span> /dev/null
<span class="token assign-left variable">RESULT</span><span class="token operator">=</span><span class="token variable">$?</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token variable">$RESULT</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [INFO] Stopping elasticsearch..."</span>
    <span class="token function">kill</span> <span class="token parameter variable">-15</span> <span class="token variable">$PID</span>

    <span class="token function">sleep</span> <span class="token number">3</span>

    <span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token variable">$ES_HOME</span> <span class="token operator">|</span> pidof <span class="token function">java</span> <span class="token operator">></span> /dev/null
    <span class="token assign-left variable">RESULT</span><span class="token operator">=</span><span class="token variable">$?</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token operator">=</span> <span class="token variable">$RESULT</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [ERROR] Cannot stop elasticsearch"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [INFO] Stopped elasticsearch."</span>
    <span class="token keyword">fi</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --rfc-3339<span class="token operator">=</span>seconds<span class="token variable">`</span></span>] [WARN] Elasticsearch not running."</span>
<span class="token keyword">fi</span></code></pre>
<p>í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£ŒëŠ” ë‹¨ìˆœí•˜ê²Œ kill ëª…ë ¹ì–´ì™€ í•¨ê»˜ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì•„ì´ë””ë¥¼ ì§€ì •í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, SIGTERM ì‹œê·¸ë„ì„ ë³´ë‚´ë„ í”„ë¡œì„¸ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ kill ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ ì ì‹œ ëŒ€ê¸°í•œ ë‹¤ìŒ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìƒíƒœë¥¼ ë‹¤ì‹œ í•œë²ˆ ì²´í¬í•˜ì—¬ ì œëŒ€ë¡œ ì¢…ë£Œë˜ì—ˆëŠ”ì§€ë¥¼ ì²´í¬í•˜ì˜€ìŠµë‹ˆë‹¤. ìœ„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë” ë³´ì™„í•œë‹¤ë©´ ì¼ì • ì‹œê°„ì„ ëŒ€ê¸°í•˜ëŠ” ê²ƒê³¼ í•¨ê»˜ Në²ˆ ë” í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ë°˜ë³µë¬¸ì„ ì ìš©í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì‚¬ìš©ìì— ì˜í•œ ëª…ì‹œì ì¸ í–‰ìœ„ë¼ê³  ìƒê°í•˜ì—¬ í•œë²ˆ ë§Œ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ì— ë”°ë¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ì˜€ìŠµë‹ˆë‹¤. </p>
<h4 id="ìŠ¤í¬ë¦½íŠ¸-ì£¼ì˜ì‚¬í•­"><a href="#ìŠ¤í¬ë¦½íŠ¸-ì£¼ì˜ì‚¬í•­" class="headerlink" title="ìŠ¤í¬ë¦½íŠ¸ ì£¼ì˜ì‚¬í•­"></a>ìŠ¤í¬ë¦½íŠ¸ ì£¼ì˜ì‚¬í•­</h4><p>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ëŠ” ìì²´ì ìœ¼ë¡œ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ íŒŒì¼ë¡œ ìƒì„±í•˜ëŠ” íŒŒë¼ë¯¸í„° ì˜µì…˜ì„ ì œê³µí•˜ì§€ë§Œ ì¼ë¶€ í”„ë¡œì„¸ìŠ¤ëŠ” ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ nohup ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ <strong>echo $!</strong> ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì•„ì´ë””ë¥¼ ê°€ì ¸ì™€ì„œ íŒŒì¼ë¡œ ê¸°ë¡í•˜ê¸°ë„ í•©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ê°€ ì €ì¥ëœ íŒŒì¼ì„ í†µí•´ì„œ í”„ë¡œì„¸ìŠ¤ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê²Œ ë˜ë©´ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë³µìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ì·¨ì•½ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ë˜í•œ, ìœ„ ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” pidof ëª…ë ¹ì–´ë¡œ ì»¤ë§¨ë“œ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ ê°€ì ¸ì™”ì§€ë§Œ ì»¤ë§¨ë“œ ì´ë¦„ë§Œìœ¼ë¡œëŠ” ì œëŒ€ë¡œ êµ¬ë¶„í•  ìˆ˜ ì—†ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ grep ê³¼ awk ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ ì¶”ì¶œí•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë¼ë©´ pidof ëª…ë ¹ì–´ê°€ ê°„ë‹¨í•˜ì§€ë§Œ ë‹¤ìˆ˜ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ì‹¤í–‰í•˜ëŠ” ì‹œìŠ¤í…œì´ë¼ë©´ ì£¼ì˜í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># íŠ¹ì • í”„ë¡œì„¸ìŠ¤ ì°¾ê¸°</span>
ubuntu@ubuntu:~$ <span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'/home/ubuntu/q/l64/q -p 5000'</span>
ubuntu     <span class="token number">60379</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span> <span class="token number">298068</span>  <span class="token number">5584</span> ?        Sl   Jan30   <span class="token number">0</span>:04 /home/ubuntu/q/l64/q <span class="token parameter variable">-p</span> <span class="token number">5000</span>
ubuntu     <span class="token number">76497</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">6440</span>   <span class="token number">720</span> pts/0    S+   <span class="token number">13</span>:51   <span class="token number">0</span>:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto /home/ubuntu/q/l64/q <span class="token parameter variable">-p</span> <span class="token number">5000</span>

<span class="token comment"># Grep ëª…ë ¹ì–´ëŠ” ì œì™¸</span>
ubuntu@ubuntu:~$ <span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'/home/ubuntu/q/l64/q -p 5000'</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span>
ubuntu     <span class="token number">60379</span>  <span class="token number">0.0</span>  <span class="token number">0.2</span> <span class="token number">298068</span>  <span class="token number">5584</span> ?        Sl   Jan30   <span class="token number">0</span>:04 /home/ubuntu/q/l64/q <span class="token parameter variable">-p</span> <span class="token number">5000</span>

<span class="token comment"># 2ë²ˆì§¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” ì¶”ì¶œ</span>
ubuntu@ubuntu:~$ <span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'/home/ubuntu/q/l64/q -p 5000'</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $2&#125;'</span>
<span class="token number">60379</span></code></pre>

<p>í¬ë¡ íƒ­ì„ ì‚¬ìš©í•´ì„œ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•˜ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í• ë•Œì—ë„ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì˜ ê¸°ë³¸ ì‰˜ì˜ ì°¨ì´ë¡œ ì¸í•´ ì‚¬ìš©ìì˜ í™˜ê²½ë³€ìˆ˜ê°€ ì œëŒ€ë¡œ ë“±ë¡ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¶„íˆ¬ì˜ ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ í¬ë¡ íƒ­ì„ ì‚¬ìš©í•  ë•Œ bashë¥¼ ì§€ì •í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">crontab</span> <span class="token parameter variable">-e</span>
<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/bash
@reboot /home/ubuntu/start.sh <span class="token operator">>></span> /home/ubuntu/start.log</code></pre>

<h4 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h4><ul>
<li><a href="https://stackoverflow.com/a/27302946">https://stackoverflow.com/a/27302946</a></li>
<li><a href="https://askubuntu.com/a/157787">https://askubuntu.com/a/157787</a></li>
<li><a href="https://unix.stackexchange.com/a/94459">https://unix.stackexchange.com/a/94459</a></li>
</ul>
]]></content>
      <tags>
        <tag>Autorun</tag>
      </tags>
  </entry>
  <entry>
    <title>Base64</title>
    <url>/base64/</url>
    <content><![CDATA[<p><img data-src="/images/posts/base64/base64-01.png"></p>
<p>ìœ„ì™€ ê°™ì´ ì–´ë–¤ ì„œë¹„ìŠ¤ì— ëŒ€í•œ íšŒì›ê°€ì…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í–ˆì„ê²½ìš° ì¸ì¦ ê´€ë ¨ ë©”ì¼ì´ ë°œì†¡ë˜ëŠ” ê²ƒì„ ìì£¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì´ ì¸ì¦í™•ì¸ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ë•Œ ì–´ë– í•œ ë™ì‘ì„ í•˜ëŠ”ì§€ ê¶ê¸ˆí•˜ì‹œì§€ ì•Šìœ¼ì‹ ê°€ìš”? ìœ„ì™€ ê°™ì€ ì¸ì¦ ë²„íŠ¼ì€ ë§í¬ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ ë˜ì–´ìˆìœ¼ë©° ì¼ë°˜ì ì¸ GET ìš”ì²­ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ URIì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì–´ë– í•œ í˜•íƒœì˜ ë¬¸ìì—´ì´ í¬í•¨ë˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>a2RldmtyQGdtYWlsLmNvbTp5Rm5iTUtrblZrRW85ckdxTVlmTGtWNE03UUtMTldXWg&#x3D;&#x3D;</p>
</blockquote>
<p>ìœ„ì™€ ê°™ì´ êµ¬ì„±ëœ ë¬¸ìì—´ì€ Base64ë¡œ ì¸ì½”ë”©ëœ ë°ì´í„°ì´ë©° í¬ë¡¬ ê°œë°œìë„êµ¬ì˜ ì½˜ì†”ì„ í†µí•´ ì´ ì•„ìŠ¤í‚¤ ë¬¸ìì—´ì„ ë””ì½”ë”©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ìì—´ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">atob</span><span class="token punctuation">(</span><span class="token string">"a2RldmtyQGdtYWlsLmNvbTp5Rm5iTUtrblZrRW85ckdxTVlmTGtWNE03UUtMTldXWg=="</span><span class="token punctuation">)</span>
<span class="token string">'kdevkr@gmail.com:yFnbMKknVkEo9rGqMYfLkV4M7QKLNWWZ'</span></code></pre>

<p>ì œ ì´ë©”ì¼ ì£¼ì†Œì™€ í•¨ê»˜ ì–´ë– í•œ ë¬¸ìì—´ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë§ˆë„ ì € ì•Œìˆ˜ì—†ëŠ” ë¬¸ìì—´ì€ ì•”í˜¸í™”ëœ ì¸ì¦ ì •ë³´ì¼ ê²ƒì…ë‹ˆë‹¤. ì¸ì¦ ì •ë³´ì™€ GET ìš”ì²­ì— í¬í•¨ëœ ì´ë©”ì¼ ì£¼ì†Œê°€ ë™ì¼í•œì§€ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ê²€ì¦í•˜ê² ì£ . ì´ëŸ¬í•œ ì¸ì¦ ì •ë³´ë¥¼ ì™œ Base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ ì „ì†¡í•˜ê²Œ ë˜ëŠ” ê²ƒì¼ê¹Œìš”? <strong>ì•ˆì „í•œ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ ìí•˜ëŠ” ëª©ì </strong>ì— ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ì•„ìŠ¤í‚¤-ì½”ë“œ"><a href="#ì•„ìŠ¤í‚¤-ì½”ë“œ" class="headerlink" title="ì•„ìŠ¤í‚¤ ì½”ë“œ"></a>ì•„ìŠ¤í‚¤ ì½”ë“œ</h2><p>ì‚¬ëŒë“¤ì€ ìˆ˜ ë§ì€ ë¬¸ìì˜ í˜•íƒœë¥¼ ì½ê³  êµ¬ë¶„í•  ìˆ˜ ìˆì§€ë§Œ 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ì»´í“¨í„° ì‹œìŠ¤í…œì€ ì‹œìŠ¤í…œì— ë”°ë¼ 0ê³¼ 1ì„ ì½ê³  êµ¬ë¶„í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì˜ ë°œì „ì— ë”°ë¼ ì•„ìŠ¤í‚¤ ì½”ë“œë¶€í„° ìœ ë‹ˆì½”ë“œ ê·¸ë¦¬ê³  ì—¬ëŸ¬ê°€ì§€ ë¬¸ì ì¡°í•©ì´ í™•ì¥ë˜ê³  ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¬¸ì í˜•ì‹ì€ ì•„ìŠ¤í‚¤ ì½”ë“œë¥¼ ê¸°ì´ˆë¡œ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì— ì•„ìŠ¤í‚¤ ì½”ë“œ ì¤‘ ì¼ë¶€ ë¬¸ì ì§‘í•©ì€ ê±°ì˜ ëª¨ë“  ì‹œìŠ¤í…œì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¬¸ìì…ë‹ˆë‹¤. ê·¸ëŸ¬í•œ ë¬¸ìë“¤ì„ ëª¨ì•„ ë§Œë“¤ì–´ì§€ëŠ”ê²Œ Base64 ì¸ì½”ë”©ì…ë‹ˆë‹¤.</p>
<h3 id="Base64-ì´ë¯¸ì§€"><a href="#Base64-ì´ë¯¸ì§€" class="headerlink" title="Base64 ì´ë¯¸ì§€"></a>Base64 ì´ë¯¸ì§€</h3><p>ë¸Œë¼ìš°ì €ì—ì„œëŠ” ë°”ì´ë„ˆë¦¬ ë°ì´í„° ë¿ë§Œ ì•„ë‹ˆë¼ Base64ë¡œ ì´ë£¨ì–´ì§„ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAA+VJREFUeF7tnclu4zAUBEf//9EeYG6SAhUKTdJUpnMV1663kbKd4/P5fP70bxsFjgLZhsW/hRTIXjwKZDMeBVIguymw2XqaQwpkMwU2Ww56yHEcS5d8PRZd56djU9p+9mZx/XQOKZCxiAoELiK+bXBX3A1ZXw7JMRByOevgFPNTC6b10vx2PzeBL8BxPTaH0IB2AyRIgVwUJcEsAGtBBVIgqY2d+luD1kmdzgm0G+pPIdF6jB2P1jd9f2kOSQXSFiSrogIBEyILtAJai52dw+L91UPOV0MkqDUAHQHeBsRaOAlIgi0PyQVSD4nKwnoIHP1Xu3SBfBkIxfgUEI2/2uC2PxiSYAVyeb8w24IKRN5lFchZMDrH4ME3LXupzqfn5AH2+XU+FEC+r6D9xCG0QJ7PIRZAgcBlYz1EmpQNSRSj/7uQJfXWzUnw2c/1gmUH9FibQ+T8uvlswWl8vWDZoUAG3zRI/W/NC+S3AUktIu1PST8tM9P1je6Pd1mjJ7TjFYhVbHL7ApkssB2+QOBykQTFKkKerNPLS8oxtJ/0oKn7jz6HFMjzF5xQnwJxPoKCyghw8+ACeTkQunqwFmTHG53kR49HOQv1sR5iBbQLJIHo+ej57Hhx+wJxL6hGG0ScQ+ohkwFaD6G62p4baDxKuWSxuz+PPYQELJDz78GRQRQIfK7MhmQSnJ4XyNuBUBlnQxjV4TZnUPt0Ptr/8PEpqdOCCmTsb4jqF1SUtG0MJgu3BkEGYuej+eshg7+FawHZJK3Hp5A1egGph5EH0Pir+1sPwpBVIM82PjpEF8ji77tQCCuQtwEhorOfz84JFOPT+a0+6CF2wNHtU0Gof4FIYiRoWjUVSIE8KoAhy1qo1PvWPLXYtAxN9xvPbw+GqeDUv0BAgdRiCADlALpLov72YJvutx5yIRILIu/KhhuEDVkUUqxHkAXTc/KgFNDy8QvEvc8gA6HnZLC6yqqHuB88s3oViPyvgeQB9Hy6h9iqZHVMtzkABQu/REoeE3tIgTx/DouqsJvBpEm9QArkZFQ2Ztv2NuSRgf66kDVaUAopJDDlHALw+pBVIGFVYS2QLKpACoSi0uNzMrDXhSyK4bRh8igaP6LxQ2dc7+5lLwmGGxzs4SkgXG+BfPc/mTZkhZ/D2t5D0gXaGD/6LowOfrQ/CkHUf7iH2AlJACs4AbXro5xFZbydr0BAsQKRVZD1IGuxrwNiN2jbW8GtgGnIsSFSt7dlrxXYti+QzT+XRRZWD7EmL9vXQ0YX0hJAm58VwHfqFWytAgWyVm+crUBQorUNCmSt3jhbgaBEaxsUyFq9cbYCQYnWNvgLqC4vPjN7siAAAAAASUVORK5CYII=<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAA+VJREFUeF7tnclu4zAUBEf//9EeYG6SAhUKTdJUpnMV1663kbKd4/P5fP70bxsFjgLZhsW/hRTIXjwKZDMeBVIguymw2XqaQwpkMwU2Ww56yHEcS5d8PRZd56djU9p+9mZx/XQOKZCxiAoELiK+bXBX3A1ZXw7JMRByOevgFPNTC6b10vx2PzeBL8BxPTaH0IB2AyRIgVwUJcEsAGtBBVIgqY2d+luD1kmdzgm0G+pPIdF6jB2P1jd9f2kOSQXSFiSrogIBEyILtAJai52dw+L91UPOV0MkqDUAHQHeBsRaOAlIgi0PyQVSD4nKwnoIHP1Xu3SBfBkIxfgUEI2/2uC2PxiSYAVyeb8w24IKRN5lFchZMDrH4ME3LXupzqfn5AH2+XU+FEC+r6D9xCG0QJ7PIRZAgcBlYz1EmpQNSRSj/7uQJfXWzUnw2c/1gmUH9FibQ+T8uvlswWl8vWDZoUAG3zRI/W/NC+S3AUktIu1PST8tM9P1je6Pd1mjJ7TjFYhVbHL7ApkssB2+QOBykQTFKkKerNPLS8oxtJ/0oKn7jz6HFMjzF5xQnwJxPoKCyghw8+ACeTkQunqwFmTHG53kR49HOQv1sR5iBbQLJIHo+ej57Hhx+wJxL6hGG0ScQ+ohkwFaD6G62p4baDxKuWSxuz+PPYQELJDz78GRQRQIfK7MhmQSnJ4XyNuBUBlnQxjV4TZnUPt0Ptr/8PEpqdOCCmTsb4jqF1SUtG0MJgu3BkEGYuej+eshg7+FawHZJK3Hp5A1egGph5EH0Pir+1sPwpBVIM82PjpEF8ji77tQCCuQtwEhorOfz84JFOPT+a0+6CF2wNHtU0Gof4FIYiRoWjUVSIE8KoAhy1qo1PvWPLXYtAxN9xvPbw+GqeDUv0BAgdRiCADlALpLov72YJvutx5yIRILIu/KhhuEDVkUUqxHkAXTc/KgFNDy8QvEvc8gA6HnZLC6yqqHuB88s3oViPyvgeQB9Hy6h9iqZHVMtzkABQu/REoeE3tIgTx/DouqsJvBpEm9QArkZFQ2Ztv2NuSRgf66kDVaUAopJDDlHALw+pBVIGFVYS2QLKpACoSi0uNzMrDXhSyK4bRh8igaP6LxQ2dc7+5lLwmGGxzs4SkgXG+BfPc/mTZkhZ/D2t5D0gXaGD/6LowOfrQ/CkHUf7iH2AlJACs4AbXro5xFZbydr0BAsQKRVZD1IGuxrwNiN2jbW8GtgGnIsSFSt7dlrxXYti+QzT+XRRZWD7EmL9vXQ0YX0hJAm58VwHfqFWytAgWyVm+crUBQorUNCmSt3jhbgaBEaxsUyFq9cbYCQYnWNvgLqC4vPjN7siAAAAAASUVORK5CYII=<span class="token punctuation">"</span></span> <span class="token attr-name">data-loaded</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>

<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAA+VJREFUeF7tnclu4zAUBEf//9EeYG6SAhUKTdJUpnMV1663kbKd4/P5fP70bxsFjgLZhsW/hRTIXjwKZDMeBVIguymw2XqaQwpkMwU2Ww56yHEcS5d8PRZd56djU9p+9mZx/XQOKZCxiAoELiK+bXBX3A1ZXw7JMRByOevgFPNTC6b10vx2PzeBL8BxPTaH0IB2AyRIgVwUJcEsAGtBBVIgqY2d+luD1kmdzgm0G+pPIdF6jB2P1jd9f2kOSQXSFiSrogIBEyILtAJai52dw+L91UPOV0MkqDUAHQHeBsRaOAlIgi0PyQVSD4nKwnoIHP1Xu3SBfBkIxfgUEI2/2uC2PxiSYAVyeb8w24IKRN5lFchZMDrH4ME3LXupzqfn5AH2+XU+FEC+r6D9xCG0QJ7PIRZAgcBlYz1EmpQNSRSj/7uQJfXWzUnw2c/1gmUH9FibQ+T8uvlswWl8vWDZoUAG3zRI/W/NC+S3AUktIu1PST8tM9P1je6Pd1mjJ7TjFYhVbHL7ApkssB2+QOBykQTFKkKerNPLS8oxtJ/0oKn7jz6HFMjzF5xQnwJxPoKCyghw8+ACeTkQunqwFmTHG53kR49HOQv1sR5iBbQLJIHo+ej57Hhx+wJxL6hGG0ScQ+ohkwFaD6G62p4baDxKuWSxuz+PPYQELJDz78GRQRQIfK7MhmQSnJ4XyNuBUBlnQxjV4TZnUPt0Ptr/8PEpqdOCCmTsb4jqF1SUtG0MJgu3BkEGYuej+eshg7+FawHZJK3Hp5A1egGph5EH0Pir+1sPwpBVIM82PjpEF8ji77tQCCuQtwEhorOfz84JFOPT+a0+6CF2wNHtU0Gof4FIYiRoWjUVSIE8KoAhy1qo1PvWPLXYtAxN9xvPbw+GqeDUv0BAgdRiCADlALpLov72YJvutx5yIRILIu/KhhuEDVkUUqxHkAXTc/KgFNDy8QvEvc8gA6HnZLC6yqqHuB88s3oViPyvgeQB9Hy6h9iqZHVMtzkABQu/REoeE3tIgTx/DouqsJvBpEm9QArkZFQ2Ztv2NuSRgf66kDVaUAopJDDlHALw+pBVIGFVYS2QLKpACoSi0uNzMrDXhSyK4bRh8igaP6LxQ2dc7+5lLwmGGxzs4SkgXG+BfPc/mTZkhZ/D2t5D0gXaGD/6LowOfrQ/CkHUf7iH2AlJACs4AbXro5xFZbydr0BAsQKRVZD1IGuxrwNiN2jbW8GtgGnIsSFSt7dlrxXYti+QzT+XRRZWD7EmL9vXQ0YX0hJAm58VwHfqFWytAgWyVm+crUBQorUNCmSt3jhbgaBEaxsUyFq9cbYCQYnWNvgLqC4vPjN7siAAAAAASUVORK5CYII=" alt="Base64ë¡œ í‘œì‹œëœ QRì½”ë“œ ì´ë¯¸ì§€"></p>
<blockquote>
<p>ì›¹íŒ©ì˜ <a href="https://v4.webpack.js.org/loaders/url-loader/">url-loader</a>ëŠ” ìœ„ì™€ ê°™ì€ Base64 í˜•ì‹ì˜ URIë¡œ ë³€í™˜í•©ë‹ˆë‹¤. </p>
</blockquote>
<h3 id="HTTP-ê¸°ë³¸-ì¸ì¦"><a href="#HTTP-ê¸°ë³¸-ì¸ì¦" class="headerlink" title="HTTP ê¸°ë³¸ ì¸ì¦"></a>HTTP ê¸°ë³¸ ì¸ì¦</h3><p>ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ Authorization í—¤ë”ì— í¬í•¨í•˜ì—¬ ì „ë‹¬í•˜ëŠ” HTTP ê¸°ë³¸ ì¸ì¦ì˜ ê²½ìš°ì—ë„ Base64 ì¸ì½”ë”©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” HTTP í—¤ë”ì˜ ê°’ì´ <strong>ì•„ìŠ¤í‚¤ ì½”ë“œ</strong>ë¡œ ì¸ì½”ë”©ë˜ì–´ì•¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì•„ìŠ¤í‚¤ ì½”ë“œë¡œ í‘œí˜„í•  ìˆ˜ ì—†ëŠ” ë°ì´í„°ë„ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ Base64 ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Authorization: Basic bWFtYm86cGFzc3dvcmQ&#x3D;</p>
</blockquote>
<h3 id="JWT-Base64Url"><a href="#JWT-Base64Url" class="headerlink" title="JWT Base64Url"></a>JWT Base64Url</h3><p>ìµœê·¼ ì‚¬ìš©ì ì¸ì¦ì„ ìœ„í•´ ë§ì´ ë„ì…í•˜ëŠ” JWT(JSON Web Token)ëŠ” í˜ì´ë¡œë“œì™€ ì‹œê·¸ë‹ˆì²˜ ë¶€ë¶„ì„ <strong>Base64Url(URL Safe Base64)</strong> ë¡œ ì¸ì½”ë”©í•©ë‹ˆë‹¤. JWTë¥¼ Base64ë¡œ ì¸ì½”ë”©í•˜ëŠ” ì´ìœ ëŠ” í† í°ì´ URL íŒŒë¼ë¯¸í„°ë¡œ ì „ì†¡ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. </p>
<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>Base64ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ˆë³´ ê°œë°œìë¶„ë“¤ ë¿ë§Œ ì•„ë‹ˆë¼ ì €ì²˜ëŸ¼ Base64ì— ëŒ€í•´ì„œ ì¸ì§€í•˜ê³  ìˆì—ˆë˜ ë¶„ë“¤ì—ê²Œë„ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Base64ì— ëŒ€í•´ì„œ ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ë‹¤ë©´ <a href="https://datatracker.ietf.org/doc/html/rfc4648">RFC4648</a>ì„ ì°¸ê³ í•˜ì„¸ìš”.</p>
</blockquote>
]]></content>
      <tags>
        <tag>Base64</tag>
      </tags>
  </entry>
  <entry>
    <title>BouncyCastle Javaë¡œ X.509 ì¸ì¦ì„œ ë§Œë“¤ê¸°</title>
    <url>/bouncycastle-java/</url>
    <content><![CDATA[<p>ìë°”ì—ì„œ ì•”í˜¸í™” ë˜ëŠ” ì „ìì„œëª…ì„ ìœ„í•œ ê¸°ëŠ¥ì„ JCAë¥¼ í†µí•´ ì œê³µí•˜ê¸°ëŠ” í•˜ì§€ë§Œ ì‹¤ì§ˆì ìœ¼ë¡œëŠ” <a href="https://github.com/bcgit/bc-java">Bouncy Castle</a>ì´ë¼ëŠ” ì•”í˜¸ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œë‹¤. ë³¸ ê¸€ì—ì„œëŠ” BouncyCastleì—ì„œ ì œê³µí•˜ëŠ” ì—¬ëŸ¬ í´ë˜ìŠ¤ë“¤ì„ í™œìš©í•´ì„œ ì‚¬ì„¤ ë£¨íŠ¸ ì¸ì¦ì„œë¥¼ ë§Œë“¤ê³  ê·¸ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ X.509 ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§€ëŠ” X.509 ì¸ì¦ì„œëŠ” ë³´ì•ˆ ë ˆë²¨ì´ ë†’ì€ ì‹œìŠ¤í…œì—ì„œ Mutual TLS ì¸ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.bouncycastle:bcprov-jdk18on:1.75'</span>
    implementation <span class="token string">'org.bouncycastle:bcpkix-jdk18on:1.75'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>X.509 ì¸ì¦ì„œì— ëŒ€í•œ í‘œì¤€ì€ <a href="https://datatracker.ietf.org/doc/html/rfc5280">RFC5280</a>ë¡œ ì •ì˜ë˜ì–´ ìˆê³  ASN.1 í‘œê¸°ë¥¼ ë”°ë¥´ë©° ì§€ê¸ˆì€ X.509 v3ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>
</blockquote>
<h4 id="BouncyCastleProvider"><a href="#BouncyCastleProvider" class="headerlink" title="BouncyCastleProvider"></a>BouncyCastleProvider</h4><p>BouncyCastle ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í´ë˜ìŠ¤ íŒ¨ìŠ¤ì— ì¶”ê°€í–ˆë”ë¼ë„ BouncyCastleProviderë¥¼ JCE Providerë¡œ ì¶”ê°€í•´ì•¼í•œë‹¤. <code>$JAVA_HOME/lib/security/java.security</code>ì— ëª…ì‹œí•´ë„ ë˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” í´ë˜ìŠ¤ì—ì„œ ëŸ°íƒ€ì„ ì‹œì ì— BouncyCastleProviderë¥¼ ë³´ì•ˆ í”„ë¡œë°”ì´ë”ì— ì¶”ê°€í•´ë„ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Security</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>bouncycastle<span class="token punctuation">.</span>jce<span class="token punctuation">.</span>provider<span class="token punctuation">.</span></span><span class="token class-name">BouncyCastleProvider</span></span><span class="token punctuation">;</span>
 
<span class="token keyword">static</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Security</span><span class="token punctuation">.</span><span class="token function">addProvider</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Self-signed-CA-ì¸ì¦ì„œ-ë°œê¸‰í•˜ê¸°"><a href="#Self-signed-CA-ì¸ì¦ì„œ-ë°œê¸‰í•˜ê¸°" class="headerlink" title="Self signed CA ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°"></a>Self signed CA ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°</h4><p>ì¼ë°˜ì ìœ¼ë¡œ X.509 ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ëŠ” ê²½ìš° openssl ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•˜ê³  ê·¸ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ CSRê³¼ X.509 ì¸ì¦ì„œë¥¼ ìƒì„±í•  ê²ƒì´ë‹¤. Bouncy Castle ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥´ë¥¼ í†µí•´ ë§Œë“œë ¤ëŠ” ê²½ìš° Deprecated ì„ ì–¸ëœ X509V3CertificateGeneratorë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©í•  ê²ƒ ê°™ì§€ë§Œ X509v3CertificateBuilderë¥¼ ì‚¬ìš©í•´ì„œ X509Certificateë¥¼ ë§Œë“¤ì–´ë³´ë ¤ê³  í•œë‹¤.</p>
<blockquote>
<p>X509V3CertificateGeneratorì— ëŒ€í•´ì„œ Deprecated ì²˜ë¦¬í•œ ì‚¬ìœ ëŠ” ë”±íˆ ì•Œ ìˆ˜ ì—†ëŠ” ê²ƒ ê°™ë‹¤. </p>
</blockquote>
<p>JcaX509v3CertificateBuilderì™€ JcaContentSignerBuilderë¥¼ ì‚¬ìš©í•´ì„œ X509CertificateHolderë¥¼ ìƒì„±í•˜ê³  JcaX509CertificateConverterë¥¼ ì´ìš©í•˜ì—¬ X509Certificateë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤. ëŒ€ëµì ì¸ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìœ¼ë‹ˆ ì°¸ê³ í•´ë³´ë„ë¡ í•˜ì.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> securityProvider <span class="token operator">=</span> <span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">;</span>
<span class="token class-name">JcaX509ExtensionUtils</span> x509ExtensionUtils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509ExtensionUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">JcaX509CertificateConverter</span> x509CertificateConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509CertificateConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setProvider</span><span class="token punctuation">(</span>securityProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> signatureAlgorithm <span class="token operator">=</span> <span class="token string">"sha256WithRSA"</span><span class="token punctuation">;</span>

<span class="token class-name">KeyPairGenerator</span> keyPairGenerator <span class="token operator">=</span> <span class="token class-name">KeyPairGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">,</span> securityProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
keyPairGenerator<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">KeyPair</span> rootKeyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X500Name</span> issuer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X500NameBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addRDN</span><span class="token punctuation">(</span><span class="token class-name">BCStyle</span><span class="token punctuation">.</span><span class="token constant">CN</span><span class="token punctuation">,</span> <span class="token string">"Mambo Org"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">BigInteger</span> serialNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ZonedDateTime</span> now <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> notBefore <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> notAfter <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">YEARS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubjectPublicKeyInfo</span> publicKeyInfo <span class="token operator">=</span> <span class="token class-name">SubjectPublicKeyInfo</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>rootKeyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X509CertificateHolder</span> rootCertHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509v3CertificateBuilder</span><span class="token punctuation">(</span>issuer<span class="token punctuation">,</span> serialNumber<span class="token punctuation">,</span> notBefore<span class="token punctuation">,</span> notAfter<span class="token punctuation">,</span> issuer<span class="token punctuation">,</span> publicKeyInfo<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>basicConstraints<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BasicConstraints</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>subjectKeyIdentifier<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> x509ExtensionUtils<span class="token punctuation">.</span><span class="token function">createSubjectKeyIdentifier</span><span class="token punctuation">(</span>rootKeyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JcaContentSignerBuilder</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>rootKeyPair<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X509Certificate</span> rootCert <span class="token operator">=</span> x509CertificateConverter<span class="token punctuation">.</span><span class="token function">getCertificate</span><span class="token punctuation">(</span>rootCertHolder<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="X500Name"><a href="#X500Name" class="headerlink" title="X500Name"></a>X500Name</h5><p>ìë°”ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” X500Principal ëŒ€ì‹ ì— BouncyCastleì˜ X500Name í´ë˜ìŠ¤ë¡œ FQDN, ë°œê¸‰ìì™€ ì†Œìœ ìì™€ ê°™ì€ ì£¼ì²´(Subject) ì •ë³´ë¥¼ ê¸°ì…í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, RDN(Relative Distinguished Names) ë¼ê³ ë„ í•˜ëŠ”ë° X500NameBuilderì—ì„œëŠ” addRDN ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤. ë” ìì„¸í•œ ë‚´ìš©ì€ <a href="https://knowledge.digicert.com/generalinformation/INFO1745.html">What is a Distinguished Name (DN)?</a>ë¥¼ ì°¸ê³ í•´ë³´ì.</p>
<h5 id="SubjectPublickeyInfo"><a href="#SubjectPublickeyInfo" class="headerlink" title="SubjectPublickeyInfo"></a>SubjectPublickeyInfo</h5><p>X.509 ì¸ì¦ì„œì— í¬í•¨ë˜ëŠ” SubjectPublickeyInfoì— ëŒ€í•œ í´ë˜ìŠ¤ë¡œ DER ì¸ì½”ë”©ëœ ê³µê°œí‚¤ë¥¼ ì˜ë¯¸í•œë‹¤. </p>
<h5 id="BasicConstraints"><a href="#BasicConstraints" class="headerlink" title="BasicConstraints"></a>BasicConstraints</h5><p>ë‹¤ë¥¸ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•  ê¶Œí•œì´ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒìœ¼ë¡œ CA ì¸ì¦ì„œë¼ëŠ” ê²ƒì„ ì˜ë¯¸ë¡œ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤.</p>
<h4 id="X-509-í´ë¼ì´ì–¸íŠ¸-ì¸ì¦ì„œ-ë°œê¸‰í•˜ê¸°"><a href="#X-509-í´ë¼ì´ì–¸íŠ¸-ì¸ì¦ì„œ-ë°œê¸‰í•˜ê¸°" class="headerlink" title="X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°"></a>X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°</h4><p>ì•ì„œ ë£¨íŠ¸ CA ì¸ì¦ì„œ ë°œê¸‰ì„ ì´í•´í•˜ì˜€ë‹¤ë©´ CA ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ”ë° ì‚¬ìš©ëœ ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ X.509 ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ” ê²ƒì„ ì•Œì•„ë³´ë„ë¡ í•˜ì. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">KeyPair</span> clientKeyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X500Name</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X500NameBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addRDN</span><span class="token punctuation">(</span><span class="token class-name">BCStyle</span><span class="token punctuation">.</span><span class="token constant">CN</span><span class="token punctuation">,</span> <span class="token string">"Mambo"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">BigInteger</span> clientSN <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> clientNow <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> clientNotBefore <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>clientNow<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> clientNotAfter <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>clientNow<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">YEARS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubjectPublicKeyInfo</span> clientPublicKeyInfo <span class="token operator">=</span> <span class="token class-name">SubjectPublicKeyInfo</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>clientKeyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X509CertificateHolder</span> clientCertHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509v3CertificateBuilder</span><span class="token punctuation">(</span>issuer<span class="token punctuation">,</span> clientSN<span class="token punctuation">,</span> clientNotBefore<span class="token punctuation">,</span> clientNotAfter<span class="token punctuation">,</span> client<span class="token punctuation">,</span> clientPublicKeyInfo<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>basicConstraints<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BasicConstraints</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>authorityKeyIdentifier<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> x509ExtensionUtils<span class="token punctuation">.</span><span class="token function">createAuthorityKeyIdentifier</span><span class="token punctuation">(</span>rootCert<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>subjectKeyIdentifier<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> x509ExtensionUtils<span class="token punctuation">.</span><span class="token function">createSubjectKeyIdentifier</span><span class="token punctuation">(</span>clientKeyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addExtension</span><span class="token punctuation">(</span><span class="token class-name">Extension</span><span class="token punctuation">.</span>keyUsage<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">KeyUsage</span><span class="token punctuation">(</span><span class="token class-name">KeyUsage</span><span class="token punctuation">.</span>digitalSignature<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JcaContentSignerBuilder</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>rootKeyPair<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">X509Certificate</span> clientCert <span class="token operator">=</span> x509CertificateConverter<span class="token punctuation">.</span><span class="token function">getCertificate</span><span class="token punctuation">(</span>clientCertHolder<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>BasicConstraintsë¡œ CAê°€ ì•„ë‹ˆë©° AuthorityKeyIdentifierë¡œ ë°œê¸‰ìì˜ ê³µê°œí‚¤ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  KeyUsageë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°œê¸‰í•œ X.509 ì¸ì¦ì„œê°€ ì „ìì„œëª… ìš©ë„ì„ì„ í™•ì¥(Extension)ì— ëª…ì‹œí–ˆë‹¤.</p>
<h4 id="X509Certificate-ì¸ì¦ì„œ-ê²€ì¦í•˜ê¸°"><a href="#X509Certificate-ì¸ì¦ì„œ-ê²€ì¦í•˜ê¸°" class="headerlink" title="X509Certificate ì¸ì¦ì„œ ê²€ì¦í•˜ê¸°"></a>X509Certificate ì¸ì¦ì„œ ê²€ì¦í•˜ê¸°</h4><p>í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ í¬í•¨í•´ì„œ ì „ë‹¬í•œ X.509 ì¸ì¦ì„œê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ í˜¹ì€ ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰í•œ ê²ƒì¸ì§€ë¥¼ ê²€ì¦í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤. <code>java.security.cert.X509Certificate</code> í´ë˜ìŠ¤ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ êµ¬í˜„ëœ verify í•¨ìˆ˜ë¥¼ ì œê³µí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ë£¨íŠ¸ ì¸ì¦ì„œì˜ ê³µê°œí‚¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java">clientCert<span class="token punctuation">.</span><span class="token function">checkValidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clientCert<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>rootCert<span class="token punctuation">.</span><span class="token function">getPublicKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> securityProvider<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="X-509-ì¸ì¦ì„œ-ë°-í‚¤-í˜ì–´-ì €ì¥í•˜ê¸°"><a href="#X-509-ì¸ì¦ì„œ-ë°-í‚¤-í˜ì–´-ì €ì¥í•˜ê¸°" class="headerlink" title="X.509 ì¸ì¦ì„œ ë° í‚¤ í˜ì–´ ì €ì¥í•˜ê¸°"></a>X.509 ì¸ì¦ì„œ ë° í‚¤ í˜ì–´ ì €ì¥í•˜ê¸°</h4><p>ì¼ë°˜ì ìœ¼ë¡œ X.509 ì¸ì¦ì„œì— í¬í•¨ë˜ëŠ” ê³µê°œí‚¤ëŠ” X509EncodedSpecì— ë”°ë¼ ë°”ì´ë„ˆë¦¬ í˜•íƒœì˜ DERë¡œ ì¸ì½”ë”©ë˜ì–´ í¬í•¨ëœë‹¤. ê·¸ëŸ¬ë‚˜ X.509 ì¸ì¦ì„œì™€ í‚¤ í˜ì–´ë¥¼ êµí™˜í•  ë•Œì—ëŠ” PEM íŒŒì¼ í˜•ì‹ì„ ë§ì´ ì‚¬ìš©í•˜ëŠ” í¸ìœ¼ë¡œ BouncyCastle ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬í•¨ëœ  PemWriterì™€ PemObjectë¥¼ í™œìš©í•´ì„œ X.509 ì¸ì¦ì„œì™€ ë¹„ë°€í‚¤ë¥¼ PEM íŒŒì¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PemUtil</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">PemUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toPem</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">StringWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token class-name">PemWriter</span> pemWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaPEMWriter</span><span class="token punctuation">(</span>writer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            pemWriter<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PemObject</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> encoded<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pemWriter<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> writer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toPem</span><span class="token punctuation">(</span><span class="token class-name">PrivateKey</span> privateKey<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">,</span> <span class="token string">"private key is required"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">toPem</span><span class="token punctuation">(</span><span class="token string">"PRIVATE KEY"</span><span class="token punctuation">,</span> privateKey<span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toPem</span><span class="token punctuation">(</span><span class="token class-name">X509Certificate</span> certificate<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">CertificateEncodingException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>certificate<span class="token punctuation">,</span> <span class="token string">"certificate is required"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">toPem</span><span class="token punctuation">(</span><span class="token string">"CERTIFICATE"</span><span class="token punctuation">,</span> certificate<span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>


<span class="token class-name">String</span> rootCertPem <span class="token operator">=</span> <span class="token class-name">PemUtil</span><span class="token punctuation">.</span><span class="token function">toPem</span><span class="token punctuation">(</span>rootCert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ca.pem</span>
<span class="token class-name">String</span> clientCertPem <span class="token operator">=</span> <span class="token class-name">PemUtil</span><span class="token punctuation">.</span><span class="token function">toPem</span><span class="token punctuation">(</span>clientCert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//client.pem</span>
<span class="token class-name">String</span> clientPrivateKeyPem <span class="token operator">=</span> <span class="token class-name">PemUtil</span><span class="token punctuation">.</span><span class="token function">toPem</span><span class="token punctuation">(</span>clientKeyPair<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//client.key</span></code></pre>

<blockquote>
<p>PEM í˜•ì‹ìœ¼ë¡œ Base64ë¡œ êµ¬ì„±ëœ ë¬¸ìì—´ì„ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì€ ë³¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.</p>
</blockquote>
<h4 id="X-509-ì¸ì¦ì„œ-ë°-í‚¤-í˜ì–´-ë¶ˆëŸ¬ì˜¤ê¸°"><a href="#X-509-ì¸ì¦ì„œ-ë°-í‚¤-í˜ì–´-ë¶ˆëŸ¬ì˜¤ê¸°" class="headerlink" title="X.509 ì¸ì¦ì„œ ë° í‚¤ í˜ì–´ ë¶ˆëŸ¬ì˜¤ê¸°"></a>X.509 ì¸ì¦ì„œ ë° í‚¤ í˜ì–´ ë¶ˆëŸ¬ì˜¤ê¸°</h4><p>í´ë¼ì´ì–¸íŠ¸ì˜ X.509 ì¸ì¦ì„œëŠ” ìš”ì²­ì— í¬í•¨ë˜ì–´ HttpServletRequestë¡œ ë¶€í„° ê°€ì ¸ì˜¬ ìˆ˜ ìˆì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ê²€ì¦ì„ ìœ„í•œ CA ì¸ì¦ì„œì™€ ë¹„ë°€í‚¤ëŠ” ë³„ë„ì˜ íŒŒì¼ì´ë‚˜ ë¬¸ìì—´ë¡œë¶€í„° ë¶ˆëŸ¬ì™€ì•¼í•œë‹¤. ê³µê°œí‚¤ì™€ ë¹„ë°€í‚¤ì— ëŒ€í•´ì„œëŠ” JcaPEMKeyConverterë¥¼ ì‚¬ìš©í•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PemUtil</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">PemUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PemObject</span> <span class="token function">loadPem</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">StringReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>encoded<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token class-name">PEMParser</span> pemParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PEMParser</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> pemParser<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">loadObject</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">StringReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>encoded<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token class-name">PEMParser</span> pemParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PEMParser</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> pemParser<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">X509Certificate</span> <span class="token function">loadCertificate</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">CertificateException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">PemObject</span> obj <span class="token operator">=</span> <span class="token function">loadPem</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CertificateFactory</span> factory <span class="token operator">=</span> <span class="token class-name">CertificateFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"X.509"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">X509Certificate</span><span class="token punctuation">)</span> factory<span class="token punctuation">.</span><span class="token function">generateCertificate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PublicKey</span> <span class="token function">loadPublicKey</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">loadObject</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JcaPEMKeyConverter</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaPEMKeyConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setProvider</span><span class="token punctuation">(</span><span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SubjectPublicKeyInfo</span> publicKeyInfo <span class="token operator">=</span> <span class="token class-name">SubjectPublicKeyInfo</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> converter<span class="token punctuation">.</span><span class="token function">getPublicKey</span><span class="token punctuation">(</span>publicKeyInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PrivateKey</span> <span class="token function">loadPrivateKey</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> encoded<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">loadObject</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JcaPEMKeyConverter</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaPEMKeyConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setProvider</span><span class="token punctuation">(</span><span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PrivateKeyInfo</span> privateKeyInfo <span class="token operator">=</span> <span class="token class-name">PrivateKeyInfo</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> converter<span class="token punctuation">.</span><span class="token function">getPrivateKey</span><span class="token punctuation">(</span>privateKeyInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë³¸ ê¸€ì—ì„œ ë‹¤ë£¬ ì˜ˆì œ ì½”ë“œì— ëŒ€í•œ ë³´ë‹¤ ìì„¸í•œ ê²ƒì€ <a href="https://github.com/kdevkr/spring-boot-security/blob/main/src/test/java/com/example/demo/x509/X509Test.java">X509Test.java</a>ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<h4 id="ì°¸ê³ -ë§í¬"><a href="#ì°¸ê³ -ë§í¬" class="headerlink" title="ì°¸ê³  ë§í¬"></a>ì°¸ê³  ë§í¬</h4><ul>
<li><a href="https://www.baeldung.com/java-bouncy-castle">Introduction to BouncyCastle with Java</a>  </li>
<li><a href="https://www.baeldung.com/java-read-pem-file-keys">How to Read PEM File to Get Public and Private Keys</a>  </li>
<li><a href="https://www.baeldung.com/java-rsa">RSA in Java</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>AWS SSM ì—ì´ì „íŠ¸ë¡œ í”„ë¼ì´ë¹— EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•˜ê¸°</title>
    <url>/connect-private-ec2-instance-using-ssm-agent/</url>
    <content><![CDATA[<p>ì˜¤ëŠ˜ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” SSM(System Session Manager) ì—ì´ì „íŠ¸ë¥¼ í†µí•´ì„œ í¼ë¸”ë¦­ IPë¥¼ í†µí•œ SSH ì ‘ì†ì´ ì•„ë‹Œ HTTPS ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤. </p>
<p>ì¸í„°ë„·ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì•„ì´í”¼ ì£¼ì†Œê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ëŠ” í”„ë¼ì´ë¹— EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” í¼ë¸”ë¦­ IPê°€ í• ë‹¹ë˜ëŠ” í¼ë¸”ë¦­ ì„œë¸Œë„·ì—ì„œ ì‹¤í–‰ë˜ëŠ” <strong>ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸</strong>ê°€ í•„ìš”í•˜ë©° ì´ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¼ëŠ” ì„œë²„ë¥¼ ê²½ìœ í•˜ì—¬ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í†µí•´ í”„ë¼ì´ë¹— ì¸ìŠ¤í„´ìŠ¤ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤. SSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” í¼ë¸”ë¦­ DNS ë˜ëŠ” í¼ë¸”ë¦­ IP ì£¼ì†Œë¥¼ ê°€ì§€ëŠ” í¼ë¸”ë¦­ ì¸ìŠ¤í„´ìŠ¤ì´ì–´ì•¼í•˜ë¯€ë¡œ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¥¼ êµ¬ì„±í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” ë¶ˆí•„ìš”í•˜ê²Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ ì§€í•˜ì—¬ ë¹„ìš©ì´ ë°œìƒí•œë‹¤ëŠ” ë¬¸ì œì™€ ë‚´ë¶€ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ í‚¤ í˜ì–´ê°€ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì— ìˆë‹¤ëŠ” ë‹¨ì ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.</p>
<h2 id="AWS-Systems-Manager"><a href="#AWS-Systems-Manager" class="headerlink" title="AWS Systems Manager"></a>AWS Systems Manager</h2><p>HTTPS ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ì¸í„°ë„·ê³¼ ì—°ê²°ë˜ì§€ ì•ŠëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ Systems Manager ì„œë¹„ìŠ¤ë¥¼ í†µí•´ì„œ <a href="https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/sysman-install-ssm-agent.html">SSM ì—ì´ì „íŠ¸</a>ê°€ ì„¤ì¹˜ëœ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡í•˜ì—¬ ê´€ë¦¬ë˜ë„ë¡ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h3 id="í˜¸ìŠ¤íŠ¸-ê´€ë¦¬-ê¸°ëŠ¥-í™œì„±í™”"><a href="#í˜¸ìŠ¤íŠ¸-ê´€ë¦¬-ê¸°ëŠ¥-í™œì„±í™”" class="headerlink" title="í˜¸ìŠ¤íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥ í™œì„±í™”"></a>í˜¸ìŠ¤íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥ í™œì„±í™”</h3><p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-quick-setup.png"></p>
<p>AWS Systems Managerì˜ ë¹ ë¥¸ ì„¤ì • ê¸°ëŠ¥ ì¤‘ Host Management êµ¬ì„±ì„ í†µí•´ ì‰½ê²Œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ í™œì„±í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµ ë‹¨ê³„ì´ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ í˜„ì¬ ë¦¬ì „ì— ëŒ€í•œ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ì„ íƒí•˜ê³  ìƒì„±í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h4 id="ê´€ë¦¬í˜•-ì¸ìŠ¤í„´ìŠ¤-ì¡°ê±´-ê²€í† "><a href="#ê´€ë¦¬í˜•-ì¸ìŠ¤í„´ìŠ¤-ì¡°ê±´-ê²€í† " class="headerlink" title="ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ì¡°ê±´ ê²€í† "></a>ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ ì¡°ê±´ ê²€í† </h4><p>Systems Managerì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì˜ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì–´ì•¼í•˜ë¯€ë¡œ ì´ë¥¼ ê²€í† í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li>SSM ì—ì´ì „íŠ¸ ì„¤ì¹˜ : EC2 ì¸ìŠ¤í„´ìŠ¤ì— SSM ì—ì´ì „íŠ¸ê°€ ì„¤ì¹˜ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>SSM ì—”ë“œí¬ì¸íŠ¸ ì—°ê²° : SSM ì„œë¹„ìŠ¤ê°€ SSM ì—ì´ì „íŠ¸ë¡œ í†µì‹ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>SSM IAM ì—­í•  ì—°ê²° : AmazonSSMManagedInstanceCore ì •ì±…ì„ í¬í•¨í•˜ëŠ” IAM ì—­í• ì„ ì—°ê²°í•´ì•¼í•©ë‹ˆë‹¤.</li>
</ul>
<h3 id="SSM-ì—ì´ì „íŠ¸ë¥¼-ìœ„í•œ-VPC-ì—”ë“œí¬ì¸íŠ¸-êµ¬ì„±"><a href="#SSM-ì—ì´ì „íŠ¸ë¥¼-ìœ„í•œ-VPC-ì—”ë“œí¬ì¸íŠ¸-êµ¬ì„±" class="headerlink" title="SSM ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ VPC ì—”ë“œí¬ì¸íŠ¸ êµ¬ì„±"></a>SSM ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ VPC ì—”ë“œí¬ì¸íŠ¸ êµ¬ì„±</h3><p>SSM ì—ì´ì „íŠ¸ëŠ” SSH í”„ë¡œí† ì½œì´ ì•„ë‹Œ HTTPS ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ì„œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì„ ì œê³µí•˜ê¸°ì— ì•ì„œ í˜¸ìŠ¤íŠ¸ ê´€ë¦¬ êµ¬ì„±ì„ í†µí•´ í™œì„±í™”ëœ SSM ì—ì´ì „íŠ¸ê°€ VPC ë‚´ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ AWS PrivateLinkë¡œ êµ¬ë™ë˜ëŠ” <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints.html">VPC ì¸í„°í˜ì´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸</a>ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<h4 id="VPC-DNS-í˜¸ìŠ¤íŠ¸-ì´ë¦„-í™œì„±í™”"><a href="#VPC-DNS-í˜¸ìŠ¤íŠ¸-ì´ë¦„-í™œì„±í™”" class="headerlink" title="VPC DNS í˜¸ìŠ¤íŠ¸ ì´ë¦„ í™œì„±í™”"></a>VPC DNS í˜¸ìŠ¤íŠ¸ ì´ë¦„ í™œì„±í™”</h4><p>ë¨¼ì € VPC ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” VPCì— ëŒ€í•œ ì†ì„±ë“¤ ì¤‘ì—ì„œ <strong>DNS í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ í™œì„±í™”</strong>í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-enable-dns-name.png"></p>
<h4 id="VPC-ì—”ë“œí¬ì¸íŠ¸-ìƒì„±"><a href="#VPC-ì—”ë“œí¬ì¸íŠ¸-ìƒì„±" class="headerlink" title="VPC ì—”ë“œí¬ì¸íŠ¸ ìƒì„±"></a>VPC ì—”ë“œí¬ì¸íŠ¸ ìƒì„±</h4><p>VPCì˜ DNS í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ í™œì„±í™”ë˜ì—ˆìŒì„ í™•ì¸í•˜ì˜€ë‹¤ë©´ <strong>EC2ì™€ SSM ì„œë¹„ìŠ¤ì— ëŒ€í•œ VPC ì—”ë“œí¬ì¸íŠ¸</strong>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-vpc-endpoints.png"></p>
<h3 id="EC2-ì¸ìŠ¤í„´ìŠ¤-í”„ë¡œíŒŒì¼-ì§€ì •"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-í”„ë¡œíŒŒì¼-ì§€ì •" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ì§€ì •"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ì§€ì •</h3><p>ë¹ ë¥¸ ì„¤ì • ê¸°ëŠ¥ì˜ í˜¸ìŠ¤íŠ¸ ê´€ë¦¬ êµ¬ì„±ì„ ìˆ˜í–‰í–ˆê¸°ì— <strong>AmazonSSMRoleForInstancesQuickSetup</strong>ì´ë¼ëŠ” IAM ì—­í• ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. ì´ì œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ AmazonSSMRoleForInstancesQuickSetup IAM ì—­í• ì„ ì§€ì •í•˜ë©´ AWS Systems Managerê°€ SSM ì—ì´ì „íŠ¸ì™€ í†µì‹ í•˜ì—¬ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-managed-instance-core-policy.png"></p>
<p>AWS Systems Managerê°€ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ”ë°ì— ì•½ê°„ì˜ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆì–´ ì ì‹œ ê¸°ë‹¤ë¦¬ì…”ì•¼í•˜ë©° ë§Œì•½ì— AmazonSSMRoleForInstancesQuickSetup IAM ì—­í• ì´ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•Šì•˜ë‹¤ë©´ AmazonSSMManagedInstanceCore ì •ì±…ì„ ì§€ì •í•œ IAM ì—­í• ì„ ì§ì ‘ ìƒì„±í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h4 id="IAM-ì—­í• "><a href="#IAM-ì—­í• " class="headerlink" title="IAM ì—­í• "></a>IAM ì—­í• </h4><p>ë‹¤ìŒì€ IAM ì—­í• ì´ ì§€ì •ë˜ì§€ ì•Šì€ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ SSM ì—ì´ì „íŠ¸ê°€ ì„¤ì¹˜ë˜ì–´ìˆì–´ë„ SSM ì—ì´ì „íŠ¸ê°€ í†µì‹ í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì—†ìœ¼ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ì›¹ ì½˜ì†”ì—ì„œ Session Managerë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-connect-instance-console-failed.png" alt="IAM ì—­í• ì´ ì§€ì •ë˜ì§€ ì•Šì€ ì¸ìŠ¤í„´ìŠ¤"></p>
<p>ë§Œì•½, IAM ì—­í• ì´ ì§€ì •ë˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•œë‹¤ë©´ AmazonSSMRoleForInstancesQuickSetup ì—­í• ì„ ì§€ì •í•˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-set-iam-role.png"></p>
<h4 id="HTTPS-ì¸ë°”ìš´ë“œ-íŠ¸ë˜í”½-í—ˆìš©"><a href="#HTTPS-ì¸ë°”ìš´ë“œ-íŠ¸ë˜í”½-í—ˆìš©" class="headerlink" title="HTTPS ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ í—ˆìš©"></a>HTTPS ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ í—ˆìš©</h4><p>AmazonSSMRoleForInstancesQuickSetup ì—­í• ì„ ì§€ì •í•˜ì˜€ìœ¼ë‚˜ Session Managerë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ VPCë¥¼ êµ¬ì„±í•˜ëŠ” í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ ë²”ìœ„ì— ëŒ€í•´ì„œ HTTPSì— ëŒ€í•œ ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. SSM ì—ì´ì „íŠ¸ëŠ” HTTPS ì—”ë“œí¬ì¸íŠ¸ë¡œ í†µì‹ í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì„ ì œê³µí•œë‹¤ëŠ” ì ì„ ì¸ì§€í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-https-inbound-trafic.png"></p>
<h4 id="Session-Manager-í™œì„±í™”"><a href="#Session-Manager-í™œì„±í™”" class="headerlink" title="Session Manager í™œì„±í™”"></a>Session Manager í™œì„±í™”</h4><p>ì˜ ë”°ë¼ì˜¤ì…¨ë‹¤ë©´ SSM ì—ì´ì „íŠ¸ì™€ì˜ í†µì‹ ì´ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  Systems Managerê°€ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“±ë¡í–ˆë‹¤ë©´ EC2 ì›¹ ì½˜ì†”ì„ í†µí•´ì„œ í”„ë¼ì´ë¹— ì¸ìŠ¤í„´ìŠ¤ì— ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ ì—†ì´ë„ ì§ì ‘ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-connect-instance-console.png"></p>
<h2 id="AWS-SSM-CLI"><a href="#AWS-SSM-CLI" class="headerlink" title="AWS SSM CLI"></a>AWS SSM CLI</h2><p>SSM ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ëŠ” IAM í”„ë¡œíŒŒì¼ì„ ê°€ì§€ê³  ìˆë‹¤ë©´ AWS CLIì˜ ssm ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¼ì´ë¹— ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½, AWS CLIì´ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ìƒíƒœë¼ë©´ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ì¤‘ì¸ ìš´ì˜ì²´ì œì— ë§ëŠ” ë°©ë²•ìœ¼ë¡œ AWS CLIë¥¼ ì„¤ì¹˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-install-aws-cli-2-for-windows.png"></p>
<h3 id="SSM-ì„¸ì…˜-ì‹œì‘í•˜ê¸°"><a href="#SSM-ì„¸ì…˜-ì‹œì‘í•˜ê¸°" class="headerlink" title="SSM ì„¸ì…˜ ì‹œì‘í•˜ê¸°"></a>SSM ì„¸ì…˜ ì‹œì‘í•˜ê¸°</h3><p>AWS CLIì„ ì‚¬ìš©í•˜ê¸° ìœ„í•˜ì—¬ <code>AmazonSSMManagedInstanceCore</code> ì •ì±…ì´ ë¶€ì—¬ëœ í¬ë ˆë´ì…œì„ í”„ë¡œíŒŒì¼ë¡œ ë“±ë¡í•œ í›„ AWS SSM CLIì˜ <code>start-session</code> ëª…ë ¹ì–´ë¡œ ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì„¸ì…˜ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-configure-aws-cli-profile.png" alt="IAM í”„ë¡œíŒŒì¼ í¬ë ˆë´ì…œ êµ¬ì„±"></p>
<p><img data-src="/images/posts/connect-private-ec2-instance/aws-ssm-cli-start-session.png"></p>
<h4 id="SSM-í¬íŠ¸-í¬ì›Œë”©"><a href="#SSM-í¬íŠ¸-í¬ì›Œë”©" class="headerlink" title="SSM í¬íŠ¸ í¬ì›Œë”©"></a>SSM í¬íŠ¸ í¬ì›Œë”©</h4><p>SSM ì—ì´ì „íŠ¸ëŠ” í¬íŠ¸ í¬ì›Œë”© ì„¸ì…˜ ê¸°ëŠ¥ë„ ì œê³µí•˜ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ í¬íŠ¸ í¬ì›Œë”©ì— ëŒ€í•œ ë„íë¨¼íŠ¸ì™€ í•¨ê»˜ <strong>ê´€ë¦¬í˜• ì¸ìŠ¤í„´ìŠ¤ì˜ í¬íŠ¸ ë²ˆí˜¸(portNumber)</strong> ì™€ <strong>ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì˜ í¬íŠ¸ ë²ˆí˜¸(localPortNumber)</strong> ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì œê³µí•˜ë©´ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í”„ë¼ì´ë¹— ì¸ìŠ¤í„´ìŠ¤ì˜ 8080 í¬íŠ¸ì— ëŒ€í•´ì„œ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì˜ 5000 í¬íŠ¸ë¡œ ì—°ê²°í•˜ê³ ì í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">aws ssm start-session <span class="token punctuation">\</span>
<span class="token parameter variable">--profile</span> mambo <span class="token punctuation">\</span> 
<span class="token parameter variable">--target</span> <span class="token variable">$instance_id</span> <span class="token punctuation">\</span>
--document-name AWS-StartPortForwardingSession <span class="token punctuation">\</span>
<span class="token parameter variable">--parameters</span> <span class="token string">'&#123;"portNumber":["8080"], "localPortNumber":["5000"]&#125;'</span>

Starting session with SessionId: <span class="token variable">$session_id</span>
Port <span class="token number">5000</span> opened <span class="token keyword">for</span> sessionId <span class="token variable">$session_id</span>
Waiting <span class="token keyword">for</span> connections<span class="token punctuation">..</span>.</code></pre>

<h3 id="SSH-ì—°ê²°-í™œì„±í™”"><a href="#SSH-ì—°ê²°-í™œì„±í™”" class="headerlink" title="SSH ì—°ê²° í™œì„±í™”"></a>SSH ì—°ê²° í™œì„±í™”</h3><p>ê¸°ë³¸ì ìœ¼ë¡œ SSM ì—ì´ì „íŠ¸ëŠ” HTTPS ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ì„œ í†µì‹ í•˜ë¯€ë¡œ SSH ì ‘ì†ì— ëŒ€í•œ 22ë²ˆ í¬íŠ¸ì— ëŒ€í•œ ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, SCPì™€ ê°™ì€ ë™ì‘ì„ ìœ„í•´ì„œ <a href="https://docs.aws.amazon.com/ko_kr/systems-manager/latest/userguide/session-manager-getting-started-enable-ssh-connections.html">SSH ì—°ê²° í™œì„±í™”</a>ë¥¼ êµ¬ì„±í•˜ì—¬ SSMì„ í†µí•´ì„œ SSH ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><em>~&#x2F;.ssh&#x2F;config</em></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># SSH over Session Manager</span>
<span class="token function">host</span> i-* mi-*
    ProxyCommand C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>System32<span class="token punctuation">\</span>WindowsPowerShell<span class="token punctuation">\</span>v1.0<span class="token punctuation">\</span>powershell.exe <span class="token string">"aws ssm start-session --target %h --document-name AWS-StartSSHSession --parameters portNumber=%p"</span></code></pre>

<blockquote>
<p>ë‚´ë¶€ì ìœ¼ë¡œ SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œ í„°ë„ë§ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ì ê³¼ SSM ì—ì´ì „íŠ¸ë¥¼ í†µí•´ SSH ì—°ê²°ì„ ì‹œë„í•˜ë©´ ë¡œê¹… ê¸°ëŠ¥ì€ í™œì„±í™”ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ê°ì•ˆí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
</blockquote>
<h3 id="Interactive-CLI-Gossm"><a href="#Interactive-CLI-Gossm" class="headerlink" title="Interactive CLI - Gossm"></a>Interactive CLI - Gossm</h3><p>ì €ëŠ” ì‚¬ìš©í•˜ì§€ëŠ” ì•Šê³  ìˆì§€ë§Œ <a href="https://medium.com/@gjbae1212/aws-ssm-%EC%9D%B4%EC%9A%A9%ED%95%B4-ec2-%EC%A0%91%EC%86%8D%ED%95%98%EB%8A%94-cli-%EA%B0%9C%EB%B0%9C-62c2f7357fb8">AWS SSM ì´ìš©í•´ EC2 ì ‘ì†í•˜ëŠ” CLI ê°œë°œ</a>ì—ì„œ ì†Œê°œí•˜ëŠ” <a href="https://github.com/gjbae1212/gossm">gossm</a>ì€ AWS SSM CLIì˜ ë¶ˆí¸í•¨ì„ ë³´ì™„í•˜ì—¬ ì¢€ ë” í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ë‹ˆ í™œìš©í•´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-getting-started.html">Setting up Session Manager</a></li>
<li><a href="https://musma.github.io/2019/11/29/about-aws-ssm.html">AWS SSMìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° (SSH ëŒ€ì²´)</a></li>
<li><a href="http://sawers.com/blog/aws-session-manager-a-better-way-to-ssh/">AWS Session Manager: A better way to SSH</a></li>
</ul>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>AWS</tag>
        <tag>SSM Agent</tag>
      </tags>
  </entry>
  <entry>
    <title>OPENSSH-RSA ê°œì¸í‚¤ë¥¼ RSA ê°œì¸í‚¤ë¡œ ë³€ê²½í•˜ê¸°</title>
    <url>/convert-openssh-private-to-rsa/</url>
    <content><![CDATA[<p>OpenSSL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ SSH ì ‘ì†ì„ ìœ„í•œ í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ëŠ” ê²½ìš°ì— ê¸°ë³¸ì ìœ¼ë¡œ RSA í˜•ì‹ì˜ í‚¤ í˜ì–´ê°€ ìƒì„±ë˜ì–´ë„ ì‹¤ì œë¡œëŠ” OPENSSH PRIVATE KEYë¡œ ì €ì¥ë˜ê²Œ ëœë‹¤. RSA PRIVATE KEYë¡œ ì €ì¥ë˜ê¸° ìœ„í•´ì„œëŠ” -m ì˜µì…˜ìœ¼ë¡œ PEMì„ ì§€ì •í•´ì•¼ í•œë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ----- OPENSSH PRIVATE KEY -----</span>
ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">2048</span> <span class="token parameter variable">-C</span> <span class="token string">"mambo"</span> <span class="token parameter variable">-N</span> <span class="token string">""</span>

<span class="token comment"># ----- RSA PRIVATE KEY -----</span>
ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">2048</span> <span class="token parameter variable">-m</span> PEM <span class="token parameter variable">-C</span> <span class="token string">"mambo"</span> <span class="token parameter variable">-N</span> <span class="token string">""</span></code></pre>

<p>ì¼ë³¸ ê³ ê°ìœ¼ë¡œë¶€í„° ìì²´ì ìœ¼ë¡œ êµ¬ì¶•í•œ ì„œë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ê³„ì •ê³¼ ê°œì¸í‚¤ PEM íŒŒì¼ì„ ë°›ì•„ë³´ë‹ˆ OPENSSH í˜•ì‹ìœ¼ë¡œ ì €ì¥ë˜ì–´ìˆìŒì„ í™•ì¸í•˜ì˜€ë‹¤. ê·¸ëŸ¬ë‚˜, SecureCRTë¥¼ ì‚¬ìš©í•´ì„œ ì„œë²„ì— ì²˜ìŒìœ¼ë¡œ ì—°ê²°í•˜ë ¤ê³  í–ˆì„ë•Œ í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©° ì ‘ì†ì— ì‹¤íŒ¨í•˜ì˜€ë‹¤.</p>
<pre class="language-pem" data-language="pem"><code class="language-pem">-----BEGIN RSA PRIVATE KEY-----
[KEY CONTENT]
-----END RSA PRIVATE KEY-----</code></pre>

<p>OPENSSH PRIVATE KEYë¡œ ì €ì¥ë˜ì–´ìˆëŠ” ê²ƒì„ RSA PRIVATE KEYë¡œ ë³€ê²½í•˜ê³  ì‹œë„í•´ë³´ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ì´ ë˜ì—ˆìœ¼ë©° ìì„¸í•œ ì›ì¸ì€ ëª¨ë¥´ê² ìœ¼ë‚˜ 2FA ì¸ì¦ì„ ì„¤ì •í•˜ê³  ë‚˜ì„œëŠ” OPENSSH PRIVATE KEYë¡œ ì €ì¥ë˜ì–´ìˆëŠ” PEM íŒŒì¼ë¡œë„ ì—°ê²°ì´ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ì„ í•  ìˆ˜ ìˆëŠ” ìƒí™©ì´ ë˜ì—ˆë‹¤.</p>
<h4 id="OpenSSH-ê°œì¸í‚¤ë¥¼-RSA-ê°œì¸í‚¤ë¡œ-ë³€í™˜"><a href="#OpenSSH-ê°œì¸í‚¤ë¥¼-RSA-ê°œì¸í‚¤ë¡œ-ë³€í™˜" class="headerlink" title="OpenSSH ê°œì¸í‚¤ë¥¼ RSA ê°œì¸í‚¤ë¡œ ë³€í™˜"></a>OpenSSH ê°œì¸í‚¤ë¥¼ RSA ê°œì¸í‚¤ë¡œ ë³€í™˜</h4><p>ì•„ë¬´íŠ¼, RSA PEM í˜•ì‹ìœ¼ë¡œ ë‹¤ì‹œ ë§Œë“¤ì–´ë‹¬ë¼ê³  ìš”ì²­í•˜ê¸°ì—ëŠ” ì‹œê°„ì´ ë§ì´ ì†Œìš”ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ OPENSSH í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” RSA ê°œì¸í‚¤ë¥¼ RSA PEM í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ë³´ë„ë¡ í•˜ì.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">2048</span> <span class="token parameter variable">-C</span> <span class="token string">"mambo"</span> <span class="token parameter variable">-N</span> <span class="token string">""</span> <span class="token parameter variable">-f</span> openssh.pem

<span class="token comment"># cat ~/.ssh/id_rsa</span>
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABFwAAAAdzc2gtcn
NhAAAAAwEAAQAAAQEAw4o9aOfBCkCzsuz3hMJT/v058pMki16Ft56tim4r5mJRbBd0EQPJ
3gm1FiJmp0fqrnJo+H3o4hBH0LlCbeXiXHloPnTi1JZTSzWat1ItcBG+xezx8BdmtKqdTy
PWfYL9ujLse5AAXkvVHhYHJ7koV72X9whH94Tci4zAEHRypKbuz+9lj5P94u1n/nYAt2PT
JmdP/Y+62qFiSGhKEh/Jed5TVvIrabOi+qcHQ0VmcXkTGiOTXLTmHMbce26dqsGRRb4YPf
1alXECX28b8QpbarlXHPeGJyQ5d8dxEhsOz60LDoUEy/ytn0gIrP0+Ro2aS9N73JVdTXKu
FFQRyHMP0QAAA8DEFEvUxBRL1AAAAAdzc2gtcnNhAAABAQDDij1o58EKQLOy7PeEwlP+/T
nykySLXoW3nq2KbivmYlFsF3QRA8neCbUWImanR+qucmj4fejiEEfQuUJt5eJceWg+dOLU
llNLNZq3Ui1wEb7F7PHwF2a0qp1PI9Z9gv26Mux7kABeS9UeFgcnuShXvZf3CEf3hNyLjM
AQdHKkpu7P72WPk/3i7Wf+dgC3Y9MmZ0/9j7raoWJIaEoSH8l53lNW8itps6L6pwdDRWZx
eRMaI5NctOYcxtx7bp2qwZFFvhg9/VqVcQJfbxvxCltquVcc94YnJDl3x3ESGw7PrQsOhQ
TL/K2fSAis/T5GjZpL03vclV1Ncq4UVBHIcw/RAAAAAwEAAQAAAQA50f/UrGrtkDJS3zVV
wWy7AsAG1bHBsGKT6EzimS9MAZiYANtmSJuBl5c/g06demuPx+74Q6sAZdYGhzF4c7iapZ
/IkCGewRDCNYiZWqhq8iRaPHVSDGlnVOgNRcif9oL2cyZwZyVkvMG5EsRs35hpUXvFJWK6
c0QP07/bXcOkod+XlvWXwJ9hkwoakC3kKYSLsdil3rKqTapaNg3edcJb0/0Nx4gW24hO1m
0hevoN0rJuzoMf/uK0hwazyZbE4H1q39StWrFrGz+zp6yHkC3Els6W+ExOHUeTEaE+ya8F
R9MOcmrECgePxDFBnlPVumk0SIJ+NRQjH3ArpNvp1ZrdAAAAgQCc4jOZ9zBOpeP4ZyT2OF
Y7E9J8jA/nlsoI164TuJYK1fiv5WH2x3SN95vt1s8R9cUzznA2IWbCRs4Nei34STlTReBk
pfWyg3Skp3FcYIyR2lpQX/7utfPd3X8KpUYR01E1RPgequyyixDtJjguVsrimoz81vF9y7
Q0/ueO3iBmSgAAAIEA6nFTFA9oOzQyM3zgQgt8J9lW8/XjFIF3LZRhu0e0xlsmv54OsGag
17zAOR5cfj7hUzQcGTWJRSHv95gDLJmSgourNRUlPZcZ8AdZCGD8GEwXr1dh2d7Qk3UT2j
wDKS0IFNM6UX67CKSdYK/YFLAv3gtPEgrZ43ec1W6zlHUWmusAAACBANWFKfE3Ky1ubomZ
IovLa0XUs2h9rSUMDX3Su+Es/0x+qHP0bq2JKWTzVWoa0NgfnPAVJo/Fd8NVhIMs1od6iB
O3Kgz7A2Esg5sOtkK06nwSYMcfXMyuf+7fj0v0nBtjVH6EdOrU0muH4vvtxiYcw2N4cI+5
Fnns05+DCtL4o9kzAAAABW1hbWJvAQIDBAU<span class="token operator">=</span>
-----END OPENSSH PRIVATE KEY-----</code></pre>

<p>OPENSSH PRIVATE KEYë¡œ ì €ì¥ë˜ì–´ìˆìŒì„ í™•ì¸í•˜ì˜€ìœ¼ë‹ˆ ì•„ë˜ì˜ ëª…ë ¹ì–´ë“¤ì„ ì‹¤í–‰í•˜ì—¬ ë³€í™˜ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ë©´ ëœë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># [1] OpenSSH</span>
<span class="token function">sudo</span> ssh-keygen <span class="token parameter variable">-p</span> <span class="token parameter variable">-m</span> PEM <span class="token parameter variable">-f</span> openssh.pem

<span class="token comment"># [2] OpenSSL</span>
openssl rsa <span class="token parameter variable">-in</span> openssh.pem <span class="token parameter variable">-outform</span> pem <span class="token operator">></span> openssh-rsa.pem

<span class="token comment"># [3] Putty</span>
puttygen openssh.pem <span class="token parameter variable">-O</span> private-openssh <span class="token parameter variable">-o</span> openssh-rsa.pem</code></pre>

<h4 id="1-OpenSSH"><a href="#1-OpenSSH" class="headerlink" title="[1] OpenSSH"></a>[1] OpenSSH</h4><pre class="language-powershell" data-language="powershell"><div class="caption"><span>Windows Terminal</span></div><code class="language-powershell">ssh-keygen <span class="token operator">-</span>p <span class="token operator">-</span>m PEM <span class="token operator">-</span>f openssh<span class="token punctuation">.</span>pem

Failed to load key openssh<span class="token punctuation">.</span>pem: invalid format</code></pre>

<p>ì²«ë²ˆì§¸ OpenSSH ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ ê°€ìƒ í™˜ê²½ì— ì‹¤í–‰í•œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ë³€í™˜ëœ ë°˜ë©´ì— ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œëŠ” ì•Œ ìˆ˜ ì—†ëŠ” í˜•ì‹ì´ë¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì‹¤íŒ¨í•˜ì˜€ë‹¤.</p>
<h4 id="2-OpenSSL-ğŸ’¥"><a href="#2-OpenSSL-ğŸ’¥" class="headerlink" title="[2] OpenSSL ğŸ’¥"></a>[2] OpenSSL ğŸ’¥</h4><pre class="language-bash" data-language="bash"><code class="language-bash">openssl rsa <span class="token parameter variable">-in</span> openssh.pem <span class="token parameter variable">-outform</span> pem <span class="token operator">></span> openssh-rsa.pem

unable to load Private Key
<span class="token number">140038194394432</span>:error:0909006C:PEM routines:get_name:no start line:<span class="token punctuation">..</span>/crypto/pem/pem_lib.c:745:Expecting: ANY PRIVATE KEY</code></pre>

<p>ë‘ë²ˆì§¸ OpenSSL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì€ ChatGTPì—ì„œ ì•Œë ¤ì¤€ ê²ƒì¸ë° OpenSSHëŠ” OpenSSL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ê¸°ëŠ” í•˜ë‚˜ OpenSSH í”„ë¡œê·¸ë¨ì—ì„œ ì¸ì‹í•˜ëŠ” í˜•ì‹ì´ë¯€ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>
<h4 id="3-Putty-ğŸ€"><a href="#3-Putty-ğŸ€" class="headerlink" title="[3] Putty ğŸ€"></a>[3] Putty ğŸ€</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># [Mac] brew install putty</span>
<span class="token comment"># [Ubuntu] apt install putty-tools</span>
puttygen openssh.pem <span class="token parameter variable">-O</span> private-openssh <span class="token parameter variable">-o</span> openssh-rsa.pem</code></pre>

<p>ì„¸ë²ˆì§¸ ë°©ë²•ì€ PuTTYgenì„ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ìœˆë„ìš° í™˜ê²½ì—ì„œëŠ” ì»¤ë§¨ë“œë¼ì¸ ì˜µì…˜ì„ ì¸ì‹í•˜ì§€ ëª»í•œ ê´€ê³„ë¡œ PuTTYgen(PuTTY Key Generator)ì„ ì‹¤í–‰í•œ í›„ Conversions ë©”ë‰´ì˜ Import Keyë¡œ ë¶ˆëŸ¬ì˜¨ í›„ Export OpenSSH Keyë¡œ ì €ì¥í•˜ë©´ RSA PRIVATE KEYë¡œ ë³€í™˜í•  ìˆ˜ ìˆì—ˆìœ¼ë©° ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ì»¤ë§¨ë“œë¼ì¸ìœ¼ë¡œ ë³„ë‹¤ë¥¸ ë¬¸ì œì—†ì´ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.</p>
<p><img data-src="/images/posts/convert-openssh-private-to-rsa/01.png" alt="Conversions &gt; Import Key"></p>
<p><img data-src="/images/posts/convert-openssh-private-to-rsa/02.png" alt="Conversions &gt; Export OpenSSH Key"></p>
<p>ê°œì¸ì ìœ¼ë¡œëŠ” ì˜¤ë˜ëœ ë‚´ìš©ì´ì§€ë§Œ í•œë²ˆ í•˜ê³ ë‚˜ì„œëŠ” ë”ì´ìƒ ë‹¤ë£¨ì§€ ì•ŠëŠ” ì •ë³´ì´ê¸°ì— ìŠì–´ë²„ë¦´ ê²ƒ ê°™ì•„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ê³ ì ê³µìœ í•œë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ì¸í…”ë¦¬ì œì´ ìë°” ì—ì´ì „íŠ¸ ì‹¤í–‰í•˜ê¸°</title>
    <url>/idea-javaagent/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì˜ APM ìë°” ì—ì´ì „íŠ¸ ì ìš© ì˜ˆì œëŠ” <a href="https://github.com/kdevkr/spring-demo-apm">kdevkr&#x2F;spring-demo-apm</a> ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p><a href="/load-testing/">ë¶€í•˜ ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ëŠ” ì–´ë–»ê²Œ í•˜ëŠ”ê±°ì§€?</a>ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ ë¡œì»¬ í™˜ê²½ì— ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ Scouter, Pinpoint, Elastic APMê³¼ ê°™ì€ APM ì†”ë£¨ì…˜ë“¤ì˜ ìë°” ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ êµ¬ë™í•˜ëŠ” ê²½ìš°ì— <a href="https://docs.newrelic.com/docs/apm/agents/java-agent/installation/include-java-agent-jvm-argument/#spring-boot">javaagent í”Œë˜ê·¸ë¡œ ì—ì´ì „íŠ¸ íŒŒì¼ì„ ì§€ì •</a>í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<p>ì œê°€ í•˜ê³ ì‹¶ì—ˆë˜ ê²ƒì€ ë¡œì»¬ í™˜ê²½ì— APM ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³  ì¸í…”ë¦¬ì œì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ì— ìë°” ì—ì´ì „íŠ¸ë¥¼ ì ìš©í•´ë³´ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ë•Œ íŠ¹ì • í”„ë¡œíŒŒì¼ì„ í™œì„±í™”í•˜ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•´ì„œ ì¼ë¶€ í”„ë¡œí¼í‹°ë¥¼ ì»¤ìŠ¤í…€í•˜ê²Œ ì ìš©í•´ë³¸ ì¼€ì´ìŠ¤ëŠ” ìˆìœ¼ë‚˜ ìë°” ì—ì´ì „íŠ¸ë¥¼ ì§€ì •í•´ë³¸ ê²½í—˜ì€ ì—†ì—ˆìŠµë‹ˆë‹¤. </p>
<h4 id="Path-Variables"><a href="#Path-Variables" class="headerlink" title="Path Variables"></a>Path Variables</h4><p>ì¸í…”ë¦¬ì œì´ ë¬¸ì„œ ìƒì—ëŠ” <a href="https://www.jetbrains.com/help/idea/absolute-path-variables.html">Path variables</a> í•­ëª©ìœ¼ë¡œ ê²½ë¡œ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ë¹ŒíŠ¸ì¸ë˜ì–´ ìˆëŠ” ê²½ë¡œ ë³€ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰ êµ¬ì„±ì—ì„œ Path Variablesë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³ ë„ ì•ˆë‚´í•´ì£¼ê³  ìˆë„¤ìš”.</p>
<blockquote>
<p>You can use path variables to specify paths and command-line arguments for external tools and in some run configurations. For more information, see Built-in IDE macros.</p>
</blockquote>
<p>ë”°ë¼ì„œ í”„ë¡œì íŠ¸ í´ë”ì— ìë°” ì—ì´ì „íŠ¸ íŒŒì¼ì´ ìœ„ì¹˜í•œë‹¤ë©´ ë¹ŒíŠ¸ì¸ ëœ ê²½ë¡œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ê°€ ë©ë‹ˆë‹¤.</p>
<h4 id="Elastic-APM-ìë°”-ì—ì´ì „íŠ¸"><a href="#Elastic-APM-ìë°”-ì—ì´ì „íŠ¸" class="headerlink" title="Elastic APM ìë°” ì—ì´ì „íŠ¸"></a>Elastic APM ìë°” ì—ì´ì „íŠ¸</h4><pre class="language-none"><code class="language-none">-javaagent:$PROJECT_DIR$&#x2F;agent&#x2F;elastic-apm-agent-1.26.1.jar
-Delastic.apm.server_urls&#x3D;http:&#x2F;&#x2F;localhost:8200
-Delastic.apm.service_name&#x3D;spring-demo-apm
-Delastic.apm.application_packages&#x3D;com.example.demo
-Delastic.apm.environment&#x3D;dev</code></pre>

<p><strong>$PROJECT_DIR$</strong> ëŠ” ì¸í…”ë¦¬ì œì´ì— ë‚´ì¥ëœ í”„ë¡œì íŠ¸ ê²½ë¡œì— ëŒ€í•œ ë³€ìˆ˜ì´ë©° JVM ì˜µì…˜ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ê²½ë¡œ ë³€ìˆ˜ê°€ ì•„ë‹ˆë¼ ì§ì ‘ í”„ë¡œì íŠ¸ ê²½ë¡œë¥¼ ì…ë ¥í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” <a href="https://stackoverflow.com/a/45115316">ìŒë”°ì˜´í‘œë¥¼ ì‚¬ìš©</a>í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/idea-javaagent/01.png"></p>
<h4 id="ì‹¤í–‰-êµ¬ì„±-ì €ì¥"><a href="#ì‹¤í–‰-êµ¬ì„±-ì €ì¥" class="headerlink" title="ì‹¤í–‰ êµ¬ì„± ì €ì¥"></a>ì‹¤í–‰ êµ¬ì„± ì €ì¥</h4><p>ì¸í…”ë¦¬ì œì´ì—ì„œëŠ” ì‹¤í–‰ ë° ë””ë²„ê·¸ êµ¬ì„±ì„ íŒŒì¼ë¡œë„ ì €ì¥í•˜ì—¬ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. Run&#x2F;Debug Configurationsì˜ ìƒë‹¨ ìš°ì¸¡ì„ ë³´ë©´ íŒŒì¼ë¡œ ì €ì¥ ì˜µì…˜ì´ ìˆìœ¼ë©° ì´ë¥¼ ì²´í¬í•˜ëŠ” ê²½ìš° í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì˜ .run í´ë”ì— ì‹¤í–‰ êµ¬ì„± íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. ì˜ˆì œ ë¦¬í¬ì§€í† ë¦¬ì˜ <a href="https://github.com/kdevkr/spring-demo-apm/blob/main/.run/SpringDemoApplication%20%5BElastic%20APM%5D.run.xml">SpringDemoApplication [Elastic APM].run.xml</a>ì™€ ê°™ì´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ì˜í•´ì•¼í•  ì‚¬í•­ì€ ë¹ŒíŠ¸ì¸ ê²½ë¡œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ê²½ë¡œë¥¼ ìë™ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜ ì‹¤í–‰ êµ¬ì„±ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ë‹ˆ í”„ë¡œì íŠ¸ ê²½ë¡œ ë³€ìˆ˜ëŠ” ì‹¤ì œ í”„ë¡œì íŠ¸ ê²½ë¡œë¡œ ë³€ê²½ë˜ì–´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ëˆ„êµ°ê°€ì—ê²Œ ì‹¤í–‰ êµ¬ì„±ì„ ê³µìœ í•´ì•¼í•œë‹¤ë©´ í”„ë¡œì íŠ¸ ê²½ë¡œ ë³€ìˆ˜ë¡œ ì§€ì •ëœ ìƒíƒœì—ì„œ ì €ì¥í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/idea-javaagent/02.png"></p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ê°œë°œìë¥¼ ìœ„í•œ ì¸í”„ë¼ ì§€ì‹</title>
    <url>/infrastructure/</url>
    <content><![CDATA[<blockquote>
<p>ITê°€ ì–´ë µë‹¤ê³  ëŠë¼ê²Œ ë˜ëŠ” ì´ìœ ëŠ” ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ ì˜ˆì „ì—ëŠ” ë¶ˆê°€ëŠ¥í–ˆë‹¤ê±°ë‚˜ ê·¸ëŸ¬ì§€ ì•Šì•˜ë˜ ë¶€ë¶„ë“¤ì´ ë³€í™”í•´ì„œ ë§ì€ ì„ íƒì§€ê°€ ìƒê¸°ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜¨-í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì„ ë„˜ì–´ì„œ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ê²Œ ë˜ëŠ” ê²ƒë„ ë™ì¼í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>IT ë¶„ì•¼ì—ì„œ ë°˜ë“œì‹œ ê·¸ë˜ì•¼í•œë‹¤ëŠ” ê²ƒì´ ë³´ì¥ë˜ì§€ ì•ŠëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ ëª¨ë“  íšŒì‚¬ ë˜ëŠ” ì¡°ì§ì´ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ê¸° ìœ„í•œ ì¸í”„ë¼ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•œë‹¤ê±°ë‚˜ ì¸í”„ë¼ë¥¼ ë‹´ë‹¹í•˜ê¸° ìœ„í•œ íŒ€ì„ ë³„ë„ë¡œ êµ¬ì„±í•  ì§€ ì¼ë¶€ ì¸ì›ë“¤ì´ ë‹´ë‹¹í• ì§€ëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì‘ì€ ì¡°ì§ì—ì„œëŠ” ì¸ê±´ë¹„ì˜ ë¬¸ì œë¡œ ì¸í•˜ì—¬ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¥¼ ìµœì†Œí™”í•˜ê³  í´ë¼ìš°ë“œ í™˜ê²½ì„ í†µí•´ ê°œë°œìê°€ ìŠ¤ìŠ¤ë¡œ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ê³  ìš´ì˜í•˜ëŠ” ì„ íƒì„ í•  ê²ƒì…ë‹ˆë‹¤. ì¡°ì§ì—ì„œ ë§Œë“œëŠ” ì‹œìŠ¤í…œì´ë‚˜ ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì»¤ì§€ê²Œë˜ë©´ ì—…ë¬´ì˜ ê³¼ì¤‘í™”ë¡œ ì¸í•˜ì—¬ <a href="https://tech.kakao.com/2020/12/07/kakao-infra-team/">ì¹´ì¹´ì˜¤ ì„œë¹„ìŠ¤ì˜ ëª¨ë“  ì‹œìŠ¤í…œê³¼ íŠ¸ë˜í”½ì„ ì±…ì„ì§€ëŠ” â€˜ì¸í”„ë¼íŒ€â€™ ì´ì•¼ê¸°</a> ë˜ëŠ” <a href="https://blog.toss.im/article/infraengineeringteam-interview">í† ìŠ¤ ì„œë¹„ìŠ¤ì˜ ê·¼ê°„ì„ ë‹¤ì§€ëŠ” ì‚¬ëŒë“¤, ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë§ íŒ€ì„ ë§Œë‚˜ë‹¤</a>ì—ì„œì²˜ëŸ¼ í´ë¼ìš°ë“œ í™˜ê²½ì˜ ì¸í”„ë¼ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ê³  ì¤‘ì ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì¸í”„ë¼ íŒ€ì„ êµ¬ì„±í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. </p>
<h2 id="ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜"><a href="#ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜" class="headerlink" title="ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜"></a>ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜</h2><p>ì¸í”„ë¼ ì˜ì—­ì— ëŒ€í•´ì„œ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ì—ê²Œ ì›í•˜ëŠ” ë°”ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸í”„ë¼ ì˜ì—­ì— ëŒ€í•œ ì§€ì‹ì„ ì–´ëŠì •ë„ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì¸í”„ë¼ ì˜ì—­ì„ ë‹´ë‹¹í•˜ëŠ” ê²ƒê³¼ ì¸í”„ë¼ ì˜ì—­ì— ëŒ€í•œ ì§€ì‹ì„ ì•Œê³  í˜‘ì—…í•˜ëŠ” ê²ƒì€ ë‹¤ë¥´ë‹¤ê³  ìƒê°ë©ë‹ˆë‹¤. ì†”ë£¨ì…˜ íšŒì‚¬ì˜ ì‚¬ì—…íŒ€ ì¸ì›ë“¤ì€ IT ë¶„ì•¼ ë˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ë˜ëŠ” ìš©ì–´ë‚˜ ê°œë…ë“¤ì„ í•™ìŠµí•˜ì—¬ ì—…ë¬´ì— í™œìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê°œë°œìë„ ê°œë°œ ì˜ì—­ ë¿ë§Œ ì•„ë‹ˆë¼ ì¸í”„ë¼ ì˜ì—­ì— ëŒ€í•œ ê°œë…ì„ ì•Œê³  ìˆëŠ”ê²Œ ë‹¹ì—°í•  ê²ƒ ì…ë‹ˆë‹¤. ê°œë°œ ì˜ì—­ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì¸í”„ë¼ ì˜ì—­ì—ì„œ ì•Œì•„ì•¼í•  ì§€ì‹ë„ ë¬´ê¶ë¬´ì§„í•©ë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ê°€ìƒì˜ ë„¤íŠ¸ì›Œí¬ ì˜ì—­ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ ì‚¬ì´ë”(CIDR) ë¸”ë¡ ë° NATì™€ ê°™ì€ ê°œë…ì„ ì•Œì•„ì•¼í•˜ê±°ë‚˜ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œ ì í•©í•œ <a href="https://aws.amazon.com/ko/ec2/instance-types/">EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•</a>ì„ ì„ íƒí•  ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤.</p>
<h3 id="ì„œë²„-CPU-ì•„í‚¤í…ì²˜"><a href="#ì„œë²„-CPU-ì•„í‚¤í…ì²˜" class="headerlink" title="ì„œë²„ CPU ì•„í‚¤í…ì²˜"></a>ì„œë²„ CPU ì•„í‚¤í…ì²˜</h3><p>ì˜¨-í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œëŠ” í˜¸í™˜ì„±ì„ ìœ„í•´ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì¸í…” ì œí’ˆêµ°ì˜ ì œì˜¨ í”„ë¡œì„¸ì„œì™€ ê°™ì€ X86_64 ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ ì„œë²„ìš© CPUë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ì„ ê²ƒì…ë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œëŠ” ì¸í…”ê³¼ AMDì™€ ê°™ì€ amd64 ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ í”„ë¡œì„¸ì„œ ë¿ë§Œ ì•„ë‹ˆë¼ arm64 ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ í”„ë¡œì„¸ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ë¯€ë¡œ ì„ íƒì§€ê°€ ë‹¤ì–‘í•˜ê³  ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ êµ¬ë™ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ëª©ì ì— ë”°ë¼ì„œ ì„ íƒí•˜ê²Œ ë©ë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œëŠ” <a href="/reason-for-replacing-ec2-instance-type/">EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ êµì²´í•˜ëŠ” ì´ìœ </a>ì—ì„œì²˜ëŸ¼ ì„œë²„ ë¹„ìš©ì„ ì¤„ì´ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì¼ë¶€ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ì„œ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°ë„ í–ˆì£ . </p>
<p><img data-src="/images/posts/infrastructure/arm-01.png"></p>
<p>ì„œë²„ CPU ì•„í‚¤í…ì²˜ì˜ ì„ íƒì§€ê°€ ë‹¤ì–‘í•´ì§ìœ¼ë¡œì¨ ì‚¬ìš©í•´ì•¼í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë‚˜ ë„êµ¬ì—ì„œ CPU ì•„í‚¤í…ì²˜ë¥¼ ì§€ì›í•˜ëŠ”ì§€ë¥¼ ê²€í† í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ìŠ¤í¬ë¦°ìƒ·ì²˜ëŸ¼ <a href="https://github.com/prometheus/node_exporter/releases">Promethues Node Exporter</a>ë¥¼ Arm ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” <strong>arm64</strong>ë¡œ ë¹Œë“œëœ ë°”ì´ë„ˆë¦¬ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì•¼í•©ë‹ˆë‹¤. ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒë„ ë„ì»¤ ì´ë¯¸ì§€ê°€ <a href="https://docs.docker.com/desktop/multi-arch/#build-multi-arch-images-with-buildx">Arm ì•„í‚¤í…ì²˜ë¡œ ë¹Œë“œëœ ì´ë¯¸ì§€</a>ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê³  ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h4 id="ì„œë²„-ì•„í‚¤í…ì²˜-í™•ì¸"><a href="#ì„œë²„-ì•„í‚¤í…ì²˜-í™•ì¸" class="headerlink" title="ì„œë²„ ì•„í‚¤í…ì²˜ í™•ì¸"></a>ì„œë²„ ì•„í‚¤í…ì²˜ í™•ì¸</h4><p>í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì½˜ì†”ì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤ë©´ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì–´ë–¤ ì•„í‚¤í…ì²˜ ê¸°ë°˜ì¸ì§€ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë°˜ì ìœ¼ë¡œëŠ” SSH ì ‘ì†ì„ í†µí•´ì„œ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•  ê²ƒì´ë¯€ë¡œ í˜„ì¬ ì ‘ì†í•œ ì„œë²„ë‚´ì—ì„œ ì–´ë–¤ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼í•©ë‹ˆë‹¤. ì„œë²„ ë‚´ì—ì„œ ì•„í‚¤í…ì²˜ ì •ë³´ë¥¼ í™•ì¸í•˜ë ¤ë©´ ì»¤ë„ ë˜ëŠ” CPUì— ëŒ€í•œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ëª…ë ¹ì–´ë‚˜ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ì´ ì ‘ì†í•˜ëŠ” ì„œë²„ì—ì„œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">uname</span> <span class="token parameter variable">-rmpo</span>
<span class="token number">4.14</span>.256-197.484.amzn2.aarch64 aarch64 aarch64 GNU/Linux

$ <span class="token function">cat</span> /proc/version
Linux version <span class="token number">4.14</span>.256-197.484.amzn2.aarch64 <span class="token punctuation">(</span>mockbuild@ip-10-0-46-15<span class="token punctuation">)</span> <span class="token punctuation">(</span>gcc version <span class="token number">7.3</span>.1 <span class="token number">20180712</span> <span class="token punctuation">(</span>Red Hat <span class="token number">7.3</span>.1-13<span class="token punctuation">)</span> 
<span class="token punctuation">(</span>GCC<span class="token punctuation">))</span> <span class="token comment">#1 SMP Tue Nov 30 00:18:02 UTC 2021</span>

$ hostnamectl
   Static hostname: ip-192-168-53-1.ap-northeast-2.compute.internal
         Icon name: computer-vm
           Chassis: vm
        Machine ID: ec2d229d0283ccced53f112dc3648f3a
           Boot ID: 67c156512c204340b1ac01d60eb45b26
    Virtualization: amazon
  Operating System: Amazon Linux <span class="token number">2</span>
       CPE OS Name: cpe:2.3:<span class="token punctuation">\</span>o:amazon:amazon_linux:2
            Kernel: Linux <span class="token number">4.14</span>.256-197.484.amzn2.aarch64
      Architecture: arm64

$ lscpu
Architecture:        aarch64
Byte Order:          Little Endian
CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:              <span class="token number">4</span>
On-line CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span> list: <span class="token number">0</span>-3
Thread<span class="token punctuation">(</span>s<span class="token punctuation">)</span> per core:  <span class="token number">1</span>
Core<span class="token punctuation">(</span>s<span class="token punctuation">)</span> per socket:  <span class="token number">4</span>
Socket<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:           <span class="token number">1</span>
NUMA node<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:        <span class="token number">1</span>
Model:               <span class="token number">1</span>
BogoMIPS:            <span class="token number">243.75</span>
L1d cache:           64K
L1i cache:           64K
L2 cache:            1024K
L3 cache:            32768K
NUMA node0 CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:   <span class="token number">0</span>-3
Flags:               fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm lrcpc dcpop asimddp ssbs</code></pre>

<blockquote>
<p>x86_64ì™€ amd64ëŠ” X86 ëª…ë ¹ì–´ ì§‘í•©ì˜ ì•„í‚¤í…ì²˜ì´ë©° aarch64ì™€ arm64ëŠ” arm ëª…ë ¹ì–´ ì§‘í•©ì˜ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ë””ìŠ¤í¬-ë³¼ë¥¨"><a href="#ë””ìŠ¤í¬-ë³¼ë¥¨" class="headerlink" title="ë””ìŠ¤í¬ ë³¼ë¥¨"></a>ë””ìŠ¤í¬ ë³¼ë¥¨</h3><p>ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ìŠ¤í¬ ë³¼ë¥¨ì— ëŒ€í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì´ì•¼ê¸°ê°€ ì˜¤ê³ ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ëŠ” ë‹¤ì–‘í•œ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ebs-volume-types.html">ë””ìŠ¤í¬ ë³¼ë¥¨ ìœ í˜•</a>ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ë¯€ë¡œ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª©ì ì— ë§ëŠ” ë””ìŠ¤í¬ ë³¼ë¥¨ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ë””ìŠ¤í¬ ë³¼ë¥¨ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì–´ë–¤ íŒŒì¼ì‹œìŠ¤í…œì˜ íŒŒí‹°ì…˜ì¸ì§€ë¥¼ í™•ì¸í•˜ê³  ë””ìŠ¤í¬ ë³¼ë¥¨ì˜ ìš©ëŸ‰ì„ ì¦ì„¤í•´ì•¼í•  ìˆ˜ë„ ìˆì£ . </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">df</span> <span class="token parameter variable">-hT</span>
Filesystem     Type      Size  Used Avail Use% Mounted on
/dev/root      ext4       30G  <span class="token number">8</span>.9G   21G  <span class="token number">31</span>% /
/dev/nvme1n1   xfs      1000G  629G  371G  <span class="token number">63</span>% /data/main
/dev/nvme2n1   xfs       <span class="token number">2</span>.0T  306G  <span class="token number">1</span>.7T  <span class="token number">16</span>% /data/sub

$ lsblk <span class="token parameter variable">-f</span>
NAME        FSTYPE   LABEL           UUID                                 FSAVAIL FSUSE% MOUNTPOINT
nvme1n1     xfs                      <span class="token number">18891124</span>-be54-415d-ba02-21dc6acf9e4f  <span class="token number">370</span>.9G    <span class="token number">63</span>% /data/main
nvme2n1     xfs                      5be85d99-8ed0-440b-a423-486bdef1b1b4    <span class="token number">1</span>.7T    <span class="token number">15</span>% /data/sub
nvme0n1
â””â”€nvme0n1p1 ext4     cloudimg-rootfs e8070c31-bfee-4314-a151-d1332dc23486   <span class="token number">20</span>.1G    <span class="token number">31</span>% /</code></pre>

<p>ìœ„ ì˜ˆì‹œ ê²°ê³¼ë¥¼ ë³´ë©´ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°ëœ ë£¨íŠ¸ ë³¼ë¥¨ì€ NVMe ê¸°ë°˜ì´ë©° ext4 íŒŒì¼ì‹œìŠ¤í…œì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë˜ì–´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ ì—°ê²°ëœ ë°ì´í„° ë³¼ë¥¨ì€ ë™ì¼í•˜ê²Œ NVMe ê¸°ë°˜ì´ì§€ë§Œ xfs íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">du</span> --max-depth <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-nr</span>
<span class="token number">188679628</span> <span class="token builtin class-name">.</span>
<span class="token number">187045152</span> ./elasticsearch-7.3.2
<span class="token number">1034772</span>   ./kibana-7.3.2
<span class="token number">18756</span>     ./node_exporter-1.1.2.linux-amd64</code></pre>

<p>du ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ í˜„ì¬ ê²½ë¡œ ê¸°ì¤€ì—ì„œ ì‚¬ìš©ëŸ‰ì´ ë§ì€ ë””ë ‰í† ë¦¬ ìˆœì„œëŒ€ë¡œ ì¶œë ¥í–ˆìŠµë‹ˆë‹¤. ë””ìŠ¤í¬ ë³¼ë¥¨ì˜ ìš©ëŸ‰ì´ ë¶€ì¡±í•´ì§€ë©´ ì‚¬ìš©ëŸ‰ì´ ë§ì€ ë””ë ‰í† ë¦¬ê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ê³  ë¶ˆí•„ìš”í•œ íŒŒì¼ì´ ë‚¨ì•„ìˆëŠ”ì§€ë¥¼ ë¨¼ì € í™•ì¸í•˜ê³  ìš©ëŸ‰ í™•ë³´ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ ë””ìŠ¤í¬ ë³¼ë¥¨ ì¦ì„¤ì„ ìš”ì²­í•˜ê±°ë‚˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ê²ƒ ì…ë‹ˆë‹¤.</p>
<h3 id="ë„¤íŠ¸ì›Œí¬"><a href="#ë„¤íŠ¸ì›Œí¬" class="headerlink" title="ë„¤íŠ¸ì›Œí¬"></a>ë„¤íŠ¸ì›Œí¬</h3><p>ì¸í”„ë¼ ì˜ì—­ ì¤‘ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ ë¶€ë¶„ì€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì—°ë™ì´ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ìƒê°ë³´ë‹¤ ê²½í—˜í•´ë³¼ ê°€ëŠ¥ì„±ì´ ì ìŠµë‹ˆë‹¤. ì™¸ë¶€ ì‹œìŠ¤í…œì˜ IP ë˜ëŠ” í˜¸ìŠ¤íŠ¸ ì£¼ì†Œë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì™¸ë¶€ APIë¥¼ ì„œë²„ ë‚´ì—ì„œ ì§ì ‘ ìš”ì²­í•´ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ</span>
<span class="token function">ifconfig</span>

<span class="token comment"># ë‚´ë¶€ ì•„ì´í”¼ ì¡°íšŒ</span>
<span class="token function">hostname</span> <span class="token parameter variable">-I</span>

<span class="token comment"># ì™¸ë¶€ ì•„ì´í”¼ ì¡°íšŒ</span>
<span class="token function">curl</span> ipconfig.io

<span class="token comment"># TCP ë°”ì¸ë”© í¬íŠ¸ ì¡°íšŒ</span>
<span class="token function">netstat</span> <span class="token parameter variable">-tnlp</span>

<span class="token comment"># íŠ¸ë˜í”½ ê²½ë¡œ ì¶”ì </span>
<span class="token function">traceroute</span> google.com

<span class="token comment"># DNS ì¡°íšŒ</span>
<span class="token function">nslookup</span> <span class="token parameter variable">-type</span><span class="token operator">=</span>mx google.com
<span class="token function">dig</span> google.com mx</code></pre>

<h3 id="ì‹œìŠ¤í…œ-ë¡œê·¸"><a href="#ì‹œìŠ¤í…œ-ë¡œê·¸" class="headerlink" title="ì‹œìŠ¤í…œ ë¡œê·¸"></a>ì‹œìŠ¤í…œ ë¡œê·¸</h3><p>ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¡œ êµ¬ì„±ëœ ì¸í”„ë¼ íŒ€ì´ ì¡°ì§ë‚´ì— ìˆë‹¤ë©´ ì„œë²„ ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ë¡œê·¸ ë˜ëŠ” ì§€í‘œë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” Zabbix, Datadogê³¼ ê°™ì€ ì†”ë£¨ì…˜ì„ ë„ì…í•  ê²ƒì…ë‹ˆë‹¤. ì„œë²„ì— ê¸°ë¡ëœ ì‹œìŠ¤í…œ ë¡œê·¸ëŠ” ì„œë²„ì—ì„œ ë°œìƒí•œ ì¼ë ¨ì˜ ì´ë²¤íŠ¸ë“¤ì˜ ê¸°ë¡ì´ë¯€ë¡œ ì–´ë– í•œ ë¬¸ì œê°€ íŒŒì•…ë˜ì—ˆì„ë•Œ ì›ì¸ì„ ì°¾ì•„ê°€ê¸° ìœ„í•œ ë¶„ì„ ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì´ êµ¬ì¶•ë˜ì–´ìˆì§€ ì•Šì•„ë„ ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ìš”ì²­ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê³¼ì •ì—ì„œ ì„œë²„ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ë¡œê·¸ë¡œ ê¸°ë¡ëœë‹¤ê±°ë‚˜ ì—”ì§„ì—‘ìŠ¤ì™€ ê°™ì€ ì›¹ì„œë²„ì—ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì— ìš”ì²­ì— ëŒ€í•´ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œë„ ìì²´ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ë‚¨ê¸°ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì£¼ìš” ê¸°ëŠ¥ì— ëŒ€í•œ ë™ì‘ì„ ë¡œê·¸ë¡œ ì €ì¥ë˜ë„ë¡ ì •ì˜í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ê°€ ìˆë‹¤ë©´ ë” ìƒì„¸í•˜ê²Œ ì›ì¸ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‹œë„í•˜ê² ì§€ë§Œ ê°œë°œìë¡œì¨ëŠ” ê°„ë‹¨í•˜ê²Œ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.</p>
<h4 id="ë¦¬ëˆ…ìŠ¤-ë¡œê·¸-ë””ë ‰í† ë¦¬"><a href="#ë¦¬ëˆ…ìŠ¤-ë¡œê·¸-ë””ë ‰í† ë¦¬" class="headerlink" title="ë¦¬ëˆ…ìŠ¤ ë¡œê·¸ ë””ë ‰í† ë¦¬"></a>ë¦¬ëˆ…ìŠ¤ ë¡œê·¸ ë””ë ‰í† ë¦¬</h4><p>ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì˜ ë¡œê·¸ê°€ ì €ì¥ë˜ëŠ” ê¸°ë³¸ ë””ë ‰í† ë¦¬ëŠ” <strong>&#x2F;var&#x2F;log</strong> ì…ë‹ˆë‹¤. ë³„ë„ë¡œ ì„¤ì¹˜í•œ í”„ë¡œì„¸ìŠ¤ì˜ ë¡œê·¸ê°€ ì•„ë‹ˆë¼ë©´ ëŒ€ë¶€ë¶„ì˜ ë¡œê·¸ë“¤ì´ ì´ ê²½ë¡œì— ì €ì¥ë  ê²ƒì…ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ì ‘ì† ê¸°ë¡ ì¡°íšŒ</span>
lastlog <span class="token parameter variable">-t</span> <span class="token number">1</span>

<span class="token comment"># systemd ë¡œê·¸ ì¡°íšŒ</span>
journalctl <span class="token parameter variable">-b</span>

<span class="token comment"># ì»¤ë„ ë¶€íŠ¸ ë©”ì‹œì§€ ì¡°íšŒ</span>
<span class="token function">dmesg</span>

<span class="token comment"># ì‹œìŠ¤í…œ ë¡œê·¸ ì¡°íšŒ</span>
<span class="token function">tail</span> /var/log/syslog</code></pre>

<blockquote>
<p>Zabbixì™€ ê°™ì€ ëª¨ë‹ˆí„°ë§ ì†”ë£¨ì…˜ì„ ë„ì…í•˜ëŠ” ê²½ìš° <a href="https://www.zabbix.com/documentation/current/en/manual/config/items/itemtypes/log_items">ë¡œê·¸ íŒŒì¼ ê°ì‹œ</a> ê¸°ëŠ¥ìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ë¬¸ì œë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="ë¡œê·¸-ê´€ë¦¬"><a href="#ë¡œê·¸-ê´€ë¦¬" class="headerlink" title="ë¡œê·¸ ê´€ë¦¬"></a>ë¡œê·¸ ê´€ë¦¬</h4><p>ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ ì…ì¥ì—ì„œëŠ” ë¡œê·¸ íŒŒì¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ logrotateë¼ê³ í•˜ëŠ” ë¡œê·¸ ê´€ë¦¬ ë„êµ¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì„œë²„ì— ì €ì¥ë˜ëŠ” ë¡œê·¸ íŒŒì¼ì„ ì¼ì •í•œ íŒ¨í„´ì„ ì£¼ê¸°ë¡œ êµ¬ë¶„í•˜ì—¬ ì €ì¥í•¨ìœ¼ë¡œì¨ ë‚˜ì¤‘ì— ì–´ë– í•œ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°ì‚¬ë¥¼ ìœ„í•´ì„œ íŠ¹ì • ì‹œì ì— ëŒ€í•œ ë¡œê·¸ë¥¼ ìš”ì²­í–ˆì„ë•Œ ì‰½ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ëŒ€ë¹„í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Nginxì— ëŒ€í•œ ë¡œí…Œì´ì…˜ ì„¤ì • íŒŒì¼ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> /etc/logrotate.d/nginx
/var/log/nginx/*.log <span class="token punctuation">&#123;</span>
        daily
        missingok
        rotate <span class="token number">52</span>
        compress
        delaycompress
        notifempty
        create <span class="token number">640</span> nginx adm
        sharedscripts
        postrotate
                <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /var/run/nginx.pid <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                        <span class="token function">kill</span> <span class="token parameter variable">-USR1</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /var/run/nginx.pid<span class="token variable">`</span></span>
                <span class="token keyword">fi</span>
        endscript
<span class="token punctuation">&#125;</span></code></pre>

<p>ì¸í”„ë¼ ì˜ì—­ì—ì„œ ë¡œê·¸ ê´€ë¦¬ì— ëŒ€í•œ ê°œë…ì„ ì•Œê²Œëœë‹¤ë©´ ê°œë°œìë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ê¸°ë¡ë˜ëŠ” ë¡œê·¸ì— ì–´ë– í•œ ì •ë³´ë¥¼ ë‚¨ê²¨ì•¼í•˜ëŠ”ê°€ë¥¼ ì¢€ ë” ê³ ë¯¼í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë„ˆë¬´ ë¶ˆí•„ìš”í•œ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ë‚¨ê¸°ê²Œ ë˜ì–´ ì„œë²„ì˜ ë””ìŠ¤í¬ ë³¼ë¥¨ì˜ ìš©ëŸ‰ì„ ë„ˆë¬´ ì°¨ì§€í•˜ê²Œ ë˜ê³  ë¡œê·¸ ë¶„ì„ë„ í˜ë“¤ì–´ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<p>ê°œë°œìê°€ ì•Œì•„ì•¼í•  ê¸°ì´ˆì ì¸ ë¶€ë¶„ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì–´ë³´ì•˜ìŠµë‹ˆë‹¤. ë” ìì„¸í•˜ê²Œ ë“¤ì–´ê°„ë‹¤ë©´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì˜ ì§€í‘œë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì‹œìŠ¤í…œì„ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“œëŠ” ì»¤ë„ íŠœë‹ì— ëŒ€í•œ ë¶€ë¶„ë„ ë‹¤ë£¨ì–´ë³´ì•„ì•¼í•©ë‹ˆë‹¤. ì¸í”„ë¼ ì˜ì—­ì— ëŒ€í•´ì„œ ë” ë§ì€ ê²½í—˜ì„ í•˜ê²Œë˜ë©´ ì´ì— ëŒ€í•œ ë¶€ë¶„ë„ ê³µìœ í•´ë³¼ ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://aws.amazon.com/ko/ec2/graviton/">AWS Graviton í”„ë¡œì„¸ì„œ</a></li>
<li><a href="https://www.oracle.com/kr/cloud/compute/arm/what-is-arm/">ARM í”„ë¡œì„¸ì„œë¥¼ ì„ íƒí•´ì•¼ í•˜ëŠ” ì´ìœ </a></li>
<li><a href="https://www.epnc.co.kr/news/articleView.html?idxno=205714">ë¯¸ë˜ ì»´í“¨íŒ… í™˜ê²½ ë°˜ì˜í•˜ëŠ” ARM ì•„í‚¤í…ì²˜ ê¸°ìˆ </a></li>
</ul>
]]></content>
      <tags>
        <tag>Infrastructure</tag>
        <tag>Microarchitecture</tag>
      </tags>
  </entry>
  <entry>
    <title>IP ëŒ€ì—­ ê·¸ë¦¬ê³  ìœ„ì¹˜ì¶”ì </title>
    <url>/ip-band-and-location-tracking/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ IT ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” IP ëŒ€ì—­ê³¼ NAT ê·¸ë¦¬ê³  IPë¥¼ í™œìš©í•œ ìœ„ì¹˜ ì¶”ì ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. </p>
<h2 id="IP-ëŒ€ì—­"><a href="#IP-ëŒ€ì—­" class="headerlink" title="IP ëŒ€ì—­"></a>IP ëŒ€ì—­</h2><p>IT ì¸í”„ë¼ì—ì„œ IPëŠ” í¼ë¸”ë¦­ IP ê·¸ë¦¬ê³  í”„ë¼ì´ë¹— IPë¡œ êµ¬ë¶„ë˜ì–´ì§‘ë‹ˆë‹¤. <strong>í¼ë¸”ë¦­ IP</strong>ëŠ” ì¸í„°ë„·ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê³µì¸ IPë¥¼ ë§í•˜ë©° <strong>í”„ë¼ì´ë¹— IP</strong>ëŠ” ê°œì¸ì ìœ¼ë¡œ êµ¬ì„±í•œ ë„¤íŠ¸ì›Œí¬ ë§ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‚¬ì„¤ IPë¥¼ ë§í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, <strong>ì‚¬ì„¤ë§ IPë¡œëŠ” ì™¸ë¶€ ì¸í„°ë„· ì ‘ì†ì„ í†µí•´ êµ¬ê¸€ ë˜ëŠ” ë„¤ì´ë²„ ì‚¬ì´íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong></p>
<h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc1631">NAT(IP Network Address Translator)</a>ëŠ” IPv4 ì£¼ì†Œì²´ê³„ì˜ í•œê³„ë¡œ ì¸í•˜ì—¬ IP ì£¼ì†Œê°€ ë¶€ì¡±í•´ì§€ëŠ” í˜„ìƒì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. NATëŠ” <strong>ë‚´ë¶€ ì‚¬ì„¤ë§ IPë¥¼ ê°€ì§€ê³  ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë§ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ê³µì¸ IPë¡œ ë³€í™˜</strong>í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê³µìœ ê¸°ì—ëŠ” NAT ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê³µìœ ê¸°ì—ì„œ 192.168.0.2ì™€ ê°™ì€ ì£¼ì†Œë¥¼ í• ë‹¹í•˜ë”ë¼ë„ ì™¸ë¶€ ì¸í„°ë„·ì— ì ‘ì†í•  ê²½ìš°ì—ëŠ” ê³µì¸ IPë¡œ ë³€í™˜í•˜ì—¬ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì´ëŸ¬í•œ ì°¨ì´ë¡œ ìœˆë„ìš° ì»´í“¨í„°ì˜ ëª…ë ¹í”„ë¡¬í”„íŠ¸ì—ì„œ <strong>ifconfig</strong> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ <strong>ê³µìœ ê¸°ì—ì„œ í• ë‹¹í•œ ì‚¬ì„¤ IP</strong>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ì•„ì´í”¼ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” <a href="https://ipconfig.io/">ipconfig.io</a>, <a href="https://ifconfig.io/">ifconfig.io</a>, <a href="https://ifconfig.me/">ifconfig.me</a>ì— ì ‘ì†í•´ë³´ë©´ ì‚¬ì„¤ IPê°€ ì•„ë‹Œ <strong>ê³µì¸ IP</strong>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-01.png" alt="ë‚´ë¶€ ì•„ì´í”¼ ì¡°íšŒ"></p>
<p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-02.png" alt="ì™¸ë¶€ ì•„ì´í”¼ ì¡°íšŒ"></p>
<h3 id="IP-ìœ„ì¹˜-ì¡°íšŒ"><a href="#IP-ìœ„ì¹˜-ì¡°íšŒ" class="headerlink" title="IP ìœ„ì¹˜ ì¡°íšŒ"></a>IP ìœ„ì¹˜ ì¡°íšŒ</h3><p>ìœ„ì—ì„œ í™•ì¸í•œ ê³µì¸ IPì— ëŒ€í•´ì„œ ìœ„ì¹˜ì¶”ì  ì‚¬ì´íŠ¸ë¼ëŠ” ê³³ì—ì„œ ì¡°íšŒë¥¼ í•´ë³´ë©´ ì‹¤ì œë¡œ ì‚´ê³ ìˆëŠ” ê³³ ë³´ë‹¤ëŠ” í„°ë¬´ë‹ˆì—†ëŠ” ê³³ì„ ë³´ì—¬ì£¼ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ìœ„ì¹˜ì¶”ì  ì‚¬ì´íŠ¸ì—ì„œ IPì— ëŒ€í•œ ìœ„ì¹˜ ì¡°íšŒê°€ ì •í™•í•˜ì§€ ì•Šì€ ì´ìœ ëŠ” <strong>ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ì(ISP)ì¸ KT ì¸í„°ë„·ê³¼ ê°™ì€ ì—…ì²´ì—ì„œ ì§€ì—­ì„ ì •í•´ì„œ IP ëŒ€ì—­ì„ í• ë‹¹</strong>í•˜ê³  ê·¸ ì§€ì—­ë‚´ì—ì„œ DHCPë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì—ì„œ ì œê³µí•˜ëŠ” <a href="https://í›„ì´ì¦ˆê²€ìƒ‰.í•œêµ­/">WHOIS</a> ì„œë¹„ìŠ¤ë¥¼ í†µí•´ IPë¥¼ ì¡°íšŒí•´ë³´ë©´ ì¡°ê¸ˆ ë” ìƒì„¸í•œ ì§€ì—­ì„ ì•ˆë‚´í•´ì¤ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ip-band-and-location-tracking/ipconfig-03.png" alt="WHOIS ì¡°íšŒ"></p>
<p>ì‹¤ì œë¡œ ì œê°€ ì‚´ê³  ìˆëŠ” ê²½ê¸°ë„ ì–‘ì£¼ì‹œì—ì„œ ì‚¬ìš©ì¤‘ì¸ IPë¼ê³  ì•ˆë‚´í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì—ì„œ ë³´ë‹¤ ì •í™•í•œ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” <strong>KT ì¸í„°ë„·ê³¼ ê°™ì€ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì—ì„œ í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì— ì§€ì—­ì— ëŒ€í•œ IP ëŒ€ì—­ ì •ë³´ë¥¼ ë“±ë¡</strong>í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<p>ê³µì¸ IP ëŒ€ì—­ì˜ <strong>218.152.0.0ë¶€í„° 218.159.255.255ëŠ” KT ì¸í„°ë„·ì—ì„œ ì‚¬ìš©ì¤‘ì¸ IP ëŒ€ì—­</strong>ì´ë©° ê·¸ ì¤‘ì—ì„œ 218.156.190.Xì— ëŒ€í•œ IP ëŒ€ì—­ì€ ê²½ê¸°ë„ ì–‘ì£¼ì‹œì—ì„œ ì‚¬ìš©í•˜ë„ë¡ í• ë‹¹í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì¹˜ ì¶”ì  ì‚¬ì´íŠ¸ì—ì„œ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì˜ IP ëŒ€ì—­ì€ ì•Œ ìˆ˜ ìˆì§€ë§Œ <strong>íŠ¹ì • IPê°€ ì‹¤ì œë¡œ KT ì¸í„°ë„·ì´ ì–´ë–¤ ì§€ì—­ì— í• ë‹¹í–ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì—</strong> KT ì¸í„°ë„·ì— ëŒ€í•œ ë³¸ì‚¬ ë˜ëŠ” ì§€ì—­ì ìœ¼ë¡œ í¼ì ¸ìˆëŠ” KT ì¸í„°ë„· ì¥ë¹„ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ëŒ€ì‹  í‘œì‹œí•´ì£¼ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìëŠ” ì§€ì—­ì— ëŒ€í•˜ì—¬ IP ëŒ€ì—­ì„ í˜•ì„±í•˜ê¸° ë•Œë¬¸ì— íŠ¹ì • IP ëŒ€ì—­ì—ì„œ íŠ¸ë˜í”½ ê³¼ë¶€í™”ê°€ ë°œìƒí•˜ë©´ ì¸í„°ë„· ì†ë„ë¥¼ ì œí•œí•˜ëŠ” ë½ì„ ê±¸ê¸°ë„ í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì¸í„°ë„· ì†ë„ê°€ ì¶©ë¶„í•˜ê²Œ ë‚˜ì˜¤ì§€ ì•Šì•„ì„œ ì¸í„°ë„· ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ í™•ì¸í•´ë³´ë©´ ì£¼ë³€ ì¥ë¹„ì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ë½ í•´ì œë¥¼ ìš”ì²­í•˜ëŠ” ê±¸ ë§ì´ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì§€ë‚œ 4ì›”ì— ë‚œë¦¬ì˜€ë˜ <a href="https://www.seoul.co.kr/news/newsView.php?id=20210420500154">KT â€˜10ê¸°ê°€ ì¸í„°ë„·â€™ ì†ë„ì €í•˜ ë…¼ë€ì— ë°©í†µìœ„ ì¡°ì‚¬ ë‚˜ì„ ë‹¤</a>ì™€ ê°™ì€ ê²½ìš°ë„ íŠ¸ë˜í”½ ê·œëª¨ì— ë”°ë¼ ì œí•œì„ ë‘” ê²ƒì¸ë° ê¸°ìˆ ì ìœ¼ë¡œ ê²°í•¨ì´ ìˆì§€ ì•Šì•˜ë‚˜ ì‹¶ë„¤ìš”.</p>
</blockquote>
<h3 id="í˜„ì‹¤ê³¼-ì˜í™”ëŠ”-ë‹¤ë¥´ë‹¤"><a href="#í˜„ì‹¤ê³¼-ì˜í™”ëŠ”-ë‹¤ë¥´ë‹¤" class="headerlink" title="í˜„ì‹¤ê³¼ ì˜í™”ëŠ” ë‹¤ë¥´ë‹¤"></a>í˜„ì‹¤ê³¼ ì˜í™”ëŠ” ë‹¤ë¥´ë‹¤</h3><p>ì•„ë¬´íŠ¼, ì˜í™”ì—ì„œëŠ” IP ì •ë³´ë¥¼ ì•Œê²Œë˜ë©´ í•´ë‹¹ IPë¥¼ ì‚¬ìš©í•˜ëŠ” ë²”ì£„ìì˜ ìœ„ì¹˜ë¥¼ ì •í™•íˆ ì•„ëŠ” ê²ƒì²˜ëŸ¼ ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” ê²½ì°°ì´ í•„ìš”ì— ì˜í•´ ì›¹ ì„œë¹„ìŠ¤ íšŒì‚¬ì— íŠ¹ì • ì•„ì´ë””ì— ëŒ€í•œ IP ì´ë ¥ ì •ë³´ë¥¼ ìš”êµ¬í•˜ëŠ” ê³µì¡° ìš”ì²­ì„ í•˜ê²Œ ë˜ê³  <strong>ì œê³µë°›ì€ IPë¥¼ ë‹¤ì‹œ ì¸í„°ë„· ì„œë¹„ìŠ¤ ì‚¬ì—…ìì¸ KT ë³¸ì‚¬ì—ê²Œ IP ëŒ€ì—­ì— ëŒ€í•œ ì •ë³´ë¥¼ ìš”ì²­</strong>í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìµœì¢…ì ìœ¼ë¡œëŠ” <strong>ì •í™•í•œ ìœ„ì¹˜ëŠ” ì•„ë‹ˆë”ë¼ë„ ëŒ€ëµì ìœ¼ë¡œ ìë©´ë™ê¹Œì§€</strong>ëŠ” ì•Œê²Œë©ë‹ˆë‹¤.</p>
<p>ë²”ì£„ìê°€ ì‚¬ìš©í•˜ëŠ” IPê°€ í•´ì™¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³µì¸ IP ì •ë³´ë¡œ ì¡°íšŒë˜ëŠ” ê²½ìš°ì—ëŠ” ë” ê¹Œë‹¤ë¡œì›Œì§€ëŠ” ê²ƒì€ ë§ìŠµë‹ˆë‹¤. í•´ë‹¹ IP ëŒ€ì—­ì„ í• ë‹¹í•˜ëŠ” ì¸í„°ë„· ì„œë¹„ìŠ¤ ì—…ì²´ì—ê²Œ ê³µì¡° ìš”ì²­ì„ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ <strong>êµ­ì œí˜•ì‚¬ì‚¬ë²• ê³µì¡°ë²•ì— ì˜ê±°</strong>í•´ì„œ êµ­ê°€ ê°„ ê³µì¡° ìš”ì²­ì„ í•˜ê³  ì œê³µë°›ì•„ì•¼í•©ë‹ˆë‹¤. ê²½ì°°ë¶„ë“¤ì´ ë‹´ë‹¹í•˜ëŠ” ì‚¬ê±´ë“¤ì´ í•˜ë‚˜ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•´ì™¸ IPì— ëŒ€í•œ ì¶”ì ì„ êº¼ë ¤í•˜ëŠ”ê²Œ ì–´ì°Œë³´ë©´ ë‹¹ì—°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  <a href="https://www.youtube.com/watch?v=aWqK1b5w9Yo">ì„± ì°©ì·¨ ì˜ìƒë¬¼ì„ ìœ í¬í•œ ì‚¬ê±´</a>ì˜ ìš©ì˜ìë„ ì§‘ìš”í•œ ì¶”ì  ëì— ì¡ì•„ë‚´ê¸°ë„ í•˜ì£ . í•´ì™¸ VPN ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë©´ ì¶”ì í•  ìˆ˜ ì—†ë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì€ë° <strong>ì‚¬ì‹¤ì€ ì¶”ì ì€ ë˜ì§€ë§Œ ê·€ì°®ì„ ìˆ˜ ìˆë‹¤</strong>ë¼ê³  ë´ì•¼ê² ì£ .</p>
<h2 id="ì‹¤ë¬´-í™˜ê²½ì—ì„œì˜-IP"><a href="#ì‹¤ë¬´-í™˜ê²½ì—ì„œì˜-IP" class="headerlink" title="ì‹¤ë¬´ í™˜ê²½ì—ì„œì˜ IP"></a>ì‹¤ë¬´ í™˜ê²½ì—ì„œì˜ IP</h2><p>ê·¸ëŸ¬ë©´ ì‹¤ë¬´ í™˜ê²½ì¸ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” IPì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. íšŒì‚¬ì—ì„œë„ ìì²´ ë‚´ë¶€ ì‚¬ì„¤ë§ì„ êµ¬ì¶•í•˜ì—¬ íšŒì‚¬ ë‚´ë¶€ì—ì„œ ê·¼ë¬´í•˜ëŠ” ì§ì›ë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” IPë¥¼ í• ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²ƒì€ íšŒì‚¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë‹´ë‹¹ìê°€ ìˆ˜í–‰í•©ë‹ˆë‹¤. </p>
<h3 id="NAT-ì•„ì´í”¼"><a href="#NAT-ì•„ì´í”¼" class="headerlink" title="NAT ì•„ì´í”¼"></a>NAT ì•„ì´í”¼</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ë¼ìš°í„° ì¥ë¹„ë¡œë¶€í„° DHCPë¡œ ë™ì ìœ¼ë¡œ í• ë‹¹ë°›ëŠ” ë‚´ë¶€ ì•„ì´í”¼ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ì§€ë§Œ ê²½ìš°ì— ë”°ë¼ì„œëŠ” ì™¸ë¶€ ì¸í„°ë„·ë§ì—ì„œ íšŒì‚¬ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ NAT ì•„ì´í”¼ë¥¼ ìš”ì²­í•´ì•¼í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.</p>
<p style="text-align:center; font-weight:bold;">"ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ NAT ì•„ì´í”¼ê°€ í•„ìš”í•©ë‹ˆë‹¤."</p>

<p>ê·¸ëŸ¬ë©´ ë„¤íŠ¸ì›Œí¬ ë‹´ë‹¹ìëŠ” NAT ì•„ì´í”¼ê°€ í•„ìš”í•œ ì‚¬ìœ ë¥¼ ê²€í† í•˜ê³  NAT ì•„ì´í”¼ì™€ í•¨ê»˜ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë„ë©”ì¸ ì£¼ì†Œì™€ í¬íŠ¸ ì •ë³´ë¥¼ ì „ë‹¬í•´ì¤ë‹ˆë‹¤. íšŒì‚¬ ë¼ìš°í„° ì¥ë¹„ì—ì„œëŠ” ì™¸ë¶€ íŠ¸ë˜í”½ì˜ ë„ë©”ì¸ê³¼ í¬íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì—°ê²°ëœ NAT ì•„ì´í”¼ë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•´ì¤Œìœ¼ë¡œì¨ ë‚´ë¶€ ì‚¬ì„¤ë§ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><p>ì½”ë¡œë‚˜ 19ë¡œ ì¸í•˜ì—¬ <strong>ëŒ€ë¶€ë¶„ì˜ IT ê¸°ì—…ë“¤ì´ ì¬íƒê·¼ë¬´ë¥¼ í—ˆìš©</strong>í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•„ìš”ì— ì˜í•´ íšŒì‚¬ë¡œ ì¶œê·¼í•˜ê¸°ë„ í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ì—…ë¬´ëŠ” ì§‘ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê°œë°œ ì¡°ì§ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë§ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•œ íšŒì‚¬ ë‚´ë¶€ ì‚¬ì„¤ë§ ì„œë²„ì— êµ¬ì¶•í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì™€ ê°™ì€ í´ë¼ìš°ë“œ í™˜ê²½ì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ë”ë¼ë„ <strong>SSHë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì€ íšŒì‚¬ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì•„ì´í”¼ ëŒ€ì—­ì— ëŒ€í•´ì„œë§Œ í—ˆìš©</strong>í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p>
<p>ì§‘ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³µì¸ IPëŠ” íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•„ì´í”¼ ëŒ€ì—­ì´ ì•„ë‹ˆë¯€ë¡œ SSH ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— íšŒì‚¬ ì™¸ë¶€ì—ì„œë„ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•„ì´í”¼ ëŒ€ì—­ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” VPNì„ í™œìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì œê°€ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì—ì„œëŠ” <strong>TLS í”„ë¡œí† ì½œì„ ì ìš©í•˜ì—¬ í†µì‹ í•˜ëŠ” OpenVPNì„ ì‚¬ìš©</strong>í•˜ê³  ìˆìœ¼ë©° ì—¬ìì¹œêµ¬ê°€ ì¼í•˜ëŠ” íšŒì‚¬ì—ì„œëŠ” Pulse Secureì™€ í•¨ê»˜ <a href="https://vip.symantec.com/">VIP Access</a>ì„ ì‚¬ìš©í•˜ì—¬ 2ë‹¨ê³„ ì¸ì¦ê¹Œì§€ ìš”êµ¬í•˜ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì„ ë³´ì‹  ì—¬ëŸ¬ë¶„ë“¤ë„ ì¸í„°ë„· ì ‘ì†ì„ ìœ„í•´ í• ë‹¹ë°›ì€ ì™¸ë¶€ ì•„ì´í”¼ë¥¼ í™•ì¸í•´ë³´ê³  í•œêµ­ì¸í„°ë„·ì§„í¥ì›ì˜ WHOIS ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì–´ëŠ ì§€ì—­ê¹Œì§€ ì¶”ì ë˜ëŠ”ì§€ ê²½í—˜í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>IP Band</tag>
        <tag>NAT</tag>
        <tag>Location Tracking</tag>
      </tags>
  </entry>
  <entry>
    <title>ìë°” ë‚ ì§œ ë° ì‹œê°„ í¬ë§·</title>
    <url>/java-datetime-format/</url>
    <content><![CDATA[<p>ì—¬ëŸ¬ êµ­ê°€ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•´ì•¼í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ê°€ê²Œ ë˜ëŠ” ê²½ìš° ì–¸ì–´ ë¿ë§Œ ì•„ë‹ˆë¼ ì‹œê°„ì„ ë‹¤ë£¨ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‹¨ìˆœí•˜ê²Œ ë§í•´ì„œ í•œêµ­ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤ê³ í•´ì„œ í•œêµ­ ì‹œê°„ìœ¼ë¡œ ëª¨ë“  ì‹œê°„ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì€ ì¢‹ì€ ë°©ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” UTCë¼ê³  í•˜ëŠ” ì„¸ê³„ í˜‘ì • ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹œê°„ì„ ì €ì¥í•´ì•¼í•©ë‹ˆë‹¤. PostgreSQLê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œë„ Timestampë¥¼ ì €ì¥í•˜ê²Œ ë˜ëŠ” ê²½ìš° ë‚´ë¶€ì ìœ¼ë¡œëŠ” UTCë¡œ ì €ì¥ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, 2022ë…„ 3ì›” 19ì¼ 12ì‹œ ë¼ëŠ” ì‹œê°„ì€ <code>2022ë…„ 3ì›” 19ì¼ 03ì‹œ</code>ë¡œ ì €ì¥ë˜ëŠ”ê²ƒì´ì£ .</p>
<blockquote>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë¿ë§Œ ì•„ë‹ˆë¼ ì„œë²„ ê·¸ë¦¬ê³  ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë‘ UTCë¡œ ì„¤ì •í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ EC2ëŠ” í•œêµ­ ë¦¬ì „ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  í•œêµ­ ì‹œê°„ëŒ€ê°€ ì•„ë‹Œ UTCë¡œ ì„¤ì •ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ê·¸ë¦¬ê³  ì‹œê°„ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” <code>2022-03-19 12:00</code>ê³¼ ê°™ì€ ë¬¸ìì—´ í˜•íƒœê°€ ì•„ë‹Œ <a href="https://www.unixtimestamp.com/">Unix Timestamp</a>ì˜ ë°€ë¦¬ì´ˆê°€ ë¶€ì—¬ëœ ìƒíƒœë¡œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°„ ìš”ì²­ê³¼ ì‘ë‹µì— ì‚¬ìš©ë©ë‹ˆë‹¤. ê°€ë”ì”© êµ­ë‚´ ì‹œê°„ë§Œ ë‹¤ë£¨ë˜ ê°œë°œìë“¤ì´ UTC ë˜ëŠ” Unix Timestampì— ëŒ€í•´ì„œ ëª¨ë¥´ëŠ” ê²½ìš°ë„ ê½¤ ë§ì•˜ìŠµë‹ˆë‹¤. ë°€ë¦¬ì´ˆ í˜•ì‹ì˜ Unix Timestampë¥¼ ì „ë‹¬ë°›ì•˜ìœ¼ë‚˜ ì‹¤ì œë¡œ ë³€í™˜í•´ë³´ë‹ˆ 9ì‹œê°„ì´ ë¹ ì§„ê²Œ ì•„ë‹ˆë¼ ì˜¤íˆë ¤ 9ì‹œê°„ì´ ë”í•´ì§„ ìƒíƒœë¡œ ì „ë‹¬í•˜ë˜ ê²½í—˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="Java-Date-Format"><a href="#Java-Date-Format" class="headerlink" title="Java Date Format"></a>Java Date Format</h2><p>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì— ì‹œê°„ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ê°œë°œì ì‚¬ì´ì— APIë¥¼ ì œê³µí•  ë•Œì—ëŠ” ì•ì„œ ì´ì•¼ê¸°í•œ Unix Timestampë¡œ ì „ë‹¬í•˜ë„ë¡ ìŠ¤í™ì„ ë§ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê°œë°œìê°€ ì•„ë‹Œ ì¼ë°˜ ì‚¬ìš©ìê°€ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ CSV ë˜ëŠ” ì—‘ì…€ íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ë‹¤ìš´ë¡œë“œ ë°›ì„ë•Œì—ëŠ” ìˆ«ìê°’ì¸ Unix Timestampê°€ ì•„ë‹Œ <code>2022-03-19 12:00:00</code>ê³¼ ê°™ì€ ì–´ë– í•œ ë¬¸ì í˜•íƒœì´ì–´ì•¼í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì¼ë°˜ì¸ë“¤ì€ UTCê°€ ë¬´ì—‡ì¸ì§€ Unix Timestampê°€ ë¬´ì—‡ì¸ì§€ ëª¨ë¥´ëŠ” ì‚¬ëŒì´ ë§ìœ¼ë‹ˆê¹Œìš”. ì‹¬ì§€ì–´ëŠ” ê°œë°œìë“¤ ì¤‘ì—ì„œë„â€¦</p>
<blockquote>
<p>ìë°” 8ì˜ Date&#x2F;Time APIì— ëŒ€í•´ì„œëŠ” ë„¤ì´ë²„ D2ì— ê³µìœ ëœ <a href="%5Bhttps://d2.naver.com/helloworld/645609">Javaì˜ ë‚ ì§œì™€ ì‹œê°„ API</a>ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="DateTimeFormatter"><a href="#DateTimeFormatter" class="headerlink" title="DateTimeFormatter"></a>DateTimeFormatter</h3><p>ìë°” 8ì˜ ë‚ ì§œ ë° ì‹œê°„ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œ ë‚ ì§œ í¬ë§·ì„ ì ìš©í•´ì•¼í•˜ëŠ” ê²½ìš° <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">DateTimeFormatter</a>ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¡œ ë‚ ì§œ ë°ì´í„°ë¥¼ ë³€í™˜í•  ìˆ˜ ìˆì£ .</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">TimeZone</span> tzSeoul <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"Asia/Seoul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2022-03-19 12:00:00"</span><span class="token punctuation">;</span>
<span class="token class-name">DateTimeFormatter</span> dateTimeFormatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZone</span><span class="token punctuation">(</span>tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> dateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s -> %s%n"</span><span class="token punctuation">,</span> dateStr<span class="token punctuation">,</span> dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<blockquote>
<p>ìœ„ ì½”ë“œëŠ” ì´í•´í•˜ê¸°ì—ëŠ” ì‰¬ìš°ë‚˜ í•œê°€ì§€ ë¬¸ì œì ì€ ì–´ë–¤ íŠ¹ì •í•œ í˜•íƒœì˜ ë¬¸ìì—´ë¡œ êµ¬ì„±ëœ ë°ì´í„°ë§Œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ë§Œì•½, ì„œë¹„ìŠ¤ ì‚¬ìš©ìê°€ 2022ë…„ 3ì›” 19ì¼ 0ì‹œì˜ ì‹œê°„ì„ í‘œí˜„í•˜ê³ ì í•œë‹¤ë©´ 2022-03-19 00:00:00ê³¼ ê°™ì´ ë¶ˆí•„ìš”í•˜ê²Œ 00:00:00ì„ ë¶™ì—¬ì•¼í•˜ëŠ” ë‹¨ì ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ í˜•ì‹ì˜ ë‚ ì§œ í¬ë§·ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<h3 id="DateTimeFormatterBuilder"><a href="#DateTimeFormatterBuilder" class="headerlink" title="DateTimeFormatterBuilder"></a>DateTimeFormatterBuilder</h3><p>ì—¬ëŸ¬ê°€ì§€ í˜•íƒœì˜ ë‚ ì§œ í˜•ì‹ì„ ì§€ì›í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” <strong>Optional íŒ¨í„´</strong>ì„ ì ìš©í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DateTimeFormatterì— ê·¸ëŒ€ë¡œ ì ìš©í• ìˆ˜ë„ ìˆìœ¼ë‚˜ DateTimeFormatterBuilderë¥¼ í†µí•´ ì—¬ëŸ¬ê°€ì§€ ì²˜ë¦¬ ë°©ì‹ì— ëŒ€í•œ ì˜µì…˜ì´ ì ìš©ëœ í˜•íƒœë¡œ DateTimeFormatterë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">TimeZone</span> tzSeoul <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"Asia/Seoul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DateTimeFormatter</span> dateTimeFormatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTimeFormatterBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">appendPattern</span><span class="token punctuation">(</span><span class="token string">"[yyyy-MM-dd HH:mm:ss]"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">appendPattern</span><span class="token punctuation">(</span><span class="token string">"[yyyy-MM-dd HH:mm]"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">appendPattern</span><span class="token punctuation">(</span><span class="token string">"[yyyy-MM-dd]"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">parseDefaulting</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span><span class="token constant">HOUR_OF_DAY</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">parseDefaulting</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span><span class="token constant">MINUTE_OF_HOUR</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">parseDefaulting</span><span class="token punctuation">(</span><span class="token class-name">ChronoField</span><span class="token punctuation">.</span><span class="token constant">SECOND_OF_MINUTE</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withZone</span><span class="token punctuation">(</span>tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dateStrArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"2022-03-19 00:00:00"</span><span class="token punctuation">,</span> <span class="token string">"2022-03-19 00:00"</span><span class="token punctuation">,</span> <span class="token string">"2022-03-19"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> dateStr <span class="token operator">:</span> dateStrArr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">ZonedDateTime</span> dateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s -> %s%n"</span><span class="token punctuation">,</span> dateStr<span class="token punctuation">,</span> dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 2022-03-19 00:00:00 -> 2022-03-19T00:00+09:00[Asia/Seoul]</span>
<span class="token comment">// 2022-03-19 00:00 -> 2022-03-19T00:00+09:00[Asia/Seoul]</span>
<span class="token comment">// 2022-03-19 -> 2022-03-19T00:00+09:00[Asia/Seoul]</span></code></pre>

<h4 id="Unable-to-obtain-LocalTime-from-TemporalAccessor"><a href="#Unable-to-obtain-LocalTime-from-TemporalAccessor" class="headerlink" title="Unable to obtain LocalTime from TemporalAccessor"></a>Unable to obtain LocalTime from TemporalAccessor</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">TimeZone</span> tzSeoul <span class="token operator">=</span> <span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"Asia/Seoul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DateTimeFormatter</span> dateTimeFormatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"[yyyy-MM-dd HH:mm:ss][yyyy-MM-dd HH:mm][yyyy-MM-dd]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZone</span><span class="token punctuation">(</span>tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dateStrArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"2022-03-19 00:00:00"</span><span class="token punctuation">,</span> <span class="token string">"2022-03-19 00:00"</span><span class="token punctuation">,</span> <span class="token string">"2022-03-19"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> dateStr <span class="token operator">:</span> dateStrArr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">ZonedDateTime</span> dateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s -> %s%n"</span><span class="token punctuation">,</span> dateStr<span class="token punctuation">,</span> dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ì™€ ê°™ì´ DateTimeFormatterBuilderë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ì„œë„ DateTimeFormatter íŒ¨í„´ ìì²´ë¡œ ë‚ ì§œ í¬ë§· ì²´ì´ë‹ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, 2022-03-19ì™€ ê°™ì´ ì‹œê°„ ë¶€ë¶„ì´ ì—†ëŠ” í˜•íƒœì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeParseException</span><span class="token operator">:</span> <span class="token class-name">Text</span> '<span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span>' could not be parsed<span class="token operator">:</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">obtain</span> <span class="token class-name">ZonedDateTime</span> from <span class="token class-name">TemporalAccessor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">ISO</span><span class="token punctuation">,</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Seoul</span> resolved <span class="token keyword">to</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span> of type <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">createError</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">2017</span><span class="token punctuation">)</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1952</span><span class="token punctuation">)</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">598</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">test<span class="token punctuation">.</span></span>Main</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>DateTimeException</span><span class="token operator">:</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">obtain</span> <span class="token class-name">ZonedDateTime</span> from <span class="token class-name">TemporalAccessor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">ISO</span><span class="token punctuation">,</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Seoul</span> resolved <span class="token keyword">to</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span> of type <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">566</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>DateTimeException</span><span class="token operator">:</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">obtain</span> <span class="token class-name">ZonedDateTime</span> from <span class="token class-name">TemporalAccessor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">ISO</span><span class="token punctuation">,</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Seoul</span> resolved <span class="token keyword">to</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span> of type <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span>

	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Parsed</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">235</span><span class="token punctuation">)</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1948</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">2</span> more
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>DateTimeException</span><span class="token operator">:</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">obtain</span> <span class="token class-name">LocalTime</span> from <span class="token class-name">TemporalAccessor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">ISO</span><span class="token punctuation">,</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Seoul</span> resolved <span class="token keyword">to</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span> of type <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>DateTimeException</span><span class="token operator">:</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">obtain</span> <span class="token class-name">LocalTime</span> from <span class="token class-name">TemporalAccessor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token constant">ISO</span><span class="token punctuation">,</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Seoul</span> resolved <span class="token keyword">to</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">19</span> of type <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span>Parsed</span>

	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>LocalTime</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">LocalTime</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">431</span><span class="token punctuation">)</span>
	at java<span class="token punctuation">.</span>base<span class="token operator">/</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">561</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">4</span> more</code></pre>

<blockquote>
<p>ë”°ë¼ì„œ, DateTimeFormatterBuilderë¡œ ë¬¸ìì—´ë¡œ êµ¬ì„±ëœ ë‚ ì§œ ë° ì‹œê°„ ë°ì´í„°ì— êµ¬ì„±ë˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì˜µì…˜ì„ ì ìš©í•˜ì—¬ DateTimeFormatterë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ì•„ë³´ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ë§Œì•½, ì´ ê¸€ì„ ë³´ì‹œëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ ì—¬ëŸ¬ê°€ì§€ í˜•íƒœì˜ ë‚ ì§œ í¬ë§·ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ DateTimeFormattterë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤ë©´ DateTimeFormatterBuilderë¡œ í•˜ë‚˜ì˜ DateTimeFormatterë¥¼ ì‚¬ìš©í•´ì„œ ì¢€ ë” ê¹”ë”í•œ í˜•íƒœì˜ ì½”ë“œë¡œ ë§Œë“¤ì–´ë³´ì‹œê¸°ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2022-03-19"</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> dateTime <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    dateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZone</span><span class="token punctuation">(</span>tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DateTimeException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withZone</span><span class="token punctuation">(</span>tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">atStartOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dateTime <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> tzSeoul<span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>TimeZone</tag>
        <tag>ZoneId</tag>
        <tag>Instant</tag>
        <tag>ZonedDateTime</tag>
        <tag>DateTimeFormatter</tag>
      </tags>
  </entry>
  <entry>
    <title>ì  í‚¨ìŠ¤ ì—ì´ì „íŠ¸ (Feat. ë¹Œë“œ í™˜ê²½)</title>
    <url>/jenkins-agent/</url>
    <content><![CDATA[<p>í˜„ì¬ íšŒì‚¬ì˜ ê°œë°œ ì¡°ì§ì—ì„œëŠ” í•˜ë‚˜ì˜ ëª¨ë†€ë¦¬ì‹ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ì–‘í•œ í™˜ê²½ì„ ìœ„í•´ì„œ ë¹Œë“œ ë° ë°°í¬í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ë¹Œë“œì™€ ë°°í¬ë¥¼ ìœ„í•´ì„œ í•˜ë‚˜ì˜ ë§ˆìŠ¤í„°ë¡œ ë™ì‘í•˜ëŠ” ì  í‚¨ìŠ¤ ì„œë²„ë¥¼ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆê³  í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•´ë„ ë¬´ë°©í•  ë§Œí¼ ì„œë¹„ìŠ¤ ê·œëª¨ê°€ í¬ê±°ë‚˜ ì‹œìŠ¤í…œì— ëŒ€í•œ ë°°í¬ê°€ ìì£¼ ìˆ˜í–‰ë˜ì§„ ì•Šê¸°ì— ë‹¨ì¼ ë¹Œë“œ ì„œë²„ë¡œ ìš´ìš©í•´ë„ ì¶©ë¶„í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê°œì¸ì ìœ¼ë¡œëŠ” ì¸í„°ë„·ì— ê³µìœ ëœ ê¸€ë“¤ì„ í†µí•´ ëŒ€ë¶€ë¶„ì˜ íšŒì‚¬ì—ì„œëŠ” í”„ë¡œë•ì…˜ì„ ìœ„í•œ ë¹Œë“œ í™˜ê²½ì„ ìœ„í•´ ë‹¤ì–‘í•œ CI&#x2F;CD ë„êµ¬ë“¤ì„ í™œìš©í•˜ê¸°ë„ í•˜ê³  ì  í‚¨ìŠ¤ ì„œë²„ì— ëŒ€í•´ ì»¨íŠ¸ë¡¤ëŸ¬(ë§ˆìŠ¤í„°)ì™€ ì—ì´ì „íŠ¸(ìŠ¬ë ˆì´ë¸Œ)ë¡œ êµ¬ì„±ë˜ëŠ” í´ëŸ¬ìŠ¤í„°(ë¶„ì‚° ë¹Œë“œ í™˜ê²½)ìœ¼ë¡œ êµ¬ì„±í•œë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆì—ˆë‹¤. </p>
<p>ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì—ì´ì „íŠ¸ë¡œ ë™ì‘í•˜ëŠ” ë¹Œë“œ í™˜ê²½ì„ ë§Œë“¤ì–´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ í•„ìš”í•˜ê²Œ ëœ ê±´ ë¶„ì‚° ë¹Œë“œì˜ ëª©ì ë³´ë‹¤ëŠ” ì  í‚¨ìŠ¤ ì„œë²„ê°€ Amazon Linux 2 AMI ì´ë¯¸ì§€ë¡œ ì‹¤í–‰ëœ EC2 ì„œë²„ì— ì„¤ì¹˜ë˜ì—ˆê¸° ë•Œë¬¸ì— <a href="https://okky.kr/articles/1451364">Node.js 18 LTS ë²„ì „ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì œì•½ì‚¬í•­</a>ì´ ë°œìƒí–ˆê¸° ë•Œë¬¸ì´ë‹¤. ì¼ë¶€ í™˜ê²½ì— ëŒ€í•´ì„œ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ í’ˆì§ˆ ê°•í™”ë¥¼ ìœ„í•´ì„œ Jestë¥¼ ë„ì…í•˜ê²Œ ë˜ë©´ì„œ Node.js 12 ë˜ëŠ” 14 LTSì— ì˜ì¡´í–ˆë˜ ê²ƒì„ Node.js 18 LTSë¡œ í˜¸í™˜ì„± ë²„ì „ì„ ì˜¬ë¦¬ê³ ì í–ˆê¸° ë•Œë¬¸ì´ë‹¤. (Node.js 16 ë˜ëŠ” 18 LTS ë²„ì „ì„ í˜¸í™˜ì„± ë²”ìœ„ë¡œ ì²´í¬í–ˆë‹¤.)</p>
<blockquote>
<p>Node.js 14ë„ í˜¸í™˜ì„± ë²„ì „ í›„ë³´ì— ìˆìœ¼ë‚˜ ARM ì•„í‚¤í…ì²˜ë¡œ ë™ì‘í•˜ëŠ” M1 ë˜ëŠ” M2 ë§¥ í™˜ê²½ì—ì„œ Node.js 14 LTSëŠ” ê³µì‹ ë¹Œë“œê°€ í¬í•¨ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— <a href="https://devzilla.io/using-nodejs-14-with-mac-silicon-m1">Using NodeJs 14 with Mac Silicon (M1)</a>ì™€ ê°™ì€ ì •ë³´ë“¤ì„ ì°¸ê³ í•´ì„œ í„°ë¯¸ë„ì´ AMD 64 ì•„í‚¤í…ì²˜ë¡œ ë™ì‘í•˜ë„ë¡ ë³€ê²½í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì— ì˜í•´ ì œì™¸ì‹œì¼°ë‹¤.</p>
</blockquote>
<p>ì  í‚¨ìŠ¤ ì„œë²„ë¥¼ Amzon Linux 2023 ë˜ëŠ” Ubuntu 20.24 ì´ìƒì˜ EC2 ì„œë²„ë¡œ ì´ê´€í•˜ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ ì  í‚¨ìŠ¤ ì„œë²„ë¥¼ <a href="https://endoflife.date/amazon-linux">ì§€ì› ì¢…ë£Œë˜ëŠ” AL1</a>ì—ì„œ Amazon Linux 2ë¡œ ì´ê´€í•œ ì§€ ì–¼ë§ˆë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ì—ê²Œ ìš”ì²­í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. êµ³ì´ ì  í‚¨ìŠ¤ ì„œë²„ë¥¼ ìƒˆë¡œìš´ EC2 ì„œë²„ë¡œ ì¬êµ¬ì„±í•˜ê±°ë‚˜ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì‚° ë¹Œë“œ í™˜ê²½ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì—ì´ì „íŠ¸(ë…¸ë“œë‚˜ í´ë¼ìš°ë“œ) ê¸°ëŠ¥ìœ¼ë¡œ ë³„ë„ì˜ ì„œë²„ë‚˜ ì»¨í…Œì´ë„ˆì—ì„œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ ì‹œë„í•˜ê³ ì í•œë‹¤.</p>
<blockquote>
<p>ì  í‚¨ìŠ¤ ë¶„ì‚° ë¹Œë“œ í™˜ê²½ì„ êµ¬ì„±í•´ë³´ëŠ” ê²ƒì€ ì¢‹ì€ ê²½í—˜ì´ì—ˆë‹¤ê³  ìƒê°ë˜ë‚˜ ë³„ë„ì˜ ì„œë²„ì—ì„œ í”„ë¡œì íŠ¸ ë¹Œë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê¸° ê¹Œì§€ ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ë¹Œë“œì— ì„±ê³µí•˜ê¸°ê¹Œì§€ì˜ ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë“¤ì„ ê¸°ë¡í•´ë³´ê³ ì í•œë‹¤.</p>
</blockquote>
<h4 id="ì  í‚¨ìŠ¤-ê´€ë¦¬-gt-Nodes-and-Clouds"><a href="#ì  í‚¨ìŠ¤-ê´€ë¦¬-gt-Nodes-and-Clouds" class="headerlink" title="ì  í‚¨ìŠ¤ ê´€ë¦¬ &gt; Nodes and Clouds"></a>ì  í‚¨ìŠ¤ ê´€ë¦¬ &gt; Nodes and Clouds</h4><p><img data-src="/../images/posts/jenkins-agent/01.png"></p>
<p>ë¶„ì‚° ë¹Œë“œ í™˜ê²½ì˜ ì  í‚¨ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì€ ì  í‚¨ìŠ¤ ê´€ë¦¬ì—ì„œ Nodes and Clouds ë©”ë‰´ë¥¼ í†µí•´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì—ì´ì „íŠ¸ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ë…¸ë“œëŠ” ë¦¬ëˆ…ìŠ¤ ì„œë²„ ë˜ëŠ” VM ë¨¸ì‹ ì—ì„œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ê³  í´ë¼ìš°ë“œëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆ ë˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ ê°™ì€ í™˜ê²½ìœ¼ë¡œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ì  í‚¨ìŠ¤ ì„œë²„ê°€ EC2ì— ì„¤ì¹˜ë˜ì–´ìˆë‹¤ê³  í•˜ë”ë¼ë„ EC2ì— ë„ì»¤ ì—”ì§„ê³¼ ì»¨í…Œì´ë„ˆê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ë©´ ë„ì»¤ ì—”ì§„ì˜ ìœ ë‹‰ìŠ¤ ë„ë©”ì¸ ì†Œì¼“ì„ í†µí•´ í´ë¼ìš°ë“œ ì—ì´ì „íŠ¸ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.</p>
<p>ë…¸ë“œ ì—ì´ì „íŠ¸ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ë²•ì—ëŠ” ì  í‚¨ìŠ¤ ì„œë²„ì—ì„œ SSHì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒê³¼ ë³„ë„ì˜ ìœˆë„ìš°ë‚˜ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì™€ ê°™ì€ ê³³ì—ì„œ ì‹¤í–‰ëœ ë…¸ë“œ ì—ì´ì „íŠ¸ê°€ ì  í‚¨ìŠ¤ ì„œë²„ì— íŠ¹ì • í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²°ì„ ìš”êµ¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§„ë‹¤. ì  í‚¨ìŠ¤ ì„œë²„ì— Elastic IPê°€ í• ë‹¹ë˜ì–´ìˆìœ¼ë¯€ë¡œ êµ³ì´ VPC ê°„ ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì‘ì—…ì„ í•˜ì§€ ì•Šë”ë¼ë„ ë…¸ë“œ ì—ì´ì „íŠ¸ì—ì„œ ì  í‚¨ìŠ¤ ì„œë²„ì— TCP ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì¸ë°”ìš´ë“œ ê·œì¹™ë§Œ ì„¤ì •í•˜ë©´ ë˜ëŠ” ê°„ë‹¨í•œ ë°©ì‹ì´ë¼ í›„ìë¥¼ ì„ íƒí–ˆë‹¤. ë…¸ë“œ ì—ì´ì „íŠ¸ê°€ ì‹¤í–‰ë  ì„œë²„ëŠ” ì˜¤ë¥˜ íŠ¸ë˜í‚¹ ì‹œìŠ¤í…œì´ êµ¬ë™ë˜ëŠ” ì„œë²„ë¡œ ë¯¸ë‹¬ í”„ë¡œë¹„ì €ë‹ ìƒíƒœë¡œ ë³´ê³ ëœ EC2(Amazon Linux 2023ìœ¼ë¡œ ì‹¤í–‰ëœ ìœ ì¼í•œ EC2)ë¥¼ ë…¸ë“œë¡œ ì¶”ê°€í•˜ê¸°ë¡œ í–ˆë‹¤.</p>
<h5 id="Launch-method-â†’-Launch-agent-by-connecting-it-to-the-controller"><a href="#Launch-method-â†’-Launch-agent-by-connecting-it-to-the-controller" class="headerlink" title="Launch method â†’ Launch agent by connecting it to the controller"></a>Launch method â†’ Launch agent by connecting it to the controller</h5><p><img data-src="/../images/posts/jenkins-agent/02.png"></p>
<p>ìë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ë…¸ë“œ ì—ì´ì „íŠ¸ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬(ë§ˆìŠ¤í„°)ì— ì—°ê²°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë…¸ë“œ ì—ì´ì „íŠ¸ì—ì„œ ì  í‚¨ìŠ¤ ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” TCP í¬íŠ¸ë¥¼ ìš”êµ¬í•˜ë¯€ë¡œ ì  í‚¨ìŠ¤ ê´€ë¦¬ &gt; Security ë©”ë‰´ì˜ Agents í•­ëª©ì—ì„œ TCP port for inbound agentsì— ëŒ€í•œ ì„¤ì •ì„ Fixedë¡œ ì„ íƒí•˜ì—¬ 50000ë²ˆ í¬íŠ¸ë¡œ ì…ë ¥í–ˆë‹¤. ì  í‚¨ìŠ¤ ì„œë²„ì—ì„œ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ë©´ ì  í‚¨ìŠ¤ ì„œë²„ë¡œ ë¶€í„° ìë°” ì—ì´ì „íŠ¸ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ê°€ì§€ ëª…ë ¹ì–´ë¥¼ ì œê³µí•´ì¤€ë‹¤. ë…¸ë“œ ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•˜ë ¤ëŠ” í™˜ê²½ì— ë§ê²Œ ë³µì‚¬í•´ì„œ í˜¸ì¶œí•˜ë©´ ëœë‹¤.</p>
<p><img data-src="/../images/posts/jenkins-agent/03.png"></p>
<blockquote>
<p>ì  í‚¨ìŠ¤ ì„œë²„ì— ìë°” ì—ì´ì „íŠ¸ê°€ ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ ë³´ì•ˆ ê·¸ë£¹ì— TCP 50000ë²ˆ í¬íŠ¸ë¥¼ ì¸ë°”ìš´ë“œ ê·œì¹™ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•œë‹¤. ë˜í•œ, ì¼ë°˜ì ìœ¼ë¡œ ë…¸ë“œ ì—ì´ì „íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” í¬íŠ¸ê°€ 50000ë²ˆì„ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆê¸°ì— ë³´ì•ˆì ì¸ ê´€ì ì„ ë‘ì–´ì•¼í•œë‹¤ë©´ ë³„ë„ì˜ í¬íŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.</p>
</blockquote>
<h5 id="Usage-â†’-Only-build-jobs-with-label-expressions-matching-this-node"><a href="#Usage-â†’-Only-build-jobs-with-label-expressions-matching-this-node" class="headerlink" title="Usage â†’ Only build jobs with label expressions matching this node"></a>Usage â†’ Only build jobs with label expressions matching this node</h5><p><img data-src="/../images/posts/jenkins-agent/04.png"></p>
<p>ë…¸ë“œ ì—ì´ì „íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ” ë¶„ì‚° ë¹Œë“œì˜ ëª©ì ì´ ì•„ë‹Œ Node.js 18 LTSë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë¹Œë“œí•˜ì—¬ ë°°í¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ê³ ì í•¨ì— ìˆìœ¼ë¯€ë¡œ ê¸°ì¡´ì— ë™ì‘í•˜ë˜ í”„ë¡œì íŠ¸ë“¤ì€ ê·¸ëŒ€ë¡œ ì  í‚¨ìŠ¤ ì„œë²„ì—ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ íŠ¹ì • í”„ë¡œì íŠ¸ì—ì„œ ë³„ë„ë¡œ ë¼ë²¨ì„ ì§€ì •í•˜ì—¬ì•¼ë§Œ í•´ë‹¹ ë…¸ë“œë¥¼ í†µí•´ ë¹Œë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤. ì  í‚¨ìŠ¤ ì„œë²„ì— ë…¸ë“œ ì—ì´ì „íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì—ì„œë„ ì¼ë¶€ í”„ë¡œì íŠ¸ê°€ ë¹Œë“œë  ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë¯€ë¡œ ì˜ëª»ëœ í™˜ê²½ì—ì„œ ë¹Œë“œë˜ì–´ ë°°í¬ë˜ëŠ” ê²ƒì„ ë§‰ê³ ìí•˜ëŠ” ìµœì†Œí•œì˜ ì¡°ì¹˜ì´ë‹¤.</p>
<h4 id="Clouds-gt-Docker-Cloud-details"><a href="#Clouds-gt-Docker-Cloud-details" class="headerlink" title="Clouds &gt; Docker Cloud details"></a>Clouds &gt; Docker Cloud details</h4><p>ë…¸ë“œê°€ ì•„ë‹Œ ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ê²½ìš° í´ë¼ìš°ë“œë¥¼ í†µí•´ ë„ì»¤ ì—ì´ì „íŠ¸ë¥¼ ë“±ë¡í•˜ë©´ ëœë‹¤. ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´ ì  í‚¨ìŠ¤ ì„œë²„ ë‚´ì— ì„¤ì¹˜í•œ ë„ì»¤ ì—”ì§„ì— ì—°ê²°í•˜ê³ ì í•˜ëŠ” ê²½ìš° ìœ ë‹‰ìŠ¤ ë„ë©”ì¸ ì†Œì¼“ ë°©ì‹ì˜ unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sockì„ ì§€ì •í•˜ë©´ ë˜ë©° ë³„ë„ì˜ ì„œë²„ì˜ ë„ì»¤ ì—”ì§„ì— ì—°ê²°í•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ ì„œë²„ì—ì„œ ë„ì»¤ ì—”ì§„ì„ ì‹¤í–‰í•  ë•Œ TCP ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ì„œë¹„ìŠ¤ë¥¼ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼í•œë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /lib/systemd/system/docker.service
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd <span class="token parameter variable">-H</span> tcp://0.0.0.0:2375 <span class="token parameter variable">-H</span> unix:///var/run/docker.sock

<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> restart

<span class="token function">curl</span> http://localhost:2375/version</code></pre>

<blockquote>
<p>ë§Œì•½, ë¦¬ëˆ…ìŠ¤ ì„œë²„ê°€ ì•„ë‹Œ ìœˆë„ìš° ë˜ëŠ” ë§¥ í™˜ê²½ì˜ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì—ì„œëŠ” TCP ì—°ê²°ì„ í™œì„±í™”í•  ë°©ë²•ì´ ì—†ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ë³„ë„ì˜ ë°©ë²•ì„ ì°¾ì•„ë³´ì•„ì•¼ í•œë‹¤. ë§¥ì˜ ê²½ìš° <a href="https://github.com/docker/for-mac/issues/1156#issuecomment-273764881">socatì„ í†µí•´ TCPì™€ ìœ ë‹‰ìŠ¤ ë„ë©”ì¸ ì†Œì¼“ì„ ì—°ê²°í•˜ëŠ” ìš°íšŒ ë°©ë²•</a>ì´ ìˆëŠ” ê²ƒ ê°™ë‹¤.</p>
</blockquote>
<h5 id="ë„ì»¤-ì—ì´ì „íŠ¸-ì´ë¯¸ì§€-Optional"><a href="#ë„ì»¤-ì—ì´ì „íŠ¸-ì´ë¯¸ì§€-Optional" class="headerlink" title="ë„ì»¤ ì—ì´ì „íŠ¸ ì´ë¯¸ì§€ (Optional)"></a>ë„ì»¤ ì—ì´ì „íŠ¸ ì´ë¯¸ì§€ (Optional)</h5><p>ì²˜ìŒì—ëŠ” ë„ì»¤ ì—ì´ì „íŠ¸ë¥¼ ì¶”ê°€í•˜ê³ ë‚˜ì„œ ì—ì´ì „íŠ¸ í…œí”Œë¦¿ì„ ë“±ë¡í•˜ëŠ” ê³¼ì •ì—ì„œ ì—ì´ì „íŠ¸ ì´ë¯¸ì§€ë¥¼ <a href="https://github.com/jenkinsci/docker-agent">jenkins&#x2F;agent</a>ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í–ˆìœ¼ë‚˜ ì‹¤ì œë¡œ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ë ¤ëŠ” ê³¼ì •ì—ì„œ ì¼ë¶€ íŒ¨í‚¤ì§€ê°€ ì—†ì–´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•¨ì— ë”°ë¼ jenkins&#x2F;agent:jdk17ë¥¼ ë² ì´ìŠ¤ë¡œ í•˜ì—¬ ë³„ë„ì˜ ì—ì´ì „íŠ¸ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•´ì•¼í–ˆë‹¤.</p>
<pre class="language-docker" data-language="docker"><div class="caption"><span>Dockerfile</span></div><code class="language-docker"><span class="token instruction"><span class="token keyword">FROM</span> jenkins/agent:jdk17</span>
<span class="token instruction"><span class="token keyword">USER</span> root</span>
<span class="token instruction"><span class="token keyword">RUN</span> apt-get update <span class="token operator">\</span>
 &amp;&amp; apt-get install build-essential python3 -y</span>
<span class="token instruction"><span class="token keyword">USER</span> jenkins</span></code></pre>

<blockquote>
<p>ìœ„ ì´ë¯¸ì§€ëŠ” ì‚¬ìš©ì¤‘ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë”°ë¼ g++ ë˜ëŠ” python3 ë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì¶”ê°€í•œ ê²ƒìœ¼ë¡œ ì¡°ì§ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë„ì»¤ í—ˆë¸Œ ê³„ì •ì˜ í¼ë¸”ë¦­ ë¦¬íŒŒì§€í† ë¦¬ì— ì˜¬ë ¸ìœ¼ë©° í”„ë¼ì´ë¹— í™˜ê²½ì´ë¼ë©´ Registry Authentication ì„¤ì •ì´ ìš”êµ¬ëœë‹¤.</p>
</blockquote>
<h4 id="ì  í‚¨ìŠ¤-ê´€ë¦¬-gt-Security-gt-Git-Host-Key-Verification-configuration"><a href="#ì  í‚¨ìŠ¤-ê´€ë¦¬-gt-Security-gt-Git-Host-Key-Verification-configuration" class="headerlink" title="ì  í‚¨ìŠ¤ ê´€ë¦¬ &gt; Security &gt; Git Host Key Verification configuration"></a>ì  í‚¨ìŠ¤ ê´€ë¦¬ &gt; Security &gt; Git Host Key Verification configuration</h4><p><img data-src="/../images/posts/jenkins-agent/05.png"></p>
<p>í”„ë¡œì íŠ¸ì—ì„œ ë¹Œë“œí•  ì†ŒìŠ¤ì½”ë“œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ê¹ƒì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° <a href="https://plugins.jenkins.io/git-client/#plugin-content-ssh-host-key-verification">SSH Host Key verification</a>ì˜ Host Key Verification Strategyê°€ Known hosts fileì´ ê¸°ë³¸ê°’ì¸ ê´€ê³„ë¡œ ìŠ¬ë ˆì´ë¸Œ ë…¸ë“œ ì—ì´ì „íŠ¸ë‚˜ í´ë¼ìš°ë“œë¡œ ì¶”ê°€í•œ ë„ì»¤ ì—ì´ì „íŠ¸ì—ì„œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° <code>No ECDSA host key is known for github.com and you have requested strict checking. Host key verification failed.</code> ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> ls-remote <span class="token parameter variable">-h</span> git@github.com:<span class="token punctuation">[</span>user<span class="token punctuation">]</span>/<span class="token punctuation">[</span>project<span class="token punctuation">]</span>.git HEAD</code></pre>

<p>ë…¸ë“œ ë¨¸ì‹ ì´ë‚˜ ë„ì»¤ ì—ì´ì „íŠ¸ë¡œ ì‹¤í–‰ë˜ëŠ” ì»¨í…Œì´ë„ˆì— ~&#x2F;.ssh&#x2F;known_hosts íŒŒì¼ì´ ì—†ê¸° ë•Œë¬¸ì´ë©° ìœ„ì™€ ê°™ì´ ê¹ƒí—ˆë¸Œ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ì§€ë¬¸ì„ ìµœì†Œí•œ í•œë²ˆì´ë¼ë„ ì¶”ê°€í•˜ì—¬ known_hosts íŒŒì¼ì„ ë§Œë“œëŠ” ê²ƒì´ ìš”êµ¬ë  ìˆ˜ ìˆë‹¤. ë§Œì•½, ë„ì»¤ ì—ì´ì „íŠ¸ì—ì„œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“œëŠ” ê²½ìš° ìœ„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ê¸°ì— ë„ì»¤ ì—ì´ì „íŠ¸ë¡œ ì—°ê²°ë˜ëŠ” ì„œë²„ì—ì„œ ìœ„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œ í›„ ë§ˆìš´íŠ¸ ì˜µì…˜ì„ í†µí•´ known_hosts íŒŒì¼ì„ ì „ë‹¬í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒë„ ë°©ë²•ì´ë‹¤.</p>
<h5 id="Container-settings-gt-Mounts"><a href="#Container-settings-gt-Mounts" class="headerlink" title="Container settings &gt; Mounts"></a>Container settings &gt; Mounts</h5><p><img data-src="/../images/posts/jenkins-agent/06.png"></p>
<p>ìœ„ì™€ ê°™ì´ Docker Agent Templatesë¥¼ ë“±ë¡í•˜ëŠ” ì„¤ì •ì—ì„œ Container settings &gt; Mounts ì˜µì…˜ì„ í†µí•´ ìœ„ ëª…ë ¹ì–´ë¡œ ë§Œë“¤ì–´ì§„ known_hosts íŒŒì¼ì„ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ <code>type=bind,src=/home/ec2-user/.ssh,dst=/home/jenkins/.ssh</code>ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì…ë ¥í•˜ë©´ ëœë‹¤.</p>
<p>ì  í‚¨ìŠ¤ ì„œë²„ì˜ ë¶„ì‚° ë¹Œë“œ í™˜ê²½ êµ¬ì„±ì— ëŒ€í•œ íŠœí† ë¦¬ì–¼ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ìƒëµí•œ ì •ë³´ê°€ ë§ì„ ìˆ˜ ìˆì§€ë§Œ ì¼ë¶€ì˜ ë‚´ìš©ë§Œìœ¼ë¡œë„ ë„ì›€ì´ ë˜ê¸°ë¥¼ ë°”ë˜ë³¸ë‹¤.</p>
]]></content>
      <tags>
        <tag>Node</tag>
        <tag>Cloud</tag>
      </tags>
  </entry>
  <entry>
    <title>ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬</title>
    <url>/quartz/</url>
    <content><![CDATA[<blockquote>
<p>ì˜ˆì œ ì½”ë“œ : <a href="https://github.com/kdevkr/spring-demo-quartz">kdevkr&#x2F;spring-demo-quartz</a></p>
</blockquote>
<p>ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ì¸ ê°œë°œìëŠ” ë°˜ë³µì ìœ¼ë¡œ ì •í•´ì§„ ì‹œê°„ì— ìˆ˜í–‰ë˜ì–´ì•¼í•  ì‘ì—…ì„ ì˜ˆì•½í•´ë‘ëŠ” ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì„ ìì£¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” í¸ì´ë‹¤. ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œëŠ” ë°°ì‹œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ í¬ë¡ íƒ­(crontab)ì— ë“±ë¡í•˜ì—¬ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ë©° ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì„ í™œìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•„ìš”í•œ ë°˜ë³µì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„í•˜ê²Œ ëœë‹¤. ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë¯€ë¡œ ë°˜ë³µì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ìŠ¤ì¼€ì¤„ ê¸°ëŠ¥ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<h4 id="ì¸ë©”ëª¨ë¦¬-ë…ë¦½-ìŠ¤ì¼€ì¤„ëŸ¬"><a href="#ì¸ë©”ëª¨ë¦¬-ë…ë¦½-ìŠ¤ì¼€ì¤„ëŸ¬" class="headerlink" title="ì¸ë©”ëª¨ë¦¬ ë…ë¦½ ìŠ¤ì¼€ì¤„ëŸ¬"></a>ì¸ë©”ëª¨ë¦¬ ë…ë¦½ ìŠ¤ì¼€ì¤„ëŸ¬</h4><p>QuartzAutoConfigurationì— ì˜í•´ ìë™ìœ¼ë¡œ SchedulerFactoryBeanê°€ ë“±ë¡ë˜ê³  RAMJobStoreê°€ ê¸°ë³¸ê°’ì´ê¸°ì— ë³„ë‹¤ë¥¸ ì„¤ì •ì—†ì´ë„ ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">quartz</span><span class="token punctuation">:</span>
    <span class="token key atrule">scheduler-name</span><span class="token punctuation">:</span> QuartzScheduler
    <span class="token key atrule">job-store-type</span><span class="token punctuation">:</span> memory
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">org.quartz.scheduler.instanceName</span><span class="token punctuation">:</span> QuartzScheduler
      <span class="token key atrule">org.quartz.scheduler.instanceId</span><span class="token punctuation">:</span> AUTO

      <span class="token key atrule">org.quartz.threadPool.class</span><span class="token punctuation">:</span> org.quartz.simpl.SimpleThreadPool
      <span class="token key atrule">org.quartz.threadPool.threadCount</span><span class="token punctuation">:</span> <span class="token number">100</span>
      
      <span class="token key atrule">org.quartz.jobStore.class</span><span class="token punctuation">:</span> org.quartz.simpl.RAMJobStore</code></pre>

<h4 id="JDBC-ë¶„ì‚°-ìŠ¤ì¼€ì¤„ëŸ¬"><a href="#JDBC-ë¶„ì‚°-ìŠ¤ì¼€ì¤„ëŸ¬" class="headerlink" title="JDBC ë¶„ì‚° ìŠ¤ì¼€ì¤„ëŸ¬"></a>JDBC ë¶„ì‚° ìŠ¤ì¼€ì¤„ëŸ¬</h4><p>ì‹¤ë¬´ì—ì„œ ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì¿¼ì¸  íŒ€ì—ì„œ ì œê³µí•˜ëŠ” JDBC ê¸°ë°˜ì˜ í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  ìˆì§€ëŠ” ì•Šë‹¤. ë¹„ìŠ·í•˜ê²Œ ìŠ¤ì¼€ì¤„ ìƒíƒœì— ëŒ€í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë½ì„ ì´ìš©í•˜ì—¬ ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìŠ¤ì¼€ì¤„ì´ ì¤‘ë³µí•˜ì—¬ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ êµ¬í˜„ëœ ìƒíƒœì´ë‹¤. ì•„ë¬´íŠ¼ ì´ ê¸€ì—ì„œëŠ” ì¿¼ì¸ ì—ì„œ ì œê³µí•˜ëŠ” JDBC í´ëŸ¬ìŠ¤í„°ë§ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ì„ ê´€ë¦¬í•´ë³´ë„ë¡ í•˜ì.</p>
<p><a href="https://github.com/quartz-scheduler/quartz/wiki/How-to-Setup-Databases#postgresql-database">ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ìš© ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±</a><br><a href="https://github.com/quartz-scheduler/quartz/blob/master/quartz-core/src/main/resources/org/quartz/impl/jdbcjobstore/tables_postgres.sql">ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±</a><br><a href="http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html#configuration-of-jdbc-jobstoretx-store-jobs-and-triggers-in-a-database-via-jdbc">JDBC ê¸°ë°˜ JobStoreTX êµ¬ì„±</a></p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> quartz <span class="token keyword">WITH</span> ENCRYPTED PASSWORD <span class="token string">'quartz123'</span> CONNECTION <span class="token keyword">LIMIT</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> quartz OWNER quartz<span class="token punctuation">;</span></code></pre>

<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- Run tables_postgres.sql</span></code></pre>

<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">quartz</span><span class="token punctuation">:</span>
    <span class="token key atrule">scheduler-name</span><span class="token punctuation">:</span> QuartzScheduler
    <span class="token key atrule">job-store-type</span><span class="token punctuation">:</span> jdbc
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">org.quartz.scheduler.instanceName</span><span class="token punctuation">:</span> QuartzScheduler
      <span class="token key atrule">org.quartz.scheduler.instanceId</span><span class="token punctuation">:</span> AUTO

      <span class="token key atrule">org.quartz.threadPool.class</span><span class="token punctuation">:</span> org.quartz.simpl.SimpleThreadPool
      <span class="token key atrule">org.quartz.threadPool.threadCount</span><span class="token punctuation">:</span> <span class="token number">100</span>

      <span class="token key atrule">org.quartz.jobStore.class</span><span class="token punctuation">:</span> org.quartz.impl.jdbcjobstore.JobStoreTX
      <span class="token key atrule">org.quartz.jobStore.driverDelegateClass</span><span class="token punctuation">:</span> org.quartz.impl.jdbcjobstore.PostgreSQLDelegate
      <span class="token key atrule">org.quartz.jobStore.dataSource</span><span class="token punctuation">:</span> quartzDS
      <span class="token key atrule">org.quartz.jobStore.isClustered</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">org.quartz.jobStore.clusterCheckinInterval</span><span class="token punctuation">:</span> <span class="token number">20000</span>

      <span class="token key atrule">org.quartz.dataSource.quartzDS.provider</span><span class="token punctuation">:</span> hikaricp
      <span class="token key atrule">org.quartz.dataSource.quartzDS.driver</span><span class="token punctuation">:</span> org.postgresql.Driver
      <span class="token key atrule">org.quartz.dataSource.quartzDS.URL</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>postgresql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>5432/quartz
      <span class="token key atrule">org.quartz.dataSource.quartzDS.user</span><span class="token punctuation">:</span> quartz
      <span class="token key atrule">org.quartz.dataSource.quartzDS.password</span><span class="token punctuation">:</span> quartz123
      <span class="token key atrule">org.quartz.dataSource.quartzDS.maxConnections</span><span class="token punctuation">:</span> <span class="token number">10</span></code></pre>

<blockquote>
<p>org.quartz.dataSource.quartzDS.providerë¥¼ hikaricpë¡œ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ c3p0 ì»¤ë„¥ì…˜ í’€ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì˜ì¡´í•˜ë¯€ë¡œ ì£¼ì˜í•˜ì.</p>
</blockquote>
<h4 id="ìŠ¤ì¼€ì¤„-ì¡-ë°-íŠ¸ë¦¬ê±°-ë“±ë¡"><a href="#ìŠ¤ì¼€ì¤„-ì¡-ë°-íŠ¸ë¦¬ê±°-ë“±ë¡" class="headerlink" title="ìŠ¤ì¼€ì¤„ ì¡ ë° íŠ¸ë¦¬ê±° ë“±ë¡"></a>ìŠ¤ì¼€ì¤„ ì¡ ë° íŠ¸ë¦¬ê±° ë“±ë¡</h4><p>ë§ì€ ë¸”ë¡œê·¸ ê¸€ì—ì„œ ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ë™ì‘í•˜ëŠ” ìŠ¤ì¼€ì¤„ ì •ë³´ì™€ íŠ¸ë¦¬ê±°ë¥¼ ë“±ë¡í•˜ëŠ” ë°©ë²•ì„ ì–´ë µê²Œ ì„¤ëª…í•˜ì§€ë§Œ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•˜ë‹¤. ìŠ¤ì¼€ì¤„ ì¡ì„ êµ¬í˜„í•  ë•Œì— JobDetailê³¼ Triggerë¥¼ í•¨ê»˜ ë¹ˆìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ê´€ë¦¬í•˜ë©´ í¸ë¦¬í•˜ê²Œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>scheduler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>quartz<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Qualifier</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>quartz<span class="token punctuation">.</span></span><span class="token class-name">QuartzJobBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleJob</span> <span class="token keyword">extends</span> <span class="token class-name">QuartzJobBean</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">JOB_NAME</span> <span class="token operator">=</span> <span class="token string">"SampleJob"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">JOB_DETAIL_NAME</span> <span class="token operator">=</span> <span class="token constant">JOB_NAME</span> <span class="token operator">+</span> <span class="token string">"Detail"</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">executeInternal</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">&#123;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;, &#123;&#125;, &#123;&#125;"</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getJobInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getFireTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token constant">JOB_DETAIL_NAME</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">JobDetail</span> <span class="token function">jobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ofType</span><span class="token punctuation">(</span><span class="token class-name">SampleJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">storeDurably</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"SampleJobDetail"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDescription</span><span class="token punctuation">(</span><span class="token string">"Invoke Sample Job..."</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Trigger</span> <span class="token function">simpleTrigger</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token constant">JOB_DETAIL_NAME</span><span class="token punctuation">)</span> <span class="token class-name">JobDetail</span> job<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forJob</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"SampleJobTrigger"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDescription</span><span class="token punctuation">(</span><span class="token string">"Sample trigger with interval"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span><span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Trigger</span> <span class="token function">cronTrigger</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token constant">JOB_DETAIL_NAME</span><span class="token punctuation">)</span> <span class="token class-name">JobDetail</span> job<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forJob</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"SampleJobTrigger"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDescription</span><span class="token punctuation">(</span><span class="token string">"Sample trigger with cron"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span><span class="token class-name">CronScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token string">"* * * * * ?"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ìŠ¤í”„ë§-ìŠ¤ì¼€ì¤„ë§-ë¶„ì‚°-ë™ê¸°í™”"><a href="#ìŠ¤í”„ë§-ìŠ¤ì¼€ì¤„ë§-ë¶„ì‚°-ë™ê¸°í™”" class="headerlink" title="ìŠ¤í”„ë§ ìŠ¤ì¼€ì¤„ë§ ë¶„ì‚° ë™ê¸°í™”"></a>ìŠ¤í”„ë§ ìŠ¤ì¼€ì¤„ë§ ë¶„ì‚° ë™ê¸°í™”</h4><p>ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ë„ì…í•˜ëŠ” ì´ìœ ëŠ” ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” @Scheduledë¥¼ í†µí•œ ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì€ í´ëŸ¬ìŠ¤í„°ë§ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¶„ì‚°ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ë™ì¼í•˜ê²Œ JDBC ê¸°ë°˜ìœ¼ë¡œ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ <a href="https://github.com/lukas-krecan/ShedLock">ShedLock</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë™ê¸°í™”ëœ ìŠ¤ì¼€ì¤„ì´ ë™ì‘ë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ë§ˆë‹¤ ì‹¤í–‰í•´ë„ ìƒê´€ì—†ëŠ” ì‘ì—…ì— ê°„ë‹¨í•˜ê²Œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°ë˜ë¯€ë¡œ ë™ê¸°í™”ëœ ìŠ¤ì¼€ì¤„ì´ í•„ìš”í•œ ê²½ìš°ë¼ë©´ ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤ê³  ìƒê°ëœë‹¤.</p>
<h4 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h4><ul>
<li><a href="http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/configuration.html">Quartz Configuration Reference</a></li>
<li><a href="https://www.baeldung.com/spring-quartz-schedule">Scheduling in Spring with Quartz</a></li>
</ul>
]]></content>
      <tags>
        <tag>Quartz</tag>
        <tag>ShedLock</tag>
      </tags>
  </entry>
  <entry>
    <title>Real JWT (Feat. ì¿ í‚¤ ì„¸ì…˜)</title>
    <url>/real-jwt/</url>
    <content><![CDATA[<blockquote>
<p>ì‹ ì… ê°œë°œìì˜ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ê¸°ë³¸ ìŠ¤íƒìœ¼ë¡œ í¬í•¨ë˜ëŠ” ê²ƒ ì¤‘ì˜ í•˜ë‚˜ëŠ” JWTë¥¼ í™œìš©í•œ í† í° ê¸°ë°˜ ì¸ì¦ ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì´ë¯¸ ìˆ˜ ë§ì€ ê¸°ì—…ì—ì„œëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë„ì…ì„ ì‹œë„í•˜ë‹¤ê°€ í¬ê¸°í•œ ê²½ìš°ê°€ ë§ì„ ê²ƒì´ë‹¤. ì‹¬ì§€ì–´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ê³ ë ¤í•˜ë‹¤ê°€ ì˜¤íˆë ¤ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œ ì „í™˜í•˜ëŠ” ì‚¬ë¡€ë„ ì°¾ì„ ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<p>ì˜¤ëŠ˜ì€ JWT í† í°ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ì„ ìœ ì§€í•˜ëŠ” ê²ƒì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í•´ë³´ê³ ì í•œë‹¤. ë¯¸ë¦¬ ë§í•˜ìë©´, ì‹¤ë¬´ì—ì„œ JWT í† í°ì„ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ì—†ìœ¼ë©° í¬ì§€ ì•Šì€ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ê³  ìˆëŠ” í…Œí¬ ë¦¬ë”ë¡œì¨ì˜ ìƒê°ì´ë‹¤. </p>
<h4 id="ê³¼ì—°-ì¿ í‚¤-ì„¸ì…˜ë³´ë‹¤-íš¨ìœ¨ì ì¸ê°€-ğŸ¤”"><a href="#ê³¼ì—°-ì¿ í‚¤-ì„¸ì…˜ë³´ë‹¤-íš¨ìœ¨ì ì¸ê°€-ğŸ¤”" class="headerlink" title="ê³¼ì—° ì¿ í‚¤ ì„¸ì…˜ë³´ë‹¤ íš¨ìœ¨ì ì¸ê°€ ğŸ¤”"></a>ê³¼ì—° ì¿ í‚¤ ì„¸ì…˜ë³´ë‹¤ íš¨ìœ¨ì ì¸ê°€ ğŸ¤”</h4><p>ì‚¬ìš©ì ì¸ì¦ì— JWTë¥¼ ë„ì…í•˜ëŠ” ê²½ìš°ë¥¼ ë³´ë©´ ëŒ€ë¶€ë¶„ ì„¸ì…˜ì— ëŒ€í•œ ë¹„íš¨ìœ¨ì„±ì„ ì´ì•¼ê¸°í•œë‹¤. ì‹œìŠ¤í…œì˜ ê·œëª¨ì™€ íŠ¸ë˜í”½ì´ ë§ì•„ì§€ëŠ” ê²½ìš° ì„¸ì…˜ì„ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì—ì„œ ê³¼ë¶€í•˜ë¥¼ ì¼ìœ¼í‚¬ ê°€ëŠ¥ì„±ì´ ìˆì–´ë³´ì´ëŠ” ê±´ ì‚¬ì‹¤ì´ê³  ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§ì„ ìˆ˜í–‰í•œë‹¤í•˜ë”ë¼ë„ ì¤‘ì•™í™” ë˜ì–´ë²„ë¦¬ëŠ” êµ¬ì¡°ë¡œ ì¸í•´ ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ëŠ˜ì–´ë‚  ìˆœ ìˆë‹¤. ì„œë²„ê°€ ì„¸ì…˜ ìœ ì§€ë¥¼ ìœ„í•´ ë‹´ë‹¹í•˜ëŠ” ë¶€í•˜ ë¿ë§Œ ì•„ë‹ˆë¼ ê³ ë ¤í•´ì•¼í•  ê²ƒì€ ì¸í”„ë¼ì— ëŒ€í•œ ë¹„ìš©ì¼ì§€ ëª¨ë¥¸ë‹¤. <a href="https://gameanalytics.com/blog/reduce-costs-https-api-aws/">AWS í™˜ê²½ì—ì„œ HTTPS API ë¹„ìš©ì„ ì¤„ì´ëŠ” ë°©ë²•</a>ë„ ê³µìœ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ì‘ì€ íŒ¨í‚·ì˜ ì°¨ì´ë„ ìƒê°ë³´ë‹¤ ë§ì€ ë¹„ìš©ì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ë‹¤.</p>
<p>JWTì˜ ê°€ì¥ í° ë‹¨ì ì€ JSONìœ¼ë¡œ êµ¬ì„±ëœ ë¬¸ìì—´ì„ Base64 ì¸ì½”ë”©í•˜ì—¬ êµ¬ì„±í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ë³´ì•ˆì ì¸ ê´€ì ì´ ë†’ì„ìˆ˜ë¡ í‚¤ ê¸¸ì´ê°€ ê¸´ RSA ë˜ëŠ” ECC í‚¤ë¡œ êµ¬ì„±ëœ ê³µê°œí‚¤ ê¸°ë°˜ì˜ ì„œëª…ì„ í•˜ê²Œ ë  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì˜¬ë°”ë¥¸ í‚¤ë¡œ ì„œëª…í•  ìˆ˜ ìˆë„ë¡ JWKë„ ì œê³µí•˜ê²Œ ë  ê²ƒì´ë‹¤. ì•„ë¬´íŠ¼ ë³´ì•ˆìœ¼ë¡œ ì¸í•´ í‚¤ ê¸¸ì´ê°€ ê¸¸ì–´ì§ˆìˆ˜ë¡ Base64 ì¸ì½”ë”© íŠ¹ì§•ìœ¼ë¡œ ì¸í•´ HTTP í†µì‹  íŒ¨í‚·ì˜ ì‚¬ì´ì¦ˆê°€ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ë§ì´ë‹¤. ê·¸ë¦¬ê³  ì´ê²ƒì€ ìš”ì²­ê³¼ ì‘ë‹µ í˜ì´ë¡œë“œ í¬ê¸°ë¡œ ì¸í•´ ë§‰ëŒ€í•œ íŠ¸ë˜í”½ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤.</p>
<h4 id="ë³´ì•ˆ-ì§€ì‹ì„-ì´í•´í• -ìˆ˜-ìˆëŠ”ê°€-ğŸ˜µ"><a href="#ë³´ì•ˆ-ì§€ì‹ì„-ì´í•´í• -ìˆ˜-ìˆëŠ”ê°€-ğŸ˜µ" class="headerlink" title="ë³´ì•ˆ ì§€ì‹ì„ ì´í•´í•  ìˆ˜ ìˆëŠ”ê°€ ğŸ˜µ"></a>ë³´ì•ˆ ì§€ì‹ì„ ì´í•´í•  ìˆ˜ ìˆëŠ”ê°€ ğŸ˜µ</h4><p>JWTì— ëŒ€í•œ ìƒì„¸ êµ¬í˜„ì€ ê°œë°œìì˜ ì—­ëŸ‰ì— ìˆê¸°ì— ì—¬ëŸ¬ê°€ì§€ ë³´ì•ˆ ì§€ì‹ì´ë‚˜ ê´€ì ì´ í•„ìš”í•˜ë‹¤. ë¸Œë¼ìš°ì €ì™€ ì„œë²„ ê°„ í†µì‹ ì„ ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ HTTPS ì—°ê²°ì„ í†µí•´ íŒ¨í‚·ì„ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•´ì•¼í•œë‹¤. ê¸°ë³¸ì ì¸ ì•”í˜¸í™” í†µì‹ ì€ í† í°ì„ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•  ìˆ˜ ìˆëŠ” ìµœì†Œí•œì˜ ë°©ì–´ì´ê¸° ë•Œë¬¸ì´ë‹¤. ì–¸ì–´ë§ˆë‹¤ ê°œë°œìë“¤ì„ ìœ„í•œ JWT ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ìˆì§€ë§Œ ê·¸ê²ƒì„ í™œìš©í•´ì„œ ì œëŒ€ë¡œ í™œìš©í•˜ë ¤ë©´ ë³´ì•ˆ ì§€ì‹ì„ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤. HS256ê³¼ RS256ì˜ ì°¨ì´ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ê³µê°œí‚¤ ê¸°ë°˜ ì•”í˜¸í™”ì— ëŒ€í•œ ê¸°ë³¸ ì§€ì‹ì´ í•„ìš”í•˜ë‹¤. ê°œì¸ì ì¸ ê²¬í•´ë¡œëŠ” ì‹ ì… ê°œë°œì ë¿ë§Œ ì•„ë‹ˆë¼ ì£¼ë‹ˆì–´ ê°œë°œìë“¤ì´ HTTPSë¥¼ ì´í•´í•˜ëŠ” ê²ƒì¡°ì°¨ë„ ì‰½ì§€ ì•Šë‹¤ê³  ìƒê°í•œë‹¤.</p>
<p>ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ì¸ ì˜¤í‚¤ ì‚¬ì´íŠ¸ë¥¼ ë³´ë”ë¼ë„ HTTPSë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ JWTë¡œ êµ¬ì„±ëœ ì•¡ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë˜ì‹œ í† í°ì„ ì¿ í‚¤ë¡œ ê´€ë¦¬í•¨ì—ë„ Secure ì™€ SameSite ì†ì„±ì„ ì œëŒ€ë¡œ ì ìš©í•˜ì§€ ì•ŠìŒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ì‹œìŠ¤í…œ ë³´ì•ˆ ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ì„œ ìœ„ë°°ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ê³  ê²€ì¶œë˜ì–´ ì¡°ì¹˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ë¶€ë¶„ì´ë‹¤.</p>
<blockquote>
<p>ì‹¤ì œë¡œ ì‹ ì… ê°œë°œì ì¸í„°ë·°ë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë©´ í† í° ê¸°ë°˜ ì¸ì¦ì„ êµ¬í˜„í•˜ë”ë¼ë„ ì„¸ì…˜ì— ëŒ€í•œ ì´í•´ì™€ ê²½í—˜ì´ ë¶€ì¡±í•˜ë‹¤ê³  ëŠê»´ì§ˆ ë§Œí¼ ì œëŒ€ë¡œ ëœ ë‹µë³€ì„ í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìƒë‹¹í•˜ë‹¤. ì‹¬ì§€ì–´ OAuth ì†Œì…œ ë¡œê·¸ì¸ì„ ë³„ë„ë¡œ ì‚¬ìš©í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í† í°ì€ JWTë§Œ ìˆë‹¤ê³  ë§í•˜ëŠ” ì¼€ì´ìŠ¤ë„ ìˆì—ˆë‹¤.</p>
</blockquote>
<p>ì´ëŸ¬í•œ ë¶€ë¶„ë“¤ì„ í†µí•´ ì—„ì²­ ë†’ì€ ì‹¤ë ¥ì˜ ì—­ëŸ‰ì„ ë³´ìœ í•œ ì‹ ì…ì´ ì•„ë‹ˆê³ ì„œì•¼ ê±°ì˜ ëª¨ë“  ì‹ ì… ì›¹ ê°œë°œìë“¤ì€ ì „í†µì ì¸ ì„¸ì…˜ì— ëŒ€í•œ ê²½í—˜ì„ ìŒ“ê³  ì„¸ì…˜ì— ëŒ€í•œ ë¬¸ì œì ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”í•˜ì§€ ì•Šì„ê¹Œ ìƒê°í•´ë³¸ë‹¤. ê°œì¸ì ìœ¼ë¡œëŠ” ì„¸ì…˜ì„ í™œìš©í•œ í”„ë¡œì íŠ¸ë¥¼ í¬íŠ¸í´ë¦¬ì˜¤ë¡œì¨ ë³´ê³ ì‹¶ë‹¤. JWTë¥¼ í™œìš©í•œ í† í° ê¸°ë°˜ ì¸ì¦ì´ ë„˜ì³ë‚˜ëŠ” í¬íŠ¸í´ë¦¬ì˜¤ë“¤ ì†ì—ì„œ ì˜¤íˆë ¤ ê²½ìŸë ¥ì´ ìˆì–´ë³´ì´ëŠ” ê²ƒì€ ê°€ì¥ ë‹¨ìˆœí•œ ì„¸ì…˜ì„ ì‚¬ìš©í•œ ê²ƒì´ ì•„ë‹ê¹Œ?â€¦</p>
]]></content>
      <tags>
        <tag>JWT</tag>
        <tag>Session</tag>
      </tags>
  </entry>
  <entry>
    <title>ë ˆë””ìŠ¤ ì¥ì•  íšŒê³ </title>
    <url>/redis-memory-usage-issue/</url>
    <content><![CDATA[<blockquote>
<p>2022ë…„ 11ì›” 30ì¼ ë‹¨ í•œì¤„ì˜ ì½”ë“œë¡œ ì¸í•˜ì—¬ ì‹œìŠ¤í…œì„ ì •ìƒì ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœë¡œ ë§Œë“¤ì–´ë²„ë¦¬ëŠ” ì‹¬ê°í•œ ê²°í•¨ì„ ë§Œë“¤ì—ˆë‹¤. ê³¼ì—° ì–´ë–¤ ë¬¸ì œê°€ ë°œìƒí–ˆê³  ê·¸ ì›ì¸ì€ ë¬´ì—‡ì´ì—ˆëŠ”ì§€ ë˜ëŒì•„ë³´ë©° ì—¬ëŸ¬ë¶„ì—ê²Œ ê³µìœ í•˜ê³ ì í•œë‹¤.</p>
</blockquote>
<p>ì¼ë°˜ì ì¸ ì›¹ ì„œë¹„ìŠ¤ì²˜ëŸ¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë§ì€ ì‚¬ìš©ìì™€ ê·¸ë¦¬ê³  ê° ì‚¬ìš©ìì— ì˜í•´ ëŒ€ëŸ‰ì˜ íŠ¸ë˜í”½ì´ ë°œìƒí•˜ëŠ” ì‹œìŠ¤í…œ í™˜ê²½ì€ ì•„ë‹™ë‹ˆë‹¤ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìŠ¤ì¼€ì¼ ì•„ì›ƒë˜ì–´ ë¶„ì‚°í™”ë˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì—¬ ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§ì„ ìœ„í•˜ì—¬ ìŠ¤í”„ë§ ì„¸ì…˜ê³¼ í•¨ê»˜ ì„¸ì…˜ ì •ë³´ë¥¼ ë ˆë””ìŠ¤ë¼ëŠ” ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†Œì— ì—°ê³„í•˜ë„ë¡ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤. ì‹œìŠ¤í…œ í™˜ê²½ ê·œëª¨ ìƒ ë§ì€ ì‚¬ìš©ìì˜ ì„¸ì…˜ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ 1GB ì •ë„ì˜ ë©”ëª¨ë¦¬ ì‚¬ì–‘ì„ ê°€ì§€ëŠ” ì‘ì€ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì— ë ˆë””ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ì—¬ ìŠ¤íƒ ë‹¤ë“œ-ì–¼ë¡  ëª¨ë“œë¡œì¨ ì‚¬ìš©í•˜ë”ë¼ë„ í° ë¬¸ì œê°€ ì—†ì—ˆë‹¤. ì„¸ì…˜ ì €ì¥ì†Œë¡œì¨ ë ˆë””ìŠ¤ë¥¼ ë„ì…í•˜ì˜€ìœ¼ë‚˜ ì‹¤ì œë¡œ ì‚¬ìš©ìì— ì˜í•´ ë°œìƒí•˜ëŠ” ì„¸ì…˜ ë°ì´í„°ê°€ ë§ì´ ì €ì¥ë˜ì§€ ì•Šì„ ê²ƒì´ë¯€ë¡œ ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒì— ëŒ€í•´ì„œ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ ìì£¼ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ì—†ëŠ” ì¼ë¶€ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” í”„ë¡œì‹œì € í˜¸ì¶œì— ëŒ€í•´ì„œ ìŠ¤í”„ë§ ìºì‹œë¥¼ ì ìš©í•˜ì˜€ë‹¤. ê·¸ëŸ¬ë‚˜, ì„¸ì…˜ê³¼ ìºì‹œ ë°ì´í„°ë¥¼ í¬í•¨í•˜ì—¬ ìƒê°ë³´ë‹¤ ì‚¬ìš©ë˜ëŠ” ë©”ëª¨ë¦¬ëŠ” ë¯¸ë¹„í–ˆì—ˆê¸°ì— ì„¸ì…˜ì´ë‚˜ ìºì‹œì— ëŒ€í•´ ê·¸ë‹¤ì§€ ê³ ë¯¼í•  í•„ìš”ì„±ì€ ì—†ì—ˆë‹¤ê³  ìƒê°ëœë‹¤.</p>
<p>ê·¸ëŸ¬ë‚˜, ì–´ëŠ ì‹œì ë¶€í„° íŠ¹ì • í™˜ê²½ì—ì„œ ë ˆë””ìŠ¤ê°€ ì„¤ì¹˜ëœ ì„œë²„ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¡°ê¸ˆì”© ì˜¤ë¥¸ë‹¤ëŠ” ëª¨ë‹ˆí„°ë§ ì§€í‘œë¥¼ ì „ë‹¬ë°›ì•˜ìœ¼ë©° ëª¨ë‹ˆí„°ë§ ì§€í‘œê°€ ì „ë‹¬ë˜ëŠ” ê³¼ì •ì—ì„œ ì‹œê°„ì´ ë§ì´ í˜ë €ê¸°ì— ê¸´ê¸‰í•˜ê²Œ ë ˆë””ìŠ¤ê°€ ì„¤ì¹˜ëœ ì„œë²„ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìœ¼ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ CPU ë¶€í•˜ê°€ ë†’ê³  ì‹œìŠ¤í…œì„ ì •ìƒì ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœê°€ ë˜ì—ˆë‹¤ê³  ë³´ê³  ë°›ê²Œ ë˜ì—ˆë‹¤.</p>
<h4 id="ë ˆë””ìŠ¤ì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©ëŸ‰ì´-ë†’ì•„ì§„-ì›ì¸"><a href="#ë ˆë””ìŠ¤ì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©ëŸ‰ì´-ë†’ì•„ì§„-ì›ì¸" class="headerlink" title="ë ˆë””ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ì•„ì§„ ì›ì¸"></a>ë ˆë””ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ì•„ì§„ ì›ì¸</h4><p>ì²˜ìŒì—ëŠ” ë ˆë””ìŠ¤ê°€ ì„¤ì¹˜ëœ ì„œë²„ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ì•„ì§„ë‹¤ëŠ” ì´ì•¼ê¸°ë§Œ ì „ë‹¬ë°›ì•˜ê¸°ì— (ì´ì „ì— ë°œìƒí•œ ì´ë ¥ì„ í† ëŒ€ë¡œ) ë³´ì•ˆ ë° ëª¨ë‹ˆí„°ë§ ëª©ì ìœ¼ë¡œ ê° ì„œë²„ì— ì„¤ì¹˜ëœ ë°±ì‹  í”„ë¡œê·¸ë¨ì´ë‚˜ ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ë¡œ ì¸í•´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí–ˆì„ ê²ƒì´ë¼ê³  ì˜ì‹¬í–ˆìœ¼ë‚˜ ë ˆë””ìŠ¤ ì„œë²„ì— ì ‘ì† í›„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ë²„ë²…ê±°ë¦´ ì •ë„ë¡œ ì„œë²„ì˜ ì—¬ìœ  ë©”ëª¨ë¦¬ê°€ ë‚¨ì•„ìˆì§€ ì•Šì€ ìƒíƒœê°€ ë˜ì–´ìˆì—ˆìœ¼ë©° ë ˆë””ìŠ¤ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ëŸ‰ì´ ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ê±°ì˜ ì ìœ í•˜ê³  ìˆì—ˆìŒì„ í™•ì¸í•˜ì˜€ë‹¤.</p>
<h4 id="ë ˆë””ìŠ¤ê°€-ì„œë²„-ë©”ëª¨ë¦¬ë¥¼-ê±°ì˜-ì‚¬ìš©í•œ-ì´ìœ "><a href="#ë ˆë””ìŠ¤ê°€-ì„œë²„-ë©”ëª¨ë¦¬ë¥¼-ê±°ì˜-ì‚¬ìš©í•œ-ì´ìœ " class="headerlink" title="ë ˆë””ìŠ¤ê°€ ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ê±°ì˜ ì‚¬ìš©í•œ ì´ìœ "></a>ë ˆë””ìŠ¤ê°€ ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ê±°ì˜ ì‚¬ìš©í•œ ì´ìœ </h4><p>ì„œë²„ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì—„ì²­ë‚˜ê²Œ ë†’ì•˜ë˜ ì´ìœ ëŠ” ë ˆë””ìŠ¤ê°€ ê±°ì˜ ëŒ€ë¶€ë¶„ì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì´ë©° ì´ë ‡ê²Œê¹Œì§€ ë˜ì–´ë²„ë¦° ì‚¬ìœ ì— ëŒ€í•´ì„œëŠ” ìš´ì˜ì ì¸ ì¸¡ë©´ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ì¸í”„ë¼ ë° ì„œë²„ í™˜ê²½ êµ¬ì¶• ì‹œ ë ˆë””ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê³ ë‚˜ì„œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì˜µì…˜ì— ëŒ€í•´ì„œëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ êµ¬ë™í•˜ì˜€ê¸° ë•Œë¬¸ì´ë‹¤. ì‚¬ì‹¤ ìƒ ë ˆë””ìŠ¤ë¼ëŠ” ê¸°ìˆ ì— ëŒ€í•´ì„œ ë¼ì¸ì´ë‚˜ ì¹´ì¹´ì˜¤ì™€ ê°™ì€ ê·œëª¨ì˜ ì¡°ì§ì´ ì•„ë‹ˆë¼ë©´ ê¸°ìˆ ì ì¸ ê²½í—˜ì´ ë¶€ì¡±í•´ì„œ ë ˆë””ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ë§ì„ì§€ë„ ëª¨ë¥´ê² ë‹¤.</p>
<p>ì•„ë¬´íŠ¼ ë ˆë””ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ì˜€ì„ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì„¤ì • íŒŒì¼ì—ì„œ ë ˆë””ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ìµœëŒ€ ë§¤ëª¨ë¦¬ì— ëŒ€í•œ ì œí•œì€ ì—†ë„ë¡ ë˜ì–´ìˆìœ¼ë©° ê²½ê³  ë¬¸êµ¬ë¥¼ í†µí•´ ì„¸ì…˜ì´ë‚˜ ìºì‹œë¥¼ ìœ„í•´ì„œ ë ˆë””ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœëŒ€ ë©”ëª¨ë¦¬ ì„¤ì •ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆë‹¤ê³  ì•ˆë‚´í•˜ê³  ìˆë‹¤. ë ˆë””ìŠ¤ê°€ ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ì œí•œì—†ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ì„œ ì„œë²„ ìƒíƒœê°€ ì´ìƒí•´ì§„ ê²ƒì„ ê²½í—˜í•˜ê³  ë‚˜ì„œì•¼ í•´ë‹¹ ì˜µì…˜ì´ ì ìš©ë˜ì–´ ìˆì§€ ì•ŠìŒì„ í™•ì¸í•˜ì˜€ê³  ì´ì— ëŒ€í•´ ê¸´ê¸‰ ì ì • ì¡°ì¹˜ê°€ í•„ìš”í•¨ì„ ìš°ì„  ì „ë‹¬í•˜ì˜€ë‹¤.</p>
<blockquote>
<p>ìµœëŒ€ ë©”ëª¨ë¦¬ ì„¤ì •ì€ ì„œë²„ ë©”ëª¨ë¦¬ë¥¼ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ê°€ìƒ ë©”ëª¨ë¦¬ê¹Œì§€ ìŠ¤ì™‘í•˜ì—¬ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•œ ì˜ˆë°©ì±…ì¼ ë¿ ê·¼ë³¸ì ì¸ ì›ì¸ì— ëŒ€í•´ ê²€í† ë˜ì§€ ì•Šì•˜ê³  í•´ê²° ë°©ë²•ì€ ì•„ë‹ˆë‹¤. ìš°ì„  ë ˆë””ìŠ¤ ì„œë²„ì˜ ìƒíƒœë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ìµœëŒ€ ë©”ëª¨ë¦¬ë¥¼ ì„¤ì • ë° ìŠ¤ëƒ…ìƒ·ëœ íŒŒì¼ì„ ì‚­ì œí•˜ê³  ë ˆë””ìŠ¤ë¥¼ ì¬ì‹œì‘í•˜ì˜€ë‹¤.</p>
</blockquote>
<h4 id="ë ˆë””ìŠ¤-ìŠ¤ëƒ…ìƒ·ì„-í†µí•´-ë°ì´í„°-ë¶„ì„"><a href="#ë ˆë””ìŠ¤-ìŠ¤ëƒ…ìƒ·ì„-í†µí•´-ë°ì´í„°-ë¶„ì„" class="headerlink" title="ë ˆë””ìŠ¤ ìŠ¤ëƒ…ìƒ·ì„ í†µí•´ ë°ì´í„° ë¶„ì„"></a>ë ˆë””ìŠ¤ ìŠ¤ëƒ…ìƒ·ì„ í†µí•´ ë°ì´í„° ë¶„ì„</h4><p>ë ˆë””ìŠ¤ì˜ ìµœëŒ€ ë©”ëª¨ë¦¬ ì„¤ì • ì¡°ì¹˜ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì— ë ˆë””ìŠ¤ì—ì„œ ê¸°ë³¸ê°’ì— ì˜í•´ ìì²´ì ìœ¼ë¡œ ì €ì¥í•´ë‘ì—ˆë˜ ìŠ¤ëƒ…ìƒ·(dump.rdb) íŒŒì¼ì„ ë°±ì—…í•œ í›„ ë¡œì»¬ í™˜ê²½ì—ì„œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ë ˆë””ìŠ¤ë¥¼ ìŠ¤ëƒ…ìƒ· ê¸°ì¤€ìœ¼ë¡œ êµ¬ë™í•œ í›„ ë ˆë””ìŠ¤ê°€ ì ìœ í•˜ê³  ìˆë˜ ë©”ëª¨ë¦¬ê°€ ì–´ë–¤ ë°ì´í„°ë¡œ ì¸í•œ ê²ƒì¸ì§€ ê²€í† í•˜ì˜€ë‹¤. ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸(redis-cli)ë¥¼ í†µí•´ ì €ì¥ëœ ë°ì´í„°ë“¤ì˜ í‚¤ë¥¼ ì¡°íšŒí•˜ì˜€ìœ¼ë©° ìš´ì˜ì¤‘ì¸ í™˜ê²½ì´ ì•„ë‹ˆë¯€ë¡œ KEYS ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ ëŒ€ëµì ì¸ í‚¤ë“¤ì„ í™•ì¸í–ˆê³  ë„ˆë¬´ ë§ì€ í‚¤ë“¤ë¡œ ì¸í•˜ì—¬ ì œëŒ€ë¡œ í™•ì¸ì„ í•  ìˆ˜ ì—†ë‹¤ê³  íŒë‹¨ë˜ì–´ <a href="https://docs.spring.io/spring-session/reference/api.html#api-redisindexedsessionrepository-storage">ìŠ¤í”„ë§ ì„¸ì…˜ ê´€ë ¨ í‚¤</a>ì™€ ìºì‹œë¡œ ì €ì¥í•˜ëŠ” í‚¤ë“¤ì„ ì •ë¦¬í•˜ê³  ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì— ê³µìœ ëœ ëŒ“ê¸€ ì¤‘ <a href="https://stackoverflow.com/a/18247870">eval ëª…ë ¹ì–´ë¥¼ í™œìš©í•œ ì˜ˆì‹œ</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰í•˜ì˜€ë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">eval</span> <span class="token string">"return #redis.call('keys', 'spring:session:*')"</span> <span class="token number">0</span>
<span class="token builtin class-name">eval</span> <span class="token string">"return #redis.call('keys', 'spring:session:sessions:*')"</span> <span class="token number">0</span>
<span class="token builtin class-name">eval</span> <span class="token string">"return #redis.call('keys', 'spring:session:sessions:expires*')"</span> <span class="token number">0</span>
<span class="token builtin class-name">eval</span> <span class="token string">"return #redis.call('keys', 'spring:session:expirations*')"</span> <span class="token number">0</span></code></pre>

<p>ì„¸ì…˜ ê´€ë ¨ í‚¤ë“¤ì€ ì•½ 60ë§Œ ê°œê°€ ë“±ë¡ë˜ì–´ìˆì—ˆìœ¼ë©° ì„¸ì…˜ ê´€ë ¨ í‚¤ë“¤ì„ ì‚­ì œí•˜ë‹ˆ ë‚¨ì•„ìˆë˜ ìºì‹œ ë°ì´í„°ë¡œ ì¸í•´ ì ìœ ì¤‘ì¸ ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ëŸ‰ì€ ì•½ 200MBê°€ ë˜ì—ˆë‹¤. ì¼ë¶€ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì‚¬ìš©ìì˜ ì¶”ê°€ë¡œ ì¸í•˜ì—¬ ìºì‹œë˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ì¡°ê¸ˆì€ ë§ì•„ì¡Œìœ¼ë‚˜ ì‹œìŠ¤í…œì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì ‘ì†í•˜ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ì„¸ì…˜ì€ ë§ì§€ ì•Šê¸°ì— ë¬´ë¶„ë³„í•˜ê²Œ ë¶ˆí•„ìš”í•œ ì„¸ì…˜ í‚¤ë“¤ì´ ë“±ë¡ë˜ì—ˆìŒì„ ì¸ì§€í•˜ê²Œ ë˜ì—ˆë‹¤. ë‹¨ìˆœí•˜ê²Œ ë°”ë¼ë³´ë©´ ì¼ë°˜ì ìœ¼ë¡œ ì„¸ì…˜ì˜ ë§Œë£Œ ì‹œê°„ì„ ì§§ê²Œ í•˜ëŠ”ë° ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­ íŠ¹ì„± ìƒ ì„¸ì…˜ íƒ€ì„ì•„ì›ƒì´ 7ì¼ë¡œ ì§€ì •ë˜ì–´ ìˆì—ˆê¸°ì— ë“±ë¡ëœ ì„¸ì…˜ ê´€ë ¨ í‚¤ë“¤ì„ ì˜¤ë˜ë™ì•ˆ ë ˆë””ìŠ¤ë¥¼ ì ìœ í•˜ê²Œ ë˜ëŠ” ìƒí™©ì´ ë˜ì–´ë²„ë ¸ë‹¤.</p>
<h4 id="ìŠ¤í”„ë§-í”„ë ˆì„ì›Œí¬ì˜-êµ¬í˜„ì„-ì´í•´í•˜ì§€-ëª»í•œ-ì´ìœ ë¡œ-ë¶ˆí•„ìš”í•œ-ì„¸ì…˜-ì •ë³´ë¥¼-ì €ì¥"><a href="#ìŠ¤í”„ë§-í”„ë ˆì„ì›Œí¬ì˜-êµ¬í˜„ì„-ì´í•´í•˜ì§€-ëª»í•œ-ì´ìœ ë¡œ-ë¶ˆí•„ìš”í•œ-ì„¸ì…˜-ì •ë³´ë¥¼-ì €ì¥" class="headerlink" title="ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ êµ¬í˜„ì„ ì´í•´í•˜ì§€ ëª»í•œ ì´ìœ ë¡œ ë¶ˆí•„ìš”í•œ ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥"></a>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ êµ¬í˜„ì„ ì´í•´í•˜ì§€ ëª»í•œ ì´ìœ ë¡œ ë¶ˆí•„ìš”í•œ ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥</h4><p>ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì— ì˜í•´ ì‚¬ìš©ìì˜ ìš”ì²­ì´ë‚˜ ë‚´ë¶€ì ì¸ ìŠ¤ì¼€ì¤„ ì‘ì—…ì— ì˜í•´ í˜¸ì¶œë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì— ëŒ€í•´ì„œ ì¼ë ¨ì˜ ê³¼ì •ì„ ê°ì‹œí•  ìˆ˜ ìˆë„ë¡ API ìš”ì²­ì— ëŒ€í•œ ë¡œê·¸ë‚˜ ì–´ë–¤ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ ë¡œê·¸ë¡œì¨ ê¸°ë¡í•´ì•¼í–ˆê³  ì´ ê³¼ì •ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ì„¸ì…˜ì˜ ì•„ì´ë””ê°€ ì €ì¥ë˜ì–´ì•¼í•  í•­ëª©ì— í¬í•¨ë˜ì–´ìˆì—ˆë‹¤. ì´ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ì‘ì—…ì€ ê³µí†µ ëª¨ë“ˆë¡œì¨ ì½”ë“œë¥¼ ì‘ì„±í–ˆëŠ”ë° ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” í´ë˜ìŠ¤ê°€ ê³µí†µ ëª¨ë“ˆì— ìˆì—ˆìœ¼ë©° í•´ë‹¹ í´ë˜ìŠ¤ê°€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ë¹ˆìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë§¤ë²ˆ ìƒì„±ë˜ì–´ì•¼í•˜ëŠ” êµ¬ì¡°ë¡œ ë˜ì–´ìˆë‹¤ë³´ë‹ˆ ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•˜ëŠ” AOPë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì— ëŒ€í•´ì„œ ê°€ë¡œì±„ì–´ ê¸°ë¡í•  ìˆ˜ ì—†ì—ˆë‹¤.</p>
<p>ì•„ë¬´íŠ¼ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³¼ì •ì—ì„œ ì ë‹¹í•œ ìœ„ì¹˜ë¥¼ ê³ ë ¤í•˜ì—¬ ì„ ì •í–ˆê³  í”„ë¡œì‹œì € ëª…ê³¼ ì—¬ëŸ¬ê°€ì§€ ì •ë³´ì™€ í•¨ê»˜ ì„¸ì…˜ ì•„ì´ë””ë¥¼ ê¸°ë¡í•˜ê¸° ìœ„í•´ì„œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/context/request/RequestContextHolder.java">RequestContextHolder</a>ë¥¼ í†µí•´ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/context/request/RequestAttributes.java">RequestAttributes</a>ë¥¼ ê°€ì ¸ì˜¨ í›„ ì„¸ì…˜ ì•„ì´ë””ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì‘ì„±í•˜ì˜€ë‹¤.</p>
<blockquote>
<p>ì´ ë°©ì‹ì´ ì–´ë–¤ ë¬¸ì œê°€ ìˆëŠ”ì§€ ë°”ë¡œ ì•Œì•„ì±ˆ ë¶„ë“¤ì´ë¼ë©´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ êµ¬í˜„ì„ ì œëŒ€ë¡œ ì•Œê±°ë‚˜ ë§ì€ ê²½í—˜ì´ ìˆë‹¤ê³  ë³´ì—¬ì§„ë‹¤. ì•„ë§ˆ ëŒ€ë¶€ë¶„ì€ ì € í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ê²Œ ì™œ ë ˆë””ìŠ¤ì™€ ì—°ê´€ì´ ìˆëŠ”ì§€ ì˜ˆìƒí•˜ê¸° í˜ë“¤ê²ƒì´ë‹¤.</p>
</blockquote>
<p>ì‚¬ì‹¤ ë‹¨ìˆœíˆ ì € í•¨ìˆ˜ëª…ì„ ë°”ë¼ë³¸ë‹¤ë©´ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ì²˜ë¦¬ ë¡œì§ ê³¼ì •ì—ì„œ ë¬´ë¶„ë³„í•˜ê²Œ ì„¸ì…˜ ì •ë³´ê°€ ì €ì¥ë  ìˆ˜ ìˆëŠ”ì§€ ê²€í† í•˜ëŠ” ê±´ ì½”ë“œ ë¦¬ë·°ë¥¼ í–ˆë”ë¼ë„ ì–´ë ¤ì› ì„ ê²ƒì´ë¼ëŠ” ìƒê°ì´ ë“ ë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì í˜€ìˆëŠ” ìƒì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ NULL ê°’ì´ ë  ìˆ˜ ì—†ëŠ” ë¬¸ìì—´ì´ ë°˜í™˜ë˜ì–´ì•¼í•œë‹¤ê³  ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * Return an id for the current underlying session.
 * @return the session id as String (never &#123;@code null&#125;)
 */</span>
<span class="token class-name">String</span> <span class="token function">getSessionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ì´ì— ë”°ë¼ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” <a href="https://github.com/spring-projects/spring-framework/blob/52e967a5256d389f486b0159e05e2656e4411701/spring-web/src/main/java/org/springframework/web/context/request/ServletRequestAttributes.java#L138-L142">ServletRequestAttributes</a> êµ¬í˜„ì²´ì—ì„œ ì„¸ì…˜ ì•„ì´ë””ê°€ ë°˜ë“œì‹œ ë°˜í™˜ë˜ì–´ì•¼í•˜ë¯€ë¡œ ìš”ì²­ ì •ë³´ì—ì„œ ì„¸ì…˜ì„ ê°€ì ¸ì˜¬ ë•Œ ì—†ìœ¼ë©´ ìƒì„±ë˜ë„ë¡ ì¸ìê°€ ë°˜ë“œì‹œ trueì¸ ìƒíƒœë¡œ ë™ì‘í•˜ê²Œ êµ¬í˜„í•´ë‘ì—ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì„¸ì…˜ ë°©ì‹ê³¼ í† í° ê¸°ë°˜ì˜ ì¸ì¦ì´ë‚˜ API ìš”ì²­ìœ¼ë¡œ êµ¬ë¶„ë˜ëŠ”ë° ìŠ¤í”„ë§ ì›¹ MVC ì—ì„œëŠ” ë‘ê°œ ëª¨ë‘ ì„œë¸”ë¦¿ ìš”ì²­ì¼ ë¿ì´ë¯€ë¡œ ìŠ¤ë ˆë“œ ë¡œì»¬ì— ìš”ì²­ ìŠ¤ë ˆë“œê°€ ì €ì¥ë˜ì–´ ì–¸ì œë“  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ëœë‹¤.</p>
<p>ê·¸ëŸ°ë°, ì„¸ì…˜ ì•„ì´ë””ë¼ í•¨ì€ ì„¸ì…˜ ë°©ì‹ì˜ ìš”ì²­ì— ëŒ€í•´ì„œë§Œ ì˜ë¯¸ê°€ ìˆìœ¼ë¯€ë¡œ ì„¸ì…˜ì´ í™œìš©ë˜ì§€ ì•ŠëŠ” í† í° ê¸°ë°˜ ìš”ì²­ì— ëŒ€í•´ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì„¸ì…˜ì„ ì €ì¥í•˜ëŠ” ì½”ë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ, í† í° ê¸°ë°˜ ìš”ì²­ ì‹œ ì„¸ì…˜ì´ ìƒì„±ë˜ì§€ ì•Šì•„ì•¼ í•¨ì— ë¶ˆêµ¬í•˜ê³  ì„¸ì…˜ ì•„ì´ë””ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ìœ„ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ìŠ¤í”„ë§ ì„¸ì…˜ì— ëŒ€í•œ í•„í„°ê°€ ê°€ì¥ ë¨¼ì € ì²˜ë¦¬ë˜ë¯€ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µí•˜ëŠ” ê³¼ì •ì—ì„œ ìƒì„±ëœ ì„¸ì…˜ì´ë‚˜ ë³€ê²½ëœ ì„¸ì…˜ ì •ë³´ë¥¼ ê°±ì‹ í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ êµ¬í˜„ ë™ì‘ì´ í˜¸ì¶œë˜ì–´ ë ˆë””ìŠ¤ì— ë¶ˆí•„ìš”í•œ ì„¸ì…˜ í‚¤ë“¤ì„ ìƒì„±í•˜ê²Œ ëœ ê²ƒì´ë‹¤.</p>
<h4 id="ì„¸ì…˜-ì•„ì´ë””ë¥¼-ì¡°íšŒí•˜ëŠ”-ì½”ë“œ-ë¡œì§ì˜-ë³€ê²½"><a href="#ì„¸ì…˜-ì•„ì´ë””ë¥¼-ì¡°íšŒí•˜ëŠ”-ì½”ë“œ-ë¡œì§ì˜-ë³€ê²½" class="headerlink" title="ì„¸ì…˜ ì•„ì´ë””ë¥¼ ì¡°íšŒí•˜ëŠ” ì½”ë“œ ë¡œì§ì˜ ë³€ê²½"></a>ì„¸ì…˜ ì•„ì´ë””ë¥¼ ì¡°íšŒí•˜ëŠ” ì½”ë“œ ë¡œì§ì˜ ë³€ê²½</h4><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” í•¨ìˆ˜ì˜ êµ¬í˜„ì„ ì œëŒ€ë¡œ í™•ì¸í•˜ì§€ ëª»í•œ ìƒíƒœì—ì„œ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬í•œ ë‚˜ì˜ ì‹¤ìˆ˜ ì¸ ê²ƒì€ ëª…í™•í•˜ë‹¤. ServletRequestAttributesë¥¼ í†µí•´ ì„¸ì…˜ ì•„ì´ë””ë¥¼ ì‰½ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆìœ¼ë‚˜ ìƒí™©ì— ë”°ë¼ ì˜ˆìƒí•˜ì§€ ëª»í–ˆë˜ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ì—ˆìœ¼ë¯€ë¡œ ì„¸ì…˜ ì•„ì´ë””ë¥¼ ì¡°íšŒí•˜ëŠ” ì½”ë“œë¥¼ HttpServletRequestë¡œë¶€í„° í˜„ì¬ ìŠ¤ë ˆë“œ ë¡œì»¬ ë‚´ì— ì„¸ì…˜ì´ ìˆë‹¤ë©´ ê°€ì ¸ì˜¤ë„ë¡ ë³€ê²½í–ˆë‹¤. ì´ì œëŠ” ìƒˆë¡œìš´ ì„¸ì…˜ì„ ë§Œë“œëŠ” ê³¼ì •ì´ ì—†ìœ¼ë¯€ë¡œ í† í° ê¸°ë°˜ APIê°€ ìš”ì²­ë  ë•Œ ë ˆë””ìŠ¤ì— ë¬´ìˆ˜íˆ ë§ì€ ì„¸ì…˜ í‚¤ê°€ ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<h4 id="ìš´ì˜ì ì¸-ì¸¡ë©´ì˜-ë ˆë””ìŠ¤-ì˜µì…˜-ê¶Œê³ "><a href="#ìš´ì˜ì ì¸-ì¸¡ë©´ì˜-ë ˆë””ìŠ¤-ì˜µì…˜-ê¶Œê³ " class="headerlink" title="ìš´ì˜ì ì¸ ì¸¡ë©´ì˜ ë ˆë””ìŠ¤ ì˜µì…˜ ê¶Œê³ "></a>ìš´ì˜ì ì¸ ì¸¡ë©´ì˜ ë ˆë””ìŠ¤ ì˜µì…˜ ê¶Œê³ </h4><pre class="language-conf" data-language="conf"><code class="language-conf">tcp-backlog 1024
maxmemory 400mb
maxmemory-policy allkeys-lfu</code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">ulimit</span> <span class="token parameter variable">-n</span> <span class="token number">65535</span>
<span class="token builtin class-name">echo</span> <span class="token string">'net.ipv4.tcp_max_syn_backlog=1024'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">'net.core.somaxconn = 65535'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">'vm.overcommit_memory = 1'</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> never <span class="token operator">></span> /sys/kernel/mm/transparent_hugepage/enabled</code></pre>

<p>ë ˆë””ìŠ¤ ê²°í•¨ìœ¼ë¡œ ì¸í•´ í™•ì¸ëœ ë ˆë””ìŠ¤ ì˜µì…˜ì— ëŒ€í•œ ë¬¸ì œë„ ê²€í† í•˜ì—¬ ìœ„ì™€ ê°™ì´ ìš´ì˜ì ì¸ ì¸¡ë©´ì—ì„œì˜ ì˜µì…˜ì„ ì •ë¦¬í•œ í›„ ë ˆë””ìŠ¤ ì„œë²„ í™˜ê²½ì— ì ìš©í•  ì¤€ë¹„ë¥¼ í•˜ê³  ìˆë‹¤. í•œê°€ì§€ ëª…í™•í•˜ì§€ ì•Šì€ ë¶€ë¶„ì€ ìµœëŒ€ ë©”ëª¨ë¦¬ ì˜µì…˜ì— ì ìš©ë˜ì–´ì•¼í•  ì ë‹¹í•œ ìˆ˜ì¹˜ê°€ ë¬´ì—‡ì´ëƒì¸ë° BGSAVEë¥¼ í†µí•´ RDB ìŠ¤ëƒ…ìƒ·ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° Fork ë°©ì‹ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë³µì œí•˜ì—¬ ë¤í”„ íŒŒì¼ì„ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë‘ë°° ì´ìƒì´ ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê°ì•ˆí•œë‹¤ë©´ ì ˆë°˜ ì´í•˜ì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•  ê²ƒ ê°™ë‹¤. ë”êµ¬ë‚˜ ë ˆë””ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ CPUë‚˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°±ì‹  í”„ë¡œê·¸ë¨ì´ êµ¬ë™ì¤‘ì´ë¯€ë¡œ ì¸í„°ë„·ì— ì •ë¦¬ëœ 60% ì •ë„ì˜ ë©”ëª¨ë¦¬ ì„¤ì •ì€ ì í•©í•˜ì§€ ì•Šë‹¤ê³  ìƒê°ëœë‹¤.</p>
<h4 id="íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-íšŒê³ "><a href="#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-íšŒê³ " class="headerlink" title="íŠ¸ëŸ¬ë¸”ìŠˆíŒ… íšŒê³ "></a>íŠ¸ëŸ¬ë¸”ìŠˆíŒ… íšŒê³ </h4><p>ê°œë°œìë¡œì¨ëŠ” ìƒê°ì§€ë„ ëª»í•˜ê²Œ ë‹¨ í•œì¤„ì˜ ì½”ë“œë¡œ ì¸í•˜ì—¬ ì‹œìŠ¤í…œì„ ë§ˆë¹„ì‹œí‚¤ëŠ” ê²½í—˜ì„ í•œ í° ì´ìŠˆì˜€ìœ¼ë©° ê³ ê°ì˜ ì…ì¥ì—ì„œëŠ” ì‚¬ìš©ì¤‘ì¸ ì‹œìŠ¤í…œì— ëŒ€í•œ ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ ë¬¸ì œì‚¼ì„ ìˆ˜ ìˆëŠ” ê±´ì´ì—ˆë‹¤. ì•„ë¬´íŠ¼ ì¡°ì§ì—ì„œëŠ” ì´ì— ëŒ€í•œ ì¥ì•  ë³´ê³ ë¥¼ ê³ ê° ì¸¡ì—ê²Œ ì „ë‹¬í•˜ê¸° ìœ„í•˜ì—¬ ê´€ë ¨ ì •ë³´ë¥¼ ì •ë¦¬í•˜ê³  ìˆìœ¼ë©° ê´€ë ¨ ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì–´ë–¤ ì¡°ì¹˜ë¥¼ í•  ê²ƒì¸ì§€ë¥¼ ê³ ë¯¼í•˜ê³  ìˆë‹¤. ì´ ë¬¸ì œì— ëŒ€í•´ì„œ ëŒì•„ë³´ë©´ì„œ í™•ì¸í•˜ê²Œ ëœ ì•„ë˜ì˜ ê¸€ë“¤ì„ ê³µìœ í•˜ë©° ë§ˆì¹˜ê³ ì í•œë‹¤.</p>
<ul>
<li><a href="https://perfectacle.github.io/2019/05/29/redis-monitoring/">(Troubleshooting) ë ˆë””ìŠ¤ ì‚¬ë§ì¼ê¸°</a></li>
<li><a href="https://www.youtube.com/watch?v=92NizoBL4uA">Redis ì•¼ë¬´ì§€ê²Œ ì‚¬ìš©í•˜ê¸°</a></li>
</ul>
]]></content>
      <tags>
        <tag>ë ˆë””ìŠ¤</tag>
        <tag>ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤</tag>
      </tags>
  </entry>
  <entry>
    <title>ì—”ì§„ì—‘ìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</title>
    <url>/reverse-proxy-using-nginx/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p><img data-src="https://digital.com/wp-content/uploads/what-is-nginx.png"></p>
<p>ì˜¤ëŠ˜ì€ ì›¹ ì„œë¹„ìŠ¤ ì¸í”„ë¼ì—ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Nginxì™€ í•¨ê»˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.</p>
<h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>NginxëŠ” ì •ì  íŒŒì¼ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” HTTP ì›¹ ì„œë²„ì…ë‹ˆë‹¤. ìµœê·¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ë°°í¬í•˜ëŠ” ê²½ìš° ë‹¨ë…ìœ¼ë¡œ êµ¬ì„±í•˜ì§€ ì•Šê³  Nginxë¥¼ í•¨ê»˜ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ Elastic Beanstalk í™˜ê²½ì—ì„œëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì„ ìœ„í•˜ì—¬ Nginxë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì•ì—ì„œ ë¨¼ì € íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
<h3 id="ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ"><a href="#ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ" class="headerlink" title="ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ"></a>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</h3><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œëŠ” <strong>ì‚¬ìš©ìì˜ ìš”ì²­ì— ëŒ€í•œ ì‚¬í›„ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì„ ì „ë‹¬ë˜ë„ë¡ í•˜ëŠ” ê²ƒ</strong>ì„ ë§í•©ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì˜ ì¥ì ì€ ì‚¬ìš©ìì—ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì‹¤í–‰ë˜ëŠ” ì•„ì´í”¼ ë˜ëŠ” í¬íŠ¸ë¥¼ ê³µê°œí•˜ì§€ ì•Šê±°ë‚˜ ì˜ëª»ëœ ìš”ì²­ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê¹Œì§€ ì „ë‹¬ë˜ì§€ ì•Šë„ë¡í•˜ì—¬ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="ë¡œë“œ-ë°¸ëŸ°ì‹±"><a href="#ë¡œë“œ-ë°¸ëŸ°ì‹±" class="headerlink" title="ë¡œë“œ ë°¸ëŸ°ì‹±"></a>ë¡œë“œ ë°¸ëŸ°ì‹±</h3><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•¨ìœ¼ë¡œì¨ ì‚¬ìš©ìëŠ” íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì§ì ‘ ìš”ì²­í•˜ëŠ” êµ¬ì¡°ê°€ ì•„ë‹ˆë¯€ë¡œ ë™ì‹œì— ë°œìƒí•˜ëŠ” ìˆ˜ ë§ì€ ì›¹ ìš”ì²­ì„ 1ê°œ ì´ìƒìœ¼ë¡œ ì‹¤í–‰ëœ ë‹¤ìˆ˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ <strong>ë¡œë“œë°¸ëŸ°ì‹±(íŠ¸ë˜í”½ì„ ë¶„ì‚°)</strong> í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ëŒ€í•œ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë¬¼ë¡ , ì—í”½ ê²Œì„ì¦ˆì˜ <a href="https://www.epicgames.com/fortnite/ko/news/postmortem-of-service-outage-at-3-4m-ccu">340ë§Œ ë™ì ‘ì ì´í›„ ì„œë¹„ìŠ¤ ë‹¤ìš´ ê´€ë ¨ ì‚¬í›„ ë¶„ì„ ë‚´ìš©</a>ì²˜ëŸ¼ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•œë‹¤ê³ í•´ì„œ ëª¨ë“  íŠ¸ë˜í”½ì„ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</p>
<h3 id="SSL-ì˜¤í”„ë¡œë“œ"><a href="#SSL-ì˜¤í”„ë¡œë“œ" class="headerlink" title="SSL ì˜¤í”„ë¡œë“œ"></a>SSL ì˜¤í”„ë¡œë“œ</h3><p>Nginxë¡œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•¨ìœ¼ë¡œì¨ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì‚¬í›„ì²˜ë¦¬ ì¤‘ í•˜ë‚˜ëŠ” <strong>SSL ì˜¤í”„ë¡œë“œ</strong>ì…ë‹ˆë‹¤. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ëŠ” ì›¹ ì„œë²„ì—ì„œ SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ê³  <a href="https://www.f5.com/services/resources/glossary/ssl-termination">SSL Termination</a>ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ íŠ¸ë˜í”½ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ìˆ˜í–‰í•˜ë˜ ë¶€í•˜ì™€ ê´€ë¦¬ í¬ì¸íŠ¸ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì •ì -íŒŒì¼-ìºì‹œ"><a href="#ì •ì -íŒŒì¼-ìºì‹œ" class="headerlink" title="ì •ì  íŒŒì¼ ìºì‹œ"></a>ì •ì  íŒŒì¼ ìºì‹œ</h3><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ë°°í¬í•˜ëŠ” ì •ì  íŒŒì¼ì— ëŒ€í•´ì„œ Nginx ìì²´ì ìœ¼ë¡œ ìºì‹œí•˜ì—¬ ì •ì  íŒŒì¼ì„ ì‘ë‹µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì´ ë§ì•„ì§ˆ ê²½ìš° ì •ì  íŒŒì¼ì„ ì‘ë‹µí•˜ê¸° ìœ„í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ë¶€ë‹´ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ì€ íŠ¸ë˜í”½ì„ ì ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì›¹ ì„œë²„ì—ì„œ ì •ì  íŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ë¶€ë‹´ì„ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì°½ì²œí–¥ë¡œë‹˜ì˜ <a href="https://jojoldu.tistory.com/60">Nginx Cache ë¬¸ì œ í•´ê²° ì‹œë¦¬ì¦ˆ</a>ì²˜ëŸ¼ ìºì‹œë¥¼ ì˜ êµ¬ì„±í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="Nginx-ë„ì»¤-ì»¨í…Œì´ë„ˆ-í•™ìŠµ"><a href="#Nginx-ë„ì»¤-ì»¨í…Œì´ë„ˆ-í•™ìŠµ" class="headerlink" title="Nginx ë„ì»¤ ì»¨í…Œì´ë„ˆ í•™ìŠµ"></a>Nginx ë„ì»¤ ì»¨í…Œì´ë„ˆ í•™ìŠµ</h2><p>ë„ì»¤ëŠ” ì–´ë– í•œ ê¸°ìˆ ì„ í•™ìŠµí•˜ê¸° ìœ„í•œ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸°ì— ì í•©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ í•¨ê»˜ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” Nginxë¥¼ ì„¤ì •í•´ë³´ë©° í•™ìŠµí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ì €ì˜ í•™ìŠµ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. í™˜ê²½ì´ ë‹¤ë¥¸ ê²½ìš° ë‹¤ë¥¸ ë¶€ë¶„ì´ ì¡´ì¬í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. </p>
<ul>
<li>Docker version 20.10.8, build 3967b7d  </li>
<li>Nginx 1.21.3  </li>
<li>Amazon Corretto 11</li>
</ul>
<p>ê·¸ë¦¬ê³  í•™ìŠµì— í™œìš©ëœ íŒŒì¼ë“¤ì€ <a href="https://github.com/kdevkr/nginx.conf">ê¹ƒí—ˆë¸Œ</a>ì— ê³µìœ ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h3 id="ê¸°ë³¸-ì»¨í…Œì´ë„ˆ-í™˜ê²½"><a href="#ê¸°ë³¸-ì»¨í…Œì´ë„ˆ-í™˜ê²½" class="headerlink" title="ê¸°ë³¸ ì»¨í…Œì´ë„ˆ í™˜ê²½"></a>ê¸°ë³¸ ì»¨í…Œì´ë„ˆ í™˜ê²½</h3><p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ Nginxê°€ êµ¬ë™ë˜ë„ë¡ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span> 
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21.3<span class="token punctuation">-</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> amazoncorretto<span class="token punctuation">:</span>11<span class="token punctuation">-</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'java -jar /etc/app.jar'</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./demo<span class="token punctuation">-</span>0.0.1<span class="token punctuation">-</span>SNAPSHOT.jar<span class="token punctuation">:</span>/etc/app.jar</code></pre>

<p>ë„ì»¤ ì»´í¬ì¦ˆ ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">docker compose up -d
[+] Running 3&#x2F;3
 - Network nginx_default    Created
 - Container nginx_nginx_1  Started
 - Container nginx_app_1    Started</code></pre>

<p>ì œ ì»´í“¨í„° <strong>í˜¸ìŠ¤íŠ¸ íŒŒì¼ì— 127.0.0.1ì— ëŒ€í•˜ì—¬ mambo.krê°€ ì§€ì •</strong>ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ Nginxê°€ 80í¬íŠ¸ì— ëŒ€í•œ ìš”ì²­ì— ëŒ€í•´ ê¸°ë³¸ í˜ì´ì§€ë¥¼ ì‘ë‹µí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-02.png"></p>
<h3 id="ê¸°ë³¸-Nginx-ì„¤ì •"><a href="#ê¸°ë³¸-Nginx-ì„¤ì •" class="headerlink" title="ê¸°ë³¸ Nginx ì„¤ì •"></a>ê¸°ë³¸ Nginx ì„¤ì •</h3><p>ë„ì»¤ ì»´í¬ì¦ˆ ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆ ì§„ì… í›„ ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ì–´ìˆëŠ” Nginx ì„¤ì •ì„ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">docker compose exec nginx sh
&#x2F; # cat &#x2F;etc&#x2F;nginx&#x2F;nginx.conf</code></pre>

<p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-03.png"></p>
<p>80í¬íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì›¹ ì„œë²„ ì„¤ì •ì€ <strong>&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf</strong>ì— ìœ„ì¹˜í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ default.confì— ì •ì˜ëœ ë‚´ìš© ì¤‘ ì¼ë¶€ì…ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">&#x2F;etc&#x2F;nginx&#x2F;conf.d # cat default.conf
server &#123;
    listen       80;
    listen  [::]:80;
    server_name  localhost;

    #access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;host.access.log  main;

    location &#x2F; &#123;
        root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;
        index  index.html index.htm;
    &#125;
    # ...
&#125;</code></pre>

<p>server ë¸”ë¡ì„ í†µí•´ 80í¬íŠ¸ë¥¼ ìˆ˜ì‹ (listen)í•˜ì˜€ê³  ë£¨íŠ¸ ê²½ë¡œ(&#x2F;)ì— ëŒ€í•œ ìš”ì²­ì„ <strong>&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;htmlì— ìœ„ì¹˜í•œ index.html</strong>ì´ë¼ëŠ” ì •ì  íŒŒì¼ì„ ì‘ë‹µí•˜ë„ë¡ ì •ì˜ë˜ì–´ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="ì‚¬ìš©ì-ì •ì˜-Nginx-ì„¤ì •"><a href="#ì‚¬ìš©ì-ì •ì˜-Nginx-ì„¤ì •" class="headerlink" title="ì‚¬ìš©ì ì •ì˜ Nginx ì„¤ì •"></a>ì‚¬ìš©ì ì •ì˜ Nginx ì„¤ì •</h3><p>ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ì–´ìˆëŠ” nginx.confë¥¼ ë³¼ë¥¨ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•´ë³´ê² ìŠµë‹ˆë‹¤. ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œì— Nginx ì„œë¹„ìŠ¤ì— ë³¼ë¥¨ì„ ì§€ì •í•˜ì—¬ ë¡œì»¬ íŒŒì¼ë¡œ ì €ì¥ë˜ì–´ìˆëŠ” nginx.confë¥¼ ì§€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span> 
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21.3<span class="token punctuation">-</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
  <span class="token comment">#app:</span>
  <span class="token comment">#  ...</span></code></pre>

<p>í˜¸ìŠ¤íŠ¸ì˜ 443í¬íŠ¸ë¥¼ Nginx ì„œë¹„ìŠ¤ì— ë°”ì¸ë”©í•˜ì˜€ìœ¼ë¯€ë¡œ 443í¬íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡ ì •ì˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> localhost 127.0.0.1 mambo.kr</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/server.crt</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span> HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://app:8080</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œâ€¦</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">nginx: [emerg] no &quot;events&quot; section in configuration</code></pre>

<p>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë„¤ìš”. nginx.confì— events ë¸”ë¡ì€ í•„ìˆ˜ë¡œ ì¡´ì¬í•´ì•¼í•˜ëŠ” ë“¯ í•©ë‹ˆë‹¤.</p>
<h4 id="í”„ë¡œì„¸ìŠ¤-ë°-ì²˜ë¦¬-ì˜µì…˜"><a href="#í”„ë¡œì„¸ìŠ¤-ë°-ì²˜ë¦¬-ì˜µì…˜" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ë° ì²˜ë¦¬ ì˜µì…˜"></a>í”„ë¡œì„¸ìŠ¤ ë° ì²˜ë¦¬ ì˜µì…˜</h4><p>NginxëŠ” ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤ì™€ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ì‹¤ì œë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ê°€ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì‚¬ìš©ê°€ëŠ¥í•œ CPU ì½”ì–´ ìˆ˜ ë§Œí¼ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë¥¼ í• ë‹¹í•˜ëŠ”ê²Œ ì¢‹ìœ¼ë©° ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ë³„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì—´ë¦° íŒŒì¼ ê°œìˆ˜ ì œí•œì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">worker_processes</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span> <span class="token number">65536</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">worker_connections</span> <span class="token number">1024</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">multi_accept</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-01.png" alt="Optimizations - Event Models"></p>
<p>ìš´ì˜ì²´ì œë³„ <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/optimizations/#event-models">íš¨ìœ¨ì ì¸ ì—°ê²° ì²˜ë¦¬ ë°©ì‹</a>ì´ ìˆìœ¼ë©° ë¦¬ëˆ…ìŠ¤ ì»¤ë„ 2.6+ì—ì„œëŠ” <strong>epoll</strong>ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Nginx ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì€ ìƒíƒœì´ë¯€ë¡œ ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">docker compose up -d
[+] Running 2&#x2F;2
 - Container nginx_nginx_1  Started
 - Container nginx_app_1    Running</code></pre>

<p>ì˜ ì‹¤í–‰ëœê²ƒìœ¼ë¡œ ë³´ì´ë‹ˆ <a href="https://mambo.krìœ¼ë¡œ/">https://mambo.krìœ¼ë¡œ</a> ì ‘ì†í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-04.png"></p>
<p>443 í¬íŠ¸ë¡œ ìš”ì²­ëœ íŠ¸ë˜í”½ì´ Nginxë¥¼ ê²½ìœ í•˜ì—¬ 8080í¬íŠ¸ë¡œ ì‹¤í–‰ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì „ë‹¬ë˜ê³  ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ë°”ë¡œ ì´ê²ƒì„ <strong>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</strong>ë¼ê³  í•©ë‹ˆë‹¤.</p>
<h4 id="ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ-1"><a href="#ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ-1" class="headerlink" title="ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ"></a>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</h4><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì–´ë””ì„œ ìš”ì²­í–ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ Nginxì™€ ê°™ì€ ë¦¬ë²„ì‹œ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ëŠ” ì›¹ ì„œë²„ì—ì„œëŠ” í”„ë¡ì‹œ ê´€ë ¨ í—¤ë”ë¥¼ í•¨ê»˜ ì „ë‹¬í•˜ì—¬ ì–´ë””ì„œ ìš”ì²­ë˜ì—ˆëŠ”ì§€ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> localhost 127.0.0.1 mambo.kr</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/server.crt</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span> HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://app:8080</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ì›¹ì†Œì¼“-í”„ë¡ì‹œ"><a href="#ì›¹ì†Œì¼“-í”„ë¡ì‹œ" class="headerlink" title="ì›¹ì†Œì¼“ í”„ë¡ì‹œ"></a>ì›¹ì†Œì¼“ í”„ë¡ì‹œ</h4><p>HTTP 1.1 í”„ë¡œí† ì½œì€ Hop-By-Hopì´ë¼ê³  í•˜ëŠ” Upgrade í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë„¥ì…˜ì„ ë³€ê²½í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì œê³µí•©ë‹ˆë‹¤. <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism#upgrading_to_a_websocket_connection">Upgrading to a WebSocket connection</a>ê³¼ <a href="http://nginx.org/en/docs/http/websocket.html">WebSocket proxying</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì›¹ì†Œì¼“ í”„ë¡ì‹œì— ëŒ€í•œ ì„¤ì •ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">location</span> /ws/</span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">"upgrade"</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">65s</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>í”„ë¡ì‹œ ì„œë²„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 60ì´ˆ ì´ë‚´ì— ì „ë‹¬ë˜ëŠ” ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ì—°ê²°ì„ í•´ì§€í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 1ë¶„ë§ˆë‹¤ ì›¹ì†Œì¼“ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°ë¥¼ ìœ„í•´ proxy_read_timeoutì„ ì¡°ì •í•´ì•¼í•©ë‹ˆë‹¤.</p>
</blockquote>
<h4 id="ì´ë²¤íŠ¸-ìŠ¤íŠ¸ë¦¼-í”„ë¡ì‹œ"><a href="#ì´ë²¤íŠ¸-ìŠ¤íŠ¸ë¦¼-í”„ë¡ì‹œ" class="headerlink" title="ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ í”„ë¡ì‹œ"></a>ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ í”„ë¡ì‹œ</h4><p>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„±ì—ì„œ SSE(Server Sent Event)ì™€ ê°™ì€ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë²„í¼ë§ ì˜µì…˜ì„ ë¹„í™œì„±í™” í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/13672743/eventsource-server-sent-events-through-nginx">EventSource &#x2F; Server-Sent Events through Nginx</a></li>
<li><a href="https://serverfault.com/questions/801628/for-server-sent-events-sse-what-nginx-proxy-configuration-is-appropriate">For Server-Sent Events (SSE) what Nginx proxy configuration is appropriate?</a></li>
</ul>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">proxy_buffering</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_cache</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="HTTPS-ë¦¬ë‹¤ì´ë ‰íŠ¸"><a href="#HTTPS-ë¦¬ë‹¤ì´ë ‰íŠ¸" class="headerlink" title="HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸"></a>HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸</h4><p>ì¼ë°˜ HTTPë¥¼ ì‚¬ìš©í•˜ì—¬ 80í¬íŠ¸ë¡œ ìš”ì²­í•œ ê²ƒì„ HTTPSë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìœ ë„í•˜ê¸° ìœ„í•´ì„œ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‘ë‹µì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ì •ì -íŒŒì¼-ë°°í¬"><a href="#ì •ì -íŒŒì¼-ë°°í¬" class="headerlink" title="ì •ì  íŒŒì¼ ë°°í¬"></a>ì •ì  íŒŒì¼ ë°°í¬</h4><p>ì¶”ê°€ì ìœ¼ë¡œ ì •ì  íŒŒì¼ì´ í¬í•¨ëœ í´ë”ë¥¼ ë³¼ë¥¨ìœ¼ë¡œ ì§€ì •í•˜ì—¬ Nginxì—ì„œ ì •ì  íŒŒì¼ì„ ì‘ë‹µí•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span> 
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21.3<span class="token punctuation">-</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
      <span class="token punctuation">-</span> ./server.crt<span class="token punctuation">:</span>/etc/nginx/server.crt
      <span class="token punctuation">-</span> ./server.key<span class="token punctuation">:</span>/etc/nginx/server.key
      <span class="token punctuation">-</span> ./static<span class="token punctuation">:</span>/etc/nginx/static</code></pre>

<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">worker_processes</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span> <span class="token number">65536</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">worker_connections</span> <span class="token number">1024</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">multi_accept</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> localhost 127.0.0.1 mambo.kr</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/server.crt</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span> HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://app:8080</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token directive"><span class="token keyword">location</span> /dist/</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">alias</span> /etc/nginx/static/</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">limit_except</span> GET</span> <span class="token punctuation">&#123;</span>
                <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="/images/posts/reverse-proxy-using-nginx/nginx-05.png"></p>
<p>ì •ì  íŒŒì¼ê¹Œì§€ ì‘ë‹µí•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h3 id="Nginx-ì„¤ì •-ìµœì í™”"><a href="#Nginx-ì„¤ì •-ìµœì í™”" class="headerlink" title="Nginx ì„¤ì • ìµœì í™”"></a>Nginx ì„¤ì • ìµœì í™”</h3><p>ì‚¬ìš©ì ì •ì˜í•œ Nginx ì„¤ì •ë§Œìœ¼ë¡œë„ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ì •ì  íŒŒì¼ì„ ë°°í¬í•˜ëŠ”ë°ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ Nginxì—ì„œëŠ” ë” íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ë“¤ì„ ì ìš©í•´ë³´ë©´ì„œ ìµœì í™”í•´ë³´ë„ë¡ í•©ì‹œë‹¤.</p>
<p>Nginx ì„¤ì • ìµœì í™”ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì˜ ê¸€ì„ ì°¸ê³ í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://github.com/denji/nginx-tuning/blob/master/README.md">NGINX Tuning For Best Performance</a>  </li>
<li><a href="https://couplewith.tistory.com/m/entry/%EA%BF%80%ED%8C%81-%EA%B3%A0%EC%84%B1%EB%8A%A5-Nginx%EB%A5%BC%EC%9C%84%ED%95%9C-%ED%8A%9C%EB%8B%9D-1-%EB%94%94%EC%8A%A4%ED%81%AC%EC%9D%98-IO-%EB%B3%91%EB%AA%A9-%EC%A4%84%EC%9D%B4%EA%B8%B0?category=212810">[ê¿€íŒ] ê³ ì„±ëŠ¥ Nginxë¥¼ìœ„í•œ íŠœë‹</a></li>
</ul>
<h4 id="TCP-ì˜µì…˜"><a href="#TCP-ì˜µì…˜" class="headerlink" title="TCP ì˜µì…˜"></a>TCP ì˜µì…˜</h4><p><a href="https://thoughts.t37.net/nginx-optimization-understanding-sendfile-tcp-nodelay-and-tcp-nopush-c55cdd276765">Nginx Optimization: understanding sendfile, tcp_nodelay and tcp_nopush</a>ì—ì„œëŠ” TCP ì˜µì…˜ì„ ì§€ì •í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì„¤ëª…í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì´ ë¹ ë¥¸ ê²½ìš° TCP ìŠ¤íƒì—ì„œ Nagle ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">sendfile</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">tcp_nopush</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">tcp_nodelay</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ì••ì¶•-ì˜µì…˜"><a href="#ì••ì¶•-ì˜µì…˜" class="headerlink" title="ì••ì¶• ì˜µì…˜"></a>ì••ì¶• ì˜µì…˜</h4><p>ì›¹ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ëŠ” ê²ƒì€ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì„ ì¤„ì´ê³  ë¹ ë¥´ê²Œ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤. ì„œë²„ ì„±ëŠ¥ì— ë”°ë¼ ì••ì¶• ë ˆë²¨ì„ ìµœëŒ€í•œìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜í•œ, ì‘ì€ í¬ê¸°ì— ë°ì´í„°ì— ëŒ€í•˜ì—¬ ì••ì¶•ì„ ì‹œë„í•˜ëŠ” ê²ƒë„ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">1k</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">9</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_disable</span> msie6</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_proxied</span> expired no-cache no-store private auth</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_types</span>
        <span class="token comment"># text/html is always compressed by HttpGzipModule</span>
        text/css
        text/javascript
        text/xml
        text/plain
        application/javascript
        application/json
        application/xml
        font/truetype
        font/opentype
        application/vnd.ms-fontobject
        image/svg+xml</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì¼ë°˜ì ìœ¼ë¡œ í…ìŠ¤íŠ¸ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.</p>
<h4 id="ë¡œê·¸-ì˜µì…˜"><a href="#ë¡œê·¸-ì˜µì…˜" class="headerlink" title="ë¡œê·¸ ì˜µì…˜"></a>ë¡œê·¸ ì˜µì…˜</h4><p>ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ I&#x2F;Oë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/error.log crit</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">access_log</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">access_log</span> /var/log/nginx/access.log</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ë³´ì•ˆ-ì˜µì…˜"><a href="#ë³´ì•ˆ-ì˜µì…˜" class="headerlink" title="ë³´ì•ˆ ì˜µì…˜"></a>ë³´ì•ˆ ì˜µì…˜</h4><p>ë§ì€ ì‚¬ëŒë“¤ì´ server_tokens ì˜µì…˜ì„ ë¹„í™œì„±í™”í•˜ì—¬ ì‘ë‹µ í—¤ë”ì— Nginx ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šë„ë¡ ê¶Œì¥í•©ë‹ˆë‹¤. ê³µê²©ìëŠ” Nginxì˜ íŠ¹ì • ë²„ì „ì„ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë” ë§ì€ ì·¨ì•½ì ì— ëŒ€í•œ ê³µê²©ì„ ì‹œë„í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">server_tokens</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="í´ë¼ì´ì–¸íŠ¸-ì˜µì…˜"><a href="#í´ë¼ì´ì–¸íŠ¸-ì˜µì…˜" class="headerlink" title="í´ë¼ì´ì–¸íŠ¸ ì˜µì…˜"></a>í´ë¼ì´ì–¸íŠ¸ ì˜µì…˜</h4><p>ì—°ê²° ìœ ì§€ í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì™€ ìµœëŒ€ ìœ ì§€ ì‹œê°„ ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ í¬ê¸°ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span> <span class="token number">65</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_requests</span> <span class="token number">10000</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">100m</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ë¦¬ëˆ…ìŠ¤-ì»¤ë„-íŒŒë¼ë¯¸í„°"><a href="#ë¦¬ëˆ…ìŠ¤-ì»¤ë„-íŒŒë¼ë¯¸í„°" class="headerlink" title="ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°"></a>ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°</h4><p>Nginx ì˜µì…˜ì„ ì§€ì •í•˜ë”ë¼ë„ ì‹¤ì œë¡œ í—ˆìš©í•  ìˆ˜ ìˆëŠ”ì§€ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŒŒë¼ë¯¸í„°ë¥¼ ê²€í† í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<ul>
<li><a href="https://ma.ttias.be/linux-increase-ip_local_port_range-tcp-port-range/">Linux increase ip_local_port_range TCP port range</a></li>
<li><a href="https://couplewith.tistory.com/entry/%EA%BF%80%ED%8C%81-%EA%B3%A0%EC%84%B1%EB%8A%A5-Nginx%EB%A5%BC%EC%9C%84%ED%95%9C-%ED%8A%9C%EB%8B%9D-3-TCP-%EA%B4%80%EB%A0%A8-%EC%B2%98%EB%A6%AC%EB%9F%89-%EB%8A%98%EB%A6%AC%EA%B8%B0-%EB%A6%AC%EB%88%85%EC%8A%A4%EC%BB%A4%EB%84%90%ED%8A%9C%EB%8B%9D">TCP ê´€ë ¨ ì²˜ë¦¬ëŸ‰ ëŠ˜ë¦¬ê¸° - ë¦¬ëˆ…ìŠ¤ ì»¤ë„ íŠœë‹</a></li>
</ul>
<h3 id="Nginx-ì„¤ì •-ë§ˆë¬´ë¦¬"><a href="#Nginx-ì„¤ì •-ë§ˆë¬´ë¦¬" class="headerlink" title="Nginx ì„¤ì • ë§ˆë¬´ë¦¬"></a>Nginx ì„¤ì • ë§ˆë¬´ë¦¬</h3><p>ì•Œì•„ë³¸ ë‚´ìš©ì„ ì¡°í•©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Nginx ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><code class="language-nginx"><span class="token directive"><span class="token keyword">user</span> nginx</span><span class="token punctuation">;</span>

<span class="token comment"># í”„ë¡œì„¸ìŠ¤ ì˜µì…˜</span>
<span class="token directive"><span class="token keyword">worker_processes</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span> <span class="token number">65536</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">worker_connections</span> <span class="token number">1024</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">multi_accept</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token directive"><span class="token keyword">pid</span> /var/run/nginx.pid</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/error.log crit</span><span class="token punctuation">;</span>
<span class="token comment">#thread_pool backend threads=32 max_queue=65536;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span> application/octet-stream</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">access_log</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">ssl_session_cache</span> shared:SSL:10m</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">10m</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">upstream</span> backend</span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">server</span> app:8080</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">keepalive</span> <span class="token number">128</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment"># HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment"># HTTPS ë° HTTP2 ì§€ì›</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl http2</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span> localhost 127.0.0.1 mambo.kr</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/server.crt</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span> HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>

        <span class="token comment"># ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_redirect</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_buffering</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>

            <span class="token comment">#aio threads=backend;</span>
            <span class="token directive"><span class="token keyword">access_log</span> /var/log/nginx/access.log</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment"># ë¦¬ë²„ìŠ¤ ì›¹ì†Œì¼“ í”„ë¡ì‹œ</span>
        <span class="token directive"><span class="token keyword">location</span> /ws/</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
            <span class="token comment"># hop-by-hop</span>
            <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">"upgrade"</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">65s</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token directive"><span class="token keyword">location</span> /dist/</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">alias</span> /etc/nginx/static/</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">limit_except</span> GET</span> <span class="token punctuation">&#123;</span>
                <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment"># Optimization</span>
    <span class="token directive"><span class="token keyword">server_tokens</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">keepalive_timeout</span> <span class="token number">65s</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">100m</span></span><span class="token punctuation">;</span>

    <span class="token comment"># TCP ì˜µì…˜</span>
    <span class="token directive"><span class="token keyword">sendfile</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">tcp_nopush</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">tcp_nodelay</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>

    <span class="token comment"># Gzip ì••ì¶• ì˜µì…˜</span>
    <span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">10k</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">9</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_disable</span> msie6</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_proxied</span> expired no-cache no-store private auth</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">gzip_types</span>
        <span class="token comment"># text/html is always compressed</span>
        text/css
        text/javascript
        text/xml
        text/plain
        application/javascript
        application/json
        application/xml
        font/truetype
        font/opentype
        application/vnd.ms-fontobject
        image/svg+xml</span><span class="token punctuation">;</span>

    <span class="token comment"># íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ë¹„í™œì„±í™”</span>
    <span class="token directive"><span class="token keyword">autoindex</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ë˜ì–´ìˆëŠ” Nginx í”„ë¡œì„¸ìŠ¤ì— ë³€ê²½ëœ ì„¤ì •ì„ ë°˜ì˜í•˜ë©´ì„œ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">docker compose exec nginx nginx -t
nginx: the configuration file &#x2F;etc&#x2F;nginx&#x2F;nginx.conf syntax is ok
nginx: configuration file &#x2F;etc&#x2F;nginx&#x2F;nginx.conf test is successful

docker compose exec nginx nginx -s reload
2021&#x2F;09&#x2F;25 09:38:03 [notice] 34#34: signal process started</code></pre>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤ìŠ¤ë¡œ ë¦¬ë·°í•˜ëŠ” ìŠµê´€ì„ ê°€ì§€ì</title>
    <url>/review-yourself/</url>
    <content><![CDATA[<p>ì‹ ì… ì›¹ ê°œë°œìë“¤ì˜ ì´ë ¥ì„œë‚˜ ì¸í„°ë·° ê³¼ì •ì—ì„œ íšŒì‚¬ ë‚´ì— ì½”ë“œ ë¦¬ë·° ë¬¸í™”ê°€ ìˆëŠ”ì§€ ë¬¼ì–´ë³´ëŠ” ì‚¬ëŒì´ ë§ì€ ê²ƒ ê°™ë‹¤. ì–´ë–¤ ì‚¬ëŒì€ ìì‹ ì´ ì‘ì„±í•œ ì½”ë“œê°€ íš¨ìœ¨ì ì¸ì§€ í‰ê°€ë°›ê³  ì‹¶ì€ ë‹ˆì¦ˆì´ê³  ì–´ë–¤ ì‚¬ëŒì€ íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì²˜ìŒì˜ ëª©í‘œì™€ëŠ” ë‹¤ë¥´ê²Œ ì§§ì€ ê¸°ê°„ì— ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚´ê¸° ìœ„í•´ ë¦¬ë·° ê³¼ì •ì„ ìƒëµí•  ìˆ˜ ë°–ì— ì—†ì—ˆë˜ ê²½í—˜ì„ ì½”ë“œ ë¦¬ë·° ë¬¸í™”ê°€ ì •ì°©ëœ ì¡°ì§ì—ì„œ ê²½í—˜í•˜ê³ ì í•˜ëŠ” ê²ƒ ê°™ë‹¤. ì†”ì§í•˜ê²Œ ì´ì•¼ê¸°í•˜ìë©´ íšŒì‚¬ ë‚´ì— ì½”ë“œ ë¦¬ë·° ë¬¸í™”ëŠ” ì—†ìœ¼ë©° ë‚´ê°€ ì†í•œ íŒ€ì— í•œí•´ì„œë§Œ ì£¼ë‹ˆì–´ ê°œë°œìë“¤ì˜ ìš”ì²­ì— ì˜í•´ì„œ ì½”ë“œ ë¦¬ë·° ê³¼ì •ì„ ë„ì…í•˜ì—¬ í”„ë¡œì íŠ¸ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆë‹¤. ì•„ë¬´ë˜ë„ íŒ€ì¥ì´ë¼ëŠ” ì§ë¬´ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆê¸°ì— ë‚´ì‹¬ ì›í–ˆë˜ ê²ƒì„ íŒ€ì—ì„œ ìš”ì²­í–ˆì„ ì§€ ëª¨ë¥¼ ì¼ì´ë‹¤. ì•„ë¬´íŠ¼ ì½”ë“œ ë¦¬ë·° ê³¼ì •ì„ ìˆ˜í–‰í•œë‹¤ê³  í•´ì„œ í˜„ì‹¤ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•˜ê³  ìƒê°ë³´ë‹¤ ë§ì€ ê²ƒë“¤ì„ ì²˜ë¦¬í•´ì•¼í•˜ë¯€ë¡œ ëª¨ë‘ê°€ ë§Œì¡±í• ë§Œí•œ ìƒì„¸í•œ ì½”ë“œ ë¦¬ë·°ëŠ” ì—†ë‹¤ê³  ë§í•  ìˆ˜ ìˆë‹¤.</p>
<p>ì¸í„°ë„·ì—ì„œ ì½”ë“œ ë¦¬ë·°ì— ëŒ€í•œ ê¸€ë“¤ì„ ì‚´í´ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ë§ì€ ì¡°ì§ì—ì„œ ê°œë°œìë“¤ì´ ì½”ë“œ ë¦¬ë·°ì— ëŒ€í•œ ì˜¤í•´ë¥¼ í–ˆì—ˆê³  í˜„ì¬ì˜ íŒ€ì—ì„œë„ ì½”ë“œ ë¦¬ë·°ì— ëŒ€í•œ ì‘ì€ ì˜¤í•´ë“¤ì„ ì¡°ê¸ˆì”© í•´ì†Œì— ë‚˜ê°€ê³  ìˆë‹¤ê³  ìƒê°í•œë‹¤. ì½”ë“œ ë¦¬ë·° ê³¼ì •ì—ì„œ ê°€ì¥ í° ì˜¤í•´ëŠ” ê²½í—˜ì´ ë§ì€ ê°œë°œìì˜ ì˜ê²¬ì´ ì •ë‹µì´ë¼ê³  ê°€ì •í•˜ëŠ” ê²ƒì´ë©° ì‘ì€ ì˜¤í•´ëŠ” ì½”ë“œ ë¦¬ë·°ë¥¼ í†µí•´ ëª¨ë“  ê²ƒì„ ì²´í¬í•´ì•¼í•œë‹¤ê³  ìƒê°í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì•ì„œ ì´ì•¼ê¸°í–ˆë“¯ì´ ë¹ ë¥´ê²Œ ë§ì€ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•´ì•¼í•˜ë¯€ë¡œ ì½”ë“œ ë¦¬ë·°ì— ë§ì€ ì‹œê°„ì„ ì†Œë¹„í•˜ê¸°ì—” ì–´ë ¤ìš´ê²Œ í˜„ì‹¤ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ìµœì†Œí•œ ëŒ€ë¶€ë¶„ì˜ ê°œë°œìë“¤ì´ ê¸°ë³¸ìœ¼ë¡œ ìƒê°í•˜ëŠ” ì‚¬ì†Œí•œ ê´€ì ì— ëŒ€í•´ì„œ ìŠ¤ìŠ¤ë¡œ ë¦¬ë·°í•˜ëŠ” ê³¼ì •ê³¼ ìŠµê´€ì´ í•„ìš”í•´ì§„ë‹¤ëŠ” ì˜ë¯¸ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.</p>
<p>ê·¸ë ‡ë‹¤ë©´, ê°œë°œìê°€ ìŠ¤ìŠ¤ë¡œ ë¦¬ë·°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë¬´ì—‡ì´ ìˆì„ì§€ ê°™ì´ ìƒê°í•´ë³´ì.</p>
<h4 id="ê¹ƒ-ì»¤ë°‹-ê³¼ì •ì—ì„œ-ë¶ˆí•„ìš”í•œ-ë°˜ì˜ì‚¬í•­ì„-ë‹¤ì‹œ-í•œë²ˆ-ì²´í¬í•˜ê¸°"><a href="#ê¹ƒ-ì»¤ë°‹-ê³¼ì •ì—ì„œ-ë¶ˆí•„ìš”í•œ-ë°˜ì˜ì‚¬í•­ì„-ë‹¤ì‹œ-í•œë²ˆ-ì²´í¬í•˜ê¸°" class="headerlink" title="ê¹ƒ ì»¤ë°‹ ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ë°˜ì˜ì‚¬í•­ì„ ë‹¤ì‹œ í•œë²ˆ ì²´í¬í•˜ê¸°"></a>ê¹ƒ ì»¤ë°‹ ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ë°˜ì˜ì‚¬í•­ì„ ë‹¤ì‹œ í•œë²ˆ ì²´í¬í•˜ê¸°</h4><p>ì‚¬ì†Œí•œ ì‹¤ìˆ˜ë¡œ ì¸í•´ ê¹ƒ ì»¤ë°‹ ê³¼ì •ì—ì„œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ì— ëŒ€í•œ ë‚´ìš©ê³¼ ìƒê´€ì—†ëŠ” ë³€ê²½ì‚¬í•­ì´ ë‚˜ë„ ëª¨ë¥´ê²Œ í¬í•¨ë  ìˆ˜ ìˆë‹¤. ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¦¬ë·°ì–´ ì…ì¥ì—ì„œëŠ” ìš”êµ¬ì‚¬í•­ê³¼ ìƒê´€ì—†ëŠ” ë³€ê²½ì‚¬í•­ìœ¼ë¡œ ì¸í•´ ê·¸ë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜í–¥ë„ ì²´í¬ê¹Œì§€ í•´ì•¼í•˜ëŠ” ë¶ˆí•„ìš”í•œ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì½”ë“œ ë¦¬ë·° ê³¼ì •ì˜ ëª©ì  ì¤‘ì— í•˜ë‚˜ëŠ” ì‘ì—…ìê°€ ê³ ë ¤í•˜ê±°ë‚˜ ì²´í¬í•˜ì§€ ëª»í•œ ë¶€ë¶„ì„ í¬ë¡œìŠ¤ ì²´í¬í•˜ê¸° ìœ„í•¨ì´ ìˆì§€ë§Œ ê·¸ëŸ¬í•œ ê³¼ì •ì„ ì¤„ì´ë ¤ëŠ” ë…¸ë ¥ì€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.</p>
<h4 id="ì½”ë”©-ì»¨ë²¤ì…˜ì—-ë§ëŠ”-í¬ë§·íŒ…ì„-ìˆ˜í–‰í•˜ê¸°"><a href="#ì½”ë”©-ì»¨ë²¤ì…˜ì—-ë§ëŠ”-í¬ë§·íŒ…ì„-ìˆ˜í–‰í•˜ê¸°" class="headerlink" title="ì½”ë”© ì»¨ë²¤ì…˜ì— ë§ëŠ” í¬ë§·íŒ…ì„ ìˆ˜í–‰í•˜ê¸°"></a>ì½”ë”© ì»¨ë²¤ì…˜ì— ë§ëŠ” í¬ë§·íŒ…ì„ ìˆ˜í–‰í•˜ê¸°</h4><p>ì¸í…”ë¦¬ì œì´ì™€ ì´í´ë¦½ìŠ¤ë¥¼ í¬í•¨í•œ ë§ì€ ê°œë°œë„êµ¬ì—ì„œëŠ” ë¬¸ì„œì— ëŒ€í•œ í¬ë§·íŒ… ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆë‹¤. CheckStyle, Prettier, ESLintì™€ ê°™ì€ í”ŒëŸ¬ê·¸ì¸ê³¼ í†µí•©í•˜ì—¬ í”„ë¡œì íŠ¸ë§ˆë‹¤ ì •í•´ì§„ ë°©ì‹ìœ¼ë¡œ í¬ë§·íŒ…ì„ ìœ ì§€í•  ìˆ˜ ìˆê³  ì½”ë“œ ê°€ë…ì„±ì„ ìœ ì§€í•˜ì—¬ ë¦¬ë·°ì–´ê°€ ë” ì‰½ê²Œ ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ì²´í¬í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•  ìˆ˜ ìˆë‹¤. ì–´ë–¤ ê°œë°œìë“¤ì€ í¬ë§·íŒ…ì— ëŒ€í•´ì„œ ê´€ì‹¬ì´ ì—†ì–´ ë¬´ì‹œí•˜ëŠ” ê²½í–¥ì´ ìˆëŠ”ë° êµ³ì´ í´ë¦° ì½”ë“œë¼ëŠ” ê´€ì ì´ ì•„ë‹ˆë¼ë„ ì‚¬ì†Œí•œ í¬ë§·íŒ… ìŠµê´€ìœ¼ë¡œë„ ì½”ë“œ ê°€ë…ì„±ì€ ì—„ì²­ë‚˜ê²Œ ë†’ì•„ì§„ë‹¤.</p>
<h4 id="SonarLintë¡œ-ì½”ë“œ-í’ˆì§ˆì„-ë¦¬ë·°í•˜ê¸°"><a href="#SonarLintë¡œ-ì½”ë“œ-í’ˆì§ˆì„-ë¦¬ë·°í•˜ê¸°" class="headerlink" title="SonarLintë¡œ ì½”ë“œ í’ˆì§ˆì„ ë¦¬ë·°í•˜ê¸°"></a>SonarLintë¡œ ì½”ë“œ í’ˆì§ˆì„ ë¦¬ë·°í•˜ê¸°</h4><p>SonarLintì™€ ê°™ì€ ì •ì  í’ˆì§ˆì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ í†µí•´ ìŠ¤ìŠ¤ë¡œ ì‘ì„±í•œ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•´ì„œ ì‚´í´ë³´ê³  ë¦¬ë·°í•  ìˆ˜ ìˆë‹¤. í´ë¦° ì•„í‚¤í…ì²˜ì™€ í´ë¦° ì½”ë“œê°€ ê°œë°œì ê´€ì ì—ì„œ ë„ì›€ì´ ë˜ëŠ” ì§€ì‹ì€ ë§ìœ¼ë‚˜ ì‚¬ì†Œí•œ ê²ƒë“¤ë„ ì²´í¬í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì—ì„œ ì¢‹ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì—ë§Œ ê´€ì‹¬ì´ ìˆë‹¤ë©´ ê·¸ê²ƒì´ ì •ë§ë¡œ ì˜³ì€ ë°©í–¥ì¸ì§€ ë‹¤ì‹œ ìƒê°í•´ë³´ì. ìŠ¤ìŠ¤ë¡œ <code>Standard outputs should not be used directly to log anything</code> ì´ë¼ëŠ” <a href="https://refactoring.guru/refactoring/smells">ì½”ë“œ ìŠ¤ë©œ</a>ì„ ì•„ëŠ”ê°€?</p>
<p>ì‹ ì… ë˜ëŠ” ì£¼ë‹ˆì–´ ê°œë°œìì—ê²Œ ê¸°ë³¸ì ìœ¼ë¡œ ìš”êµ¬ë˜ëŠ” í•„ìˆ˜ ì—­ëŸ‰ì—ì„œ ê¸°ë³¸ì´ë¼ëŠ” ì˜ë¯¸ëŠ” ì–´ì©Œë©´ ì–´ë–¤ ì§€ì‹ì˜ ê¹Šì€ ì´í•´ë¡œ ì¸í•´ ìŠì–´ë²„ë¦¬ëŠ” ì‚¬ì†Œí•œ ê²ƒë“¤ì„ ë§í•˜ëŠ”ê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤. ìŠ¤ìŠ¤ë¡œ ë¦¬ë·°í•˜ëŠ” ìŠµê´€ì„ ê°€ì ¸ì„œ ìƒê°ë³´ë‹¤ ìŠì–´ë²„ë¦¬ê¸° ì‰¬ìš´ ì‚¬ì†Œí•œ ê²ƒë“¤ì„ ì²´í¬í•´ë³´ë„ë¡ í•˜ì. </p>
]]></content>
      <tags>
        <tag>Code Review</tag>
        <tag>PR</tag>
      </tags>
  </entry>
  <entry>
    <title>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</title>
    <url>/sending-mail-with-freemarker-template/</url>
    <content><![CDATA[<blockquote>
<p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ í…œí”Œë¦¿ ì—”ì§„ì¸ íƒ€ì„ë¦¬í”„ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì´ë©”ì¼ ë°œì†¡ì—ëŠ” í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•´ì„œ ë³€í™˜í•œ HTML í˜•ì‹ì˜ ì´ë©”ì¼ì„ ì „ë‹¬í•©ë‹ˆë‹¤. </p>
</blockquote>
<h2 id="í”„ë¦¬ë§ˆì»¤-í…œí”Œë¦¿-ì—”ì§„"><a href="#í”„ë¦¬ë§ˆì»¤-í…œí”Œë¦¿-ì—”ì§„" class="headerlink" title="í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„"></a>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„</h2><p>ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” í…œí”Œë¦¿ ì—”ì§„ì€ <a href="https://www.thymeleaf.org/">íƒ€ì„ë¦¬í”„</a>ì´ê¸°ëŠ” í•˜ì§€ë§Œ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ë²•ê³¼ ë‹¤ë¥¸ í…œí”Œë¦¿ ì—”ì§„ê³¼ì˜ ë Œë”ë§ ì„±ëŠ¥ ë¬¸ì œë¡œ ì¸í•˜ì—¬ ì´ë©”ì¼ ë°œì†¡ì²˜ëŸ¼ ëŒ€ëŸ‰ìœ¼ë¡œ ë Œë”ë§í•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ë©´  <a href="https://freemarker.apache.org/">FreeMarker</a> ë˜ëŠ” <a href="https://mustache.github.io/">Mustache</a> í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. </p>
<h3 id="í”„ë¦¬ë§ˆì»¤-ìŠ¤íƒ€í„°"><a href="#í”„ë¦¬ë§ˆì»¤-ìŠ¤íƒ€í„°" class="headerlink" title="í”„ë¦¬ë§ˆì»¤ ìŠ¤íƒ€í„°"></a>í”„ë¦¬ë§ˆì»¤ ìŠ¤íƒ€í„°</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¦¬ë§ˆì»¤ ìŠ¤íƒ€í„° ì˜ì¡´ì„±ì„ í†µí•´ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì°¸ì¡°í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-freemarker'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-mail'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="SMTP-ë©”ì¼-ì„œë²„"><a href="#SMTP-ë©”ì¼-ì„œë²„" class="headerlink" title="SMTP ë©”ì¼ ì„œë²„"></a>SMTP ë©”ì¼ ì„œë²„</h3><p>ì´ë©”ì¼ì„ ë°œì†¡í•˜ê¸° ìœ„í•´ì„œëŠ” SMTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ë©”ì¼ ì„œë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë§ì€ ë¬´ë£Œ ë©”ì¼ ì„œë²„ ì†”ë£¨ì…˜ì´ ìˆìœ¼ë‚˜ ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” êµ¬ê¸€ì´ë‚˜ ë„¤ì´ë²„ ì´ë©”ì¼ ê³„ì •ì˜ ëª‡ê°€ì§€ ì„¤ì •ì„ í†µí•´ì„œ SMTP ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h4 id="Gmail-SMTP"><a href="#Gmail-SMTP" class="headerlink" title="Gmail SMTP"></a>Gmail SMTP</h4><p>ì§€ë©”ì¼ ê³„ì •ìœ¼ë¡œ ë°œì‹  ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¸ì¦ ì˜µì…˜ê³¼ í•¨ê»˜ SSL(465) ë˜ëŠ” TLS(587)ìš© í¬íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-.properties" data-language=".properties"><code class="language-.properties">spring.mail.protocol&#x3D;smtp
spring.mail.host&#x3D;smtp.gmail.com
spring.mail.port&#x3D;587
spring.mail.username&#x3D;username@gmail.com
spring.mail.password&#x3D;password
spring.mail.properties.smtp.auth&#x3D;true
spring.mail.properties.mail.smtp.starttls.enable&#x3D;true
spring.mail.properties.mail.smtp.starttls.required&#x3D;true
spring.mail.test-connection&#x3D;true</code></pre>

<h5 id="ì§€ë©”ì¼-ê³„ì •-ì¸ì¦-ì˜¤ë¥˜"><a href="#ì§€ë©”ì¼-ê³„ì •-ì¸ì¦-ì˜¤ë¥˜" class="headerlink" title="ì§€ë©”ì¼ ê³„ì • ì¸ì¦ ì˜¤ë¥˜"></a>ì§€ë©”ì¼ ê³„ì • ì¸ì¦ ì˜¤ë¥˜</h5><p>ë©”ì¼ ì„œë²„ ì—°ê²° ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì¸ì¦ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš° <a href="https://myaccount.google.com/u/0/lesssecureapps">ë³´ì•ˆ ìˆ˜ì¤€ì´ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤</a>ë¥¼ í—ˆìš©í•´ì•¼í•©ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Caused by: java.lang.IllegalStateException: Mail server is not available
<span class="token punctuation">..</span>.
Caused by: javax.mail.AuthenticationFailedException: <span class="token number">535</span>-5.7.8 Username and Password not accepted. Learn <span class="token function">more</span> at</code></pre>

<blockquote>
<p>ë³´ì•ˆ ì •ì±… ë³€ê²½ì— ë”°ë¼ <a href="https://support.google.com/accounts/answer/6010255">2022ë…„ 5ì›” 30ì¼</a>ë¶€í„°ëŠ” ì§€ë©”ì¼ ê³„ì •ìœ¼ë¡œ SMTP ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
</blockquote>
<h3 id="ìë°”-ì´ë©”ì¼-ë°œì†¡"><a href="#ìë°”-ì´ë©”ì¼-ë°œì†¡" class="headerlink" title="ìë°” ì´ë©”ì¼ ë°œì†¡"></a>ìë°” ì´ë©”ì¼ ë°œì†¡</h3><p>ì§€ë©”ì¼ ê³„ì •ìœ¼ë¡œ SMTP ì„œë²„ì— ì¸ì¦ê¹Œì§€ ì™„ë£Œí–ˆë‹¤ë©´ ì‹¤ì œë¡œ ì´ë©”ì¼ì„ ë°œì†¡í•  ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">GmailSmtpTests</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSenderImpl</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MimeMessageHelper</span> mimeMessageHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"Mambo &lt;kdevkr.gmail.com>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"kdevkr@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"Java Mail Test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"&lt;h5>Hello World&lt;/h5>"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="í”„ë¦¬ë§ˆì»¤-í…œí”Œë¦¿-ì ìš©í•˜ê¸°"><a href="#í”„ë¦¬ë§ˆì»¤-í…œí”Œë¦¿-ì ìš©í•˜ê¸°" class="headerlink" title="í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì ìš©í•˜ê¸°"></a>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì ìš©í•˜ê¸°</h4><p>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ íŒŒì¼ì„ ì‘ì„±í•˜ê³  í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•´ì„œ HTML í˜•ì‹ì˜ ë¬¸ìì—´ì„ ì´ë©”ì¼ ë‚´ìš©ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ë°œì†¡í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤. ì €ëŠ” <a href="https://heropy.blog/2018/12/30/html-email-template/">HTML Email Template ë§Œë“¤ê¸°</a>ë¼ëŠ” ê¸€ì„ ì°¸ê³ í•˜ì—¬ í…œí”Œë¦¿ì„ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">GmailSmtpTests</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSenderImpl</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FreeMarkerConfigurationFactoryBean</span> configurationFactoryBean<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> configurationFactoryBean<span class="token punctuation">.</span><span class="token function">createConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Template</span> template <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token string">"email.ftlh"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token string">"Java Mail Test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">,</span> <span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token class-name">FreeMarkerTemplateUtils</span><span class="token punctuation">.</span><span class="token function">processTemplateIntoString</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MimeMessageHelper</span> mimeMessageHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"Mambo &lt;kdevkr.gmail.com>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"kdevkr@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"Java Mail Test with FreeMarker"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ê¸°ë³¸ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ í´ë”ëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ <strong>templates</strong> ì…ë‹ˆë‹¤.<br>spring.freemarker.template-loader-path&#x3D;classpath:&#x2F;templates&#x2F;</p>
</blockquote>
<p><img data-src="/images/posts/sending-mail-with-freemarker-template/example.png"></p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.servlet.spring-mvc.template-engines">Spring Boot Docs - Template Engines</a></li>
<li><a href="https://springhow.com/spring-boot-email-freemarker/">SpringHow - Send HTML emails with FreeMarker Templates</a></li>
<li><a href="https://www.baeldung.com/freemarker-in-spring-mvc-tutorial">Introduction to Using FreeMarker in Spring MVC</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Sentry</title>
    <url>/sentry/</url>
    <content><![CDATA[<p>SentryëŠ” ì˜¤ë¥˜ ë˜ëŠ” ì˜ˆì™¸ë¥¼ ì¶”ì í•˜ê¸° ìœ„í•œ ë„êµ¬ë¡œ íšŒì‚¬ì—ì„œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ì–¸ì–´ì¸ ìë°”, íŒŒì´ì¬, Vue ë“± ë‹¤ì–‘í•œ ì–¸ì–´ í”Œë«í¼ê³¼ì˜ ì—°ë™ì„ ì§€ì›í•œë‹¤. Sentryë¥¼ ë„ì…í•˜ê²Œ ë˜ëŠ” ì´ìœ ëŠ” ê°œë°œìê°€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œê²¬ë˜ì§€ ì•Šê³  QA ì—”ì§€ë‹ˆì–´ê°€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì • í˜¹ì€ ê³ ê° í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ ê²€ìˆ˜í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œê²¬ë˜ì§€ ì•Šì€ ì·¨ì•½ì ì„ ì•Œì•„ì±„ê¸° ìœ„í•¨ì´ë‹¤. ê·¸ë™ì•ˆ ê²½í—˜í–ˆë˜ ëŒ€ë¶€ë¶„ì˜ í’ˆì§ˆ ì´ìŠˆëŠ” ëª…í™•í•˜ì§€ ì•Šì€ ìš”êµ¬ì‚¬í•­ê³¼ ë¶€ì¡±í•œ ë¦¬ë·° ê³¼ì •ìœ¼ë¡œ ì¸í•´ì„œ ì¸í”„ë¼ êµ¬ì„±ê³¼ ì‚¬ìš©ìì˜ ë™ì‘ì— ë”°ë¼ ë°œìƒí•˜ëŠ” ìƒí™©ì´ ëŒ€ë¶€ë¶„ì´ì—ˆë‹¤ê³  ìƒê°í•œë‹¤.</p>
<ul>
<li><a href="https://docs.sentry.io/platforms/java/guides/spring-boot/">Platforms &gt; Java &gt; Spring Boot</a></li>
<li><a href="https://docs.sentry.io/platforms/javascript/guides/vue/">Platforms &gt; Browser JavaScript &gt; Vue</a></li>
<li><a href="https://docs.sentry.io/platforms/python/guides/flask/">Platforms &gt; Python &gt; Flask</a></li>
</ul>
<blockquote>
<p>ì‹œìŠ¤í…œì˜ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì˜ˆì¸¡í•˜ëŠ” ê¸°ëŠ¥ì˜ ê²½ìš° ë³„ë„ì˜ íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹´ë‹¹í•˜ëŠ” íŒ€ì—ì„œ ê´€ë¦¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ Sentryë¥¼ ë„ì…í•˜ì§„ ì•Šê³  ìˆë‹¤.</p>
</blockquote>
<h2 id="Self-Hosted-Sentry"><a href="#Self-Hosted-Sentry" class="headerlink" title="Self-Hosted Sentry"></a>Self-Hosted Sentry</h2><p><a href="https://develop.sentry.dev/self-hosted/">Self-Hosted Sentry</a>ì—ì„œ ì œê³µí•˜ëŠ” ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ On-Premise í™˜ê²½ì—ì„œ Sentryë¥¼ êµ¬ì„±í•˜ê³  ì‹¤í–‰í•˜ì˜€ë‹¤. ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ì™€ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì‹¤í–‰ ìì²´ëŠ” ê°„ë‹¨í•œë° ìƒê°ë³´ë‹¤ ë§ì€ ì»¨í…Œì´ë„ˆê°€ êµ¬ë™ë˜ëŠ” ë¶€ë¶„ì´ ìˆë‹¤. ì¸í”„ë¼ ë¹„ìš©ì„ ì•„ë¼ê³ ì ë¦¬ì†ŒìŠ¤ ìì› ì‚¬ìš©ë¥ ì´ ì €ì¡°í•œ ì¸ìŠ¤í„´ìŠ¤ì— ì‹¤í–‰í•œ ìƒíƒœì¸ë° ë³„ë„ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ê³  ìˆë‹¤.</p>
<blockquote>
<p>Keep in mind that all this setup uses single-nodes for all services, including Kafka. For larger loads, youâ€™d need a beefy machine with lots of RAM and disk storage. To scale up even further, you are very likely to use clusters with a more complex tool, such as Kubernetes. Due to self-hosted installationsâ€™ very custom nature, we do not offer any recommendations or guidance around scaling up.</p>
</blockquote>
<h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><p>ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ <a href="https://docs.sentry.io/platforms/java/guides/spring-boot/">Spring Boot</a>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ sentry-spring-boot-starterë¥¼ ì¶”ê°€í•˜ì—¬ ìë™ êµ¬ì„±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. </p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token function">platform</span><span class="token punctuation">(</span><span class="token string">'io.sentry:sentry-bom:6.19.0'</span><span class="token punctuation">)</span>
implementation <span class="token string">'io.sentry:sentry-spring-boot-starter'</span></code></pre>

<blockquote>
<p>When you are using multiple Sentry dependencies, you can avoid specifying the version of each dependency with a <a href="https://docs.sentry.io/platforms/java/configuration/bill-of-materials/">BOM or Bill Of Materials</a>.</p>
</blockquote>
<p>ê°œë°œìê°€ ì²´í¬í•˜ì§€ ì•Šì€ ì˜ˆì™¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜ì§‘ë˜ë©° @ExceptionHandlerë¥¼ ì„ ì–¸í•œ ì˜ˆì™¸ ì²˜ë¦¬ í•¨ìˆ˜ì—ì„œ Sentry ì„œë²„ë¡œ ì˜ˆì™¸ ì •ë³´ë¥¼ ì „ë‹¬í•˜ë„ë¡ ì½”ë“œë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>sentry<span class="token punctuation">.</span></span><span class="token class-name">Sentry</span></span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"This is a test."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Sentry</span><span class="token punctuation">.</span><span class="token function">captureException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="ì˜ˆì™¸-ìˆ˜ì§‘-ì •ë³´-ì»¤ìŠ¤í„°ë§ˆì´ì§•"><a href="#ì˜ˆì™¸-ìˆ˜ì§‘-ì •ë³´-ì»¤ìŠ¤í„°ë§ˆì´ì§•" class="headerlink" title="ì˜ˆì™¸ ìˆ˜ì§‘ ì •ë³´ ì»¤ìŠ¤í„°ë§ˆì´ì§•"></a>ì˜ˆì™¸ ìˆ˜ì§‘ ì •ë³´ ì»¤ìŠ¤í„°ë§ˆì´ì§•</h3><p><a href="https://docs.sentry.io/platforms/java/guides/spring-boot/advanced-usage/">Advanced Usage</a> ë¬¸ì„œì— ë”°ë¥´ë©´ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê±°ë‚˜ Sentryì— ìˆ˜ì§‘ëœ ì˜¤ë¥˜ë¥¼ ë³´ë‚´ê¸° ì§ì „ì— ì¡°ì‘í•  ìˆ˜ ìˆëŠ” ì½œë°±ì„ ì œê³µí•˜ê³  ìˆë‹¤. ë…¸ì¶œë˜ë©´ ì•ˆë˜ëŠ” ì •ë³´ëŠ” ëª…ì‹œì ìœ¼ë¡œ ì œê±°í•  ìˆ˜ ìˆìœ¼ë©° ìˆ˜ì§‘í•˜ì§€ ì•Šì„ ì˜ˆì™¸ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œëŠ” <a href="https://docs.sentry.io/platforms/java/guides/spring-boot/configuration/#ignored-exceptions-for-type">Ignored Exceptions For Type</a>ì„ ì§€ì •í•˜ì—¬ ì œì™¸ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sentry.ignored-exceptions-for-type</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> org.springframework.security.access.AccessDeniedException
  <span class="token punctuation">-</span> org.springframework.security.authentication.BadCredentialsException</code></pre>

<p>íŠ¹ì • ì˜ˆì™¸ í´ë˜ìŠ¤ ì´ì™¸ì— ì¼ë¶€ ì—ëŸ¬ ì´ë²¤íŠ¸ë¥¼ í•„í„°ë§í•˜ê³ ì í•œë‹¤ë©´ SentryOptions.BeforeSendCallback ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomBeforeSendCallback</span> <span class="token keyword">implements</span> <span class="token class-name">SentryOptions<span class="token punctuation">.</span>BeforeSendCallback</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">SentryEvent</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">SentryEvent</span> event<span class="token punctuation">,</span> <span class="token class-name">Hint</span> hint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Example: Never send server name in events</span>
        event<span class="token punctuation">.</span><span class="token function">setServerName</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> event<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="ì‚¬ìš©ì-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°"><a href="#ì‚¬ìš©ì-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°" class="headerlink" title="ì‚¬ìš©ì ì •ë³´ ìˆ˜ì§‘í•˜ê¸°"></a>ì‚¬ìš©ì ì •ë³´ ìˆ˜ì§‘í•˜ê¸°</h3><p>Spring MVC ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ <a href="https://docs.sentry.io/platforms/java/guides/spring-boot/record-user/">Record User Information</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì‚¬ìš©ì ì´ë¦„(Principal#name)ê³¼ IP ì£¼ì†Œë¥¼ ìˆ˜ì§‘í•˜ë„ë¡ í™œì„±í™” í•  ìˆ˜ ìˆë‹¤. ë§Œì•½, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ì²´ê³„ë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤ë©´ UserDetailsì˜ Usernameì´ ì˜¤ë¥˜ì™€ í•¨ê»˜ ê¸°ë¡ëœë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sentry.send-default-pii</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre>

<h3 id="ë¹„ë™ê¸°-í•¨ìˆ˜-ì²˜ë¦¬"><a href="#ë¹„ë™ê¸°-í•¨ìˆ˜-ì²˜ë¦¬" class="headerlink" title="ë¹„ë™ê¸° í•¨ìˆ˜ ì²˜ë¦¬"></a>ë¹„ë™ê¸° í•¨ìˆ˜ ì²˜ë¦¬</h3><p>Sentryâ€™s SDK for JavaëŠ” ìŠ¤ì½”í”„ì™€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ThreadLocalì— ì €ì¥í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆë‹¤. <a href="https://docs.sentry.io/platforms/java/guides/spring-boot/async/">Async Methods</a> ë¬¸ì„œì— ë”°ë¥´ë©´ Sentry Contextì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ì— ì˜¬ë°”ë¥´ê²Œ ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ThreadPoolTaskExecutor ë‚´ì— SentryTaskDecoratorë¥¼ ì ìš©í•´ì•¼ í•œë‹¤ê³  ì„¤ëª…í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SentryConfiguration</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SentryTaskDecorator</span> <span class="token function">sentryTaskDecorator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SentryTaskDecorator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncMethodConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncConfigurer</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SentryTaskDecorator</span> sentryTaskDecorator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AsyncMethodConfiguration</span><span class="token punctuation">(</span><span class="token class-name">SentryTaskDecorator</span> sentryTaskDecorator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sentryTaskDecorator <span class="token operator">=</span> sentryTaskDecorator<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Executor</span> <span class="token function">getAsyncExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ThreadPoolTaskExecutor</span> executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">setTaskDecorator</span><span class="token punctuation">(</span>sentryTaskDecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="ë©”ëª¨ë¦¬-ëˆ„ìˆ˜"><a href="#ë©”ëª¨ë¦¬-ëˆ„ìˆ˜" class="headerlink" title="ë©”ëª¨ë¦¬ ëˆ„ìˆ˜"></a>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜</h3><p><img data-src="https://user-images.githubusercontent.com/17937604/234151792-235d3da4-87be-41b1-af36-be464883e895.png"><br><img data-src="/images/posts/sentry/01.png"></p>
<p>TransactionPerfomanceCollectorì— ì˜í•œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œê°€ ìˆì—ˆìœ¼ë©° 6.13.0 ê·¸ë¦¬ê³  6.13.1 ì—ì„œ OOM ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆë‹¤.</p>
<ul>
<li>6.13.0 - Prevent OOM by disabling TransactionPerformanceCollector for now (<a href="https://github.com/getsentry/sentry-java/pull/2498">#2498</a>)</li>
<li>6.13.1 - Fix transaction performance collector oom (<a href="https://github.com/getsentry/sentry-java/pull/2505">#2505</a>)</li>
</ul>
<p>ì´ì™¸ì—ë„ ì§€ì†ì ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ ê³¼ ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œê°€ í•´ê²°ë˜ê³  ìˆìœ¼ë‹ˆ ì£¼ê¸°ì ìœ¼ë¡œ Sentry ì„œë²„ë¥¼ ì—…ê·¸ë ˆì´ë“œí•´ì•¼í•  í•„ìš”ì„±ì´ ìˆì–´ë³´ì¸ë‹¤.</p>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p><a href="https://docs.sentry.io/platforms/javascript/guides/vue/">Sentry for Vue</a>ë¥¼ ì°¸ê³ í•˜ì—¬ Vue ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë“¤ë„ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> @sentry/vue</code></pre>

<pre class="language-javascript" data-language="javascript"><div class="caption"><span>sentry.js</span></div><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Sentry <span class="token keyword">from</span> <span class="token string">'@sentry/vue'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">router</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    Sentry<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        Vue<span class="token punctuation">,</span>
        <span class="token literal-property property">dsn</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_DSN</span><span class="token punctuation">,</span>
        <span class="token literal-property property">envinroment</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span>
        <span class="token literal-property property">release</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_RELEASE</span>
        <span class="token literal-property property">integrations</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token keyword">new</span> <span class="token class-name">Sentry<span class="token punctuation">.</span>BrowserTracing</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                <span class="token literal-property property">routingInstrumentation</span><span class="token operator">:</span> Sentry<span class="token punctuation">.</span><span class="token function">vueRouterInstrumentation</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tracingOptions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">trackComponents</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">attachProps</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">logErrors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tracesSampleRate</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>process.env.SENTRY_DSNì™€ process.env.SENTRY_RELEASEëŠ” ë¹Œë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ì£¼ì…ë˜ë„ë¡ êµ¬í˜„í•´ì•¼í•˜ë©° process.env.SENTRY_RELEASEëŠ” SourceMapì„ ì—…ë¡œë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ë“±ë¡í•˜ëŠ” ë¦´ë¦¬ì¦ˆ ë²„ì „ê³¼ ë™ì¼í•´ì•¼í•œë‹¤.</p>
</blockquote>
<h3 id="API-ì˜¤ë¥˜-ì‹œ-ìš”ì²­ê³¼-ì‘ë‹µ-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°"><a href="#API-ì˜¤ë¥˜-ì‹œ-ìš”ì²­ê³¼-ì‘ë‹µ-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°" class="headerlink" title="API ì˜¤ë¥˜ ì‹œ ìš”ì²­ê³¼ ì‘ë‹µ ì •ë³´ ìˆ˜ì§‘í•˜ê¸°"></a>API ì˜¤ë¥˜ ì‹œ ìš”ì²­ê³¼ ì‘ë‹µ ì •ë³´ ìˆ˜ì§‘í•˜ê¸°</h3><p>Browser JavaScript SDKì—ì„œë„ ê¸°ë³¸ì ì¸ ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ëŠ” ìë™ìœ¼ë¡œ ìˆ˜ì§‘ë˜ë©° Axiosì™€ ê°™ì€ HTTP í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ API ìš”ì²­ ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´ Sentryë¡œ ìˆ˜ì§‘ë˜ë„ë¡ ì‘ì„±í•´ì•¼í•œë‹¤. </p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">,</span>
    <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> data <span class="token punctuation">&#125;</span> <span class="token operator">=</span> error<span class="token punctuation">.</span>config
        Sentry<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token string">'Request'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            url<span class="token punctuation">,</span>
            params<span class="token punctuation">,</span>
            data
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> status<span class="token punctuation">,</span> data <span class="token punctuation">&#125;</span> <span class="token operator">=</span> error<span class="token punctuation">.</span>config
        Sentry<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token string">'Response'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            status<span class="token punctuation">,</span>
            data
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

        Sentry<span class="token punctuation">.</span><span class="token function">captureException</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="ì¸ì¦-ì‚¬ìš©ì-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°"><a href="#ì¸ì¦-ì‚¬ìš©ì-ì •ë³´-ìˆ˜ì§‘í•˜ê¸°" class="headerlink" title="ì¸ì¦ ì‚¬ìš©ì ì •ë³´ ìˆ˜ì§‘í•˜ê¸°"></a>ì¸ì¦ ì‚¬ìš©ì ì •ë³´ ìˆ˜ì§‘í•˜ê¸°</h3><p><a href="https://docs.sentry.io/platforms/javascript/enriching-events/identify-user/">Identify Users</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ë©´ ì‚¬ìš©ì ì´ë¦„ê³¼ ì•„ì´í”¼ ì£¼ì†Œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•„ì´í”¼ ì£¼ì†Œê°€ ìˆ˜ì§‘ë˜ëŠ”ë° ì¸ì¦ëœ ì‚¬ìš©ìë¼ë©´ ì‚¬ìš©ì ì‹ë³„ ì•„ì´ë””ë‚˜ ì´ë¦„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ë³´ë‹¤ ì •í™•í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">Sentry<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> 
  <span class="token literal-property property">id</span><span class="token operator">:</span> window<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>userId<span class="token punctuation">,</span>
  <span class="token literal-property property">username</span><span class="token operator">:</span> window<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
  <span class="token literal-property property">ip_address</span><span class="token operator">:</span> <span class="token string">'&#123;&#123;auto&#125;&#125;'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<blockquote>
<p>If the userâ€™s ip_address is set to â€œâ€œ, Sentry will infer the IP address from the connection between your app and Sentryâ€™s server.</p>
</blockquote>
<h3 id="ìŠ¤íƒ-íŠ¸ë ˆì´ìŠ¤-ì¶”ì í•˜ê¸°"><a href="#ìŠ¤íƒ-íŠ¸ë ˆì´ìŠ¤-ì¶”ì í•˜ê¸°" class="headerlink" title="ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ì¶”ì í•˜ê¸°"></a>ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ì¶”ì í•˜ê¸°</h3><p>ì¼ë°˜ì ìœ¼ë¡œ Vueì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¹Œë“œë˜ì–´ ë°°í¬ë˜ëŠ” ê²½ìš°ì— ë²ˆë“¤ì„ ìµœì†Œí™”í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë¯€ë¡œ ì˜¤ë¥˜ê°€ Sentryì— ìˆ˜ì§‘ë˜ë”ë¼ë„ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ í†µí•´ ì›ì¸ì´ ë˜ëŠ” ì½”ë“œ ë¼ì¸ì„ ì œëŒ€ë¡œ ì°¾ì•„ê°€ê¸° í˜ë“¤ ê°€ëŠ¥ì„±ì´ ìˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ Sentry ì—ì„œ ë§Œí¼ì€ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ ê¹”ë”í•˜ê²Œ ë³¼ ìˆ˜ ìˆë„ë¡ SourceMapì„ ì§€ì›í•˜ê³  ìˆë‹¤. ë‹¤ìŒì€ Webpackì„ ë²ˆë“¤ëŸ¬ë¡œì¨ ì‚¬ìš©í•˜ê³  ìˆì„ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev @sentry/webpack-plugin</code></pre>

<pre class="language-javascript" data-language="javascript"><div class="caption"><span>webpack.config.prd.js</span></div><code class="language-javascript"><span class="token keyword">const</span> SentryWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@sentry/webpack-plugin"</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">"source-map"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">SentryWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token literal-property property">org</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_ORG</span><span class="token punctuation">,</span>
      <span class="token literal-property property">project</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_PROJECT</span><span class="token punctuation">,</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token string">"./dist"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ignore</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"node_modules"</span><span class="token punctuation">,</span> <span class="token string">"webpack.config.js"</span><span class="token punctuation">,</span> <span class="token string">"webpack.config.prod.js"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_AUTH_TOKEN</span><span class="token punctuation">,</span>
      <span class="token literal-property property">release</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SENTRY_RELEASE</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>SENTRY_RELEASEëŠ” ë¹Œë“œì™€ ëŸ°íƒ€ì„ ì‹œì ì˜ ê°’ì„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•´ì•¼ Sentryì—ì„œ ì œëŒ€ë¡œ ì¶”ì í•  ìˆ˜ ìˆìŒì— ì£¼ì˜í•´ì•¼í•œë‹¤. ëŸ°íƒ€ì„ êµ¬ì„± ì‹œ ì‚¬ìš©í•˜ëŠ” DSNê°€ ì•„ë‹ˆë¼ <a href="https://docs.sentry.io/api/auth/#auth-tokens">Sentry ì‚¬ìš©ìì— ëŒ€í•œ í† í°</a>ì„ ë°œê¸‰í•´ì•¼í•˜ë©° í”„ë¡œì íŠ¸ ì •ë³´ë„ í¬í•¨í•´ì•¼í•œë‹¤.</p>
<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>ì¹´ì¹´ì˜¤í˜ì´ì—ì„œ ê³µìœ í•œ <a href="https://tech.kakaopay.com/post/frontend-sentry-monitoring/">Sentryë¡œ ìš°ì•„í•˜ê²Œ í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ ì¶”ì í•˜ê¸°</a>ì™€ ë¼ì¸ì—ì„œ ê³µìœ í•œ <a href="https://engineering.linecorp.com/ko/blog/log-collection-system-sentry-on-premise">Sentryë¡œ ì‚¬ë‚´ ì—ëŸ¬ ë¡œê·¸ ìˆ˜ì§‘ ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì—¬ Sentry í™œìš©ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œì•„ê°ˆ ìˆ˜ ìˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ë„ì…ì€ ì‰¬ì›Œë³´ì´ì§€ë§Œ ì›í•˜ëŠ” ë°©ì‹ëŒ€ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•˜ê¸°ì—ëŠ” ìƒê°ë³´ë‹¤ ì–´ë ¤ìš´ ê²ƒ ê°™ë‹¤. ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë‹¤ë¥´ê²Œ í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” Data Source Name (DSN)ê°€ ë¸Œë¼ìš°ì €ì— ë…¸ì¶œë˜ë¯€ë¡œ ë³´ì•ˆ ê´€ì ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ë§Œ ë„ì…í•´ì•¼í•  ê²ƒìœ¼ë¡œ ìƒê°ëœë‹¤.</p>
]]></content>
      <tags>
        <tag>sentry-java</tag>
        <tag>sentry-javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>SHA-256</title>
    <url>/sha-256/</url>
    <content><![CDATA[<h2 id="SHA"><a href="#SHA" class="headerlink" title="SHA"></a>SHA</h2><p><a href="https://ko.wikipedia.org/wiki/SHA">SHA(Secure Hash Algorithm)</a>ì€ NISTì— ì˜í•´ì„œ ê´€ë¦¬ë˜ëŠ” ì•ˆì „í•œ í•´ì‹œ í‘œì¤€ í•¨ìˆ˜ë“¤ì˜ ëª¨ìŒì´ë©° í˜„ì¬ëŠ” NIST FIPS 180-3 ê·œê²©ì˜ <a href="https://ko.wikipedia.org/wiki/SHA-2">SHA-2</a>ë¥¼ ê¶Œì¥í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•´ì‹œ í•¨ìˆ˜ëŠ” ì–´ë– í•œ ë¬¸ìì—´ì„ ì¼ì •í•œ ê¸¸ì´ë¥¼ ê°€ì§„ ì„ì˜ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìˆ˜ ë§ì€ ì—°êµ¬ì— ì˜í•´ ë§Œë“¤ì–´ì§„ ì—¬ëŸ¬ê°€ì§€ í•´ì‹œ í•¨ìˆ˜ ì¤‘ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ SHA-256ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ëª©ì ì— ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹ì •í•œ ë¬¸ìì—´ì— ëŒ€í•´ì„œëŠ” ë™ì¼í•œ í•´ì‹œê°’(ë‹¤ì´ì œìŠ¤íŠ¸)ìœ¼ë¡œ ë³€í™˜ë˜ë©° í•´ì‹œê°’ì„ ê¸°ì¤€ìœ¼ë¡œëŠ” ë™ì¼í•œ íŒ¨í„´ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ì„œ ë³¸ë˜ì˜ ë¬¸ìì—´ì„ ìœ ì¶”í•  ìˆ˜ ì—†ë„ë¡ í•˜ê³ ì í•˜ëŠ” ê²ƒì— ìˆìŠµë‹ˆë‹¤.</p>
<p>SHA-256 í•´ì‹œ í•¨ìˆ˜ì˜ ë™ì‘ ê³¼ì •ì€ <a href="https://sha256algorithm.com/">Sha256 Algorithm Explained</a>ë¥¼ ì´ìš©í•˜ë©´ ëˆˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<h3 id="ë©”ì‹œì§€-ë‹¤ì´ì œìŠ¤íŠ¸"><a href="#ë©”ì‹œì§€-ë‹¤ì´ì œìŠ¤íŠ¸" class="headerlink" title="ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸"></a>ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸</h3><p>í•´ì‹œ í•¨ìˆ˜ëŠ” ì–´ë– í•œ ì…ë ¥ì— ëŒ€í•´ì„œ ì¼ì •í•œ ê¸¸ì´ì˜ ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì§„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸ë€ ì–´ë–¤ ë¬¸ìì—´ ë°ì´í„°ë¥¼ ì¼ì •í•œ ê¸¸ì´ì˜ ë‹¤ì´ì œìŠ¤íŠ¸ë¡œ ë³€í™˜í•œ ê²ƒì„ ë§í•˜ë©° ë‹¨ìˆœí•˜ê²Œ í•´ì‹œ í•¨ìˆ˜ë¡œ ì²˜ë¦¬ëœ í•´ì‹œê°’ì¼ ë¿ì…ë‹ˆë‹¤.</p>
<pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"crypto/sha256"</span>
	<span class="token string">"encoding/hex"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	plain <span class="token operator">:=</span> <span class="token string">"HelloWorld"</span>
	hash <span class="token operator">:=</span> sha256<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	hash<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>plain<span class="token punctuation">)</span><span class="token punctuation">)</span>
	hashed <span class="token operator">:=</span> hash<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"plain:"</span><span class="token punctuation">,</span> plain<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hashed:"</span><span class="token punctuation">,</span> hex<span class="token punctuation">.</span><span class="token function">EncodeToString</span><span class="token punctuation">(</span>hashed<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash">plain: HelloWorld
hashed: 872e4e50ce9990d8b041330c47c9ddd11bec6b503ae9386a99da8584e9bb12c4</code></pre>

<h3 id="íŒŒì¼-ì²´í¬ì„¬"><a href="#íŒŒì¼-ì²´í¬ì„¬" class="headerlink" title="íŒŒì¼ ì²´í¬ì„¬"></a>íŒŒì¼ ì²´í¬ì„¬</h3><p>ìœ„ ë©”ì‹œì§€ ë‹¤ì´ì œìŠ¤íŠ¸ë¥¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì— í™œìš©í•œ ë¶€ë¶„ì´ íŒŒì¼ ì²´í¬ì„¬ì…ë‹ˆë‹¤. <a href="https://ubuntu.com/tutorials/how-to-verify-ubuntu#5-verify-the-sha256-checksum">how-to-verify-ubuntu</a>ì—ì„œ ì²˜ëŸ¼ ë‹¤ìš´ë¡œë“œ ë°›ì€ íŒŒì¼ì˜ ìœ„ë³€ì¡° ì—¬ë¶€ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œ MD5 ë˜ëŠ” SHA-256ë¡œ í•´ì‹œëœ ë‹¤ì´ì œìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ë©° ì´ë¥¼ í†µí•´ ì˜¬ë°”ë¥¸ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ì„ ê²€ì¦í•˜ê³  ì•ˆì „í•˜ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œëŠ” ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œ <a href="https://docs.microsoft.com/ko-kr/windows-server/administration/windows-commands/certutil">CertUtil</a>ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ì²´í¬ì„¬ì„ í™•ì¸í•œ ê²ƒì´ë©° <a href="https://gtkhash.org/">GtkHash</a>ì™€ ê°™ì€ ë„êµ¬ë¡œë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> certutil <span class="token operator">-</span>hashfile orig<span class="token punctuation">.</span>txt sha256
SHA256ì˜ orig<span class="token punctuation">.</span>txt í•´ì‹œ:
872e4e50ce9990d8b041330c47c9ddd11bec6b503ae9386a99da8584e9bb12c4
CertUtil: <span class="token operator">-</span>hashfile ëª…ë ¹ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤<span class="token punctuation">.</span></code></pre>

<h3 id="ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”"><a href="#ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”" class="headerlink" title="ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”"></a>ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í•  ë•ŒëŠ” <a href="https://d2.naver.com/helloworld/318732">ì•ˆì „í•œ íŒ¨ìŠ¤ì›Œë“œ ì €ì¥</a>ì—ì„œ ì–¸ê¸‰ëœ PBKDF2 ë˜ëŠ” bcryptë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆìŠµë‹ˆë‹¤. bcryptëŠ” NIST ì—ì„œ ê¶Œì¥í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì— ì†í•˜ì§€ëŠ” ì•Šì•˜ìœ¼ë‚˜ OpenBSDë‚˜ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë³¸ íŒ¨ìŠ¤ì›Œë“œ ì¸ì½”ë”ë¡œ ì§€ì •ëœ ë¹„êµì  ì•ˆì „í•œ ì•Œê³ ë¦¬ì¦˜ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì•„ë¬´íŠ¼ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ í•˜ë‚˜ì¸ <a href="https://code.kx.com/q/basics/cmdline/#-u-usr-pwd-local">KDB+ëŠ” MD5 ë˜ëŠ” SHA-1 ì•Œê³ ë¦¬ì¦˜ ë°©ì‹ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§€ì›</a>í•˜ê¸°ì— ì‚¬ìš©í•˜ëŠ” ì‹œìŠ¤í…œë§ˆë‹¤ ì§€ì›í•˜ëŠ” ë°©ì‹ì— ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”-ê´€ë ¨-ì½ìœ¼ë©´-ì¢‹ì€-ê¸€"><a href="#ë¹„ë°€ë²ˆí˜¸-ì•”í˜¸í™”-ê´€ë ¨-ì½ìœ¼ë©´-ì¢‹ì€-ê¸€" class="headerlink" title="ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê´€ë ¨ ì½ìœ¼ë©´ ì¢‹ì€ ê¸€"></a>ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ê´€ë ¨ ì½ìœ¼ë©´ ì¢‹ì€ ê¸€</h4><ul>
<li><a href="https://d2.naver.com/helloworld/318732">ì•ˆì „í•œ íŒ¨ìŠ¤ì›Œë“œ ì €ì¥</a></li>
<li><a href="https://lovejaco.github.io/posts/cryptographic-hash-function/">í•´ì‹œ í•¨ìˆ˜, ì•”í˜¸í™” í•´ì‹œ í•¨ìˆ˜, ê·¸ë¦¬ê³  SHA</a></li>
<li><a href="https://auth0.com/blog/hashing-in-action-understanding-bcrypt/">Hashing in Action: Understanding bcrypt</a></li>
</ul>
<h3 id="í‚¤-ì„œëª…-ì§€ë¬¸"><a href="#í‚¤-ì„œëª…-ì§€ë¬¸" class="headerlink" title="í‚¤ ì„œëª… ì§€ë¬¸"></a>í‚¤ ì„œëª… ì§€ë¬¸</h3><p><a href="/ssh">SSH í‚¤ í˜ì–´ ë°œê¸‰ ë° ì›ê²© í˜¸ìŠ¤íŠ¸ ì—°ê²°í•˜ê¸°</a>ì—ì„œì²˜ëŸ¼ SSH í‚¤ì— ëŒ€í•´ ì§€ë¬¸(Fingerprint)ì„ ìƒì„±í•´ë†“ê³  í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ê³µê°œí‚¤ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ”ë° ì‚¬ìš©ë˜ê¸°ë„ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í‚¤ ì„œëª… ì§€ë¬¸ì€ ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ê°™ì´ SSL ì¸ì¦ì„œ ì •ë³´ì—ë„ ì„œëª… í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œë„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sha-256/01.png"></p>
]]></content>
      <tags>
        <tag>Hashing</tag>
        <tag>Message Disgest</tag>
        <tag>Checksum</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Boot 3.x Micrometer Tracing</title>
    <url>/spring-boot-3-tracing/</url>
    <content><![CDATA[<blockquote>
<p>Spring Cloud Sleuth will not work with Spring Boot 3.x onward. Please check <a href="https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide">Spring Cloud Sleuth 3.1 Migration Guide</a>.</p>
</blockquote>
<p>Spring Cloud Sleuth í”„ë¡œì íŠ¸ëŠ” ë”ì´ìƒ Spring Boot 3.x ì™€ì˜ í˜¸í™˜ì„±ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë¶„ì‚° ì¶”ì  ë°ì´í„° ëª¨ë¸ì„ ì ìš©í•˜ê¸° ìœ„í•œ ìë™ êµ¬ì„±ì´ Spring Cloud Sleuth ì—ì„œ Spring Bootë¡œ ì´ë™ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤. Spring Boot 3.x ì—ì„œëŠ” ë”ì´ìƒ Spring Cloud SleuthëŠ” í•„ìš”í•˜ì§€ ì•Šìœ¼ë©° <code>Micrometer Tracing</code>ì— ëŒ€í•œ ì„¤ì •ì„ ìˆ˜í–‰í•˜ë©´ ëœë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'org.springframework.boot'</span> version <span class="token string">'3.1.3'</span>
    id <span class="token string">'io.spring.dependency-management'</span> version <span class="token string">'1.1.3'</span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-actuator'</span>
    implementation <span class="token string">'io.micrometer:micrometer-tracing-bridge-brave'</span>
    implementation <span class="token string">'io.zipkin.reporter2:zipkin-reporter-brave'</span>
    developmentOnly <span class="token string">'org.springframework.boot:spring-boot-docker-compose'</span> <span class="token comment">// Optional</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="AutoConfigure-Micrometer-Tracing"><a href="#AutoConfigure-Micrometer-Tracing" class="headerlink" title="AutoConfigure Micrometer Tracing"></a>AutoConfigure Micrometer Tracing</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ êµ¬ì„±ì— í¬í•¨ë˜ì–´ ìˆëŠ” BraveAutoConfigurationê³¼ ZipkinAutoConfigurationê°€ ìë™ìœ¼ë¡œ ì ìš©ë˜ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ TracingProperties ì†ì„±ì„ ì›í•˜ëŠ”ëŒ€ë¡œ ì ìš©í•˜ë©´ ëœë‹¤. ë³¸ ê¸€ì—ì„œëŠ” Zipkinê³¼ì˜ ì—°ë™ì„ ìœ„í•´ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” B3 ë°©ì‹ì„ ì§€ì •í•˜ì˜€ë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">management.tracing</span><span class="token punctuation">:</span>
  <span class="token key atrule">propagation.type</span><span class="token punctuation">:</span> b3
  <span class="token key atrule">sampling.probability</span><span class="token punctuation">:</span> <span class="token number">1.0</span>
  
<span class="token key atrule">logging.pattern.level</span><span class="token punctuation">:</span> <span class="token string">"%5p [$&#123;spring.application.name:&#125;,%X&#123;traceId:-&#125;,%X&#123;spanId:-&#125;]"</span></code></pre>

<h4 id="Automatic-Context-Propagation-for-WebFlux"><a href="#Automatic-Context-Propagation-for-WebFlux" class="headerlink" title="Automatic Context Propagation for WebFlux"></a>Automatic Context Propagation for WebFlux</h4><p>Spring Cloud Gatewayì™€ ê°™ì´ WebFlux ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” Project Reactor 3ì˜ Context Propagationì— ëŒ€í•œ ìë™ êµ¬ì„±ì„ ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ Hooks.enableAutomaticContextPropagationì„ ë©”ì¸ í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•´ì•¼í•œë‹¤. ë” ìì„¸í•œ ë‚´ìš©ì€ <a href="https://spring.io/blog/2023/03/30/context-propagation-with-project-reactor-3-unified-bridging-between-reactive">Context Propagation with Project Reactor 3 - Unified Bridging between Reactive and Imperative</a>ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Hooks</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Hooks</span><span class="token punctuation">.</span><span class="token function">enableAutomaticContextPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ê¸°ë¡í•˜ê¸°</title>
    <url>/spring-boot-accesslog-with-elasticsearch/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ìš”ì²­ë˜ëŠ” ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ” <a href="https://d2.naver.com/helloworld/3585246">ì•¡ì„¸ìŠ¤ ë¡œê·¸</a>ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ìš´ì˜ê³¼ ì¥ì•  ëŒ€ì‘ì— ìˆì–´ì„œ ìƒë‹¹íˆ ì¤‘ìš”í•œ ì •ë³´ì…ë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œë„ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/enable-server-access-logging.html">Amazon S3 ì„œë²„ ì•¡ì„¸ìŠ¤ ë¡œê¹… í™œì„±í™”</a>ì²˜ëŸ¼ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì£ . ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” <strong>í†°ìº£(Tomcat)</strong> ì´ë‚˜ <strong>ì–¸ë”í† ìš°(Undertow)</strong> ì™€ ê°™ì€ WASì— ëŒ€í•˜ì—¬ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§Œì•½, ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ í™œì„±í™”í•˜ê³  íŒ¨í„´ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">server.undertow.accesslog.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">server.undertow.accesslog.pattern</span><span class="token punctuation">=</span><span class="token value attr-value">common</span></code></pre>

<h2 id="ìŠ¤í”„ë§-ë¶€íŠ¸-ë¡œê¹…"><a href="#ìŠ¤í”„ë§-ë¶€íŠ¸-ë¡œê¹…" class="headerlink" title="ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹…"></a>ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹…</h2><p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Slf4j ê¸°ë°˜ì˜ <a href="https://logback.qos.ch/">ë¡œê·¸ë°±(Logback)</a>ì„ ë¡œê¹… í”„ë ˆì„ì›Œí¬ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œê·¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ê¸°ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://github.com/logfellow/logstash-logback-encoder">Logstash Logback Encoder</a>ì™€ ê°™ì´ ë¡œê·¸ë°±ìœ¼ë¡œ ê¸°ë¡ë˜ëŠ” ë¡œê·¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ êµ¬í˜„í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h3 id="Logback-Elasticsearch-Appender"><a href="#Logback-Elasticsearch-Appender" class="headerlink" title="Logback Elasticsearch Appender"></a>Logback Elasticsearch Appender</h3><p><a href="https://github.com/internetitem/logback-elasticsearch-appender">Logback Elasticsearch Appender</a>ëŠ” ELK ìŠ¤íƒì´ ì•„ë‹ˆë”ë¼ë„ ë¡œê·¸ë°±ìœ¼ë¡œ ê¸°ë¡ë˜ëŠ” ë¡œê·¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¡œ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ì´ê²ƒì„ í™œìš©í•˜ì—¬ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ê¸°ë¡í•´ë³´ê³ ì í•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/spring-boot-accesslog-with-elasticsearch/logback-elasticsearch-appender-01.png"></p>
<p>ê·¸ë¦¬ê³  ìœ„ ì²˜ëŸ¼ <a href="https://logback.qos.ch/access.html">Logback Access</a>ì— ëŒ€í•œ Appenderë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì‰½ê²Œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h3 id="Logback-Access-Spring-Boot-Starter"><a href="#Logback-Access-Spring-Boot-Starter" class="headerlink" title="Logback Access Spring Boot Starter"></a>Logback Access Spring Boot Starter</h3><p><a href="https://github.com/akkinoc/logback-access-spring-boot-starter">logback-access-spring-boot-starter</a>ëŠ” ë¡œê·¸ë°± ì—‘ì„¸ìŠ¤ ì„¤ì •ì— ëŒ€í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°ì…ë‹ˆë‹¤. ì–¸ë”í† ìš°ê¹Œì§€ ì§€ì›í•˜ë¯€ë¡œ ì–¸ë”í† ìš°ì— ëŒ€í•´ ë¡œê·¸ë°± ì—‘ì„¸ìŠ¤ ì„¤ì •ì„ ìœ„í•œ <a href="https://gist.github.com/cdmatta/2a4536ab687bf7a92482faf031e8a0b5">ì»¤ìŠ¤í„°ë§ˆì´ì €</a>ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</p>
<h3 id="ë”°ë¼í•˜ê¸°"><a href="#ë”°ë¼í•˜ê¸°" class="headerlink" title="ë”°ë¼í•˜ê¸°"></a>ë”°ë¼í•˜ê¸°</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ì €ëŠ” ì–¸ë”í† ìš°ë¥¼ ì„ í˜¸í•˜ë¯€ë¡œ í†°ìº£ ëª¨ë“ˆì„ ì œì™¸í•˜ê³  ì–¸ë”í† ìš° ìŠ¤íƒ€í„°ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">configurations<span class="token punctuation">.</span>all <span class="token punctuation">&#123;</span>
    exclude module<span class="token punctuation">:</span> <span class="token string">'spring-boot-starter-tomcat'</span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-undertow'</span>
    implementation <span class="token string">'com.internetitem:logback-elasticsearch-appender:1.6'</span>
    implementation <span class="token string">'dev.akkinoc.spring.boot:logback-access-spring-boot-starter:3.2.1'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ë¡œê·¸ë°± ì—‘ì„¸ìŠ¤ ìŠ¤íƒ€í„°ëŠ” ì–¸ë”í† ìš° ë¿ë§Œ ì•„ë‹ˆë¼ í†°ìº£ë„ ì§€ì›í•˜ë¯€ë¡œ ì„¤ì •ì— ëŒ€í•œ ì°¨ì´ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì´ ë¡œê·¸ë°± ì—‘ì„¸ìŠ¤ë¥¼ ìœ„í•œ ì„¤ì • íŒŒì¼ì„ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¶”ê°€í•©ë‹ˆë‹¤. ì„¤ì • íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” <a href="https://github.com/akkinoc/logback-access-spring-boot-starter#priority-order">ìš°ì„ ìˆœìœ„</a>ì— ë”°ë¼ ì„¤ì • íŒŒì¼ëª…ì€ logback-access-spring.xml ì´ë¼ê³  ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><strong>logback-access-spring.xml</strong></p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>elasticsearch_uris<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.elasticsearch.uris<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:9200<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ELASTIC<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.internetitem.logback.elasticsearch.ElasticsearchAccessAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>$&#123;elasticsearch_uris&#125;/_bulk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>index</span><span class="token punctuation">></span></span>application-accesslog-%date&#123;yyyy-MM-dd&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>index</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>headers</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Content-Type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>application/json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>headers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ELASTIC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ë¸Œë¼ìš°ì € ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ë„êµ¬ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤ ê¸°ë¡ì„ ë‚¨ê²¨ë³´ê³  ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì˜ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/spring-boot-accesslog-with-elasticsearch/elasticsearch-devtools-01.png"></p>
<p>ì¸ë±ìŠ¤ëŠ” ìƒì„±ë˜ì—ˆì§€ë§Œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì— ëŒ€í•œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ ë¡œê·¸ ì •ë³´ë¥¼ ê¸°ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://logback.qos.ch/manual/layouts.html#logback-access">Logback Access conversion words</a>ë¥¼ ì°¸ê³ í•´ì„œ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤. ì•ì„œ ìƒì„±í•œ ë¡œê·¸ë°± ì—‘ì„¸ìŠ¤ ì„¤ì • íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œí¼í‹° í•­ëª©ì„ ì¶”ê°€ë¡œ ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>elasticsearch_uris<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.elasticsearch.uris<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:9200<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ELASTIC<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.internetitem.logback.elasticsearch.ElasticsearchAccessAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>$&#123;elasticsearch_uris&#125;/_bulk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>index</span><span class="token punctuation">></span></span>application-accesslog-%date&#123;yyyy-MM-dd&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>index</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>contentLength<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%b<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>remoteHost<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%h<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>protocol<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%H<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>referer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%i&#123;Referer&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>userAgent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%i&#123;User-Agent&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>requestMethod<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>statusCode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%s<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>elapsedTime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>date<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%t&#123;yyyy-MM-dd'T'HH:mm:ss&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%u<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>queryString<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%q<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>requestURI<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>%U<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>headers</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Content-Type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>application/json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>headers</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ELASTIC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre>

<blockquote>
<p>ë¯¸ë¦¬ ì •ì˜ëœ íŒ¨í„´ì¸ combinedë¥¼ ì°¸ê³ í•˜ì—¬ ë¦¬í¼ëŸ¬ì™€ ìœ ì € ì—ì´ì „íŠ¸ í—¤ë”ë¥¼ í¬í•¨í•˜ë„ë¡ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p><img data-src="/images/posts/spring-boot-accesslog-with-elasticsearch/elasticsearch-devtools-02.png"></p>
<p>ìœ„ ì²˜ëŸ¼ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•˜ì˜€ìœ¼ë¯€ë¡œ ìš”ì²­ëœ ì•¡ì„¸ìŠ¤ì— ëŒ€í•œ ë¡œê·¸ë¥¼ í†µí•´ ìœ ì € ì—ì´ì „íŠ¸ê°€ í¬ìŠ¤íŠ¸ë§¨ì´ë©° ìš”ì²­ëœ ê²½ë¡œëŠ” ì•¡ì¶”ì—ì´í„°ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼í•˜ì‹œëŠ” ì—¬ëŸ¬ë¶„ì€ ë‹¤ì–‘í•œ í•­ëª©ì— ëŒ€í•´ì„œë„ ê¸°ë¡í•´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<h4 id="ì•¡ì„¸ìŠ¤-ë¡œê·¸-ì¸ë±ìŠ¤-í…œí”Œë¦¿"><a href="#ì•¡ì„¸ìŠ¤-ë¡œê·¸-ì¸ë±ìŠ¤-í…œí”Œë¦¿" class="headerlink" title="ì•¡ì„¸ìŠ¤ ë¡œê·¸ ì¸ë±ìŠ¤ í…œí”Œë¦¿"></a>ì•¡ì„¸ìŠ¤ ë¡œê·¸ ì¸ë±ìŠ¤ í…œí”Œë¦¿</h4><p>ìƒì„±ëœ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì— ëŒ€í•œ ì¸ë±ìŠ¤ ë§¤í•‘ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë©´ ë™ì  ë§¤í•‘ì— ì˜í•´ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ í•„ë“œ ìœ í˜•ì„ ì„ì˜ëŒ€ë¡œ ì§€ì •í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ì  ë§¤í•‘ì€ ì €ì¥ë˜ëŠ” ë„íë¨¼íŠ¸ì˜ í•„ë“œ ì •ë³´ë¥¼ ì•Œê¸° ì–´ë ¤ìš¸ ë•ŒëŠ” í¸ë¦¬í•œ ê¸°ëŠ¥ì´ì§€ë§Œ ì§€ê¸ˆì²˜ëŸ¼ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì— ì €ì¥ë˜ëŠ” í•„ë“œê°€ ê³ ì •ë˜ì–´ìˆê³  í•„ë“œ ìœ í˜•ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤ë©´ ì •ì  ë§¤í•‘ì„ ì •ì˜í•´ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/spring-boot-accesslog-with-elasticsearch/elasticsearch-devtools-03.png"></p>
<p>ì•¡ì„¸ìŠ¤ ë¡œê·¸ì— ê¸°ë¡ë˜ëŠ” ì •ë³´ê°€ ëª…í™•í•˜ë¯€ë¡œ ë™ì  ë§¤í•‘ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ë¯¸ë¦¬ ì •ì˜ëœ ë§¤í•‘ì„ ì‚¬ìš©í•˜ë„ë¡ ì¸ë±ìŠ¤ í…œí”Œë¦¿ì„ ì •ì˜í•´ë‘ê² ìŠµë‹ˆë‹¤. </p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"index_patterns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"applicaiton-accesslog-*"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"template"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"analysis"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"analyzer"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"path_analyzer"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"tokenizer"</span><span class="token operator">:</span> <span class="token string">"path_hierarchy"</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"@timestamp"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"contentLength"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"long"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"date"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span>
          <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"date_hour_minute_second || epoch_millis"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"elapsedTime"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"integer"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"referer"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"remoteHost"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ip"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"requestMethod"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"requestURI"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>
          <span class="token property">"analyzer"</span><span class="token operator">:</span> <span class="token string">"path_analyzer"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"statusCode"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"short"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"user"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"userAgent"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œê·¸ ë° ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ì§€ëŠ” ì•Šê³  ìˆìŠµë‹ˆë‹¤ë§Œ, ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¥¼ í•™ìŠµí•˜ê¸° ìœ„í•œ ìƒ˜í”Œ ë°ì´í„°ê°€ ì—†ì–´ì„œ ê°„ë‹¨í•˜ê²Œë‚˜ë§ˆ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ê¸°ë¡í•´ë³´ë©´ ì–´ë– í• ê¹Œ ìƒê°í•´ì„œ ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í˜„ì¬ ëŒ€ëŸ‰ì˜ <a href="https://github.com/kdevkr/elasticsearch/blob/main/sample/access.q">ëœë¤ ì•¡ì„¸ìŠ¤ ë¡œê·¸</a>ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì»¬ëŸ¼í˜• ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì¸ KDBë¥¼ í™œìš©í•´ë³´ê³ ëŠ” ìˆìŠµë‹ˆë‹¤ë§Œ ì‰½ì§€ëŠ” ì•Šë„¤ìš”. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ë§ì´ ì‹œë„í•´ë³´ê³  ì •ë¦¬í•˜ì—¬ ê³µìœ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Elasticsearch</tag>
        <tag>Access Log</tag>
      </tags>
  </entry>
  <entry>
    <title>CSV, Comma Separated Values</title>
    <url>/csv/</url>
    <content><![CDATA[<p>ë°ì´í„° ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ì€ ë‹¤ì–‘í•©ë‹ˆë‹¤. ê°œë°œìë“¤ì´ REST APIë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ JSON í˜•ì‹ìœ¼ë¡œ ì£¼ê³ ë°›ëŠ” ê²ƒì„ ì„ í˜¸í•˜ëŠ” ê²ƒê³¼ ë³„ê°œë¡œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ëŠ” ì¼ë°˜ ì‚¬ìš©ìë“¤ì€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” <a href="https://support.microsoft.com/ko-kr/office/excel%EC%97%90%EC%84%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-%ED%8C%8C%EC%9D%BC-%ED%98%95%EC%8B%9D-0943ff2c-6014-4e8d-aaea-b83d51d46247">ì—‘ì…€ í”„ë¡œê·¸ë¨ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” XLS ë˜ëŠ” XLSX</a>ë¡œ ì œê³µí•˜ê¸°ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.</p>
<p>ê°œë°œìë“¤ì€ ì—‘ì…€ í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” XLS ë˜ëŠ” XLSX íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—‘ì…€ í”„ë¡œê·¸ë¨ì´ ë°ì´í„°ë¥¼ í™œìš©í•˜ê¸° ìœ„í•œ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ í¸ë¦¬í•œ ë°©ë²•ì´ê¸°ëŠ” í•˜ì§€ë§Œ ìë°”ì—ì„œ ì—‘ì…€ íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” Apach POIì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì—‘ì…€ íŒŒì¼ í˜•ì‹ì— ë”°ë¥¸ ì œì•½ì´ë‚˜ ì„±ëŠ¥ ì´ìŠˆê°€ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì—‘ì…€ íŒŒì¼ í˜•ì‹ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì œì•½ì‚¬í•­ì€ ë‹¨ì¼ ì‹œíŠ¸ì— ëŒ€í•œ ìµœëŒ€ í–‰ìˆ˜ ì œí•œì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì—‘ì…€ íŒŒì¼ì— ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ì„œë²„ì— ë¶€í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í˜„ì¬ ì¡°ì§ì—ì„œ ê°œë°œí•˜ëŠ” ì‹œìŠ¤í…œì€ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì´ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ ê³ ê°ì´ ë“±ë¡í•œ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ë„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ìš”ê±´ì€ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ì—¬ ì •ì œëœ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ ê³ ê°ì´ ë³´ìœ í•˜ëŠ” ì—ë„ˆì§€ ìì› ë° ë°ì´í„° í•­ëª©ë§Œí¼ íŒŒì¼ì— í¬í•¨ë˜ì–´ì•¼í•˜ëŠ” ë°ì´í„°ì˜ ê±´ìˆ˜ê°€ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ëŠ˜ì–´ë‚  ìˆ˜ ìˆìœ¼ë©° ê·¸ì— ëŒ€í•œ ê·œëª¨ë¥¼ ì˜ˆìƒí•˜ê¸° í˜ë“­ë‹ˆë‹¤. ì•„ë¬´ë¦¬ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ SXSSFë¡œ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ ì—‘ì…€ íŒŒì¼ì— ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ê±°ë‚˜ ì–´ë– í•œ ë™ì‘ì„ ìµœì†Œí™”í•˜ë„ë¡ ì½”ë“œë¥¼ ìµœì í™”í•œë‹¤ê³ í•´ë„ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ë°ì´í„° ê±´ìˆ˜ê°€ ë§ìŒìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì†Œìš” ì‹œê°„ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶€í•˜ì— ëŒ€í•œ ì´ìŠˆëŠ” í•´ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>ì´ëŸ¬í•œ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ìš”ê±´ì— ëŒ€í•´ì„œëŠ” ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ ìµœì†Œí•˜í•˜ëŠ” ë°©ì•ˆì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì‹œê³„ì—´ ë°ì´í„°ì— ëŒ€í•´ ë¹ ë¥¸ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ë°ì´í„°ì˜ ì–‘ì„ ìµœëŒ€í•œ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. ì‹œê³„ì—´ ë°ì´í„° íŠ¹ì„± ìƒ ê°™ì€ ì‹œê°„ëŒ€ì— ëŒ€í•œ ë°ì´í„° í•­ëª©ë“¤ì„ ì—´ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë„ë¡ <a href="https://code.kx.com/q/kb/pivoting-tables/">í…Œì´ë¸”ì„ í”¼ë´‡í•˜ëŠ” ë°©ë²•</a>ì´ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ í™œìš©í•˜ë©´ ì—‘ì…€ íŒŒì¼ì— ê¸°ë¡í•´ì•¼í•˜ëŠ” ë°ì´í„°í–‰ ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í”¼ë´‡ í…Œì´ë¸”ì„ ë„ì…í•˜ë”ë¼ë„ ì—‘ì…€ íŒŒì¼ì´ ì½ì„ ìˆ˜ ìˆëŠ” ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ë§Œë“œëŠ” ê²ƒì´ë¯€ë¡œ ì¼ë°˜ì ì¸ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ê¸°ë¡í•˜ëŠ” ì‘ì—…ë³´ë‹¤ ë§ì€ ë¶€í•˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. CSVëŠ” <a href="https://datatracker.ietf.org/doc/html/rfc4180">RFC 4180</a> í‘œì¤€ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ë°ì´í„° í˜•ì‹ìœ¼ë¡œ í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê¸°ì— ì í•©í•œ ë°©ë²•ì…ë‹ˆë‹¤. í‘œì¤€ìœ¼ë¡œ ì •ì˜ë˜ì–´ìˆê¸°ì— ëŒ€ë¶€ë¶„ì˜ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ í”„ë¡œê·¸ë¨ì—ì„œëŠ” CSV íŒŒì¼ì— í¬í•¨ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ <a href="https://code.kx.com/q/learn/tour/csvs/">í…Œì´ë¸”ì„ CSVë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•</a>ë„ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë³„ë„ì˜ ì‘ì—…ì„ í•˜ì§€ ì•Šê³  ê³ ê°ì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì‹œìŠ¤í…œì˜ íŒŒì¼ ë‹¤ìš´ë¡œë“œ í‘œì¤€ì€ CSVì´ê³  XLS ë° XLSXë¡œë„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ ì¸í„°í˜ì´ìŠ¤ëŠ” ì œê³µí•©ë‹ˆë‹¤ë§Œ ì‹¤ì œë¡œ ì†Œìš”ë˜ëŠ” ì‹œê°„ì„ ë¹„êµí•˜ë©´ ê·¹ë‹¨ì ìœ¼ë¡œ CSVì˜ ë‹¤ìš´ë¡œë“œì— ì†Œìš”ë˜ëŠ” ì‹œê°„ì´ ì ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>RFC 4180</tag>
        <tag>CSV</tag>
      </tags>
  </entry>
  <entry>
    <title>cURL</title>
    <url>/curl/</url>
    <content><![CDATA[<p><a href="https://curl.se/">cURL</a>ì€ ë¦¬ëˆ…ìŠ¤ì™€ ë§¥ í„°ë¯¸ë„ì—ì„œ HTTP ìš”ì²­ì„ ìˆ˜í–‰í•´ë³´ê¸° ìœ„í•´ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤. ìœˆë„ìš°ì—ì„œë„ <a href="https://curl.se/windows/microsoft.html">ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì»¬ í”„ë¡œê·¸ë¨</a>ì´ ë‚´ì¥ë˜ì–´ìˆë‹¤. ê·¸ë˜ì„œ ëª…ë ¹ í”„ë¡¬í”„íŠ¸(cmd)ë¡œ curl ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œëŠ” ëª…ë ¹ í”„ë¡¬í”„íŠ¸ê°€ ì•„ë‹ˆë¼ íŒŒì›Œì‰˜(Powershll)ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ <strong>Invoke-WebRequest</strong> ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ ê¸°ë³¸ì ìœ¼ë¡œ ì•Œë˜ ëª…ë ¹ì–´ê°€ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>ëª…ë ¹ í”„ë¡¬í”„íŠ¸</span></div><code class="language-bash">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Mambo<span class="token operator">></span>curl <span class="token parameter variable">-V</span>
<span class="token function">curl</span> <span class="token number">8.0</span>.1 <span class="token punctuation">(</span>Windows<span class="token punctuation">)</span> libcurl/8.0.1 Schannel WinIDN
Release-Date: <span class="token number">2023</span>-03-20
Protocols: dict <span class="token function">file</span> <span class="token function">ftp</span> ftps http https imap imaps pop3 pop3s smtp smtps telnet tftp
Features: AsynchDNS HSTS HTTPS-proxy IDN IPv6 Kerberos Largefile NTLM SPNEGO SSL SSPI threadsafe Unicode UnixSockets</code></pre>

<pre class="language-powershell" data-language="powershell"><div class="caption"><span>Windows Terminal</span></div><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo> curl

cmdlet <span class="token function">Invoke-WebRequest</span><span class="token punctuation">(</span>ëª…ë ¹ íŒŒì´í”„ë¼ì¸ ìœ„ì¹˜ 1<span class="token punctuation">)</span>
ë‹¤ìŒ ë§¤ê°œ ë³€ìˆ˜ì— ëŒ€í•œ ê°’ì„ ì œê³µí•˜ì‹­ì‹œì˜¤<span class="token punctuation">.</span> 
Uri: okky<span class="token punctuation">.</span>kr

StatusCode        : 200
StatusDescription : OK
Content           : &lt;<span class="token operator">!</span>DOCTYPE html>&lt;html lang=<span class="token string">"ko"</span> <span class="token keyword">class</span>=<span class="token string">"js-focus-visible h-full"</span>>&lt;head>&lt;meta charSet=<span class="token string">"utf-8"</span><span class="token operator">/</span>>&lt;title>
                    OKKY <span class="token operator">-</span> All That Developer&lt;<span class="token operator">/</span>title>&lt;meta name=<span class="token string">"robots"</span> content=<span class="token string">"index,follow"</span><span class="token operator">/</span>>&lt;meta name=<span class="token string">"descriptio
                    n"</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
RawContent        : HTTP/1<span class="token punctuation">.</span>1 200 OK
                    Transfer-Encoding: chunked
                    Connection: keep-alive
                    Vary: Accept-Encoding
                    Cache-Control: private<span class="token punctuation">,</span> no-cache<span class="token punctuation">,</span> no-store<span class="token punctuation">,</span> max-age=0<span class="token punctuation">,</span> must-revalidate
                    Content-<span class="token function">Type</span>: text/html<span class="token punctuation">;</span> charset=utf<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Forms             : <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
Headers           : <span class="token punctuation">&#123;</span><span class="token namespace">[Transfer-Encoding, chunked]</span><span class="token punctuation">,</span> <span class="token namespace">[Connection, keep-alive]</span><span class="token punctuation">,</span> <span class="token namespace">[Vary, Accept-Encoding]</span><span class="token punctuation">,</span> <span class="token namespace">[Cache-Control, p
                    rivate, no-cache, no-store, max-age=0, must-revalidate]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span>
Images            : <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
InputFields       : <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
Links             : <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
ParsedHtml        : mshtml<span class="token punctuation">.</span>HTMLDocumentClass
RawContentLength  : 22832</code></pre>

<p>cURLì˜ <a href="https://curl.se/windows/microsoft.html">curl shipped by Microsoft</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•´ë³´ë©´ Powershell Aliasì— ëŒ€í•œ ë¬¸ì œë¡œ ì¸í•´ curl.exe ë¡œ í”„ë¡œê·¸ë¨ì„ ì§€ì •í•˜ì—¬ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ì•ˆë‚´í•œë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">PS C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Mambo<span class="token operator">></span> curl.exe <span class="token parameter variable">-V</span>
<span class="token function">curl</span> <span class="token number">8.0</span>.1 <span class="token punctuation">(</span>Windows<span class="token punctuation">)</span> libcurl/8.0.1 Schannel WinIDN
Release-Date: <span class="token number">2023</span>-03-20
Protocols: dict <span class="token function">file</span> <span class="token function">ftp</span> ftps http https imap imaps pop3 pop3s smtp smtps telnet tftp
Features: AsynchDNS HSTS HTTPS-proxy IDN IPv6 Kerberos Largefile NTLM SPNEGO SSL SSPI threadsafe Unicode UnixSockets</code></pre>

<h4 id="íŒŒì›Œì‰˜-Alias-ì œê±°í•˜ê¸°"><a href="#íŒŒì›Œì‰˜-Alias-ì œê±°í•˜ê¸°" class="headerlink" title="íŒŒì›Œì‰˜ Alias ì œê±°í•˜ê¸°"></a>íŒŒì›Œì‰˜ Alias ì œê±°í•˜ê¸°</h4><p>Remove-Item ëª…ë ¹ì–´ë¡œ Aliasë¥¼ ì œê±°í•  ìˆ˜ ìˆìœ¼ë©° ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³ ë‚˜ì„œ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ í˜„ì¬ í”„ë¡œíŒŒì¼ì„ ë©”ëª¨ì¥ìœ¼ë¡œ ì—´ì–´ curlì— ëŒ€í•œ Aliasë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ì €ì¥í•˜ë„ë¡ í•˜ì. ì´ì œëŠ” êµ³ì´ curl.exe ë¼ëŠ” í”„ë¡œê·¸ë¨ì„ ì§€ì •í•´ì„œ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><div class="caption"><span>Windows Terminal</span></div><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo> <span class="token function">remove-item</span> alias:\curl
<span class="token function">PS</span> C:\Users\Mambo> curl <span class="token operator">-</span>V
curl 8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1 <span class="token punctuation">(</span>Windows<span class="token punctuation">)</span> libcurl/8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1 Schannel WinIDN
Release-Date: 2023-03-20
Protocols: dict file ftp ftps http https imap imaps pop3 pop3s smtp smtps telnet tftp
Features: AsynchDNS HSTS HTTPS-proxy IDN IPv6 Kerberos Largefile NTLM SPNEGO SSL SSPI threadsafe Unicode UnixSockets

notepad <span class="token variable">$profile</span>

<span class="token comment"># ë©”ëª¨ì¥ ìƒë‹¨ì— ì…ë ¥</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Test-Path</span> <span class="token operator">-</span>Path alias:curl<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token function">Remove-Item</span> alias:curl <span class="token punctuation">&#125;</span></code></pre>

<h4 id="íŒ-ë¦¬ëˆ…ìŠ¤ì—ì„œ-cURL-ëª…ë ¹ì–´-ì¶œë ¥ì´-ê°œí–‰ë˜ì§€-ì•Šì„-ê²½ìš°"><a href="#íŒ-ë¦¬ëˆ…ìŠ¤ì—ì„œ-cURL-ëª…ë ¹ì–´-ì¶œë ¥ì´-ê°œí–‰ë˜ì§€-ì•Šì„-ê²½ìš°" class="headerlink" title="[íŒ] ë¦¬ëˆ…ìŠ¤ì—ì„œ cURL ëª…ë ¹ì–´ ì¶œë ¥ì´ ê°œí–‰ë˜ì§€ ì•Šì„ ê²½ìš°"></a>[íŒ] ë¦¬ëˆ…ìŠ¤ì—ì„œ cURL ëª…ë ¹ì–´ ì¶œë ¥ì´ ê°œí–‰ë˜ì§€ ì•Šì„ ê²½ìš°</h4><p>ê°„í˜¹ ë¦¬ëˆ…ìŠ¤ì—ì„œ cURL ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ ì¶œë ¥ ê²°ê³¼ê°€ ê°œí–‰ë˜ì§€ ì•Šì•„ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í˜¸ì¶œí•  ë•Œ ë¶ˆí¸í•¨ì„ ëŠë‚„ ìˆ˜ ìˆë‹¤. <a href="https://stackoverflow.com/questions/12849584/automatically-add-newline-at-end-of-curl-response-body/14614203#14614203">https://stackoverflow.com/a/14614203</a>ì— ë‚˜ì™€ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©ì ë””ë ‰í† ë¦¬ì— .curlrc íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ê°œí–‰ì´ ë™ì‘í•˜ë„ë¡ ì‘ì„±í•´ë‘ë©´ ëœë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>Terminal</span></div><code class="language-bash"><span class="token function">vi</span> ~/.curlrc
<span class="token parameter variable">-w</span> <span class="token string">"<span class="token entity" title="\n">\n</span>"</span></code></pre>
]]></content>
  </entry>
  <entry>
    <title>ê³µê³µë°ì´í„°í¬í„¸ ì˜¤í”ˆ APIëŠ” ì›¹ ê°œë°œìë¥¼ ê´´ë¡­í˜€ (Feat. XML)</title>
    <url>/data-go-openapi/</url>
    <content><![CDATA[<p>ê³µê³µë°ì´í„°í¬í„¸ì˜ ì˜¤í”ˆ APIëŠ” ë§ì€ ì›¹ ì„œë¹„ìŠ¤ë‚˜ ì‹œìŠ¤í…œì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì œê³µí•˜ê³  ìˆì–´ì„œ ì›¹ ê°œë°œìë“¤ì—ê²Œ í•„ìˆ˜ì ìœ¼ë¡œ ì—°ë™ì„ ìš”êµ¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë§ì€ ê¸°ì—…ì—ì„œ ì˜¤í”ˆ APIë¥¼ í™œìš©í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ìˆ˜ ë§ì€ ì›¹ ê°œë°œìê°€ ì˜¤í”ˆ APIì— ëŒ€í•œ ì—°ë™ ì˜¤ë¥˜ ë•Œë¬¸ì— í˜ë“¤ì–´í–ˆë‹¤. ì§€ê¸ˆì€ ì¸ì¦í‚¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì URL ì¸ì½”ë”©ëœ í‚¤ì™€ ì›ë³¸ì„ êµ¬ë³„í•´ì„œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— OpenAPI í™œìš© ìì²´ëŠ” ì–´ë ¤ì›€ì´ ì—†ë‹¤ê³  ìƒê°ì´ ëœë‹¤. ë§Œì•½, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê°œë°œìë¼ë©´ ì¸ì½”ë”©ë˜ì§€ ì•Šì€ ì¸ì¦í‚¤(Decoding)ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤. </p>
<p><img data-src="/images/posts/data-go-openapi/01.png"></p>
<p>í•˜ì§€ë§Œ, ê³µê³µë°ì´í„°í¬í„¸ì˜ ì˜¤í”ˆ APIê°€ ì›¹ ê°œë°œìë“¤ì„ ê´´ë¡­íˆëŠ” ë¬¸ì œëŠ” ìƒê°ë³´ë‹¤ ë§ì€ë° í•¨ê»˜ ì•Œì•„ë³´ë„ë¡ í•˜ì.</p>
<h4 id="ê°„í—ì -SERVICE-KEY-IS-NOT-REGISTERED-ERROR-ì˜¤ë¥˜"><a href="#ê°„í—ì -SERVICE-KEY-IS-NOT-REGISTERED-ERROR-ì˜¤ë¥˜" class="headerlink" title="ê°„í—ì  SERVICE_KEY_IS_NOT_REGISTERED_ERROR ì˜¤ë¥˜"></a>ê°„í—ì  SERVICE_KEY_IS_NOT_REGISTERED_ERROR ì˜¤ë¥˜</h4><p><img data-src="/images/posts/data-go-openapi/02.png"></p>
<p>ê³µê³µë°ì´í„° í¬í„¸ì˜ ìì£¼í•˜ëŠ” ì§ˆë¬¸ ì¤‘ ì„œë¹„ìŠ¤ ì˜¤ë¥˜ì— ëŒ€í•œ ë‚´ìš©ìœ¼ë¡œ <code>SERVICE_KEY_IS_NOT_REGISTERED_ERROR</code> ì˜¤ë¥˜ì— ëŒ€í•œ ì›ì¸ì„ ê°„ë‹¨í•˜ê²Œ ì†Œê°œí•˜ê³  ìˆë‹¤. ì˜ëª»ëœ ì¸ì¦í‚¤ë¥¼ ë„£ì–´ì„œ í˜¸ì¶œí•˜ì˜€ê±°ë‚˜ ì¸ì¦ ê¸°ê´€ ì„œë²„ë¡œ ë™ê¸°í™”ë˜ì§€ ì•Šì•„ì„œ ë°œìƒí•œë‹¤ê³  ë˜ì–´ìˆë‹¤. í•´ë‹¹ ì¸ì¦í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ OpenAPIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆì—ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ëª‡ ì´ˆ ë§Œì— ì¸ì¦í‚¤ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ëŠ” ì˜¤ë¥˜ê°€ ê°„í—ì ìœ¼ë¡œ ë°œìƒí•˜ê¸°ë„ í•œë‹¤.</p>
<h4 id="í†µì¼ë˜ì§€-ì•Šì€-ì˜¤í”ˆ-API-ì°¸ê³ -ë¬¸ì„œ"><a href="#í†µì¼ë˜ì§€-ì•Šì€-ì˜¤í”ˆ-API-ì°¸ê³ -ë¬¸ì„œ" class="headerlink" title="í†µì¼ë˜ì§€ ì•Šì€ ì˜¤í”ˆ API ì°¸ê³  ë¬¸ì„œ"></a>í†µì¼ë˜ì§€ ì•Šì€ ì˜¤í”ˆ API ì°¸ê³  ë¬¸ì„œ</h4><p>ì˜¤í”ˆ APIì— ëŒ€í•œ ì°¸ê³  ë¬¸ì„œì˜ í˜•ì‹ì„ ê°•ì œí•˜ì§€ ì•ŠëŠ” ê²°ê³¼ë¡œ ë§ì€ <code>ê¸°ì—…ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í™•ì¥ìì¸ .hwpë¡œ ì‘ì„±ë˜ì–´ ê³µìœ </code>ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ê·¸ë¡œ ì¸í•´ ì›¹ ê°œë°œìë“¤ì€ í•œê¸€ ë¬¸ì„œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í•œê¸€ ë¬¸ì„œë¥¼ ì—´ ìˆ˜ ìˆëŠ” ë·°ì–´ë¥¼ ì„¤ì¹˜í•´ì•¼ë§Œ í•œë‹¤. ê³µê³µë°ì´í„°í¬í„¸ì˜ ì˜¤í”ˆ API ì¤‘ì—ëŠ” <code>Swagger UI ê¸°ë°˜ì˜ OpenAPI ëª…ì„¸ì„œë¥¼ ì œê³µ</code>í•˜ê¸°ë„ í•œë‹¤.</p>
<p><img data-src="/images/posts/data-go-openapi/03.png"></p>
<h4 id="í•´ì™¸-ì•„ì´í”¼-ìš”ì²­-ì œí•œ"><a href="#í•´ì™¸-ì•„ì´í”¼-ìš”ì²­-ì œí•œ" class="headerlink" title="í•´ì™¸ ì•„ì´í”¼ ìš”ì²­ ì œí•œ"></a>í•´ì™¸ ì•„ì´í”¼ ìš”ì²­ ì œí•œ</h4><p>ê³µê³µë°ì´í„°í¬í„¸ì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë“  ì˜¤í”ˆ APIì— í•´ë‹¹í•˜ëŠ” ë¬¸ì œëŠ” ì•„ë‹ˆì§€ë§Œ ì˜¤í”ˆ API ì¤‘ ë³´ì•ˆ ìƒ êµ­ë‚´ ì•„ì´í”¼ ëŒ€ì—­ì´ ì•„ë‹Œ í•´ì™¸ ì•„ì´í”¼ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì›¹ ë°©í™”ë²½ìœ¼ë¡œ ë§‰í˜€ì ¸ìˆëŠ” ê²½ìš°ë„ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ <a href="https://www.data.go.kr/data/15056640/openapi.do">í•œêµ­ì „ë ¥ê±°ë˜ì†Œì—ì„œ ì œê³µí•˜ëŠ” ì˜¤í”ˆ API</a>ë¡œ ì°¸ê³  ë¬¸ì„œì— ë‚˜ì™€ìˆì§€ ì•Šì€ ë‚´ìš©ì´ì§€ë§Œ ê³µê³µë°ì´í„°í¬í„¸ì˜ ê²Œì´íŠ¸ì›¨ì´ ë°©ì‹ì´ ì•„ë‹Œ KPXì—ì„œ ê´€ë¦¬í•˜ëŠ” ì„œë²„ë¡œ ìš”ì²­ë˜ê¸° ë•Œë¬¸ì— AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ì—†ê³  <code>êµ­ë‚´ ì„œë¹„ìŠ¤ë¡œ ìš°íšŒ</code>í•˜ê±°ë‚˜ ì‚¬ìš©ì¤‘ì¸ ì•„ì´í”¼ ëŒ€ì—­ì„ ì „ë‹¬í•˜ì—¬ <code>ë°©í™”ë²½ í•´ì œ ì‹ ì²­</code>ì„ í•´ì•¼í•œë‹¤. </p>
<h4 id="ê²Œì´íŠ¸ì›¨ì´-ë°©ì‹-ì˜¤í”ˆ-API"><a href="#ê²Œì´íŠ¸ì›¨ì´-ë°©ì‹-ì˜¤í”ˆ-API" class="headerlink" title="ê²Œì´íŠ¸ì›¨ì´ ë°©ì‹ ì˜¤í”ˆ API"></a>ê²Œì´íŠ¸ì›¨ì´ ë°©ì‹ ì˜¤í”ˆ API</h4><p><img data-src="/images/posts/data-go-openapi/04.png"></p>
<p>ê³µê³µë°ì´í„°í¬í„¸ì˜ ê²Œì´íŠ¸ë°©ì‹ ì˜¤í”ˆ APIëŠ” ì—”ë“œí¬ì¸íŠ¸ê°€ <code>apis.data.go.kr</code>ì™€ ê°™ì´ êµ¬ì„±ë˜ë©° ìœ„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì˜¤í”ˆ APIê°€ JSON íƒ€ì…ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ ì§€ì›í•˜ë”ë¼ë„ <code>XMLë¡œë§Œ ì¶œë ¥ëœë‹¤ëŠ” ì œì•½ì‚¬í•­</code>ì´ ìˆë‹¤. ì´ëŸ¬í•œ ì œì•½ì‚¬í•­ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ì‘ë‹µê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì˜¤í•´í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì‹¬ì§€ì–´ HTTP ìƒíƒœ ì½”ë“œê°€ 200ìœ¼ë¡œ ì‘ë‹µë˜ì§€ë§Œ <code>ì‘ë‹µ ê²°ê³¼ì— ì˜¤ë¥˜ì— ëŒ€í•œ ë‚´ìš©ìœ¼ë¡œ ì œê³µí•œë‹¤ëŠ” ì </code>ìœ¼ë¡œ ì¸í•´ HTTP ìƒíƒœ ì½”ë“œë¥¼ í†µí•´ì„œ 1ì°¨ì ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ì—†ê³  ì‘ë‹µ ë°”ë””ë¥¼ ë¬´ì¡°ê±´ í™•ì¸í•´ì„œ ì •ìƒì ì¸ í˜¸ì¶œì¸ì§€ ì•„ë‹Œì§€ë¥¼ êµ¬ë³„í•´ì•¼í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Unexpected</span> exception thrown<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">net<span class="token punctuation">.</span>minidev<span class="token punctuation">.</span>json<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span>ParseException</span><span class="token operator">:</span> <span class="token class-name">Unexpected</span> token <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OpenAPI_ServiceResponse</span><span class="token punctuation">></span></span>
	<span class="token generics"><span class="token punctuation">&lt;</span>cmmMsgHeader<span class="token punctuation">></span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>errMsg<span class="token punctuation">></span></span><span class="token constant">SERVICE</span> <span class="token constant">ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>errMsg<span class="token operator">></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>returnAuthMsg<span class="token punctuation">></span></span><span class="token constant">SERVICE_KEY_IS_NOT_REGISTERED_ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>returnAuthMsg<span class="token operator">></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>returnReasonCode<span class="token punctuation">></span></span><span class="token number">30</span><span class="token operator">&lt;</span><span class="token operator">/</span>returnReasonCode<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>cmmMsgHeader<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">OpenAPI_ServiceResponse</span><span class="token operator">></span> at position <span class="token number">229.</span></code></pre>

<p>ë”°ë¼ì„œ, ê³µê³µë°ì´í„°í¬í„¸ì— ëŒ€í•œ ì—°ë™ì„ í•˜ëŠ” ê²½ìš° ì›¹ ê°œë°œìëŠ” ì•„ë˜ì— ëŒ€í•´ ê³ ë ¤ ë˜ëŠ” ëŒ€ì‘ì„ í•´ì•¼í•œë‹¤.</p>
<ol>
<li>ê²Œì´íŠ¸ì›¨ì´ ë°©ì‹ API í™•ì¸</li>
<li>API í˜¸ì¶œ ì œí•œ ì œì•½ í™•ì¸</li>
<li>JSON ê³¼ XML ì²˜ë¦¬ ëª¨ë‘ ê³ ë ¤</li>
<li>ê°„í—ì  ì¸ì¦í‚¤ ì˜¤ë¥˜ ì¼€ì´ìŠ¤ ëŒ€ì‘ (API ì ê²€ í¬í•¨)</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>AWS Elastic Beanstalk Java SE í”Œë«í¼ í™˜ê²½ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°</title>
    <url>/deploy-application-to-the-aws-elastic-beanstalk-java-se-platform-enviroment/</url>
    <content><![CDATA[<p><img data-src="/images/posts/beanstalk-java-se-platform/aws-elastic-beanstalk-logo.jpg#compact"></p>
<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì€ AWS Elastic Beanstalkì˜ <code>Java SE í”Œë«í¼ í™˜ê²½</code>ì„ ì‚¬ìš©í•˜ì—¬ ê°œë°œëœ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ì„œ í•™ìŠµí•©ë‹ˆë‹¤. AWSë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ <code>Elastic Beanstalk</code> ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” í™˜ê²½ì„ ë¹ ë¥´ê³  ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  í™˜ê²½ ì„±ëŠ¥ ì§€í‘œì— ë”°ë¼ í”„ë¡œë¹„ì €ë‹í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì €ì™€ ê°™ì´ Elastic Beanstalk ê²½í—˜ì´ ë¶€ì¡±í•œ ì´ˆë³´ ê°œë°œì ë˜ëŠ” íšŒì‚¬ì—ì„œ ì„œë¹„ìŠ¤ ë°°í¬ë¥¼ ë‹´ë‹¹í•˜ì§€ ì•ŠëŠ” ê°œë°œìë¶„ë“¤ì€ ì´ ê¸€ì„ í†µí•´ Elastic Beanstlakë¡œ ìë°” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì„±í•˜ê³  ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. </p>
<blockquote>
<p>ê°œë°œ ê²½ë ¥ì€ 4ë…„ì´ ì§€ë‚¬ìœ¼ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ê²ƒì€ ì–¼ë§ˆë˜ì§€ ì•Šì•˜ì–´ìš”â€¦</p>
</blockquote>
<h2 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h2><p>AWSì—ì„œ ì œê³µí•˜ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/Welcome.html">Elastic Beanstalk</a>ì„œë¹„ìŠ¤ëŠ” AWS í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë¹ ë¥´ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë˜ëŠ” í™˜ê²½ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” AWSì˜ ì£¼ìš” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. Beanstalkì„ ì‚¬ìš©í•˜ë©´ Go, Java, Node.js, Python ë“± ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ê°œë°œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì—ì„œ ë°°í¬í•  ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ì½”ë“œëŠ” ê¹ƒí—ˆë¸Œ <a href="https://github.com/kdevkr/beanstalk-deploy-sample">beanstalk-deploy-sample</a>ì— ê³µìœ ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>
<blockquote>
<p>ì—„ì²­ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ì—ìš”!</p>
</blockquote>
<h3 id="Java-SE-í”Œë«í¼"><a href="#Java-SE-í”Œë«í¼" class="headerlink" title="Java SE í”Œë«í¼"></a>Java SE í”Œë«í¼</h3><p>Elastic BeanstalkëŠ” ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆê²Œ ì—¬ëŸ¬ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/concepts.platforms.html">í”Œë«í¼ í™˜ê²½</a>ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ì œê°€ ì¤€ë¹„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì€ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/platforms/platforms-supported.html#platforms-supported.javase">Java SE í”Œë«í¼</a>ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ë³„ë„ë¡œ Tomcat í”Œë«í¼ì´ ì¡´ì¬í•˜ê¸°ëŠ” í•˜ì§€ë§Œ ì´ ê¸€ì—ì„œì˜ ì£¼ìš” ê´€ì‹¬ì‚¬ëŠ” ì•„ë‹ˆì—ìš”.</p>
</blockquote>
<p><a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-platform.html">Elastic Beanstalk Java SE í”Œë«í¼</a>ì€ ìì²´ì ìœ¼ë¡œ ì‹¤í–‰ê°€ëŠ¥í•˜ë„ë¡ ì»´íŒŒì¼ëœ JAR íŒŒì¼ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í™˜ê²½ìœ¼ë¡œ ì œê°€ ì¤€ë¹„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì´ í™˜ê²½ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ì í•©í•œ í™˜ê²½ì…ë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì§€ì› ì¤‘ í•˜ë‚˜ëŠ” <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-executable-jar-format.html">ì‹¤í–‰ê°€ëŠ¥í•œ JAR ë˜ëŠ” WAR íŒŒì¼</a>ìœ¼ë¡œ íŒ¨í‚¤ì§•í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<h4 id="ê¸°ë³¸-ë°°í¬-ìœ í˜•"><a href="#ê¸°ë³¸-ë°°í¬-ìœ í˜•" class="headerlink" title="ê¸°ë³¸ ë°°í¬ ìœ í˜•"></a>ê¸°ë³¸ ë°°í¬ ìœ í˜•</h4><p>Elastic Beanstalkì˜ Java SE í”Œë«í¼ í™˜ê²½ì€ ë‘ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í™˜ê²½ì— ì—…ë¡œë“œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ì„ ë°°í¬í•  ìˆ˜ ìˆê²Œ ì§€ì›í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ë°°í¬ë˜ëŠ” ë°©ì‹ì€ ë‹¨ì¼ íŒŒì¼ë¡œ ìì²´ì ìœ¼ë¡œ ì‹¤í–‰ê°€ëŠ¥í•˜ë„ë¡ ì»´íŒŒì¼ëœ JAR íŒŒì¼ì„ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ Java SE í”Œë«í¼ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>ê¸°ë³¸ ì‹¤í–‰ ëª…ë ¹ì–´</span></div><code class="language-bash"><span class="token function">java</span> <span class="token parameter variable">-jar</span> application.jar</code></pre>

<p>ìœ„ ëª…ë ¹ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ëª…ì´ <code>application.jar</code>ì¸ ì´ìœ ëŠ” ìš°ë¦¬ê°€ í™˜ê²½ì— ì—…ë¡œë“œí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ì„ application.jarë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•˜ê¸° ë•Œë¬¸ì´ë©° ì—¬ëŸ¬ë¶„ì´ ì–´ë–¤ íŒŒì¼ì˜ ì´ë¦„ìœ¼ë¡œ ì œê³µí•˜ë“  ìƒê´€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
<h4 id="ì‚¬ìš©ì-ì •ì˜-ë°°í¬"><a href="#ì‚¬ìš©ì-ì •ì˜-ë°°í¬" class="headerlink" title="ì‚¬ìš©ì ì •ì˜ ë°°í¬"></a>ì‚¬ìš©ì ì •ì˜ ë°°í¬</h4><p>ë‘ë²ˆì§¸ëŠ” ë‹¤ìˆ˜ì˜ ì»´íŒŒì¼ëœ JAR ë˜ëŠ” <code>Procfile</code>ì´ë¼ëŠ” ëª…ë ¹ì–´ íŒŒì¼ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê±°ë‚˜ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ì •ì˜í•˜ë¯€ë¡œ JVM ì˜µì…˜ ë˜ëŠ” ì»¤ë§¨ë“œ ë¼ì¸ íŒŒë¼ë¯¸í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-config" data-language="config"><div class="caption"><span>Procfile</span></div><code class="language-config">web: java -Dfile.encoding&#x3D;UTF-8 -Djava.net.preferIPv4Stack&#x3D;true -Xmx1g -jar app.jar</code></pre>

<p>ì´ë ‡ê²Œ íŒ¨í‚¤ì§•ëœ JAR íŒŒì¼ê³¼ Procfileì„ ë¬¶ì–´ì„œ ì œê³µí•˜ëŠ” íŒŒì¼ì„ Elastic Beanstalkì—ì„œëŠ” ì†ŒìŠ¤ ë²ˆë“¤(Source Bundle)ì´ë¼ê³  ë§í•©ë‹ˆë‹¤. ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì„ Java SE í”Œë«í¼ í™˜ê²½ì— ì—…ë¡œë“œí•˜ì—¬ ë°°í¬í•˜ëŠ” ë°©ì‹ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œë„ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>
<h3 id="Linux-í”Œë«í¼-í™•ì¥"><a href="#Linux-í”Œë«í¼-í™•ì¥" class="headerlink" title="Linux í”Œë«í¼ í™•ì¥"></a>Linux í”Œë«í¼ í™•ì¥</h3><p>ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ë¡œ ì‚¬ìš©ì ì •ì˜ ë°°í¬ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° .ebextensions, .platformì´ë¼ëŠ” í´ë”ë¥¼ í¬í•¨ì‹œì¼œ Java SE í”Œë«í¼ í™˜ê²½ì— ëŒ€í•œ í™•ì¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. í”Œë«í¼ í™•ì¥ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ AWS Elastic Beanstalk ê°œë°œì ê°€ì´ë“œì˜ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/platforms-linux-extend.html">Elastic Beanstalk Linux í”Œë«í¼ í™•ì¥</a>ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/platforms-linux-extend.html#platforms-linux-extend.workflow">ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ ì›Œí¬í”Œë¡œìš°</a>ë¥¼ ì°¸ê³ í•˜ë©´ ì—…ë¡œë“œëœ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì„ í†µí•´ Elastic Beanstalkì´ ì–´ë–»ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”Œë«í¼ í™•ì¥ì„ í†µí•´ ë‹¤ìŒì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•˜ê¸° ì „ ëª…ë ¹ì–´ ìˆ˜í–‰</li>
<li>ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±</li>
</ul>
<p>ìš°ì•„í•œ í˜•ì œë“¤ ê¸°ìˆ  ë¸”ë¡œê·¸ì˜ <a href="https://woowabros.github.io/woowabros/2017/08/07/ebextension.html">Elastic Beanstalk Configuration files(.ebextensions)</a>ì—ì„œì²˜ëŸ¼ í”Œë«í¼ í™•ì¥ì„ í†µí•´ ëª¨ë‹ˆí„°ë§ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ ë¡œì»¬ íƒ€ì„ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ë¹Œë“œë¶€í„°-ë°°í¬ê¹Œì§€"><a href="#ë¹Œë“œë¶€í„°-ë°°í¬ê¹Œì§€" class="headerlink" title="ë¹Œë“œë¶€í„° ë°°í¬ê¹Œì§€"></a>ë¹Œë“œë¶€í„° ë°°í¬ê¹Œì§€</h2><p>Elastic Beanstalkì˜ Java SE í”Œë«í¼ í™˜ê²½ì— ëŒ€í•´ì„œ ì•Œê²Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œë¶€í„° ì œê°€ ì¤€ë¹„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Java SE í”Œë«í¼ í™˜ê²½ì— ë°°í¬í•˜ëŠ” ê³¼ì •ì„ í™•ì¸í•˜ë©´ì„œ ë¹Œë“œë¶€í„° ë°°í¬ê¹Œì§€ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ™ì§€í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ì—¬ëŸ¬ë¶„ë“¤ë„ ë”°ë¼í•˜ê³  ì‹¶ë‹¤ë©´ <a href="https://github.com/kdevkr/beanstalk-deploy-sample">kdevkr&#x2F;beanstalk-deploy-sample</a>ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h3 id="ì‹¤í–‰ê°€ëŠ¥í•œ-JAR-íŒŒì¼-ì¤€ë¹„í•˜ê¸°"><a href="#ì‹¤í–‰ê°€ëŠ¥í•œ-JAR-íŒŒì¼-ì¤€ë¹„í•˜ê¸°" class="headerlink" title="ì‹¤í–‰ê°€ëŠ¥í•œ JAR íŒŒì¼ ì¤€ë¹„í•˜ê¸°"></a>ì‹¤í–‰ê°€ëŠ¥í•œ JAR íŒŒì¼ ì¤€ë¹„í•˜ê¸°</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê·¸ë˜ë“¤(Gradle) ë˜ëŠ” ë©”ì´ë¸(Maven) ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ê°€ëŠ¥í•œ JAR ë˜ëŠ” WAR íŒŒì¼ì„ íŒ¨í‚¤ì§•í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì €ëŠ” ê·¸ë˜ë“¤ì„ ë¹Œë“œ ë„êµ¬ë¡œ ì‚¬ìš©í•˜ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ë¹Œë“œ íƒœìŠ¤í¬ì— <code>bootJar</code>ì™€ <code>bootWar</code>ê°€ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-gradle-build-01.png"></p>
<p>ì‹¤í–‰ê°€ëŠ¥í•œ JAR íŒŒì¼ë¡œë§Œ ë°°í¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì•„ë‹˜ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ì €ëŠ” bootWar íƒœìŠ¤í¬ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ê°€ëŠ¥í•œ WAR íŒŒì¼ë¡œ íŒ¨í‚¤ì§•í•˜ê² ìŠµë‹ˆë‹¤. ì´ íƒœìŠ¤í¬ë¡œ íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ì„ <code>build/libs</code> í´ë”ì— ìƒì„±ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-gradle-build-02.png"></p>
<p>ì´ë ‡ê²Œ íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‚˜ Java SE í”Œë«í¼ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ë°©ì‹ ì¤‘ ì‚¬ìš©ì ì •ì˜ ë°°í¬ ë°©ì‹ì„ ìœ„í•´ ìƒì„±ëœ WAR íŒŒì¼ê³¼ í•¨ê»˜ ì´ íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì •ì˜í•œ <code>Procfile</code>ì„ ë§Œë“¤ì–´ í•˜ë‚˜ì˜ ì†ŒìŠ¤ ë²ˆë“¤ë¡œ ë§Œë“œëŠ” ê³¼ì •ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ build&#x2F;libs í´ë”ì— ì§ì ‘ Procfileì„ ìƒì„±í•˜ì—¬ ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ ì •ì˜í•˜ë©´ ì•ˆë©ë‹ˆë‹¤. build í´ë”ëŠ” Gitì—ì„œ ë¬´ì‹œë˜ëŠ” ê²½ë¡œì´ë©° clean íƒœìŠ¤í¬ì— ì˜í•´ì„œ ì‰½ê²Œ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì‰½ê²Œ ë– ì˜¤ë¥´ëŠ” ë°©ë²•ì€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— Procfileì„ ë§Œë“¤ì–´ì„œ build&#x2F;libsì— íŒ¨í‚¤ì§•ëœ WARíŒŒì¼ê³¼ ì••ì¶•í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>ë‹¤í–‰íˆë„ ê·¸ë˜ë“¤ íƒœìŠ¤íŠ¸ ìœ í˜• ì¤‘ì—ì„œ ì•„ì¹´ì´ë¸Œ(ì••ì¶• íŒŒì¼)ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” <a href="https://docs.gradle.org/current/userguide/working_with_files.html#sec:creating_archives_example">Zip</a> íƒœìŠ¤í¬ ìœ í˜•ì´ ìˆìœ¼ë¯€ë¡œ ì´ ìœ í˜•ì— ëŒ€í•œ íƒœìŠ¤í¬ë¥¼ ì‘ì„±í•˜ì—¬ ì†ŒìŠ¤ ë²ˆë“¤ì„ ë§Œë“œëŠ” íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì €, í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— <code>Procfile</code>ì„ ë§Œë“¤ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-config" data-language="config"><div class="caption"><span>Procfile</span></div><code class="language-config">web: java -Xmx1g -jar demo.war</code></pre>

<p>ê·¸ë¦¬ê³  íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ê³¼ Procfileì„ ì••ì¶•í•œ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” íƒœìŠ¤í¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">task <span class="token function">zipSourceBundle</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'bootWar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'Procfile'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'Procfile'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        println bootWar<span class="token punctuation">.</span>archiveName
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì‘ì„±ëœ zipSourceBundle íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ <code>build/distributions</code> í´ë”ì— <code>beanstalk.zip</code>ì´ë¼ëŠ” ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì´ ìƒì„±ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-gradle-build-03.png"></p>
<p>ê·¸ëŸ°ë° ë§ì…ë‹ˆë‹¤. ë§Œì•½, bootWar íƒœìŠ¤í¬ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” íŒŒì¼ëª…ì´ <code>demo.war</code>ê°€ ì•„ë‹ˆë¼ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? Procfileì— ì •ì˜í•œ ëª…ë ¹ì–´ì™€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë°©ë²•ì€ ê·¸ë˜ë“¤ ë¹Œë“œ ê³¼ì •ì—ì„œ Procfileì„ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">task <span class="token function">procfile</span><span class="token punctuation">(</span>dependsOn<span class="token punctuation">:</span> <span class="token string">'bootWar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    doFirst <span class="token punctuation">&#123;</span>
        <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"build/libs"</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"web: java -Xmx1g -jar </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">bootWar<span class="token punctuation">.</span>archiveName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì‘ì„±ëœ procfile íƒœìŠ¤í¬ëŠ” bootWar íƒœìŠ¤í¬ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” WAR íŒŒì¼ëª…ì„ ì£¼ì…í•˜ì—¬ Procfileì„ build&#x2F;libs ìœ„ì¹˜ì— ìƒì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•ì„œ ì‘ì„±í•œ zipSourceBundleë¥¼ ë³´ì™„í•œ zipBeanstalk íƒœìŠ¤í¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. </p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">task <span class="token function">zipBeanstalk</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'procfile'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        println bootWar<span class="token punctuation">.</span>archiveName
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì´ì œ zipBeanstalk íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ì˜€ë”ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-gradle-build-04.png"></p>
<p>ê·¸ë˜ë“¤ ë¹Œë“œ ì‹œ í”„ë¡œì íŠ¸ ë²„ì „(project.version)ì´ ëª…ì‹œë˜ì–´ë„ Procfileê³¼ íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ëª…ì´ ë‹¤ë¥¸ ê²½ìš°ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>í”„ë¡œì íŠ¸ ë²„ì „ì„ ëª…ì‹œí•˜ë©´ ì•„ì¹´ì´ë¸Œ íŒŒì¼ëª…ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ìš”!</p>
</blockquote>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-gradle-build-05.png" alt="-Pversion=1.0.0"></p>
<blockquote>
<p>ì˜¤ì˜·! ì¢‹ì•„ìš”.</p>
</blockquote>
<h3 id="Java-SE-í”Œë«í¼-í™˜ê²½-ì‹œì‘í•˜ê¸°"><a href="#Java-SE-í”Œë«í¼-í™˜ê²½-ì‹œì‘í•˜ê¸°" class="headerlink" title="Java SE í”Œë«í¼ í™˜ê²½ ì‹œì‘í•˜ê¸°"></a>Java SE í”Œë«í¼ í™˜ê²½ ì‹œì‘í•˜ê¸°</h3><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ì´ ì¤€ë¹„ë˜ì—ˆìœ¼ë¯€ë¡œ Elastic Beanstalk ì„œë¹„ìŠ¤ì—ì„œ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ìƒì„±í•©ë‹ˆë‹¤. í™˜ê²½ì— ëŒ€í•œ ì´ë¦„, ë„ë©”ì¸ì„ ì„¤ì •í•œ í›„ ìš°ë¦¬ê°€ ì¤€ë¹„í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìì²´ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” JARë¡œ ì»´íŒŒì¼ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë¯€ë¡œ <code>Java SE í”Œë«í¼ í™˜ê²½</code>ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-01.png" alt="ì›¹ ì„œë²„ í™˜ê²½ ì„ íƒ"></p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-02.png" alt="í™˜ê²½ ë° ë„ë©”ì¸ ì„¤ì •"></p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-03.png" alt="Java SE í”Œë«í¼ ì„ íƒ"></p>
<p>ì•ì„œ ì¤€ë¹„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤íŒŒì¼ì„ ì„ íƒí•˜ì—¬ ì—…ë¡œë“œí•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-04.png"></p>
<p><strong>ì£¼ì˜!</strong></p>
<p>ìœ„ í™”ë©´ì—ì„œ í™˜ê²½ ìƒì„± ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ë˜ì–´ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì´ êµ¬ì„±ëœ Java SE í”Œë«í¼ í™˜ê²½ì„ êµ¬ì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì£¼ì˜í•´ì•¼ë  ì‚¬í•­ì€ ë‹¤ìŒ ì²˜ëŸ¼ í™˜ê²½ì„ ìƒì„±í•˜ê³ ë‚˜ì„œ <strong>ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ë“¤ì´ ìˆë‹¤</strong>ëŠ” ì ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-05.png"></p>
<p>ê¸°ë³¸ Java SE í”Œë«í¼ì€ <strong>CLB(Classic Load Balancer)</strong> ë¥¼ ë¡œë“œë°¸ëŸ°ì„œë¡œ ì‚¬ìš©í•˜ëŠ”ë° í™˜ê²½ì´ ìƒì„±ëœ ì´í›„ì— ë¡œë“œ ë°¸ëŸ°ì„œ ìœ í˜•ì„ ë³€ê²½í•˜ê³ ì êµ¬ì„± í¸ì§‘ì„ ì‹œë„í•˜ì˜€ì§€ë§Œ ìœ í˜•ì„ ë³€ê²½í•˜ëŠ” ê²ƒì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, L7 ë ˆë²¨ì˜ ë¡œë“œë°¸ëŸ°ì„œì¸ <strong>ALB(Application Load Balancer)</strong> ë˜ëŠ” L4 ë ˆë²¨ì˜ <strong>NLB(Network Load Balancer)</strong> ë¥¼ í™˜ê²½ì— ëŒ€í•œ ë¡œë“œë°¸ëŸ°ì„œë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ ì˜µì…˜ êµ¬ì„± ê¸°ëŠ¥ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ í™˜ê²½ì„ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-06.png" alt="ê¸°ë³¸ VPCë¥¼ ì§€ì›Œì„œ VPC í™˜ê²½ì´ ì—†ëŠ” ì±„ë¡œ ë§Œë“¤ì–´ì§„..."></p>
<blockquote>
<p>aws ec2 create-default-vpc ëª…ë ¹ìœ¼ë¡œ ê¸°ë³¸ VPCë¥¼ ë‹¤ì‹œ ë§Œë“¤ìˆ˜ëŠ” ìˆë‹¤â€¦</p>
</blockquote>
<p>Java SE í”Œë«í¼ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” Nginx í”„ë¡ì‹œ êµ¬ì„±ì€ HTTP(80) íŠ¸ë˜í”½ì— ëŒ€í•´ 5000 í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¼ìš°íŒ…ë˜ë„ë¡ ì„¤ì •ë˜ì–´ìˆìŠµë‹ˆë‹¤. Beanstalkì— ì˜í•´ ìƒì„±ëœ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ì„œ Nginx ì„¤ì • ì •ë³´ë¥¼ ì°¾ì•„ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ <code>00_application.conf</code> íŒŒì¼ì— í”„ë¡ì‹œ êµ¬ì„±ì´ ì •ì˜ë˜ì–´ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>/etc/nginx/conf.d/elasticbeanstalk/00_application.conf</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-172-31-40-185 ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf </span>
location / <span class="token punctuation">&#123;</span>
    proxy_pass          http://127.0.0.1:5000<span class="token punctuation">;</span>
    proxy_http_version  <span class="token number">1.1</span><span class="token punctuation">;</span>

    proxy_set_header    Connection          <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>
    proxy_set_header    Upgrade             <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
    proxy_set_header    Host                <span class="token variable">$host</span><span class="token punctuation">;</span>
    proxy_set_header    X-Real-IP           <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    proxy_set_header    X-Forwarded-For     <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ëŸ°ë° ì œê°€ ë°°í¬í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³„ë„ë¡œ ì‹¤í–‰ë˜ëŠ” í¬íŠ¸ë¥¼ ì§€ì •í•˜ì§€ ì•Šì•„ 8080 í¬íŠ¸ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ip-172-31-40-185 ~<span class="token punctuation">]</span><span class="token comment"># netstat -tnlp</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name           
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::8080                 :::*                    LISTEN      <span class="token number">3512</span>/java </code></pre>

<p>Elastic Beanstalkì€ 5000 í¬íŠ¸ì— ëŒ€í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ í™•ì¸í•˜ë¯€ë¡œ Elastic Beanstalkì€ í™˜ê²½ ìƒíƒœë¥¼ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ê³  í”¼ë“œë°±í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¡œë“œë°¸ëŸ°ì„œê°€ íŠ¸ë˜í”½ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ 5000 í¬íŠ¸ë¡œ í• ë‹¹í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. ë‹¤ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ 5000 í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° ì¤‘ <strong>server.port</strong> ë¥¼ 5000ìœ¼ë¡œ ì§€ì •í•˜ê³  ë‹¤ì‹œ íŒ¨í‚¤ì§•í•˜ì—¬ ë°°í¬í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ì‹œ íŒ¨í‚¤ì§•í•˜ì§€ ì•Šë”ë¼ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë˜ëŠ” í¬íŠ¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ë³´ë„ë¡ í•˜ì£ .</p>
<ol>
<li>ê¸°ë³¸ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-nginx.html">ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±</a> íŒŒì¼ì— ì •ì˜ëœ í¬íŠ¸ ë³€ê²½</li>
</ol>
<ul>
<li>PORT í™˜ê²½ ì†ì„±ìœ¼ë¡œ ê¸°ë³¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” í¬íŠ¸ë¥¼ ì¬ì •ì˜</li>
</ul>
<ol start="2">
<li>JVM ì˜µì…˜ì„ ì§€ì •í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í¬íŠ¸ ë³€ê²½</li>
</ol>
<p>1ë²ˆ ë°©ë²•ì€ ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ë˜ëŠ” Nginx í”„ë¡ì‹œ êµ¬ì„±ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ <code>PORT</code>ë¼ëŠ” í™˜ê²½ ì†ì„±ì— ë”°ë¼ 00_application.confì˜ ë‚´ìš©ì„ ì •ì˜í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-07.png" alt="PORT í™˜ê²½ ì†ì„± ì •ì˜"></p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>00_application.conf</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-172-31-40-185 ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf </span>
location / <span class="token punctuation">&#123;</span>
    proxy_pass          http://127.0.0.1:8080<span class="token punctuation">;</span>
    proxy_http_version  <span class="token number">1.1</span><span class="token punctuation">;</span>

    proxy_set_header    Connection          <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>
    proxy_set_header    Upgrade             <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
    proxy_set_header    Host                <span class="token variable">$host</span><span class="token punctuation">;</span>
    proxy_set_header    X-Real-IP           <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    proxy_set_header    X-Forwarded-For     <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>PORT í™˜ê²½ ì†ì„±ì— ë”°ë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡ì‹œ í¬íŠ¸ê°€ ë³€ê²½ë˜ì—ˆì–´ìš”!</p>
</blockquote>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-08.png"></p>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ê°œë°œìë¼ë©´ í™˜ê²½ ì†ì„±ì´ë¼ëŠ” ì´ë¦„ì„ ë³´ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì§€ì›í•˜ëŠ” <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config">ì™¸ë¶€í™” êµ¬ì„±(Externalized Configuration)</a>ì„ ë– ì˜¬ëì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™¸ë¶€í™” êµ¬ì„± ìˆœì„œ 5ë²ˆ í•­ëª©ì— <code>OS í™˜ê²½ ë³€ìˆ˜</code>ê°€ ìˆëŠ”ë° ì¸í…”ë¦¬ì œì´ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ í”„ë¡œí¼í‹° ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì´ ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/spring-boot-run-configuration-environment-variables.png"></p>
<p>ì´ë²ˆì—ëŠ” PORT í™˜ê²½ ì†ì„±ì´ ì•„ë‹Œ <code>SERVER_PORT</code> í™˜ê²½ ì†ì„±ì— 5000ì„ ì„¤ì •í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ 5000 í¬íŠ¸ë¡œ êµ¬ë™ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-09.png" alt="SERVER_PORT í™˜ê²½ ì†ì„±"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ip-172-31-40-185 ~<span class="token punctuation">]</span><span class="token comment"># netstat -tnlp</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name              
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::5000                 :::*                    LISTEN      <span class="token number">6244</span>/java           </code></pre>

<blockquote>
<p>SERVER_PORT í™˜ê²½ ì†ì„±ì— ì •ì˜ëœ í¬íŠ¸ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆì–´ìš”!</p>
</blockquote>
<h4 id="JVM-ì˜µì…˜-ì„¤ì •"><a href="#JVM-ì˜µì…˜-ì„¤ì •" class="headerlink" title="JVM ì˜µì…˜ ì„¤ì •"></a>JVM ì˜µì…˜ ì„¤ì •</h4><p>í™˜ê²½ ì†ì„±ì„ í†µí•´ SERVER_PORTë¥¼ ì •ì˜í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆì§€ë§Œ JVM ì˜µì…˜ìœ¼ë¡œ <code>server.port</code>ì— ëŒ€í•œ ê°’ìœ¼ë¡œ 5000ì„ ì§€ì •í•˜ëŠ” ê²ƒì„ ì‹œë„í•´ë³´ê² ìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ JVM ì˜µì…˜ì„ ì§€ì •í•˜ê¸° ìœ„í•´ì„œëŠ” -Dserver.portì™€ ê°™ì´ java ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  ë•Œ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” Procfileì— ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ ì •ì˜í•´ë†“ì•˜ìœ¼ë¯€ë¡œ ì¶”ê°€ì ì¸ JVM ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
<p>Elastic Beanstalkì—ì„œ JVM ì˜µì…˜ì„ ì§€ì •í•˜ëŠ” ë°©ë²•ì„ ê²€ìƒ‰í•´ë³´ë©´ <a href="https://www.oracle.com/java/technologies/javase/envvars.html#gbmsy">JAVA_TOOL_OPTIONS</a> í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŒì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JAVA_TOOL_OPTIONS í™˜ê²½ ë³€ìˆ˜ ì™¸ì—ë„ JVM ë§ˆë‹¤ JAVA_OPTS ë˜ëŠ” <a href="https://stackoverflow.com/questions/28327620/difference-between-java-options-java-tool-options-and-java-opts">_JAVA_OPTIONS</a>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ë§Œ JAVA_TOOL_OPTIONSì´ <code>JVMTI</code> í‘œì¤€ ìŠ¤í™ì´ë¯€ë¡œ JAVA_TOOL_OPTIONSì„ ì‚¬ìš©í•˜ì—¬ JVM ì˜µì…˜ì„ ì„¤ì •í•˜ëŠ” ê²Œ ì˜¬ë°”ë¥¸ ë°©ë²•ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Java SE í”Œë«í¼ í™˜ê²½ì˜ Correcto JDKëŠ” _JAVA_OPTIONS í™˜ê²½ ì†ì„±ë„ ì ìš©ë˜ìš”!</p>
</blockquote>
<p>ë‹¤ìŒì€ Elastic Beanstalk Java SE í”Œë«í¼ í™˜ê²½ì—ì„œ JAVA_TOOL_OPTIONSì™€ _JAVA_OPTIONS í™˜ê²½ ì†ì„±ì„ ì§€ì •í–ˆì„ ë•Œ ì ìš© ìˆœì„œì…ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Mar  <span class="token number">5</span> <span class="token number">16</span>:37:54 ip-172-31-40-185 web: Picked up JAVA_TOOL_OPTIONS: <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">5000</span>
Mar  <span class="token number">5</span> <span class="token number">16</span>:37:54 ip-172-31-40-185 web: Picked up _JAVA_OPTIONS: <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">5001</span>

<span class="token punctuation">[</span>root@ip-172-31-40-185 ~<span class="token punctuation">]</span><span class="token comment"># jps -v</span>
<span class="token number">3634</span> war <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">5000</span> <span class="token parameter variable">-Xmx1g</span> <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">5001</span>
<span class="token number">3740</span> Jps <span class="token parameter variable">-Dapplication.home</span><span class="token operator">=</span>/usr/lib/jvm/java-11-amazon-corretto.x86_64 <span class="token parameter variable">-Xms8m</span> <span class="token parameter variable">-Djdk.module.main</span><span class="token operator">=</span>jdk.jcmd</code></pre>

<p>JAVA_TOOL_OPTIONS ë³´ë‹¤ _JAVA_OPTIONS í™˜ê²½ ì†ì„±ì´ ë‚˜ì¤‘ì— ì ìš©ë˜ë©° Procfileì— ì •ì˜ëœ JVM ì˜µì…˜ê³¼ì˜ ìˆœì„œë„ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì¶”ê°€-ì˜µì…˜-êµ¬ì„±"><a href="#ì¶”ê°€-ì˜µì…˜-êµ¬ì„±" class="headerlink" title="ì¶”ê°€ ì˜µì…˜ êµ¬ì„±"></a>ì¶”ê°€ ì˜µì…˜ êµ¬ì„±</h3><p>ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ëœ í™˜ê²½ìœ¼ë¡œ ì‹œì‘í•˜ê¸°ë³´ë‹¤ëŠ” <code>ì¶”ê°€ ì˜µì…˜ êµ¬ì„±</code> ê¸°ëŠ¥ì„ í†µí•´ ì‚¬ìš©ì ì •ì˜ëœ Java SE í”Œë«í¼ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì‚¬ì „ ì„¤ì •ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ê·œëª¨ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë‚˜ ì§ì ‘ í™˜ê²½ ì˜µì…˜ì„ ì •ì˜í•˜ê¸° ìœ„í•´ <strong>ì‚¬ìš©ì ì§€ì • êµ¬ì„±</strong> ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-10.png"></p>
<p>ì‚¬ìš©ì ì§€ì • êµ¬ì„± ì„ íƒì‹œ ì œê³µë˜ëŠ” ê¸°ë³¸ ì˜µì…˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ëª‡ê°€ì§€ ì˜µì…˜ì— ëŒ€í•´ì„œ ìˆ˜ì •ì„ í•´ë³´ë„ë¡ í•˜ì£ .</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-11.png"></p>
<h4 id="ì†Œí”„íŠ¸ì›¨ì–´"><a href="#ì†Œí”„íŠ¸ì›¨ì–´" class="headerlink" title="ì†Œí”„íŠ¸ì›¨ì–´"></a>ì†Œí”„íŠ¸ì›¨ì–´</h4><p>ê°€ì¥ ë¨¼ì €, ì†Œí”„íŠ¸ì›¨ì–´ ì˜µì…˜ì„ í¸ì§‘í•˜ì—¬ ê¸°ë³¸ìœ¼ë¡œ ì§€ì •ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡ì‹œ í¬íŠ¸ì— ë§ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ SERVER_PORT í™˜ê²½ë³€ìˆ˜ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-12.png"></p>
<h4 id="ìš©ëŸ‰"><a href="#ìš©ëŸ‰" class="headerlink" title="ìš©ëŸ‰"></a>ìš©ëŸ‰</h4><p>ìš©ëŸ‰ ì˜µì…˜ì„ í¸ì§‘í•˜ì—¬ Elastic Beanstalkì´ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í• ì§€ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ í™˜ê²½ì€ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì˜¤í†  ìŠ¤ì¼€ì¼ë§ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê¸° ìœ„í•˜ì—¬ ë¡œë“œ ë°¸ëŸ°ì‹± ìˆ˜í–‰ í™˜ê²½ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. ë¡œë“œ ë°¸ëŸ°ì‹± ìˆ˜í–‰ í™˜ê²½ì´ì§€ë§Œ ì²˜ìŒì—ëŠ” <strong>ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤</strong> ë¡œ ì‹œì‘í•˜ê¸° ìœ„í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ìµœëŒ€ í¬ê¸°ë¥¼ 1ë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p>
<p>ë§Œì•½, ì—¬ëŸ¬ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìš”êµ¬í•˜ëŠ” ë©”ëª¨ë¦¬ í¬ê¸°ì™€ CPU ì„±ëŠ¥ì´ ìˆë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ë³€ê²½í•©ë‹ˆë‹¤. ì €ëŠ” ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë¯€ë¡œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœ t2.microë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>t2.microëŠ” 1GBì˜ ë©”ëª¨ë¦¬ í¬ê¸°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.</p>
</blockquote>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-13.png"></p>
<h4 id="ë¡œë“œë°¸ëŸ°ì„œ"><a href="#ë¡œë“œë°¸ëŸ°ì„œ" class="headerlink" title="ë¡œë“œë°¸ëŸ°ì„œ"></a>ë¡œë“œë°¸ëŸ°ì„œ</h4><p>ìš©ëŸ‰ ì˜µì…˜ì—ì„œ ë¡œë“œ ë°¸ëŸ°ì‹± í™˜ê²½ì„ ì„ íƒí•˜ë©´ ë¡œë“œë°¸ëŸ°ì„œ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆê²Œ í™œì„±í™”ë©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-14.png"></p>
<p>ê¸°ë³¸ìœ¼ë¡œ ì§€ì •ëœ ë¡œë“œë°¸ëŸ°ì„œëŠ” L7 ë ˆë²¨ì˜ ALB(Application Load Balancer)ìœ¼ë¡œ ë³€ê²½í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ íšŒì‚¬ì—ì„œëŠ” ë¹ ë¥¸ íŠ¸ë˜í”½ ì²˜ë¦¬ë¥¼ ìœ„í•´ L4 ë ˆë²¨ì˜ NLB(Network Load Balancer)ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ NLBë¡œ ì§€ì •í•˜ê² ìŠµë‹ˆë‹¤. </p>
<p>ê° ë¡œë“œë°¸ëŸ°ì„œê°€ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ê¶ê¸ˆí•˜ë‹¤ë©´ <a href="https://aws.amazon.com/ko/elasticloadbalancing/features/">Elastic Load Balancing ê¸°ëŠ¥</a>ì„ ì°¸ê³ í•˜ì„¸ìš”. ë¡œë“œë°¸ëŸ°ì„œê°€ íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•˜ëŠ” ë¦¬ìŠ¤ë„ˆì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ ì—¬ê¸°ì„œëŠ” ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="ë³´ì•ˆ"><a href="#ë³´ì•ˆ" class="headerlink" title="ë³´ì•ˆ"></a>ë³´ì•ˆ</h4><p>ë³´ì•ˆ ì˜µì…˜ì„ í¸ì§‘í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‚¤ í˜ì–´ë¥¼ ì§€ì •í•˜ë©´ EC2 ì½˜ì†”ì„ í†µí•´ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-15.png"></p>
<h4 id="ë„¤íŠ¸ì›Œí¬"><a href="#ë„¤íŠ¸ì›Œí¬" class="headerlink" title="ë„¤íŠ¸ì›Œí¬"></a>ë„¤íŠ¸ì›Œí¬</h4><p>ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì„ í¸ì§‘í•˜ì—¬ VPCë¥¼ ì„ íƒí•˜ê³  ë¡œë“œë°¸ëŸ°ì„œì™€ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš©í•  ì„œë¸Œë„· ëŒ€ì—­ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-16.png"></p>
<p>ì´ì œ ì˜µì…˜ êµ¬ì„±ì´ ëë‚¬ìœ¼ë¯€ë¡œ í™˜ê²½ ìƒì„± ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ Elastic Beanstalkì´ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. Elastic Beanstalkê°€ ìƒì„±í•œ í™˜ê²½ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ íŠ¸ë˜í”½ì´ ì²˜ë¦¬ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<p>Elastic Beanstalkì´ í™˜ê²½ì„ ìƒì„±í•˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë ¸ìœ¼ë‚˜ ì œê°€ ì‹¤ìˆ˜ë¡œ ì¸ìŠ¤í„´ìŠ¤ ì„œë¸Œë„·ì„ ì˜ëª» ì§€ì •í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì§€ ëª»í•˜ì˜€ìœ¼ë‚˜ Elastic BeanstalkëŠ” í™˜ê²½ ìƒì„±ì„ ìœ„í•´ ìƒíƒœë¥¼ ê³„ì† í™•ì¸í•˜ê³  ê¸°ë‹¤ë¦¬ëŠ” ë¬´í•œ ë£¨í”„ ì¦ìƒì— ë¹ ì ¸ë²„ë ¸ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-17.png"></p>
<p>ì¸ìŠ¤í„´ìŠ¤ ì„œë¸Œë„·ì„ ì˜¬ë°”ë¥´ê²Œ ì§€ì •í•˜ê¸° ìœ„í•´ì„œ í™˜ê²½ êµ¬ì„± í˜ì´ì§€ë¡œ ê°€ë³´ì•˜ì§€ë§Œ Elastic BeanstalkëŠ” í™˜ê²½ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆì–´ ì–´ë– í•œ ì‘ì—…ë„ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì´ì²˜ëŸ¼ í™˜ê²½ì— ëŒ€í•œ ì‘ì—…ì´ ìˆ˜í–‰ë˜ê³  ìˆì„ë•ŒëŠ” ì–´ë– í•œ ìš”ì²­ë„ ìˆ˜í–‰í•  ìˆ˜ ì—†ëŠ” ë‹¨ì ì´â€¦</p>
</blockquote>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-18.png" alt="ë¹„í™œì„±í™”ëœ í™˜ê²½ ì‘ì—…"></p>
<h4 id="ì œëŒ€ë¡œ-ìƒì„±ë˜ì§€-ì•ŠëŠ”-Beanstalk-í™˜ê²½-ì‚­ì œí•˜ê¸°"><a href="#ì œëŒ€ë¡œ-ìƒì„±ë˜ì§€-ì•ŠëŠ”-Beanstalk-í™˜ê²½-ì‚­ì œí•˜ê¸°" class="headerlink" title="ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•ŠëŠ” Beanstalk í™˜ê²½ ì‚­ì œí•˜ê¸°"></a>ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•ŠëŠ” Beanstalk í™˜ê²½ ì‚­ì œí•˜ê¸°</h4><p>Elastic Beanstalk ì„œë¹„ìŠ¤ì—ì„œëŠ” ìœ„ í™˜ê²½ ìƒì„± ì‘ì—…ì„ ì¤‘ì§€í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, AWS ì„œë¹„ìŠ¤ ì¤‘ CloudFormationì„ ê²€ìƒ‰í•˜ì—¬ ë“¤ì–´ê°€ë³´ë©´ Elastic Beanstalk í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ìŠ¤íƒì„ ì°¾ì„ ìˆ˜ ìˆê³  <code>CREATE_IN_PROGRESS</code> ìƒíƒœì— ë¨¸ë¬¼ëŸ¬ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìŠ¤íƒì„ ì„ íƒí•˜ì—¬ ì‚­ì œí•˜ë©´ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Java SE í”Œë«í¼ í™˜ê²½ì„ CloudFormationë¡œ ì •ì˜í•´ì„œ êµ¬ì„±í•˜ëŠ”êµ°ìš”?</p>
</blockquote>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-19.png"></p>
<p>Beanstalk í™˜ê²½ì„ ìƒì„±í•˜ëŠ” ìŠ¤íƒì´ ì‚­ì œë˜ì–´ Beanstalk ì„œë¹„ìŠ¤ë¡œ ë‹¤ì‹œ ê°€ë³´ë©´ ìƒì„±í•  ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë˜ í™˜ê²½ì´ ì‚­ì œë˜ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤í–‰ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-20.png"></p>
<blockquote>
<p>ë‹¨, ì‚­ì œëœ í™˜ê²½ ì´ë¦„ì„ ë‹¤ì‹œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš° 1ì‹œê°„ë™ì•ˆ ê¸°ë‹¤ë ¤ì•¼í•´ìš”â€¦</p>
</blockquote>
<p>í™˜ê²½ì„ ì •ìƒì ìœ¼ë¡œ êµ¬ì„±í•œ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ë°°í¬ê°€ ì™„ë£Œë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-21.png"></p>
<blockquote>
<p>íœ´â€¦</p>
</blockquote>
<h2 id="í”Œë«í¼-í™•ì¥-êµ¬ì„±"><a href="#í”Œë«í¼-í™•ì¥-êµ¬ì„±" class="headerlink" title="í”Œë«í¼ í™•ì¥ êµ¬ì„±"></a>í”Œë«í¼ í™•ì¥ êµ¬ì„±</h2><p>Elastic Beanstalkì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ëœ êµ¬ì„± ë° í”Œë«í¼ íŒŒì¼ì„ í†µí•´ í™˜ê²½ì— ëŒ€í•œ êµ¬ì„±ì„ í™•ì¥í•˜ëŠ” ê²ƒì„ ì§€ì›í•©ë‹ˆë‹¤. êµ¬ì„± íŒŒì¼ì€ <strong>.ebextensions</strong> í´ë”, í”Œë«í¼ íŒŒì¼ì€ <strong>.platform</strong> í´ë”ì— ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ì €ëŠ” ì¸í”„ë¼ì— ëŒ€í•œ íŠœë‹ ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ì˜ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì¸í„°ë„·ì— ê³µìœ ëœ ë‚´ìš©ì„ ì†Œê°œí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h3 id="EC2-ì¸ìŠ¤í„´ìŠ¤-íƒ€ì„ì¡´-ë³€ê²½í•˜ê¸°"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-íƒ€ì„ì¡´-ë³€ê²½í•˜ê¸°" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì„ì¡´ ë³€ê²½í•˜ê¸°"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì„ì¡´ ë³€ê²½í•˜ê¸°</h3><p>AWSì˜ <a href="https://github.com/awsdocs/elastic-beanstalk-samples/tree/main/configuration-files">elastic-beanstalk-samples&#x2F;configuration-files</a>ì—ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì„ì¡´ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” êµ¬ì„± íŒŒì¼ ì˜ˆì œ(timezone-linux.config)ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-config" data-language="config"><div class="caption"><span>.ebextensions/00-timezone-linux.config</span></div><code class="language-config">option_settings:
  - namespace: aws:elasticbeanstalk:application:environment
    option_name: TZ
    value: &quot;Asia&#x2F;Seoul&quot;

files:
  &quot;&#x2F;tmp&#x2F;set_timezone.sh&quot;:
    mode: &quot;000755&quot;
    owner: root
    group: root
    content: |
      #!&#x2F;bin&#x2F;bash
      NEWTIMEZONE&#x3D;&quot;$(&#x2F;opt&#x2F;elasticbeanstalk&#x2F;bin&#x2F;get-config environment -k TZ)&quot;
      if [ -z $NEWTIMEZONE ] ; then
          echo &quot;TZ&quot; environment property not set
          exit 1
      fi
      if [ ! -f &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;$NEWTIMEZONE ] ; then
          echo &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;$NEWTIMEZONE does not exist
          exit 1
      fi
      echo &#39;ZONE&#x3D;&quot;&#39;$NEWTIMEZONE&#39;&quot;&#39; &gt; &#x2F;etc&#x2F;sysconfig&#x2F;clock
      echo &#39;UTC&#x3D;true&#39; &gt;&gt; &#x2F;etc&#x2F;sysconfig&#x2F;clock
      ln -f -s &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;$NEWTIMEZONE &#x2F;etc&#x2F;localtime

commands:
  00-custom-timezone:
    command: &#x2F;tmp&#x2F;set_timezone.sh</code></pre>

<p>ê¸°ì¡´ ì˜ˆì œì™€ ë‹¤ë¥´ê²Œ ntpdateë¡œ NTP ì„œë²„ ë™ê¸°í™” ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šê³  <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/set-time.html">Linux ì¸ìŠ¤í„´ìŠ¤ì˜ ì‹œê°„ ì„¤ì •</a>ì— ë”°ë¼ Amazon Time Sync Serviceì™€ ë™ê¸°í™”ë˜ëŠ” ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/beanstalk-java-se-platform/beanstalk-environment-22.png" alt="TZ í™˜ê²½ì†ì„±"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ip-10-1-0-52 ~<span class="token punctuation">]</span><span class="token comment"># date</span>
Sun Mar  <span class="token number">7</span> <span class="token number">13</span>:58:57 KST <span class="token number">2021</span></code></pre>

<blockquote>
<p>ëª…ë ¹ì–´ê°€ ìˆ˜í–‰ë˜ì–´ í•œêµ­ ì‹œê°„ìœ¼ë¡œ í‘œì‹œëœë‹¤.</p>
</blockquote>
<h3 id="Node-Exporter-ì—ì´ì „íŠ¸-ì„¤ì¹˜"><a href="#Node-Exporter-ì—ì´ì „íŠ¸-ì„¤ì¹˜" class="headerlink" title="Node Exporter ì—ì´ì „íŠ¸ ì„¤ì¹˜"></a>Node Exporter ì—ì´ì „íŠ¸ ì„¤ì¹˜</h3><p>OKKYì—ì„œ ìš´ì˜íšŒì›ìœ¼ë¡œ í™œë™ì¤‘ì´ì‹  ì°½ì²œí–¥ë¡œë‹˜ì˜ <a href="https://github.com/jojoldu/aws-beanstalk-tunning">AWS Beanstalk ì„±ëŠ¥ íŠœë‹ ì‹œë¦¬ì¦ˆ</a>ì—ì„œì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ APM ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ë§¤íŠ¸ë¦­ì„ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ Beanstalkë¡œ ìƒì„±ë˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— Node Exporterë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ë„ë¡ í™•ì¥ êµ¬ì„±ì„ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì € Nginx í”„ë¡ì‹œ êµ¬ì„±ì— Node Exporterì— ëŒ€í•œ í”„ë¡ì‹œ êµ¬ì„± íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<pre class="language-conf" data-language="conf"><div class="caption"><span>.platform/nginx/conf.d/elasticbeanstalk/01_node_exporter.conf</span></div><code class="language-conf">location &#x2F;metrics &#123;
    proxy_pass          http:&#x2F;&#x2F;127.0.0.1:9100&#x2F;metrics;
    proxy_http_version  1.1;

    proxy_set_header    Connection          $connection_upgrade;
    proxy_set_header    Upgrade             $http_upgrade;
    proxy_set_header    Host                $host;
    proxy_set_header    X-Real-IP           $remote_addr;
    proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
&#125;</code></pre>

<p>ì—­ë°©í–¥ í”„ë¡ì‹œ êµ¬ì„±ì„ í†µí•´ <code>/metrics</code>ì— ëŒ€í•œ íŠ¸ë˜í”½ì„ Node Exporterë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¼ ì´ì œ Node Exporterë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ëŠ” êµ¬ì„± íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.</p>
<pre class="language-config" data-language="config"><div class="caption"><span>.ebextensions/99-install-node-exporter.config</span></div><code class="language-config">commands:
  command block:
    cwd: &#x2F;home&#x2F;webapp
    command: |
      curl -L https:&#x2F;&#x2F;github.com&#x2F;prometheus&#x2F;node_exporter&#x2F;releases&#x2F;download&#x2F;v1.1.2&#x2F;node_exporter-1.1.2.linux-amd64.tar.gz | tar zxv
      cd node_exporter-1.1.2.linux-amd64
      nohup .&#x2F;node_exporter &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1 &amp;</code></pre>

<p>ì—¬ëŸ¬ê°€ì§€ ëª…ë ¹ì–´ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹  ìˆ˜ ìˆëŠ” <code>command block</code>ì„ ì‚¬ìš©í–ˆìœ¼ë©° Node Exporterë¥¼ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì œ ì´ íŒŒì¼ë“¤ì„ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨í•˜ì—¬ í™˜ê²½ì— ë°°í¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h3 id="Beanstalk-ë°°í¬-í”„ë¡œì„¸ìŠ¤-í™•ì¸"><a href="#Beanstalk-ë°°í¬-í”„ë¡œì„¸ìŠ¤-í™•ì¸" class="headerlink" title="Beanstalk ë°°í¬ í”„ë¡œì„¸ìŠ¤ í™•ì¸"></a>Beanstalk ë°°í¬ í”„ë¡œì„¸ìŠ¤ í™•ì¸</h3><p>Elastic Beanstalkë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸°ê¹Œì§€ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•Œ ì–´ë–¤ ë¶€ë¶„ì„ ì²´í¬í•´ì•¼í•˜ëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ì£ . </p>
<h4 id="ë¡œê·¸"><a href="#ë¡œê·¸" class="headerlink" title="ë¡œê·¸"></a>ë¡œê·¸</h4><p>ê°€ì¥ ë¨¼ì € í™•ì¸í•´ì•¼ë  ë¶€ë¶„ì€ ë¡œê·¸ì…ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>/var/log</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-10-1-0-52 log<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
total 736K
drwx------ <span class="token number">3</span> root    root      <span class="token number">17</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 amazon
-rw------- <span class="token number">1</span> root    root    <span class="token number">8</span>.3K Mar  <span class="token number">7</span> <span class="token number">11</span>:58 boot.log
-rw------- <span class="token number">1</span> root    utmp     15K Mar  <span class="token number">7</span> <span class="token number">13</span>:36 btmp
-rw-r--r-- <span class="token number">1</span> root    root    <span class="token number">6</span>.9K Mar  <span class="token number">7</span> <span class="token number">14</span>:45 cfn-hup.log
-rw-r--r-- <span class="token number">1</span> root    root     23K Mar  <span class="token number">7</span> <span class="token number">14</span>:04 cfn-init-cmd.log
-rw-r--r-- <span class="token number">1</span> root    root     14K Mar  <span class="token number">7</span> <span class="token number">14</span>:04 cfn-init.log
-rw-r--r-- <span class="token number">1</span> root    root     39K Mar  <span class="token number">7</span> <span class="token number">14</span>:04 cfn-wire.log
drwxr-xr-x <span class="token number">2</span> chrony  chrony     <span class="token number">6</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 chrony
-rw-r--r-- <span class="token number">1</span> root    root     93K Mar  <span class="token number">7</span> <span class="token number">11</span>:58 cloud-init.log
-rw-r--r-- <span class="token number">1</span> root    root    <span class="token number">2</span>.5K Mar  <span class="token number">7</span> <span class="token number">11</span>:58 cloud-init-output.log
-rw------- <span class="token number">1</span> root    root    <span class="token number">9</span>.4K Mar  <span class="token number">7</span> <span class="token number">14</span>:40 <span class="token function">cron</span>
-rw-r--r-- <span class="token number">1</span> root    root     27K Mar  <span class="token number">7</span> <span class="token number">11</span>:58 <span class="token function">dmesg</span>
-rw-r--r-- <span class="token number">1</span> root    root       <span class="token number">0</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 eb-cfn-init-call.log
-rw-r--r-- <span class="token number">1</span> root    root     41K Mar  <span class="token number">7</span> <span class="token number">11</span>:58 eb-cfn-init.log
-rw-r--r-- <span class="token number">1</span> root    root    137K Mar  <span class="token number">7</span> <span class="token number">14</span>:04 eb-engine.log
-rw-r--r-- <span class="token number">1</span> root    root    <span class="token number">1</span>.3K Mar  <span class="token number">7</span> <span class="token number">14</span>:30 eb-publish.log
-rw-r--r-- <span class="token number">1</span> root    root     <span class="token number">455</span> Mar  <span class="token number">7</span> <span class="token number">12</span>:30 eb-tools.log
drwxr-xr-x <span class="token number">3</span> healthd healthd   <span class="token number">39</span> Mar  <span class="token number">7</span> <span class="token number">12</span>:00 healthd
-rw------- <span class="token number">1</span> root    root     <span class="token number">204</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 maillog
-rw------- <span class="token number">1</span> root    root    205K Mar  <span class="token number">7</span> <span class="token number">14</span>:47 messages
drwxr-xr-x <span class="token number">4</span> nginx   nginx     <span class="token number">71</span> Mar  <span class="token number">7</span> <span class="token number">12</span>:45 nginx
drwxr-xr-x <span class="token number">2</span> root    root       <span class="token number">6</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 rotated
drwxr-xr-x <span class="token number">2</span> root    root      <span class="token number">18</span> Mar  <span class="token number">7</span> <span class="token number">11</span>:58 sa
-rw------- <span class="token number">1</span> root    root     41K Mar  <span class="token number">7</span> <span class="token number">14</span>:32 secure
-rw------- <span class="token number">1</span> root    root     21K Mar  <span class="token number">7</span> <span class="token number">14</span>:33 web.stdout.log
-rw-rw-r-- <span class="token number">1</span> root    utmp    <span class="token number">7</span>.9K Mar  <span class="token number">7</span> <span class="token number">14</span>:32 wtmp
drwxr-xr-x <span class="token number">2</span> xray    xray       <span class="token number">6</span> Feb <span class="token number">25</span> <span class="token number">22</span>:54 xray</code></pre>

<p>ë¡œê·¸ íŒŒì¼ë“¤ì€ <strong>&#x2F;var&#x2F;log</strong> í´ë”ì— ìœ„ì¹˜í•˜ê²Œ ë˜ëŠ”ë° ì£¼ë¡œ í™•ì¸í•˜ëŠ” ë¡œê·¸ëŠ” <strong>eb-engine.log</strong> ì™€ <strong>web.stdout.log</strong> ì…ë‹ˆë‹¤. </p>
<ul>
<li>eb-engine.log: Beanstalk í”„ë¡œì„¸ìŠ¤ ë¡œê·¸</li>
<li>web.stdout.log: í˜„ì¬ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œê·¸</li>
<li>cfn-init-cmd.log: .eb-extensions êµ¬ì„± íŒŒì¼ì— ì •ì˜í•œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œ ë¡œê·¸</li>
</ul>
<h4 id="ì†ŒìŠ¤-ë²ˆë“¤-íŒŒì¼"><a href="#ì†ŒìŠ¤-ë²ˆë“¤-íŒŒì¼" class="headerlink" title="ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼"></a>ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼</h4><p>ì—…ë¡œë“œëœ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ëœ íŒŒì¼ë“¤ì€ Elastic Beanstalkì— ì˜í•´ì„œ ë‹¤ì–‘í•œ ìœ„ì¹˜ë¡œ ë³µì‚¬ë©ë‹ˆë‹¤. </p>
<p>ë¨¼ì €, í˜„ì¬ ë°°í¬ë˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì†ŒìŠ¤ ë²ˆë“¤ íŒŒì¼ê³¼ í™˜ê²½ ì†ì„±ì´ ì •ì˜ëœ íŒŒì¼ì€ &#x2F;opt&#x2F;elasticbeanstalk&#x2F;deploymentì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>/opt/elasticbeanstalk/deployment</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-10-1-0-52 deployment<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
total 18M
-rw-r--r-- <span class="token number">1</span> root root  18M Mar  <span class="token number">7</span> <span class="token number">14</span>:04 app_source_bundle
-rw-r--r-- <span class="token number">1</span> root root   <span class="token number">92</span> Mar  <span class="token number">7</span> <span class="token number">14</span>:04 app_version_manifest.json
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">4</span>.0K Mar  <span class="token number">7</span> <span class="token number">14</span>:04 cfn-metadata-cache.json
-r-------- <span class="token number">1</span> root root  <span class="token number">211</span> Mar  <span class="token number">7</span> <span class="token number">14</span>:04 <span class="token function">env</span></code></pre>

<p>ê·¸ë¦¬ê³  ì†ŒìŠ¤ ë²ˆë“¤(app_source_bundle)ì— í¬í•¨ëœ WAR íŒŒì¼ê³¼ Procfileì€ &#x2F;var&#x2F;app&#x2F;currentì— ë³µì‚¬ë˜ì–´ ì‹¤í–‰í•©ë‹ˆë‹¤. í˜„ì¬ ë°°í¬ë˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œëŒ€ë¡œëœ ë²„ì „ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ íŒŒì•…í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>/var/app/current</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-10-1-0-52 current<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
total 20M
-rw-r--r-- <span class="token number">1</span> webapp webapp 20M Mar  <span class="token number">7</span> <span class="token number">14</span>:02 demo-1.0.0.war
-rw-r--r-- <span class="token number">1</span> webapp webapp  <span class="token number">36</span> Mar  <span class="token number">7</span> <span class="token number">14</span>:02 Procfile</code></pre>

<p>í”Œë«í¼(.platform)ì— ì¶”ê°€ëœ í”„ë¡ì‹œ êµ¬ì„±íŒŒì¼ì€ í•´ë‹¹ í”„ë¡ì‹œ í•˜ìœ„ë¡œ ë³µì‚¬ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•ì„œ ì‘ì„±í•´ë³¸ 01_node_exporter.conf í”„ë¡ì‹œ êµ¬ì„± íŒŒì¼ì€ &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;elasticbeanstalkì— ë³µì‚¬ë©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>/etc/nginx/conf.d/elasticbeanstalk</span></div><code class="language-bash"><span class="token punctuation">[</span>root@ip-10-1-0-52 elasticbeanstalk<span class="token punctuation">]</span><span class="token comment"># ll -h</span>
total 12K
-rw-r--r-- <span class="token number">1</span> root   root   <span class="token number">397</span> Mar  <span class="token number">7</span> <span class="token number">14</span>:04 00_application.conf
-rw-r--r-- <span class="token number">1</span> webapp webapp <span class="token number">420</span> Mar  <span class="token number">7</span> 00:05 01_node_exporter.conf
-rw-r--r-- <span class="token number">1</span> root   root   <span class="token number">215</span> Mar  <span class="token number">7</span> <span class="token number">14</span>:04 healthd.conf</code></pre>

<p>&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;elasticbeanstalk í´ë”ì—ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” í”„ë¡ì‹œ êµ¬ì„± íŒŒì¼ê³¼ í•¨ê»˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨ëœ í”„ë¡ì‹œ êµ¬ì„± íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>ì‹¤ì œë¡œ ì‹¤ë¬´ì—ì„œ Elastic Beanstalkë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²ƒì€ ë‹¤ì–‘í•œ ë¶€ë¶„ì—ì„œ ê²€í† ë¥¼ ì§„í–‰í•´ì•¼í•©ë‹ˆë‹¤. ê°œë°œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìš”êµ¬í•˜ëŠ” ìµœì†Œ í™˜ê²½ ì‚¬ì–‘ì— ë”°ë¼ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì„¤ì •í•´ì•¼í•˜ë©° ì„œë¹„ìŠ¤ êµ¬ì¡°ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ALBë¥¼ ì ìš©í•  ì§€ ë¹ ë¥¸ íŠ¸ë˜í”½ ì²˜ë¦¬ë¥¼ ìœ„í•´ NLBë¡œ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ ë‹¨ìˆœí™” í•´ì•¼í• ì§€ë¥¼ ì •í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>Elastic Beanstalkë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²ƒì´ ì‰½ë‹¤ëŠ” ì¥ì ì€ ìˆì§€ë§Œ <strong>ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•Œ í•´ê²°í•˜ëŠ” ê²ƒì´ ì‰½ì§€ ì•Šë‹¤ëŠ” ë‹¨ì </strong> ì´ ë¶„ëª…íˆ ì¡´ì¬í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ ìµœê·¼ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë§ì€ ë³€ê²½ì‚¬í•­ë“¤ë¡œ ì¸í•˜ì—¬ ë°°í¬ ì „í™˜ì´ ìš©ì´í•˜ì§€ ì•Šì•„ ë³„ë„ë¡œ í™˜ê²½ì„ êµ¬ì„±í•˜ê³  íŠ¸ë˜í”½ì„ ì „í™˜í•˜ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ì‹¤ë¬´ì—ì„œ ì˜ˆê¸°ì¹˜ ëª»í•˜ê²Œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ë¡œ ì¸í•˜ì—¬ ì‰½ê²Œ ë°°í¬ë˜ê² ì§€ë¼ëŠ” ìƒê°ê³¼ ë‹¬ë¦¬ ë°°í¬ê°€ ì‰½ì§€ ì•Šì•„ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ìƒìœ¼ë¡œ AWS Elastic Beanstalk Java SE í”Œë«í¼ í™˜ê²½ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°ë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>AWS</tag>
        <tag>Beanstalk</tag>
        <tag>Deployment</tag>
      </tags>
  </entry>
  <entry>
    <title>X509 Certificate Signed by Unknown Authority</title>
    <url>/docker-registry-certificate/</url>
    <content><![CDATA[<blockquote>
<p>Error response from daemon: Get https://registry.domain.com&#x2F;v2&#x2F;: x509: certificate signed by unknown authority</p>
</blockquote>
<p>ìƒê°ë³´ë‹¤ ë§ì€ ì¡°ì§ì—ì„œ ì‚¬ë‚´ ì •ì±…ì´ë‚˜ ë„ì»¤ í—ˆë¸Œì˜ <a href="https://docs.docker.com/docker-hub/download-rate-limit/">ë‹¤ìš´ë¡œë“œ ì œí•œëŸ‰</a>ì„ ê²½í—˜í•˜ê³  ë„ì»¤ì—ì„œ ì œê³µí•˜ëŠ” <a href="https://hub.docker.com/_/registry">ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì´ë¯¸ì§€</a>ë¡œ ì‚¬ì„¤ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìœ„ ì˜¤ë¥˜ëŠ” ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ë¡œê·¸ì¸ì„ ì‹œë„í•  ë•Œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë„ì»¤ ì—”ì§„ì´ë¼ê³ í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ê°€ ì „ë‹¬í•´ì¤€ ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ìœ„ì™€ ê°™ì´ ë‚´ ì»´í“¨í„°ì— ì„¤ì¹˜ëœ ë„ì»¤ ì—”ì§„ì—ì„œ ì‚¬ì„¤ë¡œ êµ¬ì¶•í•œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ì£ .</p>
<h2 id="ë„ì»¤-ë ˆì§€ìŠ¤íŠ¸ë¦¬-ì¸ì¦ì„œ"><a href="#ë„ì»¤-ë ˆì§€ìŠ¤íŠ¸ë¦¬-ì¸ì¦ì„œ" class="headerlink" title="ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ì¦ì„œ"></a>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ì¦ì„œ</h2><p>ë„ì»¤ ì—”ì§„ì—ì„œ ì°¸ì¡°í•˜ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œ í´ë”ëŠ” <strong>certs.d</strong> ì…ë‹ˆë‹¤.</p>
<ul>
<li>Windows: C:&#x2F;ProgramData&#x2F;Docker&#x2F;certs.d&#x2F;</li>
<li>Linux: &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;</li>
<li>Mac: ~&#x2F;.docker&#x2F;certs.d&#x2F;</li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash">/etc/docker/certs.d/         <span class="token operator">&lt;</span>-- Certificate directory
â””â”€â”€ registry.domain.com:5000 <span class="token operator">&lt;</span>-- Hostname:port
   â”œâ”€â”€ client.cert           <span class="token operator">&lt;</span>-- Client certificate
   â”œâ”€â”€ client.key            <span class="token operator">&lt;</span>-- Client key
   â””â”€â”€ ca.crt                <span class="token operator">&lt;</span>-- Certificate authority that signed the registry certificate</code></pre>

<h3 id="ì•ˆì „í•˜ì§€-ì•Šì€-ë ˆì§€ìŠ¤íŠ¸ë¦¬"><a href="#ì•ˆì „í•˜ì§€-ì•Šì€-ë ˆì§€ìŠ¤íŠ¸ë¦¬" class="headerlink" title="ì•ˆì „í•˜ì§€ ì•Šì€ ë ˆì§€ìŠ¤íŠ¸ë¦¬"></a>ì•ˆì „í•˜ì§€ ì•Šì€ ë ˆì§€ìŠ¤íŠ¸ë¦¬</h3><p>HTTPSë¡œ ì‹¤í–‰ëœ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•´ì„œ ë„ì»¤ ì—”ì§„ì´ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ì¸ì¦ì„œë¥¼ ë¬´ì‹œí•˜ë„ë¡ <a href="https://docs.docker.com/registry/insecure/">insecure-registries</a>ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì´ ë°©ë²•ì€ í•´ë‹¹ ë„ë©”ì¸ ì£¼ì†Œì˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ê°€ ì˜¬ë°”ë¥¸ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ê²€ì¦í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³´ì•ˆì ì¸ ë¶€ë¶„ì„ ìƒê°í•œë‹¤ë©´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>
<h3 id="ì‹ ë¢°í• -ìˆ˜-ìˆëŠ”-ì¸ì¦-ê¸°ê´€"><a href="#ì‹ ë¢°í• -ìˆ˜-ìˆëŠ”-ì¸ì¦-ê¸°ê´€" class="headerlink" title="ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€"></a>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€</h3><p>ë„ì»¤ ì—”ì§„ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹œìŠ¤í…œì— ë“±ë¡ëœ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ì˜ ì¸ì¦ì„œ ëª©ë¡ìœ¼ë¡œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ ê²€ì¦í•©ë‹ˆë‹¤. ì´ëŠ” í¬ë¡¬ê³¼ ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œ HTTPS í†µì‹  ì‹œ ì„œë²„ì—ì„œ ì „ë‹¬í•˜ëŠ” ì¸ì¦ì„œê°€ ìœ íš¨í•œì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒê³¼ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ì €ëŠ” <strong>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ìœ¼ë¡œë¶€í„° ë°œê¸‰ë°›ì€ ë„ë©”ì¸ ì¸ì¦ì„œë¥¼ ì‚¬ìš©</strong>í•˜ì—¬ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì˜€ëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ë„ì»¤ ì—”ì§„ì—ì„œëŠ” íšŒì‚¬ ë„ë©”ì¸ ì£¼ì†Œë¡œëœ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì—ì„œ ì „ë‹¬ëœ ì¸ì¦ì„œê°€ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ë©° ë™ì¼í•˜ê²Œ <code>x509: certificate signed by unknown authority</code> ì˜¤ë¥˜ë¥¼ ì•Œë ¤ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<h3 id="CA-ì¸ì¦ì„œ-ì²´ì¸"><a href="#CA-ì¸ì¦ì„œ-ì²´ì¸" class="headerlink" title="CA ì¸ì¦ì„œ ì²´ì¸"></a>CA ì¸ì¦ì„œ ì²´ì¸</h3><p>ë„ì»¤ ì—”ì§„ì—ì„œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì€ ëª‡ê°€ì§€ ì‚¬í•­ì— ëŒ€í•œ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ë¡œ, ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ êµ¬ì¶• ì‹œ ì‚¬ìš©í•œ CA ì¸ì¦ì„œê°€ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œì™€ ì¸ì¦ ê¸°ê´€ë“¤ì— ëŒ€í•œ ì¸ì¦ì„œê°€ ì—°ê²°ëœ CA ì¸ì¦ì„œ ì²´ì¸ì´ ì•„ë‹ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì§€ê¸ˆì€ UI ê¸°ë°˜ì˜ ì‚¬ìš©ì ë° ì´ë¯¸ì§€ ê´€ë¦¬ë¥¼ ìœ„í•´ <a href="https://goharbor.io/">Harbor</a>ë¡œ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ë¥¼ ì¬êµ¬ì¶•í•˜ì˜€ìœ¼ë‚˜ ê¸°ì¡´ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ì‚¬ìš©ëœ CA ì¸ì¦ì„œ íŒŒì¼ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë§Œ ì¡´ì¬í–ˆë˜ ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì¡°ì§ ë‚´ ê°œë°œìë“¤ì—ê²Œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì—ì„œ ì‚¬ìš©ëœ CA ì¸ì¦ì„œ íŒŒì¼ê³¼ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ë° í‚¤ë¥¼ ì „ë‹¬í•˜ê³  ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ì¦ì„œ í´ë”ì— ì €ì¥í•˜ì—¬ ì‚¬ìš©í•´ë‹¬ë¼ê³  ì•ˆë‚´í–ˆì—ˆìŠµë‹ˆë‹¤. ê²°êµ­ì€ ë„ì»¤ ì—”ì§„ì´ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ CA ì¸ì¦ì„œ ì²´ì¸ì„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ì„œ ëª©ë¡ì— í¬í•¨ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´, <a href="https://support.apple.com/ko-kr/guide/keychain-access/kyca2431/mac">Macìš© í‚¤ì²´ì¸ ì ‘ê·¼ì„ ì‚¬ìš©í•˜ì—¬ í‚¤ì²´ì¸ì— ì¸ì¦ì„œ ì¶”ê°€í•˜ê¸°</a>ì— ë”°ë¼ CA ì¸ì¦ì„œë¥¼ ì¶”ê°€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìœ íš¨í•œ ì¸ì¦ì„œì„ì´ í‘œì‹œë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-registry-certificate/trust-certificate.png"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> login registry.domain.com <span class="token parameter variable">-u</span> <span class="token string">'username'</span> <span class="token parameter variable">-p</span> <span class="token string">'password'</span>
WARNING<span class="token operator">!</span> Using <span class="token parameter variable">--password</span> via the CLI is insecure. Use --password-stdin.
Login Succeeded</code></pre>

<blockquote>
<p>ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ CA ì¸ì¦ì„œ ì²´ì¸ì„ ì‹œìŠ¤í…œ ì¸ì¦ì„œë¡œ ë“±ë¡í•˜ê³ ë‚˜ì„œëŠ” ë„ì»¤ ì—”ì§„ì´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ì„œ ëª©ë¡ì— ë”°ë¼ ì¸ì¦ì„œê°€ ìœ íš¨í•¨ì„ í™•ì¸í•¨ìœ¼ë¡œ ì •ìƒì ìœ¼ë¡œ HTTPS í†µì‹ ì´ ì´ë£¨ì–´ì§€ê³  ë¡œê·¸ì¸ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì— ëŒ€í•œ ë¡œê·¸ì¸ ì˜ˆì‹œì´ë¯€ë¡œ CLI ê²½ê³  ë¬¸êµ¬ëŠ” ë¬´ì‹œí•´ì£¼ì„¸ìš”.</p>
</blockquote>
<h4 id="ì‹œìŠ¤í…œ-ë°-ì‚¬ìš©ì-ì •ì˜-CA-ì¸ì¦ì„œ-ë³‘í•©"><a href="#ì‹œìŠ¤í…œ-ë°-ì‚¬ìš©ì-ì •ì˜-CA-ì¸ì¦ì„œ-ë³‘í•©" class="headerlink" title="ì‹œìŠ¤í…œ ë° ì‚¬ìš©ì ì •ì˜ CA ì¸ì¦ì„œ ë³‘í•©"></a>ì‹œìŠ¤í…œ ë° ì‚¬ìš©ì ì •ì˜ CA ì¸ì¦ì„œ ë³‘í•©</h4><p><em>On Linux any root certificates authorities are merged with the system defaults, including the hostâ€™s root CA set. If you are running Docker on Windows Server, or Docker Desktop for Windows with Windows containers, the system default certificates are only used when no custom root certificates are configured.</em></p>
<p><a href="https://docs.docker.com/engine/security/certificates/#understand-the-configuration">ê³µì‹ë¬¸ì„œ</a>ì— ë”°ë¥´ë©´ ìœ„ì™€ ê°™ì´ ì‚¬ìš©ì ì •ì˜ ì¸ì¦ì„œ(certs.d)ëŠ” ì‹œìŠ¤í…œ ì¸ì¦ì„œì™€ CA ì¸ì¦ì„œê°€ í•©ì³ì ¸ì„œ ë“±ë¡ëœë‹¤ëŠ” ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ CA ì¸ì¦ì„œ ì²´ì¸ì„ <strong>ì‹œìŠ¤í…œ ì¸ì¦ì„œ ëª©ë¡</strong>ì´ë‚˜ <strong>certs.d</strong> í´ë”ì— ë‘ë©´ ëœë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‹œìŠ¤í…œ ì¸ì¦ì„œë¡œ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ certs.d í´ë”ì— ca.crtë¼ëŠ” ì´ë¦„ìœ¼ë¡œ CA ì¸ì¦ì„œ ì²´ì¸ì„ ë‘ê²Œë˜ë©´ ë™ì¼í•˜ê²Œ ë™ì‘í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>í•œê°€ì§€ í¥ë¯¸ë¡œìš´ ì ì€ ì´ ê¸€ì„ ì‘ì„±í•˜ê¸° ìœ„í•´ Docker Desktop for Windows ì—ì„œë„ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¸ ê²°ê³¼ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ì˜ CA ì¸ì¦ì„œ ì²´ì¸ì„ êµ³ì´ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ì¸ì´ ë˜ì—ˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ì ìœ¼ë¡œ ë³´ì•˜ì„ë•Œ ëª¨ë“  ìš´ì˜ì²´ì œì—ì„œ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ì§€ëŠ” ì•ŠëŠ” ê²ƒ ê°™ì•„ë³´ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ë„ì»¤ ì—”ì§„ì—ì„œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤ê³  í•œë‹¤ë©´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„ ê´€ë¦¬ìì—ê²Œ ì¸ì¦ì„œ ì²´ì¸ì„ ì „ë‹¬ë°›ì•„ì„œ ë“±ë¡í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Docker Registry</tag>
        <tag>Harbor</tag>
        <tag>Certificate</tag>
      </tags>
  </entry>
  <entry>
    <title>ì„œë²„ íƒ€ì„ì¡´ì„ ë°”ê¾¸ì§€ ë§ì (Feat. ê¸€ë¡œë²Œ)</title>
    <url>/don&#39;t-change-server-timezone/</url>
    <content><![CDATA[<pre class="language-bash" data-language="bash"><div class="caption"><span>Terminal</span></div><code class="language-bash">ubuntu@ubuntu:~$ timedatectl
               Local time: Wed <span class="token number">2023</span>-05-24 <span class="token number">17</span>:21:45 UTC
           Universal time: Wed <span class="token number">2023</span>-05-24 <span class="token number">17</span>:21:45 UTC
                 RTC time: Wed <span class="token number">2023</span>-05-24 02:16:41    
                Time zone: Etc/UTC <span class="token punctuation">(</span>UTC, +0000<span class="token punctuation">)</span>       
System clock synchronized: no                         
              NTP service: active                     
          RTC <span class="token keyword">in</span> <span class="token builtin class-name">local</span> TZ: no</code></pre>

<p>ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ì˜ íƒ€ì„ì¡´ì€ UTCë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ êµ­ë‚´ ì‚¬ìš©ìë“¤ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” íšŒì‚¬ë“¤ì˜ ê²½ìš° <a href="https://jojoldu.tistory.com/513">ì„œë²„ íƒ€ì„ì¡´ì„ í•œêµ­ ì‹œê°„(Asia&#x2F;Seoul, +09:00)ë¡œ ë³€ê²½í•´ì„œ ì‚¬ìš©</a>í•˜ê¸°ë„ í•œë‹¤. ì„œë¹„ìŠ¤ ë„ë©”ì¸ ê·¸ë¦¬ê³  í™˜ê²½ì„ ì´í•´í•˜ê³  ìˆì–´ì•¼ë§Œ ì˜¬ë°”ë¥¸ í–‰ìœ„ë¡œ ìƒê°í•´ì•¼í•˜ëŠ”ë° ê°„í˜¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íƒ€ì„ì¡´ì´ í•œêµ­ì‹œê°„ì´ë¼ ë°ì´í„°ë² ì´ìŠ¤ì˜ íƒ€ì„ì¡´ê³¼ì˜ ì°¨ì´ë¡œ ì¸í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ íƒ€ì„ì¡´ì„ í•œêµ­ì‹œê°„ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ê²½ ì„¤ëª…ì—†ì´ ë¸”ë¡œê·¸ì— ê³µìœ í•˜ëŠ” ë¶„ë“¤ì´ ê½¤ë‚˜ ë§ë‹¤.</p>
<p>ê²°ë¡ ì ìœ¼ë¡œ ì´ì•¼ê¸°í•˜ìë©´ ë°±ì—”ë“œ ê°œë°œìëŠ” ì‹œê°„ ì •ë³´ì— íƒ€ì„ì¡´ì„ ì ìš©í•˜ëŠ” ê²ƒì„ í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì¸ í´ë¼ì´ì–¸íŠ¸ ì˜ì—­ì— ìœ„ì„í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ì‚¬ìš©ìëŠ” ì„œë²„ì— ì €ì¥ëœ ë°ì´í„°ì— ìƒê´€ì—†ì´ ë³¸ì¸ì˜ ì‹œê°„ëŒ€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •í™•í•œ ì‹œê°„ì´ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ”ê²Œ ìš”êµ¬í•˜ëŠ” ë°”ì´ê¸° ë•Œë¬¸ì´ë‹¤. ê°„í˜¹ ì‹ ì… ê°œë°œì ë¿ë§Œ ì•„ë‹ˆë¼ ì–´ëŠì •ë„ ê²½í—˜ì´ ìˆëŠ” ê²½ë ¥ ê°œë°œìë“¤ë„ êµ­ë‚´ì—ì„œë§Œ ì¼í•˜ë‹¤ë³´ë‹ˆ ê³ ì •ëœ ê´€ì ì„ ê°€ì§€ê²Œ ë˜ëŠ”ê²Œ ì•„ë‹Œê°€ ì‹¶ë‹¤. ì•„ë¬´íŠ¼ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìëŠ” ë‹¨ìˆœíˆ ì„œë²„ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ í‘œì‹œí•˜ê³ ì í•˜ëŠ” ì§ë¬´ê°€ ì•„ë‹ˆë©° ì„œë²„ì—ì„œ ì •ì œë˜ì–´ ì œê³µëœ ë°ì´í„°ë¥¼ ì‚¬ìš©ìì—ê²Œ ì í•©í•œ ë°ì´í„°ë¡œ ë³€í™˜í•˜ì—¬ í‘œì‹œí•˜ëŠ” ì‘ì—…ë„ ìš”êµ¬ëœë‹¤. ê·¸ë¦¬ê³  ê·¸ ë³€í™˜ ì‘ì—… ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ ì‹œê°„ ì •ë³´ì— ì‚¬ìš©ìì˜ íƒ€ì„ì¡´ì„ ë”í•´ì„œ í‘œì‹œí•´ì£¼ëŠ” ê²ƒì´ë‹¤.</p>
<p>ë‹¤ìŒì€ ì˜¤í‚¤ ì»¤ë®¤ë‹ˆí‹° ì‚¬ì´íŠ¸ì—ì„œ ê°œë°œì ë„êµ¬ì˜ ë„¤íŠ¸ì›Œí¬ ê¸°ëŠ¥ìœ¼ë¡œ í™•ì¸í•œ ë°°ë„ˆ ì •ë³´ì´ë‹¤. </p>
<p><img data-src="/images/posts/don't-change-server-timezone/01.png"></p>
<p>ë°°ë„ˆì˜ ì‹œì‘ë‚ ì§œ(startDate)ì™€ ë§ˆê°ë‚ ì§œ(endDate)ê°€ ë³´ì´ëŠ”ë° 2023-06-02T00:00:00ëŠ” ì•„ë§ˆë„ í•œêµ­ ì‹œê°„ì„ ì˜ë¯¸í•  ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ í•œêµ­ ì‚¬ëŒì´ ì•„ë‹Œ í•´ì™¸ì—ì„œ ì ‘ì†í•œ ì‚¬ëŒì´ ì˜¤í‚¤ ì»¤ë®¤ë‹ˆí‹° ì‚¬ì´íŠ¸ì— ì ‘ì†í–ˆë‹¤ë©´ ë°°ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë  ìˆ˜ ìˆì„ê¹Œ? ì¼ë°˜ì ìœ¼ë¡œ ì‹œê°„ì— ëŒ€í•œ ë°ì´í„¸ë¥´ ì£¼ê³ ë°›ì„ ë•ŒëŠ” íƒ€ì„ì¡´ì´ í‘œí˜„ëœ ë¬¸ìì—´ì´ë‚˜ UTC Timestamp(ë°€ë¦¬ì´ˆ)ì™€ ê°™ì€ ìˆ«ìë¡œ ë³€í™˜ëœ í˜•íƒœë¡œ êµ¬ì„±í•˜ëŠ” í¸ì´ë‹¤. ì´ì™€ ë¹„êµí•´ì„œ ì•„ë˜ëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ë‚´ë ¤ì£¼ê³  ìˆëŠ” ì‹œê°„ê°’ì´ê³  <strong>UTC íƒ€ì„ì¡´ì´ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë„ë¡ +0000ì„ í¬í•¨</strong>í•´ì£¼ê³  ìˆë‹¤.</p>
<p><img data-src="/images/posts/don't-change-server-timezone/02.png"></p>
<p>ì˜¤í‚¤ í”„ë¡œë•íŠ¸íŒ€ì˜ ê°œë°œìë“¤ì´ ì˜ëª»ë˜ì—ˆë‹¤ê³ ëŠ” ë³¼ ìˆ˜ ì—†ì§€ë§Œ (ì•„ë§ˆë„ ë¡œì»¬ íƒ€ì„ì¡´ì´ ì „ë‹¬ë˜ì–´ ë³€í™˜í•´ì£¼ì—ˆì„ ê²ƒ) ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¥¼ ì¤€ë¹„í•˜ëŠ” íšŒì‚¬ì—ì„œ ì¼í•˜ê³ ì í•˜ëŠ” ê°œë°œìë‚˜ ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¡œ ì „í™˜í•˜ë ¤ëŠ” íšŒì‚¬ì— ìˆë‹¤ë©´ ì‹œê°„ê³¼ íƒ€ì„ì¡´ì— ëŒ€í•´ì„œëŠ” ìƒê°ë³´ë‹¤ ì¤‘ìš”í•˜ê²Œ ìƒê°í•´ì•¼í•œë‹¤. ì›¹ ê°œë°œìë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” íƒ€ì„ì¡´ì€ UTCë¼ëŠ” ê´€ì ì„ ê°€ì§€ë„ë¡ í•˜ì.</p>
<p>ë¹„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ì‹œê°„ì„ ë³´ë”ë¼ë„ í•œêµ­ ì‹œê°„ìœ¼ë¡œ ì‰½ê²Œ ë³€í™˜í•˜ì—¬ ì¸ì§€í•˜ì§€ ëª»í• ì§€ë¼ë„â€¦</p>
]]></content>
      <tags>
        <tag>Timezone</tag>
        <tag>UTC</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ S3 ë²„í‚· ì•¡ì„¸ìŠ¤í•˜ê¸°</title>
    <url>/ec2-instance-access-s3-bucket/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ S3 ë²„í‚·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.</p>
<p>ìµœê·¼ íšŒì‚¬ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ ì¤‘ì—ëŠ” ë³´ì•ˆ ì •ì±…ì— ì˜í•´ ê³ ê°ì´ êµ¬ì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ì •ë³´ë§Œì„ ì œê³µë°›ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìƒê²¼ìŠµë‹ˆë‹¤. í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ ì¤‘ì—ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ìƒìš© ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤. ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…í•˜ê¸° ìœ„í•˜ì—¬ ë§¤ì¼ 1ì‹œì— íŒŒì¼ë¡œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ì••ì¶•í•˜ì—¬ S3ë¡œ ì €ì¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê³ ê°ì´ ë³´ìœ í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°±ì—… íŒŒì¼ì„ ì €ì¥í•˜ê¸° ìœ„í•œ S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì§€ì •í•´ì£¼ë„ë¡ ìœ ë„í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<h2 id="S3-ë²„í‚·-ì •ì±…"><a href="#S3-ë²„í‚·-ì •ì±…" class="headerlink" title="S3 ë²„í‚· ì •ì±…"></a>S3 ë²„í‚· ì •ì±…</h2><p>S3ì—ì„œ ë²„í‚·ì„ ë§Œë“¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ <strong>ëª¨ë“  í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨</strong>ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-01.png"></p>
<p>ê·¸ë¦¬ê³  <strong>ë²„í‚· ì •ì±…</strong>ì„ í†µí•´ ë²„í‚· ë˜ëŠ” ë²„í‚·ì— ì €ì¥ëœ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="ë²„í‚·-ì •ì±…-ìƒì„±"><a href="#ë²„í‚·-ì •ì±…-ìƒì„±" class="headerlink" title="ë²„í‚· ì •ì±… ìƒì„±"></a>ë²„í‚· ì •ì±… ìƒì„±</h3><p>ë²„í‚· ì •ì±…ì„ ìƒì„±í•  ë•ŒëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” <a href="http://awspolicygen.s3.amazonaws.com/policygen.html">AWS Policy Generator</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ìŒì€ íŠ¹ì • IPì— ëŒ€í•´ì„œ ë²„í‚·ì— ëŒ€í•œ ì¡°íšŒ, ì½ê¸°, ì“°ê¸° ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ì •ì±…ì„ ìƒì„±í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Principal"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"s3:ListBucket"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:GetObject"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:PutObject"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"arn:aws:s3:::mambo.kr"</span><span class="token punctuation">,</span>
                <span class="token string">"arn:aws:s3:::mambo.kr/*"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"IpAddress"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                    <span class="token property">"aws:SourceIp"</span><span class="token operator">:</span> <span class="token string">"218.156.190.x/32"</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ë²„í‚· ì •ì±…ì„ ì •ì˜í•˜ëŠ” JSONì˜ í¬ê¸°ëŠ” 20kBë¡œ ì œí•œë©ë‹ˆë‹¤.</p>
</blockquote>
<p>ë²„í‚· ì •ì±…ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/example-bucket-policies.html">ë²„í‚· ì •ì±… ì˜ˆì œ</a> ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p>
<h2 id="EC2-ì¸ìŠ¤í„´ìŠ¤"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤"></a>EC2 ì¸ìŠ¤í„´ìŠ¤</h2><p>ì•„ë§ˆì¡´ ë¦¬ëˆ…ìŠ¤ AMIë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë©´ AWS CLIê°€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, AWS CLIë¥¼ ì‚¬ìš©í•´ì„œ S3 ì„œë¹„ìŠ¤ì— ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="IAM-ì—­í• -ìƒì„±"><a href="#IAM-ì—­í• -ìƒì„±" class="headerlink" title="IAM ì—­í•  ìƒì„±"></a>IAM ì—­í•  ìƒì„±</h3><p>S3 ë²„í‚· ê¶Œí•œ ì„¤ì •ì—ì„œ ë²„í‚· ì •ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë‚˜ IAM ì—­í• ì„ ë§Œë“¤ê³  ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì ‘ê·¼í•´ì•¼í•˜ë¯€ë¡œ EC2 ì„œë¹„ìŠ¤ì— ëŒ€í•œ IAM ì—­í• ì„ ë§Œë“¤ì–´ì„œ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ë“±ë¡í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì €, EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ AWS CLIë¡œ ë²„í‚·ì„ ì¡°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-02.png"></p>
<p>í˜„ì¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” IAM ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì´ ì§€ì •ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>
<p>IAM ë©”ë‰´ì—ì„œ ì‹ ê·œë¡œ ì—­í• ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-03.png"></p>
<p>S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì •ì˜í•  ê²ƒì´ë¯€ë¡œ ê´€ë¦¬í˜• ì •ì±…ì€ ì„¤ì •í•˜ì§€ì•ŠìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-04.png"></p>
<p>ìƒì„±í•œ IAM ì—­í• ì„ EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-05.png"></p>
<p>IAM ì—­í• ì— ì–´ë– í•œ ì •ì±…ì„ ì ìš©í•˜ì§€ ì•Šê³  ë²„í‚·ì„ ì¡°íšŒí•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-06.png"></p>
<p>IAM ì—­í• ì„ ì§€ì •í•˜ì˜€ê¸°ì— AWS CLIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì§€ë§Œ mambo.kr ì´ë¼ëŠ” ë²„í‚·ì— ëŒ€í•œ ListObjectsV2 ì‘ì—…ì€ Access Denied ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì¸ë¼ì¸-ì •ì±…"><a href="#ì¸ë¼ì¸-ì •ì±…" class="headerlink" title="ì¸ë¼ì¸ ì •ì±…"></a>ì¸ë¼ì¸ ì •ì±…</h3><p>ìš°ë¦¬ê°€ ìƒì„±í•œ IAM ì—­í• ì—ëŠ” ì–´ë– í•œ ì •ì±…ë„ ì—°ê²°í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§€ì§€ ì•ŠëŠ”ê²Œ ë‹¹ì—°í•©ë‹ˆë‹¤. ë‹¤ì‹œ IAM ë©”ë‰´ë¡œ ëŒì•„ê°€ì„œ <strong>ì¸ë¼ì¸ ì •ì±… ì¶”ê°€</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-07.png"></p>
<p>ë²„í‚· ì •ì±… ì˜ˆì œë¥¼ ì°¸ê³ í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ JSON í˜•ì‹ìœ¼ë¡œ ë²„í‚· ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"Sid"</span><span class="token operator">:</span> <span class="token string">"Mannual"</span><span class="token punctuation">,</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"s3:ListBucket"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:GetObject"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:PutObject"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"arn:aws:s3:::mambo.kr"</span><span class="token punctuation">,</span>
                <span class="token string">"arn:aws:s3:::mambo.kr/*"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-08.png"></p>
<h3 id="ë²„í‚·-ì¡°íšŒ"><a href="#ë²„í‚·-ì¡°íšŒ" class="headerlink" title="ë²„í‚· ì¡°íšŒ"></a>ë²„í‚· ì¡°íšŒ</h3><p>S3 ë²„í‚·ì— ëŒ€í•œ ì •ì±…ì´ IAM ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆìœ¼ë‹ˆ ë²„í‚·ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ê°€ì§€ê²Œ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-09.png"></p>
<p>EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš©ì ê³„ì •ì˜ ë³´ìœ í•œ S3 ë²„í‚·ì— ëŒ€í•œ ëª©ë¡ì€ ê¶Œí•œì´ ì—†ì–´ì„œ ì¡°íšŒí•  ìˆ˜ ì—†ìœ¼ë‚˜ ì¸ë¼ì¸ ì •ì±…ìœ¼ë¡œ ì •ì˜ëœ mambo.kr ë²„í‚·ì— ëŒ€í•´ì„œëŠ” ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ë§Œì•½, S3 ë²„í‚· ëª©ë¡ì„ ì¡°íšŒí•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ Statementë¥¼ ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"Sid"</span><span class="token operator">:</span> <span class="token string">"Mannual"</span><span class="token punctuation">,</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"s3:ListBucket"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:GetObject"</span><span class="token punctuation">,</span>
                <span class="token string">"s3:PutObject"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"arn:aws:s3:::mambo.kr"</span><span class="token punctuation">,</span>
                <span class="token string">"arn:aws:s3:::mambo.kr/*"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"Sid"</span><span class="token operator">:</span> <span class="token string">"Mannual-2"</span><span class="token punctuation">,</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"s3:ListBucket"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"arn:aws:s3:::*/*"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë¹ˆ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë²„í‚·ì— ì—…ë¡œë“œí•˜ê³  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ec2-instance-access-s3-bucket/s3-bucket-10.png"></p>
<p>S3ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” í¬ê¸°ì— ëŒ€í•œ ì œí•œì€ ì—†ìœ¼ë‚˜ PUT ìš”ì²­ìœ¼ë¡œ ì—…ë¡œë“œ ê°€ëŠ¥í•œ í¬ê¸°ëŠ” ìµœëŒ€ 5GBì…ë‹ˆë‹¤. AWS CLIì˜ S3 ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¼ì • í¬ê¸° ì´ìƒì´ë¼ë©´ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ì•Œê³  ê³„ì‹œê³  ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.</p>
<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>í¼ë¸”ë¦­ IPê°€ í• ë‹¹ë˜ì§€ ì•ŠëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ë¼ë©´ AWS PrivateLinkë¡œ êµ¬ì„±ë˜ëŠ” VPC ì¸í„°í˜ì´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/privatelink-interface-endpoints.html">S3 ì„œë¹„ìŠ¤ì™€ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •</a>í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ì‚¬ìš©ì ê³„ì •ì˜ ARNì„ ì œê³µë°›ì•„ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ê³µì‹ ë¬¸ì„œì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì •ì±… ì˜ˆì œë¥¼ ì°¸ê³ í•´ë´…ì‹œë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>EC2</tag>
        <tag>S3</tag>
      </tags>
  </entry>
  <entry>
    <title>EC2 Node Exporter</title>
    <url>/ec2-node-exporter/</url>
    <content><![CDATA[<p>ì¡°ì§ì—ì„œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ê³¤ ìˆì§€ë§Œ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¡œ êµ¬ì„±ëœ ì¸í”„ë¼íŒ€ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë³´ë‹ˆ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ì•Šê³  í•„ìš”í•˜ë‹¤ê³  ìƒê°ë  ë•Œ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ê°€ë¥¼ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ëª¨ë‹ˆí„°ë§ì— ëŒ€í•´ì„œë„ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì›¹ ì½˜ì†”ì—ì„œ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/monitoring_ec2.html">Amazon EC2 ëª¨ë‹ˆí„°ë§</a>ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆì§€ë§Œ 5ë¶„ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘ë˜ëŠ” ì§€í‘œë¥¼ 1ë¶„ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/using-cloudwatch-new.html">ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì„¸ë¶€ ëª¨ë‹ˆí„°ë§ í™œì„±í™”</a>ë¥¼ í•´ì•¼í•˜ê³  ë” ë§ì€ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì§€í‘œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— <a href="https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/installing-cloudwatch-agent-ssm.html">CloudWatch ì—ì´ì „íŠ¸ ì„¤ì¹˜</a>í•´ì•¼í•˜ê³  ë³„ë„ì˜ ë¹„ìš©ì´ ì¶”ê°€ì ìœ¼ë¡œ ë“ ë‹¤ëŠ” ì ìœ¼ë¡œ ì¸í•˜ì—¬ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>íšŒì‚¬ ì‚¬ë‚´ ì„œë²„ì— ê°œì¸ì ìœ¼ë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ ë° ê·¸ë¼íŒŒë‚˜ ì„œë²„ë¥¼ ì‹¤í–‰í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— Node Exporterë¥¼ í™œìš©í•´ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆë‹¤ë©´ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°ë˜ì—ˆìŠµë‹ˆë‹¤. ê³ ê°ìœ¼ë¡œ ë¶€í„° ì›¹ ì½˜ì†”ì„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬ë°›ê¸°ë„ í•˜ê³  ì–´ë–¤ ê³ ê°ì€ ë³´ì•ˆ ìƒ ì´ìœ ë¡œ ì¸í•˜ì—¬ ì¸í”„ë¼ êµ¬ì„±ê³¼ ê´€ë¦¬ëŠ” ì§ì ‘ ë‹´ë‹¹í•˜ê³  ì •í•´ì§„ ìŠ¤í™ì— ë”°ë¼ì„œ ìƒì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ì† ê¶Œí•œë§Œ ë¶€ì—¬í•˜ê¸° ë•Œë¬¸ì— CloudWatchë¥¼ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>íšŒì‚¬ ì‚¬ë‚´ ì„œë²„ì— ì„ì‹œì ìœ¼ë¡œ êµ¬ì„±í•œ í”„ë¡œë©”í…Œìš°ìŠ¤ ë° ê·¸ë¼íŒŒë‚˜ëŠ” ëª¨ë‹ˆí„°ë§ ë°©ì•ˆì´ ê²€í† ë˜ë©´ ì¡°ì§ë‚´ì—ì„œ ìš´ì˜ì¤‘ì¸ í´ë¼ìš°ë“œ í™˜ê²½ìœ¼ë¡œ ì´ì „í•  ìƒê°ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ì•„ë¬´íŠ¼ í˜„ì¬ ì¡°ì§ì—ì„œ ëª¨ë‹ˆí„°ë§ ë°©ì•ˆì„ ì œëŒ€ë¡œ ê²€í† í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ëŠ” ì•„ë‹ˆì§€ë§Œ ê³ ê°ì˜ ì¸í”„ë¼ í™˜ê²½ì— ì‹œìŠ¤í…œì„ ë°°í¬í•˜ê³  ìš´ì˜í•˜ê³  ìˆìœ¼ë¯€ë¡œ ìµœì†Œí•œ ì›ì¸ì„ ì°¾ì•„ê°€ê¸° ìœ„í•œ ì§€í‘œëŠ” ë‚¨ê²¨ë‘ì–´ì•¼í•œë‹¤ê³  ìƒê°í•˜ê¸°ì— Node Exporterë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í–ˆê³  ì´ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚¨ê¸°ê³ ì í•©ë‹ˆë‹¤.</p>
<h2 id="Node-Exporter"><a href="#Node-Exporter" class="headerlink" title="Node Exporter"></a>Node Exporter</h2><p><a href="https://github.com/prometheus/node_exporter">Node Exporter</a>ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ í”„ë¡œì íŠ¸ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ì‹œìŠ¤í…œ ë§¤íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ëŠ” Exporter ì…ë‹ˆë‹¤. <a href="https://prometheus.io/docs/guides/node-exporter/#installing-and-running-the-node-exporter">Installing and running the Node Exporter</a>ì™€ ê°™ì´ Node Exporterë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œ ë¬¸ì„œë„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒíƒœê°€ ì •ìƒì ì´ì§€ ì•ŠìŒì´ í™•ì¸ë˜ë©´ <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-instance-recover.html">ì¸ìŠ¤í„´ìŠ¤ ë³µêµ¬</a> ê¸°ëŠ¥ìœ¼ë¡œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì–¸ì œë“ ì§€ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì¬ë¶€íŒ…ë˜ì–´ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¬ë¶€íŒ…ë˜ì–´ë„ ìë™ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ë„ë¡ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ Systemdì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h3 id="EC2-ì¸ìŠ¤í„´ìŠ¤-ì•„í‚¤í…ì²˜"><a href="#EC2-ì¸ìŠ¤í„´ìŠ¤-ì•„í‚¤í…ì²˜" class="headerlink" title="EC2 ì¸ìŠ¤í„´ìŠ¤ ì•„í‚¤í…ì²˜"></a>EC2 ì¸ìŠ¤í„´ìŠ¤ ì•„í‚¤í…ì²˜</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” amd64 ê¸°ë°˜ì˜ ì•„í‚¤í…ì²˜ ë¿ë§Œ ì•„ë‹ˆë¼ <a href="https://aws.amazon.com/ko/ec2/graviton/">Arm ê¸°ë°˜ì˜ AWS Graviton í”„ë¡œì„¸ì„œ</a>ë¡œ ì œê³µë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìµœê·¼ì—ëŠ” Arm ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ë” ì €ë ´í•œ ê°€ê²©ìœ¼ë¡œ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì•„í‚¤í…ì²˜ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥´ê²Œ ë¹Œë“œëœ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ ì„¤ì¹˜í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">uname</span> <span class="token parameter variable">-rmpo</span>
<span class="token number">4.14</span>.256-197.484.amzn2.aarch64 aarch64 aarch64 GNU/Linux</code></pre>

<h3 id="ë¦´ë¦¬ì¦ˆ-íŒŒì¼-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜"><a href="#ë¦´ë¦¬ì¦ˆ-íŒŒì¼-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜" class="headerlink" title="ë¦´ë¦¬ì¦ˆ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜"></a>ë¦´ë¦¬ì¦ˆ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜</h3><p>EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì•„í‚¤í…ì²˜ ìœ í˜•ì„ í™•ì¸í–ˆë‹¤ë©´ <a href="https://github.com/prometheus/node_exporter/releases">ë¦´ë¦¬ì¦ˆ íŒŒì¼</a>ì—ì„œ ìœ„ ì•„í‚¤í…ì²˜ì— ë§ëŠ” arm64ê°€ í¬í•¨ëœ ë¦´ë¦¬ì¦ˆ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” x86_64 ì•„í‚¤í…ì²˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— amd64ë¥¼ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-arm64.tar.gz

<span class="token function">tar</span> zxvf node_exporter-1.3.1.linux-arm64.tar.gz
<span class="token function">sudo</span> <span class="token function">cp</span> node_exporter-1.3.1.linux-arm64/node_exporter /usr/local/bin/

<span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">-M</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-s</span> /bin/false node_exporter
<span class="token function">sudo</span> <span class="token function">chown</span> node_exporter:node_exporter /usr/local/bin/node_exporter</code></pre>

<h4 id="Node-Exporter-ìš©-ì‚¬ìš©ì-ì¶”ê°€"><a href="#Node-Exporter-ìš©-ì‚¬ìš©ì-ì¶”ê°€" class="headerlink" title="Node Exporter ìš© ì‚¬ìš©ì ì¶”ê°€"></a>Node Exporter ìš© ì‚¬ìš©ì ì¶”ê°€</h4><p>ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ê°€ ì•„ë‹ˆê¸°ì— ì‚¬ìš©ìë¥¼ ì§ì ‘ ì¶”ê°€í•´ë³¸ì ì´ ì—†ì–´ì„œ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ëŠ” ëª…ë ¹ì–´ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•„ì•¼í–ˆìŠµë‹ˆë‹¤. ë§ì€ ì˜ˆì œë“¤ì—ì„œ ì‚¬ìš©ì ì¶”ê°€ ì‹œ ì ìš©í•˜ëŠ” ì˜µì…˜ì´ ì œê°ê°ì´ë¼ì„œ ë” í˜¼ë€ì´ ìˆì—ˆìŠµë‹ˆë‹¤. </p>
<ul>
<li><a href="https://linux.die.net/man/8/useradd">useradd(8) - Linux man page</a></li>
<li><a href="https://faq.hostway.co.kr/Linux_ETC/1624">&#x2F;bin&#x2F;false, &#x2F;sbin&#x2F;nologin ì˜ ì°¨ì´ì </a></li>
<li><a href="https://linuxhint.com/add-user-linux/">How do I add a user in Linux without a home directory?</a></li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># sudo useradd --no-create-home --system --shell /bin/false node_exporter</span>
<span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">-M</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-s</span> /bin/false node_exporter</code></pre>

<blockquote>
<p>ì‹œìŠ¤í…œ ê³„ì •ì„ ìƒì„±í•˜ë˜ ë¡œê·¸ì¸ì´ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ í•˜ë©´ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="Systemd-ì„œë¹„ìŠ¤-ë“±ë¡"><a href="#Systemd-ì„œë¹„ìŠ¤-ë“±ë¡" class="headerlink" title="Systemd ì„œë¹„ìŠ¤ ë“±ë¡"></a>Systemd ì„œë¹„ìŠ¤ ë“±ë¡</h3><p>ì„¤ì¹˜í•œ ë°”ì´ë„ˆë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ Systemd ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ê³  Systemctl ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì„œë²„ê°€ ë¶€íŒ…ë  ë•Œ ìë™ìœ¼ë¡œ ì‹œì‘ë˜ë„ë¡ í™œì„±í™”í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tee</span> /etc/systemd/system/node_exporter.service <span class="token operator">&lt;&lt;</span><span class="token string">"EOF"
[Unit]
Description=Node Exporter
After=network.target

[Service]
User=node_exporter
Group=node_exporter
ExecStart=/usr/local/bin/node_exporter

[Install]
WantedBy=multi-user.target
EOF</span>

<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl start node_exporter
<span class="token function">sudo</span> systemctl status node_exporter
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> node_exporter</code></pre>

<h3 id="ë§¤íŠ¸ë¦­-í™•ì¸"><a href="#ë§¤íŠ¸ë¦­-í™•ì¸" class="headerlink" title="ë§¤íŠ¸ë¦­ í™•ì¸"></a>ë§¤íŠ¸ë¦­ í™•ì¸</h3><p>Node Exporter ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¬ë‹¤ë©´ curl ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì§€í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¢…ë£Œí•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-s</span> localhost:9100/metrics</code></pre>

<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.vmware.com/en/VMware-vRealize-Operations-Management-Pack-for-Kubernetes/1.6/kubernetes-solution/GUID-A1B68BE5-EF38-48E1-AA80-FD71E6F19989.html">Node Exporter Setup on Linux Nodes</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-prometheus-on-ubuntu-16-04">How To Install Prometheus on Ubuntu 16.04</a></li>
<li><a href="https://devdojo.com/ruanbekker/getting-started-with-prometheus-and-node-exporter">Getting Started with Prometheus and Node Exporter</a></li>
<li><a href="https://devopscube.com/monitor-linux-servers-prometheus-node-exporter/">How To Monitor Linux Servers Using Prometheus Node Exporter</a></li>
</ul>
]]></content>
      <tags>
        <tag>EC2</tag>
        <tag>node-exporter</tag>
      </tags>
  </entry>
  <entry>
    <title>ED25519</title>
    <url>/ed25519/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ë³´ì•ˆ ê´€ë ¨ ê¸°ìˆ ì¸ íƒ€ì›ê³¡ì„  ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” <strong>ED25519</strong>ë¼ëŠ” ê²ƒì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p>
<p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œëŠ” 2021ë…„ 8ì›” 17ì¼ë¶€í„° EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì„ ìœ„í•´ <a href="https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-ec2-customers-ed25519-keys-authentication/">ED25519 í˜•ì‹ì˜ í‚¤ë¡œ SSH ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›</a>í•˜ì˜€ìœ¼ë©° 2021ë…„ 9ì›” 1ì¼ì—ëŠ” ê¹ƒí—ˆë¸Œì—ì„œë„ DSA í˜•ì‹ì˜ í‚¤ë¥¼ ì œê±°í•˜ê³  <a href="https://github.blog/2021-09-01-improving-git-protocol-security-github/">ECDSAì™€ ED25519 í˜•ì‹ì˜ í‚¤ë¥¼ ì¶”ê°€</a>í•˜ê¸°ë¡œ ê²°ì •í•˜ì˜€ìŠµë‹ˆë‹¤. </p>
<p>ê³µí†µìœ¼ë¡œ ì–¸ê¸‰ë˜ê³  ìˆëŠ” ED25519ë¼ëŠ” ê²ƒì„ ëª¨ë¥´ì‹œëŠ” ë¶„ì´ë¼ë©´ ì €ì™€ í•¨ê»˜ ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤. </p>
<p><img data-src="/images/posts/ed25519/ed25519-00.gif"></p>
<h2 id="ED25519"><a href="#ED25519" class="headerlink" title="ED25519"></a>ED25519</h2><p>ED25519(Ed25519)ëŠ” ECC(Elliptic Curve Cryptography) ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìˆ˜í–‰í•˜ë„ë¡ êµ¬í˜„ëœ ì „ìì„œëª…ì…ë‹ˆë‹¤. íƒ€ì›ê³¡ì„  ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì€ <strong>ê¸°ì¡´ì˜ RSAì™€ ë¹„êµí•´ì„œ ë™ì¼í•œ ì•ˆì •ì„±ì„ ê°€ì§€ë©´ì„œë„ ìƒëŒ€ì ìœ¼ë¡œ ë” ì ì€ ê¸¸ì´ì˜ í‚¤</strong>ë¥¼ ê°€ì§„ë‹¤ê³  í•©ë‹ˆë‹¤. ì»´í“¨í„° ì—°ì‚° ì†ë„ê°€ ë°œì „í•¨ì— ë”°ë¼ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” RSAì˜ ê¶Œì¥ë˜ëŠ” í‚¤ ê¸¸ì´ê°€ ê¸¸ì–´ì§ìœ¼ë¡œ ì¸í•˜ì—¬ ì¼ë°˜ ì»´í“¨í„° ë˜ëŠ” ë””ë°”ì´ìŠ¤ì—ì„œëŠ” ì—°ì‚° ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ë‹¨ì ì„ ê°€ì§€ê²Œ ë˜ê³  ìƒëŒ€ì ìœ¼ë¡œ ì‘ì€ í‚¤ ê¸¸ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ë™ì¼í•œ ì•ˆì •ì„±ì„ ë³´ì—¬ì£¼ë¯€ë¡œ ê¶Œì¥ë˜ëŠ” ê³µê°œí‚¤ ì•”í˜¸í™” ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>RSAì™€ ë¹„êµí•´ì„œ ë³´ì•ˆì ìœ¼ë¡œ ìš°ìˆ˜í•˜ë‹¤ê³  ë³¼ ìˆœ ì—†ì§€ë§Œ ìƒëŒ€ì ìœ¼ë¡œ ë¹„êµí•˜ì—¬ íš¨ìœ¨ì ì´ë¼ëŠ” ê²ƒì„ ì´í•´í•˜ì…”ì•¼í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="íƒ€ì›-ê³¡ì„ "><a href="#íƒ€ì›-ê³¡ì„ " class="headerlink" title="íƒ€ì› ê³¡ì„ "></a>íƒ€ì› ê³¡ì„ </h3><p>ED25519ëŠ” ì–´ë–¤ íƒ€ì› ê³¡ì„ ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ëœ ì „ìì„œëª…ì¼ì§€ ê¶ê¸ˆí•´ì§‘ë‹ˆë‹¤. ë‹¤ìŒì€ ì•”í˜¸í™”ì— ì í•©í•˜ë‹¤ê³  íŒë‹¨ë˜ì–´ í‘œì¤€ìœ¼ë¡œ ì •ì˜ëœ íƒ€ì› ê³¡ì„ ë“¤ì…ë‹ˆë‹¤.</p>
<ul>
<li>secp256k1</li>
<li>secp256r1</li>
<li>prime256v1</li>
<li>Curve25519</li>
</ul>
<p>ë¯¸êµ­ êµ­ë¦½í‘œì¤€ì—°êµ¬ì†Œ(NIST) ë˜ëŠ” <a href="https://www.secg.org/">í‘œì¤€ ì•”í˜¸í™” ê·¸ë£¹(SECG)</a>ì—ì„œëŠ” íš¨ìœ¨ì ì¸ íƒ€ì› ê³¡ì„ ë“¤ì— ì´ë¦„ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ECC NIST P-256ì€ SECGì—ì„œ ì •ì˜í•œ secp256r1ê³¼ prime256v1ë¥¼ ì§€ì¹­í•œ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. </p>
<p>í‘œì¤€ìœ¼ë¡œ ì •ì˜ëœ ë‹¤ì–‘í•œ íƒ€ì› ê³¡ì„ ë“¤ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒì˜ ë‘ ë¬¸ì„œë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://www.secg.org/sec2-v2.pdf">SEC 2: Recommended Elliptic Curve Domain Parameters</a></li>
<li><a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-4.pdf">Digital Signature Standard (DSS)</a></li>
</ul>
<p>ì €ë¡œì„œëŠ” ì´í•´í•˜ê¸° í˜ë“  ë¶€ë¶„ì´ë¼ê³  ìƒê°í•˜ì—¬ ì„¤ëª…ì€ ìƒëµí•˜ë©° ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ ì—¬ëŸ¬ê°€ì§€ íƒ€ì› ê³¡ì„  í˜•íƒœë¥¼ <strong>ë„ë©”ì¸ íŒŒë¼ë¯¸í„°ë¡œ ì •ì˜</strong>í•˜ì—¬ ì´ë¦„ì„ ë¶€ì—¬í•œ ê²ƒ ì…ë‹ˆë‹¤. NIST P-256ì€ NISTì—ì„œ ì •ì˜í•œ ì†Œìˆ˜ ê¸°ë°˜ì˜ íƒ€ì› ê³¡ì„  ë°©ì •ì‹ì„ ë§í•˜ë©° <a href="https://en.bitcoin.it/wiki/Secp256k1">secp256k1</a>ëŠ” SECGì—ì„œ ì •ì˜í•œ Koblitz curve ê¸°ë°˜ì˜ íƒ€ì› ê³¡ì„  ë°©ì •ì‹ì„ ë§í•©ë‹ˆë‹¤. </p>
<blockquote>
<p>ë¹„íŠ¸ì½”ì¸ê³¼ ì´ë”ë¦¬ì›€ì—ì„œë„ secp256k1 ë¼ëŠ” íƒ€ì›ê³¡ì„ ì„ ì‚¬ìš©í•œë‹¤ê³ â€¦</p>
</blockquote>
<h3 id="í‚¤-êµí™˜ê³¼-ì „ì-ì„œëª…"><a href="#í‚¤-êµí™˜ê³¼-ì „ì-ì„œëª…" class="headerlink" title="í‚¤ êµí™˜ê³¼ ì „ì ì„œëª…"></a>í‚¤ êµí™˜ê³¼ ì „ì ì„œëª…</h3><p>íƒ€ì› ê³¡ì„ ì„ ì‚¬ìš©í•˜ì—¬ ë””í”¼-í—¬ë¨¼ í‚¤ êµí™˜ì„ êµ¬í˜„í•œ ì•Œê³ ë¦¬ì¦˜ì„ ECDHë¼ê³  í•˜ë©° íƒ€ì› ê³¡ì„  ì•”í˜¸ë¥¼ ì‚¬ìš©í•´ì„œ <a href="https://ko.wikipedia.org/wiki/%EB%94%94%EC%A7%80%ED%84%B8_%EC%84%9C%EB%AA%85_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98">ì „ìì„œëª… ì•Œê³ ë¦¬ì¦˜(DSA)</a>ë¥¼ êµ¬í˜„í•œ ê²ƒì„ <strong>ECDSA</strong>ë¼ê³  í•©ë‹ˆë‹¤. ECDSAëŠ” ì§€ë‚œ <a href="../ssl-certificate">SSL ì¸ì¦ì„œ</a> ê¸€ì—ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ECDHE_ECDSAì™€ ê°™ì€ íƒ€ì› ê³¡ì„  ì•”í˜¸ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í†µí•´ ì´ë¯¸ í™•ì¸í•œ ê°œë…ì¸ë° ê¸°ì–µí•˜ì‹œëŠ” ë¶„ì´ ê³„ì‹¤ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.</p>
<p>íƒ€ì› ê³¡ì„  ê¸°ë°˜ì˜ ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜ì—ëŠ” <a href="https://en.wikipedia.org/wiki/EdDSA">EdDSA</a>ë„ ìˆìœ¼ë©° <strong>Twisted Edwards curve</strong>ì™€ <strong>Schnorr ì„œëª… ë°©ì‹</strong>ì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬í˜„ëœ DSA ì…ë‹ˆë‹¤.</p>
<h3 id="X25519-ê·¸ë¦¬ê³ -Ed25519"><a href="#X25519-ê·¸ë¦¬ê³ -Ed25519" class="headerlink" title="X25519 ê·¸ë¦¬ê³  Ed25519"></a>X25519 ê·¸ë¦¬ê³  Ed25519</h3><p>ì•ì„œ ì–¸ê¸‰ëœ íƒ€ì› ê³¡ì„  ì¤‘ Curve25519ëŠ” í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜ì¸ ë””í”¼-í—¬ë¨¼ê³¼ ê°™ì´ ì‚¬ìš©í•˜ë„ë¡ ê³ ì•ˆëœ íƒ€ì› ê³¡ì„ ì…ë‹ˆë‹¤. Curve25519ë¥¼ ê¸°ë°˜ìœ¼ë¡œí•˜ì—¬ ECDHë¡œ í‚¤ êµí™˜ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ X25519ë¼ê³  í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Curve25519ê³¼ í•¨ê»˜ SHA-512ì™€ ê°™ì€ <strong>í•´ì‹œ í•¨ìˆ˜</strong>ë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ëœ EdDSAë¥¼ <strong>Ed25519</strong>ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë¶€ë¥´ê²Œ ë©ë‹ˆë‹¤. </p>
<ul>
<li>ECDSA : íƒ€ì› ê³¡ì„  ê¸°ë°˜ì˜ ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜</li>
<li>X25519 : Curve25519ë¥¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì› ê³¡ì„  í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜</li>
<li>Ed25519 : Curve25519ë¥¼ ì‚¬ìš©í•˜ëŠ” íƒ€ì› ê³¡ì„  ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜</li>
</ul>
<p><img data-src="/images/posts/ed25519/ed25519-04.gif" alt="ë¨¸ë¦¬ì†ì— ì •ë¦¬ê°€ ì˜ ë˜ì…¨ë‚˜ìš”?"></p>
<h3 id="ED25519-í‚¤-í˜ì–´"><a href="#ED25519-í‚¤-í˜ì–´" class="headerlink" title="ED25519 í‚¤ í˜ì–´"></a>ED25519 í‚¤ í˜ì–´</h3><p>ì§€ê¸ˆë¶€í„°ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•´ë³´ëŠ” ê²ƒì„ ë”°ë¼í•´ë³´ê² ìŠµë‹ˆë‹¤. </p>
<h4 id="í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°"><a href="#í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°" class="headerlink" title="í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°"></a>í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°</h4><p>ë¨¼ì €, ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ëŠ” OpenSSHë¥¼ í†µí•´ ë§Œë“¤ ìˆ˜ë„ ìˆê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/ed25519/ed25519-01.png"></p>
<blockquote>
<p>2021ë…„ 8ì›” 17ì¼ ë¶€í„°ëŠ” ì½˜ì†”ì„ í†µí•´ ED25119 í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í–ˆëŠ”ë° ìš°ì¸¡ ì œì•½ì‚¬í•­ì—ëŠ” ì•„ì§ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì€ ë“¯ í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>ì•„ë˜ì™€ ê°™ì´ AWS CLIì˜ create-key-pair ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œë„ ED25519 í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">aws ec2 create-key-pair --key-name mambo --key-type ed25519 --query &quot;KeyMaterial&quot; --output text &gt; aws-mambo.pem
aws ec2 describe-key-pairs
&#123;
    &quot;KeyPairs&quot;: [
        &#123;
            &quot;KeyPairId&quot;: &quot;###&quot;,
            &quot;KeyFingerprint&quot;: &quot;###&quot;,
            &quot;KeyName&quot;: &quot;mambo&quot;,
            &quot;KeyType&quot;: &quot;ed25519&quot;,
            &quot;Tags&quot;: []
        &#125;
    ]
&#125;</code></pre>

<p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì— í‚¤ í˜ì–´ê°€ ìƒì„±ë˜ì—ˆìœ¼ë©´ VPCì— EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ SSH ì ‘ì† ì‹œ ì‚¬ìš©ë  ED25519 í‚¤ í˜ì–´ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/ed25519/ed25519-02.png"></p>
<p>EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì‹¤í–‰ë˜ì—ˆìœ¼ë©´ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ ì½˜ì†”ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ê¸°ëŠ¥ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ed25519/ed25519-03.png"></p>
<p>ED25519 í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•´ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë§ì´ì£ , ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ED25519 í‚¤ í˜ì–´ë¥¼ ìœˆë„ìš° 10ì—ì„œ ì§€ì›í•˜ëŠ” SSH í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©í•´ë³´ë©´ ì˜ëª»ëœ í˜•ì‹ì´ë¼ê³  ë¡œê·¸ê°€ ì¶œë ¥ë˜ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-none"><code class="language-none">ssh -i &quot;aws-mambo.pem&quot; ec2-user@ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com

The authenticity of host &#39;ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com (3.36.96.111)&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:gvSJ&#x2F;qfnIlB8bkTE78QY65HO4px3YpoYvsyAv90LsTE.
Are you sure you want to continue connecting (yes&#x2F;no)? yes
Warning: Permanently added &#39;ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com,3.36.96.111&#39; (ECDSA) to the list of known hosts.
Load key &quot;aws-mambo.pem&quot;: invalid format
ec2-user@ec2-3-36-96-111.ap-northeast-2.compute.amazonaws.com: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</code></pre>

<p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ê°€ ë§Œë“¤ì–´ì£¼ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ìœˆë„ìš° 10ì—ì„œ ssh-keygenì„ í†µí•´ ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ë¥¼ ìƒì„±í•˜ê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì— í¼ë¸”ë¦­ í‚¤ë¥¼ ì¶”ê°€í•˜ë©´ ì •ìƒì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-none"><code class="language-none">ssh-keygen -t ed25519 -m PEM -f .&#x2F;mambo.pem</code></pre>

<p>ì´ì²˜ëŸ¼ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ë§Œë“¤ì–´ì£¼ëŠ” ED25519 í˜•ì‹ì˜ í‚¤ í˜ì–´ëŠ” ìœˆë„ìš°ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì£¼ì˜í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p>íƒ€ì›ê³¡ì„  ì•”í˜¸ì— ëŒ€í•´ì„œ ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì˜ ê¸€ë“¤ì„ ì°¸ê³ í•´ë³´ì‹œê¸°ë¥¼ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://medium.com/humanscape-tech/blockchain-elliptic-curve-cryptography-ecc-49e6d7d9a50a">[Blockchain] Elliptic Curve Cryptography(ECC)</a></li>
<li><a href="https://naleejang.tistory.com/218">ë³´ì•ˆ ê·¸ë¦¬ê³  ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜</a></li>
</ul>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4492">Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS)</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc7748">Elliptic Curves for Security</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc8032">Edwards-Curve Digital Signature Algorithm (EdDSA)</a></li>
<li><a href="https://ed25519.cr.yp.to/">Ed25519: high-speed high-security signatures</a></li>
</ul>
]]></content>
      <tags>
        <tag>ECC</tag>
        <tag>Ed25519</tag>
      </tags>
  </entry>
  <entry>
    <title>EdDSA</title>
    <url>/eddsa/</url>
    <content><![CDATA[<p><a href="https://datatracker.ietf.org/doc/html/rfc8032">EdDSA(Edwards-curve Digital Signature Algorithm)</a>ëŠ” <code>Edwards-Curve</code> ê³¡ì„ ì— ì˜í•œ ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ ì˜ë¯¸í•œë‹¤. ê³¼ê±°ì— <a href="/ed25519">ED25519</a>ì— ëŒ€í•´ì„œ ì •ë¦¬í•œ ê²ƒê³¼ ê°™ì´ ECDSAì™€ í˜¼ë™ì´ ë  ìˆ˜ ìˆë‹¤. <a href="https://datatracker.ietf.org/doc/html/rfc8410">RFC8410</a>ì—ì„œëŠ” Internet X.509 Public Key Infrastructure ì—ì„œ Ed25519ê³¼ ê°™ì€ Algorithm Identifiersì— ëŒ€í•œ í‘œì¤€ì„ ì„¤ëª…í•˜ê³  ìˆë‹¤.</p>
<h4 id="Curve25519-and-Curve448-Algorithm-Identifiers"><a href="#Curve25519-and-Curve448-Algorithm-Identifiers" class="headerlink" title="Curve25519 and Curve448 Algorithm Identifiers"></a>Curve25519 and Curve448 Algorithm Identifiers</h4><p>BC(Bouncy Castle)ì˜ <code>ECNamedCurveTable.getNames()</code>ì—ëŠ” ê¸°ë³¸ì ì¸ EC ê³¡ì„ ì´ í¬í•¨ë˜ì–´ìˆê³  <code>curve25519</code>ëŠ” CustomNamedCurvesì— í¬í•¨ë˜ì–´ ìˆì–´ Curve25519 ê³¡ì„ ì— ëŒ€í•œ X9ECParametersë¥¼ ì•„ë˜ì™€ ê°™ì´ ECParameterSpecìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">AlgorithmParameterSpec</span> <span class="token function">curve25519Spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// NOTE: Ed25519 not contains in ECNamedCurveTable.getNames()</span>
    <span class="token class-name">X9ECParameters</span> ecP <span class="token operator">=</span> <span class="token class-name">CustomNamedCurves</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"curve25519"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ECParameterSpec</span><span class="token punctuation">(</span>ecP<span class="token punctuation">.</span><span class="token function">getCurve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ecP<span class="token punctuation">.</span><span class="token function">getG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ecP<span class="token punctuation">.</span><span class="token function">getN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ecP<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ecP<span class="token punctuation">.</span><span class="token function">getSeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Ed25519-í‚¤-í˜ì–´-ìƒì„±"><a href="#Ed25519-í‚¤-í˜ì–´-ìƒì„±" class="headerlink" title="Ed25519 í‚¤ í˜ì–´ ìƒì„±"></a>Ed25519 í‚¤ í˜ì–´ ìƒì„±</h4><p><code>Ed25519KeyPairGenerator</code>ì™€ í•¨ê»˜ <code>ECKeyGenerationParameters</code>ë¥¼ ì‚¬ìš©í•˜ë©´ Ed25519 í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë° ì´ë¯¸ Ed25519KeyGenerationParametersë¥¼ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ êµ³ì´ ECParameterSpecë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤. ë§Œì•½, êµ³ì´ ECParameterSpecìœ¼ë¡œ ECKeyGenerationParametersë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ì‚¬ëŒë“¤ì„ ìœ„í•´ ì˜ˆì œ ì½”ë“œë¥¼ ì²¨ë¶€í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token class-name">TestKeyPairUsingEd25519Generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Ed25519KeyPairGenerator</span> keyPairGenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ed25519KeyPairGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    keyPairGenerator<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Ed25519KeyGenerationParameters</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">AsymmetricCipherKeyPair</span> keyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token class-name">TestKeyPairUsingECParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">ECParameterSpec</span> curve25519Spec <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ECParameterSpec</span><span class="token punctuation">)</span> <span class="token function">curve25519Spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ECDomainParameters</span> ecParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ECDomainParameters</span><span class="token punctuation">(</span>curve25519Spec<span class="token punctuation">.</span><span class="token function">getCurve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curve25519Spec<span class="token punctuation">.</span><span class="token function">getG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curve25519Spec<span class="token punctuation">.</span><span class="token function">getN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curve25519Spec<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ECKeyGenerationParameters</span> ecKeyGenerationParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ECKeyGenerationParameters</span><span class="token punctuation">(</span>ecParams<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Ed25519KeyPairGenerator</span> keyPairGenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ed25519KeyPairGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    keyPairGenerator<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>ecKeyGenerationParameters<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">AsymmetricCipherKeyPair</span> keyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Ed25519PrivateKeyParametersë¥¼-PrivateKeyë¡œ-ë³€í™˜"><a href="#Ed25519PrivateKeyParametersë¥¼-PrivateKeyë¡œ-ë³€í™˜" class="headerlink" title="Ed25519PrivateKeyParametersë¥¼ PrivateKeyë¡œ ë³€í™˜"></a>Ed25519PrivateKeyParametersë¥¼ PrivateKeyë¡œ ë³€í™˜</h4><p>í´ë¼ì´ì–¸íŠ¸ì˜ X.509 ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ” ê²½ìš° ì„œëª…ì„ ìœ„í•œ PrivateKeyê°€ í•„ìš”í•œë° ì§ì ‘ì ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ê°€ ì—†ìœ¼ë¯€ë¡œ <code>KeyFactorySpi.Ed25519</code>ì™€ <code>PrivateKeyInfoFactory</code>ë¥¼ ì‚¬ìš©í•´ì„œ Ed25519PrivateKeyParametersë¡œ ë˜ì–´ìˆëŠ” ë¹„ë°€í‚¤ë¥¼ PrivateKey í´ë˜ìŠ¤ë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// NOTE: AsymmetricCipherKeyPair keyPair</span>
<span class="token class-name">Ed25519PrivateKeyParameters</span> privateKeyP <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Ed25519PrivateKeyParameters</span><span class="token punctuation">)</span> keyPair<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">KeyFactorySpi<span class="token punctuation">.</span>Ed25519</span> keyFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyFactorySpi<span class="token punctuation">.</span>Ed25519</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrivateKey</span> privateKey <span class="token operator">=</span> keyFactory<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span><span class="token class-name">PrivateKeyInfoFactory</span><span class="token punctuation">.</span><span class="token function">createPrivateKeyInfo</span><span class="token punctuation">(</span>privateKeyP<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="ê³µê°œí‚¤ë¥¼-SubjectPublicKeyInfoFactoryë¡œ-ë³€í™˜"><a href="#ê³µê°œí‚¤ë¥¼-SubjectPublicKeyInfoFactoryë¡œ-ë³€í™˜" class="headerlink" title="ê³µê°œí‚¤ë¥¼ SubjectPublicKeyInfoFactoryë¡œ ë³€í™˜"></a>ê³µê°œí‚¤ë¥¼ SubjectPublicKeyInfoFactoryë¡œ ë³€í™˜</h4><p>Ed25519PublicKeyParametersë¡œ ë˜ì–´ìˆëŠ” ê³µê°œí‚¤ë¥¼ SubjectPublicKeyInfoë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì€ <code>SubjectPublicKeyInfoFactory</code> í´ë˜ìŠ¤ì—ì„œ ì œê³µí•˜ê³  ìˆë‹¤. ì•ì„œ ë¹„ë°€í‚¤ì²˜ëŸ¼ KeyFactorySpi.Ed25519ë¥¼ ì‚¬ìš©í•´ì„œ PublicKeyë¡œ ë³€í™˜í•  í•„ìš”ëŠ” ì—†ì„ ê²ƒ ê°™ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// NOTE: AsymmetricCipherKeyPair keyPair</span>
<span class="token class-name">Ed25519PublicKeyParameters</span> publicKeyP <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Ed25519PublicKeyParameters</span><span class="token punctuation">)</span> keyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubjectPublicKeyInfo</span> publicKeyInfo <span class="token operator">=</span> <span class="token class-name">SubjectPublicKeyInfoFactory</span><span class="token punctuation">.</span><span class="token function">createSubjectPublicKeyInfo</span><span class="token punctuation">(</span>publicKeyP<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="EdDSA-Signatures"><a href="#EdDSA-Signatures" class="headerlink" title="EdDSA Signatures"></a>EdDSA Signatures</h4><p>Curve25519ì™€ Curve448ë¥¼ ì‚¬ìš©í•œ EdDSAëŠ” ê°ê° <code>Ed25519</code>ì™€ <code>Ed448</code> ì´ë¼ëŠ” ì„œëª… ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í‘œí˜„í•œë‹¤. ì•ì„œ, PrivateKeyì™€ SubjectPublickKeyInfoë¡œ ë³€í™˜í•œ ìƒíƒœì´ë¯€ë¡œ X.509 ì¸ì¦ì„œë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì–´ë µì§€ ì•Šì„ ê²ƒì´ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">X500Name</span> issuer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X500Name</span><span class="token punctuation">(</span><span class="token string">"CN=Mambo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigInteger</span> serialNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ZonedDateTime</span> now <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> notBefore <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> notAfter <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">YEARS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ContentSigner</span> contentSigner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaContentSignerBuilder</span><span class="token punctuation">(</span><span class="token string">"Ed25519"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setProvider</span><span class="token punctuation">(</span><span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">X509CertificateHolder</span> certificateHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509v3CertificateBuilder</span><span class="token punctuation">(</span>issuer<span class="token punctuation">,</span> serialNumber<span class="token punctuation">,</span> notBefore<span class="token punctuation">,</span> notAfter<span class="token punctuation">,</span> issuer<span class="token punctuation">,</span> publicKeyInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>contentSigner<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">X509Certificate</span> certificate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JcaX509CertificateConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setProvider</span><span class="token punctuation">(</span><span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCertificate</span><span class="token punctuation">(</span>certificateHolder<span class="token punctuation">)</span><span class="token punctuation">;</span>

certificate<span class="token punctuation">.</span><span class="token function">checkValidity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="KeyPairGeneratorSpië¡œ-Ed25519-í‚¤-í˜ì–´-ìƒì„±"><a href="#KeyPairGeneratorSpië¡œ-Ed25519-í‚¤-í˜ì–´-ìƒì„±" class="headerlink" title="KeyPairGeneratorSpië¡œ Ed25519 í‚¤ í˜ì–´ ìƒì„±"></a>KeyPairGeneratorSpië¡œ Ed25519 í‚¤ í˜ì–´ ìƒì„±</h4><p>ì‚¬ì‹¤ì€ BCì—ì„œ KeyPairGeneratorSpië¥¼ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ <code>BCEdDSAPrivateKey</code>ì™€ <code>BCEdDSAPublicKey</code>ë¥¼ ê°€ì§€ëŠ” í‚¤ í˜ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">KeyPairGenerator</span> keyPairGenerator <span class="token operator">=</span> <span class="token class-name">KeyPairGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"Ed25519"</span><span class="token punctuation">,</span> <span class="token class-name">BouncyCastleProvider</span><span class="token punctuation">.</span><span class="token constant">PROVIDER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">KeyPair</span> keyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">generateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ë” ìì„¸í•œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/spring-boot-security/blob/main/src/test/java/com/example/demo/x509/EdDSATest.java">EdDSATest.java</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Ed25519</tag>
        <tag>RFC8410</tag>
      </tags>
  </entry>
  <entry>
    <title>Elastic Beanstalk S3 Authentication</title>
    <url>/elastic-beanstalk-s3-auth/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ Elastic Beanstalk êµ¬ì„± ì‹œ S3 í”„ë¼ì´ë¹— ì €ì¥ì†Œì—ì„œ íŒŒì¼ì„ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="../tls-offload">TLS ì˜¤í”„ë¡œë“œ</a>ì—ì„œ Nginx ì—ì„œ ì‚¬ìš©í•  SSL ì¸ì¦ì„œë¥¼ Beanstalk í™˜ê²½ êµ¬ì„± íŒŒì¼ì˜ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/customize-containers-ec2.html#linux-files">íŒŒì¼ í‚¤</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ë³´ì•ˆì„ ì¤‘ìš”ì‹œí•˜ëŠ” íšŒì‚¬ë¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œì™€ ê°œì¸í‚¤ë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë‹¨ê³„ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h2 id="Beanstalk-S3-Auth"><a href="#Beanstalk-S3-Auth" class="headerlink" title="Beanstalk S3 Auth"></a>Beanstalk S3 Auth</h2><p>Beanstalk í™•ì¥ êµ¬ì„± íŒŒì¼ì—ì„œ CloudFormationì˜ <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-authentication.html">AWS::CloudFormation::Authentication</a> ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ì§€ì •í•  ìˆ˜ ìˆê³  ì¸ì¦ì„ ìˆ˜í–‰í•˜ì—¬ S3 ì €ì¥ì†Œì— ë“±ë¡ë˜ì–´ìˆëŠ” ì¸ì¦ì„œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/https-storingprivatekeys.html">í”„ë¼ì´ë¹— í‚¤ë¥¼ Amazon S3ì— ì•ˆì „í•˜ê²Œ ì €ì¥</a>ì—ì„œ ì•Œë ¤ì£¼ëŠ” ëŒ€ë¡œ Beanstalk êµ¬ì„± ì‹œ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/ebextensions-functions.html#ebextensions-functions-getoptionsetting">Fn::GetOptionSetting</a> í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h3 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h3><p>ë¨¼ì €, <strong>AWS::CloudFormation::Authentication</strong> ë¦¬ì†ŒìŠ¤ë¡œ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ S3 ë²„í‚·ì— ë³´ì•ˆ ì •ì±…ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Beanstalkìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²½ìš° <strong>aws-elasticbeanstalk-ec2-role</strong>ì„ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ì¸ì¦ì„œ íŒŒì¼ì´ ì €ì¥ëœ S3 ë²„í‚·ì€ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ê°€ ì°¨ë‹¨ë˜ì–´ìˆìœ¼ë¯€ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ <a href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/add-bucket-policy.html">ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì •ì±…ì„ ì¶”ê°€</a>í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/elastic-beanstalk-s3-auth-01.png"></p>
<h3 id="Extend-Nginx"><a href="#Extend-Nginx" class="headerlink" title="Extend Nginx"></a>Extend Nginx</h3><p>ì´ì œ ì´ì „ì— ì‘ì„±í•˜ì˜€ë˜ SSL ì¸ì¦ì„œë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” êµ¬ì„± íŒŒì¼ì„ S3ì—ì„œ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•´ì•¼í•©ë‹ˆë‹¤. files í‚¤ì˜ <strong>content</strong> í•­ëª©ì„ ì œê±°í•˜ê³  ë‹¤ìŒì˜ í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<ul>
<li>source : S3 ì¸ì¦ì„œ ì˜¤ë¸Œì íŠ¸ URL</li>
<li>authentication : ì¸ì¦ ì†ì„± ì´ë¦„</li>
</ul>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>.ebextensions/nginx-cert.config</span></div><code class="language-yaml"><span class="token key atrule">Resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">AWSEBAutoScalingGroup</span><span class="token punctuation">:</span>
        <span class="token key atrule">Metadata</span><span class="token punctuation">:</span>
            <span class="token key atrule">AWS::CloudFormation::Authentication</span><span class="token punctuation">:</span>
                <span class="token key atrule">S3Auth</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> S3
                    <span class="token key atrule">buckets</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> mambo<span class="token punctuation">-</span>cert
                    <span class="token key atrule">roleName</span><span class="token punctuation">:</span>
                        <span class="token key atrule">Fn::GetOptionSetting</span><span class="token punctuation">:</span>
                            <span class="token key atrule">Namespace</span><span class="token punctuation">:</span> aws<span class="token punctuation">:</span>autoscaling<span class="token punctuation">:</span>launchconfiguration
                            <span class="token key atrule">OptionName</span><span class="token punctuation">:</span> IamInstanceProfile
                            <span class="token key atrule">DefaultValue</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>elasticbeanstalk<span class="token punctuation">-</span>ec2<span class="token punctuation">-</span>role
<span class="token key atrule">files</span><span class="token punctuation">:</span>
    <span class="token key atrule">"/etc/nginx/cert/server.crt"</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">source</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//mambo<span class="token punctuation">-</span>cert.s3.ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2.amazonaws.com/server.crt
        <span class="token key atrule">authentication</span><span class="token punctuation">:</span> S3Auth
    <span class="token key atrule">"/etc/nginx/cert/server.key"</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">source</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//mambo<span class="token punctuation">-</span>cert.s3.ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2.amazonaws.com/server.key
        <span class="token key atrule">authentication</span><span class="token punctuation">:</span> S3Auth
    <span class="token key atrule">"/etc/nginx/cert/server.ca-bundle"</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">source</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//mambo<span class="token punctuation">-</span>cert.s3.ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2.amazonaws.com/server<span class="token punctuation">-</span>ca<span class="token punctuation">-</span>bundle
        <span class="token key atrule">authentication</span><span class="token punctuation">:</span> S3Auth

<span class="token key atrule">commands</span><span class="token punctuation">:</span>
    <span class="token key atrule">00-chain-ca-bundle</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            cat server.crt server.ca-bundle > server-ca.pem
            chown nginx:nginx server-ca.pem
            chmod 400 server-ca.pem</span>
    <span class="token key atrule">99-remove-bak</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> rm <span class="token punctuation">-</span>f <span class="token important">*.bak</span></code></pre>

<h3 id="Beanstalk-Resources"><a href="#Beanstalk-Resources" class="headerlink" title="Beanstalk Resources"></a>Beanstalk Resources</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ë“¤ì€ CloudFormationìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë©° Elastic Beanstalk í™˜ê²½ë„ <strong>CloudFormation ìŠ¤íƒì„ êµ¬ì„±</strong>í•˜ì—¬ ë§Œë“¤ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>.ebextensions/nginx-cert.config</span></div><code class="language-yaml"><span class="token key atrule">Resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">AWSEBAutoScalingGroup</span><span class="token punctuation">:</span>
        <span class="token key atrule">Metadata</span><span class="token punctuation">:</span>
            <span class="token key atrule">AWS::CloudFormation::Authentication</span><span class="token punctuation">:</span>
                <span class="token key atrule">S3Auth</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> S3
                    <span class="token key atrule">buckets</span><span class="token punctuation">:</span>
                        <span class="token punctuation">-</span> mambo<span class="token punctuation">-</span>cert
                    <span class="token key atrule">roleName</span><span class="token punctuation">:</span>
                        <span class="token key atrule">Fn::GetOptionSetting</span><span class="token punctuation">:</span>
                            <span class="token key atrule">Namespace</span><span class="token punctuation">:</span> aws<span class="token punctuation">:</span>autoscaling<span class="token punctuation">:</span>launchconfiguration
                            <span class="token key atrule">OptionName</span><span class="token punctuation">:</span> IamInstanceProfile
                            <span class="token key atrule">DefaultValue</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>elasticbeanstalk<span class="token punctuation">-</span>ec2<span class="token punctuation">-</span>role</code></pre>

<p>ê·¸ë˜ì„œ êµ¬ì„± íŒŒì¼ì˜ ë¦¬ì†ŒìŠ¤ í‚¤ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì€ CloudFormation í…œí”Œë¦¿ì— ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” Beanstalk í™˜ê²½ ì‹œì‘ ì‹œ ë§Œë“¤ì–´ì§€ëŠ” CloudFormation ìŠ¤íƒì— ë¯¸ë¦¬ ì •ì˜ëœ ì›¹ ì„œë²„ í™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤ í•­ëª©ì¸ <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html">AWSEBAutoScalingGroup</a>ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ë¦¬ê³  AWSEBAutoScalingGroupì—ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html">LaunchConfiguration(AWS::AutoScaling::LaunchConfiguration)</a>ë¼ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì‹œì‘ êµ¬ì„±ì„ ì •ì˜í•˜ëŠ” í•­ëª©ì´ ìˆìœ¼ë©° ì‹œì‘ êµ¬ì„±ì— ì •ì˜ëœ ë‚´ìš© ì¤‘ì—ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html#cfn-as-launchconfig-iaminstanceprofile">IamInstanceProfile</a> ì†ì„±ì´ ìˆìŠµë‹ˆë‹¤. IamInstanceProfile ì†ì„±ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ë¡œ ì§€ì •ëœ <strong>IAM Role</strong>ì— ëŒ€í•œ ì´ë¦„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ, Beanstalk í™˜ê²½ êµ¬ì„± ì‹œ ì„ íƒí•œ IAM Roleì„ ê°€ì ¸ì™€ì„œ <strong>AWS::CloudFormation::Authentication</strong> ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•´ S3 ë²„í‚·ì— ëŒ€í•œ ìê²© ì¦ëª…ì„ ì§€ì •í•œ ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì•ì„œ aws-elasticbeanstalk-ec2-roleì´ë¼ëŠ” IAM Roleì´ ì¸ì¦ì„œê°€ ì €ì¥ëœ S3 ë²„í‚·ì— ì½ê¸° ê¶Œí•œì„ ë¶€ì—¬í–ˆê¸° ë•Œë¬¸ì— íŒŒì¼ í‚¤ì— ì •ì˜ëœ íŒŒì¼ì„ ìƒì„±í•  ë•Œ ì™¸ë¶€ ì†ŒìŠ¤(S3 ì €ì¥ì†Œ)ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œëœ ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•´ì„œ ìš°ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— ì¸ì¦ì„œë¥¼ í¬í•¨ì‹œí‚¤ì§€ ì•Šê³  EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” S3 ë²„í‚·ì— ì¸ì¦ì„œë¥¼ ì €ì¥í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì„±ì„ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì„ ë³´ì‹œëŠ” ë¶„ë“¤ì´ ì¸ì¦ì„œì˜ ê°œì¸í‚¤ì™€ ê°™ì€ ë¯¼ê°í•œ íŒŒì¼ë“¤ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì— í¬í•¨í•˜ê³  ìˆë‹¤ë©´ í”„ë¼ì´ë¹— S3 ì €ì¥ì†Œì— ì €ì¥í•˜ì—¬ ë” ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Beanstalk</tag>
        <tag>S3</tag>
      </tags>
  </entry>
  <entry>
    <title>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì¸ë±ìŠ¤</title>
    <url>/elasticsearch-indices/</url>
    <content><![CDATA[<p>í˜„ì¬ ì¡°ì§ì˜ ì£¼ìš” ì†”ë£¨ì…˜ì€ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 1.6ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©° ì—¬ëŸ¬ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì œê°€ ë‹´ë‹¹í•˜ì—¬ ê°œë°œì¤‘ì¸ ì‹ ê·œ ì‹œìŠ¤í…œì€ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©ì¤‘ì´ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì‹œê³„ì—´ ë°ì´í„°ì™€ ê°™ì€ ëŒ€ê·œëª¨ ë°ì´í„° ë° ì•ˆì „í•˜ê²Œ ìš´ìš©ë˜ì–´ì•¼í•˜ëŠ” ê°€ìš©ì„±ì´ ìš”êµ¬ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ì‹±ê¸€ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¡œ ìš´ìš©ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì • ì •ë³´ì— ëŒ€í•œ ë¡œê·¸ ë°ì´í„°ë¥¼ ê°œë³„ ë‹¨ì¼ ì¸ë±ìŠ¤ì— ì €ì¥í•˜ê³  ìˆìœ¼ë©° ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¡œë¶€í„° ì •í•´ì§„ ì¸ë±ìŠ¤ì— ì €ì¥ë˜ëŠ” ë„íë¨¼íŠ¸ë¥¼ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ì§€ì›í•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì¿¼ë¦¬ë¥¼ í™œìš©í•  ê²½í—˜ì€ ë§ì§€ ì•Šì€ ê²ƒì€ ì•„ì‰¬ìš´ ë¶€ë¶„ì´ê¸´ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ì‹œê³„ì—´ ë°ì´í„°ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ì•„ë‹Œ ë³„ë„ì˜ <a href="https://kx.com/developers/">ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤</a>ì— ì €ì¥í•˜ê³  í†µê³„ ì •ë³´ë¥¼ ì¿¼ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ì¸ë±ìŠ¤-ê´€ë ¨-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"><a href="#ì¸ë±ìŠ¤-ê´€ë ¨-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" class="headerlink" title="ì¸ë±ìŠ¤ ê´€ë ¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"></a>ì¸ë±ìŠ¤ ê´€ë ¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2><p>ëŒ€ê·œëª¨ ë…¸ë“œë¡œ êµ¬ì„±ëœ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ìš©í•˜ì§€ ì•Šë”ë¼ë„ ì¸ë±ìŠ¤ì™€ ê´€ë ¨ëœ ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œë“¤ì„ ê°„ê°„íˆ ê²½í—˜í•´ë³´ê¸´ í–ˆìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ê°€ ê³  ê°€ìš©ì„±ìœ¼ë¡œ ìš´ì˜ë˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¡œ ë´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
<h3 id="ë™ì -ë§¤í•‘-í•„ë“œ-ì œí•œ"><a href="#ë™ì -ë§¤í•‘-í•„ë“œ-ì œí•œ" class="headerlink" title="ë™ì  ë§¤í•‘ í•„ë“œ ì œí•œ"></a>ë™ì  ë§¤í•‘ í•„ë“œ ì œí•œ</h3><p>ì¡°ì§ì˜ ê¸°ì¡´ ì†”ë£¨ì…˜ì´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ë¥¼ ì£¼ìš” ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™œìš©í–ˆë”ë¼ë„ ì£¼ ê°œë°œìë“¤ì´ í˜„ì¬ ê°œë°œì¤‘ì¸ ì‹œìŠ¤í…œì— ì°¸ì—¬í•œ ê²ƒì€ ì•„ë‹ˆê³  ì €ëŠ” ì¡°ì§ì˜ ì‹ ì…ì¼ ë•Œ ì°¸ì—¬í–ˆìœ¼ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ëŒ€í•´ ëŒ€ëµì ì¸ ê°œë…ì¡°ì°¨ ëª¨ë¥´ë˜ ì‹œê¸°ì˜€ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì„¤ê³„ê°€ ëª…í™•í•˜ì§€ ì•Šì•˜ê¸°ì— ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-dynamic">ë™ì  í•„ë“œ ë§¤í•‘</a>ì„ í†µí•´ ê°œë°œìê°€ ë³„ë„ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë„íë¨¼íŠ¸ì— ëŒ€í•œ ê° í•„ë“œë“¤ì„ ìë™ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ìƒíƒœë¡œ ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ì¼ë¶€ ì •ë³´ì˜ ë³€í™”ë“¤ì„ ë¡œê·¸ë¡œ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>limit of total fields 1000 has been exceeded</p>
</blockquote>
<p>ìœ„ ë¬¸ì œëŠ” ë™ì  í•„ë“œ ë§¤í•‘ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì¸ë±ìŠ¤ì— ì—¬ëŸ¬ê°€ì§€ í•„ë“œê°€ ì €ì¥ë˜ì–´ì§ˆë•Œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤. ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì €ì¥ë˜ë„ë¡í•œ ë¡œê·¸ ì¤‘ì—ì„œ ë‹¤ì–‘í•˜ê²Œ í•„ë“œê°€ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ë©”íƒ€ë°ì´í„° ì˜¤ë¸Œì íŠ¸ê°€ í¬í•¨ë˜ì—ˆê³  ì ì  ë‹¤ì–‘í•œ í‚¤ ê°’ì´ ì¶”ê°€ë˜ë©´ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ëŠ” ë™ì  ë§¤í•‘ì— ì˜í•´ ë©”íƒ€ë°ì´í„° í‚¤ì— ëŒ€í•œ í•„ë“œ ë§¤í•‘ì„ ì¶”ê°€í•˜ì—¬ ë§¤í•‘ ì •ë³´ê°€ ì ì°¨ ëŠ˜ì–´ë‚˜ì„œ ì œí•œëŸ‰ê¹Œì§€ ë„˜ì–´ì„œê²Œ ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•œ ê²ƒ ì…ë‹ˆë‹¤.</p>
<p>ì´ ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ì„ì‹œì ìœ¼ë¡œ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#mapping-limit-settings">ì¸ë±ìŠ¤ì— ëŒ€í•´ í•„ë“œ ì œí•œ ìˆ˜ë¥¼ ì¡°ì •</a>í•˜ì—¬ ì¡°ì¹˜í•  ìˆ˜ ìˆìœ¼ë‚˜ ë©”íƒ€ë°ì´í„° ì˜¤ë¸Œì íŠ¸ê°€ ë‹¤ì–‘í•˜ê²Œ ì¶”ê°€ë˜ë©´ ë‹¤ì‹œ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê·¼ë³¸ì ì¸ í•´ê²°ì±…ì€ ì•„ë‹™ë‹ˆë‹¤. ê·¸ë˜ì„œ í•´ë‹¹ í˜„ìƒì´ ë°œê²¬ë˜ëŠ” ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œëŠ” ë™ì  ë§¤í•‘ì— ì˜í•´ ì¶”ê°€ëœ ë§¤í•‘ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬ ê³„ì†í•´ì„œ ë§¤í•‘ ì •ë³´ê°€ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆëŠ” í•„ë“œë¥¼ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/enabled.html">ë‹¨ìˆœíˆ ì €ì¥ë§Œí•˜ë„ë¡</a> ë§¤í•‘ ì •ë³´ë¥¼ ë¶€ì—¬í•˜ê³  ì¬ ì¸ë±ìŠ¤ë¥¼ ìˆ˜í–‰í•´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="ë„íë¨¼íŠ¸-ì‚­ì œ"><a href="#ë„íë¨¼íŠ¸-ì‚­ì œ" class="headerlink" title="ë„íë¨¼íŠ¸ ì‚­ì œ"></a>ë„íë¨¼íŠ¸ ì‚­ì œ</h3><p>ë‹¨ì¼ ë…¸ë“œì˜ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì´ë¯€ë¡œ ë‹¨ì¼ ì¸ë±ìŠ¤ì— ë„ˆë¬´ ë§ì€ ë„íë¨¼íŠ¸ê°€ ì €ì¥ë˜ë©´ ì„±ëŠ¥ì— ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¬ì§€ì–´ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 7ë¶€í„° ì¸ë±ìŠ¤ì— ëŒ€í•œ í”„ë¼ì´ë¨¸ë¦¬ ìƒ¤ë“œì˜ ê¸°ë³¸ê°’ì´ 1 ì´ì—ˆë˜ ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì¸ë±ìŠ¤ì˜ í•˜ë‚˜ì˜ ìƒ¤ë“œê°€ ë„ˆë¬´ ë§ì€ ë„íë¨¼íŠ¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” êµ¬ì¡°ê°€ ë˜ì–´ë²„ë ¸ìŠµë‹ˆë‹¤.</p>
<p>íŠ¹ì • ì¸ë±ìŠ¤ì— ì €ì¥ë˜ëŠ” ë„íë¨¼íŠ¸ê°€ ë„ˆë¬´ ë§ì•„ì¡Œê³  ì‹¬ì§€ì–´ëŠ” ì˜¤ë˜ëœ ë„íë¨¼íŠ¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë‚¨ì•„ìˆì—ˆê¸°ì— ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ ë„íë¨¼íŠ¸ëŠ” ì§€ìš°ë„ë¡ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html">_delete_by_query</a>ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤ì¼€ì¤„ì— ì˜í•´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì§€ìš°ë„ë¡ ìš”ì²­í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, <a href="https://ridicorp.com/story/index-aliases/">Elasticsearchì˜ ìƒ‰ì¸ ë³„ëª… í™œìš© íŒ</a>ì— ë‚˜ì™€ìˆëŠ” ê²ƒì²˜ëŸ¼ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ë„íë¨¼íŠ¸ë¥¼ ì‹¤ì œë¡œ ì‚­ì œí•˜ëŠ” ê²ƒì€ ì•„ë‹Œ ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì˜¤íˆë ¤ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì˜ ì¸ë±ìŠ¤ì˜ ìš©ëŸ‰ì´ ì¼ì‹œì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ê²Œ ë˜ëŠ” ë¬¸ì œë¥¼ ê°€ì ¸ê°€ê²Œ ë©ë‹ˆë‹¤. </p>
<blockquote>
<p>ë””ìŠ¤í¬ ë³¼ë¥¨ì„ ì¦ì„¤í•  ìˆ˜ ìˆë‹¤ê³  í•´ë„ ì„œë²„ ìš©ëŸ‰ì— ë¯¼ê°í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ì¼ìë³„-ì¸ë±ìŠ¤-ì¡°íšŒ"><a href="#ì¼ìë³„-ì¸ë±ìŠ¤-ì¡°íšŒ" class="headerlink" title="ì¼ìë³„ ì¸ë±ìŠ¤ ì¡°íšŒ"></a>ì¼ìë³„ ì¸ë±ìŠ¤ ì¡°íšŒ</h3><p>ë„íë¨¼íŠ¸ ì‚­ì œê°€ ìš©ì´í•˜ì§€ ì•Šì€ ë‹¨ì¼ ì¸ë±ìŠ¤ì˜ ë¬¸ì œë¥¼ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ íŠ¹ì • ë¡œê·¸ì— ëŒ€í•´ì„œëŠ” ì¼ìë³„ë¡œ ì €ì¥ë˜ë„ë¡ ì ìš©í•´ì•¼í–ˆìŠµë‹ˆë‹¤. ë‹¨ì¼ ì¸ë±ìŠ¤ë¡œ ì €ì¥í•˜ë˜ê±¸ ì¼ìë³„ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì€ ì¸ë±ìŠ¤ ëª…ì— ì €ì¥ë˜ëŠ” ì‹œì ì˜ ë‚ ì§œ í¬ë§·(yyyyMMdd)ì„ ì¶”ê°€í•˜ë©´ ë˜ê¸°ì— ì–´ë ¤ì›€ì€ ì—†ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì‘ì—…ì— ëŒ€í•´ ê²€í† í•˜ë˜ ì¤‘ ì¸ë±ìŠ¤ì— ëŒ€í•œ ì¡°íšŒ ê¸°ëŠ¥ì— ì¼ë¶€ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html">Search API</a>ì— ëŒ€í•´ì„œëŠ” ì¸ë±ìŠ¤ íŒ¨í„´ì— ëŒ€í•´ì„œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤ë§Œ, íŠ¹ì • ë„íë¨¼íŠ¸ì— ëŒ€í•œ ì•„ì´ë””ë¥¼ ê¸°ì¤€ìœ¼ë¡œ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html#docs-get-api-request">Get API</a>ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ë±ìŠ¤ ëª…ì„ ì•Œì•„ì•¼ë§Œ í•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ëŠ” ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-get.html">Mget API</a>ë„ ì¡°íšŒí•˜ê³ ì í•˜ëŠ” ì¸ë±ìŠ¤ë“¤ì˜ ì´ë¦„ì„ ë‚˜ì—´í•´ì•¼í–ˆê¸°ì— ì¸ë±ìŠ¤ íŒ¨í„´ì— ëŒ€í•´ ì¸ë±ìŠ¤ ëª©ë¡ì„ ì¡°íšŒí•˜ê³  ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ê±¸ì³ ë³‘ë ¬ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// NOTE: ì¸ë±ìŠ¤ íŒ¨í„´ì— ì˜í•œ ì‹¤ì œ ì¸ë±ìŠ¤ ëª©ë¡ ì¡°íšŒ</span>
<span class="token class-name">GetIndexRequest</span> getIndexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIndexRequest</span><span class="token punctuation">(</span><span class="token string">"oauth_log*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">GetIndexResponse</span> getIndexResponse <span class="token operator">=</span> highLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>getIndexRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indices <span class="token operator">=</span> getIndexResponse<span class="token punctuation">.</span><span class="token function">getIndices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// NOTE: ì—¬ëŸ¬ê°œì˜ ì¸ë±ìŠ¤ì— ê±¸ì³ ë³‘ë ¬ ì¡°íšŒ</span>
<span class="token class-name">MultiGetRequest</span> multiGetRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiGetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> index <span class="token operator">:</span> indices<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    multiGetRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">"c70e49fa-d0f4-4278-a271-a46f688349f6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token class-name">MultiGetResponse</span> multiGetResponse <span class="token operator">=</span> highLevelClient<span class="token punctuation">.</span><span class="token function">mget</span><span class="token punctuation">(</span>multiGetRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MultiGetItemResponse</span><span class="token punctuation">[</span><span class="token punctuation">]</span> responses <span class="token operator">=</span> multiGetResponse<span class="token punctuation">.</span><span class="token function">getResponses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultiGetItemResponse</span> response <span class="token operator">:</span> responses<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token function">isFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> index <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125; in &#123;&#125;, &#123;&#125;"</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> index<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<blockquote>
<p>ì¼ìë³„ ì¸ë±ìŠ¤ì— ìˆëŠ” ë„íë¨¼íŠ¸ì˜ ì•„ì´ë””ê°€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•  ë•Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>ìµœê·¼ ì¸ë±ìŠ¤ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•˜ê³  ìˆì–´ì„œ ì—¬íƒœê¹Œì§€ ê²½í—˜í–ˆë˜ ë¬¸ì œì— ëŒ€í•´ì„œ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì¸ë±ìŠ¤ ê´€ë¦¬ì™€ ê´€ë ¨í•´ì„œ ì‚¬ìš©ì¤‘ì´ë˜ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ë²„ì „ì„ 7.3.2ì—ì„œ 7.12.1ë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ê³  ìˆìœ¼ë©° ì´ì™€ ë”ë¶ˆì–´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì™€ í•¨ê»˜ í‚¤ë°”ë‚˜ë¥¼ í™œìš©í•´ì„œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì— ëŒ€í•´ì„œ ê³µë¶€í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì´ë©”ì¼ ë°œì†¡ ë„ë©”ì¸</title>
    <url>/email-spf-dkim-dmarc/</url>
    <content><![CDATA[<p>ì‹œìŠ¤í…œì„ ê°œë°œí•˜ëŠ” ë‹¨ê³„ì—ì„œëŠ” ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ ìœ„í•´ì„œ íšŒì‚¬ ë‚´ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¶„ê»˜ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ë¥¼ ëŒ€ì‹  ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìš”ì²­í•˜ê³  ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” SMTP ì„œë²„ì™€ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ í…ŒìŠ¤íŠ¸í•˜ê³¤ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‹¤ì œë¡œ ì‹œìŠ¤í…œì„ ìš´ìš©í•˜ëŠ” ì‹œì ì— ë“¤ì–´ì„œì íšŒì‚¬ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” ì „ì†¡ ê±´ë“¤ì´ ë§ì•„ì ¸ì„œ íšŒì‚¬ ì¸í”„ë¼ ë‹´ë‹¹ ì—”ì§€ë‹ˆì–´ë¶„ìœ¼ë¡œë¶€í„° <a href="https://aws.amazon.com/ko/ses/">Amazon SES</a>ë¡œ ë©”ì¼ ì„œë²„ë¥¼ ì „í™˜í•´ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë°›ê³  í™”ì‚¬ ì‚¬ë‚´ ë©”ì¼ ì„œë²„ ëŒ€ì‹ ì— í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì œê³µí•˜ëŠ” SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì‘ì—…ì„ í•˜ì˜€ìŠµë‹ˆë‹¤. </p>
<h2 id="Amazon-SES"><a href="#Amazon-SES" class="headerlink" title="Amazon SES"></a>Amazon SES</h2><p>ì €ëŠ” ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ëŠ” ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¸í”„ë¼ ì˜ì—­ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ì§€ì‹ì„ ì•Œì§€ëŠ” ëª»í•˜ëŠ”ë°ìš”. ê°œë°œìë¡œì¨ ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ë©´ <a href="/sending-mail-with-freemarker-template/">í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</a>ì™€ ê°™ì´ SMTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-01.png"></p>
<p>Amazon SESëŠ” SMTP ì—”ë“œí¬ì¸íŠ¸ì™€ STARTTLS&#x2F;TLS ì˜µì…˜ì— ë”°ë¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” í¬íŠ¸ì™€ SMTP ì¸ì¦ì„ ìœ„í•œ í¬ë ˆë´ì…œì„ ë°œê¸‰í•˜ê³  ì¸ì¦ë§Œ í•˜ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ í´ë¦­ë§Œìœ¼ë¡œë„ SMTP í¬ë ˆë´ì…œì„ ë°œê¸‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°œë°œìë¼ë©´ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ë©”ì¼ ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Amazon SESëŠ” ì¸ì¦ëœ ì´ë©”ì¼ ì£¼ì†Œë¡œ ë©”ì¼ì„ ë°œì†¡í•  ìˆ˜ ìˆê±°ë‚˜ ë„ë©”ì¸ì„ ì¸ì¦í•˜ì—¬ ì´ë©”ì¼ ë°œì†¡ì— ëŒ€í•œ ì‹ ì›ì„ ê²€ì¦í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆëŠ”ë°ìš”. ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ ì´ë©”ì¼ ìˆ˜ì‹ ì´ ê°€ëŠ¥í•œ ë°œì‹  ì´ë©”ì¼ì´ ì¡´ì¬í•œë‹¤ë©´ ê°„ë‹¨í•˜ê²Œ ë°œì‹  ì£¼ì†Œë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-02.png"></p>
<h3 id="ì´ë©”ì¼ì—-ëŒ€í•œ-ë°œì‹ -ì£¼ì†Œë¥¼-ì‹ ë¢°í• -ìˆ˜-ì—†ìŒ"><a href="#ì´ë©”ì¼ì—-ëŒ€í•œ-ë°œì‹ -ì£¼ì†Œë¥¼-ì‹ ë¢°í• -ìˆ˜-ì—†ìŒ" class="headerlink" title="ì´ë©”ì¼ì— ëŒ€í•œ ë°œì‹  ì£¼ì†Œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ"></a>ì´ë©”ì¼ì— ëŒ€í•œ ë°œì‹  ì£¼ì†Œë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ</h3><p>ê°„ë‹¨í•˜ê²Œ SMTP ë©”ì¼ ì„œë²„ë¥¼ ì „í™˜í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì–´ë ¤ìš´ ì‘ì—…ì€ ì•„ë‹ˆë¼ê³  ìƒê°í–ˆì—ˆëŠ”ë° ì ì‹œ í›„ ì˜ˆìƒí•˜ì§€ ëª»í–ˆë˜ ë¬¸ì œê°€ íŒŒì•…ë˜ì—ˆì–´ìš”. Amazon SESì˜ SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì „í™˜í•˜ê³ ë‚˜ì„œ ì‹œìŠ¤í…œì—ì„œ ë°œì†¡í•˜ëŠ” ì´ë©”ì¼ì„ ìˆ˜ì‹ ìê°€ ë°›ì•˜ì„ë•Œ ìŠ¤íŒ¸ ë©”ì¼í•¨ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆ <a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ses-email-flagged-as-spam/">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?</a>ì™€ ê°™ì€ ê°€ì´ë“œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. SMTP ì„œë²„ì— ì˜í•´ ì „ë‹¬ë˜ëŠ” ì´ë©”ì¼ì„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì€ Amazon SESê°€ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¶€ë¶„ê³¼ ë‹¤ìŒì˜ ìš”ì¸ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•ˆë‚´í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p><a href="https://docs.aws.amazon.com/ses/latest/dg/send-email-authentication-dkim.html">DomainKeys Identified Mail(DKIM)</a> ë˜ëŠ” <a href="https://docs.aws.amazon.com/ses/latest/dg/send-email-authentication-spf.html">Sender Policy Framework(SPF)</a>ì™€ ê°™ì€ ì´ë©”ì¼ ì¸ì¦ ë¶€ì¡±</p>
</blockquote>
<h3 id="ë°œì‹ -ë„ë©”ì¸-ê²€ì¦"><a href="#ë°œì‹ -ë„ë©”ì¸-ê²€ì¦" class="headerlink" title="ë°œì‹  ë„ë©”ì¸ ê²€ì¦"></a>ë°œì‹  ë„ë©”ì¸ ê²€ì¦</h3><p><a href="https://docs.aws.amazon.com/ses/latest/dg/configure-identities.html">Configuring identities in Amazon SES</a> ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ SMTP í”„ë¡œí† ì½œì€ ìì²´ì ìœ¼ë¡œ ì¸ì¦ ê¸°ëŠ¥ì´ ì—†ë‹¤ëŠ” ê²ƒê³¼ ì´ëŸ¬í•œ ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ ìŠ¤íŒ¨ë¨¸ê°€ ë°œì‹  ì£¼ì†Œë¥¼ ìœ„ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ SPF ë˜ëŠ” DKIMì™€ ê°™ì€ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ê³  ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ì œê» ë“£ë„ë³´ë„ ëª»í•œ ìƒˆë¡œìš´ ìš©ì–´ê°€ ë‚˜íƒ€ë‚˜ê²Œ ëœê±°ì£ . <a href="https://blog.cloudflare.com/ko-kr/tackling-email-spoofing-ko-kr/">ì´ë©”ì¼ ìŠ¤í‘¸í•‘ê³¼ í”¼ì‹±ì— ëŒ€ì²˜í•˜ê¸°</a>ì—ì„œ DNSì˜ ë„ë©”ì¸ ë ˆì½”ë“œë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í‘¸í•‘ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ë§¤ì»¤ë‹ˆì¦˜ì„ êµ¬ì„±í•œë‹¤ëŠ” ì ì„ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-03.png"></p>
<p>ìˆ˜ì‹ ëœ ì´ë©”ì¼ì´ ì˜¬ë°”ë¥¸ ê³³ìœ¼ë¡œë¶€í„° ë°œì†¡ëœ ê²ƒì¸ì§€ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ë©”ì¸ ê¸°ë°˜ìœ¼ë¡œ ì‹ ì›ì„ ê²€ì¦í•˜ê³  SPF, DKIM, DMARCì™€ ê°™ì€ DNS ë ˆì½”ë“œë¥¼ ë„ë©”ì¸ì— ì„¤ì •í•´ì•¼í–ˆìŠµë‹ˆë‹¤. ë‹¤í–‰íˆë„ Route53ìœ¼ë¡œ ë„ë©”ì¸ì„ ì‚¬ìš©ì¤‘ì´ê¸°ì— Amazon SESì—ì„œ ìë™ìœ¼ë¡œ DNS ë ˆì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/ses/latest/dg/send-email-authentication-dmarc.html">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ DMARC ì¤€ìˆ˜</a>ì— ë”°ë¼ ë„ë©”ì¸ ë ˆì½”ë“œì— DMARC ì •ì±…ì´ ì„¤ì •ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  Amazon SESê°€ ë„ë©”ì¸ì„ ê²€ì¦í•˜ê¸°ë¥¼ ê¸°ë‹¤ë ¸ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-04.png"></p>
<h3 id="ì´ë©”ì¼-ë³´ì•ˆ-DNS-ë ˆì½”ë“œ-ì§ˆì˜"><a href="#ì´ë©”ì¼-ë³´ì•ˆ-DNS-ë ˆì½”ë“œ-ì§ˆì˜" class="headerlink" title="ì´ë©”ì¼ ë³´ì•ˆ DNS ë ˆì½”ë“œ ì§ˆì˜"></a>ì´ë©”ì¼ ë³´ì•ˆ DNS ë ˆì½”ë“œ ì§ˆì˜</h3><p>DKIMìœ¼ë¡œ ë„ë©”ì¸ ê²€ì¦ì„ í•˜ì˜€ìŒì„ í™•ì¸í•˜ì˜€ê³  ì¶”ê°€ì ìœ¼ë¡œ digì™€ ê°™ì€ DNS ì§ˆì˜ ëª…ë ¹ì–´ ë„êµ¬ë¥¼ í†µí•´ì„œ DNS ë ˆì½”ë“œê°€ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># SPF ë ˆì½”ë“œ í™•ì¸</span>
<span class="token function">dig</span> TXT example.com +short
<span class="token string">"v=spf1 include:_spf.google.com ip4:xxx.xxx.xxx.xxx a:mail.example.com ~all"</span>
<span class="token comment"># DKIM ë ˆì½”ë“œ í™•ì¸</span>
<span class="token function">dig</span> TXT google._domainkey.example.com +short
<span class="token string">"v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoamWoQQ5zEdcFQnGaWN055oT3sEnCgN5bcAze5R6uvI1P"</span> <span class="token string">"X4d+CGbNDSVJqOmQPyrJdK2fOVG3hvjMkoilYcgWrGKDat2Nh29ftN5tTx5SVK/kl+5aPKRd9q6q9c9EWL7aRS2hqoGRyzW0Nb0ilKZc/"</span> <span class="token string">"odDbh3bgNhN6AJqIZwlE9BJgkYT5aT6TGJM/Vi4GJcYDEKm6yDexTJKzfZ8o8TCRDufCYDF8F+dKKyLvyaKrngfgIjRi5PiGVGbyNrIL7iMp1CkJ7ErpkYCJw5DeTQkXi8Gxt+Km61sIP2F8IZyd/"</span> <span class="token string">"WrEXJmk2pHzRfiJJqIiY4r3s4loR/sJ4hQPS6HEq7JQIDAQAB"</span>
<span class="token comment"># DMARC ë ˆì½”ë“œ í™•ì¸</span>
<span class="token function">dig</span> TXT _dmarc.example.com +short
<span class="token string">"v=DMARC1; p=quarantine; rua=mailto:postmaster@example.com; ruf=mailto:postmaster@example.com"</span></code></pre>

<h3 id="ë°œì‹ -ë„ë©”ì¸-ì‹ ë¢°-í™•ì¸"><a href="#ë°œì‹ -ë„ë©”ì¸-ì‹ ë¢°-í™•ì¸" class="headerlink" title="ë°œì‹  ë„ë©”ì¸ ì‹ ë¢° í™•ì¸"></a>ë°œì‹  ë„ë©”ì¸ ì‹ ë¢° í™•ì¸</h3><p>ë„ë©”ì¸ ê¸°ë°˜ì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì´ ì ìš©ë˜ê³ ë‚˜ì„œëŠ” ìˆ˜ì‹ ëœ ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ ë¶„ë¥˜ë˜ì§€ ì•Šê²Œ ë˜ì—ˆê³  ì›ë³¸ ë©”ì¼ ì •ë³´ë¥¼ í™•ì¸í•˜ë©´ SPF, DKIM, DMARCì— ëŒ€í•œ ê²€ì¦ì´ í†µê³¼ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/email-spf-dkim-dmarc/ses-05.png"></p>
<blockquote>
<p>ì›ë³¸ ë©”ì¼ì„ í™•ì¸í•˜ëŠ” ê²ƒì€ ì„œë²„ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ë¶„ì´ ì•Œë ¤ì£¼ì…¨ì–´ìš”! ğŸ˜</p>
</blockquote>
<p>SMTP ì„œë²„ë¥¼ Amazon SESë¡œ ì „í™˜í•˜ëŠ” ê²½í—˜ì„ í†µí•´ì„œ ì´ë©”ì¼ì´ ì •ìƒì ì¸ ê³³ìœ¼ë¡œë¶€í„° ë°œì‹ ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œ ë„ë©”ì¸ ë ˆì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•œë‹¤ëŠ” ì§€ì‹ì„ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ì‹ ëœ ì´ë©”ì¼ì„ ê²€ì¦í•˜ëŠ” ê³¼ì •ì„ ë” ìì„¸í•˜ê²Œ ì•Œê³  ì‹¶ë‹¤ë©´ <a href="https://www.learndmarc.com/">ì´ë©”ì¼ì˜ SPF&#x2F;DKIM&#x2F;DMARCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì¸í„°ë™í‹°ë¸Œí•˜ê²Œ ë³´ê¸°</a>ë¥¼ ì´ìš©í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. </p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/ses-email-flagged-as-spam/">Amazon SESë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?</a></li>
<li><a href="https://blog.cloudflare.com/ko-kr/tackling-email-spoofing-ko-kr/">ì´ë©”ì¼ ìŠ¤í‘¸í•‘ê³¼ í”¼ì‹±ì— ëŒ€ì²˜í•˜ê¸°</a></li>
<li><a href="https://www.learndmarc.com/">ì´ë©”ì¼ì˜ SPF&#x2F;DKIM&#x2F;DMARCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì¸í„°ë™í‹°ë¸Œí•˜ê²Œ ë³´ê¸°</a></li>
</ul>
]]></content>
      <tags>
        <tag>SPF</tag>
        <tag>DKIM</tag>
        <tag>DMARC</tag>
      </tags>
  </entry>
  <entry>
    <title>Float32MLE (Byte Order)</title>
    <url>/float32mle/</url>
    <content><![CDATA[<blockquote>
<p><a href="http://www.tcpschool.com/c/c_refer_endian">ë°”ì´íŠ¸ ìˆœì„œ(Byte Order)</a>ëŠ” ì˜¤ë˜ ì „ ì»´í“¨í„°ê³µí•™ê³¼ì—ì„œ ë°°ì› ë˜ ê°œë…ì´ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” ì‹¤ì œë¡œ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ì—ˆë‹¤.</p>
</blockquote>
<p>ì»´í“¨í„°ì—ì„œ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•  ë•Œì˜ ë°”ì´íŠ¸ ìˆœì„œëŠ” ë¹… ì—”ë””ì•ˆê³¼ ë¦¬í‹€ ì—”ë””ë°© ì‹ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ”ë° ì´ê²ƒì€ CPU ì•„í‚¤í…ì²˜ì— ë”°ë¼ ë‚˜ëˆ„ì–´ì§„ë‹¤ê³  í•œë‹¤. TCP ë„¤íŠ¸ì›Œí¬ ìŠ¤í™ ìƒì—ëŠ” íŒ¨í‚·ì˜ ë°”ì´íŠ¸ ìˆœì„œëŠ” ë¹… ì—”ë””ì•ˆìœ¼ë¡œ êµ¬ì„±ë˜ë©° ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìì£¼ í™œìš©ë˜ëŠ” ì–¸ì–´ì¸ ìë°”ë„ ì´ë¥¼ ê°ì•ˆí•˜ì—¬ ë¹… ì—”ë””ì•ˆì„ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. CPU ì•„í‚¤í…ì²˜ì™€ ë‹¤ë¥´ê²Œ ë¹… ì—”ë””ì•ˆìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì´ìœ ëŠ” JVM ì´ë¼ëŠ” ë³„ë„ì˜ ìŠ¤íƒì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ë™ë˜ê¸° ë•Œë¬¸ì´ë¼ê³  í•œë‹¤. ê·¸ëŸ¬ë‚˜, SCADA ë˜ëŠ” PLC ì¥ë¹„ì™€ ê°™ì€ ì¼ë¶€ ì‹œìŠ¤í…œì—ì„œëŠ” ë¹… ì—”ë””ì•ˆ ë°©ì‹ì´ ì•„ë‹Œ ë¦¬í‹€ ì—”ë””ì•ˆ ë˜ëŠ” ë¯¸ë“œ ë¦¬í‹€ ì—”ë””ì•ˆìœ¼ë¡œ ë°”ì´íŠ¸ ìˆœì„œë¥¼ êµ¬ì„±í•˜ê³  ìˆëŠ”ë° ì´ëŸ¬í•œ ì‹œìŠ¤í…œì€ C ì–¸ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.</p>
<blockquote>
<p>ì¼ë°˜ì ì¸ ìë°” ì›¹ ê°œë°œìë“¤ì´ ë°”ì´íŠ¸ ìˆœì„œë¥¼ ê³ ë ¤í•˜ì—¬ ë¹„íŠ¸ ì—°ì‚° ë˜ëŠ” ì‹œí”„íŠ¸ ì—°ì‚°ì„ ìˆ˜í–‰í•  ê²½ìš°ëŠ” ë§ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤.</p>
</blockquote>
<h4 id="Mid-Little-Endian-MLE"><a href="#Mid-Little-Endian-MLE" class="headerlink" title="Mid Little Endian, MLE"></a>Mid Little Endian, MLE</h4><p>ë¹… ì—”ë””ì•ˆì™€ ë¦¬í‹€ ì—”ë””ì•ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë°”ì´íŠ¸ ìˆœì„œë¥¼ ìŠ¤ì™‘í•˜ëŠ” ë¯¸ë“œ ë¦¬í‹€ ì—”ë””ì•ˆì€ <code>AB CD</code>ì˜ ë°”ì´íŠ¸ ìˆœì„œê°€ ìˆì„ë•Œ <code>CD AB</code>ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. 32ë¹„íŠ¸ë¡œ êµ¬ì„±ë˜ëŠ” Float í˜•ì‹ì„ ë¯¸ë“œ ë¦¬í‹€ ì—”ë””ì•ˆ ë°©ì‹ìœ¼ë¡œ êµ¬ì„±í•œ ê²ƒì„ <code>Float32MLE</code> ì´ë¼ê³  í‘œê¸°í•  ìˆ˜ ìˆë‹¤.</p>
<p><a href="https://baseconvert.com/ieee-754-floating-point">Base Convert: IEEE 754 Floating Point</a></p>
<h4 id="Float32MLE-Example"><a href="#Float32MLE-Example" class="headerlink" title="Float32MLE Example"></a>Float32MLE Example</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Endian Test"</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">EndianTest</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Float32 Mid Little Endian"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token class-name">TestFloat32MLE</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> hexadecimal <span class="token operator">=</span> <span class="token string">"00004260"</span><span class="token punctuation">;</span> <span class="token comment">// 00 00 42 60</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token class-name">HexFormat</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseHex</span><span class="token punctuation">(</span>hexadecimal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> originValue <span class="token operator">=</span> <span class="token class-name">PooledByteBufAllocator</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>bytes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bytes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// CD (42 60)</span>
                <span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>bytes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bytes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// AB (00 00)</span>
                <span class="token punctuation">.</span><span class="token function">readFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> value <span class="token operator">=</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>originValue<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">RoundingMode</span><span class="token punctuation">.</span><span class="token constant">HALF_UP</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">floatValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">56.0f</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<p>Nettyì˜ ByteBuf í´ë˜ìŠ¤ì—ì„œëŠ” ë¹… ì—”ë””ì•ˆ ë°©ì‹ì˜ <code>readFloat</code> í•¨ìˆ˜ì™€ ë¦¬í‹€ ì—”ë””ì•ˆ ë°©ì‹ì˜ <code>readFloatLE</code> í•¨ìˆ˜ë¥¼ ì œê³µí•˜ê³  ìˆë‹¤. ê·¸ëŸ¬ë‚˜, ë¯¸ë“œ ë¦¬í‹€ ì—”ë””ì•ˆ ë°©ì‹ì˜ ê²½ìš°ì—ëŠ” ë³„ë„ë¡œ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ„ì™€ ê°™ì´ ë²„í¼ì— <code>CD AB</code> ìˆœìœ¼ë¡œ ì“°ê³ ë‚˜ì„œ ë¹… ì—”ë””ì•ˆ ë°©ì‹ìœ¼ë¡œ ì½ì–´ì•¼í•œë‹¤.</p>
]]></content>
      <tags>
        <tag>Float32</tag>
        <tag>IEEE 754</tag>
        <tag>Byte Order</tag>
      </tags>
  </entry>
  <entry>
    <title>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿</title>
    <url>/freemarker-template/</url>
    <content><![CDATA[<p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì˜ˆì œë¥¼ ì‚´í´ë³´ë©´ ëŒ€ë¶€ë¶„ í…œí”Œë¦¿ ì—”ì§„ìœ¼ë¡œ íƒ€ì„ë¦¬í”„ë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤. ëŒ€ë¶€ë¶„ íƒ€ì„ë¦¬í”„ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ë¯€ë¡œ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ì— ëŒ€í•´ì„œ ì •ë¦¬í•œ ê¸€ì€ ìƒê°ë³´ë‹¤ ë§ì§€ ì•Šë‹¤. ë‚˜ëŠ” íƒ€ì„ë¦¬í”„ë¼ëŠ” í…œí”Œë¦¿ ì—”ì§„ ë³´ë‹¤ëŠ” í”„ë¦¬ë§ˆì»¤ì˜ ë¬¸ë²•ì´ ë” ê°„ë‹¨í•˜ê³  ëŠë¼ê¸°ì— ë” ì„ í˜¸í•˜ëŠ” í¸ì´ë‹¤. <a href="https://github.com/jreijn/spring-comparing-template-engines">ì—¬ëŸ¬ê°€ì§€ í…œí”Œë¦¿ ì—”ì§„ê³¼ ë¹„êµ</a>í•´ì„œë„ ì¤€ìˆ˜í•œ ë Œë”ë§ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤.</p>
<pre class="language-gradle" data-language="gradle"><code class="language-gradle"><span class="token keyword">dependencies</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">implementation</span> <span class="token string">'org.springframework.boot:spring-boot-starter-freemarker'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="FreeMarkerAutoConfiguration"><a href="#FreeMarkerAutoConfiguration" class="headerlink" title="FreeMarkerAutoConfiguration"></a>FreeMarkerAutoConfiguration</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ì€ FreeMarkerAutoConfigurationë¡œ ì‹œì‘ë˜ë©° FreeMarkerServletWebConfigurationì—ì„œ ë·° ë¦¬ì¡¸ë²„ê°€ ë“±ë¡ë˜ë©° FreeMarkerNonWebConfigurationìœ¼ë¡œ FreeMarkerConfigurationFactoryBeanê°€ ë“±ë¡ë˜ì–´ ì´ë©”ì¼ ë‚´ìš© ì²˜ë¦¬ì™€ ê°™ì€ ì›¹ ìš”ì²­ê³¼ ê´€ë ¨ë˜ì§€ ì•Šì€ ê³³ì—ì„œë„ í…œí”Œë¦¿ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì§€ì›í•œë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” SpringTemplateLoaderë¡œ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¡´ì¬í•˜ëŠ” í…œí”Œë¦¿ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ë©° í”„ë¦¬ë§ˆì»¤ì—ì„œëŠ” StringTemplateLoaderë¥¼ í†µí•´ ë¬¸ìì—´ë¡œ ì •ì˜ëœ í…œí”Œë¦¿ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤.</p>
<h4 id="Internationalization"><a href="#Internationalization" class="headerlink" title="Internationalization"></a>Internationalization</h4><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ì„ ì‚¬ìš©í•´ì„œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-webmvc/src/main/resources/org/springframework/web/servlet/view/freemarker/spring.ftl">spring.ftl</a>ë¼ëŠ” ë§¤í¬ë¡œê°€ í¬í•¨ëœ í…œí”Œë¦¿ íŒŒì¼ì„ ì œê³µí•˜ê³  ìˆìœ¼ë©° ì•„ë˜ì™€ ê°™ì´ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ì—ì„œ ìŠ¤í”„ë§ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ íŒŒì¼ì— ì§ì ‘ ëª…ì‹œí•˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹°ë¡œ auto_import ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ ì¶”ê°€í•  ìˆ˜ë„ ìˆë‹¤.</p>
<pre class="language-ftl" data-language="ftl"><div class="caption"><span>index.ftlh</span></div><code class="language-ftl"><span class="token ftl language-ftl"><span class="token ftl-directive"><span class="token punctuation">&lt;</span><span class="token directive keyword">#import</span><span class="token content ftl"> <span class="token string">"/spring.ftl"</span> <span class="token keyword">as</span> spring</span><span class="token punctuation">/></span></span></span>
<span class="token ftl language-ftl"><span class="token ftl-directive"><span class="token punctuation">&lt;</span><span class="token directive keyword">@spring</span><span class="token content ftl"><span class="token punctuation">.</span>message <span class="token string">"messageKey"</span></span><span class="token punctuation">/></span></span></span></code></pre>

<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">freemarker</span><span class="token punctuation">:</span>
    <span class="token key atrule">settings</span><span class="token punctuation">:</span>
      <span class="token key atrule">auto_import</span><span class="token punctuation">:</span> spring.ftl as spring</code></pre>

<blockquote>
<p>ë‹¤ë§Œ, ìœ„ spring.ftl íŒŒì¼ì— ì •ì˜ëœ ë©”ì‹œì§€ ì²˜ë¦¬ëŠ” ì›¹ ìš”ì²­ì— ì˜í•œ ìŠ¤ë ˆë“œ ë‚´ì—ì„œë§Œ ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë©”ì¼ ë‚´ìš© ì²˜ë¦¬ì™€ ê°™ì´ ì›¹ ìš”ì²­ì´ ì•„ë‹Œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì—ì„œ ì‚¬ìš©í•  ìˆœ ì—†ë‹¤.</p>
</blockquote>
<h4 id="ë°±ê·¸ë¼ìš´ë“œ-ì‘ì—…-ì‹œ-ë‹¤êµ­ì–´-ë©”ì‹œì§€-ì²˜ë¦¬"><a href="#ë°±ê·¸ë¼ìš´ë“œ-ì‘ì—…-ì‹œ-ë‹¤êµ­ì–´-ë©”ì‹œì§€-ì²˜ë¦¬" class="headerlink" title="ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì‹œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì²˜ë¦¬"></a>ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì‹œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì²˜ë¦¬</h4><p>ì‚¬ìš©ìì˜ ì›¹ ìš”ì²­ì— ì˜í•œ í…œí”Œë¦¿ ì²˜ë¦¬ê°€ ì•„ë‹Œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì—ì„œ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ì„ ëª¨ë¸ë¡œ ë©”ì‹œì§€ ë³´ê°„ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” <strong>ResourceBundleModel</strong>ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë‹¤ìŒì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ìë™ êµ¬ì„±ì— ì˜í•´ ë“±ë¡ë˜ëŠ” FreeMarkerConfigurationFactoryBeanê³¼ ResourceBundleModelì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•œ ì˜ˆì‹œì´ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">ROOT</span><span class="token punctuation">;</span>

<span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> configurationFactoryBean<span class="token punctuation">.</span><span class="token function">createConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">StringTemplateLoader</span> stringTemplateLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringTemplateLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringTemplateLoader<span class="token punctuation">.</span><span class="token function">putTemplate</span><span class="token punctuation">(</span><span class="token string">"template"</span><span class="token punctuation">,</span> <span class="token string">"$&#123;bundle(\"application.name\")&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span><span class="token function">setTemplateLoader</span><span class="token punctuation">(</span>stringTemplateLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Template</span> template <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token string">"template"</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ResourceBundle</span> resourceBundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"bundle"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleModel</span><span class="token punctuation">(</span>resourceBundle<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeansWrapperBuilder</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_INCOMPATIBLE_IMPROVEMENTS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token class-name">FreeMarkerTemplateUtils</span><span class="token punctuation">.</span><span class="token function">processTemplateIntoString</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="í…œí”Œë¦¿-ì²´ì´ë‹"><a href="#í…œí”Œë¦¿-ì²´ì´ë‹" class="headerlink" title="í…œí”Œë¦¿ ì²´ì´ë‹"></a>í…œí”Œë¦¿ ì²´ì´ë‹</h4><p>í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì§€ì›í•˜ëŠ” <a href="https://freemarker.apache.org/docs/api/freemarker/cache/MultiTemplateLoader.html">MultiTemplateLoader</a>ë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ê°€ì§€ ë°©ì‹ì˜ <a href="https://freemarker.apache.org/docs/pgui_config_templateloading.html">í…œí”Œë¦¿ ë¡œë”©</a>ì„ í†µí•´ í…œí”Œë¦¿ ë¡œë”ì— ì˜í•´ ë¡œë“œë˜ëŠ” í…œí”Œë¦¿ì„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, MultiTemplateLoaderì— ì „ë‹¬ë˜ëŠ” í…œí”Œë¦¿ ë¡œë”ì˜ ìˆœì„œì— ë”°ë¼ SpringTemplateLoaderë¡œ ê¸°ë³¸ í…œí”Œë¦¿ ë ˆì´ì•„ì›ƒì„ ë§Œë“¤ê³  ì‹¤ì œ í…œí”Œë¦¿ ë‚´ìš©ì€ StringTemplateLoaderë¡œ ì¬ì •ì˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">StringTemplateLoader</span> stringTemplateLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringTemplateLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringTemplateLoader<span class="token punctuation">.</span><span class="token function">putTemplate</span><span class="token punctuation">(</span><span class="token string">"email.ftlh"</span><span class="token punctuation">,</span> <span class="token string">"$&#123;bundle(\"application.name\")&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringTemplateLoader<span class="token punctuation">.</span><span class="token function">putTemplate</span><span class="token punctuation">(</span><span class="token string">"template"</span><span class="token punctuation">,</span> <span class="token string">"&lt;#include \"email.ftlh\" >"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> configurationFactoryBean<span class="token punctuation">.</span><span class="token function">createConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SpringTemplateLoader</span> springTemplateLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringTemplateLoader</span><span class="token punctuation">(</span>resourceLoader<span class="token punctuation">,</span> <span class="token string">"classpath:/templates/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MultiTemplateLoader</span> multiTemplateLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiTemplateLoader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TemplateLoader</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>stringTemplateLoader<span class="token punctuation">,</span> springTemplateLoader<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span><span class="token function">setTemplateLoader</span><span class="token punctuation">(</span>multiTemplateLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Template</span> template <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token string">"template"</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<blockquote>
<p>MultiTemplateLoaderì˜ ìƒì„±ìì— ì „ë‹¬ë˜ëŠ” í…œí”Œë¦¿ ë¡œë”ì˜ ìˆœì„œëŒ€ë¡œ í…œí”Œë¦¿ì„ ì°¾ë„ë¡ ìœ„ì„í•œë‹¤ëŠ” ê²ƒì— ì£¼ì˜í•´ì•¼í•œë‹¤.</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>ê¹ƒí—ˆë¸Œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ ìƒíƒœ ê²€ì‚¬</title>
    <url>/github-pr-status-checks/</url>
    <content><![CDATA[<p>í˜„ì¬ íšŒì‚¬ì—ì„œ ìƒˆí•´ ëª©í‘œëŠ” ë¹ ë¥¸ ì—…ë¬´ ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œ ê°„ë‹¨í•œ ë°©ì‹ì„ ì·¨í•¨ì— ë”°ë¼ì„œ ì§€ì†ì ì¸ ì„±ì¥ì„ ì´ë£¨ì–´ëƒˆìœ¼ë‚˜ ì œí’ˆì— ëŒ€í•œ ì‹ ë¢°ì„±ì˜ ë¬¸ì œë¥¼ ê²½í—˜í•˜ê³ ë‚˜ì„œëŠ” ì œí’ˆ í’ˆì§ˆì„ ê°•í™”í•˜ê¸° ìœ„í•œ ì½”ë“œ í’ˆì§ˆ ë˜ëŠ” í…ŒìŠ¤íŠ¸ ìë™í™”ì— ëŒ€í•œ í™˜ê²½ êµ¬ì¶•ì˜ í•„ìš”ì„±ì„ ëŠë¼ê³  ë§ì€ ê²ƒë“¤ì„ ì‹œë„í•˜ê³  ìˆë‹¤. ê¹ƒí—ˆë¸Œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆì—ˆìœ¼ë‚˜ ì½”ë“œ ë¦¬ë·°ê°€ ì£¼ìš” í…Œí¬ ê¸°ì—…ì´ë‚˜ ìŠ¤íƒ€íŠ¸ì—…ì²˜ëŸ¼ ê°œë°œ ë¬¸í™”ë¡œ ì •ì°©ë˜ì–´ìˆì§€ ì•ŠìŒìœ¼ë¡œ ì¸í•´ì„œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë„ë¡ ìš”êµ¬í•œë‹¤ê±°ë‚˜ ì •ì  ë¶„ì„ ë„êµ¬ë¥¼ í†µí•´ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•´ì„œ ë¶„ì„í•˜ê³  ë¦¬íŒ©í† ë§ì„ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì´ ì—†ë‹¤ë³´ë‹ˆ ê°œë°œìë“¤ì´ ìŠ¤ìŠ¤ë¡œ í¸í•œ ë°©ì‹ì„ ì‚¬ìš©í•´ì„œ ì‘ì—… ìš”ê±´ì— ëŒ€í•´ì„œ ì²˜ë¦¬í•´ì™”ë‹¤.</p>
<p>í˜ì–´ í”„ë¡œê·¸ë˜ë°ì„ ì„ í˜¸í•˜ëŠ” ì‹œë‹ˆì–´ ê°œë°œìë„ ê¹ƒí—ˆë¸Œ ì½”ë“œë¦¬ë·°ì— ëŒ€í•´ì„œëŠ” ìŠµê´€í™” ë˜ì–´ìˆì§€ ì•Šì•˜ê¸°ì— ë¹„ë¡ ë¸Œëœì¹˜ ë³´í˜¸ ê¸°ëŠ¥ì„ í†µí•´ ë¦¬ë·°ì–´ ìŠ¹ì¸ì„ ë°›ë„ë¡ ê°•ì œí•˜ë”ë¼ë„ ìƒì„¸í•˜ê²Œ ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ê²€í† í•˜ì§€ ì•Šê³  ìŠ¹ì¸ë§Œ í•´ë²„ë¦¬ëŠ” ìƒí™©ì´ ë°œìƒí–ˆì—ˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¸Œëœì¹˜ ë³´í˜¸ ê¸°ëŠ¥ìœ¼ë¡œ ë¶ˆí¸í•¨ì„ ê°•ì œí•¨ìœ¼ë¡œì¨ ì‘ì—…ì— ëŒ€í•´ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ì—…í•˜ê³  í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ëª¨ë“  ê°œë°œìë“¤ì´ ìµìˆ™í•´ì¡Œë‹¤ê³  ìƒê°ì´ ë“ ë‹¤. ì•„ë¬´íŠ¼ ê¹ƒí—ˆë¸Œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ í™œìš©í•¨ì—ë„ ì œëŒ€ë¡œ ëœ ì½”ë“œ ë¦¬ë·° ë¬¸í™”ê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— ìµœì†Œí•œ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•´ì„œ ê°œë°œìë“¤ì´ ì¸ì§€í•  ìˆ˜ ìˆë„ë¡ ê¹ƒí—ˆë¸Œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ ì‹œ ìƒíƒœ ê²€ì‚¬ë¥¼ í†µí•´ ë¦¬ë·° ì´ì™¸ì—ë„ ìƒíƒœ ê²€ì‚¬ê°€ í†µê³¼ë˜ì–´ì•¼ë§Œ ì›í•˜ëŠ” ë¸Œëœì¹˜ì— ë¨¸ì§€í•  ìˆ˜ ìˆë„ë¡ ê°•ì œí•˜ê³ ì í•œë‹¤. </p>
<blockquote>
<p>í’€ ë¦¬í€˜ìŠ¤íŠ¸ì— ëŒ€í•´ ì œëŒ€ë¡œ ë¦¬ë·°í•´ì•¼í•œë‹¤ê³  ë§í–ˆìœ¼ë‚˜ ë‹¹ì¥ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ë¶ˆí¸í•¨ì´ ìˆìœ¼ë¯€ë¡œ ë°›ì•„ë“¤ì—¬ì§€ì§€ ì•Šì•˜ë‹¤.</p>
</blockquote>
<p>ë°ë¸Œì˜µìŠ¤ì— ì´ì–´ GitOpsê°€ ë– ì˜¤ë¥´ë˜ ì‹œê¸°ì— í™•ì¸í–ˆë˜ ê²ƒì€ í’€ ë¦¬í€˜ìŠ¤íŠ¸ì— ëŒ€í•´ ìƒíƒœ ì²´í¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. ì‹¤ì œë¡œ ë‹¤ìŒê³¼ ê°™ì´ ëŒ€ë¶€ë¶„ì˜ ì˜¤í”ˆì†ŒìŠ¤ì—ì„œëŠ” í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¡œ ë³€ê²½ë˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œ ìƒíƒœ ì²´í¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ í†µí•´ ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬ì„±í•´ë†“ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<p><img data-src="/images/posts/github-pr-status-check/01.png"></p>
<p>í’€ ë¦¬í€˜ìŠ¤íŠ¸ ì‹œ ì½”ë“œ ìƒíƒœ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì´ì ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œ? í˜„ì¬ ì¡°ì§ì˜ ê¸°ì¤€ì—ì„œëŠ” ì œëŒ€ë¡œ ëœ ì½”ë“œ ë¦¬ë·° ë¬¸í™”ê°€ ê°–ì¶”ì–´ì ¸ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ì¸ ì½”ë“œ í’ˆì§ˆì— ëŒ€í•´ì„œëŠ” Checkstyle ë˜ëŠ” ESLintë¥¼ ìˆ˜í–‰í•˜ì—¬ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ìë™ìœ¼ë¡œ ì»¨ë²¤ì…˜ì„ ë§ì¶”ë„ë¡ ê°•ì œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ìˆë‹¤. ìì‹ ë§Œì˜ ì½”ë”© ì»¨ë²¤ì…˜ì´ ê°–ì¶”ì–´ì§€ì§€ ì•Šì€ ì‹ ì… ê°œë°œìë“¤ì—ê²ŒëŠ” ì‹œë‹ˆì–´ ê°œë°œìë“¤ì´ ë¦¬ë·°í•˜ì§€ ì•Šë”ë¼ë„ ì»¨ë²¤ì…˜ì— ëŒ€í•œ ì¤‘ìš”ì„±ì„ ì¸ì§€ì‹œí‚¤ê³  ê°€ì´ë“œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<h4 id="ê¹ƒí—ˆë¸Œ-ì•¡ì…˜"><a href="#ê¹ƒí—ˆë¸Œ-ì•¡ì…˜" class="headerlink" title="ê¹ƒí—ˆë¸Œ ì•¡ì…˜"></a>ê¹ƒí—ˆë¸Œ ì•¡ì…˜</h4><p>í’€ ë¦¬í€˜ìŠ¤íŠ¸ ì‹œ ìƒíƒœ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ í†µí•´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ë§ì€ ê°œë°œìë“¤ì´ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ì•¡ì…˜ë“¤ ì¤‘ì—ì„œ ìƒíƒœ ê²€ì‚¬ë¥¼ ìœ„í•´ <a href="https://github.com/reviewdog/reviewdog">reviewdog</a>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì•„ë˜ì˜ ë‘ê°€ì§€ ì›Œí¬í”Œë¡œìš°ë¥¼ ì ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ë‹¤. ì¡°ì§ ë‚´ì—ì„œ ê²°ì •í•œ ìë°” ì½”ë”© ì»¨ë²¤ì…˜ì´ ì—†ì–´ë„ ê¸°ë³¸ì ì¸ êµ¬ê¸€ ìë°” ìŠ¤íƒ€ì¼ì„ í†µí•´ì„œ ìƒíƒœ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©° í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì— ëŒ€í•´ì„œë„ ESLintë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ë˜ì–´ìˆìœ¼ë¯€ë¡œ ìœ„ ë‘ê°€ì§€ ì›Œí¬í”Œë¡œìš°ë§Œ ìˆ˜í–‰í•˜ë”ë¼ë„ ì¶©ë¶„íˆ ì½”ë“œ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¤ê³  ìœ ì§€í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°ëœë‹¤.</p>
<ul>
<li><a href="https://github.com/marketplace/actions/run-java-checkstyle">Run java checkstyle</a></li>
<li><a href="https://github.com/marketplace/actions/run-eslint-with-reviewdog">Run eslint with reviewdog</a></li>
</ul>
<blockquote>
<p>ê¹ƒí—ˆë¸Œ ì•¡ì…˜ ì›Œí¬í”Œë¡œìš° íŒŒì¼ : <a href="https://github.com/kdevkr/mambo-box/blob/main/.github/workflows/pr-checks.yml">.github&#x2F;workflows&#x2F;pr-checks.xml</a></p>
</blockquote>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> PR Checks

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>
  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'**.java'</span>
      <span class="token punctuation">-</span> <span class="token string">'**.js'</span>
      <span class="token punctuation">-</span> <span class="token string">'**.vue'</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">checks</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Checks
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest <span class="token comment"># ubuntu-22.04</span>

    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">java</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span>
        <span class="token key atrule">node</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span>

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> dorny/paths<span class="token punctuation">-</span>filter@v2
        <span class="token key atrule">id</span><span class="token punctuation">:</span> changes
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            java:
              - '**.java'
            vuejs:
              - '**.vue'
              - '**.js'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token comment">###########################################</span>
      <span class="token comment">## Java Checkstyle</span>
      <span class="token comment">###########################################</span>
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.java == 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up JDK $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> matrix.Java <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>java@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">distribution</span><span class="token punctuation">:</span> corretto
          <span class="token key atrule">java-version</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> matrix.java <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token string">'gradle'</span>
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.java == 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Run checkstyle
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> nikitasavinov/checkstyle<span class="token punctuation">-</span>action@master
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> secrets.GITHUB_TOKEN <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
          <span class="token key atrule">reporter</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>pr<span class="token punctuation">-</span>check
          <span class="token key atrule">tool_name</span><span class="token punctuation">:</span> <span class="token string">'checkstyle'</span>
          <span class="token key atrule">checkstyle_version</span><span class="token punctuation">:</span> <span class="token number">10.3</span>
          <span class="token key atrule">checkstyle_config</span><span class="token punctuation">:</span> checkstyle.xml

      <span class="token comment">###########################################</span>
      <span class="token comment">## Node ESLint</span>
      <span class="token comment">###########################################</span>
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.vuejs == 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node.js $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> matrix.node <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> matrix.node <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token string">'npm'</span>
          <span class="token key atrule">cache-dependency-path</span><span class="token punctuation">:</span> npm<span class="token punctuation">-</span>shrinkwrap.json
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.vuejs == 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache Dependencies
        <span class="token key atrule">id</span><span class="token punctuation">:</span> npm<span class="token punctuation">-</span>cache
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">'**/node_modules'</span>
          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> runner.os <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">-</span>node<span class="token punctuation">-</span>$<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> hashFiles('<span class="token important">**/npm-shrinkwrap.json')</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            $&#123;&#123; runner.os &#125;&#125;-node-</span>
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.vuejs == 'true' <span class="token important">&amp;&amp;</span> steps.npm<span class="token punctuation">-</span>cache.outputs.cache<span class="token punctuation">-</span>hit <span class="token tag">!=</span> 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci
      <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> steps.changes.outputs.vuejs == 'true'
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Run eslint
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> reviewdog/action<span class="token punctuation">-</span>eslint@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">reporter</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>pr<span class="token punctuation">-</span>check
          <span class="token key atrule">eslint_flags</span><span class="token punctuation">:</span> <span class="token string">'--ext .js,.vue ./src/main/resources/static/js'</span></code></pre>

<p>ì²˜ìŒì—ëŠ” ê°„ë‹¨í•˜ê²Œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  ì»¤ë°‹ì´ í‘¸ì‹œë˜ì—ˆì„ë•Œ <strong>ì²´í¬ìŠ¤íƒ€ì¼</strong>ê³¼ <strong>ESLint</strong>ê°€ ë™ì‘í•˜ë„ë¡ ì‘ì„±í•˜ì˜€ìœ¼ë‚˜ ë°±ì—”ë“œ ì‘ì—…ì‹œì—ë„ ë¶ˆí•„ìš”í•˜ê²Œ ESLintë¥¼ ìˆ˜í–‰í•˜ê³  í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—…ì‹œì—ë„ ë¶ˆí•„ìš”í•˜ê²Œ ìë°” íŒŒì¼ì— ëŒ€í•œ ì²´í¬ìŠ¤íƒ€ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ë¹„íš¨ìœ¨ì ì¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬ì¡°ì˜€ë‹¤. ì¶”ê°€ì ì¸ ê°œì„ ì„ í†µí•´ í’€ ë¦¬í€˜ìŠ¤íŠ¸ ì‹œ <a href="https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions#onpushpull_requestpull_request_targetpathspaths-ignore">paths</a> ë¬¸ë²•ì„ í™œìš©í•´ì„œ .java, .js, .vue íŒŒì¼ì— ëŒ€í•œ ë³€ê²½ì‚¬í•­ì´ ìˆì„ë•Œë§Œ ìƒíƒœ ê²€ì‚¬ì— ëŒ€í•œ ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ë³€ê²½í–ˆìœ¼ë©° <a href="https://github.com/dorny/paths-filter">dorny&#x2F;paths-filter</a>ë¥¼ í†µí•´ì„œ ìë°” íŒŒì¼ì— ëŒ€í•œ ë³€ê²½ì‚¬í•­ì´ ìˆë‹¤ë©´ ì²´í¬ìŠ¤íƒ€ì¼ì„ ìˆ˜í–‰í•˜ê³  í”„ë¡ íŠ¸ íŒŒì¼ì— ëŒ€í•œ ë³€ê²½ì‚¬í•­ì´ ìˆë‹¤ë©´ ESLintê°€ ê°œë³„ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>
<blockquote>
<p>êµ¬ê¸€ ì²´í¬ìŠ¤íƒ€ì¼ì€ íšŒì‚¬ ì½”ë“œì— ì í•©í•˜ì§€ ì•Šë‹¤ê³  íŒë‹¨ë˜ì–´ ê°€ì¥ ê°„ë‹¨í•œ ê·œì¹™ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì»¤ìŠ¤í„°ë§ˆì´ì§• ëœ ì²´í¬ìŠ¤íƒ€ì¼ íŒŒì¼ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>Gmail SMTP</title>
    <url>/gmail-smtp/</url>
    <content><![CDATA[<p>ì˜¤ë˜ì „ì— <a href="/sending-mail-with-freemarker-template/">í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡í•˜ê¸°</a>ë¼ëŠ” ì£¼ì œë¡œ êµ¬ê¸€ SMTP ì„œë²„ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ê²ƒì„ ë‹¤ë£¨ì–´ ë³´ì•˜ì—ˆëŠ”ë°ìš”. êµ¬ê¸€ì˜ ë³´ì•ˆ ì •ì±…ì˜ ë³€ê²½ì— ë”°ë¼ì„œ <a href="https://support.google.com/accounts/answer/6010255">2022ë…„ 5ì›” 30</a>ì¼ë¶€í„°ëŠ” ë³´ì•ˆ ìˆ˜ì¤€ì´ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ê°€ í™œì„±ëœ ê³„ì •ìœ¼ë¡œëŠ” SMTP ì„œë²„ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ êµ¬ê¸€ SMTP ì„œë²„ë¥¼ ë”ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²ƒì¼ê¹Œìš”?</p>
<h2 id="Gmail-SMTP"><a href="#Gmail-SMTP" class="headerlink" title="Gmail SMTP"></a>Gmail SMTP</h2><p>ë³´ì•ˆ ìˆ˜ì¤€ì´ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ë¥¼ í™œì„±í™”í•œ ê³„ì •ì—ì„œëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì„œ Gmail SMTPì™€ ê°™ì€ ì„œë“œ íŒŒí‹° ì•±ì— ì¸ì¦í•  ìˆ˜ ìˆì—ˆì§€ë§Œ ì´ì œëŠ” ì‚¬ìš©ìì˜ ê³„ì •ì„ ë” ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì„œ ì„œë“œ íŒŒí‹° ì•±ê³¼ ê¸°ê¸°ì— ë¡œê·¸ì¸ ìš”ì²­í•˜ëŠ” ê²ƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ì œëŠ” Gmail SMTP ì„œë²„ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë³´ì•ˆ ìˆ˜ì¤€ì´ ë†’ì€ Gmail ê³„ì •ì„ ë§Œë“¤ê³ ë‚˜ì„œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¸ì¦ì„ ìš”ì²­í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<h3 id="2ë‹¨ê³„-ì¸ì¦-í™œì„±í™”"><a href="#2ë‹¨ê³„-ì¸ì¦-í™œì„±í™”" class="headerlink" title="2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”"></a>2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”</h3><p>ë³´ì•ˆ ìˆ˜ì¤€ì´ ë†’ì€ Gmail ê³„ì •ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € 2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™”í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤. êµ¬ê¸€ ê³„ì • ê´€ë¦¬ &gt; ë³´ì•ˆ ë©”ë‰´ì— ë“¤ì–´ê°€ë©´ ì•„ë˜ì™€ ê°™ì´ 2ë‹¨ê³„ ì¸ì¦ì„ ì‚¬ìš©ì¤‘ì¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/gmail-smtp/02.png"></p>
<p>ìœ„ì™€ ê°™ì´ 2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™” í•˜ì§€ ì•Šì•˜ë‹¤ë©´ 2ë‹¨ê³„ ì¸ì¦ì„ í´ë¦­í•´ì„œ ì•ˆë‚´ì— ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì¸ì¦ì„ ì™„ë£Œí•˜ê³  2ë‹¨ê³„ ì¸ì¦ì„ í™œì„±í™”í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/gmail-smtp/03.png" alt="êµ¬ê¸€ ê³„ì •ì— ì…ë ¥ëœ ì „í™”ë²ˆí˜¸ë¡œ ì¸ì¦"></p>
<p><img data-src="/images/posts/gmail-smtp/04.png" alt="ì „í™” ë˜ëŠ” ë¬¸ìë©”ì‹œì§€ë¡œ ë°›ì€ ì¸ì¦ë²ˆí˜¸ ì…ë ¥ í›„ ì¸ì¦ ì™„ë£Œ"></p>
<p><img data-src="/images/posts/gmail-smtp/05.png" alt="2ë‹¨ê³„ ì¸ì¦ í™œì„±í™” ì™„ë£Œ"></p>
<h3 id="ì•±-ë¹„ë°€ë²ˆí˜¸-ì¶”ê°€"><a href="#ì•±-ë¹„ë°€ë²ˆí˜¸-ì¶”ê°€" class="headerlink" title="ì•± ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€"></a>ì•± ë¹„ë°€ë²ˆí˜¸ ì¶”ê°€</h3><p>2ë‹¨ê³„ ì¸ì¦ì´ í™œì„±í™” ë˜ê³ ë‚˜ì„œ ì•± ë¹„ë°€ë²ˆí˜¸ë¼ëŠ” ë¶€ë¶„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¶”ê°€í•˜ë©´ Gmail SMTPì™€ ê°™ì€ 2ë‹¨ê³„ ì¸ì¦ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì•±ì—ì„œë„ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë‹¤ê³  ì•Œë ¤ì£¼ëŠ”ë°ìš”. ì•ì„œ ë§í•œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ ë°©ì‹ì´ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¸ì¦í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/gmail-smtp/06.png"></p>
<p><img data-src="/images/posts/gmail-smtp/07.png"></p>
<p>ì´ì œ ë°œê¸‰ëœ 16ìë¦¬ì˜ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì˜ ë³µì‚¬í•´ë‘ê³  Gmail SMTP ì¸ì¦ì— ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h3 id="ì´ë©”ì¼-ë°œì†¡"><a href="#ì´ë©”ì¼-ë°œì†¡" class="headerlink" title="ì´ë©”ì¼ ë°œì†¡"></a>ì´ë©”ì¼ ë°œì†¡</h3><p><a href="https://github.com/kdevkr/spring-demo-freemarker/tree/main/src/main/resources/config">Gmail SMTPë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì •ë³´</a>ëŠ” ë‹¬ë¼ì§€ì§€ ì•Šìœ¼ë©° ìš°ë¦¬ê°€ ìˆ˜ì •í•´ì•¼í•  ë¶€ë¶„ì€ êµ¬ê¸€ ì´ë©”ì¼ ê³„ì •ì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ ëŒ€ì‹ ì— ì•ì„œ ë°œê¸‰í•œ 16ìë¦¬ì˜ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/gmail-smtp/08.png"></p>
<p>ë”ì´ìƒ ë³´ì•ˆ ìˆ˜ì¤€ ë‚®ì€ ì•±ì˜ ì•¡ì„¸ìŠ¤ í™œì„±í™” ì—†ì´ë„ Gmail SMTP ì„œë²„ë¥¼ ì´ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Gmail</tag>
        <tag>SMTP</tag>
      </tags>
  </entry>
  <entry>
    <title>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</title>
    <url>/gradle-build-lifecycle/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ ê·¸ë˜ë“¤ ë¹Œë“œì˜ ë¼ì´í”„ì‚¬ì´í´ì…ë‹ˆë‹¤. </p>
<p>ì–¼ë§ˆì „ì— ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ì–‘í•œ ë°°í¬ í™˜ê²½ì— ëŒ€í•œ ê¸°ëŠ¥ì„ ë³„ë„ë¡œ ì§€ì›í•´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•˜ì—¬ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ë¡œ ì „í™˜í•˜ê²Œ ë˜ë©´ì„œ ë°°í¬ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ì—ˆëŠ”ë°ìš”. ê·¸ ë¬¸ì œëŠ” í¬ë¦¬í‹°ì»¬í•œ ì´ìŠˆëŠ” ì•„ë‹ˆì§€ë§Œ íƒœìŠ¤í¬ ìˆ˜í–‰ í›„ ë§Œë“¤ì–´ì§„ ì••ì¶• íŒŒì¼ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•ŠëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ ëŠ” ê·¸ë˜ë“¤ íƒœìŠ¤í¬ë¥¼ ì •ì˜í•  ë•Œ <strong>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</strong>ì„ ê³ ë ¤í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<h2 id="ê·¸ë˜ë“¤-íƒœìŠ¤í¬"><a href="#ê·¸ë˜ë“¤-íƒœìŠ¤í¬" class="headerlink" title="ê·¸ë˜ë“¤ íƒœìŠ¤í¬"></a>ê·¸ë˜ë“¤ íƒœìŠ¤í¬</h2><p>ë¨¼ì € ê¸°ì¡´ì— ì •ì˜ëœ íƒœìŠ¤í¬ëŠ” <a href="https://github.com/kdevkr/beanstalk-deploy-sample/blob/main/build.gradle">beanstalk-deploy-sampleì˜ build.gradleì— ì •ì˜ëœ zipBeanstalk íƒœìŠ¤í¬</a>ì™€ ê°™ì´ Zip ìœ í˜•ì˜ íƒœìŠ¤í¬ë¡œ ì‘ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">task <span class="token function">zipBeanstalk</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'procfile'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'.ebextensions'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.ebextensions'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'.platform'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.platform'</span> <span class="token punctuation">&#125;</span>

    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        println bootWar<span class="token punctuation">.</span>archiveName
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ìƒ˜í”Œ íƒœìŠ¤í¬ì²˜ëŸ¼ ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œ ì •ì˜ëœ íƒœìŠ¤í¬ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ì ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë°°í¬ë¥¼ ìœ„í•´ì„œ ì—¬ëŸ¬ê°€ì§€ íƒœìŠ¤í¬ë¥¼ ì •ì˜í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì¸ë°ìš”. ê·¸ëŸ¬ë©´ ìœ„ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ ì–´ë–¤ ê²°ê³¼ë¥¼ ì œê³µí•˜ëŠ”ì§€ í•œë²ˆ í™•ì¸í•´ë³¼ê¹Œìš”?</p>
<h3 id="íƒœìŠ¤í¬-ê²°ê³¼"><a href="#íƒœìŠ¤í¬-ê²°ê³¼" class="headerlink" title="íƒœìŠ¤í¬ ê²°ê³¼"></a>íƒœìŠ¤í¬ ê²°ê³¼</h3><p>í”„ë¡œì íŠ¸ í´ë”ì— ìˆëŠ” Gradle Wrapperë¥¼ ì‚¬ìš©í•˜ì—¬ zipBeanstalk íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ì„œ í”„ë¡œì íŠ¸ ë²„ì „ì„ ëª…ì‹œí•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">./gradlew clean zipBeanstalk <span class="token parameter variable">-x</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-Pversion</span><span class="token operator">=</span><span class="token number">1.0</span>.0-hotfix.11</code></pre>

<p><img data-src="/images/posts/gradle-build-lifecycle/gradle-01.png"></p>
<p>íŒ¨í‚¤ì§•ëœ WAR íŒŒì¼ê³¼ zipBeanstalk íƒœìŠ¤í¬ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” ì•„ì¹´ì´ë¸Œ íŒŒì¼ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ìˆ˜ë™-ë°°í¬-í™˜ê²½ì„-ìœ„í•œ-íƒœìŠ¤í¬"><a href="#ìˆ˜ë™-ë°°í¬-í™˜ê²½ì„-ìœ„í•œ-íƒœìŠ¤í¬" class="headerlink" title="ìˆ˜ë™ ë°°í¬ í™˜ê²½ì„ ìœ„í•œ íƒœìŠ¤í¬"></a>ìˆ˜ë™ ë°°í¬ í™˜ê²½ì„ ìœ„í•œ íƒœìŠ¤í¬</h3><p>ì‚¬ì‹¤ zipBeanstalk íƒœìŠ¤í¬ëŠ” ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¹ˆìŠ¤í†¡ í™˜ê²½ìœ¼ë¡œ ë°°í¬í•˜ê¸° ìœ„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²ˆë“¤ íŒŒì¼ì„ ë§Œë“œëŠ” íƒœìŠ¤í¬ì…ë‹ˆë‹¤. ë§Œì•½, ìˆ˜ë™ìœ¼ë¡œ ë°°í¬í•˜ì—¬ì•¼í•˜ëŠ” í™˜ê²½ì´ ì¶”ê°€ëœë‹¤ë©´ ë¹ˆìŠ¤í†¡ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” Procfileê³¼ í™˜ê²½ êµ¬ì„± íŒŒì¼ë“¤ì€ í¬í•¨í•  í•„ìš”ê°€ ì—†ìœ¼ë©° íŠ¹ì • í™˜ê²½ì„ ìœ„í•œ í”„ë¡œí¼í‹° íŒŒì¼ë§Œ ë³„ë„ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">task <span class="token function">zipManually</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'bootWar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    println <span class="token string">'Build Version: '</span> <span class="token operator">+</span> project<span class="token punctuation">.</span>version

    from <span class="token punctuation">(</span><span class="token string">'.conf'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'application-prod.yml'</span><span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    baseName <span class="token operator">=</span> <span class="token string">'app-bundle'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>zipManually íƒœìŠ¤í¬ì—ëŠ” application-prod.ymlì„ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ê³¼ í•¨ê»˜ í¬í•¨ì‹œí‚¤ë„ë¡ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ì•„ì‹œëŠ” ë¶„ë“¤ë„ ìˆê² ì§€ë§Œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ <strong>WAR íŒŒì¼ê³¼ ë™ì¼í•œ ìœ„ì¹˜ì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼</strong>ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½, ëª¨ë¥´ì‹œëŠ” ë¶„ë“¤ì´ë¼ë©´ í”„ë¡œí¼í‹° êµ¬ì„± ìš°ì„  ìˆœìœ„ì— ëŒ€í•œ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ë™ì¼í•˜ê²Œ zipManually íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">./gradlew clean zipManually <span class="token parameter variable">-x</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-Pversion</span><span class="token operator">=</span><span class="token number">1.0</span>.0-hotfix.11

<span class="token operator">></span> Configure project <span class="token builtin class-name">:</span>
JDK info: <span class="token number">11</span>
Build Version: <span class="token number">1.0</span>.0-hotfix.11
Build Version: <span class="token number">1.0</span>.0-hotfix.11

<span class="token operator">></span> Task :bootBuildInfo
<span class="token operator">></span> Task :compileJava UP-TO-DATE
<span class="token operator">></span> Task :processResources UP-TO-DATE
<span class="token operator">></span> Task :classes
<span class="token operator">></span> Task :bootWarMainClassName
<span class="token operator">></span> Task :bootWar
<span class="token operator">></span> Task :procfile
<span class="token operator">></span> Task :zipManually</code></pre>

<p><img data-src="/images/posts/gradle-build-lifecycle/gradle-02.png"></p>
<p>zipManually íƒœìŠ¤í¬ ê²°ê³¼ëŠ” ì •ìƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤ë§Œâ€¦ ì´ìƒí•œ ë¶€ë¶„ì„ ëˆˆì¹˜ì±„ì‹ ë¶„ë“¤ì´ ìˆìœ¼ì‹œê² ì£ ? <strong>ë°”ë¡œ Build Versionì´ ë‘ë²ˆ ì¶œë ¥ë˜ì—ˆë‹¤ëŠ” ì </strong>ì¸ë°ìš”. ìš°ë¦¬ëŠ” ë¶„ëª…íˆ ë³„ë„ì˜ íƒœìŠ¤í¬ë¡œ ì •ì˜í•˜ê³  íƒœìŠ¤í¬ ë¸”ë¡ ë‚´ì—ì„œ í˜„ì¬ Build Versionì„ ì¶œë ¥í•˜ë„ë¡ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ Build Version ë²„ì „ì´ ë‘ë²ˆ ì¶œë ¥ë˜ëŠ” ì´ìœ ëŠ” ì´ ê¸€ì˜ ì£¼ìš” ë‚´ìš©ì¸ ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•œ ê°œë…ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ê·¸ë˜ë“¤-ë¹Œë“œ-ë¼ì´í”„ì‚¬ì´í´"><a href="#ê·¸ë˜ë“¤-ë¹Œë“œ-ë¼ì´í”„ì‚¬ì´í´" class="headerlink" title="ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´"></a>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´</h2><p>ì‚¬ì‹¤ ìƒ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê²½í—˜í•˜ëŠ” ì´ìœ ëŠ” ê·¸ë˜ë“¤ì˜ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ì— ëŒ€í•œ ê°œë…ì„ ëª¨ë¥´ê¸° ë•Œë¬¸ì¸ë°ìš”. 20ë…„ì°¨ì´ì‹  íŒ€ì¥ë‹˜ ì¡°ì°¨ë„ ì˜ ëª¨ë¥´ëŠ” ë¶€ë¶„ì´ì—ˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ ì¡´ì¬ë¥¼ ëª¨ë¥´ëŠ” ìƒí™©ì´ì—ˆê¸°ì— ì´ë ‡ê²Œ ë˜ëŠ” ì´ìœ ë¥¼ ê²€ìƒ‰í•˜ê³  íŒ€ì¥ë‹˜ê»˜ì„œ <a href="https://stackoverflow.com/a/23485085">Gradle executes all tasks?</a>ì´ë¼ëŠ” ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ì§ˆë¬¸ì„ ê³µìœ í•´ì£¼ì…¨ìŠµë‹ˆë‹¤.</p>
<p>ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì—ì„œëŠ” ê·¸ë˜ë“¤ì—ëŠ” configuration ë‹¨ê³„ì™€ execution ë‹¨ê³„ê°€ ìˆê³  ì´ê²ƒì€ ì¤‘ìš”í•œ ê°œë…ì´ë¼ê³  ì„¤ëª…í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê·¸ë˜ë“¤ ê³µì‹ ë¬¸ì„œì— ìˆëŠ” <a href="https://docs.gradle.org/current/userguide/build_lifecycle.html">Build Lifecycle</a>ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Gradle builds the complete dependency graph before any task is executed.<br>â€¦ Your build scripts configure this dependency graph.</p>
</blockquote>
<p>ê·¸ë˜ë“¤ì€ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì— ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ ë¹Œë“œí•˜ê³  ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ êµ¬ì„±í•œë‹¤ê³  ì„¤ëª…í•˜ë©° ë¹Œë“œ ë‹¨ê³„ì— ëŒ€í•´ì„œ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<h3 id="ë¹Œë“œ-ë‹¨ê³„"><a href="#ë¹Œë“œ-ë‹¨ê³„" class="headerlink" title="ë¹Œë“œ ë‹¨ê³„"></a>ë¹Œë“œ ë‹¨ê³„</h3><p>ê·¸ë˜ë“¤ì˜ ë¹Œë“œ ë‹¨ê³„ëŠ” 3ê°€ì§€ë¡œ êµ¬ë¶„ëœë‹¤ê³  í•˜ë©° ì´ˆê¸°í™”(Initialization), êµ¬ì„±(Configuration), ìˆ˜í–‰(Execution)ì…ë‹ˆë‹¤. </p>
<blockquote>
<p><strong>Initialization</strong><br>Gradle supports single and multi-project builds. During the initialization phase, Gradle determines which projects are going to take part in the build, and creates a Project instance for each of these projects.</p>
<p><strong>Configuration</strong><br>During this phase the project objects are configured. The build scripts of all projects which are part of the build are executed.</p>
<p><strong>Execution</strong><br>Gradle determines the subset of the tasks, created and configured during the configuration phase, to be executed. The subset is determined by the task name arguments passed to the gradle command and the current directory. Gradle then executes each of the selected tasks.</p>
</blockquote>
<p>ì„¸ê°€ì§€ì˜ ë‹¨ê³„ ì¤‘ êµ¬ì„± ë‹¨ê³„ì—ì„œëŠ” ëª¨ë“  í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì„¤ëª…ì´ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì´ ì œê°€ ê²½í—˜í•œ ë¬¸ì œì˜ ì›ì¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ”ë° íƒœìŠ¤í¬ ë‚´ì—ì„œ ì‘ì„±í•˜ëŠ” ì½”ë“œëŠ” êµ¬ì„± ë‹¨ê³„ì— í¬í•¨ë˜ë©° doFirstì™€ doLast ë¸”ë¡ì´ ìˆ˜í–‰ ë‹¨ê³„ì— í¬í•¨ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<p>ì €ë„ ëª¨ë¥´ëŠ” ë¶€ë¶„ì´ì—ˆê³  ìƒê°ë³´ë‹¤ ë§ì€ ë¸”ë¡œê·¸ì—ì„œëŠ” ê·¸ë˜ë“¤ íƒœìŠ¤í¬ ì •ì˜ë¥¼ ì„¤ëª…í•  ë•Œ êµ¬ì„± ë‹¨ê³„ì— í•´ë‹¹ë˜ëŠ” ê³³ì— printlnì„ ì‘ì„±í•˜ëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ì£¼ëŠ”ë°ìš”. ìƒê°ë³´ë‹¤ ë§ì€ ë¶„ë“¤ì´ ì´ ê°œë…ì— ëŒ€í•´ì„œ ëª¨ë¥¸ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ëª°ë¼ë„ ìƒê´€ì—†ë‹¤ê³  í•  ìˆ˜ ìˆê² ë„¤ìš”.</p>
<h3 id="í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-íƒœìŠ¤í¬"><a href="#í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-íƒœìŠ¤í¬" class="headerlink" title="í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íƒœìŠ¤í¬"></a>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íƒœìŠ¤í¬</h3><p>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•˜ì˜€ê¸°ì— í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ì„ ì§€ ë‹¤ìŒì˜ íƒœìŠ¤í¬ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">task <span class="token function">zipBeanstalk</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'procfile'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
task <span class="token function">zipManually</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'bootWar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

task <span class="token function">k8sbuild</span><span class="token punctuation">(</span>dependsOn<span class="token punctuation">:</span> bootWar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    project<span class="token punctuation">.</span>version <span class="token string">''</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì¶”ê°€í•œ k8sbuild íƒœìŠ¤í¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬ í™˜ê²½ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— í¬í•¨ë˜ëŠ” í”„ë¡œì íŠ¸ ë²„ì „ì„ ìƒëµí•˜ê¸° ìœ„í•´ì„œ project.versionì„ ë¹ˆ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ë„ë¡ ì‘ì„±í•œê²Œ í™”ê·¼ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ìƒíƒœë¡œ zipManually íƒœìŠ¤í¬ë¥¼ ë‹¤ì‹œ í•œë²ˆ ìˆ˜í–‰í•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">./gradlew clean zipManually <span class="token parameter variable">-x</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-Pversion</span><span class="token operator">=</span><span class="token number">1.0</span>.0-hotfix.11</code></pre>

<p><img data-src="/images/posts/gradle-build-lifecycle/gradle-03.png"></p>
<p>k8sbuild íƒœìŠ¤í¬ì— ì‘ì„±ëœ project.versionì„ ì„¤ì •í•˜ëŠ” í–‰ìœ„ëŠ” êµ¬ì„± ë‹¨ê³„ì— í•´ë‹¹í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ì´ì „ì— ì ìš©ë˜ì–´ zipManually íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í”„ë¡œì íŠ¸ ë²„ì „ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<h3 id="í•´ê²°ë°©ì•ˆ"><a href="#í•´ê²°ë°©ì•ˆ" class="headerlink" title="í•´ê²°ë°©ì•ˆ"></a>í•´ê²°ë°©ì•ˆ</h3><p>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ê²Œ ì¢‹ì„ì§€ ë°©ì•ˆì„ ì°¾ì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p>
<h4 id="í”„ë¡œì íŠ¸-ë²„ì „-ì¬ì •ì˜í•˜ëŠ”-ê²½ìš°"><a href="#í”„ë¡œì íŠ¸-ë²„ì „-ì¬ì •ì˜í•˜ëŠ”-ê²½ìš°" class="headerlink" title="í”„ë¡œì íŠ¸ ë²„ì „ ì¬ì •ì˜í•˜ëŠ” ê²½ìš°"></a>í”„ë¡œì íŠ¸ ë²„ì „ ì¬ì •ì˜í•˜ëŠ” ê²½ìš°</h4><p>k8sbuild íƒœìŠ¤í¬ì²˜ëŸ¼ íŠ¹ì • íƒœìŠ¤í¬ì—ì„œ í”„ë¡œì íŠ¸ ë²„ì „ì„ ì¬ì •ì˜ í•˜ê³ ì‹¶ì€ ê²½ìš°ì—ëŠ” doFirstì™€ ê°™ì€ í´ë¡œì €ë¥¼ í™œìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">task <span class="token function">k8sbuild</span><span class="token punctuation">(</span>dependsOn<span class="token punctuation">:</span> bootWar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    doFirst <span class="token punctuation">&#123;</span>
        project<span class="token punctuation">.</span>version <span class="token string">''</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="í”„ë¡œì íŠ¸-ë²„ì „ì„-í™•ì¸í•˜ê³ -ì‹¶ì€-ê²½ìš°"><a href="#í”„ë¡œì íŠ¸-ë²„ì „ì„-í™•ì¸í•˜ê³ -ì‹¶ì€-ê²½ìš°" class="headerlink" title="í”„ë¡œì íŠ¸ ë²„ì „ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš°"></a>í”„ë¡œì íŠ¸ ë²„ì „ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš°</h4><p>zipBeanstalkì™€ zipManually íƒœìŠ¤í¬ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ WARë¡œ íŒ¨í‚¤ì§•í•˜ëŠ” ê²½ìš° í˜„ì¬ í”„ë¡œì íŠ¸ ë²„ì „ì„ ì¶œë ¥í•˜ê³  ì‹¶ì€ ê²½ìš° gradle.taskGraph.whenReadyë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">task <span class="token function">zipBeanstalk</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'procfile'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'.ebextensions'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.ebextensions'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'.platform'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.platform'</span> <span class="token punctuation">&#125;</span>

    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span>

task <span class="token function">zipManually</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> <span class="token string">'bootWar'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'.conf'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'application-prod.yml'</span><span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    baseName <span class="token operator">=</span> <span class="token string">'app-bundle'</span>
<span class="token punctuation">&#125;</span>

gradle<span class="token punctuation">.</span>taskGraph<span class="token punctuation">.</span>whenReady <span class="token punctuation">&#123;</span> graph <span class="token operator">-></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>graph<span class="token punctuation">.</span><span class="token function">hasTask</span><span class="token punctuation">(</span>bootWar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        println <span class="token string">'Build Version: '</span> <span class="token operator">+</span> project<span class="token punctuation">.</span>version
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ë¶ˆí•„ìš”í•œ-íŒŒì¼ì„-ì œê±°í•´ì•¼í•˜ëŠ”-ê²½ìš°"><a href="#ë¶ˆí•„ìš”í•œ-íŒŒì¼ì„-ì œê±°í•´ì•¼í•˜ëŠ”-ê²½ìš°" class="headerlink" title="ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ì œê±°í•´ì•¼í•˜ëŠ” ê²½ìš°"></a>ë¶ˆí•„ìš”í•œ íŒŒì¼ì„ ì œê±°í•´ì•¼í•˜ëŠ” ê²½ìš°</h4><p>ê²½ìš°ì— ë”°ë¼ì„œëŠ” í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¡œì»¬ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ì´ë‚˜ íŠ¹ì • ë„ë©”ì¸ì— ëŒ€í•œ ì¸ì¦ì„œ ë˜ëŠ” ì¸ì¦í‚¤ë¥¼ í¬í•¨í•˜ì§€ì•Šë„ë¡ ì œì™¸í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">gradle<span class="token punctuation">.</span>taskGraph<span class="token punctuation">.</span>whenReady <span class="token punctuation">&#123;</span> graph <span class="token operator">-></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>graph<span class="token punctuation">.</span><span class="token function">hasTask</span><span class="token punctuation">(</span>build_for_customer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        processResources <span class="token punctuation">&#123;</span>
            <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token string">'**/config/**.yml'</span><span class="token punctuation">)</span>
            <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token string">'**/certs/**'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì˜ˆì‹œëŠ” êµ¬ì„± ë‹¨ê³„ì—ì„œ ì˜ì¡´ì„± ê·¸ë˜í”„ êµ¬ì„±ì´ ì™„ë£Œëœ ì´í›„ì— build_for_customer íƒœìŠ¤í¬ê°€ ìˆ˜í–‰ë˜ëŠ” ê²½ìš°ì— ê³ ê° í™˜ê²½ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ WAR íŒŒì¼ì— ìì²´ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ê³¼ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ì§€ ì•Šë„ë¡ processResourcesë¥¼ ì¬ì •ì˜í•¨ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<p>ê·¸ë˜ë“¤ ë¹Œë“œ ë¼ì´í”„ì‚¬ì´í´ ê°œë…ê³¼ í•¨ê»˜ ê²½í—˜í•˜ì˜€ë˜ ë¬¸ì œì— ëŒ€í•˜ì—¬ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì–´ë–¤ ê¸°ìˆ ì„ ì‚¬ìš©í•¨ì— ìˆì–´ì„œ ì£¼ìš” ê°œë…ì„ ì´í•´í•˜ê³  ìˆëŠ” ê²ƒì´ ì¤‘ìš”í•¨ì„ ë‹¤ì‹œí•œë²ˆ ê¹¨ë‹«ê²Œ ë˜ëŠ” ì¢‹ì€ ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ ê·¸ë˜ë“¤ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ìˆ˜í–‰ ë‹¨ê³„ì—ì„œ ìˆ˜í–‰ë˜ì–´ì•¼í•  ì½”ë“œë¥¼ êµ¬ì„± ë‹¨ê³„ì—ì„œ ë™ì‘í•˜ë„ë¡ ì‘ì„±ë˜ì§€ ì•Šì•˜ëŠ”ì§€ ê²€í† í•´ë³´ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Gradle</tag>
        <tag>Lifecycle</tag>
      </tags>
  </entry>
  <entry>
    <title>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸</title>
    <url>/gradle-multi-module-project/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ì˜ ë””íœë˜ì‹œ ê³µìœ ì— ëŒ€í•˜ì—¬ ì´ì•¼ê¸° í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. </p>
<h2 id="ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ"><a href="#ê·¸ë˜ë“¤-ë©€í‹°-ëª¨ë“ˆ" class="headerlink" title="ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ"></a>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ</h2><p>ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì–´ëŠì •ë„ ì»¤ì§€ê²Œë˜ë©´ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œì¨ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ê¸°ëŠ¥ì´ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì°¸ê³ í•˜ì—¬ ì¼ë¶€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë³„ë„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ë¡œ ë…ë¦½ì‹œí‚¤ê¸°ë„ í•©ë‹ˆë‹¤. í˜„ì¬ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì—ì„œëŠ” ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ë¡œ ê°œë°œí•˜ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—¬ëŸ¬ ê³ ê°ë“¤ì˜ í™˜ê²½ì— ë§ëŠ” ë°°í¬ ë˜ëŠ” ë³„ë„ì˜ ì»¤ìŠ¤í…€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ê¸° ìœ„í•˜ì—¬ <strong>ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸</strong>ë¡œ ì „í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h3 id="Java-ë¼ì´ë¸ŒëŸ¬ë¦¬-í”ŒëŸ¬ê·¸ì¸"><a href="#Java-ë¼ì´ë¸ŒëŸ¬ë¦¬-í”ŒëŸ¬ê·¸ì¸" class="headerlink" title="Java ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸"></a>Java ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸</h3><p>ê³µìš© ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””íœë˜ì‹œë¥¼ ìƒìœ„ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìë°” í”ŒëŸ¬ê·¸ì¸ ëŒ€ì‹  ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•˜ê³  <code>api</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ ë””íœë˜ì‹œë¥¼ ì™¸ë¶€ ëª¨ë“ˆì˜ ì»´íŒŒì¼ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œì‹œì¼œì•¼í•©ë‹ˆë‹¤. Gradle 7 ë¶€í„°ëŠ” <code>compile</code>ì„ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©° <code>implementation</code>ì€ ì§€ì •í•œ ë””íœë˜ì‹œë¥¼ ì™¸ë¶€ ëª¨ë“ˆì— ë…¸ì¶œì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The compile and runtime configurations have been removed with Gradle 7.0. Please refer to the upgrade guide how to migrate to implementation and api configurations&#96;.</p>
</blockquote>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy"><span class="token comment">// module-common/build.gradle</span>
plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'java-library'</span>
    id <span class="token string">'io.spring.dependency-management'</span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    api <span class="token string">'com.google.code.gson:gson'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>common ëª¨ë“ˆì˜ gson ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” apië¥¼ í†µí•´ ìƒìœ„ ëª¨ë“ˆì˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œë˜ì–´ ìƒìœ„ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ implementationì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì™¸ë¶€ ëª¨ë“ˆ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œì‹œí‚¤ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë¹ ë¥¸ ì»´íŒŒì¼ê³¼ í´ë˜ìŠ¤íŒ¨ìŠ¤ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì´ê¸° ìœ„í•¨ì´ë©° api ë³´ë‹¤ëŠ” implementationì„ ì„ í˜¸í•´ì•¼í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p>
<h3 id="Common-Module"><a href="#Common-Module" class="headerlink" title="Common Module"></a>Common Module</h3><p><a href="https://github.com/kdevkr/gradle-multi-module">gradle-multi-module</a> ì²˜ëŸ¼ ê·¸ë˜ë“¤ ë©€í‹° ëª¨ë“ˆ í”„ë¡œì íŠ¸ì— ê³µìš©ìœ¼ë¡œ ì ìš©ë˜ëŠ” ì½”ë“œë¥¼ ê°€ì§€ëŠ” Common ëª¨ë“ˆì´ ìˆì„ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ê³µí†µìœ¼ë¡œ ì ìš©ë˜ì–´ì•¼í•˜ëŠ” ì„¤ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JsonConfig</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Jackson2ObjectMapperBuilderCustomizer</span> <span class="token function">objectMapperBuilderCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> builder <span class="token operator">-></span> builder
                <span class="token punctuation">.</span><span class="token function">featuresToEnable</span><span class="token punctuation">(</span><span class="token class-name">SerializationFeature</span><span class="token punctuation">.</span><span class="token constant">WRITE_DATES_AS_TIMESTAMPS</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">featuresToDisable</span><span class="token punctuation">(</span><span class="token class-name">SerializationFeature</span><span class="token punctuation">.</span><span class="token constant">WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">modules</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Jdk8Module</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">JavaTimeModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì½”ë“œì—ì„œëŠ” Date ë˜ëŠ” Timestampì™€ ê°™ì€ í´ë˜ìŠ¤ì— ëŒ€í•˜ì—¬ Long ê°’ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê¸° ìœ„í•˜ì—¬ SerializationFeature.WRITE_DATES_AS_TIMESTAMPSë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. </p>
<h4 id="Common-Dependencies"><a href="#Common-Dependencies" class="headerlink" title="Common Dependencies"></a>Common Dependencies</h4><pre class="language-groovy" data-language="groovy"><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'java-library'</span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    api <span class="token string">'org.springframework.boot:spring-boot-starter-security'</span>
    api <span class="token string">'com.google.code.gson:gson'</span>
    api <span class="token string">'com.fasterxml.jackson.core:jackson-databind'</span>
    api <span class="token string">'org.hibernate.validator:hibernate-validator'</span>
    api <span class="token string">'org.apache.commons:commons-lang3'</span>
    api <span class="token string">'org.apache.commons:commons-collections4:4.4'</span>
    api <span class="token string">'com.google.guava:guava:31.0.1-jre'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì„¤ì •ì²˜ëŸ¼ implementation ëŒ€ì‹ ì— apië¥¼ ì‚¬ìš©í•˜ë©´ ë™ì¼í•œ ë²„ì „ì˜ ë””íœë˜ì‹œë¥¼ ë‹¤ë¥¸ ì™¸ë¶€ ëª¨ë“ˆì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° ëª¨ë“ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” ë””íœë˜ì‹œ ë²„ì „ì´ ë‹¬ë¼ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html">Managing Dependencies of JVM Projects</a>  </li>
<li><a href="https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_configurations_graph">The Java Library Plugin</a></li>
</ul>
]]></content>
      <tags>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title>ì‹œë‹ˆì–´ ê°œë°œìë¡œ ì„±ì¥í•˜ê¸° ìœ„í•œ ì—­ëŸ‰</title>
    <url>/hexagonal-developer/</url>
    <content><![CDATA[<p>ì˜¤ëŠ˜ì€ íšŒì‚¬ì—ì„œ êµ¬ë§¤ ì‹ ì²­í•œ ìµœë²”ê· ë‹˜ì´ ê¸€ì„ ì“°ì‹  <code>ìœ¡ê°í˜• ê°œë°œì</code>ë¼ëŠ” ì±…ì„ ì½ì–´ë³´ì•˜ë‹¤. ì´ì œëŠ” ì‹œë‹ˆì–´ ê°œë°œìë¡œì„œì˜ ì—­ëŸ‰ì„ ì„±ì¥ì‹œì¼œì•¼í•˜ëŠ” ë¦¬ë”ë¡œì¨ì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì¢‹ì€ ì‹œë‹ˆì–´ ê°œë°œìê°€ ê°€ì§€ëŠ” ì—­ëŸ‰ì— ëŒ€í•´ì„œ ìŠ¤ìŠ¤ë¡œ ì •ë¦¬í•´ë³´ê¸° ìœ„í•´ì„œ ë‚´ ê¸°ì¤€ì—ì„œ ì–´ë–¤ ê²ƒì— ëŒ€í•œ ì—­ëŸ‰ì„ í‚¤ì›Œë‚˜ê°€ì•¼í•˜ëŠ”ì§€ ì‚´í´ë³´ê³ ì í•œë‹¤.</p>
<h4 id="ìš”êµ¬ì‚¬í•­-ë¶„ì„-ë°-ì„¤ê³„ì˜-ì—­ëŸ‰"><a href="#ìš”êµ¬ì‚¬í•­-ë¶„ì„-ë°-ì„¤ê³„ì˜-ì—­ëŸ‰" class="headerlink" title="ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì„¤ê³„ì˜ ì—­ëŸ‰"></a>ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì„¤ê³„ì˜ ì—­ëŸ‰</h4><p>ê°œë°œ ë¦¬ë”ë¡œì¨ ê°€ì¥ ì¤‘ìš”í•œ ì—­ëŸ‰ì€ ê°œë°œíŒ€ ì¸ì›ë“¤ì´ ë³´ë‹¤ ì •í™•í•˜ê²Œ í˜¹ì€ íš¨ìœ¨ì ìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ìµœëŒ€í•œ ìì„¸í•˜ì„¸ ìš”êµ¬ì‚¬í•­ê³¼ ë°°ê²½ì— ëŒ€í•´ì„œ ë¶„ì„í•˜ê³  ì‘ì—…ì— ëŒ€í•œ ë°©í–¥ì„±ì„ ì„¤ê³„í•´ì•¼ í•œë‹¤. ìš”êµ¬ì‚¬í•­ì„ ì „ë‹¬í•˜ëŠ” ì…ì¥ì—ì„œ ìŠ¤ìŠ¤ë¡œ ìš”ì•½í•˜ê¸° ìœ„í•´ì„œ ìƒëµí•˜ëŠ” ë°°ê²½ìœ¼ë¡œ ì¸í•˜ì—¬ ì˜ëª»ëœ ë°©í–¥ìœ¼ë¡œ ë¶„ì„í•˜ê³  ì‹¤ë¬´ì ì…ì¥ì—ì„œëŠ” ë‹¤ì‹œ í•œë²ˆ ì²´í¬í•˜ë”ë¼ë„ ê±°ì˜ ì™„ì„±ë˜ê³  ë‚˜ì„œì•¼ ë‹¤ì‹œ ì‘ì—…í•´ì•¼í•˜ëŠ” ê²ƒì„ ì•„ëŠ” ê²½ìš°ë„ ë§ì„ ìˆ˜ ë°–ì— ì—†ë‹¤. ë¹„ë¡ ê·¸ëŸ° ì‚¬í•­ì„ ë§Œë“¤ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ê² ì§€ë§Œ ìµœëŒ€í•œ ê·¸ëŸ¬ì§€ ì•Šë„ë¡ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ ì˜ì‹¬í•˜ê³  ì—¬ëŸ¬ë²ˆ ì²´í¬í•˜ëŠ” ìŠµê´€ì´ í•„ìš”í•  ê²ƒ ê°™ë‹¤.</p>
<h4 id="ë¬¸ì„œí™”ì—-ëŒ€í•œ-ì—­ëŸ‰"><a href="#ë¬¸ì„œí™”ì—-ëŒ€í•œ-ì—­ëŸ‰" class="headerlink" title="ë¬¸ì„œí™”ì— ëŒ€í•œ ì—­ëŸ‰"></a>ë¬¸ì„œí™”ì— ëŒ€í•œ ì—­ëŸ‰</h4><p>ê·¸ë™ì•ˆ ë¬¸ì„œí™”ì— ì†Œí™€í–ˆë˜ ì¡°ì§ì—ì„œ ì¼í•´ì™”ê¸° ë•Œë¬¸ì— ë¬¸ì„œí™”ì— ëŒ€í•œ ì¤‘ìš”ì„±ì€ ì•Œê³  ìˆì–´ë„ íšŒì‚¬ì˜ ìŠ¤íƒ€ì¼ì— ë”°ë¼ ë¬¸ì„œí™”ë‚˜ ì‘ì—… ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í•˜ëŠ” ê²ƒì„ ìƒëµí•´ì™”ë‹¤. ì•ì„ , ìš”êµ¬ì‚¬í•­ì„ ì œëŒ€ë¡œ ë¶„ì„í•˜ê³  ì œëŒ€ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë¬¸ì„œí™”ì— ëŒ€í•œ ì—­ëŸ‰ì„ í‚¤ì›Œì•¼ë§Œ í•œë‹¤. í‰ì†Œì— ë§ìˆ˜ê°€ ì ì–´ì„œ ë§í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì„ ì „ë‹¬í•˜ê¸°ë„ ì–´ë ¤ì›Œí•˜ê¸° ë•Œë¬¸ì— ì œëŒ€ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ë˜ê¸° ìœ„í•´ì„œëŠ” ì •í™•í•œ ë¬¸ì„œë¥¼ ì „ë‹¬í•  í•„ìš”ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë¬¸ì„œí™”ì— ëŒ€í•œ ì—­ëŸ‰ì„ ë” í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ì„œ ê°œì¸ ë¸”ë¡œê·¸ì— ê¸€ì„ ì¨ì„œ ë‚˜ì˜ ìƒê°ì„ ì •ë¦¬í•˜ëŠ” ê²ƒì„ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•´ì•¼í•  ê²ƒ ê°™ë‹¤.</p>
<h4 id="ê¸°ë³¸-ì§€ì‹ì—-ëŒ€í•œ-ì—­ëŸ‰"><a href="#ê¸°ë³¸-ì§€ì‹ì—-ëŒ€í•œ-ì—­ëŸ‰" class="headerlink" title="ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•œ ì—­ëŸ‰"></a>ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•œ ì—­ëŸ‰</h4><p>í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ê¸°ìˆ ì— ëŒ€í•´ì„œëŠ” ì½”ë“œë¥¼ ì´í•´í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆì„ ì •ë„ì˜ ì§€ì‹ì´ í•„ìš”í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ê¸°ìˆ ì„ ì„ íƒí•˜ê¸° ìœ„í•´ì„œ ì¡°ì§ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¸°ìˆ ì´ë¼ê³  í•˜ë”ë¼ë„ í‰ì†Œì— ê¸°ìˆ  êµ¬í˜„ì— ëŒ€í•´ í•™ìŠµí•´ì•¼í•œë‹¤. ë” ë‚˜ì•„ê°€ì„œëŠ” í•´ë‹¹ ê¸°ìˆ ì—ì„œ í•„ìš”í•œ ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•´ì„œ ê¹Šì´ ì‚´í´ë³´ëŠ” ê²ƒë„ í•„ìš”í•˜ë‹¤. í˜„ì¬ ê¸°ì¤€ì—ì„œ ì í•©í•œ ë” ë‚˜ì€ ë°©ë²•ì„ ì°¾ìœ¼ë ¤ê³  ë…¸ë ¥í•´ì•¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤. </p>
<h4 id="í…ŒìŠ¤íŠ¸ì—-ëŒ€í•œ-ì—­ëŸ‰"><a href="#í…ŒìŠ¤íŠ¸ì—-ëŒ€í•œ-ì—­ëŸ‰" class="headerlink" title="í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì—­ëŸ‰"></a>í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì—­ëŸ‰</h4><p>í˜„ì¬ ì¡°ì§ì€ ì „ë°˜ì ì¸ í…ŒìŠ¤íŠ¸ëŠ” QA ì—”ì§€ë‹ˆì–´ì˜ ì—­í• ì´ë¼ê³  ìƒê°í•˜ê³  ìˆì§€ë§Œ ìµœì†Œí•œì˜ í…ŒìŠ¤íŠ¸ëŠ” ê°œë°œìì— ëŒ€í•œ ì—­ëŸ‰ì´ë¼ê³  ìƒê°ëœë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì„ ê°•ì œí•˜ì§€ ì•ŠëŠ” ì¡°ì§ì´ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì—­ëŸ‰ì€ ê°œë°œì ìŠ¤ìŠ¤ë¡œ ìŒ“ê³  ìŠµê´€í™”í•´ì•¼ë§Œ í•œë‹¤. ë˜í•œ, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë©´ ë‹¹ì¥ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¡°ê±´ì„ í†µê³¼í•˜ê¸° ìœ„í•œ ë¡œì§ì— ëŒ€í•´ì„œë§Œ ê²€ì¦í•˜ê³  ë„˜ì–´ê°€ëŠ” ê²½ìš°ê°€ ë§ì€ ê²ƒ ê°™ë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  ê²ƒì— ëŒ€í•´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šê²Œ ë˜ë¯€ë¡œ ë•Œë¡œëŠ” ê°„ë‹¨í•œ ìˆ˜ì •ì˜ ê²½ìš° ë³„ë‹¤ë¥¸ ì˜í–¥ë„ ì²´í¬ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì´ë¼ ê°€ì •í•˜ê³  ë°˜ì˜í•˜ê²Œ ëœë‹¤.</p>
<p>ì‹ ì… ê°œë°œìì˜ ì¸í„°ë·° ê³¼ì •ì—ì„œ ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•´ì„œ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ì—¬ ì²´í¬í•˜ê²Œ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ì£¼ë‹ˆì–´ ê°œë°œìì—ì„œ ì‹œë‹ˆì–´ ê°œë°œìë¡œ ì„±ì¥í•˜ë©´ì„œ ê·¸ë™ì•ˆ ì•Œê³  ìˆë˜ ê¸°ë³¸ ì§€ì‹ì„ ë” ê¹Šê²Œ ë˜ëŒì•„ë³´ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤. ì´ê²ƒì€ ì£¼ë‹ˆì–´ ê°œë°œìë“¤ì´ ì‘ì„±í•œ ì½”ë“œë¥¼ ë¦¬ë·°í•˜ë©´ì„œ ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ë°”ë¼ë³´ê³  ì˜ê²¬ì„ ì œì‹œí•˜ê²Œ ë˜ë©´ì„œ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ê³  ìˆë‹¤. ê²°êµ­ ì œëŒ€ë¡œ ë¦¬ë·°í•  ìˆ˜ ìˆëŠ” ë¦¬ë·°ì–´ê°€ ë˜ê¸° ìœ„í•´ì„œëŠ” ê°œë°œ ì—­ëŸ‰ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ì—­ëŸ‰ì„ ì±„ì›Œì•¼í•˜ëŠ” ê²ƒ ê°™ë‹¤.</p>
]]></content>
      <tags>
        <tag>ì‹œë‹ˆì–´ ê°œë°œì</tag>
        <tag>ìœ¡ê°í˜• ê°œë°œì</tag>
      </tags>
  </entry>
  <entry>
    <title>í´ë¼ì´ì–¸íŠ¸ HTTP ìš”ì²­ë¶€í„° ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ë‹µí•˜ê¸°ê¹Œì§€ì˜ ê³¼ì •</title>
    <url>/http-requests-from-client-to-response-from-spring/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ <strong>í´ë¼ì´ì–¸íŠ¸ì˜ HTTP ìš”ì²­ë¶€í„° ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µê¹Œì§€ì˜ ê³¼ì •</strong> ì— ëŒ€í•˜ì—¬ ì´ì•¼ê¸°ë¥¼ í•´ë³´ë ¤ê³ í•©ë‹ˆë‹¤. ì œê°€ ì§„í–‰í•˜ëŠ” ê³µë¶€ë°©ì‹ ì¤‘ í•˜ë‚˜ëŠ” <a href="https://okky.kr/articles/questions">OKKY</a>ì— ì˜¬ë¼ì˜¤ëŠ” ì§ˆë¬¸ë“¤ì„ ì‚´í´ë³´ë©´ì„œ ë¬¸ì œì ì„ íŒŒì•…í•˜ê³  í•´ê²°ì±…ì„ ì°¾ì•„ë³´ëŠ” ê³¼ì •ì„ ì§„í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° OKKYì— ë“±ë¡ë˜ëŠ” ì§ˆë¬¸ë“¤ ì¤‘ ëŒ€ë¶€ë¶„ì´ <code>AJAX</code>ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  <code>ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬</code>ì—ì„œ ë°ì´í„°ë¥¼ ë°›ëŠ”ê²Œ ì•ˆëœë‹¤ëŠ” ìœ í˜•ì´ ë§ì€ í¸ì…ë‹ˆë‹¤. í•´ë‹¹ ì§ˆë¬¸ ì‘ì„±ìë“¤ì€ ìŠ¤í”„ë§ ê²½í—˜ì´ ë§ì§€ ì•Šì€ ì´ˆë³´ ê°œë°œì ì´ê±°ë‚˜ ìŠ¤í”„ë§ì— ëŒ€í•œ ì´í•´ì—†ì´ ë¹ ë¥´ê²Œ ì˜ˆì œë¥¼ í†µí•´ í•™ìŠµí•œ êµ­ë¹„ì§€ì› ìˆ˜ê°•ìƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>êµ­ë¹„ì§€ì›ì— ëŒ€í•œ ë¹„í•˜ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆìœ¼ì‹œê² ìŠµë‹ˆë‹¤ë§Œ, ìŠ¤í”„ë§ì€ ì—¬ëŸ¬ê°€ì§€ í”„ë¡œê·¸ë˜ë° ê°œë…ì´ ë³µí•©ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í”„ë ˆì„ì›Œí¬ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ì»´í“¨í„° ê³µí•™ê³¼ì—ì„œ ë°°ìš°ëŠ” ì „ê³µ ì§€ì‹ê³¼ëŠ” ë³„ê°œë¡œ ì‰½ê²Œ ì´í•´í•˜ê¸°ì—ëŠ” ì–´ë µìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ë¹„ì „ê³µìì´ê¸° ë•Œë¬¸ì— ì–´ë ¤ìš´ ê²ƒì´ ì•„ë‹ˆë¼ ê°œë…ì ìœ¼ë¡œ ì–´ë ¤ìš´ ê²ƒì´ë‹ˆ ìš°ìš¸í•´í•˜ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤.</p>
</blockquote>
<p>4ë…„ ë™ì•ˆ ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ìˆëŠ” ì € ë˜í•œ ìŠ¤í”„ë§ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ëŠ” ëª»í–ˆìŠµë‹ˆë‹¤. ì²˜ìŒì— í† ë¹„ë‹˜ì´ ì‘ì„±í•˜ì‹  <code>í† ë¹„ì˜ ìŠ¤í”„ë§ 3.1</code> ì„œì ì„ ì•ì—ì„œ ì½ë‹¤ê°€ ë’¤ë¶€í„° ì½ë‹¤ê°€ ì´í•´ê°€ ì•ˆë˜ì„œ ëŒ€ì¶©ì´ë¼ë„ ìµœì†Œí•œ 4ë²ˆì€ ì½ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
<p>ê·¸ëŸ°ë° ì•ì„œ ì–¸ê¸‰í•œ ì§ˆë¬¸ë“¤ì€ ìŠ¤í”„ë§ì˜ ê°œë…ì„ ì´í•´ë¥¼ ëª»í–ˆë‹¤ê¸°ë³´ë‹¤ëŠ” HTTP ì›¹ ìš”ì²­ ê³¼ì •ì— ëŒ€í•œ ì´í•´ê°€ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ì— í¬í•¨ëœ ì—¬ëŸ¬ê°€ì§€ ëª¨ë“ˆ ì¤‘ ì›¹ ìš”ì²­ê³¼ ê´€ë ¨ëœ ëª¨ë“ˆì€ <code>spring-web</code>ê³¼ <code>spring-webmvc</code> ì¸ë°ìš”. ì´ ëª¨ë“ˆë“¤ì€ ì—¬ëŸ¬ë¶„ì´ ìŠ¤í”„ë§ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•˜ëŠ”ë° ë„ì›€ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ë“¤ì´ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. </p>
<p>ì´ ê¸€ì˜ ì£¼ìš” ë‚´ìš©ì¸ í´ë¼ì´ì–¸íŠ¸ì˜ HTTP ìš”ì²­ë¶€í„° ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µê¹Œì§€ì˜ ê³¼ì •ì„ ìœ„ ë‘ê°œì˜ ëª¨ë“ˆì´ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ë“¤ì˜ ì—°ê´€ì„±ì„ ì°¾ì•„ê°€ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì„ í†µí•´ HTTP ìš”ì²­ê³¼ ì‘ë‹µ ê³¼ì •ì„ ì´í•´í•˜ì‹ ë‹¤ë©´ ì œê°€ ì˜ˆì „ì— ì‘ì„±í•˜ì˜€ë˜ <a href="https://okky.kr/article/374594">ì´ˆë³´ ë° ì‹ ì… ê°œë°œìë“¤ì„ ìœ„í•œ spring to ajaxì— ëŒ€í•œ ì •ë¦¬</a>ì˜ ì—¬ëŸ¬ê°€ì§€ ì¼€ì´ìŠ¤ë¥¼ ì¢€ ë” ì‰½ê²Œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆì„ê±°ë¼ ë´…ë‹ˆë‹¤.</p>
<blockquote>
<p>ê´€ë ¨ ì½”ë“œ : <a href="https://github.com/kdevkr/spring-demo-ajax">kdevkr&#x2F;spring-demo-ajax</a></p>
</blockquote>
<h2 id="HTTP-ìš”ì²­"><a href="#HTTP-ìš”ì²­" class="headerlink" title="HTTP ìš”ì²­"></a>HTTP ìš”ì²­</h2><p>ë¨¼ì €, ì›¹ ë¸Œë¼ìš°ì €ì™€ ê°™ì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ HTTP ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì„ ì´í•´í•´ì•¼í•©ë‹ˆë‹¤. MDN ê°œë°œì ë¬¸ì„œì—ì„œëŠ” <a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Messages">HTTP ë©”ì‹œì§€</a>ì— ëŒ€í•´ ìì„¸í•˜ê²Œ ì„¤ëª…í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="HTTP-ë©”ì‹œì§€"><a href="#HTTP-ë©”ì‹œì§€" class="headerlink" title="HTTP ë©”ì‹œì§€"></a>HTTP ë©”ì‹œì§€</h3><p><img data-src="https://mdn.mozillademos.org/files/13827/HTTPMsgStructure2.png" alt="ì¶œì²˜ : MDN HTTP Messages"></p>
<p>ìœ„ ê·¸ë¦¼ì—ì„œì²˜ëŸ¼ ì—¬ëŸ¬ë¶„ì´ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ì–´ë–¤ ì›¹ ì‚¬ì´íŠ¸ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒë„ ìœ„ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, OKKY ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ <code>okky.kr</code> ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ì›¹ ë¸Œë¼ìš°ì €ê°€ ëŒ€ì‹ í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¡œ HTTP ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì€ ê²ƒì„ ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì—¬ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-01.png" alt="[GET] okky.kr"></p>
<blockquote>
<p>ì§€ê¸ˆ ì´ ê¸€ì„ ë³´ê³  ê³„ì‹œë‹ˆê¹Œ ì´ ê³¼ì •ì€ ë‹¤ ì´í•´í•˜ì‹¤í…Œì§€ìš” :)</p>
</blockquote>
<h3 id="HTTP-Headers"><a href="#HTTP-Headers" class="headerlink" title="HTTP Headers"></a>HTTP Headers</h3><p>ì•ì„  ê·¸ë¦¼ì—ì„œ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ í—¤ë”(Request Headers)ì— ë¬´ì–¸ê°€ ë§ì´ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤. ì´ HTTP ìš”ì²­ í—¤ë”ëŠ” HTTP ìš”ì²­ì— ëŒ€í•œ ë¶€ê°€ì •ë³´ë¥¼ ì œê³µí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”. ì—¬ëŸ¬ê°€ì§€ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">í—¤ë”</a>ë¥¼ í†µí•´ì„œ ìš”ì²­ìë¥¼ ì‹ë³„í•  ìˆ˜ ìˆê²Œ í•˜ê±°ë‚˜ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•˜ê¸°ë„ í•˜ê³  ì„œë²„ì—ê²Œ ìš”ì²­ì— ëŒ€í•´ ë‚´ê°€ ì‘ë‹µë°›ìœ¼ë ¤ëŠ” í˜•íƒœë¥¼ ì•Œë ¤ì£¼ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<p>Accept, Accept-Encoding, Accept-LanguageëŠ” <a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Content_negotiation">ì»¨í…ì¸  í˜‘ìƒ(Content negotiation)</a>ì´ë¼ê³  í•´ì„œ HTTP ìš”ì²­ì— ëŒ€í•˜ì—¬ ì‘ë‹µí•˜ëŠ” ì„œë²„ê°€ ì–´ë–¤ í˜•íƒœë¡œ ë‚´ë ¤ì£¼ëŠ”ê²Œ ê°€ì¥ ì•Œë§ëŠ” ê²ƒì¸ì§€ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  HTTP ìš”ì²­ì„ í†µí•´ ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ë³´ë‚¼ë•Œ í¬í•¨ë˜ëŠ” <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">ì»¨í…íŠ¸ íƒ€ì…(Content-Type)</a>ë„ ìˆê³  íŒŒì¼ ë‹¤ìš´ë¡œë“œí•  ë•Œ ì‚¬ìš©ë˜ëŠ” <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition</a> í—¤ë”ë„ ìˆì£ .</p>
<p>ìš°ì„  ê¸°ë³¸ì ìœ¼ë¡œ ì•Œê³  ìˆì–´ì•¼í•˜ëŠ” ìš”ì²­ í—¤ë”ëŠ” <code>Accept</code>, <code>Content-Type</code> ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Accept í—¤ë”ëŠ” ì„œë²„ê°€ ì‘ë‹µí•˜ê¸° ìœ„í•´ HTTP ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•  ë•Œ ì•Œë§ëŠ” í˜•íƒœë¡œ ì œê³µí•´ë‹¬ë¼ëŠ” ì •ë³´ì´ê³  Content-Type í—¤ë”ëŠ” HTTP ë©”ì‹œì§€ì— í¬í•¨ëœ ë°ì´í„°ê°€ ì–´ë–¤ í˜•íƒœë¡œ êµ¬ì„±ë˜ëŠ”ì§€ë¥¼ ì„œë²„ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ HTTP ìš”ì²­í•  ë•Œ HTTP ë©”ì‹œì§€ì— í¬í•¨ë˜ëŠ” ë©”ì‹œì§€ í˜•íƒœì— ë”°ë¼ Content-Type í—¤ë”ë¥¼ ì œê³µí•´ì•¼í•˜ê³  ì„œë²„ë¡œë¶€í„° íŠ¹ì • ë©”ì‹œì§€ í˜•íƒœë¡œ ë°›ê³  ì‹¶ë‹¤ë©´ Accept í—¤ë”ì— ì•Œë§ëŠ” ê°’ì„ ì§€ì •í•´ì•¼í•˜ì£ .</p>
<blockquote>
<p>ìœ„ ì˜ˆì‹œì—ì„œ OKKY ì„œë²„ëŠ” ì›¹ ë¸Œë¼ìš°ì €ê°€ ìš”ì²­í•œ Accept í—¤ë” ì¤‘ ì²«ë²ˆì§¸ì¸ text&#x2F;htmlìœ¼ë¡œ HTTP ë©”ì‹œì§€ë¥¼ ì‘ë‹µí–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h4><p>Accept í—¤ë”ì˜ ê°’ì€ <code>&lt;MIME_type&gt;/&lt;MIME_subtype&gt;</code> í˜•íƒœë¡œ êµ¬ì„±í•˜ëŠ”ë° ëŒ€ë¶€ë¶„ <code>*/*</code> ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì„œë²„ê°€ ì•Œì•„ì„œ ì‘ë‹µ ë©”ì‹œì§€ í˜•íƒœë¥¼ êµ¬ì„±í•˜ê±°ë‚˜ AJAXìœ¼ë¡œ ìš”ì²­í•˜ëŠ” ê²½ìš° <code>application/json</code>ìœ¼ë¡œ ì„¤ì •í•˜ê¸°ë„ í•˜ì£ .</p>
<p>ë‹¤ìŒì€ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” Accept ê°’ì´ë©° ì´ì™¸ì—ë„ ë§ìœ¼ë‹ˆ í•œë²ˆ ì°¾ì•„ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
<ul>
<li>text&#x2F;plain, text&#x2F;html, text&#x2F;css, text&#x2F;javascript</li>
<li>image&#x2F;png, image&#x2F;jpeg</li>
<li>application&#x2F;json, application&#x2F;xml, application&#x2F;octet-stream</li>
</ul>
<h4 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h4><p>Content-Type í—¤ë”ëŠ” HTTP ë©”ì‹œì§€ì— í¬í•¨ëœ ë°ì´í„°ì˜ í˜•íƒœë¥¼ ì•Œë ¤ì£¼ëŠ” ê°’ì´ë¼ê³  í–ˆìŠµë‹ˆë‹¤. OKKYì— ë¡œê·¸ì¸í•˜ê¸° ìœ„í•´ì„œ êµ¬ê¸€ OAuth ì¸ì¦ì— ëŒ€í•œ HTTP ìš”ì²­ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-02.png" alt="êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì¸ì¦ ì‹œ ìš”ì²­ ë©”ì‹œì§€"></p>
<p>êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì¸ì¦ ì‹œ í¬í•¨í•˜ëŠ” ìš”ì²­ ë°ì´í„°ê°€ <code>í¼ ë°ì´í„°</code> í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ê¸° ìœ„í•´ì„œ Content-Typeì— <code>application/x-www-form-urlencoded</code>ì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-03.png" alt="êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì¸ì¦ ì‹œ ì‘ë‹µ ë©”ì‹œì§€"></p>
<p>êµ¬ê¸€ ì¸ì¦ ì„œë²„ëŠ” êµ¬ê¸€ ê³„ì • ì¸ì¦ì— ëŒ€í•œ ê²°ê³¼ê°€ JSON í˜•íƒœì˜ ë¬¸ìì—´ì¸ ê²ƒì„ ì•Œë ¤ì£¼ê¸° ìœ„í•´ì„œ Content-Typeì— <code>application/json</code>ì„ ì§€ì •í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì„œë²„ë¡œ ì–´ë–¤ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ì•¼í•˜ëŠ” ìš”ì²­ì´ë¼ë©´ ìš”ì²­ ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ê³  ë©”ì‹œì§€ í˜•íƒœì— ë”°ë¼ Content-Typeì„ ì§€ì •í•´ì•¼í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ìŠ¤í”„ë§-ì›¹-ëª¨ë“ˆ"><a href="#ìŠ¤í”„ë§-ì›¹-ëª¨ë“ˆ" class="headerlink" title="ìŠ¤í”„ë§ ì›¹ ëª¨ë“ˆ"></a>ìŠ¤í”„ë§ ì›¹ ëª¨ë“ˆ</h2><p>ìŠ¤í”„ë§ 5ë¶€í„°ëŠ” ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íƒ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë“ˆì´ ìˆì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì„œë¸”ë¦¿ ê¸°ë°˜ì˜ <code>spring-webmvc</code> ëª¨ë“ˆì„ í†µí•´ HTTP ìš”ì²­ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤. ëª¨ë“ˆ ì´ë¦„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ ì„œë¸”ë¦¿ ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ MVC ì•„í‚¤í…ì²˜ í˜•íƒœë¡œ ë™ì‘í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì›¹ ëª¨ë“ˆì—ëŠ” ëª¨ë“  HTTP ìš”ì²­ì˜ ì§„ì…ì ì´ ë˜ëŠ” DispatcherServlet í´ë˜ìŠ¤ê°€ ìˆìœ¼ë©° HTTP ìš”ì²­ì— ëŒ€í•œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ ì²˜ë¦¬ë¥¼ ìœ„ì„í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<h3 id="DispatcherServlet"><a href="#DispatcherServlet" class="headerlink" title="DispatcherServlet"></a>DispatcherServlet</h3><p>ë‹¤ìŒì€ DispatcherServlet í´ë˜ìŠ¤ì˜ doDispatch í•¨ìˆ˜ì˜ ì¼ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// Determine handler for the current request.</span>
    mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">noHandlerFound</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Determine handler adapter for the current request.</span>
    <span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>êµ‰ì¥íˆ ë‹¨ìˆœí•œ ì½”ë“œë¼ê³  í•  ìˆ˜ ìˆëŠ”ë°ìš”. í˜„ì¬ ì²˜ë¦¬ì¤‘ì¸ ìš”ì²­ì— ëŒ€í•œ í•¸ë“¤ëŸ¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° noHandlerFound í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¬ ì§€ 404 NotFound ì‘ë‹µì„ ì œê³µí• ì§€ ê²°ì •í•˜ê³  í˜„ì¬ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ê°€ ìˆë‹¤ë©´ í•´ë‹¹ í•¸ë“¤ëŸ¬ì— ëŒ€í•œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ì•„ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì£ . í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•˜ì§€ë§Œ ë‹¤ì‹œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ì•„ ì²˜ë¦¬ê°€ ë˜ë„ë¡í•˜ëŠ” ì´ìœ ê°€ ê¶ê¸ˆí•˜ì§€ ì•Šìœ¼ì‹ ê°€ìš”? ê·¸ëŸ¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°(HandlerAdapter)ë¥¼ ì°¾ì•„ê°€ë³´ë„ë¡ í•©ì‹œë‹¤.</p>
<h3 id="HandlerAdapter"><a href="#HandlerAdapter" class="headerlink" title="HandlerAdapter"></a>HandlerAdapter</h3><p>HandlerAdapterëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ìƒí™”ë˜ì–´ìˆìœ¼ë‹ˆ ì‹¤ì œ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬í˜„ì²´ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-04.png" alt="HandlerAdapter êµ¬í˜„ì²´"></p>
<p>ë‹¤ë¥¸ í´ë˜ìŠ¤ì™€ ë‹¬ë¦¬ AbstractHandlerMethodAdapterëŠ” ì¶”ìƒí´ë˜ìŠ¤ë¡œ ë˜ì–´ìˆìœ¼ë‹ˆ í•œë²ˆ ë” í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ë´…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-05.png" alt="RequestMappingHandlerAdapter"></p>
<p>í•œë²ˆì´ë¼ë„ ìŠ¤í”„ë§ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‘ì„±í•˜ì‹ ë¶„ë“¤ì´ë¼ë©´ ëˆˆì— ë“¤ì–´ì˜¤ëŠ” ê²ƒì´ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ <code>RequestMapping</code> ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤. RequestMappingHandlerAdapter í´ë˜ìŠ¤ì˜ ì£¼ì„ì„ ì‚´í´ë³´ë©´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ì„ ì–¸ëœ RequestMappingì„ ì§€ì›í•˜ëŠ” AbstractHandlerMethodAdapterì˜ <code>í™•ì¥</code>ì´ë¼ê³  í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ ì—¬ëŸ¬ë¶„ì´ @RequestMappingì´ë‚˜ @GetMapping, @PostMappingë“±ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë©´ RequestMappingHandlerAdapterë¥¼ í†µí•´ ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœë‹¤ëŠ” ê±°ì£ .</p>
<p>ì§ì ‘ ì°¾ì•„ë³´ì‹œëŠ” ë¶„ë“¤ì´ë¼ë©´ RequestMappingHandlerAdapterì˜ ìˆ˜ë§ì€ í•¨ìˆ˜ ì¤‘ì—ì„œ handleInternalìœ¼ë¡œ ìš”ì²­ì´ ì²˜ë¦¬ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì„ê²ë‹ˆë‹¤. ê·¸ë¦¬ê³  invokeHandlerMethodë¥¼ í˜¸ì¶œí•´ì„œ ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-06.png" alt="Spring 4.2+ invokeHandlerMethod"></p>
<blockquote>
<p>ìœ„ invokeHandlerMethodëŠ” ìŠ¤í”„ë§ 5 ê¸°ì¤€ì˜ ì½”ë“œì¸ë° ìŠ¤í”„ë§ 4.2ê°€ ëª…ì‹œë˜ì–´ìˆëŠ” ê²ƒì„ ë³´ë©´ ì´ì „ì—ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ 4.2 ì´ì „ ë²„ì „ìœ¼ë¡œ ê°œë°œí•˜ê³  ìˆìœ¼ì‹  ë¶„ë“¤ì´ë¼ë©´ ì§ì ‘ ì°¾ì•„ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ê·€ì°®ì•„ìš”â€¦ã… ã… </p>
</blockquote>
<p>RequestMappingHandlerAdapterëŠ” ìŠ¤í”„ë§ 3.1ë¶€í„° ì¶”ê°€ë˜ì—ˆìœ¼ë‹ˆ RequestMappingHandlerAdapterë¥¼ ë°”ë¡œ ì°¾ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤. </p>
<p>ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ë¯€ë¡œ ì½”ë“œë¥¼ ì¢€ ìì„¸íˆ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>invokeHandlerMethod</span></div><code class="language-java"><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">ModelAndView</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
        <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HandlerMethod</span> handlerMethod<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>

    <span class="token class-name">ServletWebRequest</span> webRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">WebDataBinderFactory</span> binderFactory <span class="token operator">=</span> <span class="token function">getDataBinderFactory</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ModelFactory</span> modelFactory <span class="token operator">=</span> <span class="token function">getModelFactory</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">,</span> binderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ServletInvocableHandlerMethod</span> invocableMethod <span class="token operator">=</span> <span class="token function">createInvocableHandlerMethod</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            invocableMethod<span class="token punctuation">.</span><span class="token function">setHandlerMethodArgumentResolvers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            invocableMethod<span class="token punctuation">.</span><span class="token function">setHandlerMethodReturnValueHandlers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        invocableMethod<span class="token punctuation">.</span><span class="token function">setDataBinderFactory</span><span class="token punctuation">(</span>binderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invocableMethod<span class="token punctuation">.</span><span class="token function">setParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parameterNameDiscoverer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ModelAndViewContainer</span> mavContainer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndViewContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mavContainer<span class="token punctuation">.</span><span class="token function">addAllAttributes</span><span class="token punctuation">(</span><span class="token class-name">RequestContextUtils</span><span class="token punctuation">.</span><span class="token function">getInputFlashMap</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelFactory<span class="token punctuation">.</span><span class="token function">initModel</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> invocableMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mavContainer<span class="token punctuation">.</span><span class="token function">setIgnoreDefaultModelOnRedirect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ignoreDefaultModelOnRedirect<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AsyncWebRequest</span> asyncWebRequest <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">createAsyncWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        asyncWebRequest<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>asyncRequestTimeout<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        asyncManager<span class="token punctuation">.</span><span class="token function">setTaskExecutor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>taskExecutor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        asyncManager<span class="token punctuation">.</span><span class="token function">setAsyncWebRequest</span><span class="token punctuation">(</span>asyncWebRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        asyncManager<span class="token punctuation">.</span><span class="token function">registerCallableInterceptors</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callableInterceptors<span class="token punctuation">)</span><span class="token punctuation">;</span>
        asyncManager<span class="token punctuation">.</span><span class="token function">registerDeferredResultInterceptors</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>deferredResultInterceptors<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">hasConcurrentResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> asyncManager<span class="token punctuation">.</span><span class="token function">getConcurrentResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mavContainer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ModelAndViewContainer</span><span class="token punctuation">)</span> asyncManager<span class="token punctuation">.</span><span class="token function">getConcurrentResultContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            asyncManager<span class="token punctuation">.</span><span class="token function">clearConcurrentResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LogFormatUtils</span><span class="token punctuation">.</span><span class="token function">traceDebug</span><span class="token punctuation">(</span>logger<span class="token punctuation">,</span> traceOn <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> formatted <span class="token operator">=</span> <span class="token class-name">LogFormatUtils</span><span class="token punctuation">.</span><span class="token function">formatValue</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token operator">!</span>traceOn<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token string">"Resume with async result ["</span> <span class="token operator">+</span> formatted <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            invocableMethod <span class="token operator">=</span> invocableMethod<span class="token punctuation">.</span><span class="token function">wrapConcurrentResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        invocableMethod<span class="token punctuation">.</span><span class="token function">invokeAndHandle</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">return</span> <span class="token function">getModelAndView</span><span class="token punctuation">(</span>mavContainer<span class="token punctuation">,</span> modelFactory<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
        webRequest<span class="token punctuation">.</span><span class="token function">requestCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì•„ì§ê¹Œì§€ ìš©ë„ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ WebDataBinderFactory, ModelFactory, ServletInvocableHandlerMethodë¥¼ êµ¬ì„±í•˜ê³  ServletInvocableHandlerMethodë¥¼ í†µí•´ ServletWebRequestì™€ ModelAndViewContainerë¡œ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ ServletInvocableHandlerMethodë¡œ ê°ì‹¸ì ¸ìˆëŠ” ê²ƒ ê°™ìœ¼ë‹ˆ ë‹¤ì‹œ ì°¾ì•„ê°€ë´…ì‹œë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>ServletInvocableHandlerMethod.invokeAndHandle</span></div><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invokeAndHandle</span><span class="token punctuation">(</span><span class="token class-name">ServletWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
        <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>

    <span class="token class-name">Object</span> returnValue <span class="token operator">=</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setResponseStatus</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>returnValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRequestNotModified</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getResponseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> mavContainer<span class="token punctuation">.</span><span class="token function">isRequestHandled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">disableContentCachingIfNecessary</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mavContainer<span class="token punctuation">.</span><span class="token function">setRequestHandled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span><span class="token function">getResponseStatusReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        mavContainer<span class="token punctuation">.</span><span class="token function">setRequestHandled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    mavContainer<span class="token punctuation">.</span><span class="token function">setRequestHandled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"No return value handlers"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>
                returnValue<span class="token punctuation">,</span> <span class="token function">getReturnValueType</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">)</span><span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token function">formatErrorForReturnValue</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>invokeForRequest í•¨ìˆ˜ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ë¦¬í„´ëœ ê°’ì„ returnValueHandlersë¡œ ë‹¤ì‹œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ ìˆœì„œë¥¼ ë³¼ë•Œ invokeForRequestê°€ ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë¶€ë¶„ì´ê³  í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•œ ê°’ì„ ìŠ¤í”„ë§ì—ì„œ returnValueHandlersë¡œ ë‹¤ì‹œ ì²˜ë¦¬í•˜ëŠ” ê±°ë¼ê³  ì˜ˆìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>returnValueHandlers ìœ í˜•ì„ ì°¾ì•„ë³´ë©´ <code>HandlerMethodReturnValueHandlerComposite</code>ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HandlerMethodReturnValueHandlerCompositeëŠ” <code>HandlerMethodReturnValueHandler</code> êµ¬í˜„ì²´ë¡œ HandlerMethodReturnValueHandlerì˜ ëª©ë¡ì„ í†µí•´ ì—¬ëŸ¬ë¶„ì´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•œ ìœ í˜•ì— ë”°ë¼ HandlerMethodReturnValueHandlerìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>HandlerMethodReturnValueHandlerComposite</span></div><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span>
        <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>

    <span class="token class-name">HandlerMethodReturnValueHandler</span> handler <span class="token operator">=</span> <span class="token function">selectHandler</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unknown return value type: "</span> <span class="token operator">+</span> returnType<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    handler<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ëŸ¬ë©´ ì—¬ëŸ¬ë¶„ì´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•œ ê°’ì— ë”°ë¼ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” HandlerMethodReturnValueHandler êµ¬í˜„ì²´ê°€ ìˆë‹¤ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h4 id="HandlerMethodReturnValueHandler"><a href="#HandlerMethodReturnValueHandler" class="headerlink" title="HandlerMethodReturnValueHandler"></a>HandlerMethodReturnValueHandler</h4><p>HandlerMethodReturnValueHandler êµ¬í˜„ì²´ë¥¼ ì°¾ì•„ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜µë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/http-requests-responses/http-requests-responses-07.png" alt="HandlerMethodReturnValueHandler êµ¬í˜„ì²´"></p>
<p>ì‚¬ì‹¤ HandlerMethodReturnValueHandler êµ¬í˜„ì²´ ëª©ë¡ì€ ìŠ¤í”„ë§ ê³µì‹ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ì‹œëŠ” ë¶„ë“¤ì´ë¼ë©´ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-return-types">Handler Methods Return Values</a>ì—ì„œ í™•ì¸í•˜ì…¨ì„ ê²ë‹ˆë‹¤.</p>
<blockquote>
<p>ì´ ê¸€ì„ ë³´ëŠ” ëŒ€ë¶€ë¶„ì˜ ì´ˆë³´ ê°œë°œìëŠ” ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²Œ ë°”ë¡œ ê³µì‹ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ëŠ” ì´ìœ ë¼ê³  í•  ìˆ˜ ìˆê² ì£ ?</p>
</blockquote>
<p>ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th align="left">Return Value</th>
<th align="left">HandlerMethodReturnValueHandler</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">String</td>
<td align="left">ViewNameMethodReturnValueHandler</td>
<td align="left">ViewResolver êµ¬í˜„ì²´ì— ì˜í•´ View Nameìœ¼ë¡œ ì²˜ë¦¬</td>
</tr>
<tr>
<td align="left">View</td>
<td align="left">ViewMethodReturnValueHandler</td>
<td align="left">View ì¸ìŠ¤í„´ìŠ¤ë¡œ ë Œë”ë§</td>
</tr>
<tr>
<td align="left">Map</td>
<td align="left">MapMethodProcessor</td>
<td align="left">Mapì„ ModelAndView ì†ì„±ìœ¼ë¡œ ì²˜ë¦¬</td>
</tr>
<tr>
<td align="left">Model</td>
<td align="left">ModelMethodProcessor</td>
<td align="left">Modelì„ Mapìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ModelAndView ì†ì„±ìœ¼ë¡œ ì²˜ë¦¬</td>
</tr>
<tr>
<td align="left">@ResponseBody</td>
<td align="left">AbstractMessageConverterMethodProcessor</td>
<td align="left">ë¦¬í„´ ê°’ì„ HttpMessageConverter êµ¬í˜„ì²´ë¡œ ë³€í™˜í•´ì„œ ì‘ë‹µ</td>
</tr>
<tr>
<td align="left">void</td>
<td align="left">ModelAndViewMethodReturnValueHandler</td>
<td align="left">ServletResponse ë˜ëŠ” @ResponseStatusë¡œ ì²˜ë¦¬</td>
</tr>
<tr>
<td align="left">ModelAndView</td>
<td align="left">ModelAndViewMethodReturnValueHandler</td>
<td align="left">View, Model Attritube, Response Statusë¡œ ì²˜ë¦¬</td>
</tr>
</tbody></table>
<p>ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ ë¦¬í„´í•œ ê°’ì— <code>@ResponseBody</code> ì–´ë…¸í…Œì´ì…˜ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì€ <code>AbstractMessageConverterMethodProcessor</code>ë¥¼ í†µí•´ ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ ë³€í™˜í•´ì„œ ì‘ë‹µí•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë˜í•œ, @ResponseBody ì—†ì´ <code>Map</code>ì„ ë¦¬í„´í•œë‹¤ëŠ” ê²ƒì€ <code>MapMethodProcessor</code>ì„ í†µí•´ Mapì— ìˆëŠ” ê°’ë“¤ì„ ModelAndViewì˜ ì• íŠ¸ë¦¬ë·°íŠ¸ë¡œ ë„£ì–´ì„œ ì‘ë‹µí•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ì£ .</p>
<p>ê²°êµ­ <code>@ResponseBody</code>ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì€ ë¦¬í„´ ê°’ì— ëŒ€í•œ <code>ë©”ì‹œì§€ ì»¨ë²„í„°</code>ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, OKKYì— ê³µìœ í•œ <a href="https://okky.kr/article/387101">ìŠ¤í”„ë§ ë²„ì „ë³„ Jackson ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ë©”ì‹œì§€ ì»¨ë²„í„° ì •ë³´</a>ì— ë”°ë¥´ë©´ ìŠ¤í”„ë§ ë²„ì „ì— ë”°ë¼ JSONìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ë©”ì‹œì§€ ì»¨ë²„í„° ì§€ì›ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ë¶„ì´ ì‚¬ìš©ì¤‘ì¸ ìŠ¤í”„ë§ ë²„ì „ì— ë”°ë¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´í•´ì•¼í•˜ê³  ì•Œë§ëŠ” ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ë“±ë¡ë˜ì–´ìˆì–´ì•¼í•¨ì„ ëœ»í•©ë‹ˆë‹¤.</p>
<p><code>ìŠ¤í”„ë§ 4 ì´ìƒ</code>ì˜ ë²„ì „ì„ ì‚¬ìš©ì¤‘ì¸ë° ëŒ€ë¶€ë¶„ì˜ ë¸”ë¡œê·¸ì—ì„œ ì œì‹œí•˜ëŠ” <code>MappingJacksonHttpMessageConverter</code>ëŠ” ë¯¸ì§€ì›í•˜ê¸° ë•Œë¬¸ì— <code>org.codehaus.jackson</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´ì„±ì— ê°€ì§€ê³  ìˆë‹¤ê³  í•´ë„ ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ë“±ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ <code>ìŠ¤í”„ë§ 4 ë¯¸ë§Œ</code>ì˜ ë²„ì „ì„ ì‚¬ìš©ì¤‘ì¸ë° <code>MappingJackson2HttpMessageConverter</code>ë¥¼ ë“±ë¡í•˜ê³  <code>com.fasterxml.jackson.core</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´í•˜ëŠ” ê²ƒë„ ì˜ë¯¸ ì—†ëŠ” í–‰ìœ„ë¼ê³  í•  ìˆ˜ ìˆì£ .</p>
<p>ì´ë ‡ê²Œ ìŠ¤í”„ë§ ë²„ì „ì— ë”°ë¼ ì˜ì¡´í•´ì•¼í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì´ ì¡´ì¬í•¨ì— ë”°ë¼ ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì„ ê´€ë¦¬í•˜ëŠ” <a href="https://mvnrepository.com/artifact/org.springframework/spring-framework-bom"><br>Spring Framework (Bill of Materials)</a>ì„ ì œê³µí•˜ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ê¹Œì§€ í™•ì¸í•œ ë°”ë¡œëŠ” HandlerAdapterë¡œ ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ í˜¸ì¶œí•˜ê³  í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì— ë”°ë¼ HandlerMethodReturnValueHandlerë¡œ ì‘ë‹µí•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ëˆˆì¹˜ ë¹ ë¥´ì‹ ë¶„ë“¤ì€ í•œê°€ì§€ ê³¼ì •ì„ ë¹¼ë¨¹ì—ˆë‹¤ê³  ëŠë¼ì‹¤ ê²ƒì…ë‹ˆë‹¤. ë°”ë¡œ HTTP ìš”ì²­ì— í¬í•¨ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì¸ë° ìŠ¤í”„ë§ì—ì„œëŠ” <code>ë°ì´í„° ë°”ì¸ë”©</code>ì´ë¼ê³  ë¶€ë¥´ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì´ ë°ì´í„° ë°”ì¸ë”© ê³¼ì •ì€ RequestMappingHandlerAdapterì˜ invokeHandlerMethodì— ì´ë¯¸ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<p>ë°”ë¡œ WebDataBinderFactoryë¥¼ ë§Œë“¤ê³  ServletInvocableHandlerMethodì— setHandlerMethodArgumentResolversë¡œ HandlerMethodArgumentResolverCompositeë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<h4 id="WebDataBinder"><a href="#WebDataBinder" class="headerlink" title="WebDataBinder"></a>WebDataBinder</h4><p>WebDataBinderëŠ” HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìë°” ë¹ˆì¦ˆ ì˜¤ë¸Œì íŠ¸ë¡œ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•˜ëŠ”ë° ì—¬ëŸ¬ë¶„ì´ HTTP ìš”ì²­ ì‹œ ë°ì´í„°ë¥¼ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ì†¡í•˜ê±°ë‚˜ í¼ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ëŠ” ê²½ìš° ìŠ¤í”„ë§ì€ WebDataBinderë¡œ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ í´ë˜ìŠ¤ì— ë°ì´í„°ë¥¼ ì£¼ì…í•©ë‹ˆë‹¤. ì´ë•Œ <a href="https://www.oracle.com/java/technologies/javase/javabeans-spec.html">JavaBeans ìŠ¤í™</a>ì— ë”°ë¥´ë¯€ë¡œ í”„ë¡œí¼í‹° í‘œí˜„ì‹ê³¼ Getter, Setterì— ë”°ë¼ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•©ë‹ˆë‹¤.</p>
<h4 id="HandlerMethodArgumentResolver"><a href="#HandlerMethodArgumentResolver" class="headerlink" title="HandlerMethodArgumentResolver"></a>HandlerMethodArgumentResolver</h4><p>HandlerMethodReturnValueHandlerê°€ ë¦¬í„´ ê°’ì— ë”°ë¼ ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤ë©´ HandlerMethodArgumentResolverëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ì¡´ì¬í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ ìœ í˜•ì— ë”°ë¼ ë°ì´í„° ì£¼ì…ì„ í•´ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. HandlerMethodArgumentResolverë„ ì¸í„°í˜ì´ìŠ¤ ì´ë¯€ë¡œ ì‹¤ì œë¡œ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬í˜„ì²´ë¥¼ ì°¾ì•„ì•¼í•©ë‹ˆë‹¤.</p>
<p>ìŠ¤í”„ë§ 5 ê¸°ì¤€ì˜ RequestMappingHandlerAdapterì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” HandlerMethodArgumentResolver ëª©ë¡ì´ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>RequestMappingHandlerAdapter.getDefaultArgumentResolvers</span></div><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerMethodArgumentResolver</span><span class="token punctuation">></span></span> <span class="token function">getDefaultArgumentResolvers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerMethodArgumentResolver</span><span class="token punctuation">></span></span> resolvers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Annotation-based argument resolution</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestParamMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestParamMapMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PathVariableMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PathVariableMapMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MatrixVariableMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MatrixVariableMapMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletModelAttributeMethodProcessor</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestResponseBodyMethodProcessor</span><span class="token punctuation">(</span><span class="token function">getMessageConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>requestResponseBodyAdvice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestPartMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getMessageConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>requestResponseBodyAdvice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestHeaderMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestHeaderMapMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletCookieValueMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExpressionValueMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SessionAttributeMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestAttributeMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Type-based argument resolution</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletRequestMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletResponseMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpEntityMethodProcessor</span><span class="token punctuation">(</span><span class="token function">getMessageConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>requestResponseBodyAdvice<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RedirectAttributesMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ModelMethodProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MapMethodProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ErrorsMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SessionStatusMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UriComponentsBuilderMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">KotlinDetector</span><span class="token punctuation">.</span><span class="token function">isKotlinPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ContinuationHandlerMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Custom arguments</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getCustomArgumentResolvers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        resolvers<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token function">getCustomArgumentResolvers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// Catch-all</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrincipalMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RequestParamMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token function">getBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletModelAttributeMethodProcessor</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> resolvers<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì—¬ëŸ¬ë¶„ì´ ì£¼ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ ëŒ€ë¶€ë¶„ì˜ ì˜ˆì œì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª‡ê°€ì§€ HandlerMethodArgumentResolver êµ¬í˜„ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th align="left">Argument Type</th>
<th align="left">HandlerMethodArgumentResolver</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@RequestParam</td>
<td align="left">RequestParamMethodArgumentResolver</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@PathVariable</td>
<td align="left">PathVariableMethodArgumentResolver</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@ModelAttribute</td>
<td align="left">ServletModelAttributeMethodProcessor</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@RequestBody</td>
<td align="left">RequestResponseBodyMethodProcessor</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">@RequestPart, MultipartFile, Part</td>
<td align="left">RequestPartMethodArgumentResolver</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">WebRequest, ServletRequest, MultipartRequest, InputStream</td>
<td align="left">ServletRequestMethodArgumentResolver</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">HttpSession, Principal, Locale, TimeZone, ZoneId</td>
<td align="left">ServletRequestMethodArgumentResolver</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ServletResponse, OutputStream, Writer</td>
<td align="left">ServletResponseMethodArgumentResolver</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>ì˜ˆë¥¼ ë“¤ì–´, <code>@ModelAttribute</code>ë¥¼ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ì— ì„ ì–¸í•˜ëŠ” ê²ƒì€ <code>ServletModelAttributeMethodProcessor</code>ì— ì˜í•´ WebDataBinderë¡œ ë°ì´í„° ë°”ì¸ë”©ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë©° <code>@RequestBody</code>ë¥¼ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ì— ì„ ì–¸í•˜ëŠ” ê²ƒì€ <code>RequestResponseBodyMethodProcessor</code>ì— ì˜í•´ HTTP ìš”ì²­ í˜ì´ë¡œë“œë¥¼ ë§¤ê°œë³€ìˆ˜ í˜•ì‹ìœ¼ë¡œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ ë³€í™˜í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ê¹Œì§€ í™•ì¸í•¨ìœ¼ë¡œì¨ ìŠ¤í”„ë§ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì— ë”°ë¼ ì–´ë–»ê²Œ ë°ì´í„° ë°”ì¸ë”©í•˜ê³  ë¦¬í„´ê°’ì— ë”°ë¥¸ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ì§€ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì„¸í•˜ê²Œ ì•Œì•„ë³¸ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì•„ì‰¬ì›€ì´ ìˆì§€ë§Œ ìš”ì²­ê³¼ ì‘ë‹µ ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ë§Œ ì•Œì•„ë„ ë¬´ë°©í•©ë‹ˆë‹¤.</p>
<p>ì‹œê°„ì´ ìˆë‹¤ë©´ ê° í´ë˜ìŠ¤ê°€ ì–´ë–¤ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ì‹œëŠ” ê²ƒë„ ì—¬ëŸ¬ë¶„ì˜ ì½”ë“œ ì‘ì„± ìŠ¤íƒ€ì¼ì— ë„ì›€ì´ ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ê°œë°œìë“¤ì€ ì—¬ëŸ¬ë¶„ë³´ë‹¤ í™•ì‹¤íˆ ë›°ì–´ë‚œ ê°œë°œìì´ê³  ì •í•´ì§„ ìŠ¤íƒ€ì¼ì— ë”°ë¼ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<h2 id="ìš”ì²­-ì‘ë‹µ-ì¼€ì´ìŠ¤"><a href="#ìš”ì²­-ì‘ë‹µ-ì¼€ì´ìŠ¤" class="headerlink" title="ìš”ì²­ ì‘ë‹µ ì¼€ì´ìŠ¤"></a>ìš”ì²­ ì‘ë‹µ ì¼€ì´ìŠ¤</h2><p>ê·¸ëƒ¥ ë§ˆë¬´ë¦¬í•˜ê¸°ì—ëŠ” ì•„ì‰¬ì›€ì´ ë§ìœ¼ë¯€ë¡œ OKKYì— ì˜¬ë¼ì˜¤ëŠ” ì§ˆë¬¸ê¸€ ì¤‘ HTTP ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì—¬ëŸ¬ê°€ì§€ ì¼€ì´ìŠ¤ë¥¼ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h3 id="415-Unsupported-Media-Type"><a href="#415-Unsupported-Media-Type" class="headerlink" title="415 Unsupported Media Type"></a>415 Unsupported Media Type</h3><p>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•˜ì—¬ ì„œë²„ê°€ 415 ì˜¤ë¥˜ë¥¼ ì‘ë‹µí•˜ëŠ” ê²½ìš° í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ í´ë¼ì´ì–¸íŠ¸ê°€ ì„¤ì •í•œ Content-Type ìœ í˜•ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. </p>
<p><a href="https://okky.kr/article/558309">https://okky.kr/article/558309</a></p>
<p>ìœ„ ì§ˆë¬¸ê¸€ì˜ ì¼ì°¨ì ì¸ ë¬¸ì œì ì€ ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ëŠ” <code>application/x-www-form-urlencoded</code>ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì‘ì„±í•´ë†“ê³  ì •ì‘ í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” <code>application/json</code>ìœ¼ë¡œ ìš”ì²­í•´ë²„ë ¸ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° Content-Typeì„ ì •ìƒì ìœ¼ë¡œ ì„¤ì •í•´ë„ ë˜ ë‹¤ë¥¸ ë¬¸ì œì ì„ ë‚´í¬í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œ ë‹¤ë£¨ì—ˆë˜ ìŠ¤í”„ë§ ë²„ì „ë³„ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„±ì´ ë‹¤ë¥´ë‹¤ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. ì§ˆë¬¸ìëŠ” ìŠ¤í”„ë§ 4 ì´ìƒë¶€í„° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Jackson 2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ì˜€ê³  vernumë‹˜ì´ ë‚¨ê¸°ì‹  ë§í¬ë¡œ í•´ê²°í•˜ì‹  ê²ƒ ê°™ì•„ë³´ì´ëŠ”ë° í•´ë‹¹ ë§í¬ë¡œ ë“¤ì–´ê°€ë³´ë©´ MappingJacksonHttpMessageConverterë¥¼ ì‚¬ìš©í•˜ê³  org.codehaus.jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="406-Not-Acceptable"><a href="#406-Not-Acceptable" class="headerlink" title="406 Not Acceptable"></a>406 Not Acceptable</h3><p>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ëŒ€í•˜ì—¬ ì„œë²„ê°€ 406 ì˜¤ë¥˜ë¥¼ ì‘ë‹µí•˜ëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì •í•œ Accept í—¤ë”ì— ë”°ë¼ ì„œë²„ì—ì„œ HTTP ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•  ìˆ˜ ì—†ìŒì„ ë§í•©ë‹ˆë‹¤. </p>
<p><a href="https://okky.kr/article/876362">https://okky.kr/article/876362</a><br><a href="https://okky.kr/article/878053">https://okky.kr/article/878053</a><br><a href="https://okky.kr/article/878257">https://okky.kr/article/878257</a></p>
<p>ìœ„ ì§ˆë¬¸ìë‹˜ì€ ë¬´ë ¤ 3ë²ˆì´ë‚˜ 406 ì˜¤ë¥˜ì— ëŒ€í•œ ì§ˆë¬¸ì„ í•˜ì§€ë§Œ ì• ì´ˆì— HTTP ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì´í•´ê°€ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë‹µë³€í•´ì£¼ì‹œëŠ” ë¶„ë“¤ì´ ë­ë¥¼ ë°”ê¿”ë°”ë¼ ì´ê±¸ ì§€ì •í•´ë¼í•´ì¤˜ë„ ë°”ê¿”ë´¤ëŠ”ë° ì•ˆëœë‹¤ëŠ” ë§ë§Œ ë˜í’€ì´í•˜ì‹­ë‹ˆë‹¤.</p>
<p>í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ System.outì€ ì˜ ì¶œë ¥ëœë‹¤ëŠ” ê²ƒì„ ë³´ë©´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ë¦¬í„´ê°’ì„ HTTP ì‘ë‹µìœ¼ë¡œ ë³€í™˜í•  ë•Œ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ í˜•ì‹ìœ¼ë¡œ ë°”ê¾¸ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì„ ì˜ˆìƒí•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œ @ResponseBodyë¥¼ ì„ ì–¸í•˜ë©´ ì‘ë‹µ ìœ í˜•ì— ë”°ë¥¸ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì°¾ì•„ ì‘ë‹µìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ì˜ ë“±ë¡ë˜ì–´ìˆëŠ”ì§€ë¥¼ ì˜ì‹¬í•´ë´ì•¼í•©ë‹ˆë‹¤. ì´ë¶„ì˜ ê²½ìš° <strong>Jackson 2 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´</strong> í•˜ê³  ë©”ì‹œì§€ ì»¨ë²„í„°ë¡œ <strong>MappingJacksonHttpMessageConverter</strong> ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì˜ëª»ëœ êµ¬ì„±ì„ í•˜ì…”ì„œ ë°œìƒí•˜ì…¨ì„ ê²ë‹ˆë‹¤. MappingJacksonHttpMessageConverterëŠ” ìŠ¤í”„ë§ ì›¹ ëª¨ë“ˆì´ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ëŠ” ë‚˜ì§€ ì•Šê² ì§€ë§Œ MappingJacksonHttpMessageConverterê°€ í•„ìš”ë¡œ í•˜ëŠ” Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ê¸° ë•Œë¬¸ì— ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<h3 id="ë°ì´í„°-ë°”ì¸ë”©-ê·œì¹™"><a href="#ë°ì´í„°-ë°”ì¸ë”©-ê·œì¹™" class="headerlink" title="ë°ì´í„° ë°”ì¸ë”© ê·œì¹™"></a>ë°ì´í„° ë°”ì¸ë”© ê·œì¹™</h3><p>ìŠ¤í”„ë§ ë¿ë§Œ ì•„ë‹ˆë¼ Jackson ì´ë‚˜ Lombokê³¼ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ê¸°ë³¸ì ìœ¼ë¡œ <code>JavaBeans</code> ìŠ¤í™ì— ë”°ë¼ ë™ì‘í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´ì„œ HTTP ìš”ì²­ì— í¬í•¨ëœ ë°ì´í„°ë¥¼ ìë°” ë„ë©”ì¸ í´ë˜ìŠ¤ì— ì£¼ì…í•˜ê¸° ìœ„í•œ <code>ê·œì¹™</code>ì´ ìˆë‹¤ëŠ” ë§ì¸ë°ìš”. </p>
<p>ë¨¼ì €, ë‹¤ìŒ ì§ˆë¬¸ì„ ì‚´í´ë´…ì‹œë‹¤.</p>
<p><a href="https://okky.kr/article/532781">https://okky.kr/article/532781</a></p>
<p>ìœ„ ì§ˆë¬¸ì˜ ê²½ìš° @RequestBody ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì •í•´ì„œ ë°ì´í„° ë°”ì¸ë”©ì„ ì‹œë„í–ˆìœ¼ë‚˜ DTOì— ë°ì´í„°ê°€ ì£¼ì…ë˜ì§€ ì•Šì€ ìƒí™©ì…ë‹ˆë‹¤. ê·¸ëŸ°ë° DTOì—ëŠ” í•„ë“œëª…ì„ UpperCaseë¡œ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼ë°˜ì ì¸ ìë°” ë„¤ì´ë° ê·œì¹™ì— ë”°ë¼ ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ì¹´ë©œ ì¼€ì´ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. í•„ë“œëª…ì„ ë°”ê¿”ì„œ í•´ê²°í•˜ì‹ ì§€ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ ë§Œì•½, í•„ë“œëª…ì„ UpperCaseë¡œ í•˜ê³  ë°ì´í„° ë°”ì¸ë”©ì„ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ í´ë˜ìŠ¤ ë‹¨ìœ„ë¡œ <code>@JsonNaming</code>ì„ ì„ ì–¸í•˜ê±°ë‚˜ í•„ë“œì— <code>@JsonProperty</code>ë¥¼ ì§€ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p>ë‘ë²ˆì§¸ ë°ì´í„° ë°”ì¸ë”© ê·œì¹™ì€ ë°ì´í„°ê°€ í¬í•¨ë˜ëŠ” ìœ„ì¹˜ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><a href="https://okky.kr/article/780096">https://okky.kr/article/780096</a></p>
<p>ìœ„ ì§ˆë¬¸ì€ HTTP ìš”ì²­ í˜ì´ë¡œë“œì— ë°ì´í„°ë¥¼ í¬í•¨ì‹œí‚¤ê³  @Modelattributeë¥¼ ì„ ì–¸í•˜ì—¬ ë°ì´í„° ë°”ì¸ë”©ì„ ì‹œë„í•˜ë ¤ê³  í•˜ì‹  ê²½ìš°ì…ë‹ˆë‹¤. @ModelattributeëŠ” URLì— í¬í•¨ë˜ëŠ” <code>ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</code> ë˜ëŠ” <code>í¼ ë°ì´í„°</code> í˜•ì‹ìœ¼ë¡œë¶€í„° ë°ì´í„° ë°”ì¸ë”©ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— HTTP ìš”ì²­ í˜ì´ë¡œë“œê°€ í¼ ë°ì´í„° í˜•ì‹ì´ ì•„ë‹ˆë¯€ë¡œ <code>@Modelattribute</code>ë¡œëŠ” ë°ì´í„° ë°”ì¸ë”©ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p>í•´ë‹¹ ì§ˆë¬¸ìë‹˜ë„ ì •ë§ë¡œ @Modelattributeë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì—ˆë‹¤ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ Content-Typeì„ application&#x2F;jsonì´ ì•„ë‹Œ application&#x2F;x-www-form-urlencoded í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì•¼ê² ì£ ?</p>
<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>ì›”ìš”ì¼ë¶€í„° í‡´ê·¼í•˜ê³ ë‚˜ì„œ ì§¬ì§¬íˆ ì‘ì„±í•œ ê¸€ì´ë¯€ë¡œ ì „ì²´ì ìœ¼ë¡œ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ ì–‘í•´í•´ì£¼ì‹œê¸° ë°”ë¼ë©° ìŠ¤í”„ë§ ê²½í—˜ì´ ë§ì§€ ì•Šìœ¼ì‹  ê°œë°œì ë¶„ë“¤ì—ê²Œ ì¡°ê¸ˆì´ë‚˜ë§ˆ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•˜ëŠ” ë°”ë¨ì…ë‹ˆë‹¤. ì´ìƒìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ HTTP ìš”ì²­ë¶€í„° ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ë‹µí•˜ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>HTTP</tag>
        <tag>Content-Type</tag>
        <tag>MediaType</tag>
        <tag>MessageConverter</tag>
      </tags>
  </entry>
  <entry>
    <title>ì  í‚¨ìŠ¤ í”„ë¡œì íŠ¸ ë¹Œë“œ</title>
    <url>/jenkins/</url>
    <content><![CDATA[<p><img data-src="/images/posts/jenkins/01.png"></p>
<p>ì  í‚¨ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ì´í…œì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì•„ì´í…œì„ ìƒì„±í•  ë•Œì—ëŠ” í”„ë¡œì íŠ¸ ë¹Œë“œ ìœ í˜•ì— ë”°ë¼ ì›¹ UI ë°©ì‹ì˜ í”„ë¦¬ìŠ¤íƒ€ì¼ ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì„±í•˜ëŠ” íŒŒì´í”„ë¼ì¸ ë“±ì„ ì„ íƒí•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ê³  ìˆë‹¤. ì¸í„°ë„·ì— ê³µìœ ëœ ë‚´ìš©ì— ë”°ë¼ì„œëŠ” íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ì˜ˆì œê°€ ë§ì´ ë³´ì´ì§€ë§Œ ëª¸ì„ ë‹´ê³  ìˆëŠ” ì¡°ì§ì—ì„œëŠ” í”„ë¦¬ìŠ¤íƒ€ì¼ ìœ í˜•ìœ¼ë¡œë„ ê°„ë‹¨í•˜ê²Œ ì›í•˜ëŠ” ë¹Œë“œ ê²°ê³¼ë¥¼ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>
<p>ë³¸ ê¸€ì—ì„œ ì‚¬ìš©ë  í”„ë¡œì íŠ¸ : <a href="https://github.com/kdevkr/beanstalk-deploy-sample">kdevkr&#x2F;beanstalk-deploy-sample</a>  </p>
<p>ìœ„ ë¦¬íŒŒì§€í† ë¦¬ëŠ” ì˜ˆì „ì— AWS Beanstalk Java SE Platform ìœ¼ë¡œ ë°°í¬í•˜ê¸° ìœ„í•œ ì˜ˆì œë¥¼ ì‘ì„±í•œ ê°„ë‹¨í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì´ë‹¤. ë³„ë‹¤ë¥¸ ê¸°ëŠ¥ì€ í¬í•¨í•˜ê³  ìˆì§€ ì•Šìœ¼ë©° build.gradleì— ëª‡ê°€ì§€ í”„ë¡œì íŠ¸ ë¹Œë“œë¥¼ ìœ„í•œ ì„¤ì •ì„ í•´ë‘” ìƒíƒœì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, -Pversion ë¼ëŠ” í”„ë¡œì íŠ¸ ì†ì„±ì„ í†µí•´ì„œ ë¹Œë“œ ë²„ì „ì„ ì ìš©í•  ìˆ˜ ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">./gradlew zipBeanstalk <span class="token parameter variable">-Pversion</span><span class="token operator">=</span><span class="token string">'1.0.1'</span>
<span class="token comment"># build/distributions/beanstalk-1.0.1.zip</span></code></pre>

<ul>
<li>build&#x2F;libs: .war íŒŒì¼ ë° Procfileì´ ìƒì„±ë˜ëŠ” í´ë”</li>
<li>build&#x2F;distributions: Beanstalk ë²ˆë“¤ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” í´ë”</li>
</ul>
<h4 id="ë¹Œë“œ-ì‹œ-ë§¤ê°œë³€ìˆ˜ë¡œ-ê¹ƒ-íƒœê·¸-ì„ íƒí•˜ê¸°"><a href="#ë¹Œë“œ-ì‹œ-ë§¤ê°œë³€ìˆ˜ë¡œ-ê¹ƒ-íƒœê·¸-ì„ íƒí•˜ê¸°" class="headerlink" title="ë¹Œë“œ ì‹œ ë§¤ê°œë³€ìˆ˜ë¡œ ê¹ƒ íƒœê·¸ ì„ íƒí•˜ê¸°"></a>ë¹Œë“œ ì‹œ ë§¤ê°œë³€ìˆ˜ë¡œ ê¹ƒ íƒœê·¸ ì„ íƒí•˜ê¸°</h4><p>Parameterized Build ì™€ <a href="https://plugins.jenkins.io/git-parameter/">Git Parameter</a> í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì„œ ê¹ƒ ì»¤ë°‹ì— ë¦´ë¦¬ì¦ˆë¥¼ ìœ„í•œ ë²„ì „ì„ íƒœê·¸ë¡œ ë‹¬ì•„ë†“ê³  ì  í‚¨ìŠ¤ì—ì„œ ê¹ƒ íƒœê·¸ë¥¼ í•„í„°í•˜ì—¬ ì„ íƒí•¨ìœ¼ë¡œì¨ ì›í•˜ëŠ” ê¸°ì¤€ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ê°€ì§€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ ê¹ƒ íƒœê·¸ë¥¼ ì°¾ì•„ì„œ ì„ íƒí•  ìˆ˜ ìˆê³  í•´ë‹¹ íƒœê·¸ê°€ ìˆëŠ” ì»¤ë°‹ì˜ ì†ŒìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.</p>
<p><img data-src="/images/posts/jenkins/02.png"><br><img data-src="/images/posts/jenkins/03.png"><br><img data-src="/images/posts/jenkins/04.png"></p>
<h4 id="í”„ë¡œì íŠ¸-ë¹Œë“œ-ë²„ì „-ì ìš©í•˜ê¸°"><a href="#í”„ë¡œì íŠ¸-ë¹Œë“œ-ë²„ì „-ì ìš©í•˜ê¸°" class="headerlink" title="í”„ë¡œì íŠ¸ ë¹Œë“œ ë²„ì „ ì ìš©í•˜ê¸°"></a>í”„ë¡œì íŠ¸ ë¹Œë“œ ë²„ì „ ì ìš©í•˜ê¸°</h4><p>ìœ„ì—ì„œ <a href="https://github.com/kdevkr/beanstalk-deploy-sample/releases/tag/v1.0.0">v1.0.0</a> íƒœê·¸ë¥¼ ë²„ì „ìœ¼ë¡œ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©° ì´ ë²„ì „ì„ ë¹Œë“œë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ì—ë„ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ í”„ë¡œì íŠ¸ ì†ì„±ìœ¼ë¡œì¨ ì§€ì •ë˜ë„ë¡ í•´ì•¼í•œë‹¤. ë¹Œë“œ ë‹¨ê³„ì—ì„œ Invoke Gradle scriptì˜ ê³ ê¸‰ ì˜µì…˜ì„ ì—´ì–´ë³´ë©´ ëª¨ë“  ì¡ íŒŒë¼ë¯¸í„°ë¥¼ í”„ë¡œì íŠ¸ ì†ì„±ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” í•­ëª©ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.</p>
<p><img data-src="/images/posts/jenkins/05.png"></p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ë§Œì•½, ê·¸ë˜ë“¤ ìŠ¤í¬ë¦½íŠ¸ê°€ ì•„ë‹Œ ì§ì ‘ ì‰˜ì—ì„œ ë¹Œë“œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„ íƒí•œ íƒœê·¸ íŒŒë¼ë¯¸í„°ë¥¼ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤. </span>
./gradlew <span class="token parameter variable">-Pversion</span><span class="token operator">=</span><span class="token variable">$version</span> zipBeanstalk</code></pre>

<h4 id="í”„ë¡œì íŠ¸-ë¹Œë“œ-ê²°ê³¼ë¥¼-ìŠ¬ë™ìœ¼ë¡œ-ë³´ë‚´ê¸°"><a href="#í”„ë¡œì íŠ¸-ë¹Œë“œ-ê²°ê³¼ë¥¼-ìŠ¬ë™ìœ¼ë¡œ-ë³´ë‚´ê¸°" class="headerlink" title="í”„ë¡œì íŠ¸ ë¹Œë“œ ê²°ê³¼ë¥¼ ìŠ¬ë™ìœ¼ë¡œ ë³´ë‚´ê¸°"></a>í”„ë¡œì íŠ¸ ë¹Œë“œ ê²°ê³¼ë¥¼ ìŠ¬ë™ìœ¼ë¡œ ë³´ë‚´ê¸°</h4><p>í”„ë¡œì íŠ¸ ê·œëª¨ì— ë”°ë¼ ë¹Œë“œ ìˆ˜í–‰ ì‹œê°„ì´ ìƒë‹¹íˆ ì†Œìš”ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í”„ë¡œì íŠ¸ ë¦´ë¦¬ì¦ˆë¥¼ ë‹´ë‹¹í•˜ëŠ” ì¸ì›ë“¤ì´ ë¦´ë¦¬ì¦ˆ ë²„ì „ ë¹Œë“œì— ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ ìœ ë¬´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ìŠ¬ë™ ë©”ì‹ ì €(êµ¬ê¸€ ì±—ì´ë‚˜ ì´ë©”ì¼ë„ ê°€ëŠ¥)ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë„ë¡ ì•Œë¦¼ ì„¤ì •ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. <a href="https://kdevkr.slack.com/apps/A0F7VRFKN-jenkins-c">Jenkins CI ìŠ¬ë™ ì•±</a> ê·¸ë¦¬ê³  <a href="https://plugins.jenkins.io/slack/">Slack Notification</a> í”ŒëŸ¬ê·¸ì¸ê³¼ í•¨ê»˜ ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ í™œìš©í•œë‹¤ë©´ SFTP ì„œë²„ë¥¼ ì‚¬ìš©í•´ì„œ ë³„ë„ë¡œ ë¹Œë“œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì „ë‹¬í•˜ê³  ìˆ˜ë™ ë°°í¬ë¥¼ í•´ì•¼í•œë‹¤ë©´ ì—…ë¡œë“œëœ SFTP ê²½ë¡œë¥¼ ë©”ì‹œì§€ë¡œ ì „ë‹¬í•œë‹¤ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ìœ„í•´ì„œ ì‹¤í–‰í•´ì•¼í•  ëª…ë ¹ì–´ë¥¼ ì•ˆë‚´í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤.</p>
<p><img data-src="/images/posts/jenkins/06.png"><br><img data-src="/images/posts/jenkins/07.png"></p>
<h4 id="ë¹Œë“œ-íŒŒì¼ì„-ì›ê²©-í˜¸ìŠ¤íŠ¸ë¡œ-ì „ë‹¬í•˜ê¸°"><a href="#ë¹Œë“œ-íŒŒì¼ì„-ì›ê²©-í˜¸ìŠ¤íŠ¸ë¡œ-ì „ë‹¬í•˜ê¸°" class="headerlink" title="ë¹Œë“œ íŒŒì¼ì„ ì›ê²© í˜¸ìŠ¤íŠ¸ë¡œ ì „ë‹¬í•˜ê¸°"></a>ë¹Œë“œ íŒŒì¼ì„ ì›ê²© í˜¸ìŠ¤íŠ¸ë¡œ ì „ë‹¬í•˜ê¸°</h4><p>AWS Beanstalk í™˜ê²½ì— ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” <a href="https://plugins.jenkins.io/aws-beanstalk-publisher-plugin/">AWS Elastic Beanstalk Publisher</a> í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ê² ì§€ë§Œ ë³´ì•ˆ ìƒì˜ ë¬¸ì œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ íŒŒì¼ì„ SFTP ì„œë²„ë¡œ ì—…ë¡œë“œí•´ì•¼í•  í™˜ê²½ì´ë¼ë©´ <a href="https://plugins.jenkins.io/publish-over-ssh/">Publish Over SSH</a> í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì„œ PEM ì¸ì¦ì„œë¥¼ í†µí•´ ë¹Œë“œ íŒŒì¼ì„ ì›ê²© í˜¸ìŠ¤íŠ¸ë¡œ ì „ë‹¬í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li>AWS Elastic Beanstalk Publisher</li>
<li>S3 publisher</li>
<li>Publish Over SSH</li>
</ul>
<p>ì´ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì˜ˆì œëŠ” <a href="https://github.com/kdevkr/mambo-box/tree/main/jenkins">kdevkr&#x2F;mambo-box&#x2F;jenkins</a>ì— ê¸°ë¡í•´ë†“ê³ ì í•œë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>JSON Web Token</title>
    <url>/jwt/</url>
    <content><![CDATA[<p>ìµœê·¼ ì‹œìŠ¤í…œì—ì„œ ë°œì†¡ë˜ëŠ” íŠ¹ì • ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìê°€ ê´€ë ¨ëœ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¬ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ì„œ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ëŠ” ê²½ìš°ì—ëŠ” ìì‹ ì˜ ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œìŠ¤í…œì— ì¸ì¦í•˜ê¸° ì „ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë©”ì¼ì— í¬í•¨ëœ ë§í¬ë¥¼ í†µí•´ì„œ ì ‘ê·¼í•  ë•Œ ì‚¬ìš©ì ì¸ì¦ì„ ì¼ì‹œì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°©ì•ˆì„ ë„ì…í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h2 id="Token-based-Authentication"><a href="#Token-based-Authentication" class="headerlink" title="Token-based Authentication"></a>Token-based Authentication</h2><p>í† í° ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì€ ì‚¬ìš©ì ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ì‹œìŠ¤í…œì„ ì´ìš©í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ì œê³µí•˜ê¸° ìœ„í•œ ë°©ì‹ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ í† í°ì´ë¼í•¨ì€ ì‹œìŠ¤í…œì´ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ë¬¸ìì—´ ë°ì´í„°ë¥¼ ë§í•©ë‹ˆë‹¤. íœ´ëŒ€í° ë¬¸ì ì¸ì¦ì´ë‚˜ ì´ë©”ì¼ë¡œ ë°œì†¡ë˜ëŠ” ì¸ì¦ì½”ë“œ ë˜ëŠ” ë§í¬ë¥¼ í† í°ì´ë¼ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í˜„ì¬ ì‹œìŠ¤í…œì€ Spring Security OAuthë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ í¬ë ˆë´ì…œ ê¸°ë°˜ì˜ í† í°ìœ¼ë¡œ OpenAPIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆëŠ”ë° JWTê°€ ì•„ë‹Œ JdbcTokenStoreë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸°ì— SecureRandomBytesKeyGeneratorë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê°œë°œì ì»¤ë®¤ë‹ˆí‹°ë¥¼ ë³´ë©´ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì´ ì•„ë‹Œ í† í° ê¸°ë°˜ìœ¼ë¡œ JWTë¥¼ ë°œê¸‰í•˜ê³  ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ í†µì‹ í•  ë•Œ JWTë¥¼ ìš”ì²­ í—¤ë”ì— í¬í•¨ì‹œì¼œ ì‹œìŠ¤í…œì— ëŒ€í•œ ê¶Œí•œ ë° ì¸ê°€ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
<h3 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h3><p><a href="https://datatracker.ietf.org/doc/html/rfc7519">RFC7519</a>ë¡œ ì •ì˜ë˜ì–´ìˆëŠ” JWT(JSON Web Token)ì€ ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ Base64 ì¸ì½”ë”©ìœ¼ë¡œ í‘œí˜„í•˜ë©´ì„œ í˜ì´ë¡œë“œì— ëŒ€í•œ ì „ìì„œëª…ì„ í†µí•´ì„œ ì¸ì¦ ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰í•œ í† í°ì„ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•˜ì—¬ í† í°ì— í¬í•¨ëœ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ê¶Œí•œ ë° ì¸ê°€ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JWTì— ëŒ€í•´ì„œëŠ” ì•„ë˜ì˜ ë§í¬ë¥¼ í†µí•´ì„œ ê°„ë‹¨í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://jwt.io/introduction">Introduction to JSON Web Tokens</a></li>
<li><a href="https://auth0.com/learn/json-web-tokens/">Get Started with JSON Web Tokens</a></li>
</ul>
<h3 id="URI-Query-String"><a href="#URI-Query-String" class="headerlink" title="URI Query String"></a>URI Query String</h3><p><em>JSON Web Token (JWT) is a compact claims representation format intended for space constrained environments such as HTTP Authorization headers and URI query parameters.</em></p>
<p>ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ëŠ” GET ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” URL(URI + Query String)ì´ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ HTTP í†µì‹  ì‹œ Authorization ë˜ëŠ” X-Auth-Token í—¤ë”ì— í† í°ì„ í¬í•¨í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. JWTëŠ” ê·¸ ìì²´ë¡œ Base64 URL Safeë¡œ ì¸ì½”ë”©ë˜ë¯€ë¡œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— í¬í•¨í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="Token-Parameter"><a href="#Token-Parameter" class="headerlink" title="Token Parameter"></a>Token Parameter</h4><p>ì´ë©”ì¼ì— í¬í•¨ë˜ëŠ” ë§í¬ì— í† í° ì •ë³´ê°€ ì–´ë–»ê²Œ ë‹´ê²¨ì§€ëŠ”ì§€ ë‘ê°€ì§€ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ëŠ” ì´ë©”ì¼ê³¼ ì¸ì¦ì„ ìœ„í•œ í† í°ì´ Path Variable í˜•íƒœë¡œ URIì— í¬í•¨ë˜ëŠ” ë°©ì‹ì´ë©°, ë‘ë²ˆì§¸ëŠ” URIì— ëŒ€í•œ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ í† í° íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ë¨ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<ul>
<li><a href="http://daily-devblog.com/api/regist/certify/kdevkr@gmail.com/$TOKEN">http://daily-devblog.com/api/regist/certify/kdevkr@gmail.com/$TOKEN</a></li>
<li><a href="https://careers.kakao.com/applicant/checkEmail?token=$TOKEN&jobOfferId=P-1">https://careers.kakao.com/applicant/checkEmail?token=$TOKEN&amp;jobOfferId=P-1</a></li>
</ul>
<p><img data-src="/images/posts/jwt/01.png"></p>
<p>ë‘ë²ˆì§¸ì²˜ëŸ¼ ì´ë©”ì¼ì— í¬í•¨ëœ ë§í¬ë¥¼ ë‚˜ì¤‘ì— í´ë¦­í•˜ë”ë¼ë„ ì‹œìŠ¤í…œì—ì„œ ì¸ì‹í•  ìˆ˜ ìˆëŠ” í† í°ì¸ì§€ ë§Œë£Œë˜ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ì—¬ ì‹œìŠ¤í…œì— ëŒ€í•œ ì¸ê°€ë¥¼ íŒë‹¨í•˜ê²Œ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ ì´ë©”ì¼ì—ëŠ” ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰í•œ í† í°ì´ ë§í¬ì— í¬í•¨ë˜ì–´ ìœ ì§€ë˜ë¯€ë¡œ ë³´ì•ˆ ìƒ ë§Œë£Œ ì‹œê°„ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h3 id="Implementation-Sample"><a href="#Implementation-Sample" class="headerlink" title="Implementation Sample"></a>Implementation Sample</h3><p>ì´ë©”ì¼ ë§í¬ì— í¬í•¨ëœ í† í° íŒŒë¼ë¯¸í„°ì— ë”°ë¼ í† í° ê¸°ë°˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ìˆ˜í–‰í•˜ê³  ì‚¬ìš©ì ì¸ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ ìƒ˜í”Œ í˜•íƒœë¡œ ë§Œë“¤ê³  ì¼ë ¨ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ê³µìœ í•˜ê³ ìí•¨ì´ë‹ˆ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë¬¸ì œì ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h4><p>ìš°ì„  ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê¸°ë°˜ì˜ í™˜ê²½ì´ë¼ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©° JWT ë°œê¸‰ê³¼ ê²€ì¦ì„ ìœ„í•´ì„œ ì‚¬ìš©í•  <a href="https://github.com/jwtk/jjwt">Java JWT</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ JWT ë°œê¸‰ ì‹œ ì„œëª…í•  í‚¤ í˜ì–´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ <a href="https://www.bouncycastle.org/">Bouncy Castle</a>ë¥¼ ì˜ì¡´ì„±ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'com.google.code.gson:gson:2.9.0'</span>
    implementation <span class="token string">'io.jsonwebtoken:jjwt-api:0.11.5'</span>
    runtimeOnly <span class="token string">'io.jsonwebtoken:jjwt-impl:0.11.5'</span>
    runtimeOnly <span class="token string">'io.jsonwebtoken:jjwt-jackson:0.11.5'</span>
    implementation <span class="token string">'org.bouncycastle:bcprov-jdk18on:1.71'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Generate-EC-Key-Pair"><a href="#Generate-EC-Key-Pair" class="headerlink" title="Generate EC Key Pair"></a>Generate EC Key Pair</h4><p>ë³¸ ìƒ˜í”Œì—ì„œëŠ” <a href="https://datatracker.ietf.org/doc/html/rfc7518#section-3">Cryptographic Algorithms for Digital Signatures and MACs</a> ëª©ë¡ ì¤‘ì—ì„œ ES256ì´ë¼ëŠ” ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” JWT í† í°ì„ ë°œê¸‰í•˜ê¸° ìœ„í•´ P-256 ê³¡ì„ ì„ ì‚¬ìš©í•˜ëŠ” EC í‚¤ í˜ì–´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">openssl ecparam <span class="token parameter variable">-name</span> prime256v1 <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-noout</span> <span class="token parameter variable">-out</span> ec-private.pem
openssl ec <span class="token parameter variable">-in</span> ec-private.pem <span class="token parameter variable">-pubout</span> <span class="token parameter variable">-out</span> ec-public.pem
openssl pkcs8 <span class="token parameter variable">-topk8</span> <span class="token parameter variable">-inform</span> pem <span class="token parameter variable">-in</span> ec-private.pem <span class="token parameter variable">-outform</span> pem <span class="token parameter variable">-nocrypt</span> <span class="token parameter variable">-out</span> ec-private.pkcs8</code></pre>

<h4 id="Generate-JWT"><a href="#Generate-JWT" class="headerlink" title="Generate JWT"></a>Generate JWT</h4><p>JWT ë°œê¸‰ì„ ìœ„í•œ EC í‚¤ í˜ì–´ë¥¼ ì¤€ë¹„í–ˆìœ¼ë¯€ë¡œ í´ë˜ìŠ¤íŒ¨ìŠ¤ë¡œë¶€í„° í‚¤ í˜ì–´ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  í† í° ë°œê¸‰ì„ ìœ„í•œ ìœ í‹¸ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">SignatureAlgorithm</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>bouncycastle<span class="token punctuation">.</span>util<span class="token punctuation">.</span>io<span class="token punctuation">.</span>pem<span class="token punctuation">.</span></span><span class="token class-name">PemReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ClassPathResource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StreamUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">SecretKeySpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">DatatypeConverter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">StringReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Key</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">KeyFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">PKCS8EncodedKeySpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">X509EncodedKeySpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ConcurrentHashMap</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KeyUtil</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Key</span><span class="token punctuation">></span></span> signingKeyStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Key</span><span class="token punctuation">></span></span> parseKeyStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Key</span> <span class="token function">parseKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>parseKeyStore<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            key <span class="token operator">=</span> parseKeyStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> content<span class="token punctuation">;</span>
            <span class="token class-name">PemReader</span> pemReader<span class="token punctuation">;</span>
            <span class="token class-name">X509EncodedKeySpec</span> spec<span class="token punctuation">;</span>
            <span class="token class-name">KeyFactory</span> kf<span class="token punctuation">;</span>

            <span class="token keyword">switch</span> <span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">case</span> <span class="token constant">HS256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/hs256/secret.key"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span><span class="token class-name">DatatypeConverter</span><span class="token punctuation">.</span><span class="token function">parseBase64Binary</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">getJcaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">RS256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/rs256/rsa-public.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">ES256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/es256/ec-public.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"EC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Elliptic Curve</span>
                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">"Only support HS256, RS256, ES256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        parseKeyStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Key</span> <span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Key</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>signingKeyStore<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            key <span class="token operator">=</span> signingKeyStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> content<span class="token punctuation">;</span>
            <span class="token class-name">PemReader</span> pemReader<span class="token punctuation">;</span>
            <span class="token class-name">PKCS8EncodedKeySpec</span> spec<span class="token punctuation">;</span>
            <span class="token class-name">KeyFactory</span> kf<span class="token punctuation">;</span>

            <span class="token keyword">switch</span> <span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">case</span> <span class="token constant">HS256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/hs256/secret.key"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    key <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span><span class="token class-name">DatatypeConverter</span><span class="token punctuation">.</span><span class="token function">parseBase64Binary</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">getJcaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">RS256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/rs256/rsa-private.pem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"RSA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token constant">ES256</span><span class="token operator">:</span>
                    content <span class="token operator">=</span> <span class="token class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"jwt/es256/ec-private.pkcs8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    pemReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PemReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>pemReader<span class="token punctuation">.</span><span class="token function">readPemObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"EC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Elliptic Curve</span>
                    key <span class="token operator">=</span> kf<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">"Only support HS256, RS256, ES256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        signingKeyStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">TypeToken</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Type</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">Key</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">ZonedDateTime</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtUtil</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">REGEX</span> <span class="token operator">=</span> <span class="token string">"^[A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*$"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Type</span> hashMapType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HashMap</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isJwt</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> token <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>token<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token constant">REGEX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">isValid</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token function">alg</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">,</span> <span class="token class-name">String</span> alg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Key</span> publicKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>alg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JwtParser</span> parser <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">isSigned</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">alg</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chunks <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> header <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getUrlDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>chunks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> headerMap <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>header<span class="token punctuation">,</span> hashMapType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> headerMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"alg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token keyword">long</span> expires<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> claims<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span> signatureAlgorithm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">long</span> issuedAt <span class="token operator">=</span> <span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"UTC"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toZoneId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> expiration <span class="token operator">=</span> issuedAt <span class="token operator">+</span> expires<span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Key</span> signingKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span>signatureAlgorithm<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>signingKey <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">JwtException</span><span class="token punctuation">(</span><span class="token string">"Not found signingKey for "</span> <span class="token operator">+</span> signatureAlgorithm<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setHeaderParam</span><span class="token punctuation">(</span><span class="token string">"typ"</span><span class="token punctuation">,</span> <span class="token string">"JWT"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setIssuer</span><span class="token punctuation">(</span><span class="token string">"JWT Sample Issuer"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setIssuedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>issuedAt<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expiration<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span>signingKey<span class="token punctuation">,</span> signatureAlgorithm<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">addClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedJwtException</span><span class="token punctuation">(</span><span class="token string">"Cannot generate jwt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> <span class="token function">parseClaims</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token function">parseClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token function">alg</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> <span class="token function">parseClaims</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">,</span> <span class="token class-name">String</span> alg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Key</span> publicKey <span class="token operator">=</span> <span class="token class-name">KeyUtil</span><span class="token punctuation">.</span><span class="token function">signingKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>alg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JwtParser</span> parser <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Add-Token-Filter-in-SecurityFilterChain"><a href="#Add-Token-Filter-in-SecurityFilterChain" class="headerlink" title="Add Token Filter in SecurityFilterChain"></a>Add Token Filter in SecurityFilterChain</h4><p>ì‹œìŠ¤í…œì—ì„œ ë°œê¸‰ëœ í† í°ì´ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ì—ˆì„ ë•Œ JWTë¥¼ ê²€ì¦í•˜ê³  ì‚¬ìš©ì ì¸ì¦ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•„í„°ë¥¼ ì‘ì„±í•˜ê³  ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„° ì²´ì¸ì— ë“±ë¡í•©ë‹ˆë‹¤. </p>
<p><strong>TokenAuthenticationFilter.java</strong></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">JwtUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">Claims</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">Jws</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">JwtException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordAuthenticationToken</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SecurityContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SecurityContextHolder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">AntPathMatcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">OncePerRequestFilter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenAuthenticationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">ADDITIONAL_URI_PATTERN</span> <span class="token operator">=</span> <span class="token string">"/users/&#123;username&#125;"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AntPathMatcher</span> pathMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserDetailsService</span> userDetailsService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TokenAuthenticationFilter</span><span class="token punctuation">(</span><span class="token class-name">UserDetailsService</span> userDetailsService<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDetailsService <span class="token operator">=</span> userDetailsService<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">isJwt</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> base64RequestURI <span class="token operator">=</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getUrlEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> redirectLoginUrl <span class="token operator">=</span> <span class="token string">"/login?redirect="</span> <span class="token operator">+</span> base64RequestURI<span class="token punctuation">;</span>

            <span class="token keyword">boolean</span> isValidToken<span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                isValidToken <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> claims <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">parseClaims</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Claims</span> body <span class="token operator">=</span> claims<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> subject <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathMatcher<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token constant">ADDITIONAL_URI_PATTERN</span><span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        isValidToken <span class="token operator">=</span> <span class="token function">isValidWithVariables</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>

                    <span class="token keyword">if</span> <span class="token punctuation">(</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">UserDetails</span> userDetails <span class="token operator">=</span> userDetailsService<span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">UsernamePasswordAuthenticationToken</span> authentication <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>userDetails<span class="token punctuation">,</span> token<span class="token punctuation">,</span> userDetails<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">SecurityContext</span> securityContext <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        securityContext<span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">JwtException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                isValidToken <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isValidToken<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// NOTE: If token expired or invalid, redirect for login page.</span>
                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>redirectLoginUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isValidWithVariables</span><span class="token punctuation">(</span><span class="token class-name">Claims</span> body<span class="token punctuation">,</span> <span class="token class-name">String</span> requestURI<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> variables <span class="token operator">=</span> pathMatcher<span class="token punctuation">.</span><span class="token function">extractUriTemplateVariables</span><span class="token punctuation">(</span><span class="token constant">ADDITIONAL_URI_PATTERN</span><span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userId <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> variables<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> variables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong>SecurityConfig.java</strong><br>ê°„ë‹¨í•œ ìƒ˜í”Œì´ë¯€ë¡œ ì¸ë©”ëª¨ë¦¬ ì‚¬ìš©ìë¥¼ ë“±ë¡í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">TokenAuthenticationFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">HttpSecurity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">EnableWebSecurity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetails</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span><span class="token class-name">UserDetailsService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>provisioning<span class="token punctuation">.</span></span><span class="token class-name">InMemoryUserDetailsManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">SecurityFilterChain</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordAuthenticationFilter</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">&#123;</span>

    <span class="token comment">// https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/in-memory.html</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDetailsService</span> <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">UserDetails</span> mambo <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token string">"mambo"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"&#123;noop&#125;1234"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">,</span> <span class="token string">"ADMIN"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryUserDetailsManager</span><span class="token punctuation">(</span>mambo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#jc-httpsecurity</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">,</span> <span class="token class-name">TokenAuthenticationFilter</span> tokenAuthenticationFilter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/users/&#123;username&#125;/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>tokenAuthenticationFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Generate-JWT-Test"><a href="#Generate-JWT-Test" class="headerlink" title="Generate JWT Test"></a>Generate JWT Test</h4><p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ì„œ í† í°ì„ ë°œê¸‰í•´ë³´ê³  ì´ë©”ì¼ì— í¬í•¨ë  ë§í¬ì²˜ëŸ¼ í† í° íŒŒë¼ë¯¸í„°ì— í† í°ì„ í¬í•¨í•˜ì—¬ ë¸Œë¼ìš°ì € ì£¼ì†Œì— ì§ì ‘ ì…ë ¥í•´ë´…ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">class</span> <span class="token class-name">JwtUtilTest</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> subject <span class="token operator">=</span> <span class="token string">"mambo"</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> expires <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"mambo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>subject<span class="token punctuation">,</span> expires<span class="token punctuation">,</span> claims<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">ES256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"\nmambo.kr:8080/users/mambo?token=&#123;&#125;"</span><span class="token punctuation">,</span> jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>í† í°ì´ ë°œê¸‰ë˜ê³ ë‚˜ì„œ 3ë¶„ ì´ë‚´ì—ëŠ” ë¡œê·¸ì¸ ì²˜ë¦¬ê°€ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ë§Œë£Œëœ ì´í›„ë¼ë©´ ì˜¬ë°”ë¥´ê²Œ ì„œëª…ëœ í† í°ì¼ì§€ë¼ë„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ë³¸ ê¸€ì—ì„œëŠ” JWSìœ¼ë¡œë§Œ êµ¬ì„±ëœ JWT í† í°ì„ ë°œê¸‰í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°œê¸‰ìë¡œë¶€í„° ì„œëª…ëœ ê²ƒì„ì„ ì¦ëª…í•˜ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì¸ì¦ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, JWTëŠ” ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì´ë©”ì¼ê³¼ ê°™ì€ ê³³ì— ë…¸ì¶œë˜ì–´ìˆìœ¼ë¯€ë¡œ ì§§ì€ ë§Œë£Œ ì‹œê°„ì„ ë‘ì–´ ì œí•œ ì‹œê°„ë‚´ì—ë§Œ ì¸ì¦í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.<br>ì¢€ ë” ì‹œê°„ì´ ì£¼ì–´ì§„ë‹¤ë©´ JWSì™€ í•¨ê»˜ JWEë¡œ í´ë ˆì„ í˜ì´ë¡œë“œê°€ ì•”í˜¸í™”ëœ JWT í† í°ì„ ë°œê¸‰í•´ë³¼ ìˆ˜ ìˆëŠ” ê²ƒë„ ì•Œì•„ë´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œ ì‚¬ìš©í–ˆë˜ jjwt ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œëŠ” JWEë¥¼ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ <a href="https://connect2id.com/products/nimbus-jose-jwt">Nimbus JOSE + JWT</a>ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.spring.io/spring-security/reference/servlet/configuration/java.html">Spring Security Docs</a></li>
<li><a href="https://jwt.io/">JWT Debugger</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc7519">RFC7519</a></li>
<li><a href="https://jwt.io/introduction">Introduction to JSON Web Tokens</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>KDB Connection Pool</title>
    <url>/kdb-connection-pool/</url>
    <content><![CDATA[<blockquote>
<p>TCP ì†Œì¼“ì´ ì—°ê²°ëœ ìƒíƒœë¡œ ë‚¨ì•„ìˆëŠ” <a href="https://github.com/kdevkr/mambo-box/blob/main/errors/2022-12-08.md">TCP ì»¤ë„¥ì…˜ ëˆ„ìˆ˜ ë¬¸ì œ</a>ë¥¼ ê²½í—˜í•˜ê³ ë‚˜ì„œ ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ êµ¬í˜„ì— ëŒ€í•´ì„œ ë‹¤ì‹œí•œë²ˆ í•™ìŠµí•´ë³´ê³  ì •ë¦¬í•˜ëŠ” ê¸€ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ì•„ë§ˆë„ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì™€ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ë“¤ì— ëŒ€í•œ ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì€ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” <a href="https://github.com/KxSystems/javakdb/blob/master/javakdb/src/main/java/com/kx/c.java">ìë°” í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬</a>ë¥¼ ì œê³µí•˜ê³  ìˆì§€ë§Œ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë‹¨ì¼ ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ë°©ì‹ì„ì— ë”°ë¼ì„œ ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì€ ìì²´ì ìœ¼ë¡œ ë‚´ì¥í•˜ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ TCP ì—°ê²°ì— ëŒ€í•œ ë¶€í•˜ë¥¼ ìƒê°í•œë‹¤ë©´ ìì£¼ TCP ì†Œì¼“ì„ ì—°ê²°í•˜ë¯€ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë ˆì´í„´ì‹œë¥¼ ë° ìì› ë‚­ë¹„ë¥¼ ë¬´ì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<h4 id="ìë°”-ì»¤ë„¥ì…˜-í’€-ë¼ì´ë¸ŒëŸ¬ë¦¬"><a href="#ìë°”-ì»¤ë„¥ì…˜-í’€-ë¼ì´ë¸ŒëŸ¬ë¦¬" class="headerlink" title="ìë°” ì»¤ë„¥ì…˜ í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬"></a>ìë°” ì»¤ë„¥ì…˜ í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬</h4><p>ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ëŒ€ë¶€ë¶„ <a href="https://commons.apache.org/proper/commons-pool/">Apache Commons Pool2</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ì„œ ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ë ˆë””ìŠ¤ í´ë¼ì´ì–¸íŠ¸ë¡œ ë§ì´ ì‚¬ìš©ì¤‘ì¸ <a href="https://github.com/lettuce-io/lettuce-core/blob/main/src/main/java/io/lettuce/core/support/ConnectionPoolSupport.java">Lettuceì˜ ì»¤ë„¥ì…˜ í’€ ì§€ì›</a>ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° <a href="https://commons.apache.org/proper/commons-dbcp/">Apache Commons DBCP2</a>ë¼ê³  í•˜ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ëŒ€í‘œì ì¸ ì»¤ë„¥ì…˜ í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ Commons Poolë¡œ êµ¬í˜„ë˜ì–´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Apache Commons Pool2ì—ì„œëŠ” <a href="https://commons.apache.org/proper/commons-pool/examples.html">ê°„ë‹¨í•œ PooledObjectFactory ì˜ˆì œ</a>ë¥¼ ì œê³µí•˜ê³  ìˆì§€ë§Œ ìì„¸í•œ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì»¤ë„¥ì…˜ í’€ êµ¬í˜„ ì˜ˆì œë¥¼ ê²€ìƒ‰í•´ë³´ë©´ ìƒê°ë³´ë‹¤ ê´€ë ¨ëœ ê¸€ì´ ì—†ì—ˆê¸°ì— ì§ì ‘ì ìœ¼ë¡œ ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê°œë°œìëŠ” ë§ì§€ ì•Šì„ ê²ƒì´ë¼ ìƒê°ë©ë‹ˆë‹¤. ì»¤ë„¥ì…˜ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ë¼ì´í”„ ì‚¬ì´í´ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ PooledObjectFactory ì¸í„°í˜ì´ìŠ¤ê°€ ë‹´ë‹¹í•˜ë¯€ë¡œ ì›í•˜ëŠ” ì»¤ë„¥ì…˜ í’€ ë™ì‘ì„ BasePooledObjectFactoryë¥¼ ìƒì†í•˜ì—¬ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤. ë‹¤ë§Œ, ì»¤ë„¤ì…˜ í’€ êµ¬í˜„ ì‹œ ì¤‘ìš”í•˜ê²Œ ìƒê°í•´ì•¼í•  ë¶€ë¶„ì€ BasePooledObjectFactoryì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ êµ¬í˜„í•´ë‘ì–´ì„œ êµ¬í˜„ì„ ê°•ì œí•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ ì¤‘ ì»¤ë„¥ì…˜ í’€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ê°€ ì‚­ì œë˜ëŠ” ëŒ€ìƒì´ ë˜ëŠ” ê²½ìš° í˜¸ì¶œë˜ëŠ” destoryObject í•¨ìˆ˜ ë™ì‘ì„ ìƒëµí•´ë²„ë¦´ ìˆ˜ ìˆë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.</p>
<h4 id="CPooledObjectFactory"><a href="#CPooledObjectFactory" class="headerlink" title="CPooledObjectFactory"></a>CPooledObjectFactory</h4><p>ì»¤ë„¥ì…˜ í’€ ê¸°ëŠ¥ì„ ì²˜ìŒ êµ¬í˜„í–ˆì„ ë‹¹ì‹œì— ê³ ë ¤í•˜ì§€ ëª»í•œ ë¯¸í¡í•œ ì ì„ ì¸ì§€í•˜ê³  KDB í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì»¤ë„¥ì…˜ì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê´€ë¦¬í•˜ëŠ” CPooledObjectFactoryë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CPooledObjectFactory</span> <span class="token keyword">extends</span> <span class="token class-name">BasePooledObjectFactory</span><span class="token generics"><span class="token punctuation">&lt;</span>c<span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CPooledObjectFactory</span><span class="token punctuation">(</span><span class="token class-name">String</span> host<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>host <span class="token operator">=</span> host<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>port <span class="token operator">=</span> port<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> c <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">c</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">PooledObject</span><span class="token generics"><span class="token punctuation">&lt;</span>c<span class="token punctuation">></span></span> <span class="token function">wrap</span><span class="token punctuation">(</span>c c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultPooledObject</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validateObject</span><span class="token punctuation">(</span><span class="token class-name">PooledObject</span><span class="token generics"><span class="token punctuation">&lt;</span>c<span class="token punctuation">></span></span> p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            c c <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>c<span class="token punctuation">.</span>s<span class="token punctuation">.</span><span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            c<span class="token punctuation">.</span><span class="token function">k</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span></span>KException</span> <span class="token operator">|</span> <span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroyObject</span><span class="token punctuation">(</span><span class="token class-name">PooledObject</span><span class="token generics"><span class="token punctuation">&lt;</span>c<span class="token punctuation">></span></span> p<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token function">close</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span>c c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                c<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// ignored</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë” ìì„¸í•˜ê²Œ PooledObjectFactory êµ¬í˜„ì— ëŒ€í•´ì„œ ê³ ë¯¼í•˜ê³  ì‹¶ì€ ë¶„ë“¤ì´ë¼ë©´ ì•„ë˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ ì°¸ê³ í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<ul>
<li><a href="https://github.com/lettuce-io/lettuce-core/blob/main/src/main/java/io/lettuce/core/support/ConnectionPoolSupport.java#L201">RedisPooledObjectFactory</a></li>
<li><a href="https://github.com/apache/commons-dbcp/blob/master/src/main/java/org/apache/commons/dbcp2/PoolableConnectionFactory.java">PoolableConnectionFactory</a></li>
</ul>
<h4 id="CObjectPool"><a href="#CObjectPool" class="headerlink" title="CObjectPool"></a>CObjectPool</h4><p>ì´ì œëŠ” ì»¤ë„¥ì…˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ê´€ë¦¬í•  ë°©ì‹ì— ëŒ€í•´ì„œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê³ ë¯¼í•´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤. Apache Commons Poolì—ì„œ ì»¤ë„¥ì…˜ ì˜¤ë¸Œì íŠ¸ ë¼ì´í”„ì‚¬ì´í´ì— ë”°ë¼ ì–´ë–»ê²Œ ê´€ë¦¬í• ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ì„œëŠ” GenericObjectPoolConfigë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CObjectPoolConfig</span> <span class="token keyword">extends</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token generics"><span class="token punctuation">&lt;</span>c<span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token class-name">CObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setMaxWait</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTimeBetweenEvictionRuns</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTestWhileIdle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setJmxEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì»¤ë„¥ì…˜ í’€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ê°’ ì¤‘ì—ì„œ JMX ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¹„í™œì„±í™” í•´ë‘ì—ˆìœ¼ë©° ìœ íœ´ ìƒíƒœë¡œ ê´€ë¦¬ì¤‘ì¸ ì»¤ë„¥ì…˜ì— ëŒ€í•´ì„œë„ ë¯¸ë¦¬ ì»¤ë„¥ì…˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ TestWhileIdle ì˜µì…˜ì„ í™œì„±í™”í•˜ì˜€ìŠµë‹ˆë‹¤. MaxWaitì˜ ê²½ìš° ì‚¬ìš©ì¤‘ì¸ ê° ì»¤ë„¥ì…˜ì´ ìµœëŒ€ë¡œ ì†Œìš”í•  ìˆ˜ ìˆëŠ” ì„ê³„ì¹˜ì— ë”°ë¼ 3ë¶„ ê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆë„ë¡ í•´ë‘ì—ˆìŠµë‹ˆë‹¤. </p>
<blockquote>
<p>By default, kdb+ is single-threaded, and processes incoming queries sequentially.</p>
</blockquote>
<p>ì»¤ë„¥ì…˜ ë¼ì´í”„ ì‚¬ì´í´ì— ë”°ë¼ì„œ ì»¤ë„¥ì…˜ í’€ì—ì„œ ì»¤ë„¥ì…˜ ì˜¤ë¸Œì íŠ¸ê°€ ì‚­ì œë˜ëŠ” ì‚¬ìœ ì—ëŠ” ëŒ€í‘œì ìœ¼ë¡œ ë‘ê°€ì§€ê°€ ìˆëŠ”ë°ìš”. í•˜ë‚˜ëŠ” ìœ íœ´ ìƒíƒœì— ìˆëŠ” ì»¤ë„¥ì…˜ì´ ë²¨ë¦¬ë°ì´ì…˜ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ì†Œì¼“ í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê±°ë‚˜ ë„ˆë¬´ ì˜¤ë¬ë™ì•ˆ ì»¤ë„¥ì…˜ì´ ì‚¬ìš©ë˜ì§€ ì•Šì•„ì„œ ë²„ë ¤ì§€ê³  ìƒˆë¡œìš´ ì»¤ë„¥ì…˜ì„ ë§Œë“¤ì–´ì„œ í’€ì„ ìœ ì§€í•˜ëŠ” ìƒí™©ì…ë‹ˆë‹¤. ìœ„ ë¬¸êµ¬ ë‚´ìš©ì²˜ëŸ¼ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë¹ ë¥´ê²Œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ë°©ì‹ì„ í†µí•´ì„œ ë‹¨ì¼ ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ”ê²Œ ê¸°ë³¸ì ì¸ ê¸°ìˆ  ê´€ì ì…ë‹ˆë‹¤. ì´ëŠ” ë ˆë””ìŠ¤ì—ì„œ ë™ì‹œì„±ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ ì±„íƒí•œ ë°©ë²•ì´ê¸°ë„ í•˜ë¯€ë¡œ ë‹¨ìˆœíˆ ì‹±ê¸€ ìŠ¤ë ˆë“œì—¬ì„œ ë¬¸ì œê°€ ìˆë‹¤ê³  ë°”ë¼ë³´ë©´ ì•ˆë©ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">exec</span> <span class="token number">0</span> ms <span class="token punctuation">(</span><span class="token number">481900</span> ns<span class="token punctuation">)</span></code></pre>

<p>ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ë¬´ë¦¬ ë¹ ë¥´ë‹¤ê³  í•´ë„ ê¸´ ë²”ìœ„ì˜ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ì—°ì‚°ì„ í•œë‹¤ê±°ë‚˜ TCP ì†Œì¼“ì„ í†µí•´ ì „ë‹¬í•´ì•¼í•  ë°ì´í„°ê°€ ìƒë‹¹íˆ ë§ì€ ê²½ìš°ë¼ë©´ ì‹±ê¸€ ìŠ¤ë ˆë“œì˜ ë‹¨ì ìœ¼ë¡œ ì¸í•˜ì—¬ ì„ í–‰ ìš”ì²­ì— ì˜í•´ í›„í–‰ ìš”ì²­ì´ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ìœ¼ë¡œ ì¸í•´ ë³‘ëª© í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤. ë§Œì•½, ê·¸ëŸ¬í•œ ìƒí™©ì´ ìì£¼ ë°œìƒí•œë‹¤ë©´ ë¹ ë¥¸ ì„±ëŠ¥ì„ ìœ„í•´ ì‹±ê¸€ ìŠ¤ë ˆë“œë¥¼ ì±„íƒí•œ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì´ ì˜ëª»ëœ ê²ƒì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>KDB ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì»¤ë„¥ì…˜ í’€ ë™ì‘ì— ëŒ€í•´ì„œ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì˜ ë§í¬ë“¤ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<ul>
<li><a href="https://github.com/kdevkr/kdb">Learning KDB+</a></li>
<li><a href="https://github.com/kdevkr/spring-demo-kdb">Spring Demo KDB</a></li>
</ul>
]]></content>
      <tags>
        <tag>TCP</tag>
        <tag>Connection Pool</tag>
      </tags>
  </entry>
  <entry>
    <title>KDB Tick</title>
    <url>/kdb-tick/</url>
    <content><![CDATA[<p>ì—ë„ˆì§€ ë¶„ì•¼ëŠ” ë‚˜ë…¸ì´ˆ ë˜ëŠ” ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ì‹œê³„ì—´ ë°ì´í„°ê°€ ë¹ ë¥´ê²Œ ìƒì„±ë˜ëŠ” íŠ¹ìˆ˜í•œ ì‹œì¥ì…ë‹ˆë‹¤. ì‹œê³„ì—´ ë°ì´í„°ëŠ” ê¸ˆìœµ(Financial) ì‹œì¥ì—ì„œë¶€í„° ì¤‘ìš”ì„±ì´ ë¶€ê°ë˜ì—ˆìœ¼ë‚˜ ì´ì œëŠ” ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ ë°œìƒí•˜ê³  ì´ë¥¼ í™œìš©í•œ ë§ì€ ì„œë¹„ìŠ¤ê°€ ë§Œë“¤ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìµœì†Œí•œ ì´ˆ ë‹¨ìœ„ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ë“±ë¡í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œí•˜ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì…ì§€ë„ ì¤‘ìš”í•´ì§€ê³  ìˆê³  ë§ì€ ì˜¤í”ˆì†ŒìŠ¤ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ ì†”ë£¨ì…˜ë„ ë§Œë“¤ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œëŠ” í•´ì™¸ ê¸ˆìœµ ë¶„ì•¼ì—ì„œ ì–´ëŠì •ë„ ì…ì§€ë¥¼ ë³´ì´ê³  ìˆëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì¸ KDB+ë¥¼ ë„ì…í•˜ì—¬ ì„œë¹„ìŠ¤ì— ì‚¬ìš©ì¤‘ì…ë‹ˆë‹¤. ë¼ì´ì„¼ìŠ¤ ë¹„ìš©ì´ ìƒê°ë³´ë‹¤ ë¹„ì‹¸ê¸°ëŠ” í•˜ì§€ë§Œ ê³ ê°ë“¤ì´ ë³´ìœ í•˜ëŠ” ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ìˆ˜ì§‘í•˜ê³  ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ì©”ìˆ˜ ì—†ëŠ” ì„ íƒì´ê¸°ë„ í•©ë‹ˆë‹¤. </p>
<h2 id="KDB"><a href="#KDB" class="headerlink" title="KDB+"></a>KDB+</h2><p><a href="https://kx.com/blog/what-makes-time-series-database-kdb-so-fast/">What Makes Time-Series Database kdb+ So Fast?</a>  </p>
<p>KX Systemsì˜ ë¸”ë¡œê·¸ ë˜ëŠ” <a href="https://code.kx.com/q/">Kdb+ and q documentation</a> ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì •ë³´ë¥¼ í† ëŒ€ë¡œ KDB+ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì´í•´í•˜ê³  í™œìš©í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë” ë‚˜ì•„ê°€ì„œëŠ” <a href="https://code.kx.com/q/wp/">White Paper</a>ë¥¼ í†µí•´ì„œ KDB+ í”„ë¡œì„¸ìŠ¤ë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ì•ˆì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œëŠ” KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìµœì†Œí•œ ì•Œì•„ì•¼í•  ë¶€ë¶„ì„ ë‹¤ë£¹ë‹ˆë‹¤.</p>
<h3 id="ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°"><a href="#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°" class="headerlink" title="ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°"></a>ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°</h3><p>KDB+ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°ì´í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í…Œì´ë¸”ì´ë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥ë˜ë©° ë©”ëª¨ë¦¬ì— ìœ ì§€ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì„œë²„ì˜ ë©”ëª¨ë¦¬ ìì›ì€ í•œì •ì ì´ë¯€ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€í•˜ê¸°ì—ëŠ” í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. KDB+ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ê²Œë˜ë©´ <code>&#39;wsfull</code> ì˜¤ë¥˜ë¥¼ ë³´ê³ í•˜ê³  í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë°ì´í„°ê°€ ëª¨ë‘ ìœ ì‹¤ë˜ë¯€ë¡œ ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì„œë²„ ë©”ëª¨ë¦¬ ìì›ë³´ë‹¤ í° ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ë””ìŠ¤í¬ íŒŒì¼ì„ í™œìš©í•©ë‹ˆë‹¤. í…Œì´ë¸”ì˜ ë°ì´í„° ê·œëª¨ì— ë”°ë¼ ë‹¨ì¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê¸°ë¡í•˜ê±°ë‚˜ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì— ëŒ€í•œ ë°ì´í„°ë¥¼ <a href="https://code.kx.com/q/database/#splayed-table">ê° ì»¬ëŸ¼ ì´ë¦„ì„ ê°€ì§„ íŒŒì¼ì„ ê°€ì§€ëŠ” í´ë”</a>ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ë” ë‚˜ì•„ê°€ì„œëŠ” <a href="https://code.kx.com/q4m3/14_Introduction_to_Kdb+/#1432-partition-domain">ìˆ«ì ë˜ëŠ” ë‚ ì§œì™€ ê°™ì€ ê°€ìƒì˜ íŒŒí‹°ì…˜</a>ì„ ë‘ì–´ì„œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p>
<h4 id="ìŠ¤í”Œë ˆì´-í…Œì´ë¸”"><a href="#ìŠ¤í”Œë ˆì´-í…Œì´ë¸”" class="headerlink" title="ìŠ¤í”Œë ˆì´ í…Œì´ë¸”"></a>ìŠ¤í”Œë ˆì´ í…Œì´ë¸”</h4><p>ìŠ¤í”Œë ˆì´ í…Œì´ë¸”(Splayed Table)ëŠ” ì‹¬ë³¼ê³¼ ê°™ì€ ê¸°í˜¸ê°€ ì—†ëŠ” ì™„ì „íˆ ì—´ê±°ëœ í…Œì´ë¸”ì´ì–´ì•¼í•©ë‹ˆë‹¤. í…Œì´ë¸”ì— ì‹¬ë³¼ í˜•ì‹ì˜ ì»¬ëŸ¼ì´ ì¡´ì¬í•œë‹¤ë©´ <a href="https://code.kx.com/q/kb/splayed-tables/#enumerating-symbol-columns">Enumerating symbol columns</a>ì—ì„œì²˜ëŸ¼ ì‹¬ë³¼ ë°ì´í„°ê°€ sym íŒŒì¼ì´ë¼ê³ í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼ì— ì—´ê±°ëœ ìƒíƒœë¡œ í…Œì´ë¸”ì„ ì €ì¥í•´ì•¼í•¨ì„ ì¸ì§€í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h4 id="íŒŒí‹°ì…˜-í…Œì´ë¸”"><a href="#íŒŒí‹°ì…˜-í…Œì´ë¸”" class="headerlink" title="íŒŒí‹°ì…˜ í…Œì´ë¸”"></a>íŒŒí‹°ì…˜ í…Œì´ë¸”</h4><p>ì¼ë°˜ì ìœ¼ë¡œ KDB+ í”„ë¡œì„¸ìŠ¤ì—ì„œ ìŠ¤í”Œë ˆì´ í…Œì´ë¸”ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” ê°€ìƒì˜ íŒŒí‹°ì…˜ í´ë” ë°‘ì— ë‘ì–´ì„œ <a href="https://code.kx.com/q/database/#partitioned-table">íŒŒí‹°ì…˜ í…Œì´ë¸”</a>ì„ êµ¬ì„±í•˜ì—¬ ë¡œë“œí•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. íŒŒí‹°ì…˜ í…Œì´ë¸”(Partitioned Table)ì€ KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” í‹°ì»¤í”ŒëœíŠ¸ ì•„í‚¤í…ì²˜ì—ì„œ HDB í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ë¯€ë¡œ ë°˜ë“œì‹œ ì´í•´í•´ì•¼í•  ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://code.kx.com/q4m3/14_Introduction_to_Kdb%2B/#142-splayed-tables">Splayed Tables</a>  </li>
<li><a href="https://code.kx.com/q4m3/14_Introduction_to_Kdb+/#143-partitioned-tables">Partitioned Tables</a>  </li>
<li><a href="https://code.kx.com/q/wp/data-management/#attributes-on-splayed-partitioned-tables">Attributes on splayed partitioned tables</a></li>
</ul>
<blockquote>
<p>íŒŒí‹°ì…˜ í…Œì´ë¸”ì˜ ê° ìŠ¤í”Œë ˆì´ í…Œì´ë¸”ì— `p# ë˜ëŠ” `g# ì†ì„±ì„ ì ìš©í•˜ì—¬ ì €ì¥í•˜ëŠ” ê²ƒì€ íŒŒì¼ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” HDB í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì¿¼ë¦¬ ìµœì í™”ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ í•„ìš”ì— ë”°ë¼ ì ìš©í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="í”„ë¡œì„¸ìŠ¤-í†µì‹ "><a href="#í”„ë¡œì„¸ìŠ¤-í†µì‹ " class="headerlink" title="í”„ë¡œì„¸ìŠ¤ í†µì‹ "></a>í”„ë¡œì„¸ìŠ¤ í†µì‹ </h3><p>KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì‚¬ìš©ì ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë‹¨ì¼ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì•„í‚¤í…ì²˜ì ì¸ ê´€ì ì—ì„œëŠ” ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ì—¬ í™œìš©í•˜ê¸°ë³´ë‹¤ëŠ” ìš©ë„ì™€ ëª©ì ì— ë§ëŠ” ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  <a href="https://code.kx.com/q/learn/startingkdb/ipc/#interprocess-communications">í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ (IPC)</a>ë¥¼ í†µí•´ ì„œë¡œ ìœ ê¸°ì ì¸ ìš”ì²­ê³¼ ì‘ë‹µì„ í†µí•´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì œê³µí•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ <a href="https://code.kx.com/q/ref/hopen/#one-shot-request">One-shot request</a> í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-q" data-language="q"><code class="language-q"><span class="token symbol">`::5011</span> <span class="token string">"trade"</span>
<span class="token symbol">`::5011</span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>trade<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token verb operator">::</span><span class="token punctuation">)</span></code></pre>

<blockquote>
<p>ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë‹¤ìˆ˜ì˜ ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” hopen ë° hcloseë¥¼ í†µí•´ ëª…ì‹œì ìœ¼ë¡œ ì†Œì¼“ì„ ì—´ê³  ë‹«ëŠ”ê²ƒì´ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì¥ì‹œê°„ ì†Œì¼“ì„ ì—´ì–´ë‘ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ ì•¼ê¸°í•œ ê²½í—˜ì´ ìˆìœ¼ë¯€ë¡œ ê°œì¸ì ìœ¼ë¡œ ì¶”ì²œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="í‹±-ì•„í‚¤í…ì²˜"><a href="#í‹±-ì•„í‚¤í…ì²˜" class="headerlink" title="í‹± ì•„í‚¤í…ì²˜"></a>í‹± ì•„í‚¤í…ì²˜</h2><p>KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í•™ìŠµí•˜ëŠ” ë‹¨ê³„ì—ì„œëŠ” ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë¡œë„ ì¶©ë¶„í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‹¤ì œë¡œ ì‹œìŠ¤í…œì„ ìš´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìˆ˜ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬ì„±ëœ <a href="https://code.kx.com/q/architecture/">ì•„í‚¤í…ì²˜</a>ë¥¼ ë„ì…í•´ì•¼í•  í•„ìš”ì„±ì´ ìˆìŠµë‹ˆë‹¤. KDB+ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì•„í‚¤í…ì²˜ëŠ” í‹°ì»¤í”ŒëœíŠ¸ì´ë©° ê¸ˆìœµ ì‹œì¥ì—ì„œ ì‚¬ìš©í•˜ê¸° ìš©ì´í•˜ë„ë¡ êµ¬ì„±ë©ë‹ˆë‹¤.</p>
<h3 id="í‹°ì»¤í”ŒëœíŠ¸"><a href="#í‹°ì»¤í”ŒëœíŠ¸" class="headerlink" title="í‹°ì»¤í”ŒëœíŠ¸"></a>í‹°ì»¤í”ŒëœíŠ¸</h3><p>í‹°ì»¤í”ŒëœíŠ¸(Tickerplant)ëŠ” ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•œ ì§„ì…ì ì„ ì œê³µí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ ë°ì´í„° ë“±ë¡ í•¨ìˆ˜ì— ëŒ€í•œ ìš”ì²­ì„ <strong>TP ë¡œê·¸</strong> íŒŒì¼ì— ê¸°ë¡í•˜ì—¬ ì‹œìŠ¤í…œì´ ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©ìœ¼ë¡œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ, <a href="https://cloud.google.com/pubsub/docs/overview?hl=ko">Pub&#x2F;Sub</a>ìœ¼ë¡œ ë°ì´í„° í”¼ë“œ êµ¬ë…ìë¡œ ë“±ë¡ë˜ì–´ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ ë“±ë¡ëœ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  ì‚­ì œí•¨ìœ¼ë¡œì¨ í‹°ì»¤í”ŒëœíŠ¸ê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆë„ë¡í•˜ì—¬ ê²½ëŸ‰ í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬ë™ë©ë‹ˆë‹¤.</p>
<h3 id="ì‹¤ì‹œê°„-ë°ì´í„°"><a href="#ì‹¤ì‹œê°„-ë°ì´í„°" class="headerlink" title="ì‹¤ì‹œê°„ ë°ì´í„°"></a>ì‹¤ì‹œê°„ ë°ì´í„°</h3><p>ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤(Realtime DB) í”„ë¡œì„¸ìŠ¤ëŠ” í‹°ì»¤í”ŒëœíŠ¸ í”„ë¡œì„¸ìŠ¤ì— ë°ì´í„° í”¼ë“œ êµ¬ë…ìë¡œ ë“±ë¡ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¤‘ í•˜ë‚˜ì´ë©° í‹°ì»¤í”ŒëœíŠ¸ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í‹°ì»¤í”ŒëœíŠ¸ê°€ ì „ë‹¬í•˜ëŠ” <strong>EOH(End of hour) ë˜ëŠ” EOD(End of day)</strong> ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì„œ ë©”ëª¨ë¦¬ì— ìœ ì§€í–ˆë˜ ë°ì´í„°ë¥¼ í˜„ì¬ ì‹œê°„ ë˜ëŠ” ì¼ìì— ëŒ€í•œ íŒŒí‹°ì…˜ í…Œì´ë¸”ë¡œ ê¸°ë¡í•˜ê³  ë‹¤ì‹œ í‹°ì»¤í”ŒëœíŠ¸ë¡œë¶€í„° ë°ì´í„° ìˆ˜ì‹ ì´ ê°€ëŠ¥í•˜ë„ë¡ ì¤€ë¹„í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>EOH ë˜ëŠ” EOD ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì—ëŠ” ë©”ëª¨ë¦¬ì— ìˆëŠ” ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•´ì•¼í•˜ë¯€ë¡œ ë°ì´í„° ê·œëª¨ì— ë”°ë¼ CPU ì—°ì‚° ë° ë””ìŠ¤í¬ I&#x2F;O ì‘ì—…ì— ëŒ€í•œ ë¶€í•˜ê°€ ì•¼ê¸°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë©”ëª¨ë¦¬ì— ìƒì£¼ë˜ëŠ” ë°ì´í„°ì˜ ê·œëª¨ë¥¼ ì˜ˆìƒí•˜ê³  ì„œë²„ ì„±ëŠ¥ì„ ê²°ì •í•´ì•¼í•©ë‹ˆë‹¤.<br>KDB+ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì¼ë¡œ ê¸°ë¡í•˜ëŠ” ê²ƒì€ ë””ìŠ¤í¬ I&#x2F;O ì„±ëŠ¥ì— ì˜ì¡´í•˜ë¯€ë¡œ RDB í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ë³‘ëª© í˜„ìƒì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œëŠ” ë†’ì€ I&#x2F;O ì„±ëŠ¥ì„ ê°€ì§€ëŠ” ìŠ¤í† ë¦¬ì§€ë¥¼ ê³ ë ¤í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ê³¼ê±°-íŒŒí‹°ì…˜-ë°ì´í„°"><a href="#ê³¼ê±°-íŒŒí‹°ì…˜-ë°ì´í„°" class="headerlink" title="ê³¼ê±° íŒŒí‹°ì…˜ ë°ì´í„°"></a>ê³¼ê±° íŒŒí‹°ì…˜ ë°ì´í„°</h3><p>ê³¼ê±° íŒŒí‹°ì…˜ ë°ì´í„°ë² ì´ìŠ¤(Historical DB)ëŠ” RDB í”„ë¡œì„¸ìŠ¤ê°€ íŒŒí‹°ì…˜ í…Œì´ë¸” í˜•íƒœì˜ í´ë”ë¡œ ê¸°ë¡í•œ ê³¼ê±° ë°ì´í„°ë¥¼ ë¡œë“œí•˜ì—¬ ì‚¬ìš©ì ì¿¼ë¦¬ì— ëŒ€í•œ ì¡°íšŒ ë° ê²°ê³¼ë¥¼ ì œê³µí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ë°ì´í„° ê·œëª¨ ë° ì„œë²„ ìì›ì— ë”°ë¼ ì‹œê°„ ë˜ëŠ” ì¼ìë³„ íŒŒí‹°ì…˜ìœ¼ë¡œ êµ¬ì„±ë˜ë¯€ë¡œ ì‹œìŠ¤í…œì´ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê¸°ì— íš¨ìœ¨ì ì¸ êµ¬ì¡°ë¥¼ ê°€ì§€ë„ë¡ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‹œê°„ë³„ íŒŒí‹°ì…˜ì„ êµ¬ì„±í•˜ëŠ” ê²½ìš°ì—ëŠ” ì›í•˜ëŠ” ê¸°ê°„ì— ëŒ€í•œ ì‹œê°„ í´ë”ì˜ ë°ì´í„°ë§Œ í™œìš©í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‚¬ìš©ì ì¿¼ë¦¬ì— ëŒ€í•œ ì¡°íšŒ ë²”ìœ„ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë””ìŠ¤í¬ I&#x2F;O ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ë¹„íš¨ìœ¨ì ì¸ ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ ì˜¤íˆë ¤ ì¡°íšŒ ì‹œê°„ì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>KDB+ í”„ë¡œì„¸ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆœì°¨ì²˜ë¦¬ì„ì„ ì¸ì§€í•´ì•¼í•˜ë©° ë§ì€ íŒŒí‹°ì…˜ì„ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ê°€ ìì£¼ ìš”ì²­ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ë©´ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹œê°„ ë° ì¼ìë³„ íŒŒí‹°ì…˜ì„ ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì¼ìë³„ íŒŒí‹°ì…˜ì„ êµ¬ì„±í•˜ëŠ” ë³„ë„ì˜ HDB í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>ì‚¬ìš©ì ìš”ì²­ì— ëŒ€í•œ ì¿¼ë¦¬ê°€ ì—¬ëŸ¬ê°œì˜ íŒŒí‹°ì…˜ì„ ì¡°íšŒí•´ì•¼í•˜ëŠ” ì‘ì—…ì´ë¼ë©´ <a href="https://code.kx.com/q/basics/cmdline/#-s-secondary-threads">í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ ì§€ì •ëœ ë³´ì¡° ìŠ¤ë ˆë“œ</a>ë¥¼ í†µí•´ì„œ íŒŒí‹°ì…˜ë³„ ì¡°íšŒë¥¼ ë³‘ë ¬ë¡œ ìˆ˜í–‰í•˜ë„ë¡ í”„ë¡œì‹œì €ë¥¼ ì‘ì„±í•˜ì—¬ ì¿¼ë¦¬ ì†Œìš” ì‹œê°„ì„ ì–´ëŠì •ë„ëŠ” ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê½¤ ë§ì€ ì¿¼ë¦¬ê°€ ë³‘ë ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œë¥¼ ë„ì…í•¨ìœ¼ë¡œì¨ ê·¹ë‹¨ì ìœ¼ë¡œ ì¿¼ë¦¬ ìˆ˜í–‰ì‹œê°„ì´ ì¤„ì–´ë“¬ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ ì¼€ì´ìŠ¤ë¥¼ ì˜ˆë¥¼ ë“¤ìë©´ ë‹¨ì¼ ìŠ¤ë ˆë“œ ë° ìˆœì°¨ ì²˜ë¦¬ì— ì˜í•´ 200msê°€ ì†Œìš”ë˜ëŠ” í”„ë¡œì‹œì €ê°€ ë³‘ë ¬ ì—°ì‚° ì‘ì—… ë° ë¹„íš¨ìœ¨ì ì¸ ë°˜ë³µ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ê°œì„ í•˜ê³ ì„œ 30msê°€ ì†Œìš”ë˜ë„ë¡ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ê°œì¸ì ì¸ ì¿¼ë¦¬ ê²½í—˜ì— ì˜í•˜ë©´ ë°ì´í„° ì¡°íšŒì— ëŒ€í•œ ë°˜ë³µ ì‘ì—…ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ê³  ë°ì´í„° ì¡°íšŒì‹œì—ëŠ” ë³‘ë ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì¸ì§€ë¥¼ ê²€í† í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í‚¤ì›Œë“œ ë³´ë‹¤ ë” ì ì€ ì‹œê°„ì´ë‚˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´, Left Joinì„ ë°˜ë³µ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ê²½ìš°ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì—°ê²°í•˜ì—¬ ìˆ˜í–‰í•˜ë„ë¡ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-q" data-language="q"><code class="language-q">R<span class="token verb operator">:</span>A <span class="token keyword">lj</span> B<span class="token punctuation">;</span>
R<span class="token verb operator">:</span>R <span class="token keyword">lj</span> C<span class="token punctuation">;</span>
R<span class="token verb operator">:</span>R <span class="token keyword">lj</span> D<span class="token punctuation">;</span>

R<span class="token verb operator">:</span><span class="token punctuation">(</span><span class="token keyword">lj</span><span class="token adverb function">/</span><span class="token punctuation">)</span><span class="token punctuation">(</span>A<span class="token punctuation">;</span>B<span class="token punctuation">;</span>C<span class="token punctuation">;</span>D<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h2 id="ì¥ì• -ë°-ë³´ì™„"><a href="#ì¥ì• -ë°-ë³´ì™„" class="headerlink" title="ì¥ì•  ë° ë³´ì™„"></a>ì¥ì•  ë° ë³´ì™„</h2><p>ì´ì œê¹Œì§€ ê²½í—˜í–ˆë˜ ì¥ì•  ë˜ëŠ” í˜„ì¬ ê²½í—˜í•˜ê³  ìˆëŠ” ë¶€ë¶„ì„ ê³µìœ í•˜ê³  ì–´ë–»ê²Œ ë³´ì™„í•  ìˆ˜ ìˆì„ê¹Œë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.</p>
<h3 id="ìˆœì°¨-ì²˜ë¦¬ë¡œ-ì¸í•œ-ë³‘ëª©-í˜„ìƒ"><a href="#ìˆœì°¨-ì²˜ë¦¬ë¡œ-ì¸í•œ-ë³‘ëª©-í˜„ìƒ" class="headerlink" title="ìˆœì°¨ ì²˜ë¦¬ë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒ"></a>ìˆœì°¨ ì²˜ë¦¬ë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒ</h3><p>KDB+ í”„ë¡œì„¸ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ë¯€ë¡œ <code>ëª¨ë“  ë™ê¸° ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ëŠ” ì œì•½</code>ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ì§€ ì•Šë”ë¼ë„ í˜„ì¬ ì‚¬ìš©ìì˜ ìš”ì²­ì— ëŒ€í•œ ì‘ì—… ê²°ê³¼ê°€ ë‹¤ìŒ ìš”ì²­ì— ë°˜ì˜ë¨ì„ ë³´ì¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, í˜„ì¬ ìˆ˜í–‰ì¤‘ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ì—…ì´ ê¸¸ì–´ì§ˆìˆ˜ë¡ ë‹¤ë¥¸ ìš”ì²­ì´ ëŒ€ê¸°í•´ì•¼í•˜ëŠ” ì‹œê°„ì´ ë§ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. KDB+ í”„ë¡œì„¸ìŠ¤ì˜ êµ¬ì„±ì´ ë³µì¡í•˜ê³  ê° ìš”ì²­ì— ëŒ€í•œ ì¿¼ë¦¬ê°€ ë³µì¡í•´ì§ì— ë”°ë¼ì„œ ë¹ ë¥´ê²Œ ìš”ì²­ë˜ëŠ” ì¿¼ë¦¬ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë°€ë¦¬ëŠ” í˜„ìƒìœ¼ë¡œ ì¸í•˜ì—¬ ë§ì€ ì–´ë ¤ì›€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ìš”ì²­ì— ëŒ€í•œ ì¿¼ë¦¬ ìµœì í™”ëŠ” ì¼ì‹œì ì¸ ëŒ€ì•ˆì¼ ë¿ì´ë©° ê²°ë¡ ì ìœ¼ë¡œëŠ” ì•„í‚¤í…ì²˜ì ì¸ ê´€ì ì—ì„œ ë‹¤ìŒì˜ ì •ë³´ë¥¼ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://code.kx.com/q/kb/multithreaded-input/">Multithreaded input queue mode</a>  </li>
<li><a href="https://code.kx.com/q/kb/deferred-response/">Deferred response</a> </li>
<li><a href="https://code.kx.com/q/wp/gateway-design/">Common design principles for kdb+ gateways</a></li>
<li><a href="https://code.kx.com/q/wp/query-routing/">Query Routing: A kdb+ framework for a scalable, load balanced system</a></li>
</ul>
<blockquote>
<p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ìœ„ì˜ ë°©ì•ˆë“¤ì€ ê²€í† í•˜ì˜€ìœ¼ë‚˜ ì—¬ëŸ¬ê°€ì§€ ì œì•½ì´ë‚˜ ì´í•´í•˜ê¸° í˜ë“  ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ KDB+ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ê° í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ë¶„ì‚°í•˜ëŠ” ì‘ì—…ì„ ë¨¼ì € ì‹œë„í•´ë³´ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. ë‹¤ìˆ˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ í†µì‹ í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ë³‘ëª© í˜„ìƒì„ ìµœì†Œí™”í•˜ë„ë¡ ì¬êµ¬ì„±í•˜ëŠ”ê²Œ ëª©ì ì…ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ë‹¨ì¼-ë””ìŠ¤í¬-I-x2F-O-ì‘ì—…ìœ¼ë¡œ-ì¸í•œ-ë³‘ëª©-í˜„ìƒ"><a href="#ë‹¨ì¼-ë””ìŠ¤í¬-I-x2F-O-ì‘ì—…ìœ¼ë¡œ-ì¸í•œ-ë³‘ëª©-í˜„ìƒ" class="headerlink" title="ë‹¨ì¼ ë””ìŠ¤í¬ I&#x2F;O ì‘ì—…ìœ¼ë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒ"></a>ë‹¨ì¼ ë””ìŠ¤í¬ I&#x2F;O ì‘ì—…ìœ¼ë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒ</h3><p>í•˜ë‚˜ì˜ ì„œë²„ì— KDB+ í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ êµ¬ì„±í•˜ë”ë¼ë„ íŠ¹ì • í”„ë¡œì„¸ìŠ¤ì—ì„œ ë””ìŠ¤í¬ I&#x2F;O ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë™ì¼í•œ í´ë”ë‚˜ íŒŒì¼ì— ëŒ€í•œ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ê²½ìš° ì¼ì‹œì ìœ¼ë¡œ ëŒ€ê¸°í•˜ëŠ” ë³‘ëª© í˜„ìƒì´ ì•¼ê¸°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒí‹°ì…˜ì— ì €ì¥ëœ ë°ì´í„°ê°€ ì •ë ¬ë˜ì§€ ì•Šì•˜ë‹¤ê±°ë‚˜ ì£¼ìš” ì»¬ëŸ¼ì— ì†ì„±ì´ ë¶€ì—¬ë˜ì§€ ì•Šì€ ë¶€ë¶„ì„ ìœ„í•´ íŒŒí‹°ì…˜ì„ ë³´ì •í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì‘ì—…ì¤‘ì¼ë•Œ ë™ì¼í•œ íŒŒí‹°ì…˜ í´ë”ë¥¼ ë¡œë“œí•´ì•¼í•˜ëŠ” HDB í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‚¬ìš©ì ìš”ì²­ì— ëŒ€í•œ ì‘ì—…ì´ ì¼ì‹œì ìœ¼ë¡œ ë§ì´ ì†Œìš”ë˜ëŠ” ë¬¸ì œë¥¼ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>í‹°ì»¤í”ŒëœíŠ¸ ì•„í‚¤í…ì²˜ì—ì„œëŠ” í˜„ì¬ ì‹œê°„ ë˜ëŠ” ì¼ìì— ëŒ€í•œ ì‹œê³„ì—´ ë°ì´í„°ê°€ ë“±ë¡ë˜ì–´ì•¼í•˜ì§€ë§Œ ê³¼ê±°ì— ëŒ€í•œ ì‹œê³„ì—´ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë“±ë¡ë¨ì— ë”°ë¼ ì˜¬ë°”ë¥¸ íŒŒí‹°ì…˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³‘í•©í•˜ëŠ” ì‘ì—…ìœ¼ë¡œ ì¸í•´ ë””ìŠ¤í¬ I&#x2F;Oë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒì´ ì•¼ê¸°ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ì—°ë™ì„ ì‹œì‘í•œ íŠ¹ì • ê³ ê°ì´ ê°€ì§€ê³  ìˆë˜ ê³¼ê±° ë°ì´í„°ë¥¼ í•œë²ˆì— ë“±ë¡í•˜ê²Œ ë¨ìœ¼ë¡œì¨ ì´ë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ìš”ì²­ì´ ëŠë ¤ì§ì´ ë³´ê³ ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="í”„ë¡œì„¸ìŠ¤-ì˜ì¡´ì„±ìœ¼ë¡œ-ì¸í•œ-ë©ˆì¶¤-í˜„ìƒ"><a href="#í”„ë¡œì„¸ìŠ¤-ì˜ì¡´ì„±ìœ¼ë¡œ-ì¸í•œ-ë©ˆì¶¤-í˜„ìƒ" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•œ ë©ˆì¶¤ í˜„ìƒ"></a>í”„ë¡œì„¸ìŠ¤ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•œ ë©ˆì¶¤ í˜„ìƒ</h3><p><img data-src="https://code.kx.com/q/img/architecture.png"></p>
<p>KDB+ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìˆ˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ìœ ê¸°ì ìœ¼ë¡œ í†µì‹ í•˜ë©° ì‹œìŠ¤í…œì„ êµ¬ì„±í•œë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì‹¤í–‰ë˜ì—ˆë˜ ì‹œìŠ¤í…œì´ ì—¬ëŸ¬ê°€ì§€ ì´ìœ ì— ì˜í•´ì„œ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì¶”ê°€ë¨ì— ë”°ë¼ì„œ ì‹œê°„ ë˜ëŠ” ì¼ìë³„ íŒŒí‹°ì…˜ì„ ì‚¬ìš©í•˜ëŠ” HDB í”„ë¡œì„¸ìŠ¤ë“¤ì´ í•˜ë‚˜ì˜ RDB í”„ë¡œì„¸ìŠ¤ì™€ ë™ì¼í•œ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ì¡´í•¨ì— ë”°ë¼ì„œ ì„œë¡œ ìš”ì²­ì´ ë³‘ëª©ë˜ì–´ í”„ë¡œì„¸ìŠ¤ê°€ ìš”ì²­ì„ ì²˜ë¦¬ì¤‘ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  í”„ë¡œì„¸ìŠ¤ê°€ ë©ˆì¶”ëŠ” ê²ƒ ê°™ì•„ ë³´ì´ëŠ” í˜„ìƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê° HDB í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì‹¤ì‹œê°„ ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•´ì„œ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ìœ ì§€ë§Œí•˜ëŠ” ë³„ë„ì˜ ì½ê¸° ì „ìš© RDB í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ì¡´í•˜ë„ë¡ ì¬êµ¬ì„±í•˜ì˜€ê³  ì´ëŸ¬í•œ í˜„ìƒì´ ì ì°¨ì ìœ¼ë¡œ ì¤„ì–´ë“¤ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="EOH-ë‹¤ìš´íƒ€ì„"><a href="#EOH-ë‹¤ìš´íƒ€ì„" class="headerlink" title="EOH ë‹¤ìš´íƒ€ì„"></a>EOH ë‹¤ìš´íƒ€ì„</h3><p>í‹°ì»¤í”ŒëœíŠ¸ëŠ” ì‹œê°„ ë˜ëŠ” ì¼ê³¼ê°€ ì¢…ë£Œë˜ë©´ EOH ë˜ëŠ” EOD ì´ë²¤íŠ¸ë¥¼ ë°ì´í„° í”¼ë“œ êµ¬ë…ìì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  íŠ¹ì • RDB í”„ë¡œì„¸ìŠ¤ëŠ” ì‹œê°„ ë˜ëŠ” ì¼ê³¼ ë°ì´í„°ë¥¼ í˜„ì¬ íŒŒí‹°ì…˜ì— ê¸°ë¡í•©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ê¸°ë¡í•˜ê¸°ì „ì— ì •ë ¬ì„ ì‹œë„í•˜ë¯€ë¡œ ë°ì´í„° ê·œëª¨ì™€ ì„œë²„ ì„±ëŠ¥ì— ë”°ë¼ì„œ <a href="https://code.kx.com/q/wp/intraday-writedown/#downtime">Downtime</a>ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¤ìš´íƒ€ì„ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œ RDB í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì €ì¥í• ë•ŒëŠ” ë°ì´í„° ì •ë ¬ì´ë‚˜ ìŠ¤í”Œë ˆì´ í…Œì´ë¸”ì— ëŒ€í•œ ì†ì„± ë¶€ì—¬ë¥¼ ìµœì†Œí™”í•˜ê³  íŒŒí‹°ì…˜ ë³´ì •ì„ ìˆ˜í–‰í•˜ëŠ” ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‘ì–´ì„œ íŒŒí‹°ì…˜ ë°ì´í„°ë¥¼ ì •ë ¬í•˜ê³  ì¿¼ë¦¬ ìµœì í™”ë¥¼ ìœ„í•œ ì»¬ëŸ¼ì— ì†ì„±ì„ ë¶€ì—¬í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì¶”ê°€ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì‹¤ì‹œê°„ ë°ì´í„°ì— ê³¼ê±°ì˜ ì‹œê³„ì—´ ë°ì´í„°ê°€ ë§ì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤ê°€ ë°œìƒí•˜ë©´ì„œ íŒŒí‹°ì…˜ì„ ë‹¤ì‹œ ë³´ì •í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì‘ì—…ë„ ê³¼ì¤‘í™”ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<hr>
<p>ì•„ë¬´ë¦¬ ë¹ ë¥¸ ì„±ëŠ¥ì„ ìë‘í•˜ëŠ” ê¸°ìˆ ì´ì–´ë„ ì–´ë–¤ í™˜ê²½ì—ì„œ ì‚¬ìš©ë˜ëŠ”ì§€ì™€ ì–´ë–»ê²Œ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ì§€ì— ë”°ë¼ì„œ ë§ì€ ë¬¸ì œë‚˜ ì œì•½ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨í–ˆë˜ ì‹œìŠ¤í…œì´ ë³µì¡í•´ì§€ë©´ì„œ ì¥ì• ê°€ ë°œìƒí•˜ë©´ ê·¸ê²ƒì„ ë³´ì™„í•˜ê¸° ìœ„í•˜ì—¬ ì—¬ëŸ¬ê°€ì§€ ì‹œë„ë¥¼ í•´ë³´ì•„ì•¼í•©ë‹ˆë‹¤. ì´ì „ì˜ ê²½í—˜ì„ í† ëŒ€ë¡œ ê·¸ëŸ´ë¦¬ ì—†ë‹¤, ê·¸ëŸ´ ê°€ëŠ¥ì„±ì€ ì—†ë‹¤ë¼ëŠ” ê´€ì ì€ ìš°ë¦¬ë¥¼ í˜ë“¤ê²Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ìˆ ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ë™ì¼í•˜ì§€ ì•ŠìŒì„ ì¸ì •í•˜ê³  ê·¸ê²ƒìœ¼ë¡œë¶€í„° ì•¼ê¸°ë˜ëŠ” ë¬¸ì œì ì€ ì—†ëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ ê²€í† í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ê²ƒì„ ìš°ë¦¬ëŠ” ì¥ì•  ëŒ€ì‘ ë˜ëŠ” í›„ì† ì¡°ì¹˜ë¼ê³  ë§í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://kx.com/blog/what-makes-time-series-database-kdb-so-fast/">What Makes Time-Series Database kdb+ So Fast?</a></li>
<li><a href="https://code.kx.com/q/kb/kdb-tick/">Kdb+tick configuration</a>  </li>
<li><a href="https://code.kx.com/q/wp/rt-tick/">Building real-time tick subscribers</a></li>
<li><a href="https://github.com/kdevkr/kdb">Learning KDB+</a></li>
</ul>
]]></content>
      <tags>
        <tag>KDB+/q</tag>
        <tag>TP</tag>
      </tags>
  </entry>
  <entry>
    <title>í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ì—°ê²°í•  ìˆ˜ ì—†ìŒ</title>
    <url>/kibana-cannot-connect-elasticsearch/</url>
    <content><![CDATA[<p><img data-src="/images/posts/kibana-cannot-connect-elasticsearch/01.png"></p>
<p>AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì„¤ì¹˜ëœ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ëŒ€í•´ í‚¤ë°”ë‚˜ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•˜ë‹ˆ ìœ„ì™€ ê°™ì´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” í™”ë©´ì´ ë…¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì´ ë¬¸ì œì— ëŒ€í•´ ë¨¸ë¦¬ë¥¼ ì‹¸ë§¤ë©´ì„œ ì—¬ëŸ¬ê°€ì§€ë¥¼ ì‹œë„í•´ë³´ì•˜ìœ¼ë‚˜ í•´ê²°ë˜ì§€ ì•Šì•˜ê³  ì§‘ì—ì™€ì„œ ì‰¬ëŠ” ê¹€ì— ì´ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ê²€ìƒ‰í•´ë³´ë©´ì„œ ì—¬ëŸ¬ê°€ì§€ í™•ì¸ ëì— ì›ì¸ì„ ì°¾ì•„ë‚´ì–´ ì´ ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<h2 id="í‚¤ë°”ë‚˜-ì‘ë‹µ-í˜ì´ë¡œë“œ"><a href="#í‚¤ë°”ë‚˜-ì‘ë‹µ-í˜ì´ë¡œë“œ" class="headerlink" title="í‚¤ë°”ë‚˜ ì‘ë‹µ í˜ì´ë¡œë“œ"></a>í‚¤ë°”ë‚˜ ì‘ë‹µ í˜ì´ë¡œë“œ</h2><blockquote>
<p>This Kibana installation has strict security requirements enabled that your current browser does not meet.</p>
</blockquote>
<p>ë¨¼ì €, ì›¹ í˜ì´ì§€ í™”ë©´ì—ì„œëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‚´ìš©ì˜ ë©”ì‹œì§€ì˜€ì§€ë§Œ ì‹¤ì œë¡œ í‚¤ë°”ë‚˜ë¡œë¶€í„° ë°›ì€ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ í™•ì¸í•´ë³´ë‹ˆ <a href="https://www.elastic.co/guide/en/kibana/current/Security-production-considerations.html#csp-strict-mode">Content Security Policy</a> ê´€ë ¨ëœ ì˜¤ë¥˜ ë‚´ìš©ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  í¬ë¡¬ ê°œë°œì ë„êµ¬ ì½˜ì†”ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ ë¡œê·¸ë„ í‘œì‹œë¨ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Refused to execute inline script because it violates the following Content Security Policy directive: <span class="token string">"script-src 'unsafe-eval' 'nonce-LQ+1u6/j7+lb3KNy'"</span><span class="token builtin class-name">.</span>
Either the <span class="token string">'unsafe-inline'</span> keyword, a <span class="token builtin class-name">hash</span> <span class="token punctuation">(</span><span class="token string">'sha256-SHHSeLc0bp6xt4BoVVyUy+3IbVqp3ujLaR+s+kSP5UI='</span><span class="token punctuation">)</span>, or a nonce <span class="token punctuation">(</span><span class="token string">'nonce-...'</span><span class="token punctuation">)</span> is required to <span class="token builtin class-name">enable</span> inline execution.  </code></pre>

<h3 id="CSP-ë¹„í™œì„±í™”-ì‹œë„"><a href="#CSP-ë¹„í™œì„±í™”-ì‹œë„" class="headerlink" title="CSP ë¹„í™œì„±í™” ì‹œë„"></a>CSP ë¹„í™œì„±í™” ì‹œë„</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">csp.strict</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></code></pre>

<p>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ì‚¬ìœ ì¸ì§€ ë‹¤ë¥¸ ë¬¸ì œì¸ì§€ë¥¼ íŒë‹¨í•  ìˆ˜ ì—†ì–´ì„œ CSPë¥¼ ë¹„í™œì„±í™” í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, CSP ë¹„í™œì„±í™” í›„ì—ë„ í‚¤ë°”ë‚˜ì—ì„œëŠ” ë™ì¼í•˜ê²Œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ê³  í‘œì‹œë˜ì—ˆê¸°ì— ì´ë¡œ ì¸í•œ ë¬¸ì œëŠ” ì•„ë‹˜ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<h2 id="í‚¤ë°”ë‚˜-ë¡œê·¸"><a href="#í‚¤ë°”ë‚˜-ë¡œê·¸" class="headerlink" title="í‚¤ë°”ë‚˜ ë¡œê·¸"></a>í‚¤ë°”ë‚˜ ë¡œê·¸</h2><p>ì‚¬ì‹¤ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ê³ ë‚˜ì„œëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì™€ í‚¤ë°”ë‚˜ì˜ ì„¤ì • íŒŒì¼ì˜ ë¬¸ì œê°€ ì•„ë‹ê¹Œ ì—¬ëŸ¬ê°€ì§€ ì‚´í´ë³´ì•˜ì§€ë§Œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì„¤ì •ê³¼ ë‹¤ë¥¼ë°”ê°€ ì—†ì—ˆê¸°ì— í‚¤ë°”ë‚˜ ë¡œê·¸ë¥¼ í™•ì¸í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="Chromium-with-headless-shell"><a href="#Chromium-with-headless-shell" class="headerlink" title="Chromium with headless_shell"></a>Chromium with headless_shell</h3><blockquote>
<p>Reporting plugin self-check generated a warning: Error: Could not close browser client handle</p>
</blockquote>
<p>ê°€ì¥ ë¨¼ì € ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ìœ„ ë¡œê·¸ì— ëŒ€í•´ ê²€ìƒ‰í•´ë³´ë‹ˆ <a href="https://github.com/elastic/kibana/issues/53829">kibana&#x2F;issues&#x2F;53829</a>ì—ì„œ ìƒŒë“œë°•ìŠ¤ ì˜µì…˜ì„ ì„¤ì •í•œ ê²ƒì„ ë³´ê³  ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">xpack.reporting.capture.browser.chromium.disableSandbox</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre>

<p>ìœ„ ì¡°ì¹˜ì™€ í•¨ê»˜ EC2ì— ë…¸ë“œì™€ í¬ë¡œë¯¸ì›€ íŒ¨í‚¤ì§€ë¥¼ ì§ì ‘ ì„¤ì¹˜ê¹Œì§€ í•´ë³´ì•˜ì§€ë§Œ ìœ„ ë¬¸ì œê°€ í•´ì†Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
<h3 id="í”ŒëŸ¬ê·¸ì¸-ë¡œê·¸"><a href="#í”ŒëŸ¬ê·¸ì¸-ë¡œê·¸" class="headerlink" title="í”ŒëŸ¬ê·¸ì¸ ë¡œê·¸"></a>í”ŒëŸ¬ê·¸ì¸ ë¡œê·¸</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>error<span class="token punctuation">]</span><span class="token punctuation">[</span>status<span class="token punctuation">]</span><span class="token punctuation">[</span>plugin:xpack_main@7.3.2<span class="token punctuation">]</span> Status changed from yellow to red - <span class="token punctuation">[</span>data<span class="token punctuation">]</span> Elasticsearch cluster did not respond with license information.</code></pre>

<p>ì§‘ì—ì™€ì„œ í‚¤ë°”ë‚˜ ë¡œê·¸ë¥¼ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ë‹ˆ ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ì‚¬ì‹¤ íšŒì‚¬ì—ì„œëŠ” í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜ì´ë¯€ë¡œ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ì‚¬ìœ ì™€ëŠ” ìƒê´€ì—†ë‹¤ê³  íŒë‹¨í–ˆì—ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— í‚¤ë°”ë‚˜ ê´€ë ¨ ì¸ë±ìŠ¤ê¹Œì§€ëŠ” ë§Œë“¤ì–´ì§€ë¯€ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ ì´ ë˜ëŠ” ìƒí™©ì´ë¼ê³  ìƒê°í•  ìˆ˜ ë°–ì— ì—†ì—ˆì„í…Œë‹ˆê¹Œìš”.</p>
<p>ì•„ë¬´íŠ¼ ìœ„ ë¡œê·¸ì— ëŒ€í•´ì„œ ê²€ìƒ‰í•´ë³´ë‹ˆ <a href="https://github.com/elastic/kibana/issues/36079">kibana&#x2F;issues&#x2F;36079</a>ì— ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ëŒ“ê¸€ì´ ëˆˆì— ë“¤ì–´ì™”ê³  ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> http://localhost:9200/_xpack/license?pretty
<span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ì‚¬ì‹¤ ë¼ì´ì„¼ìŠ¤ê°€ ì—†ë‹¤ê³  ìƒê°í•˜ì§€ëŠ” ì•Šì•˜ê³  í˜¹ì‹œë‚˜ íŠ¸ë¼ì´ì–¼ ë¼ì´ì„¼ìŠ¤ì¸ë° ë§Œë£Œë˜ì–´ì„œ ê·¸ëŸ° ê²ƒì¸ê°€ë¼ê³  ìƒê°ë˜ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/license-settings.html">License Settings</a>ì— ë‚˜ì™€ìˆëŠ”ëŒ€ë¡œ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ ìœ í˜•ì„ ì§€ì •í•˜ê³  í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì˜€ì§€ë§Œ ì¦ìƒì„ ë™ì¼í–ˆìŠµë‹ˆë‹¤. </p>
</blockquote>
<p>ê·¸ëŸ¬ë‚˜, ì •ë§ë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì—ëŠ” ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ì—†ì—ˆê³  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/start-basic.html">Start basic API</a>ë¥¼ í†µí•´ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆë‹¤ê³  í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ë¼ì´ì„¼ìŠ¤ë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:9200/_license/start_basic?pretty
<span class="token punctuation">&#123;</span>
  <span class="token string">"acknowledged"</span> <span class="token builtin class-name">:</span> true,
  <span class="token string">"basic_was_started"</span> <span class="token builtin class-name">:</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">[</span>ec2-user ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> http://localhost:9200/_xpack/license?pretty
<span class="token punctuation">&#123;</span>
  <span class="token string">"license"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"status"</span> <span class="token builtin class-name">:</span> <span class="token string">"active"</span>,
    <span class="token string">"uid"</span> <span class="token builtin class-name">:</span> <span class="token string">"fb6a45f5-4f26-45fe-9889-2380b9ec8801"</span>,
    <span class="token string">"type"</span> <span class="token builtin class-name">:</span> <span class="token string">"basic"</span>,
    <span class="token string">"issue_date"</span> <span class="token builtin class-name">:</span> <span class="token string">"2022-08-18T14:51:26.602Z"</span>,
    <span class="token string">"issue_date_in_millis"</span> <span class="token builtin class-name">:</span> <span class="token number">1660834286602</span>,
    <span class="token string">"max_nodes"</span> <span class="token builtin class-name">:</span> <span class="token number">1000</span>,
    <span class="token string">"issued_to"</span> <span class="token builtin class-name">:</span> <span class="token string">"cluster"</span>,
    <span class="token string">"issuer"</span> <span class="token builtin class-name">:</span> <span class="token string">"elasticsearch"</span>,
    <span class="token string">"start_date_in_millis"</span> <span class="token builtin class-name">:</span> <span class="token parameter variable">-1</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="/images/posts/kibana-cannot-connect-elasticsearch/02.png"></p>
<p>ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ìˆìœ¼ë¯€ë¡œ í‚¤ë°”ë‚˜ì—ì„œëŠ” ë”ì´ìƒ í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìœ¼ë©° í‚¤ë°”ë‚˜ ì£¼ì†Œë¡œ ë‹¤ì‹œ ì ‘ì†í•˜ë‹ˆ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ëŠ” ë”ì´ìƒ í‘œì‹œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ë¡œì¨ í‚¤ë°”ë‚˜ì—ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ë¡œ ì—°ê²°í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” X-Pack í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•œ ë¼ì´ì„¼ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤ëŠ” ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ê°€ ë§Œë£Œëœ íŠ¸ë¼ì´ì–¼ ë¼ì´ì„¼ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë”ë¼ë„ í‚¤ë°”ë‚˜ ë˜ëŠ” Start basic APIë¥¼ í†µí•´ ë² ì´ì§ ë¼ì´ì„¼ìŠ¤ë¡œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í‚¤ë°”ë‚˜ë¥¼ ì‹¤í–‰í•˜ê³ ë‚˜ì„œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ë‹¤ë©´ í´ëŸ¬ìŠ¤í„°ì— ë¼ì´ì„¼ìŠ¤ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Basic License</tag>
      </tags>
  </entry>
  <entry>
    <title>AWS IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œí•˜ê¸°</title>
    <url>/limit-region-aws-iam-user/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>íšŒì‚¬ì— ìˆë˜ ì±…ë“¤ ì¤‘ <strong>íƒ„ë ¥ì  ê°œë°œë¡œ ì´ë„ëŠ” AWS ì‹¤ì²œ ê¸°ìˆ </strong>ì´ë¼ëŠ” ì±…ì„ ì½ì–´ë³´ê³  ê´€ë ¨ëœ ì •ë³´ë¥¼ ì°¾ìœ¼ë©´ì„œ AWS í™œìš© ë°©ì•ˆì— ëŒ€í•´ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>AWS í”„ë¦¬ í‹°ì–´ ë˜ëŠ” AWS ì„œë¹„ìŠ¤ë¥¼ í•™ìŠµí•˜ëŠ” ì‚¬ëŒì´ë¼ë©´ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ê³  ìˆëŠ” ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì„ê²ë‹ˆë‹¤. ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” íšŒì‚¬ì˜ ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì´ ì•„ë‹Œ IAMì„ í†µí•´ ì§ë¬´ ë˜ëŠ” íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•˜ê² ì£ . ë³´ì•ˆ ë“±ê¸‰ì´ ë†’ê±°ë‚˜ ì²´ê³„ì ì¸ íšŒì‚¬ë¼ë©´ AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì •ì±…ì„ ê²€í† í•˜ê³  ë¶€ì—¬í•˜ê² ì§€ë§Œ ì œê°€ ë‹¤ë‹ˆê³  ìˆëŠ” íšŒì‚¬ì˜ íŒ€ì—ì„œë„ ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬í•œ ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì„ ë³´ì•˜ê³  ì§ì›ë§ˆë‹¤ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ìë¥¼ ë°œê¸‰í•´ë‹¬ë¼ê³  ìš”ì²­í•˜ì—¬ ì‚¬ìš©í•˜ê³ ëŠ” ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ë£¨íŠ¸ ì‚¬ìš©ì ê³„ì •ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ë„ ê¶Œí•œ ì •ì±…ì„ ê²€í† í•˜ê³  ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ê·€ì°®ì€ ê±´ ë§ìŠµë‹ˆë‹¤. ê²°êµ­ ì‚¬ìš©ìì—ê²Œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì •ì±…ì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ëŠ” ë‹¤ì–‘í•œ ì§€ì—­ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„° ì„¼í„°ì— ìì›ì„ ìƒì„±í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì ê³„ì • ì •ë³´ê°€ ìœ ì¶œëœë‹¤ë©´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì „ì´ ì•„ë‹Œ ê³³ì— AWS ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ê³  ìš”ê¸ˆì´ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë¶€ ìš”ê¸ˆ í­íƒ„ ë¬¸ì œê°€ ìƒê¸°ëŠ” ë¶„ë“¤ë„ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì„œìš¸ ë¦¬ì „ì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ë§Œ ì²´í¬í•œ ìƒíƒœë¡œ ìˆë‹¤ê°€ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆëŠ” ë¦¬ì „ì— ì‹¤í–‰ëœ AWS ë¦¬ì†ŒìŠ¤ë¡œ ì¸í•˜ì—¬ ë°œìƒí•˜ëŠ” ìš”ê¸ˆìœ¼ë¡œ ë‹¹í™©í•˜ëŠ” ê²½ìš°ë„ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. </p>
<p>ì´ ê¸€ì—ì„œëŠ” IAM ì‚¬ìš©ìì˜ ê³„ì • ì •ë³´ê°€ ìœ ì¶œë˜ë”ë¼ë„ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì „ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ì „ì— AWS ë¦¬ì†ŒìŠ¤ê°€ ë‚˜ë„ ëª¨ë¥´ê²Œ ìƒì„±ë˜ì§€ ì•Šë„ë¡ ë°©ì§€í•˜ëŠ” ëŒ€ì±…ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
<h2 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h2><p>IAM(Identity and Access Management)ì€ ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ë§í•©ë‹ˆë‹¤. AWS IAMë„ ë§ˆì°¬ê°€ì§€ë¡œ ì¡°ì§ì„ êµ¬ì„±í•˜ê±°ë‚˜ ì¥ê¸° ë˜ëŠ” ì„ì‹œì ìœ¼ë¡œ AWS ë¦¬ì†ŒìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
<h3 id="IAM-ì‚¬ìš©ì"><a href="#IAM-ì‚¬ìš©ì" class="headerlink" title="IAM ì‚¬ìš©ì"></a>IAM ì‚¬ìš©ì</h3><p>AWS IAMì˜ ì‚¬ìš©ìëŠ” AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì¥ê¸°ì ì¸ ê¶Œí•œì„ ê°€ì§€ë„ë¡ êµ¬ì„±í•˜ëŠ” ì¥ê¸° ìê²© ì¦ëª…ì…ë‹ˆë‹¤. </p>
<p>ë¨¼ì €, í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ IAM ì‚¬ìš©ìì¸ pikaë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. pikaëŠ” <strong>ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” ì§ë¬´ ì •ì±…ì¸ AdminisratorAccess</strong>ë¥¼ ê°€ì§„ë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-01.png"></p>
<p>pikaëŠ” AWSì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê´€ë¦¬í˜• ì •ì±…ì¸ AdministratorAccessì™€ IAMUserChangePasswordì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ pika ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ìœ ì¶œë˜ì–´ ëˆ„êµ°ê°€ê°€ AWS ì½˜ì†”ì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ ëœë‹¤ë©´ ìˆ˜ ë§ì€ ë¦¬ì „ì— VPCë¥¼ ìƒì„±í•˜ê±°ë‚˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-02.png"></p>
<h3 id="IAM-ì‚¬ìš©ì-ë¦¬ì „-ì œí•œ"><a href="#IAM-ì‚¬ìš©ì-ë¦¬ì „-ì œí•œ" class="headerlink" title="IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œ"></a>IAM ì‚¬ìš©ì ë¦¬ì „ ì œí•œ</h3><p>ë§Œì•½ pikaë¼ëŠ” ì‚¬ìš©ìê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ê¸° ìœ„í•œ êµ¬ì„±ì„ ì„œìš¸(ap-northeast-2) ë¦¬ì „ì—ì„œë§Œ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³¸ë‹¤ë©´ ë‹¤ë¥¸ ë¦¬ì „ì— ëŒ€í•œ ê¶Œí•œì„ ë¶ˆí•„ìš”í•˜ê²Œ ì£¼ê³  ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤. </p>
<h4 id="aws-RequestedRegion"><a href="#aws-RequestedRegion" class="headerlink" title="aws:RequestedRegion"></a>aws:RequestedRegion</h4><p>IAM ì •ì±…ì„ ì •ì˜í•  ë•Œ aws:RequestedRegionëŠ” ê¸€ë¡œë²Œ ì¡°ê±´ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ë¦¬ì „ì— ëŒ€í•´ì„œë§Œ ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§Œì•½, ì„œìš¸ ë¦¬ì „ë§Œ ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¡°ê±´ì ˆì„ ì •ì˜í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
            <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token property">"StringEquals"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                    <span class="token property">"aws:RequestedRegion"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">"ap-northeast-2"</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê¸°ì¡´ì— ì—°ê²°í•˜ì˜€ë˜ AdministratorAccessë¼ëŠ” ì§ë¬´ ì •ì±…ì„ í•´ì œí•˜ê³  AdministratorAccessOnlySeoulì´ë¼ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-03.png"></p>
<h3 id="ë¦¬ì „-ì œí•œ-í™•ì¸"><a href="#ë¦¬ì „-ì œí•œ-í™•ì¸" class="headerlink" title="ë¦¬ì „ ì œí•œ í™•ì¸"></a>ë¦¬ì „ ì œí•œ í™•ì¸</h3><p>pika ì‚¬ìš©ìëŠ” ì„œìš¸ ë¦¬ì „ì— ëŒ€í•œ ê¶Œí•œë§Œ ê°€ì§€ë„ë¡ ì œí•œë˜ì—ˆê¸° ë•Œë¬¸ì— ì •ë§ë¡œ ê·¸ëŸ¬í•œ ìƒíƒœê°€ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ì—°ê²°ë˜ì§€ ì•Šì€ íƒ„ë ¥ì  IPëŠ” ìš”ê¸ˆì„ ì§€ë¶ˆí•´ì•¼í•˜ë¯€ë¡œ íƒ„ë ¥ì  IPë¥¼ ìƒì„±í•˜ë ¤ê³  ì‹œë„í–ˆì§€ë§Œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-04.png"></p>
<p>EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ ì„œìš¸ ë¦¬ì „ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ AMI ìœ í˜•ì„ ì¡°íšŒí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-05.png"></p>
<p>ë„ì¿„ ë¦¬ì „ì— ëŒ€í•œ í˜ì´ì§€ëŠ” ì ‘ì†í•  ìˆ˜ ìˆì§€ë§Œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ë™ì¼í•˜ê²Œ AWS APIë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„œìš¸ ë¦¬ì „ì™¸ì—ëŠ” ê¶Œí•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-06.png"></p>
<p>ì‹¬ì§€ì–´ëŠ” ê¸€ë¡œë²Œ ë¦¬ì „ ì„œë¹„ìŠ¤ì¸ S3ì—ì„œë„ ê¶Œí•œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” S3 ì„œë¹„ìŠ¤ë¡œ ì´ë™í•  ë•Œ í˜„ì¬ ë¦¬ì „ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì¸ë° ì„œìš¸ ë¦¬ì „ìœ¼ë¡œ ë³€ê²½í•˜ê±°ë‚˜ ì œê±°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-07.png"></p>
<h3 id="ê²½ê³„-ì„¤ì •ìœ¼ë¡œ-ë¦¬ì „-ì œí•œ"><a href="#ê²½ê³„-ì„¤ì •ìœ¼ë¡œ-ë¦¬ì „-ì œí•œ" class="headerlink" title="ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ë¦¬ì „ ì œí•œ"></a>ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ë¦¬ì „ ì œí•œ</h3><p>ì•ì„œ pika ì‚¬ìš©ìëŠ” AdministratorAccessë¼ëŠ” ì§ë¬´ ì •ì±…ê³¼ ë™ì¼í•˜ê²Œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ëŠ” AdministratorAccessOnlySeoulì´ë¼ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ì—¬ ì œí•œí•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ëœ ê¶Œí•œì´ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ë¦¬ì „ì„ ì œí•œí•˜ëŠ” ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ì—°ê²°í•˜ê¸°ì—ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì •ì±…ì„ ê¶Œí•œ ê²½ê³„(Permissions boundary)ë¡œ ì„¤ì •í•˜ë©´ ëª¨ë“  ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ëœ ì •ì±…ì— ëŒ€í•˜ì—¬ ë¦¬ì „ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="íŠ¹ì •-ì„œë¹„ìŠ¤ì—-ëŒ€í•œ-ê¶Œí•œì„-ê°€ì§„-ì‚¬ìš©ì"><a href="#íŠ¹ì •-ì„œë¹„ìŠ¤ì—-ëŒ€í•œ-ê¶Œí•œì„-ê°€ì§„-ì‚¬ìš©ì" class="headerlink" title="íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ì"></a>íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ì</h4><p>ì œê°€ ì‚¬ìš©í•˜ëŠ” mamboë¼ëŠ” ì‚¬ìš©ìëŠ” VPC, EC2, S3ì— ëŒ€í•œ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ë„ë¡ ì •ì±…ì„ ì—°ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-08.png"></p>
<h4 id="ì„œìš¸-ë¦¬ì „ì„-ê²½ê³„ë¡œ-ì œí•œ"><a href="#ì„œìš¸-ë¦¬ì „ì„-ê²½ê³„ë¡œ-ì œí•œ" class="headerlink" title="ì„œìš¸ ë¦¬ì „ì„ ê²½ê³„ë¡œ ì œí•œ"></a>ì„œìš¸ ë¦¬ì „ì„ ê²½ê³„ë¡œ ì œí•œ</h4><p>ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ì„œìš¸ ë¦¬ì „ë§Œì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•˜ê¸° ìœ„í•´ ì •ì±…ì„ ë§Œë“¤ì–´ì„œ ê¶Œí•œ ê²½ê³„ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-09.png"></p>
<p>mambo ì‚¬ìš©ìëŠ” RDSì— ëŒ€í•œ ê¶Œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ì„œìš¸ ë¦¬ì „ì—ì„œë„ RDSë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-10.png"></p>
<p>EC2 ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ê³  ìˆì§€ë§Œ ê²½ê³„ ì„¤ì •ìœ¼ë¡œ ì¸í•˜ì—¬ ì„œìš¸ ë¦¬ì „ì´ ì•„ë‹ˆë©´ ê¶Œí•œì´ ì—†ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/limit-region-aws-iam-user/aws-iam-user-11.png"></p>
<h4 id="ê¸€ë¡œë²Œ-ì„œë¹„ìŠ¤-ë¦¬ì „"><a href="#ê¸€ë¡œë²Œ-ì„œë¹„ìŠ¤-ë¦¬ì „" class="headerlink" title="ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ë¦¬ì „"></a>ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ë¦¬ì „</h4><p>CloudFront, Route53, IAMê³¼ ê°™ì€ ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ëŠ” ë¯¸êµ­ ë™ë¶€ (us-east-1) ë¦¬ì „ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ê¶Œí•œì„ ë³„ë„ë¡œ ì„¤ì •í•˜ì—¬ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
    <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"cloudfront:*"</span><span class="token punctuation">,</span>
        <span class="token string">"route53:*"</span><span class="token punctuation">,</span>
        <span class="token string">"iam:*"</span><span class="token punctuation">,</span>
        <span class="token string">"support:*"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
    <span class="token property">"Condition"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"StringEquals"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"aws:RequestedRegion"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"us-east-1"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>IAM ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì „ì„ ì œí•œí•¨ìœ¼ë¡œì¨ ë¹„ë¡ ê³„ì • ì •ë³´ê°€ ìœ ì¶œë˜ë”ë¼ë„ ì„œìš¸ ë¦¬ì „ì—ì„œë§Œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ë§ˆìŒëŒ€ë¡œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ë°©ì§€í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì„ ì ìš©í•˜ë”ë¼ë„ IAM ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ì™€ ì•¡ì„¸ìŠ¤ í‚¤ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ê²ƒì€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì´ ì‚¬ìš©í•˜ëŠ” WSL ë¦¬ì†ŒìŠ¤ ì œí•œí•˜ê¸°</title>
    <url>/limit-resources-docker-desktop-using-wslconfig/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤. </p>
<p>ì˜¤ëŠ˜ì€ <strong>ìœˆë„ìš° í™˜ê²½ì˜ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì—ì„œ ì‚¬ìš©í•˜ëŠ” WSL ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•</strong>ì— ëŒ€í•˜ì—¬ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤. ìœˆë„ìš°ì—ì„œ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì„ ì‚¬ìš©í•  ë•Œ ì»´í“¨í„°ê°€ ëŠë ¤ì§„ë‹¤ëŠ” ëŠë‚Œì„ ë°›ê³ ìˆë‹¤ë©´ í˜„ì¬ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ê³¼ WSLì— ì˜í•´ ì ìœ ë˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ í™•ì¸í•˜ì‹œê³  ì´ ê¸€ì—ì„œ ì†Œê°œí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ WSLê°€ ì ìœ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•˜ì‹œëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h2 id="Docker-Desktop-WSL-2"><a href="#Docker-Desktop-WSL-2" class="headerlink" title="Docker Desktop WSL 2"></a>Docker Desktop WSL 2</h2><p>ìœˆë„ìš° 10 í™˜ê²½ì—ì„œ WSL 2ë¥¼ ì„¤ì¹˜í•˜ê³  í™œì„±í™”í–ˆë‹¤ë©´ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì—ì„œ WSL 2ë¥¼ ì‚¬ìš©í•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ë™ë  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-01.png"></p>
<blockquote>
<p>Docker Desktop uses the dynamic memory allocation feature in WSL 2 to greatly improve the resource consumption. This means, Docker Desktop only uses the required amount of CPU and memory resources it needs, while enabling CPU and memory-intensive tasks such as building a container to run much faster.</p>
</blockquote>
<p>ë„ì»¤ ë°ìŠ¤í¬íƒ‘ ê³µì‹ ë¬¸ì„œì—ì„œëŠ” WSL 2ì„ ì‚¬ìš©í•˜ë©´ ë©”ëª¨ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ í• ë‹¹í•  ìˆ˜ ìˆê³  ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì†Œë¹„í•œë‹¤ê³  ì†Œê°œí•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì‹¤ì œë¡œ ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìˆ˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë‹¤ë³´ë©´ ì»´í“¨í„° ì„±ëŠ¥ì´ ì ì  ëŠë ¤ì§€ëŠ” ê²ƒì„ ì²´ê°í•˜ì‹¤ ìˆ˜ë„ ìˆëŠ” ë¶„ë“¤ë„ ê³„ì‹¤í…ë°ìš”. ì´ ë¬¸ì œëŠ” WSL ê¹ƒí—ˆë¸Œì— ì´ìŠˆë¡œ ë“±ë¡ë˜ì–´ìˆëŠ”ë° WSLê°€ ì ìœ í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì œëŒ€ë¡œ ë°˜í™˜í•˜ì§€ ëª»í•˜ëŠ” í˜„ìƒì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p><a href="https://github.com/microsoft/WSL/issues/4166">WSL 2 consumes massive amounts of RAM and doesnâ€™t return it</a></p>
<p>ì´ìŠˆê°€ ë“±ë¡ëœ ë‚ ì§œëŠ” 2019ë…„ì´ì§€ë§Œ ì•„ì§ë„ í•´ê²°ë˜ì§€ ì•Šê³  ì˜¤í”ˆëœ ìƒíƒœë¡œ ë‚¨ì•„ìˆëŠ” ì´ìŠˆì…ë‹ˆë‹¤. ê°œë°œì í•œë¶„ì€ <a href="https://github.com/microsoft/WSL/issues/4166#issuecomment-526725261">WSL2 VMì´ ì ìœ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•</a>ì„ ì‚¬ìš©í•˜ì—¬ WSLì—ì„œ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì œí•œí•˜ë¼ê³  í•´ê²°ì±…ì„ ì œì‹œí•©ë‹ˆë‹¤.</p>
<h3 id="WSL-Configuration"><a href="#WSL-Configuration" class="headerlink" title="WSL Configuration"></a>WSL Configuration</h3><p>ìœ„ì—ì„œ ì†Œê°œí•œ ë°©ë²•ì€ ì´ë¯¸ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì—ì„œë„ ì„¤ì • ë©”ë‰´ì—ì„œ ì†Œê°œí•˜ê³  ìˆëŠ” ë¶€ë¶„ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì œí•œì€ ìœˆë„ìš°ì— ì˜í•´ ê´€ë¦¬ë˜ë¯€ë¡œ CPU, ë©”ëª¨ë¦¬ ë“±ì„ ì œí•œí•˜ê¸° ìœ„í•´ì„œëŠ” WSL 2ì˜ ì„¤ì •ì„ ìˆ˜í–‰í•˜ë¼ê³  í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-02.png"></p>
<h4 id="wslconfig-ì •ì˜"><a href="#wslconfig-ì •ì˜" class="headerlink" title=".wslconfig ì •ì˜"></a>.wslconfig ì •ì˜</h4><p>ì‚¬ìš©ì í´ë” ìœ„ì¹˜ì—ì„œ .wslconfig íŒŒì¼ì„ ì§ì ‘ ìƒì„±í•˜ê±°ë‚˜ ë‹¤ìŒê³¼ ê°™ì´ ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œ ë¹„ì¥¬ì–¼ ìŠ¤íŠœë””ì˜¤ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<blockquote>
<p>íŒŒì¼ì„ ë§Œë“¤ê¸° ìœ„í•œ íŒŒì›Œ ì‰˜ ëª…ë ¹ì–´ê°€ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ë§Œ ë¹„ì¥¬ì–¼ ìŠ¤íŠœë””ì˜¤ ì½”ë“œë¡œ ì—¬ëŠ”ê²Œ ë” í¸í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.</p>
</blockquote>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-03.png"></p>
<p>ë¹„ì¥¬ì–¼ ìŠ¤íŠœë””ì˜¤ ì½”ë“œë¡œ ì—´ì–´ì§„ .wslconfig íŒŒì¼ì˜ ë‚´ìš©ì„ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.</p>
<pre class="language-plain" data-language="plain"><div class="caption"><span>.wslconfig</span></div><code class="language-plain">[wsl2]
memory=4GB
processors=2
swap=0</code></pre>

<h4 id="wslconfig-ë°˜ì˜"><a href="#wslconfig-ë°˜ì˜" class="headerlink" title=".wslconfig ë°˜ì˜"></a>.wslconfig ë°˜ì˜</h4><p>íŒŒì¼ì— ì •ì˜í•œ ë‚´ìš©ì„ WSLì— ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì„ ì¢…ë£Œí•˜ê³  <strong>PowerShell</strong>ì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•œ ë‹¤ìŒ <strong>LxssManager</strong>ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-04.png"></p>
<h3 id="ë¹„êµí•´ë³´ê¸°"><a href="#ë¹„êµí•´ë³´ê¸°" class="headerlink" title="ë¹„êµí•´ë³´ê¸°"></a>ë¹„êµí•´ë³´ê¸°</h3><p>ë‹¤ìŒì€ ê°„ë‹¨í•˜ê²Œ WSL 2ì˜ ê¸°ë³¸ ì„¤ì •ì— ì˜í•´ ë™ì‘í•˜ëŠ” ê²ƒê³¼ .wslconfigì„ ì •ì˜í•´ì„œ WSL ì—ì„œ ì‚¬ìš©í•  ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•˜ì˜€ì„ ê²½ìš°ë¥¼ ë¹„êµí•œ ë‚´ìš©ì…ë‹ˆë‹¤. ëŒ€ëµì ìœ¼ë¡œ ì–´ë–¤ ì°¨ì´ë¥¼ ë³´ì´ëŠ”ì§€ë§Œ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<h4 id="ê¸°ë³¸-WSL-2"><a href="#ê¸°ë³¸-WSL-2" class="headerlink" title="ê¸°ë³¸ WSL 2"></a>ê¸°ë³¸ WSL 2</h4><p>ë¨¼ì €, ê¸°ë³¸ WSL 2 ì„¤ì •ì— ì˜í•´ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì´ ì ìœ í•˜ê²Œ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¸í•´ë³´ì£ .</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-05.gif"></p>
<p>ê¸°ë‹¤ë¦¬ê¸° ì§€ê²¨ì›Œí•˜ì‹¤ ë¶„ë“¤ì„ ìœ„í•´ì„œ ì„¤ëª…í•˜ìë©´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í• ë•Œë§ˆë‹¤ ë©”ëª¨ë¦¬ê°€ ì˜¬ë¼ê°€ë©´ì„œ 4GBë¥¼ ì ìœ í•œ ê²ƒì„ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ëŠ” ë§Œí¼ ë©”ëª¨ë¦¬ë¥¼ ì ìœ í•˜ëŠ” ê²ƒì€ ë‹¹ì—°í•œ ë¶€ë¶„ì¼ ìˆ˜ ìˆìœ¼ë‚˜ ë¬¸ì œëŠ” ê·¸ ë‹¤ìŒë¶€í„° ë°œìƒí•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-06.png"></p>
<p>ìœ„ í™”ë©´ì„ ì‚´í´ë³´ì‹œë©´ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ìœ¼ë¡œ ì‹¤í–‰í–ˆë˜ ì»¨í…Œì´ë„ˆë¥¼ ì „ë¶€ ì¢…ë£Œí•˜ê³  ì´ë¯¸ì§€ ê·¸ë¦¬ê³  ë³¼ë¥¨ì„ ì „ë¶€ ì‚­ì œí–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  <strong>WSL2ì—ì„œ ì ìœ ì¤‘ì¸ ë©”ëª¨ë¦¬ì˜ ì¼ë¶€ëŠ” ë°˜í™˜ë˜ì§€ ì•Šê³  ìˆìŒ</strong>ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. </p>
<h4 id="ì‚¬ìš©ì-ì •ì˜-WSL-2"><a href="#ì‚¬ìš©ì-ì •ì˜-WSL-2" class="headerlink" title="ì‚¬ìš©ì ì •ì˜ WSL 2"></a>ì‚¬ìš©ì ì •ì˜ WSL 2</h4><p>ì´ì œ WSL 2ì—ì„œ ì ìœ í•˜ì—¬ ì‚¬ìš©í•  í”„ë¡œì„¸ì„œë¥¼ 2ê°œ, ë©”ëª¨ë¦¬ë¥¼ 2GB ê·¸ë¦¬ê³  ìŠ¤ì™‘ì„ í•˜ì§€ì•Šë„ë¡ ì„¤ì •í•˜ê³  ì•ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í–ˆë˜ ê²ƒì„ ë‹¤ì‹œ ì‹œë„ í•´ë³¸ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-07.gif"></p>
<p>ê¸°ë³¸ ì„¤ì •ë•Œì™€ëŠ” ë‹¤ë¥´ê²Œ ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë”ë¼ë„ WSL2ì—ì„œ í• ë‹¹í•˜ëŠ” ë©”ëª¨ë¦¬ëŠ” 2GBë¥¼ ë„˜ì§€ì•Šê²Œ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡ , ì ìœ í•˜ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì œí•œë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆ ì„±ëŠ¥ì€ ì¤„ì–´ë“¤ê²Œ ë‹¹ì—°í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì‹œìŠ¤í…œ ìì›ì´ ì—¬ìœ ë¡­ë‹¤ë©´ ì ë‹¹í•˜ê²Œ ì œí•œí•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</p>
<h2 id="ëŠë ¤ì§ì„-ì²´ê°í•˜ëŠ”-ì´ìœ "><a href="#ëŠë ¤ì§ì„-ì²´ê°í•˜ëŠ”-ì´ìœ " class="headerlink" title="ëŠë ¤ì§ì„ ì²´ê°í•˜ëŠ” ì´ìœ "></a>ëŠë ¤ì§ì„ ì²´ê°í•˜ëŠ” ì´ìœ </h2><p>.wslconfig íŒŒì¼ì„ ì •ì˜í•˜ì§€ ì•Šê³  ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ WSL 2ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì„ë•Œ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì´ ì‹œìŠ¤í…œ ìì›ì„ ì–´ëŠì •ë„ ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/docker-desktop-wsl-config/docker-desktop-wsl-config-08.png"></p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ <em><strong>í”„ë¡œì„¸ì„œëŠ” ì „ë¶€ ì‚¬ìš©</strong></em>í•œë‹¤ê³  í•˜ë©° ë©”ëª¨ë¦¬ëŠ” <strong>ì´ ë©”ëª¨ë¦¬ì˜ ì ˆë°˜ ë˜ëŠ” 8GB ì¤‘ ì‘ì€ìª½ìœ¼ë¡œ ì„¤ì •</strong>ë©ë‹ˆë‹¤. ì €ì˜ ê²½ìš°ëŠ” 32GBì˜ ë©”ëª¨ë¦¬ì´ë¯€ë¡œ ë©”ëª¨ë¦¬ì˜ ì ˆë°˜ë³´ë‹¤ ì‘ì€ 8GBê°€ ì„¤ì •ë˜ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ê°œë°œìê°€ ì‚¬ìš©í•˜ëŠ” ì»´í“¨í„°ì˜ ë©”ëª¨ë¦¬ ìš©ëŸ‰ 16GBì´ë¼ë©´ ë™ì¼í•˜ê²Œ 8GBì´ë¯€ë¡œ <strong>ë¬´ë ¤ ì´ ë©”ëª¨ë¦¬ì˜ ì ˆë°˜ì´ë‚˜ ì ìœ </strong>í•  ìˆ˜ ìˆê²Œ ë˜ê³  ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•˜ë”ë¼ë„ ì¼ë¶€ì˜ ë©”ëª¨ë¦¬ëŠ” ì ìœ í•˜ê³  ìˆì„ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p>
<p>ìœˆë„ìš°ì˜ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë¥¼ ì‚¬ìš©í•´ì„œ vmmemì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ê°€ ë†’ì€ì§€ í™•ì¸í•´ë³´ì‹œê¸° ë°”ë¼ë©° ì´ìƒìœ¼ë¡œ ë„ì»¤ ë°ìŠ¤í¬íƒ‘ì´ ì‚¬ìš©í•˜ëŠ” WSL ë¦¬ì†ŒìŠ¤ ì œí•œí•˜ê¸°ë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>WSL</tag>
        <tag>Docker Desktop</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP/2ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°œë°œ í™˜ê²½</title>
    <url>/local-for-http2/</url>
    <content><![CDATA[<p>ì§€ë‚œ <a href="/ssl-certificate">SSL ì¸ì¦ì„œ</a>ì™€ <a href="/tls-offload">TLS ì˜¤í”„ë¡œë“œ</a>ë¼ëŠ” ê¸€ì„ í†µí•´ HTTPSì— ëŒ€í•´ì„œ ì‚´í´ë³¸ ì ì´ ìˆìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ HTTPSëŠ” ì‚¬ìš©ìì˜ ìš”ì²­ì´ ì•ˆì „í•˜ê²Œ ì„œë²„ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ ë„ì…í•˜ì§€ë§Œ <a href="https://developers.google.com/web/fundamentals/performance/http2?hl=ko">HTTP&#x2F;2</a>ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ë„ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ ì‚¬ìš©ìì˜ ì»´í“¨í„°ë‚˜ ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì— ëŒ€í•œ ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ë©´ì„œ TLS í•¸ë“œì‰ì´í‚¹ì— ëŒ€í•œ ë¹„ìš©ì€ ê·¸ë‹¤ì§€ í¬ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ HTTP 1.1ì—ì„œì˜ Keep Alive ë„ì…ì€ ì´ë¯¸ ì—°ê²°ì¤‘ì¸ TCPë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ë¯€ë¡œ ì–´ëŠì •ë„ì˜ TLS í•¸ë“œì‰ì´í‚¹ì— ëŒ€í•œ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆì§€ë§Œ ìˆ˜ ë§ì€ ìš”ì²­ì´ ë°œìƒí•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ë¯¸ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ìš”ì²­ì´ ëë‚˜ê¸°ë¥¼ í˜„ì¬ ìš”ì²­ì´ ëŒ€ê¸°í•´ì•¼í•˜ëŠ” ë¬¸ì œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>HTTP 1.1ì€ keep-alive ì»¤ë„¥ì…˜ì„ í†µí•´ ì—¬ëŸ¬ê°œì˜ TCP ì—°ê²°ì„ ì¼ì • ì‹œê°„ ì—´ì–´ë†“ê³  ìš”ì²­ì„ ì°¨ë¡€ëŒ€ë¡œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œëŠ” <a href="https://stackoverflow.com/a/985704">HTTP 1.1ë¥¼ ì‚¬ìš©í•  ë•Œ ë„ë©”ì¸ ë‹¹ ìµœëŒ€ ì—°ê²° ìˆ˜ë¥¼ ì œí•œ</a>í•©ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="HTTP-x2F-2"><a href="#HTTP-x2F-2" class="headerlink" title="HTTP&#x2F;2"></a>HTTP&#x2F;2</h2><p>HTTP 1.1ì´ ì´ë¯¸ ì—°ê²°ëœ TCP ì»¤ë„¥ì…˜ì„ ë‹¤ì‹œ ì¬ì‚¬ìš©í•œë‹¤ë©´ HTTP2ëŠ” ë‹¨ì¼ TCP ì—°ê²°ì„ ìˆ˜í–‰í•˜ê³  ìˆ˜ ë§ì€ ìš”ì²­ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ê½¤ ë§ì€ ìš”ì²­ì„ ë™ì‹œì— ìˆ˜í–‰í•´ë„ ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ ì œí•œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ <strong>í”„ë¡œë¯¸ìŠ¤ë¡œ ì—¬ëŸ¬ê°œ ìš”ì²­ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ë„ë¡</strong> ì½”ë“œë¥¼ ì‘ì„±í•˜ë”ë¼ë„ ë‹¤ë¥¸ ìš”ì²­ì´ ëë‚˜ê¸°ê¹Œì§€ ìš”ì²­ì´ ëŒ€ê¸°í•˜ëŠ” í˜„ìƒì´ ì¤„ì–´ë“¤ê²Œë˜ë©°, ì›¹íŒ©ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ UIë¥¼ êµ¬ì„±í•˜ëŠ” ì—ì…‹ íŒŒì¼ë“¤ì„ <strong>ì—¬ëŸ¬ê°œì˜ ì‘ì€ ì‚¬ì´ì¦ˆë¡œ ë‚˜ëˆ„ëŠ” ì²­í¬ë¥¼ ìˆ˜í–‰</strong>í•˜ê³  ì›¹ í˜ì´ì§€ ë¡œë”© ì‹œ ë¶„í• ëœ ì²­í¬ë¥¼ ë¹ ë¥´ê²Œ ì‘ë‹µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ë¸Œë¼ìš°ì €ì—ì„œ HTTP&#x2F;2ë„ ë„ë©”ì¸ ë‹¹ TCP ì—°ê²°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ëŒ€ë¶€ë¶„ì˜ ë¸Œë¼ìš°ì €ì™€ ì„œë²„ì—ì„œëŠ” HTTP&#x2F;2 ì—°ê²°ì„ ìœ„í•´ TLS ì‚¬ìš©ì„ ìš”êµ¬í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ALPN"><a href="#ALPN" class="headerlink" title="ALPN"></a>ALPN</h3><p>HTTP2.Pro ì‚¬ì´íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ <a href="https://http2.pro/check?url=https://naver.com/">ë„¤ì´ë²„</a>ì™€ <a href="https://http2.pro/check?url=https://okky.kr/">ì˜¤í‚¤</a> ì„œë¹„ìŠ¤ ì£¼ì†Œë¥¼ ì…ë ¥í•´ë³´ë©´ ALPN ì§€ì› ì—¬ë¶€ì— ëŒ€í•œ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤. ALPNì€ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ê³  ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°„ ì—°ê²°ì—ì„œ ì–´ë–¤ HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•œ ì •ì±…ì…ë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ëŠ” <a href="https://aws.amazon.com/ko/about-aws/whats-new/2020/05/network-load-balancer-now-supports-tls-alpn-policies/">NLB</a>ì—ì„œë„ TLS ALPN ì •ì±…ì„ ì§€ì›í•˜ê¸°ë„ í•˜ì£ .</p>
<blockquote>
<p>HTTP&#x2F;2 ì—°ê²°ì„ ìš°ì„ ì ìœ¼ë¡œ ìš”êµ¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ HTTP 1.1ë¡œ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="Local-CA-with-mkcert"><a href="#Local-CA-with-mkcert" class="headerlink" title="Local CA with mkcert"></a>Local CA with mkcert</h3><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.webserver.configure-http2.undertow">ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜</a> ë¿ë§Œ ì•„ë‹ˆë¼ <a href="/reverse-proxy-using-nginx">ì—”ì§„ì—‘ìŠ¤</a>ì—ì„œë„ TLS êµ¬ì„±ì„ ìœ„í•´ì„œëŠ” ì¸ì¦ì„œê°€ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì§€ë‚œ SSL ì¸ì¦ì„œ ê¸€ì—ì„œëŠ” <a href="/ssl-certificate/#%EC%9E%90%EC%B2%B4-%EC%84%9C%EB%AA%85-CA-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%EA%B8%89">ìì²´ ì„œëª… CA ì¸ì¦ì„œ ë°œê¸‰</a>ì„ í•œê²ƒì²˜ëŸ¼ ë¡œì»¬ ê°œë°œ í™˜ê²½ì„ ìœ„í•œ ì¸ì¦ì„œë¥¼ ë§Œë“¤ê³  ì ìš©í•˜ëŠ” ê³¼ì •ì„ ê³µìœ í–ˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ë“¤ì€ ìƒê°ë³´ë‹¤ ê¹Œë‹¤ë¡­ê³  ë¶ˆí¸í•œ ë¶€ë¶„ì´ ë§ìŠµë‹ˆë‹¤. ê²°êµ­ ë¶ˆí¸í•œ ê²ƒì„ ê·¹íˆ ì‹«ì–´í•˜ëŠ” ê°œë°œìë“¤ì€ <a href="https://github.com/FiloSottile/mkcert">mkcert</a>ë¼ê³  í•˜ëŠ” ë¡œì»¬ í™˜ê²½ì„ ìœ„í•œ CA ì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ ì‹ ë¢° ê¸°ê´€ì— ë“±ë¡í•˜ëŠ” ë„êµ¬ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><code class="language-ps">PS C:\Users\Mambo\cert&gt; mkcert -install
The local CA is now installed in the system trust store! âš¡ï¸

PS C:\Users\Mambo\docker\nginx.conf&gt; mkcert -ecdsa localhost 127.0.0.1 ::1 mambo.kr

Created a new certificate valid for the following names ğŸ“œ
 - &quot;localhost&quot;
 - &quot;127.0.0.1&quot;
 - &quot;::1&quot;
 - &quot;mambo.kr&quot;

The certificate is at &quot;.&#x2F;localhost+3.pem&quot; and the key at &quot;.&#x2F;localhost+3-key.pem&quot; âœ…

It will expire on 22 May 2024 ğŸ—“</code></pre>

<blockquote>
<p>ê°„ë‹¨í•˜ê²Œ CA ì¸ì¦ì„œë¥¼ ì‹ ë¢° ê¸°ê´€ì— ë“±ë¡í•˜ê³  ë¡œì»¬ ì»´í“¨í„°ë¥¼ ìœ„í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í–ˆìŠµë‹ˆë‹¤.<br>ë¡œì»¬ ì»´í“¨í„°ë¥¼ ìœ„í•œ ì¸ì¦ì„œì— ëŒ€í•œ ì‹ ë¢° ì¸ì¦ì„œë¥¼ ë“±ë¡í•œë‹¤ëŠ” ì ì„ ìŠì§€ ë§ˆì„¸ìš”.</p>
</blockquote>
<h2 id="ë¡œì»¬-ê°œë°œ-í™˜ê²½"><a href="#ë¡œì»¬-ê°œë°œ-í™˜ê²½" class="headerlink" title="ë¡œì»¬ ê°œë°œ í™˜ê²½"></a>ë¡œì»¬ ê°œë°œ í™˜ê²½</h2><p>ì¼ë°˜ì ìœ¼ë¡œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì´í›„ì˜ íŠ¸ë˜í”½ ì „ë‹¬ì—ëŠ” TLS ì—°ê²°ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ì§€ ì•Šë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. ì¼ë¶€ ì—”ì§€ë‹ˆì–´ë“¤ì€ ëª¨ë“  íŠ¸ë˜í”½ ì „ë‹¬ì— TLS ì—°ê²°ì„ í•´ì•¼í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤. ì–´ëŠì •ë„ì˜ ë³´ì•ˆì ì¸ êµ¬ì„±ì„ í•˜ëŠëƒëŠ” ì¡°ì§ì—ì„œ ê²°ì •í•´ì•¼í•  ì¼ì…ë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì€ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ê³  ë‚´ë¶€ì ì¸ íŠ¸ë˜í”½ ì „ë‹¬ì—ëŠ” TLSë¥¼ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚·ì„ ë³´í˜¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. </p>
<p>TLS ì˜¤í”„ë¡œë“œ ë° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ìœ„í•œ ì—”ì§„ì—‘ìŠ¤ë¥¼ êµ¬ì„±í•˜ê³  HTTPë¡œ ì‹¤í–‰ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ë©° HTTP&#x2F;2ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì—”ì§„ì—‘ìŠ¤ê°€ ì—†ë‹¤ë©´ ì œ ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ <a href="https://github.com/kdevkr/nginx.conf">nginx.conf</a>ì˜ ì½”ë“œë¥¼ í™œìš©í•´ì„œ ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì—”ì§„ì—‘ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span> 
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21.3<span class="token punctuation">-</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
      <span class="token punctuation">-</span> ./localhost+3.pem<span class="token punctuation">:</span>/etc/nginx/server.crt
      <span class="token punctuation">-</span> ./localhost+3<span class="token punctuation">-</span>key.pem<span class="token punctuation">:</span>/etc/nginx/server.key
      <span class="token punctuation">-</span> ./static<span class="token punctuation">:</span>/etc/nginx/static
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> amazoncorretto<span class="token punctuation">:</span>11<span class="token punctuation">-</span>alpine
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'java -jar /etc/app.jar'</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./demo<span class="token punctuation">-</span>0.0.1<span class="token punctuation">-</span>SNAPSHOT.jar<span class="token punctuation">:</span>/etc/app.jar
</code></pre>

<blockquote>
<p>ì €ëŠ” ë¦¬íŒŒì§€í† ë¦¬ì— ìˆëŠ” ì‚¬ì„¤ ì¸ì¦ì„œ ëŒ€ì‹ ì— mkcertë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ë¦¬íŒŒì§€í† ë¦¬ì— ì €ì¥ëœ ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í–ˆì§€ë§Œ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì¸í…”ë¦¬ì œì´ì™€ ê°™ì€ ê°œë°œ ë„êµ¬ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì…¨ë‹¤ë©´ nginx.conf íŒŒì¼ì˜ ë°±ì—”ë“œ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ ì£¼ì†Œë¥¼ <code>host.docker.internal</code>ë¡œ ë³€ê²½í•˜ì„¸ìš”. ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ëœ ì—”ì§„ì—‘ìŠ¤ì—ì„œ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/local-for-http2/security-overview.png" alt="TLS Handshake"><br><img data-src="/images/posts/local-for-http2/network-overview.png" alt="HTTP/2"></p>
<blockquote>
<p>mkcertê°€ ìë™ìœ¼ë¡œ ì‹ ë¢° ê¸°ê´€ ëª©ë¡ì— ìì‹ ì˜ CA ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ì˜€ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ëŠ” ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆê³  HTTPS ì—°ê²°ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì´ì œ ì—¬ëŸ¬ë¶„ë“¤ë„ ë¡œì»¬ í™˜ê²½ì—ì„œ ê°œë°œí•˜ì‹¤ë•Œ HTTPSì™€ ê·¸ë¦¬ê³  HTTP 1.1ì´ ì•„ë‹Œ HTTP&#x2F;2ë¥¼ ì‚¬ìš©í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Nginx</tag>
        <tag>TLS</tag>
        <tag>HTTP2</tag>
        <tag>mkcert</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê·¸ë°± ìš´ì˜ ì„¤ì •</title>
    <url>/logback-spring/</url>
    <content><![CDATA[<p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ê¸°ë³¸ì ì¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œì¨ ë¡œê·¸ë°±ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ í¬í•¨ëœ org&#x2F;springframework&#x2F;boot&#x2F;logging&#x2F;logback&#x2F;base.xml íŒŒì¼ì„ í† ëŒ€ë¡œ ì½˜ì†” ë° íŒŒì¼ë¡œ ë¡œê·¸ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆê²Œ ê¸°ë³¸ê°’ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. LoggingApplicationListenerì— ì˜í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë  ë•Œ í˜¸ì¶œë˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ë²¤íŠ¸ì— ì˜í•´ LogbackLoggingSystem ìœ¼ë¡œì¨ ë¡œê·¸ë°± ì„¤ì •ì´ ì ìš©ë©ë‹ˆë‹¤.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>

<span class="token comment">&lt;!--
Base logback configuration provided for compatibility with Spring Boot 1.1
--></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>included</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/springframework/boot/logging/logback/defaults.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_FILE:-$&#123;LOG_PATH:-$&#123;LOG_TEMP:-$&#123;java.io.tmpdir:-/tmp&#125;&#125;&#125;/spring.log&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/springframework/boot/logging/logback/console-appender.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/springframework/boot/logging/logback/file-appender.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>included</span><span class="token punctuation">></span></span></code></pre>

<p>ìœ„ì™€ ê°™ì´ ì„¤ì •ë˜ì–´ìˆì–´ë„ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ëŠ” ì½˜ì†”ì´ë¼ëŠ” í‘œì¤€ ì¶œë ¥ì— ì˜í•´ ê¸°ë¡ë˜ëŠ” í¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ë‹¤ë³´ë©´ ë³´ì•ˆ ê°ì‚¬ í˜¹ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë™ì‘ì— ëŒ€í•œ ê²€ì¦ì„ ìœ„í•´ ì¼ë¶€ ë¡œê·¸ë¥¼ ë³„ë„ë¡œ ë‚¨ê²¨ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìš”êµ¬ì‚¬í•­ì´ ìˆë‹¤ë©´ ê¸°ë³¸ì ì¸ ë¡œê·¸ë°± ì„¤ì • ë³´ë‹¤ëŠ” ìš´ì˜ì„ ìœ„í•œ ì»¤ìŠ¤í…€ êµ¬ì„±ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h4 id="logback-spring-xml"><a href="#logback-spring-xml" class="headerlink" title="logback-spring.xml"></a>logback-spring.xml</h4><blockquote>
<p>When possible, we recommend that you use the -spring variants for your logging configuration (for example, logback-spring.xml rather than logback.xml). If you use standard configuration locations, Spring cannot completely control log initialization.</p>
</blockquote>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ê³µì‹ ë¬¸ì„œì˜ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.logging.custom-log-configuration">Custom Log Configuration</a>ì— ëŒ€í•œ ë‚´ìš©ì— ë”°ë¼ logback-spring.xml ì´ë¼ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¡œê·¸ë°±ì— ëŒ€í•œ ì„¤ì • íŒŒì¼ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤. <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.logging.logback-extensions.profile-specific">Profile-specific Configuration</a>ì—ì„œ ì„¤ëª…í•˜ëŠ” ê²ƒì²˜ëŸ¼ <springProfile> ë° <springProperty> íƒœê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì†ì„±ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="ch-qos-logback-core-rolling-RollingFileAppender"><a href="#ch-qos-logback-core-rolling-RollingFileAppender" class="headerlink" title="ch.qos.logback.core.rolling.RollingFileAppender"></a>ch.qos.logback.core.rolling.RollingFileAppender</h4><p>ì˜¤ë¥˜ì— ëŒ€í•œ ë¡œê·¸ë§Œ ë³„ë„ë¡œ ì¶”ì¶œí•˜ì—¬ ê¸°ë¡í•œë‹¤ê±°ë‚˜ íŠ¹ì • ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ëŒ€í•œ ë¡œê·¸ë¥¼ ë³„ë„ë¡œ ë‚˜ëˆ„ì–´ì„œ ê´€ë¦¬í•˜ê³ ì í•œë‹¤ë©´ FileAppender ë˜ëŠ” RollingFileAppenderê³¼ í•¨ê»˜ SizeAndTimeBasedRollingPolicyë¥¼ ì ìš©í•˜ì—¬ ì›í•˜ëŠ” ì¶œë ¥ í˜•íƒœë¡œ ë¡œê·¸ê°€ ë‚¨ë„ë¡ êµ¬ì„±í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. </p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span> <span class="token attr-name">scan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">scanPeriod</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30 seconds<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/springframework/boot/logging/logback/defaults.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org/springframework/boot/logging/logback/console-appender.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR_LOG_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_PATH&#125;/error_$&#123;LOG_FILE&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">></span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">></span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">></span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>$&#123;FILE_LOG_PATTERN&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">></span></span>$&#123;FILE_LOG_CHARSET&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;ERROR_LOG_FILE&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN:-$&#123;ERROR_LOG_FILE&#125;.%d&#123;yyyy-MM-dd&#125;.%i.gz&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cleanHistoryOnStart</span><span class="token punctuation">></span></span>$&#123;LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START:-false&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cleanHistoryOnStart</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">></span></span>$&#123;LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE:-10MB&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>totalSizeCap</span><span class="token punctuation">></span></span>$&#123;LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP:-0&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>totalSizeCap</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>$&#123;LOGBACK_ROLLINGPOLICY_MAX_HISTORY:-7&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR_FILE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">></span></span></code></pre>

<blockquote>
<p>ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ ë¡œê·¸ ë¡œí…Œì´ì…˜ì„ ë³„ë„ë¡œ í™œìš©ì¤‘ì´ë¼ë©´ êµ³ì´ ë¡œê·¸ë°±ì—ì„œ RollingFileAppenderë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ë‹¤. </p>
</blockquote>
<p>ìœ„ ERROR_FILE appenderëŠ” org&#x2F;springframework&#x2F;boot&#x2F;logging&#x2F;logback&#x2F;file-appender.xmlë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìœ¼ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ì„±ì— ì˜í•´ ê²°ì •ëœ LOG_PATHì— error_ë¥¼ íŒŒì¼ëª…ì— í¬í•¨í•˜ì—¬ ë‚¨ê¸°ë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>
<h4 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h4><ul>
<li><a href="https://www.baeldung.com/spring-boot-logging">Logging in Spring Boot</a></li>
<li><a href="https://www.baeldung.com/logback">A Guide To Logback</a></li>
<li><a href="https://logback.qos.ch/manual/index.html">The logback manual</a></li>
</ul>
]]></content>
      <tags>
        <tag>Logging</tag>
        <tag>Logback</tag>
      </tags>
  </entry>
  <entry>
    <title>ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</title>
    <url>/lombok-annotation-processor/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ì¸í…”ë¦¬ì œì´ì—ì„œ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ê°€ê¸° ìœ„í•œ ë‚´ìš©ì„ ê³µìœ í•˜ê³ ì í•©ë‹ˆë‹¤.</p>
<h2 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h2><p><a href="https://projectlombok.org/">ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬</a>ëŠ” ìë°” í”„ë¡œì íŠ¸ì—ì„œ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë ë§Œí¼ í¸ë¦¬í•˜ê³  ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/GettingStarted.html">APT(Annotation Processing Tool)</a>ë¥¼ í†µí•´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ(Annotation Processor)ë¡œ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì •ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p>
<h3 id="ì¸í…”ë¦¬ì œì´-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ"><a href="#ì¸í…”ë¦¬ì œì´-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ" class="headerlink" title="ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ"></a>ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</h3><p>ì¸í…”ë¦¬ì œì´ì—ì„œëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ <a href="https://www.jetbrains.com/help/idea/annotation-processors-support.html">ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥</a>ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ë©´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/lombok-annotation-processor/intellij-annotation-processing.png"></p>
<h4 id="ê·¸ë˜ë“¤-í”„ë¡œì íŠ¸"><a href="#ê·¸ë˜ë“¤-í”„ë¡œì íŠ¸" class="headerlink" title="ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸"></a>ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸</h4><p>ì¸í…”ë¦¬ì œì´ëŠ” ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ì— ìˆëŠ” ê¸°ë³¸ ê·¸ë˜ë“¤ ë˜í¼ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •ë˜ì–´ìˆìŠµë‹ˆë‹¤. <strong>Build Tools &gt; Gradle</strong> ë©”ë‰´ì—ì„œ ê¸°ë³¸ ê·¸ë˜ë“¤ ë˜í¼ê°€ ì•„ë‹Œ ì¸í…”ë¦¬ì œì´ ìì²´ë¡œ ë¹Œë“œí•˜ê³  ì‹¤í–‰ë˜ë„ë¡ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸í…”ë¦¬ì œì´ ìì²´ì ìœ¼ë¡œëŠ” ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ì„ ë²ˆë“¤ì— í¬í•¨í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìœ„ì¹˜í•˜ê¸° ë•Œë¬¸ì— ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì–´ìˆë‹¤ë©´ ë¡¬ë³µì— ëŒ€í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    compileOnly <span class="token string">'org.projectlombok:lombok'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p><em>ì¸í…”ë¦¬ì œì´ëŠ” ì¹œì ˆí•˜ê²Œë„ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆì§€ë§Œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ìˆìœ¼ë©´ ì´ë²¤íŠ¸ ë¡œê·¸ì— ê¸°ëŠ¥ í™œì„±í™”ë¥¼ ë¬»ëŠ” ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤.</em><br><em>ë˜í•œ, ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„ íƒí•œ í™˜ê²½ì—ì„œëŠ” ë³„ë‹¤ë¥¸ ì„¤ì •ì—†ì´ë„ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë©´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ë™ì‘í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</em></p>
</blockquote>
<h4 id="ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±"><a href="#ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±" class="headerlink" title="ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±"></a>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</h4><p>í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ ì„¤ì •ì€ í”„ë¡œì íŠ¸ì˜ ê·¸ë˜ë“¤ ë˜í¼ë¡œ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì´ë¼ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ê·¸ë˜ë“¤ êµ¬ì„± íŒŒì¼ì— ì •ì˜í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/lombok-annotation-processor/intellij-gradle-build-and-run.png"></p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    compileOnly <span class="token string">'org.projectlombok:lombok'</span>
    annotationProcessor <span class="token string">'org.projectlombok:lombok'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ë˜ë“¤ì˜ annotationProcessorë¥¼ í†µí•´ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œê°€ ìœ„ì¹˜í•˜ëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ë“±ë¡ë¨ì— ë”°ë¼ ì¸í…”ë¦¬ì œì´ëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ í™œì„±í™” ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í™œì„±í™”ì— ëŒ€í•œ ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤. </p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">configurations <span class="token punctuation">&#123;</span>
   compileOnly <span class="token punctuation">&#123;</span>
       extendsFrom annotationProcessor
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ë˜ë“¤ ê¸°ë°˜ì˜ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë¡¬ë³µì„ ì¶”ê°€í•˜ë©´ ìœ„ êµ¬ë¬¸ì´ í¬í•¨ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ë¬¸ì˜ ì—­í• ì´ ë¬´ì—‡ì¸ì§€ ê¶ê¸ˆí•˜ì§€ ì•Šìœ¼ì‹ ê°€ìš”? ì¸í…”ë¦¬ì œì´ëŠ” ê·¸ë˜ë“¤ ì„¤ì • íŒ¡ë¦¬ì— ìœ„ êµ¬ë¬¸ì´ í¬í•¨ë˜ëŠ” ê²½ìš° <code>Gradle Imported</code>ë¼ëŠ” ì´ë¦„ì˜ í”„ë¡œíŒŒì¼ë¡œì¨ ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ëŠ” ê²ƒì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/lombok-annotation-processor/intellij-lombok-annotation-processing-extends-from.png"></p>
<blockquote>
<p><em>ì¸í…”ë¦¬ì œì´ëŠ” ê¸°ë³¸ í”„ë¡œíŒŒì¼ì— ëŒ€í•´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´ ì´ë²¤íŠ¸ ë¡œê·¸ë¥¼ í†µí•´ ë¡¬ë³µì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± ê¸°ëŠ¥ í™œì„±í™”ë¥¼ ì•ˆë‚´í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</em></p>
</blockquote>
<h3 id="ë¡¬ë³µ-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ"><a href="#ë¡¬ë³µ-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ" class="headerlink" title="ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ"></a>ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</h3><p>ë‹¤ì‹œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ìë©´, ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¡¬ë³µ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ ì„¤ì •ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li>ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± í™œì„±í™”(Enable annotation processing)</li>
<li>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</li>
</ul>
<h4 id="ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±-1"><a href="#ê·¸ë˜ë“¤-ì–´ë…¸í…Œì´ì…˜-í”„ë¡œì„¸ì„œ-êµ¬ì„±-1" class="headerlink" title="ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±"></a>ê·¸ë˜ë“¤ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ êµ¬ì„±</h4><p>ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì¸í…”ë¦¬ì œì´ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì‹± í™œì„±í™” ê¸°ëŠ¥ì„ í†µí•´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ë§Œ, ì  í‚¨ìŠ¤ì™€ ê°™ì€ ë¹Œë“œ í™˜ê²½ì—ì„œ ê·¸ë˜ë“¤ë¡œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ë¥¼ ìœ„í•œ êµ¬ì„±ì„ í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">configurations <span class="token punctuation">&#123;</span>
    compileOnly <span class="token punctuation">&#123;</span>
        extendsFrom annotationProcessor
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
dependencies <span class="token punctuation">&#123;</span>
    compileOnly <span class="token string">'org.projectlombok:lombok'</span>
    annotationProcessor <span class="token string">'org.projectlombok:lombok'</span>
    testCompileOnly <span class="token string">'org.projectlombok:lombok'</span>
    testAnnotationProcessor <span class="token string">'org.projectlombok:lombok'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ë¦¬ê³  ìœ„ êµ¬ì„±ì€ ê°„ë‹¨í•˜ê²Œ <strong>ê·¸ë˜ë“¤ ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸</strong> ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ”ë° ë¹Œë“œ ë„êµ¬ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œë„ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
   id <span class="token interpolation-string"><span class="token string">"io.freefair.lombok"</span></span> version <span class="token interpolation-string"><span class="token string">"6.3.0"</span></span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>IntelliJ</tag>
        <tag>Lombok</tag>
        <tag>Annotation Processor</tag>
      </tags>
  </entry>
  <entry>
    <title>ë¦¬ëˆ…ìŠ¤ì—ì„œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€í•˜ê¸°</title>
    <url>/maintaining-process-execution-in-linux/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì„œë²„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì–¸ì œë“ ì§€ <strong>ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©</strong>ìœ¼ë¡œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ì‹œì ìœ¼ë¡œ ì „ë ¥ì´ ì°¨ë‹¨ë˜ì–´ ì„œë²„ ì¥ë¹„ê°€ ë‹¤ì‹œ ì‹œì‘ë˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤ê°€ ì„œë²„ ìì›ì„ ë§ì´ ì‚¬ìš©í•´ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë‹¨ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ë˜ì„œ ì˜¤ëŠ˜ ì•Œì•„ë³¼ ë‚´ìš©ì€ ë¦¬ëˆ…ìŠ¤ì—ì„œ ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©ìœ¼ë¡œ ì¸í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë‹¨ë˜ì—ˆì„ ê²½ìš° ìë™ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚´ìœ¼ë¡œì¨ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ë°©ë²•ì…ë‹ˆë‹¤.</p>
<h2 id="í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ìœ ì§€"><a href="#í”„ë¡œì„¸ìŠ¤-ì‹¤í–‰-ìœ ì§€" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€"></a>í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìœ ì§€</h2><p>ë¨¼ì €, ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ê³  ê°€ì • í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> <span class="token parameter variable">-Xmx500m</span> demo.war <span class="token operator"><span class="token file-descriptor important">1</span>></span> app.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token comment"># [1] 227</span>

<span class="token function">ls</span> <span class="token parameter variable">-l</span>
<span class="token comment"># total 21M</span>
<span class="token comment"># -rw-r--r-- 1 ec2-user ec2-user 2.0K Oct  8 15:19 app.log</span>
<span class="token comment"># -rw-r--r-- 1 ec2-user ec2-user    3 Oct  8 15:19 app.pid</span>
<span class="token comment"># -rwxr-xr-x 1 ec2-user ec2-user  20M Oct  8 12:28 demo.war*</span>

<span class="token function">cat</span> app.pid
<span class="token comment"># 227</span></code></pre>

<p>ìœ„ ì˜ˆì‹œì—ì„œ nohup ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê³  ì¶œë ¥ëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ì™€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ApplicationPidWriterì— ì˜í•´ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” íŒŒì¼ì´ ë™ì¼í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="í”„ë¡œì„¸ìŠ¤-ì•„ì´ë””-í™•ì¸í•˜ê¸°"><a href="#í”„ë¡œì„¸ìŠ¤-ì•„ì´ë””-í™•ì¸í•˜ê¸°" class="headerlink" title="í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” í™•ì¸í•˜ê¸°"></a>í”„ë¡œì„¸ìŠ¤ ì•„ì´ë”” í™•ì¸í•˜ê¸°</h3><p>ì•ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ì ìœ¼ë¡œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆë‹¤ë©´ ì¢‹ê² ì§€ë§Œ ê·¸ë ‡ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ í™•ì¸í•˜ê³  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># echo $!</span>
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> <span class="token parameter variable">-Xmx500m</span> demo.war <span class="token operator"><span class="token file-descriptor important">1</span>></span> app.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$!</span> <span class="token operator">></span> app.pid

<span class="token comment"># JPS(JVM Process Status)</span>
jps <span class="token parameter variable">-v</span> <span class="token operator">|</span> <span class="token function">grep</span> war <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span>

<span class="token comment"># ps -ef</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">java</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $2&#125;'</span>

<span class="token comment"># netstat -tnlp</span>
<span class="token function">netstat</span> <span class="token parameter variable">-tnlp</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">java</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $7&#125;'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'/'</span> <span class="token string">'&#123;print $1&#125;'</span>

<span class="token comment"># pgrep</span>
pgrep <span class="token function">java</span></code></pre>

<p>ì²«ë²ˆì§¸ ë°©ì‹ì— ì‚¬ìš©ëœ <strong>echo $!</strong> ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ëœ ëª…ë ¹ì–´ì— ëŒ€í•œ PIDê°’ì„ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.</p>
<h3 id="Crontabìœ¼ë¡œ-í”„ë¡œì„¸ìŠ¤-ìœ ì§€í•˜ê¸°"><a href="#Crontabìœ¼ë¡œ-í”„ë¡œì„¸ìŠ¤-ìœ ì§€í•˜ê¸°" class="headerlink" title="Crontabìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ìœ ì§€í•˜ê¸°"></a>Crontabìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ìœ ì§€í•˜ê¸°</h3><p>ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê³ ì „ì ì¸ ë°©ì‹ì€ ì•ì„œ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì¶”ì¶œëœ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ì— ëŒ€í•œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ìƒíƒœë¥¼ ì²´í¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ Crontabì„ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

<span class="token assign-left variable">PID_FILE</span><span class="token operator">=</span><span class="token string">"app.pid"</span>

<span class="token function-name function">autorun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment"># ... &amp; echo $! > app.pid</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"<span class="token variable">$PID_FILE</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-z</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> <span class="token string">"<span class="token variable">$PID_FILE</span>"</span><span class="token variable">`</span></span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> $PID_FILE<span class="token variable">)</span></span>
  <span class="token keyword">if</span> <span class="token function">ps</span> <span class="token parameter variable">-p</span> <span class="token variable">$PID</span> <span class="token operator">></span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PID_FILE</span>(<span class="token variable">$PID</span>) is running"</span>
  <span class="token keyword">else</span>
    autorun
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  autorun
<span class="token keyword">fi</span></code></pre>

<h3 id="SystemD"><a href="#SystemD" class="headerlink" title="SystemD"></a>SystemD</h3><p>ë” íš¨ìœ¨ì ì¸ ë°©ì‹ì€ Nginxì™€ ê°™ì€ íŒ¨í‚¤ì§€ë¥¼ APT ë˜ëŠ” YUMìœ¼ë¡œ ì„¤ì¹˜í•  ë•Œ SystemD ì„œë¹„ìŠ¤ì— ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì²˜ëŸ¼  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ SystemD ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. </p>
<p><strong>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;demo.service</strong></p>
<pre class="language-text" data-language="text"><code class="language-text">[Unit]
Description=Demo
After=syslog.target

[Service]
User=ec2-user
WorkingDirectory=/home/ec2-user
ExecStart=/usr/bin/java -jar -Xmx500m demo.war
ExecStop=kill -9 `cat app.pid`
SuccessExitStatus=143
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target</code></pre>

<p>ìœ„ì™€ ê°™ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì •ì˜í–ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„ê°€ ì‹¤í–‰ë  ë•Œ ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ë„ë¡ í™œì„±í™”í•˜ê±°ë‚˜ ì§ì ‘ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> demo.service
<span class="token function">sudo</span> systemctl start demo.service</code></pre>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>XMLë¡œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ ê´€ë¦¬í•˜ê¸°</title>
    <url>/managing-i18n-messages-with-xml/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì€ <a href="/spring-validation">ë²¨ë¦¬ë°ì´ì…˜ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì‚¬ìš©ì ì–¸ì–´ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì´ìœ </a>ë¥¼ ì‘ì„±í•˜ë©´ì„œ ë³´ì™„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ë‹¤êµ­ì–´-ë©”ì‹œì§€"><a href="#ë‹¤êµ­ì–´-ë©”ì‹œì§€" class="headerlink" title="ë‹¤êµ­ì–´ ë©”ì‹œì§€"></a>ë‹¤êµ­ì–´ ë©”ì‹œì§€</h2><p>ìŠ¤í”„ë§ì´ë‚˜ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Propertiesë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, messages-en.properties ë˜ëŠ” messages-ko.propertiesì™€ ê°™ì´ ì–¸ì–´ë³„ë¡œ í”„ë¡œí¼í‹° íŒŒì¼ì„ êµ¬ë¶„í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ í”„ë¡œí¼í‹° íŒŒì¼ë¡œ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ë‹¤ë³´ë©´ í•´ë‹¹ ì–¸ì–´ì—ì„œ íŠ¹ì • ë©”ì‹œì§€ë¥¼ í‚¤ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ íŒŒì•…í•˜ëŠ”ê²Œ ìƒë‹¹íˆ ì–´ë µìŠµë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì²˜ëŸ¼ íšŒì‚¬ ë‚´ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ë©”ì‹œì§€ í‚¤ì— ëŒ€í•´ ì •ì˜ëœ ë¬¸ì„œê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” ê°œë°œìê°€ ë©”ì‹œì§€ ì½”ë“œë¥¼ ê´€ë¦¬í•´ì•¼í•˜ë¯€ë¡œ ë§¤ë²ˆ ê²€ìƒ‰í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ íŒŒì•…í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<h3 id="ëŒ€ì•ˆ-ë°©ì‹"><a href="#ëŒ€ì•ˆ-ë°©ì‹" class="headerlink" title="ëŒ€ì•ˆ ë°©ì‹"></a>ëŒ€ì•ˆ ë°©ì‹</h3><p>í”„ë¡œí¼í‹° íŒŒì¼ë¡œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ë³´ì™„í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ ë‹¤ì–‘í•©ë‹ˆë‹¤.</p>
<h4 id="YAML"><a href="#YAML" class="headerlink" title="YAML"></a>YAML</h4><p>ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ì„ ì•¼ë¯ˆ(Yaml) íŒŒì¼ë¡œ ëŒ€ì²´í•˜ëŠ” ê²ƒì²˜ëŸ¼ YAML íŒŒì¼ì„ ì‚¬ìš©í•´ì„œ ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì€ <a href="https://jmlim.github.io/spring/2018/11/28/spring-boot-Internationalization/">ê¸°ì–µí•˜ê¸° ìœ„í•œ ê°œë°œë…¸íŠ¸:ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ë‹¤êµ­ì–´ ê¸°ëŠ¥ ì‚¬ìš©í•˜ê¸°</a>ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ì€ íŒŒì¼ë§Œ ëŒ€ì²´í•  ë¿ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ YAML íŒŒì¼ì€ ì–¸ì–´ë³„ë¡œ ë§Œë“¤ì–´ì•¼í•¨ìœ¼ë¡œ í”„ë¡œí¼í‹°ì˜ ë¬¸ì œì ì„ ë™ì¼í•˜ê²Œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ISO-8859-1 ì¸ì½”ë”© í˜•ì‹ìœ¼ë¡œ ì €ì¥ë˜ëŠ” í”„ë¡œí¼í‹°ì™€ëŠ” ë‹¤ë¥´ê²Œ í•œê¸€ì´ ìœ ë‹ˆì½”ë“œë¡œ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì¥ì ì€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
</blockquote>
<h4 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h4><p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ XML íŒŒì¼ë¡œ êµ¬ì„±í•˜ì—¬ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ë‹¤êµ­ì–´ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ XML íŒŒì¼ì˜ ê°„ë‹¨í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>messages</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn.signIn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ko_KR</span><span class="token punctuation">></span></span><span class="token cdata">&lt;![CDATA[ë¡œê·¸ì¸]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ko_KR</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>en_US</span><span class="token punctuation">></span></span><span class="token cdata">&lt;![CDATA[Login]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>en_US</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>messages</span><span class="token punctuation">></span></span></code></pre>

<h3 id="ì»¤ìŠ¤í…€-ë¦¬ì†ŒìŠ¤-ë²ˆë“¤"><a href="#ì»¤ìŠ¤í…€-ë¦¬ì†ŒìŠ¤-ë²ˆë“¤" class="headerlink" title="ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤"></a>ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤</h3><p>í”„ë¡œí¼í‹° íŒŒì¼ ëŒ€ì‹ ì— XMLë¡œ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ë¶€í„° ë§Œë“¤ì–´ì•¼í•©ë‹ˆë‹¤. ResourceBundle í´ë˜ìŠ¤ì˜ getBundle í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ XML íŒŒì¼ì„ ì½ì–´ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ë¡œ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ë§Œë“œëŠ” êµ¬ì¡°ëŠ” <a href="https://firstboos.tistory.com/entry/XML-%EA%B8%B0%EB%B0%98%EC%9D%98-Resource-Bundle-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">XML ê¸°ë°˜ì˜ Resource Bundle, PropertyPlaceHolder ì‚¬ìš©í•˜ê¸°</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="XmlResourceBundle"><a href="#XmlResourceBundle" class="headerlink" title="XmlResourceBundle"></a>XmlResourceBundle</h4><p>ê·¸ëŸ¬ë‚˜ ì•ì„œ ì•Œì•„ë³¸ ë‹¤êµ­ì–´ ë©”ì‹œì§€ì— ëŒ€í•œ XML íŒŒì¼ì€ í”„ë¡œí¼í‹° êµ¬ì¡°ë¥¼ ë”°ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ <strong>Properties.loadFromXML</strong> í•¨ìˆ˜ë¥¼ í†µí•´ XMLì„ í”„ë¡œí¼í‹° ê¸°ì¤€ìœ¼ë¡œ ì½ìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤. ë‹¤ìŒì²˜ëŸ¼ XML êµ¬ì„±ì— ë”°ë¼ì„œ ë©”ì‹œì§€ ì •ë³´ë¥¼ ë§Œë“¤ì–´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>w3c<span class="token punctuation">.</span>dom<span class="token punctuation">.</span></span><span class="token class-name">Document</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>w3c<span class="token punctuation">.</span>dom<span class="token punctuation">.</span></span><span class="token class-name">Element</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>w3c<span class="token punctuation">.</span>dom<span class="token punctuation">.</span></span><span class="token class-name">Node</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>w3c<span class="token punctuation">.</span>dom<span class="token punctuation">.</span></span><span class="token class-name">NodeList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span></span><span class="token class-name">SAXException</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>parsers<span class="token punctuation">.</span></span><span class="token class-name">DocumentBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>parsers<span class="token punctuation">.</span></span><span class="token class-name">DocumentBuilderFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>parsers<span class="token punctuation">.</span></span><span class="token class-name">ParserConfigurationException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlResourceBundle</span> <span class="token keyword">extends</span> <span class="token class-name">ResourceBundle</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> messages<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Locale</span> i18n<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlResourceBundle</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> is<span class="token punctuation">,</span> <span class="token class-name">Locale</span> i18n<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ParserConfigurationException</span><span class="token punctuation">,</span> <span class="token class-name">SAXException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>is<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>i18n <span class="token operator">=</span> i18n<span class="token punctuation">;</span>
            messages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">DocumentBuilderFactory</span> factory <span class="token operator">=</span> <span class="token class-name">DocumentBuilderFactory</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">DocumentBuilder</span> builder <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newDocumentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Document</span> doc <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            doc<span class="token punctuation">.</span><span class="token function">getDocumentElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">NodeList</span> entries <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"entry"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> entries<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Element</span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Element</span><span class="token punctuation">)</span> entries<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> key <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">NodeList</span> childNodes <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getChildNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> childNodes<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Node</span> n <span class="token operator">=</span> childNodes<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">getNodeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Node</span><span class="token punctuation">.</span><span class="token constant">ELEMENT_NODE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">String</span> locale <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">getNodeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">String</span> message <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">getTextContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>messages<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            messages<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>locale<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span>

                        messages<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">handleGetObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> messages<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i18n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> handleKeys <span class="token operator">=</span> messages<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">enumeration</span><span class="token punctuation">(</span>handleKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i18n <span class="token operator">=</span> locale<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> messages<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> messages<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ê¸°ì¡´ì˜ handleGetObject í•¨ìˆ˜ëŠ” í‚¤ íŒŒë¼ë¯¸í„°ë§Œ ë°›ë„ë¡ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë©”ì‹œì§€ë¥¼ ê°€ì ¸ì˜¬ ê²½ìš°ì— ì–¸ì–´ë¥¼ ì§€ì •í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ì„ ìƒì„±í•˜ëŠ” ì‹œì ì— ì–¸ì–´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="XmlResourceBundleLoader"><a href="#XmlResourceBundleLoader" class="headerlink" title="XmlResourceBundleLoader"></a>XmlResourceBundleLoader</h4><p>XmlResourceBundleë¥¼ ë¡œë“œí•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ <a href="http://www.java2s.com/Tutorial/Java/0220__I18N/XMLresourcebundle.htm">The Strings.xml Resource Bundle</a>ì„ ì°¸ê³ í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span></span><span class="token class-name">SAXException</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>parsers<span class="token punctuation">.</span></span><span class="token class-name">ParserConfigurationException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URL</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URLConnection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ResourceBundle</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlResourceBundleLoader</span> <span class="token keyword">extends</span> <span class="token class-name">ResourceBundle<span class="token punctuation">.</span>Control</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> formats <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token string">"xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getFormats</span><span class="token punctuation">(</span><span class="token class-name">String</span> baseName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> formats<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ResourceBundle</span> <span class="token function">newBundle</span><span class="token punctuation">(</span><span class="token class-name">String</span> baseName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">,</span> <span class="token class-name">String</span> format<span class="token punctuation">,</span> <span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span> <span class="token keyword">boolean</span> reload<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ResourceBundle</span> resourceBundle <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> bundleName <span class="token operator">=</span> <span class="token function">toBundleName</span><span class="token punctuation">(</span>baseName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> resourceName <span class="token operator">=</span> <span class="token function">toResourceName</span><span class="token punctuation">(</span>bundleName<span class="token punctuation">,</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">URL</span> url <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>resourceName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>url <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token class-name">URLConnection</span> connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>reload<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            connection<span class="token punctuation">.</span><span class="token function">setUseCaches</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">InputStream</span> stream <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stream <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>locale <span class="token operator">==</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">ROOT</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            resourceBundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlResourceBundle</span><span class="token punctuation">(</span>bis<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SAXException</span> <span class="token operator">|</span> <span class="token class-name">ParserConfigurationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">return</span> resourceBundle<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="ë©”ì‹œì§€-ì†ŒìŠ¤"><a href="#ë©”ì‹œì§€-ì†ŒìŠ¤" class="headerlink" title="ë©”ì‹œì§€ ì†ŒìŠ¤"></a>ë©”ì‹œì§€ ì†ŒìŠ¤</h3><p>ì¤€ë¹„ëœ ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë©”ì‹œì§€ ì†ŒìŠ¤ë¡œ ë³€í™˜í•´ì•¼í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” <strong>AbstractMessageSource</strong>ë¥¼ ìƒì†í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>i18n</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">NoSuchMessageException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>i18n<span class="token punctuation">.</span></span><span class="token class-name">LocaleContextHolder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">AbstractMessageSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">MessageFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomMessageSource</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMessageSource</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">MessageFormat</span><span class="token punctuation">></span><span class="token punctuation">></span></span> formats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> messages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">CustomMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ResourceBundle</span> resourceBundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">ROOT</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">XmlResourceBundleLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">XmlResourceBundle</span> xmlResourceBundle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">XmlResourceBundle</span><span class="token punctuation">)</span> resourceBundle<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>messages <span class="token operator">=</span> xmlResourceBundle<span class="token punctuation">.</span><span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// ë©”ì‹œì§€ ì†ŒìŠ¤ì—ì„œ ì§€ì›í•˜ëŠ” ì–¸ì–´ ëª©ë¡</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>messages<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">MessageFormat</span> <span class="token function">resolveCode</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>formats<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// ì–¸ì–´ í¬ë§·ì´ ì—†ì„ ê²½ìš° ë©”ì‹œì§€ í¬ë§·ì„ ìƒˆë¡œ ìƒì„±</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formats<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                formats<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">MessageFormat</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> formats<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// ì–¸ì–´ í¬ë§·ì— ë©”ì‹œì§€ ì½”ë“œê°€ ì—†ìœ¼ë©´ ë©”ì‹œì§€ ì •ë³´ë¥¼ í†µí•´ í¬ë§·ì„ ì €ì¥</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>messages<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> msgs <span class="token operator">=</span> messages<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MessageFormat</span><span class="token punctuation">(</span>msgs<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMessageException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> code<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMessageException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> code<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">String</span> defaultMessage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> args<span class="token punctuation">,</span> defaultMessage<span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMessageException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> code<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMessageException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> code<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ë©”ì‹œì§€-ì†ŒìŠ¤-ê°±ì‹ "><a href="#ë©”ì‹œì§€-ì†ŒìŠ¤-ê°±ì‹ " class="headerlink" title="ë©”ì‹œì§€ ì†ŒìŠ¤ ê°±ì‹ "></a>ë©”ì‹œì§€ ì†ŒìŠ¤ ê°±ì‹ </h4><p>ë¡œì»¬ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ë™ì•ˆì—ëŠ” ë©”ì‹œì§€ ì†ŒìŠ¤ ì •ë³´ê°€ ê³„ì† ë³€ê²½ë˜ì–´ì•¼í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ <strong>spring-boot-devtool</strong>ì„ ì‚¬ìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ì‹œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ë©”ì‹œì§€ ì •ë³´ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ì— íŠ¹ë³„í•œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ë³€ê²½ëœ ë©”ì‹œì§€ ì •ë³´ë¥¼ ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ìš°ë¦¬ê°€ êµ¬í˜„í•´ì•¼í•  ë™ì‘ì€ ReloadableResourceBundleMessageSourceê°€ ë³€ê²½ëœ í”„ë¡œí¼í‹° íŒŒì¼ì„ ë‹¤ì‹œ ë¡œë“œí•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤.</p>
</blockquote>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomMessageSource</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMessageSource</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">CustomMessageSource</span><span class="token punctuation">(</span><span class="token class-name">Environment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token function">getActiveProfiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"production"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"messages.xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">long</span> lastModified <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastModified <span class="token operator">&lt;</span> file<span class="token punctuation">.</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Reload MessageSource - &#123;&#125;"</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            lastModified <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>

            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìœ„ ì²˜ëŸ¼ íŒŒì¼ ìˆ˜ì •ì¼ì„ ë¹„êµí•˜ì§€ ì•Šì•„ë„ <a href="https://www.baeldung.com/java-nio2-watchservice">ìë°” 7ì˜ WatchServiceë¥¼ í™œìš©</a>í•´ë„ íŒŒì¼ì„ ê°ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.oracle.com/javase/tutorial/i18n/serviceproviders/resourcebundlecontrolprovider.html">Installing a Custom Resource Bundle as an Extension</a></li>
<li><a href="http://www.java2s.com/Tutorial/Java/0220__I18N/XMLresourcebundle.htm">XML resource bundle</a></li>
<li><a href="https://firstboos.tistory.com/entry/XML-%EA%B8%B0%EB%B0%98%EC%9D%98-Resource-Bundle-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">XML ê¸°ë°˜ì˜ Resource Bundle, PropertyPlaceHolder ì‚¬ìš©í•˜ê¸°</a></li>
<li><a href="http://www.fun25.co.kr/blog/java-xml-parser-example-documentbuilder">[ìë°”] XML íŒŒì‹± ì˜ˆì œ - DocumentBuilder</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Mapstruct (Feat. Gradle)</title>
    <url>/mapstruct/</url>
    <content><![CDATA[<p>ìë°” ì§„ì˜ì—ì„œ ì˜¤ë¸Œì íŠ¸ ê°„ ë³€í™˜ì„ ìœ„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¤ë¸Œì íŠ¸ ë§¤í•‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ModelMapperì™€ MapStructê°€ ìˆë‹¤. í˜„ì¬ ì‹œìŠ¤í…œì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ModelMapperë¡œë„ ì¶©ë¶„í–ˆê¸° ë•Œë¬¸ì— MapStructë¥¼ êµ³ì´ ë„ì…í•˜ì—¬ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì•˜ë‹¤. ì˜¤ë¸Œì íŠ¸ ë³€í™˜ì´ ë°˜ë³µì ìœ¼ë¡œ ë§ì´ ì´ë£¨ì–´ì§€ëŠ” ì¼€ì´ìŠ¤ê°€ ìˆì„ë•Œ ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ ì¸í•œ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ì„œ ì§ì ‘ì ìœ¼ë¡œ ì˜¤ë¸Œì íŠ¸ ë³€í™˜ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ë¹Œë“œ ê³¼ì •ì—ì„œ ë§¤í¼ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¥¼ ë§Œë“œëŠ” <a href="https://mapstruct.org/">Mapstruct</a>ê°€ ìš”êµ¬ë˜ê¸° ë•Œë¬¸ì— ë„ì…í•˜ê²Œ ëœë‹¤. í˜„ì¬ ì‹œìŠ¤í…œì—ì„œ íŠ¹ì • ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì—ì„œ ê½¤ë‚˜ ë§ì€ ë³€í™˜ì´ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ë°œìƒí–ˆê¸° ë•Œë¬¸ì— (ì˜ˆë¥¼ ë“¤ì–´ ì•½ 2~300ëª…ì˜ ê°œë³„ í†µê³„ ë°ì´í„°ë¥¼ í•œë²ˆì— ì¡°íšŒ) ë„ì…ì„ ê³ ë ¤í•˜ê²Œ ë˜ì—ˆë‹¤.</p>
<h4 id="Mapstructì—-ëŒ€í•´-ì•Œì•„ë³´ê¸°"><a href="#Mapstructì—-ëŒ€í•´-ì•Œì•„ë³´ê¸°" class="headerlink" title="Mapstructì— ëŒ€í•´ ì•Œì•„ë³´ê¸°"></a>Mapstructì— ëŒ€í•´ ì•Œì•„ë³´ê¸°</h4><ul>
<li><a href="https://meetup.nhncloud.com/posts/213">Object Mapping ì–´ë””ê¹Œì§€ í•´ë´¤ë‹ˆ?</a></li>
<li><a href="https://medium.com/naver-cloud-platform/%EA%B8%B0%EC%88%A0-%EC%BB%A8%ED%85%90%EC%B8%A0-%EB%AC%B8%EC%9E%90-%EC%95%8C%EB%A6%BC-%EB%B0%9C%EC%86%A1-%EC%84%9C%EB%B9%84%EC%8A%A4-sens%EC%9D%98-mapstruct-%EC%A0%81%EC%9A%A9%EA%B8%B0-8fd2bc2bc33b">í¸ë¦¬í•œ ê°ì²´ ê°„ ë§¤í•‘ì„ ìœ„í•œ MapStruct ì ìš©ê¸° (feat. SENS)</a></li>
<li><a href="https://www.baeldung.com/java-performance-mapping-frameworks">Performance of Java Mapping Frameworks</a></li>
</ul>
<blockquote>
<p>â€» MapStructì— ëŒ€í•œ ì˜ˆì œëŠ” <a href="https://github.com/mapstruct/mapstruct-examples">github.com&#x2F;mapstruct&#x2F;mapsturct-examples</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<h4 id="ê°œë³„-ë””íœë˜ì‹œ-ì¶”ê°€"><a href="#ê°œë³„-ë””íœë˜ì‹œ-ì¶”ê°€" class="headerlink" title="ê°œë³„ ë””íœë˜ì‹œ ì¶”ê°€"></a>ê°œë³„ ë””íœë˜ì‹œ ì¶”ê°€</h4><p>Mapstructë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸€ì—ì„œ ì‚´í´ë³´ë©´ ë””íœë˜ì‹œ ìˆœì„œë¥¼ ì¤‘ìš”í•˜ê²Œ ì •ì˜í•´ì•¼í•œë‹¤ê³  ë˜ì–´ìˆì§€ë§Œ ìƒê´€ì—†ì–´ì§„ì§€ ì˜¤ë˜ë˜ì—ˆë‹¤. ì•„ë¬´íŠ¼ Lombok ê·¸ë˜ë“¤ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ê³  ìˆì„ ê²½ìš°ì—ë„ <code>lombok-mapstruct-binding</code>ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì—´í•˜ë©´ ëœë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'io.freefair.lombok'</span> version <span class="token string">'8.0.1'</span>
<span class="token punctuation">&#125;</span>

ext <span class="token punctuation">&#123;</span>
    mapstructVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"1.5.5.Final"</span></span>
    lombokVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"1.18.26"</span></span>
    lombokMapstructBindingVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"0.2.0"</span></span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token interpolation-string"><span class="token string">"org.mapstruct:mapstruct:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">mapstructVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>
    annotationProcessor <span class="token interpolation-string"><span class="token string">"org.mapstruct:mapstruct-processor:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">mapstructVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">"org.projectlombok:lombok-mapstruct-binding:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">lombokMapstructBindingVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Gradle-í”ŒëŸ¬ê·¸ì¸ì„-ì´ìš©í•˜ëŠ”-ë°©ë²•-Recommanded"><a href="#Gradle-í”ŒëŸ¬ê·¸ì¸ì„-ì´ìš©í•˜ëŠ”-ë°©ë²•-Recommanded" class="headerlink" title="Gradle í”ŒëŸ¬ê·¸ì¸ì„ ì´ìš©í•˜ëŠ” ë°©ë²• (Recommanded)"></a>Gradle í”ŒëŸ¬ê·¸ì¸ì„ ì´ìš©í•˜ëŠ” ë°©ë²• (Recommanded)</h4><p><a href="https://plugins.gradle.org/plugin/io.freefair.lombok">io.freefair.lombok</a> ê·¸ë˜ë“¤ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²½ìš°ë¼ë©´ ìœ„ì˜ ê°œë³„ì ìœ¼ë¡œ ë””íœë˜ì‹œë¥¼ ë‚˜ì—´í•˜ê¸°ë³´ë‹¤ëŠ” <a href="https://github.com/AkaZver/mapstruct-plugin">Gradle Mapstruct Plugin</a>ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” ê°„ë‹¨í•˜ê¸° ë•Œë¬¸ì— ë¡¬ë³µê³¼ ë™ì¼í•˜ê²Œ ê·¸ë˜ë“¤ í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ì„ ì¶”ì²œí•œë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'io.freefair.lombok'</span> version <span class="token string">'8.0.1'</span>
    id <span class="token string">'com.github.akazver.mapstruct'</span> version <span class="token string">'1.0.5'</span>
<span class="token punctuation">&#125;</span></code></pre>
<blockquote>
<p>Plugin will add mapstruct with mapstruct-processor by default<br>If you are using lombok it will add lombok-mapstruct-binding, if spring - mapstruct-spring-extensions</p>
</blockquote>
<h4 id="ê¹ƒì—ì„œ-src-main-generated-ë””ë ‰í† ë¦¬-ë¬´ì‹œí•˜ê¸°-Intellij-IDEA"><a href="#ê¹ƒì—ì„œ-src-main-generated-ë””ë ‰í† ë¦¬-ë¬´ì‹œí•˜ê¸°-Intellij-IDEA" class="headerlink" title="ê¹ƒì—ì„œ src/main/generated ë””ë ‰í† ë¦¬ ë¬´ì‹œí•˜ê¸° (Intellij IDEA)"></a>ê¹ƒì—ì„œ <code>src/main/generated</code> ë””ë ‰í† ë¦¬ ë¬´ì‹œí•˜ê¸° (Intellij IDEA)</h4><p>ê¸°ë³¸ì ìœ¼ë¡œ ê·¸ë˜ë“¤ ë¹Œë“œ ê³¼ì •ì—ì„œ <code>build/generated/sources/annotationProcessor</code> ê²½ë¡œì— ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ê°€ ë§Œë“¤ì–´ì§€ê³  <code>build/classes</code> ê²½ë¡œë¡œ ë³µì‚¬ëœë‹¤. í•˜ì§€ë§Œ, ì¸í…”ë¦¬ì œì´ì—ì„œ Gradleì´ ì•„ë‹Œ <code>Intellij IDEA</code>ë¡œ ì„ íƒí•˜ì—¬ êµ¬ë™ë˜ë„ë¡ ë³€ê²½í•˜ëŠ” ê²½ìš°ì—ëŠ” <code>src/main/generated</code> ê²½ë¡œì— ë§Œë“¤ì–´ì§€ê²Œ ë˜ë¯€ë¡œ <code>.gitignore</code> íŒŒì¼ì— ë¹Œë“œ ê³¼ì •ì—ì„œ MapStructì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¥¼ ì œì™¸í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.</p>
<pre class="language-ignore" data-language="ignore"><div class="caption"><span>.gitignore</span></div><code class="language-ignore"><span class="token entry string">src<span class="token punctuation">/</span>main<span class="token punctuation">/</span>generated<span class="token punctuation">/</span></span></code></pre>

]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ë¹Œë“œ ì •ë³´</title>
    <url>/spring-boot-build-info/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì— ëŒ€í•œ ê´€ë ¨ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/spring-demo">https://github.com/kdevkr/spring-demo</a> ì—ì„œ ì°¸ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ ë¹Œë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” ê·¸ë˜ë“¤ì´ë‚˜ ë©”ì´ë¸ í”ŒëŸ¬ê·¸ì¸ì— ë”°ë¼ ì•„ë˜ì™€ ê°™ì´ buildInfo()ê°€ ë™ì‘í•˜ë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤. ì´ë ‡ê²Œ êµ¬ì„±í•˜ë©´ ë¹Œë“œ ë‹¨ê³„ì—ì„œ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— META-INF&#x2F;build.propertiesë¼ëŠ” íŒŒì¼ì— ë¹Œë“œ ì •ë³´ê°€ í¬í•¨ëœë‹¤.</p>
<pre class="language-gradle" data-language="gradle"><div class="caption"><span>build.gradle</span></div><code class="language-gradle">springBoot <span class="token punctuation">&#123;</span>
    <span class="token function">buildInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¶”ê°€ëœ build-info.propertiesì˜ ë‚´ìš©ì€ ProjectInfoAutoConfiguration í´ë˜ìŠ¤ì— ì˜í•´ì„œ BuildProperties í´ë˜ìŠ¤ê°€ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ì´ BuildPropertiesë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹Œë“œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” APIë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>BuildController.java</span></div><code class="language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuildController</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">BuildProperties</span> buildProperties<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BuildController</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BuildProperties</span> buildProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>buildProperties <span class="token operator">=</span> buildProperties<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"build-info"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">BuildProperties</span> <span class="token function">buildInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> buildProperties<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>í•˜ì§€ë§Œ, ê·¸ë˜ë“¤ ëª…ë ¹ì–´ì— ì˜í•´ ë¹Œë“œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì´ ì•„ë‹ˆë¼ ì¸í…”ë¦¬ì œì´ì™€ ê°™ì€ IDEë¡œ êµ¬ë™í•˜ëŠ” ê²½ìš°ë¼ë©´ BuildPropertiesê°€ ë“±ë¡ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ìˆëŠ” ë¹Œë“œ ì •ë³´ë¥¼ ë¨¼ì € ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ @AutoConfigurationì„ í†µí•´ ìë™ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ProjectInfoAutoConfigurationê°€ ë™ì‘í•œ ì´í›„ì— ìˆ˜í–‰í•˜ë„ë¡ í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>BuildConfiguration.java</span></div><code class="language-java"><span class="token comment">//@Import(ProjectInfoAutoConfiguration.class)</span>
<span class="token annotation punctuation">@AutoConfiguration</span><span class="token punctuation">(</span>after <span class="token operator">=</span> <span class="token class-name">ProjectInfoAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuildConfiguration</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">BuildProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">BuildProperties</span> <span class="token function">buildProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"time"</span><span class="token punctuation">,</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token constant">ISO_INSTANT</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">Instant</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"artifact"</span><span class="token punctuation">,</span> <span class="token string">"demo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"group"</span><span class="token punctuation">,</span> <span class="token string">"kr.kdev"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"demo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"version"</span><span class="token punctuation">,</span> <span class="token string">"local"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BuildProperties</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìœ„ ì½”ë“œì—ì„œ @AutoConfigurationëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ 2.7 ì—ì„œ ì¶”ê°€ëœ ì–´ë…¸í…Œì´ì…˜ì´ë¯€ë¡œ ì´ì „ ë²„ì „ì´ë¼ë©´ @Importë¥¼ í†µí•´ ìˆ˜ë™ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ í•´ì•¼í•œë‹¤.</p>
</blockquote>
<p>ê·¸ëŸ¬ë©´ ì´ì œ ê°œë°œ í™˜ê²½ì—ì„œëŠ” ProjectInfoAutoConfigurationì— ì˜í•´ BuildPropertiesê°€ ë“±ë¡ë˜ì§€ ì•Šë”ë¼ë„ ì½”ë“œë¡œ ì •ì˜ëœ BuildPropertiesê°€ ë“±ë¡ë˜ì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ë¹Œë“œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë¹Œë“œ ì •ë³´ APIê°€ ë“±ë¡ë˜ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ë¹Œë“œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><div class="caption"><span>Windows Terminal</span></div><code class="language-powershell"><span class="token comment"># java -jar '-Dspring.profiles.active=prod' .\demo-1.0.0.jar</span>
<span class="token comment"># /build-info</span>
<span class="token punctuation">&#123;</span><span class="token string">"name"</span>:<span class="token string">"demo"</span><span class="token punctuation">,</span><span class="token string">"version"</span>:<span class="token string">"local"</span><span class="token punctuation">,</span><span class="token string">"time"</span>:<span class="token string">"2023-03-22T13:13:58.186Z"</span><span class="token punctuation">,</span><span class="token string">"artifact"</span>:<span class="token string">"demo"</span><span class="token punctuation">,</span><span class="token string">"group"</span>:<span class="token string">"kr.kdev"</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜¤ë¥˜ í˜ì´ì§€</title>
    <url>/spring-boot-error-page/</url>
    <content><![CDATA[<p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ì¸ ì˜¤ë¥˜ ì‘ë‹µì— ëŒ€í•œ ì²˜ë¦¬ì™€ í™”ì´íŠ¸ë¼ë²¨ ì˜¤ë¥˜ í˜ì´ì§€ì— ëŒ€í•œ ìë™ êµ¬ì„±ì„ ì œê³µí•œë‹¤. ì˜¤ë¥˜ ì²˜ë¦¬ì— ëŒ€í•œ ìë™ êµ¬ì„±ì€ ErrorMvcAutoConfigurationë¥¼ í†µí•´ ì œê³µí•˜ë©° BasicErrorController ì™€ DefaultErrorViewResolverê°€ ë“±ë¡ëœë‹¤. </p>
<h4 id="Whitelabel-Error-Page"><a href="#Whitelabel-Error-Page" class="headerlink" title="Whitelabel Error Page"></a>Whitelabel Error Page</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ í™”ì´íŠ¸ë¼ë²¨ ì˜¤ë¥˜ í˜ì´ì§€ëŠ” ErrorMvcAutoConfigurationì˜ StaticViewë¡œ HTML íŒŒì¼ì´ ì•„ë‹Œ ìë°” ì½”ë“œë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤. ì´ê²ƒì€ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹°ë¡œ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆëŠ”ë° ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë‚´ì¥ ì›¹ ì»¨í…Œì´ë„ˆì¸ í†°ìº£ì˜ ê²½ìš° í™”ì´íŠ¸ë¼ë²¨ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í†°ìº£ì˜ ì˜¤ë¥˜ í˜ì´ì§€ê°€ ì‘ë‹µë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<blockquote>
<p>í†°ìº£ì´ ì•„ë‹Œ ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì–¸ë”í† ìš°ê°€ ìì²´ì ì¸ ì˜¤ë¥˜ ì‘ë‹µ í˜ì´ì§€ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.  </p>
</blockquote>
<h4 id="Error-Templates"><a href="#Error-Templates" class="headerlink" title="Error Templates"></a>Error Templates</h4><p>í™”ì´íŠ¸ë¼ë²¨ ì˜¤ë¥˜ í˜ì´ì§€ì˜ ë¹„í™œì„±í™” ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ <code>error</code>ë¼ëŠ” ë·°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ í…œí”Œë¦¿ íŒŒì¼ì„ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¶”ê°€í•˜ëŠ” ê²½ìš°ì—ëŠ” FreeMarkerViewResolver ë˜ëŠ” ThymeleafViewResolver ì— ì˜í•´ ì²˜ë¦¬ëœë‹¤. ErrorTemplateê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° í™”ì´íŠ¸ë¼ë²¨ ì˜¤ë¥˜ í˜ì´ì§€ì— ëŒ€í•œ ë¹ˆ ë“±ë¡ì€ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™”ëœë‹¤.</p>
<blockquote>
<p>FreeMarkerViewResolverì™€ ThymeleafViewResolverê°€ ë™ì‹œì— ì¡´ì¬í•˜ëŠ” ê²½ìš° í”„ë¦¬ë§ˆì»¤ì™€ íƒ€ì„ë¦¬í”„ì— ëŒ€í•œ ìë™ êµ¬ì„± í´ë˜ìŠ¤ì˜ êµ¬í˜„ ìƒ Orderê°’ì— ì˜í•´ FreeMarkerViewResolverì˜ ì²˜ë¦¬ ìˆœì„œê°€ ë” ë†’ë‹¤.</p>
</blockquote>
<pre class="language-ftl" data-language="ftl"><div class="caption"><span>error.ftlh</span></div><code class="language-ftl"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl"><span class="token punctuation">.</span>lang</span><span class="token punctuation">&#125;</span></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Oops!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Error: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">error</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Path: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">path</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Status: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">status</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Timestamp: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">timestamp<span class="token operator">?</span><span class="token builtin-function function">datetime</span><span class="token operator">?</span><span class="token builtin-function function">iso_utc</span></span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Go to main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<h4 id="Error-Templates-based-HTTP-Status-Code"><a href="#Error-Templates-based-HTTP-Status-Code" class="headerlink" title="Error Templates based HTTP Status Code"></a>Error Templates based HTTP Status Code</h4><p>ì—ëŸ¬ í˜ì´ì§€ë¥¼ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆê³  DefaultErrorViewResolverëŠ” error ë””ë ‰í† ë¦¬ í•˜ìœ„ì— HTTP Status Code ê°’ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í…œí”Œë¦¿ íŒŒì¼ì„ êµ¬ì„±í•˜ëŠ” ê²½ìš°ì— ë” ìƒì„¸í•˜ê²Œ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ê³µí†µ ì˜¤ë¥˜ í˜ì´ì§€ ë‚´ì—ì„œ í…œí”Œë¦¿ ë¬¸ë²•ì„ ì‚¬ìš©í•´ë„ ë¬´ë°©í•˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ì²˜ë¦¬í•˜ê²Œ í•˜ëŠ” ê²ƒë„ ë‚˜ì˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.</p>
<pre class="language-ftl" data-language="ftl"><div class="caption"><span>error/404.ftlh</span></div><code class="language-ftl"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl"><span class="token punctuation">.</span>lang</span><span class="token punctuation">&#125;</span></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>404 - Not Found<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Oops! Not Found<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Error: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">error</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Path: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">path</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Status: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">status</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>Timestamp: <span class="token ftl language-ftl"><span class="token ftl-interpolation"><span class="token punctuation">$&#123;</span><span class="token content ftl">timestamp<span class="token operator">?</span><span class="token builtin-function function">datetime</span><span class="token operator">?</span><span class="token builtin-function function">iso_utc</span></span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Go to main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

]]></content>
      <tags>
        <tag>ThymeleafViewResolver</tag>
        <tag>FreeMarkerViewResolver</tag>
        <tag>DefaultErrorViewResolver</tag>
        <tag>BasicErrorController</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ MQTT í´ë¼ì´ì–¸íŠ¸ ë©”ì‹œì§€ ì±„ë„ êµ¬ì„±í•˜ê¸°</title>
    <url>/spring-boot-integration-mqtt/</url>
    <content><![CDATA[<p>ì œì£¼ ì „ê¸°ì°¨ ì‹¤ì¦ ì‹œìŠ¤í…œì„ ê°œë°œí•˜ë©´ì„œ ì „ê¸°ì°¨ OBD ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•˜ì—¬ MQTT(Message Queuing Telemetry Transfer) í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬ì„±í•˜ê³  í† í”½ì— ëŒ€í•œ ë©”ì‹œì§€ í˜ì´ë¡œë“œë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê²ƒì„ ì²˜ìŒ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ë³¸ ê¸€ì—ì„œëŠ” ìŠ¤í”„ë§ MQTTë¥¼ í†µí•´ MQTT í´ë¼ì´ì–¸íŠ¸ì™€ ë©”ì‹œì§€ êµ¬ë… ë˜ëŠ” ë°œí–‰í•˜ëŠ” ì±„ë„ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<h2 id="ì˜ì¡´ì„±"><a href="#ì˜ì¡´ì„±" class="headerlink" title="ì˜ì¡´ì„±"></a>ì˜ì¡´ì„±</h2><pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token string">'org.springframework.boot:spring-boot-starter-integration'</span>
implementation <span class="token string">'org.springframework.integration:spring-integration-mqtt'</span></code></pre>

<p>ìŠ¤í”„ë§ MQTTëŠ” <a href="https://www.eclipse.org/paho/">Eclipse Paho MQTT Client</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>integration<span class="token punctuation">:</span>spring<span class="token operator">-</span>integration<span class="token operator">-</span>mqtt<span class="token punctuation">:</span><span class="token number">5.3</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>RELEASE
  org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>paho<span class="token punctuation">:</span>org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>paho<span class="token punctuation">.</span>client<span class="token punctuation">.</span>mqttv3<span class="token punctuation">:</span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token number">4</span></code></pre>

<h2 id="Inbound-Channel-Configuration"><a href="#Inbound-Channel-Configuration" class="headerlink" title="Inbound Channel Configuration"></a>Inbound Channel Configuration</h2><p>í† í”½ ë©”ì‹œì§€ êµ¬ë…ì„ ìœ„í•œ ì¸ë°”ìš´ë“œ ì±„ë„ êµ¬ì„±ì€ <code>MqttPahoMessageDrivenChannelAdapter</code> êµ¬í˜„ì²´ë¥¼ í†µí•´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<h3 id="DefaultMqttPahoClientFactory"><a href="#DefaultMqttPahoClientFactory" class="headerlink" title="DefaultMqttPahoClientFactory"></a>DefaultMqttPahoClientFactory</h3><p>ê¸°ë³¸ì ìœ¼ë¡œ <code>DefaultMqttPahoClientFactory</code>ë¥¼ í†µí•´ MQTT í´ë¼ì´ì–¸íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìš°ë¦¬ëŠ” MQTT ì—°ê²° ì •ë³´(MqttConnectOptions)ì„ ì„¤ì •í•œ DefaultMqttPahoClientFactoryë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqttConfig</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">MQTT_USERNAME</span> <span class="token operator">=</span> <span class="token string">"username"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">MQTT_PASSWORD</span> <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MqttConnectOptions</span> <span class="token function">connectOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">MqttConnectOptions</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MqttConnectOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">setCleanSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token constant">MQTT_USERNAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token constant">MQTT_PASSWORD</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> options<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DefaultMqttPahoClientFactory</span> <span class="token function">defaultMqttPahoClientFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DefaultMqttPahoClientFactory</span> clientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMqttPahoClientFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clientFactory<span class="token punctuation">.</span><span class="token function">setConnectionOptions</span><span class="token punctuation">(</span><span class="token function">connectOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> clientFactory<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="MqttPahoMessageDrivenChannelAdapter"><a href="#MqttPahoMessageDrivenChannelAdapter" class="headerlink" title="MqttPahoMessageDrivenChannelAdapter"></a>MqttPahoMessageDrivenChannelAdapter</h3><p>ì•ì„œ ë“±ë¡í•˜ì˜€ë˜ MQTT í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ê¸° ìœ„í•˜ì—¬ <code>MqttPahoMessageDrivenChannelAdapter</code>ë¥¼ í†µí•´ ë©”ì‹œì§€ ìˆ˜ì‹ ì„ ìœ„í•œ ì±„ë„ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqttConfig</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">BROKER_URL</span> <span class="token operator">=</span> <span class="token string">"tcp://localhost:1883"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">MQTT_CLIENT_ID</span> <span class="token operator">=</span> <span class="token class-name">MqttAsyncClient</span><span class="token punctuation">.</span><span class="token function">generateClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">TOPIC_FILTER</span> <span class="token operator">=</span> <span class="token string">"[PROTECT]"</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageChannel</span> <span class="token function">mqttInputChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageProducer</span> <span class="token function">inboundChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">MqttPahoMessageDrivenChannelAdapter</span> adapter <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">MqttPahoMessageDrivenChannelAdapter</span><span class="token punctuation">(</span><span class="token constant">BROKER_URL</span><span class="token punctuation">,</span> <span class="token constant">MQTT_CLIENT_ID</span><span class="token punctuation">,</span> <span class="token constant">TOPIC_FILTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter<span class="token punctuation">.</span><span class="token function">setCompletionTimeout</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter<span class="token punctuation">.</span><span class="token function">setConverter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultPahoMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter<span class="token punctuation">.</span><span class="token function">setQos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter<span class="token punctuation">.</span><span class="token function">setOutputChannel</span><span class="token punctuation">(</span><span class="token function">mqttInputChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> adapter<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ServiceActivator</span><span class="token punctuation">(</span>inputChannel <span class="token operator">=</span> <span class="token string">"mqttInputChannel"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageHandler</span> <span class="token function">inboundMessageHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> message <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> topic <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> message<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">MqttHeaders</span><span class="token punctuation">.</span><span class="token constant">RECEIVED_TOPIC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Topic:"</span> <span class="token operator">+</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Payload"</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>ì´ì œ MQTT í´ë¼ì´ì–¸íŠ¸ì— ì˜í•´ ìˆ˜ì‹ ëœ í˜ì´ë¡œë“œëŠ” MQTT í´ë¼ì´ì–¸íŠ¸ â¤ Inbound Channel â¤ MessageChannel â¤ MessageHandler ìˆœìœ¼ë¡œ ì´ë™ë˜ì–´ MessageHandlerë¥¼ í†µí•´ ìˆ˜ì‹ ëœ í˜ì´ë¡œë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="Outbound-Channel-Configuration"><a href="#Outbound-Channel-Configuration" class="headerlink" title="Outbound Channel Configuration"></a>Outbound Channel Configuration</h2><p>ì œì£¼ ì „ê¸°ì°¨ ì‹¤ì¦ ì‹œìŠ¤í…œì—ì„œëŠ” MQTT í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” ê²ƒì€ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì±„ë„ì„ ë“±ë¡í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ê¸° ìœ„í•œ ì±„ë„ì„ êµ¬ì„±í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h3 id="MqttPahoMessageHandler"><a href="#MqttPahoMessageHandler" class="headerlink" title="MqttPahoMessageHandler"></a>MqttPahoMessageHandler</h3><p>MQTT í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ë¯¸ êµ¬ì„±ë˜ì—ˆìœ¼ë¯€ë¡œ <code>MqttPahoMessageHandler</code>ìœ¼ë¡œ ë©”ì‹œì§€ ë°œí–‰ì„ ìœ„í•œ ì±„ë„ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqttConfig</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">MQTT_CLIENT_ID</span> <span class="token operator">=</span> <span class="token class-name">MqttAsyncClient</span><span class="token punctuation">.</span><span class="token function">generateClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageChannel</span> <span class="token function">mqttOutboundChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ServiceActivator</span><span class="token punctuation">(</span>inputChannel <span class="token operator">=</span> <span class="token string">"mqttOutboundChannel"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">MessageHandler</span> <span class="token function">mqttOutbound</span><span class="token punctuation">(</span><span class="token class-name">DefaultMqttPahoClientFactory</span> clientFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">MqttPahoMessageHandler</span> messageHandler <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">MqttPahoMessageHandler</span><span class="token punctuation">(</span><span class="token constant">MQTT_CLIENT_ID</span><span class="token punctuation">,</span> clientFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageHandler<span class="token punctuation">.</span><span class="token function">setAsync</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageHandler<span class="token punctuation">.</span><span class="token function">setDefaultQos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> messageHandler<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì´ì œ @MessagingGateway ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•œ ë©”ì‹œì§€ ê²Œì´íŠ¸ì›¨ì´ APIë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ë°œì†¡í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqttConfig</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@MessagingGateway</span><span class="token punctuation">(</span>defaultRequestChannel <span class="token operator">=</span> <span class="token string">"mqttOutboundChannel"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OutboundGateway</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">void</span> <span class="token function">sendToMqtt</span><span class="token punctuation">(</span><span class="token class-name">String</span> payload<span class="token punctuation">,</span> <span class="token annotation punctuation">@Header</span><span class="token punctuation">(</span><span class="token class-name">MqttHeaders</span><span class="token punctuation">.</span><span class="token constant">TOPIC</span><span class="token punctuation">)</span> <span class="token class-name">String</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="MQTT-Events"><a href="#MQTT-Events" class="headerlink" title="MQTT Events"></a>MQTT Events</h2><p>ë§Œì•½, MQTT í´ë¼ì´ì–¸íŠ¸ê°€ ë¸Œë¡œì»¤ ì„œë²„ì— ì—°ê²°ì„ ì‹¤íŒ¨í•˜ê±°ë‚˜ í† í”½ êµ¬ë…ì„ ê°ì§€í•œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p><a href="https://docs.spring.io/spring-integration/reference/html/mqtt.html#mqtt-events">https://docs.spring.io/spring-integration/reference/html/mqtt.html#mqtt-events</a></p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.spring.io/spring-integration/reference/html/mqtt.html">Spring Integration - MQTT Support</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Vueì™€ í•¨ê»˜ ê°œë°œí•˜ê¸°</title>
    <url>/spring-boot-integration-vuejs/</url>
    <content><![CDATA[<blockquote>
<p>ê´€ë ¨ ì†ŒìŠ¤ì½”ë“œëŠ” Github <a href="https://github.com/kdevkr/spring-boot-integration-vuejs">spring-boot-integration-vuejs</a> ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p>
</blockquote>
<p>ìµœê·¼ì—ëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì‹œ í”„ë¡ íŠ¸ì—”ë“œ í´ë¼ì´ì–¸íŠ¸ë¥¼ Vueë¥¼ í™œìš©í•˜ì—¬ ê°œë°œí•˜ê³  ë°°í¬í•©ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê³  Vue CLIë¥¼ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°œë°œí•  ë•Œ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤. ì œê°€ ì•Œë ¤ë“œë¦¬ëŠ” ë°©ë²•ê³¼ êµ¬ì¡°ëŠ” ì •í™•í•œ ì •ë‹µì€ ì•„ë‹˜ì„ ë¯¸ë¦¬ ë°íˆëŠ” ë°” ì…ë‹ˆë‹¤.</p>
<h2 id="Spring-Initializr"><a href="#Spring-Initializr" class="headerlink" title="Spring Initializr"></a>Spring Initializr</h2><p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ëŠ” <a href="https://start.spring.io/">Spring Initializr</a>ì—ì„œ ì‰½ê²Œ ì—¬ëŸ¬ë¶„ì´ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ì €ëŠ” ë©”ì´ë¸(Maven)ì´ ì•„ë‹Œ <code>ê·¸ë˜ë“¤(Gradle)</code> í”„ë¡œì íŠ¸ë¥¼ ì„ í˜¸í•˜ë©° ì–¸ì–´ëŠ” <code>Java</code>ë¡œ ê°œë°œí•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/spring-initializr.png"></p>
<p>ê·¸ë¦¬ê³  ìœ„ì™€ ê°™ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ì˜ì¡´ì„±(Dependencies)ë¥¼ ì°¾ì•„ ì„ íƒí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§€ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-none"><code class="language-none">src
 â”œâ”€ main
 â”‚ â”œâ”€ java
 â”‚ â””â”€ resources
gradle
build.gradle</code></pre>

<h2 id="Vue-CLI"><a href="#Vue-CLI" class="headerlink" title="Vue CLI"></a>Vue CLI</h2><p>ì•ì„œ <code>Spring Initializr</code>ë¥¼ í†µí•´ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ê°œë°œí•  Vue í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. Vue í”„ë¡œì íŠ¸ëŠ” Vue CLIë¥¼ í™œìš©í•˜ì—¬ ì‰½ê²Œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Vue CLIëŠ” NPMìœ¼ë¡œ ì„¤ì¹˜í•©ë‹ˆë‹¤.</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> @vue/cli
<span class="token comment"># ê·¸ë¦¬ê³  create ëª…ë ¹ì–´ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.</span>
vue create <span class="token parameter variable">--preset</span> kdevkr/vue-preset <span class="token punctuation">[</span>project-name<span class="token punctuation">]</span></code></pre>

<p>ìœ„ ì˜ˆì‹œì²˜ëŸ¼ Vue í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ í”„ë¦¬ì…‹ í˜•íƒœ(preset.json)ë¡œ êµ¬ì„±í•˜ì—¬ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ì˜ <a href="https://github.com/kdevkr/vue-preset">kdevkr&#x2F;vue-preset</a> í”„ë¦¬ì…‹ì€ ë‹¤ìŒì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ í¬í•¨í•˜ëŠ” Vue í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<ul>
<li>Babel</li>
<li>ESLint + Prettier</li>
<li>SCSS (with dart-sass)</li>
<li>Vuex</li>
<li>Vue Router</li>
<li>Bootstrap Vue</li>
<li>Fontawesome</li>
</ul>
<h3 id="src-x2F-main-x2F-vue"><a href="#src-x2F-main-x2F-vue" class="headerlink" title="src&#x2F;main&#x2F;vue"></a>src&#x2F;main&#x2F;vue</h3><p>ë³´í†µì€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— Vue í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•´ë„ ìƒê´€ì—†ìœ¼ë‚˜ ì €ëŠ” <code>src/main/java</code>ì²˜ëŸ¼ <code>src/main/vue</code>ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. ì´ì œ src&#x2F;main&#x2F;vue í´ë”ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ê´€ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> src/main
vue create <span class="token parameter variable">--preset</span> kdevkr/vue-preset vue</code></pre>

<p>Vue CLIì— ì˜í•´ <a href="https://github.com/kdevkr/spring-boot-integration-vuejs/tree/main/src/main/vue">src&#x2F;main&#x2F;vue</a>ì— Vue í”„ë¡œì íŠ¸ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>
<h3 id="Vue-Configuration"><a href="#Vue-Configuration" class="headerlink" title="Vue Configuration"></a>Vue Configuration</h3><p>Vue í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì„¤ì •ì€ <code>vue.config.js</code>ë¥¼ í†µí•´ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Vue í”„ë¡œì íŠ¸ëŠ” ë§Œë“¤ì—ˆì§€ë§Œ ëª‡ê°€ì§€ ì„¤ì •ì„ ì§„í–‰í•´ì•¼í•©ë‹ˆë‹¤. ê°€ì¥ ë¨¼ì € Vueë¥¼ í†µí•´ ê°œë°œí•  ë•ŒëŠ” <a href="https://cli.vuejs.org/config/#devserver">webpack-dev-server</a>ë¥¼ ì‹¤í–‰í•´ì„œ ê°œë°œí•©ë‹ˆë‹¤.</p>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³„ë‹¤ë¥¸ ì„¤ì •ì´ ì—†ìœ¼ë©´ <code>8080</code> í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, Vue ê°œë°œìš© ì„œë²„ëŠ” <code>8081</code> í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">disableHostCheck</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì´ì œ <code>http://localhost:8081</code>ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ì›¹ í˜ì´ì§€ë¥¼ ê°œë°œí•  ìˆ˜ ìˆê²Œ ë˜ê³  í”„ë¡ì‹œ ì„¤ì •ì„ í†µí•´ Vue ê°œë°œìš© ì„œë²„ê°€ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ëª¨ë“  ìš”ì²­ì€ 8080 í¬íŠ¸ë¡œ ìš”ì²­í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, Vue ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì œê³µí•˜ëŠ” APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>API í˜¸ì¶œì„ ìœ„í•´ <code>jQuery.ajax</code> ë˜ëŠ” <code>axios</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë³¸ ê¸€ì˜ ì£¼ëœ ê´€ì‹¬ì‚¬ê°€ ì•„ë‹™ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="Production-build"><a href="#Production-build" class="headerlink" title="Production build"></a>Production build</h3><p>Vue í”„ë¡œì íŠ¸ë¡œ ê°œë°œí•œ í”„ë¡ íŠ¸ì—”ë“œ í´ë¼ì´ì–¸íŠ¸ëŠ” <code>build</code> ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> run build</code></pre>

<p>ìœ„ ëª…ë ¹ì„ í†µí•´ ë¹Œë“œë˜ëŠ” íŒŒì¼ì€ <code>dist/</code> í´ë”ì— ìƒì„±ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, <code>src/main/vue/dist</code>ì— ë§Œë“¤ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ë§Œì•½, ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ì—¬ ì‹¤í–‰í•˜ì˜€ë‹¤ë©´ í•´ë‹¹ íŒŒì¼ë“¤ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì–´ ë°°í¬í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì–´ ë°°í¬í•˜ëŠ” ê²½ë¡œëŠ” <a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/html/appendix-application-properties.html#spring.web.resources.static-locations"><code>spring.web.resources.static-locations</code></a> í”„ë¡œí¼í‹°ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” <code>src/main/resources/static/dist</code>ë¥¼ Vue í”„ë¡œì íŠ¸ì˜ ë¹Œë“œ ê²½ë¡œë¡œ ì¡ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•´ë‹¹ ë¹Œë“œ íŒŒì¼ì„ ë°°í¬í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ë¨¼ì € ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹°ì— í´ë˜ìŠ¤íŒ¨ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ <code>static/dist</code>ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì½ì„ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.<br><strong>application.properties</strong></p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">spring.web.resources.static-locations</span><span class="token punctuation">=</span><span class="token value attr-value">classpath:/META-INF/resources/, classpath:/resources/, classpath:/static/, classpath:/public/, classpath:/static/dist</span></code></pre>

<p>ê·¸ë¦¬ê³  Vue í”„ë¡œì íŠ¸ ë¹Œë“œ ê²½ë¡œëŠ” <code>outputDir</code>ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><strong>vue.config.js</strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">outputDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../resources/static/dist'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="Freemarker-Template-Engine"><a href="#Freemarker-Template-Engine" class="headerlink" title="Freemarker Template Engine"></a>Freemarker Template Engine</h2><p>Vue í”„ë¡œì íŠ¸ë¡œ ë¹Œë“œëœ í”„ë¡ íŠ¸ì—”ë“œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ íŒŒì¼ë“¤ì€ <code>html-webpack-plugin</code>ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” <code>index.html</code>ì— ìë™ìœ¼ë¡œ íŒŒì¼ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤. ê·¸ëŸ°ë° ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ì— ëŒ€í•œ ì •ë³´ë‚˜ ì„¸ì…˜ ì •ë³´ë¥¼ ì›¹ í˜ì´ì§€ì— í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Spring Initializrì—ì„œ í”„ë¦¬ë§ˆì»¤ë¥¼ í…œí”Œë¦¿ ì—”ì§„ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•˜ì—¬ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ì˜€ë‹¤ë©´ <code>src/main/resources/templates</code> í•˜ìœ„ì— ìœ„ì¹˜í•œ <code>*.ftlh</code>ì„ Viewë¡œ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì´ <code>indexPath</code>ë¥¼ ì„¤ì •í•˜ì—¬ index.ftlhì´ ë§Œë“¤ì–´ì§€ëŠ” ìœ„ì¹˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><strong>vue.config.js</strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">indexPath</span><span class="token operator">:</span> <span class="token string">'../../templates/index.ftlh'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h3><p>ì•ì„œ index íŒŒì¼ì€ <code>html-webpack-plugin</code>ì— ì˜í•´ ë§Œë“¤ì–´ì§„ë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ìœ„ì—ì„œ indexPathë¥¼ ì§€ì •í•œ ê²ƒì€ ë‹¨ìˆœíˆ í™•ì¥ìë¥¼ <code>.ftlh</code>ë¡œ ë°”ê¾¼ ê²ƒê³¼ ë‹¤ë¥¼ ë°” ì—†ìŠµë‹ˆë‹¤. í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ëª©ì ì€ í•´ë‹¹ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì§€ì›í•˜ëŠ” ë¬¸ë²•ìœ¼ë¡œ ì •ë³´ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•œ ì˜µì…˜ì„ ë³€ê²½í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´, &lt;html&gt; íƒœê·¸ì— lang ì†ì„±ì— ìš”ì²­ì— ë”°ë¥¸ ì–¸ì–´ê°’ì„ ë¶€ì—¬í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì´ index.ftlhê°€ ë§Œë“¤ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;.locale?split(<span class="token punctuation">"</span></span><span class="token attr-name">_")[0]&#125;"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p>ì•„ì‰½ê²Œë„ html-webpack-pluginì€ ìœ„ ë‚´ìš©ì„ ì½ë‹¤ê°€ ê°’ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ ì˜¤ë¥˜ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ ì•½ê°„ì˜ íŠ¸ë¦­ì„ ì“°ë©´ì„œ í”ŒëŸ¬ê·¸ì¸ ì˜µì…˜ì„ ê±´ë“œë ¤ì„œ ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><strong>index.html</strong></p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%= '\$&#123;.locale?split(\<span class="token punctuation">"</span></span><span class="token attr-name">_\")[0]&#125;'</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p><strong>vue.config.js</strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token parameter">args</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>minify <span class="token operator">=</span> <span class="token boolean">false</span>
          args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>interpolate <span class="token operator">=</span> <span class="token boolean">true</span>
          <span class="token keyword">return</span> args
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>minify</code> ì˜µì…˜ì„ ë„ëŠ” ê²ƒì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í”„ë¦¬ë§ˆì»¤ í…œí”Œë¦¿ ì—”ì§„ìœ¼ë¡œ <code>index.ftlh</code>ì„ ì½ì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>
<p>ì´ì œ ë¹Œë“œëœ <a href="https://github.com/kdevkr/spring-boot-integration-vuejs/blob/main/src/main/resources/templates/index.ftlh">index.ftlh</a>ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;.locale?split(<span class="token punctuation">"</span></span><span class="token attr-name">_")[0]&#125;"</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width,initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/favicon.ico<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/about.d6d714df.js<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefetch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/app.f94ee837.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/chunk-vendors.01c183df.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/app.247cb7a3.js<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>script<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/chunk-vendors.65fb301b.js<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>script<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/chunk-vendors.01c183df.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/app.f94ee837.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>We're sorry but vue doesn't work properly without JavaScript enabled. Please enable it to continue.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- built files will be auto injected --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/chunk-vendors.65fb301b.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/app.247cb7a3.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p>ì´ì œ ì—¬ëŸ¬ë¶„ë„ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Vueì™€ í•¨ê»˜ ê°œë°œí•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ˜€</p>
]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë ˆë²¨ ì„ ì–¸ (Feat. Yaml)</title>
    <url>/spring-boot-logging-level/</url>
    <content><![CDATA[<pre class="language-properties" data-language="properties"><div class="caption"><span>application.properties</span></div><code class="language-properties"><span class="token key attr-name">logging.level.org.springframework.security.web.FilterChainProxy</span><span class="token punctuation">=</span><span class="token value attr-value">TRACE</span></code></pre>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ logging.level í•˜ìœ„ì— íŒ¨í‚¤ì§€ì™€ í´ë˜ìŠ¤ ëª…ì„ ì„ ì–¸í•˜ë©´ ë¡œê¹… ë ˆë²¨ì„ ì‰½ê²Œ ì¡°ì •í•  ìˆ˜ ìˆê³  ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©´ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí¼í‹°(.properties) íŒŒì¼ì—ëŠ” ìœ„ì™€ ê°™ì´ ì‘ì„±í•´ì•¼ í•œë‹¤. ê·¸ëŸ¬ë‚˜, ì•„ë¬´ë˜ë„ í”„ë¡œí¼í‹° íŒŒì¼ì˜ ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œì ìœ¼ë¡œ ì¸í•´ application.yml íŒŒì¼ë¡œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©í•  ê²ƒì´ë‹¤. Yamlì€ ê³„ì¸µìœ¼ë¡œ í‚¤ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì¸í…”ë¦¬ì œì´ IDEAì—ì„œ <code>org.springframework.security.web.FilterChainProxy</code>ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸°ë¥¼ ì‹œë„í•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ìë™ìœ¼ë¡œ í‚¤ë¥¼ ë§Œë“¤ì–´ì£¼ê²Œ ëœë‹¤.</p>
<blockquote>
<p>íŒ¨í‚¤ì§€ ëª…ì„ ì…ë ¥í•˜ë©´ ë‹¤ìŒ ë””ë ‰í† ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì•Œë ¤ì£¼ê¸°ëŠ” í•˜ë‚˜ í•´ë‹¹ ë””ë ‰í† ë¦¬ì—ì„œ ì¡´ì¬í•˜ëŠ” í´ë˜ìŠ¤ê¹Œì§€ëŠ” ì•Œë ¤ì£¼ì§€ ì•Šìœ¼ë¯€ë¡œ FilterChainProxyì˜ í´ë˜ìŠ¤ ìœ„ì¹˜ë¥¼ ì°¾ì•„ì„œ ìƒë‹¨ì— ê¸°ì¬ëœ íŒ¨í‚¤ì§€ ëª…ì„ ë³µì‚¬í•˜ëŠ”ê²Œ ë” ë¹ ë¥´ê³  í¸ë¦¬í•˜ë‹¤.</p>
</blockquote>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">org</span><span class="token punctuation">:</span>
      <span class="token key atrule">springframework</span><span class="token punctuation">:</span>
        <span class="token key atrule">security</span><span class="token punctuation">:</span>
          <span class="token key atrule">web</span><span class="token punctuation">:</span>
            <span class="token key atrule">FilterChainProxy</span><span class="token punctuation">:</span>
</code></pre>

<p>ìœ„ì™€ ê°™ì´ ë§Œë“¤ì–´ì§€ëŠ”ê²Œ ì˜ëª»ëœ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ê°€ë…ì„±ì´ë‚˜ ìœ ì§€ ê´€ë¦¬ ë©´ì—ì„œëŠ” ë„ˆë¬´ ê¸¸ì–´ì§€ë¯€ë¡œ ë¹„íš¨ìœ¨ì ì´ë¼ ìƒê°í•œë‹¤. ì—¬ê¸°ì„œ logging.level í•˜ìœ„ ê³„ì¸µì„ í‘œí˜„í•˜ëŠ” ê²½ìš°ì— ì‘ì€ ë”°ì˜´í‘œ(<code>&#39;</code>)ë¥¼ í™œìš©í•˜ë©´ í•œì¤„ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. </p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">'org.springframework.security.web.FilterChainProxy'</span><span class="token punctuation">:</span> TRACE</code></pre>

<blockquote>
<p>ì‘ì€ ë”°ì˜´í‘œë¡œ í•˜ë‚˜ì˜ í‚¤ë¡œ í‘œí˜„í•  ìˆ˜ ìˆê²Œ ë˜ì§€ë§Œ ë§¨ ë’¤ì— ì½œë¡ ì€ ìë™ìœ¼ë¡œ ë¶™ì—¬ì£¼ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜†ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì½œë¡ ì„ í¬í•¨í•œ ë¡œê·¸ ë ˆë²¨ì„ ì…ë ¥í•´ì•¼í•œë‹¤. ê°œì¸ì ìœ¼ë¡œëŠ” ì½œë¡ ê¹Œì§€ ì…ë ¥í•˜ëŠ” ë¶€ë¶„ì€ ê·¸ë ‡ê²Œ ë¶ˆí¸í•œ ë¶€ë¶„ì€ ì•„ë‹ˆë¼ê³  ìƒê°ëœë‹¤.</p>
</blockquote>
<h4 id="ë¡œê·¸-ê·¸ë£¹-Optional"><a href="#ë¡œê·¸-ê·¸ë£¹-Optional" class="headerlink" title="ë¡œê·¸ ê·¸ë£¹ (Optional)"></a>ë¡œê·¸ ê·¸ë£¹ (Optional)</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ 2.1+ ë¶€í„°ëŠ” ë¡œê·¸ ë ˆë²¨ ë¿ë§Œ ì•„ë‹ˆë¼ íŠ¹ì • í´ë˜ìŠ¤ë“¤ì— ëŒ€í•œ ë¡œê·¸ ë ˆë²¨ì„ í•œë²ˆì— ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes#logging-groups">ë¡œê·¸ ê·¸ë£¹</a>ì„ ì§€ì›í•˜ê³  Yaml ë¬¸ë²•ì„ í™œìš©í•˜ì—¬ ì‘ì€ ë”°ì˜´í‘œê°€ ì—†ì–´ë„ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">study</span><span class="token punctuation">:</span> TRACE
  <span class="token key atrule">group</span><span class="token punctuation">:</span>
    <span class="token key atrule">study</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> org.springframework.web
      <span class="token punctuation">-</span> org.springframework.jdbc.core
      <span class="token punctuation">-</span> org.springframework.security.web.FilterChainProxy</code></pre>

<p>ë¡œê·¸ ê·¸ë£¹ì„ ì‚¬ìš©í•œë‹¤ë©´ êµ³ì´ ì‘ì€ ë”°ì˜´í‘œê°€ í•„ìš”í•˜ì§€ ì•Šì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ë¡œê·¸ ë ˆë²¨ ì¡°ì •ì€ ì„¸ë¶€ì ì¸ í´ë˜ìŠ¤ ë‹¨ìœ„ë¡œ ë³€ê²½í•˜ëŠ” ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì— ë§ì´ í™œìš©ë˜ì§„ ì•ŠëŠ”ë‹¤. ì´ì™€ ê°™ì´ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.logging">ìŠ¤í”„ë§ ë¶€íŠ¸ ê³µì‹ ë¬¸ì„œì˜ Logging í•­ëª©</a>ì—ì„œë„ ë‹¤ë£¨ì§€ ì•ŠëŠ” ë‚´ìš©ì´ê¸° ë•Œë¬¸ì— ìƒëµëœ ì •ë³´ê°€ ì—†ëŠ”ì§€ëŠ” ë³„ë„ë¡œ ì°¾ì•„ë³´ëŠ” í–‰ìœ„ë„ ê°„í˜¹ í•„ìš”í•˜ë‹¤. ë³¸ ê¸€ì—ì„œ ê³µìœ í•œ ë‚´ìš©ì€ ê·¸ì € Yaml íŒŒì¼ì— ëŒ€í•œ ê¸°ë³¸ ë¬¸ë²•ì„ í™œìš©í•œ ê²ƒì´ë‹¤.</p>
]]></content>
      <tags>
        <tag>Logging</tag>
        <tag>Yaml</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³ ë‚˜ì„œ</title>
    <url>/spring-boot-project/</url>
    <content><![CDATA[<p>ìŠ¤í”„ë§ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸ í´ë”ë¥¼ êµ¬ì„±í•˜ë”ë¼ë„ íšŒì‚¬ë§ˆë‹¤ í˜¹ì€ ê°œë°œìë§ˆë‹¤ ë„ˆë¬´ë‚˜ë„ ë‹¹ì—°í•˜ê²Œ í•˜ëŠ” ê²ƒë“¤ì´ ì¡°ê¸ˆì”© ìˆê¸° ë§ˆë ¨ì´ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³ ë‚˜ì„œ ë„ˆë¬´ë‚˜ë„ ë‹¹ì—°í•˜ê²Œ ìŠµê³¼ì ìœ¼ë¡œ ë§¤ë²ˆ í•˜ëŠ” ê²ƒë“¤ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤. </p>
<h4 id="1-Propertiesê°€-ì•„ë‹Œ-YAML-ë°©ì‹ìœ¼ë¡œ-ë³€ê²½í•˜ê¸°"><a href="#1-Propertiesê°€-ì•„ë‹Œ-YAML-ë°©ì‹ìœ¼ë¡œ-ë³€ê²½í•˜ê¸°" class="headerlink" title="1. Propertiesê°€ ì•„ë‹Œ YAML ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°"></a>1. Propertiesê°€ ì•„ë‹Œ YAML ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°</h4><p>ìŠ¤í”„ë§ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ ê¸°ë³¸ì ì¸ í”„ë¡œì íŠ¸ í´ë”ì—ëŠ” application.properties íŒŒì¼ì´ ì¡´ì¬í•œë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” Java Properties, YAML ê·¸ë¦¬ê³  í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° ì†ì„± ê°’ì„ ì ìš©í•˜ì—¬ í™œìš©í•  ìˆ˜ ìˆê²Œ ì§€ì›í•œë‹¤. í•˜ì§€ë§Œ, ISO-8859-1 ì¸ì½”ë”©ìœ¼ë¡œ ê°•ì œë˜ëŠ” ìë°” í”„ë¡œí¼í‹° íŒŒì¼ì—ëŠ” í•œê³„ê°€ ìˆê³  ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ UTF-8ì„ ì‚¬ìš©í•˜ëŠ” í¸ì´ë¯€ë¡œ YAML ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ í¸ë¦¬í•˜ë‹¤.</p>
<blockquote>
<p>It is recommended to stick with one format for your entire application. If you have configuration files with both .properties and .yml format in the same location, .properties takes precedence.</p>
</blockquote>
<p>ìœ„ì™€ ê°™ì´ ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ” ê²ƒì²˜ëŸ¼ í”„ë¡œí¼í‹°ì™€ ì•¼ë¯ˆ íŒŒì¼ì„ ë™ì‹œì— ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìë°” í”„ë¡œí¼í‹° íŒŒì¼ì„ ìš°ì„ í•˜ì—¬ ì ìš©í•˜ë¯€ë¡œ ì£¼ì˜í•˜ì.</p>
<h4 id="2-ìŠ¤í”„ë§-ë¶€íŠ¸-ê¸°ë³¸-ë°°ë„ˆ-ì˜µì…˜-ë„ê¸°"><a href="#2-ìŠ¤í”„ë§-ë¶€íŠ¸-ê¸°ë³¸-ë°°ë„ˆ-ì˜µì…˜-ë„ê¸°" class="headerlink" title="2. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë°°ë„ˆ ì˜µì…˜ ë„ê¸°"></a>2. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë°°ë„ˆ ì˜µì…˜ ë„ê¸°</h4><p>ë‘ë²ˆì§¸ë¡œ í•˜ëŠ” ì¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ì—¬ ì½˜ì†”ì— í‘œì‹œë˜ëŠ” ê¸°ë³¸ ë°°ë„ˆ ë¡œê·¸ë¥¼ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìŠ¤í”„ë§ ë°°ë„ˆë¥¼ í†µí•´ì„œ ë²„ì „ì„ í™•ì¸í•  í•„ìš”ì„±ì€ êµ‰ì¥íˆ ì ìœ¼ë©° ì¤‘ìš”ì‹œ í•´ì•¼í•˜ëŠ” ê²ƒì€ ë¹Œë“œ ì •ë³´ì¼ ë¿ì´ê¸°ì— ë¶ˆí•„ìš”í•˜ë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">spring.main.banner-mode</span><span class="token punctuation">:</span> off</code></pre>

<h4 id="3-ê·¸ë˜ë“¤-ë¡¬ë³µ-íŒ¨í‚¤ì§€-êµ¬ì„±ì„-ë¡¬ë³µ-í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ-ë³€ê²½í•˜ê¸°"><a href="#3-ê·¸ë˜ë“¤-ë¡¬ë³µ-íŒ¨í‚¤ì§€-êµ¬ì„±ì„-ë¡¬ë³µ-í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ-ë³€ê²½í•˜ê¸°" class="headerlink" title="3. ê·¸ë˜ë“¤ ë¡¬ë³µ íŒ¨í‚¤ì§€ êµ¬ì„±ì„ ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë³€ê²½í•˜ê¸°"></a>3. ê·¸ë˜ë“¤ ë¡¬ë³µ íŒ¨í‚¤ì§€ êµ¬ì„±ì„ ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë³€ê²½í•˜ê¸°</h4><p>ê·¸ë˜ë“¤ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“œëŠ” ê²½ìš° ê·¸ë˜ë“¤ ë¡¬ë³µ í”ŒëŸ¬ê·¸ì¸ì´ ì•„ë‹Œ ì§ì ‘ íŒ¨í‚¤ì§€ë¥¼ ë””íœë˜ì‹œì— ì§€ì •í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. <a href="https://plugins.gradle.org/plugin/io.freefair.lombok">io.freefair.lombok</a>ì„ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì´ë‹¤.</p>
<pre class="language-gradle" data-language="gradle"><div class="caption"><span>build.gradle</span></div><code class="language-gradle"><span class="token keyword">plugins</span> <span class="token punctuation">&#123;</span>
    id <span class="token string">'io.freefair.lombok'</span> version <span class="token string">'8.0.1'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="4-ê¸°ë³¸-í†°ìº£-ì»¨í…Œì´ë„ˆë¥¼-ì–¸ë”í† ìš°ë¡œ-ëŒ€ì²´í•˜ê¸°"><a href="#4-ê¸°ë³¸-í†°ìº£-ì»¨í…Œì´ë„ˆë¥¼-ì–¸ë”í† ìš°ë¡œ-ëŒ€ì²´í•˜ê¸°" class="headerlink" title="4. ê¸°ë³¸ í†°ìº£ ì»¨í…Œì´ë„ˆë¥¼ ì–¸ë”í† ìš°ë¡œ ëŒ€ì²´í•˜ê¸°"></a>4. ê¸°ë³¸ í†°ìº£ ì»¨í…Œì´ë„ˆë¥¼ ì–¸ë”í† ìš°ë¡œ ëŒ€ì²´í•˜ê¸°</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì˜ì¡´í•˜ëŠ” ì„ë² ë””ë“œ í†°ìº£ë„ ì¤€ìˆ˜í•œ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ì§€ë§Œ ìë°”ë¥¼ ì‚¬ìš©í•˜ì—¬ NIO ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ëœ ê²½ëŸ‰ì˜ ì›¹ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì¸ ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì›¹ ìŠ¤íƒ€í„° ëª¨ë“ˆì—ëŠ” í†°ìº£ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ í¬í•¨ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ í†°ìº£ì— ëŒ€í•œ ëª¨ë“ˆì€ ì œì™¸ë˜ë„ë¡ í•˜ì.</p>
<pre class="language-gradle" data-language="gradle"><div class="caption"><span>build.gradle</span></div><code class="language-gradle">configurations<span class="token punctuation">.</span>configureEach <span class="token punctuation">&#123;</span>
    exclude group<span class="token punctuation">:</span> <span class="token string">'org.springframework.boot'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'spring-boot-starter-tomcat'</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">dependencies</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">implementation</span> <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>
    <span class="token keyword">implementation</span> <span class="token string">'org.springframework.boot:spring-boot-starter-undertow'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 6.1 ì—ì„œëŠ” JDK 21ê³¼ Virtual Threadsë¥¼ ìš°ì„ ì ìœ¼ë¡œ í†°ìº£ì—ì„œ ì§€ì›í•  ì˜ˆì •ì¸ ê²ƒ ê°™ì•„ ì–¸ë”í† ìš°ê°€ ì•„ë‹Œ í†°ìº£ì„ ì„ íƒí•´ì•¼í•  ê²½ìš°ê°€ ë  ê°€ëŠ¥ì„±ë„ ë³´ì¸ë‹¤. ê´€ë ¨ í”„ë¡œì íŠ¸: <a href="https://github.com/mp911de/spring-boot-virtual-threads-experiment">mp911de&#x2F;spring-boot-virtual-threads-experiment</a></p>
</blockquote>
<h4 id="5-ì¸í…”ë¦¬ì œì´-IDEAì˜-ë¹Œë“œ-ë°-ì‹¤í–‰-ì˜µì…˜-ë³€ê²½í•˜ê¸°"><a href="#5-ì¸í…”ë¦¬ì œì´-IDEAì˜-ë¹Œë“œ-ë°-ì‹¤í–‰-ì˜µì…˜-ë³€ê²½í•˜ê¸°" class="headerlink" title="5. ì¸í…”ë¦¬ì œì´ IDEAì˜ ë¹Œë“œ ë° ì‹¤í–‰ ì˜µì…˜ ë³€ê²½í•˜ê¸°"></a>5. ì¸í…”ë¦¬ì œì´ IDEAì˜ ë¹Œë“œ ë° ì‹¤í–‰ ì˜µì…˜ ë³€ê²½í•˜ê¸°</h4><p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì¸í…”ë¦¬ì œì´ IDEAë¥¼ í†µí•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ëŠ” ê²½ìš° ì»´íŒŒì¼ëŸ¬ì™€ ê·¸ë˜ë“¤ì— ëŒ€í•œ ì˜µì…˜ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•˜ê³  ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì´ ë˜ë¯€ë¡œ ì ìš©í•˜ëŠ” í¸ì´ë‹¤.</p>
<ul>
<li>Build, Execution, Deployment &gt; Build Tools &gt; Gradle &gt; Build and run using Intellij IDEA</li>
<li>Build, Execution, Deployment &gt; Build Tools &gt; Compiler &gt; Build project automatically</li>
</ul>
<p>ê¸°ë³¸ Gradleì´ ì•„ë‹Œ Intellij IDEAë¡œ ë¹Œë“œ ë° ì‹¤í–‰ì„ í•˜ë„ë¡ ì„¤ì •í•œë‹¤ë©´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— out ì´ë¼ëŠ” ì´ë¦„ì˜ í´ë”ì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ í´ë˜ìŠ¤ íŒŒì¼ê³¼ ì •ì  ë¦¬ì†ŒìŠ¤ íŒŒì¼ë“¤ì´ ì´ë™ë˜ì–´ ì–´ë– í•œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ê³§ë°”ë¡œ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë¶€íŠ¸ ì–¸ë”í† ìš°</title>
    <url>/spring-boot-undertow/</url>
    <content><![CDATA[<p>ì¸í…”ë¦¬ì œì´ ë˜ëŠ” <a href="https://start.spring.io/">ìŠ¤í”„ë§ ì´ë‹ˆì…œë¼ì´ì €</a>ë¥¼ í†µí•´ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ê°„ë‹¨í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ í†µí•´ ë§Œë“¤ê³ ì í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ í•„ìš”í•œ ëª¨ë“ˆì„ ì‰½ê²Œ ì„ íƒí•  ìˆ˜ ìˆê²Œ ì§€ì›í•˜ì§€ë§Œ ì„¸ë¶€ì ì¸ ëª¨ë“ˆì˜ ì„ íƒì€ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë§Œë“¤ì–´ì§„ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜ì •í•´ì•¼í•  í•„ìš”ì„±ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ì•„íŒŒì¹˜ í†°ìº£ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê¸°ë³¸ ì»¨í…Œì´ë„ˆë¡œì¨ ì¶©ë¶„íˆ ì…ì¦ëœ ê¸°ìˆ ì´ì§€ë§Œ í˜„ì¬ ì¡°ì§ê³¼ ê°™ì´ ì¼ë¶€ ì‹¤ë¬´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì´ë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">configurations<span class="token punctuation">.</span>configureEach <span class="token punctuation">&#123;</span>
    exclude group<span class="token punctuation">:</span> <span class="token string">'org.springframework.boot'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'spring-boot-starter-tomcat'</span>
<span class="token punctuation">&#125;</span>

dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-websocket'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-undertow'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìœ„ ì˜ˆì‹œì—ì„œ spring-boot-starter-websocket ëª¨ë“ˆì— ì˜í•´ spring-boot-starter-webì€ ëª…ì‹œí•  í•„ìš”ê°€ ì—†ë‹¤.</p>
</blockquote>
<h4 id="WebSocketDeploymentInfo-ê²½ê³ -ë¡œê·¸-ì—†ì• ê¸°"><a href="#WebSocketDeploymentInfo-ê²½ê³ -ë¡œê·¸-ì—†ì• ê¸°" class="headerlink" title="WebSocketDeploymentInfo ê²½ê³  ë¡œê·¸ ì—†ì• ê¸°"></a>WebSocketDeploymentInfo ê²½ê³  ë¡œê·¸ ì—†ì• ê¸°</h4><p>spring-boot-starter-websocket ëª¨ë“ˆì„ ì¶”ê°€í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ WebSocketDeploymentInfoê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ê¸°ë³¸ ë²„í¼ í’€ì´ ì‚¬ìš©ëœë‹¤ëŠ” ê²½ê³  ë¡œê·¸ê°€ ì¶œë ¥ëœë‹¤. ë¡œê·¸ ë ˆë²¨ ì¡°ì •ì„ í†µí•´ ë¬´ì‹œí•´ë„ ë˜ì§€ë§Œ WebServerFactoryCustomizerë¥¼ í†µí•´ì„œ WebSocketDeploymentInfoê°€ ë“±ë¡ë˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-none"><code class="language-none">2023-03-16T21:49:43.249+09:00  WARN 35488 --- [main] io.undertow.websockets.jsr : UT026010: Buffer pool was not set on WebSocketDeploymentInfo, the default pool will be used</code></pre>

<pre class="language-java" data-language="java"><div class="caption"><span>UndertowWebsocketCustomizer</span></div><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UndertowWebsocketCustomizer</span> <span class="token keyword">implements</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UndertowServletWebServerFactory</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Undertow</span> undertow<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UndertowWebsocketCustomizer</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>undertow <span class="token operator">=</span> serverProperties<span class="token punctuation">.</span><span class="token function">getUndertow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">UndertowServletWebServerFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        factory<span class="token punctuation">.</span><span class="token function">addDeploymentInfoCustomizers</span><span class="token punctuation">(</span>deploymentInfo <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">boolean</span> direct <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>undertow<span class="token punctuation">.</span><span class="token function">getDirectBuffers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>undertow<span class="token punctuation">.</span><span class="token function">getDirectBuffers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> bufferSize <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>undertow<span class="token punctuation">.</span><span class="token function">getBufferSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>undertow<span class="token punctuation">.</span><span class="token function">getBufferSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">;</span>
            <span class="token class-name">WebSocketDeploymentInfo</span> webSocketDeploymentInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocketDeploymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            webSocketDeploymentInfo<span class="token punctuation">.</span><span class="token function">setBuffers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultByteBufferPool</span><span class="token punctuation">(</span>direct<span class="token punctuation">,</span> bufferSize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            deploymentInfo<span class="token punctuation">.</span><span class="token function">addServletContextAttribute</span><span class="token punctuation">(</span><span class="token string">"io.undertow.websockets.jsr.WebSocketDeploymentInfo"</span><span class="token punctuation">,</span> webSocketDeploymentInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="HTTPS-í¬íŠ¸ë¡œ-ë¦¬ë‹¤ì´ë ‰íŠ¸"><a href="#HTTPS-í¬íŠ¸ë¡œ-ë¦¬ë‹¤ì´ë ‰íŠ¸" class="headerlink" title="HTTPS í¬íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸"></a>HTTPS í¬íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸</h4><p>ì´ì œëŠ” AWS ELBì™€ ê°™ì€ ë¡œë“œë°¸ëŸ°ì„œ ë˜ëŠ” ì—”ì§„ì—‘ìŠ¤ì™€ ê°™ì€ ì›¹ ì„œë²„ë“¤ì„ í†µí•´ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ êµ¬ì„±í•˜ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ HTTP&#x2F;2ë¥¼ ì§€ì›í•˜ë„ë¡ êµ¬ë™í•˜ì§€ ì•ŠëŠ” í¸ì´ì§€ë§Œ TLS ì˜¤í”„ë¡œë“œê°€ í•„ìš”í•˜ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ HTTPë¡œ ì—°ê²°ë˜ì—ˆì„ë•Œ HTTPSë¡œ ì—°ê²°ë˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>UndertowHttp2Customizer</span></div><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UndertowHttp2Customizer</span>
    <span class="token keyword">implements</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UndertowServletWebServerFactory</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> httpPort<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UndertowHttp2Customizer</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">,</span>
                                   <span class="token keyword">final</span> <span class="token class-name">Environment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties <span class="token operator">=</span> serverProperties<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>httpPort <span class="token operator">=</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"server.http-port"</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">UndertowServletWebServerFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        factory<span class="token punctuation">.</span><span class="token function">addBuilderCustomizers</span><span class="token punctuation">(</span>builder <span class="token operator">-></span> builder<span class="token punctuation">.</span><span class="token function">addHttpListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>httpPort<span class="token punctuation">,</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">addDeploymentInfoCustomizers</span><span class="token punctuation">(</span>deploymentInfo <span class="token operator">-></span> deploymentInfo<span class="token punctuation">.</span><span class="token function">addSecurityConstraint</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">SecurityConstraint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">addWebResourceCollection</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebResourceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addUrlPattern</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setTransportGuaranteeType</span><span class="token punctuation">(</span><span class="token class-name">TransportGuaranteeType</span><span class="token punctuation">.</span><span class="token constant">CONFIDENTIAL</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setEmptyRoleSemantic</span><span class="token punctuation">(</span><span class="token class-name">SecurityInfo<span class="token punctuation">.</span>EmptyRoleSemantic</span><span class="token punctuation">.</span><span class="token constant">PERMIT</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setConfidentialPortManager</span><span class="token punctuation">(</span>exchange <span class="token operator">-></span> serverProperties<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
]]></content>
      <tags>
        <tag>Spring Boot</tag>
        <tag>Undertow</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë°±ì—”ë“œ ê°œë°œìê°€ CORSë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ë°©ë²•</title>
    <url>/spring-cors/</url>
    <content><![CDATA[<p><img data-src="/images/posts/spring-cors/01.png"></p>
<p>ìœ„ì™€ ê°™ì€ ì§¤ì˜ ë‚´ìš©ì²˜ëŸ¼ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì—ê²Œ ê³ í†µì„ ì£¼ëŠ” ê²ƒì€ CORS ì´ë‹¤. ê·¸ëŸ°ë° CORSëŠ” ë¸Œë¼ìš°ì €ì—ì„œì˜ ì •ì±…ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ ì—†ìœ¼ë©° ë¸Œë¼ìš°ì €ì—ì„œì˜ CORS ë§¤ì»¤ë‹ˆì¦˜ì„ ì´í•´í•˜ê³  ì„œë²„ ë°±ì—”ë“œ ê°œë°œìê°€ ì²˜ë¦¬í•´ì•¼í•  ë¶€ë¶„ì´ë‹¤. MDNì˜ <a href="https://developer.mozilla.org/en-US/docs/Glossary/Preflight_request">Preflight Request</a> ë¬¸ì„œì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ì²˜ëŸ¼ ëŒ€ë¶€ë¶„ì˜ CORS ë¬¸ì œëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ XHR ìš”ì²­ì— ì˜í•´ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­(Preflight Request)ì— ì˜í•œ CORS ìœ„ë°° ì‘ë‹µì„ ë°›ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì œí•œí•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•œë‹¤.</p>
<h4 id="í”„ë¦¬í”Œë¼ì´íŠ¸-ìš”ì²­"><a href="#í”„ë¦¬í”Œë¼ì´íŠ¸-ìš”ì²­" class="headerlink" title="í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­"></a>í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­</h4><p>í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì€ <code>Origin</code> í—¤ë”ì™€ <code>Access-Control-Request-Method</code> í—¤ë” ê·¸ë¦¬ê³  <code>OPTIONS</code> ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰ëœë‹¤. </p>
<pre class="language-text" data-language="text"><div class="caption"><span>HTTP</span></div><code class="language-text">OPTIONS /resource/foo
Access-Control-Request-Method: DELETE 
Access-Control-Request-Headers: origin, x-requested-with 
Origin: https://foo.bar.org </code></pre>

<p>ì°¸ê³ ë¡œ, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/cors/CorsUtils.java">CorsUtils</a>ì— ì˜í•´ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì„ êµ¬ë¶„í•˜ëŠ” ì¡°ê±´ì€ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„ë˜ì–´ìˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>Java</span></div><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CorsUtils</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isPreFlightRequest</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">OPTIONS</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
				request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">ORIGIN</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
				request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token class-name">HttpHeaders</span><span class="token punctuation">.</span><span class="token constant">ACCESS_CONTROL_REQUEST_METHOD</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ìŠ¤í”„ë§-CORS-ë””ë²„ê·¸"><a href="#ìŠ¤í”„ë§-CORS-ë””ë²„ê·¸" class="headerlink" title="ìŠ¤í”„ë§ CORS ë””ë²„ê·¸"></a>ìŠ¤í”„ë§ CORS ë””ë²„ê·¸</h4><p>CORS ìš”ì²­ì— ëŒ€í•œ ê²€ì¦ì€ CorsFilterì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë„ë¡ êµ¬í˜„ëœ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/cors/DefaultCorsProcessor.java">DefaultCorsProcessor</a>ì— ì˜í•´ ìˆ˜í–‰ëœë‹¤. CORS ìš”ì²­ì— ì˜í•´ ìœ„ë°°ë˜ëŠ” ìƒí™©ì— ëŒ€í•´ì„œ ì›ì¸ì„ ë¡œê·¸ë¡œ ì¶œë ¥í•´ë³´ë ¤ëŠ” ê²½ìš° DefaultCorsProcessorì— ëŒ€í•œ ë¡œê·¸ ë ˆë²¨ì„ TRACE ë˜ëŠ” DEBUGë¡œ ì§€ì •í•˜ë©´ ëœë‹¤. ê°œë°œ í™˜ê²½ì—ì„œëŠ” CorsFilter ë˜ëŠ” DefaultCorsProcessorì˜ ì½”ë“œ ë¼ì¸ì— ì¤‘ë‹¨ì ì„ ê±¸ì–´ì„œ í™•ì¸í•  ìˆ˜ ìˆê² ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë¡œê·¸ ë ˆë²¨ë¡œ ì²´í¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>application.yml</span></div><code class="language-yaml"><span class="token key atrule">logging.level</span><span class="token punctuation">:</span>
  <span class="token key atrule">org.springframework.web.cors.DefaultCorsProcessor</span><span class="token punctuation">:</span> TRACE</code></pre>

<p><img data-src="/images/posts/spring-cors/03.gif" alt="CORSì˜ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì„ ì´í•´í•œ ë°±ì—”ë“œ ê°œë°œì"></p>
<h4 id="ìŠ¤í”„ë§-MockMvcë¡œ-CORS-í…ŒìŠ¤íŠ¸"><a href="#ìŠ¤í”„ë§-MockMvcë¡œ-CORS-í…ŒìŠ¤íŠ¸" class="headerlink" title="ìŠ¤í”„ë§ MockMvcë¡œ CORS í…ŒìŠ¤íŠ¸"></a>ìŠ¤í”„ë§ MockMvcë¡œ CORS í…ŒìŠ¤íŠ¸</h4><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©ì¤‘ì´ë©° <strong>CorsConfiguration</strong> ì„¤ì •ì„ í•´ë‘ì—ˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ <strong>MockMvc</strong>ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Preflight request"</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token class-name">TestPreflightRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> allowedOrigins <span class="token operator">=</span> corsConfiguration<span class="token punctuation">.</span><span class="token function">getAllowedOrigins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>allowedOrigins <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            allowedOrigins <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> allowedMethods <span class="token operator">=</span> corsConfiguration<span class="token punctuation">.</span><span class="token function">getAllowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>allowedMethods <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            allowedMethods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Origin"</span><span class="token punctuation">,</span> allowedOrigins<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Request-Method"</span><span class="token punctuation">,</span> <span class="token string">"GET"</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stringValues</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> allowedOrigins<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Methods"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> allowedMethods<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andDo</span><span class="token punctuation">(</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="cURLë¡œ-í…ŒìŠ¤íŠ¸í•˜ëŠ”-ë°©ë²•"><a href="#cURLë¡œ-í…ŒìŠ¤íŠ¸í•˜ëŠ”-ë°©ë²•" class="headerlink" title="cURLë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•"></a>cURLë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•</h4><p>í¬ìŠ¤íŠ¸ë§¨ ë„êµ¬ë¡œ HTTP ìš”ì²­ì„ ìˆ˜í–‰í•œ ê²ƒì²˜ëŸ¼ cURLë¡œë„ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì„ ìˆ˜í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤. í¬ìŠ¤íŠ¸ë§¨ê³¼ëŠ” ë‹¤ë¥´ê²Œ OPTIONSë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•œë‹¤. DefaultCorsProcessorì— ì˜í•´ CORSì— ìœ„ë°°ëœ ìƒí™©ì´ ìˆë‹¤ë©´ <code>Invalid CORS request</code>ì´ë¼ëŠ” ì‘ë‹µê³¼ í•¨ê»˜ 403 ìƒíƒœ ì½”ë“œê°€ í™•ì¸ ë  ê²ƒì´ë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><div class="caption"><span>Windows Terminal</span></div><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo> curl <span class="token operator">-</span>X OPTIONS <span class="token string">'http://localhost:5000'</span> <span class="token operator">-</span>H <span class="token string">'Origin: http://localhost'</span> <span class="token operator">-</span>H <span class="token string">'Access-Control-Request-Method: GET'</span> <span class="token operator">-</span>v

<span class="token operator">*</span>   Trying 127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1:5000<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">*</span> Connected to localhost <span class="token punctuation">(</span>127<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1<span class="token punctuation">)</span> port 5000 <span class="token punctuation">(</span><span class="token comment">#0)</span>
> OPTIONS <span class="token operator">/</span> HTTP/1<span class="token punctuation">.</span>1
> Host: localhost:5000
> User-Agent: curl/8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1
> Accept: <span class="token operator">*</span><span class="token operator">/</span><span class="token operator">*</span>
> Origin: http:<span class="token operator">/</span><span class="token operator">/</span>localhost
> Access-Control-<span class="token function">Request-Method</span>: GET
>
&lt; HTTP/1<span class="token punctuation">.</span>1 403 Forbidden
&lt; Expires: 0
&lt; Cache-Control: no-cache<span class="token punctuation">,</span> no-store<span class="token punctuation">,</span> max-age=0<span class="token punctuation">,</span> must-revalidate
&lt; X-XSS-Protection: 0
&lt; Pragma: no-cache
&lt; X-Frame-Options: DENY
&lt; Date: Sat<span class="token punctuation">,</span> 22 Jul 2023 12:56:00 GMT
&lt; Connection: keep-alive
&lt; Vary: Origin
&lt; Vary: Access-Control-<span class="token function">Request-Method</span>
&lt; Vary: Access-Control-<span class="token function">Request-Headers</span>
&lt; X-Content-<span class="token function">Type</span><span class="token operator">-</span>Options: nosniff
&lt; Transfer-Encoding: chunked
&lt;
Invalid CORS request* Connection <span class="token comment">#0 to host localhost left intact</span></code></pre>

<h4 id="Postmanìœ¼ë¡œ-í…ŒìŠ¤íŠ¸í•˜ëŠ”-ë°©ë²•"><a href="#Postmanìœ¼ë¡œ-í…ŒìŠ¤íŠ¸í•˜ëŠ”-ë°©ë²•" class="headerlink" title="Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•"></a>Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•</h4><p>HTTP ìš”ì²­ì„ ìˆ˜í–‰í•´ë³¼ ìˆ˜ ìˆëŠ” í¬ìŠ¤íŠ¸ë§¨ì—ì„œ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” Origin í—¤ë”ë¥¼ í¬í•¨í•˜ë©´ ëœë‹¤. í¬ìŠ¤íŠ¸ë§¨ì—ì„œ ì•Œì•„ì„œ OPTIONSë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸í•´ë³¼ ìˆ˜ ìˆë‹¤.</p>
<p><img data-src="/images/posts/spring-cors/02.png"></p>
<p>ë§Œì•½, CORSëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì˜ì—­ì—ì„œ í•´ê²°í•´ì•¼í•  ë¬¸ì œë¼ê³  ìƒê°í•˜ê³  ìˆëŠ” ê°œë°œìê°€ ìˆë‹¤ë©´ CORSì— ëŒ€í•´ì„œ ë‹¤ì‹œ í•™ìŠµí•˜ê¸¸ ë°”ë€ë‹¤.<br>í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ CORSì˜ ê³ í†µì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆë„ë¡ ë°±ì—”ë“œ ê°œë°œìëŠ” ì±…ì„ì„ ë‹¤í•´ì•¼ í•  ê²ƒì´ë‹¤. </p>
]]></content>
      <tags>
        <tag>CORS</tag>
        <tag>Preflight Request</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring JDBC</title>
    <url>/spring-jdbc/</url>
    <content><![CDATA[<p>Spring Security OAuth2 í•™ìŠµì„ ìœ„í•œ ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ë©´ì„œ ì‚¬ìš©í•˜ê²Œë  ê° ëª¨ë“ˆì—ì„œ í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œ Spring JDBCë¥¼ ì‚¬ìš©í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° ì•¡ì„¸ìŠ¤ì— ëŒ€í•´ì„œëŠ” Mybatis ë˜ëŠ” JPA ì´ë¼ëŠ” ê¸°ìˆ ì„ ë„ì…í•˜ëŠ” ê²½ìš°ê°€ ë§ì„í…ë° ìŠ¤í”„ë§ JDBC ë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ë°ì´í„°ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ê°€ ê°€ëŠ¥í•˜ë©° Spring Session ì´ë‚˜ Spring Security ì—ì„œë„ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="Data-Access-with-JDBC"><a href="#Data-Access-with-JDBC" class="headerlink" title="Data Access with JDBC"></a>Data Access with JDBC</h2><p>Spring JDBCëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ë°©ë²•ì„ ì œê³µí•˜ë©° ìŠ¤í”„ë§ ì„¸ì…˜ì´ë‚˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ í•¨ê»˜ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ Spring JDBCê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì•„ë§ˆë„ ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì´ í•„ìˆ˜ì ì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ JDBC ëª¨ë“ˆì„ ë°˜ë“œì‹œ í¬í•¨í•˜ê³  ìˆì„ ê²ƒ ì…ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">implementation <span class="token string">'org.springframework.boot:spring-boot-starter-jdbc'</span></code></pre>

<h3 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” JdbcTemplateAutoConfigurationë¥¼ í†µí•´ì„œ JdbcTemplateì™€ NamedParameterJdbcTemplateë¥¼ ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°ìš”. JdbcTemplate ë¿ë§Œ ì•„ë‹ˆë¼ NamedParameterJdbcTemplateë¥¼ í•¨ê»˜ êµ¬ì„±í•˜ëŠ” ì´ìœ ëŠ” Spring Data JDBCì™€ ê°™ì€ ëª¨ë“ˆì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë¼ê³  ìƒê°ë©ë‹ˆë‹¤.</p>
<h3 id="JdbcUserDetailsManager"><a href="#JdbcUserDetailsManager" class="headerlink" title="JdbcUserDetailsManager"></a>JdbcUserDetailsManager</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ JdbcUserDetailsManagerëŠ” JDBC ê¸°ë°˜ì˜ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„ì„ ìœ„í•´ì„œ JdbcDaoSupportë¥¼ í™•ì¥í•˜ë©° ë‚´ë¶€ì ìœ¼ë¡œ JdbcTemplateê³¼ RowMapperë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="JdbcIndexedSessionRepository"><a href="#JdbcIndexedSessionRepository" class="headerlink" title="JdbcIndexedSessionRepository"></a>JdbcIndexedSessionRepository</h3><p>ìŠ¤í”„ë§ ì„¸ì…˜ì—ì„œì˜ JdbcHttpSessionConfigurationëŠ” JdbcTemplateë¥¼ í†µí•´ì„œ JdbcIndexedSessionRepositoryë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê²Œ ë©ë‹ˆë‹¤. JdbcIndexedSessionRepositoryëŠ” ë‚´ë¶€ì ìœ¼ë¡œ JdbcOperationsë¥¼ ì‚¬ìš©í•˜ì—¬ SQLë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ì„¸ì…˜ì— ëŒ€í•œ ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì €ì¥í• ë•Œ <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc-advanced-jdbc">JDBC Batch Operations</a>ë¥¼ í™œìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>JdbcTemplateëŠ” JdbcOperatrions êµ¬í˜„ì²´ì…ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="Stored-Function-with-JDBC"><a href="#Stored-Function-with-JDBC" class="headerlink" title="Stored Function with JDBC"></a>Stored Function with JDBC</h2><p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” Mybatis ë˜ëŠ” JPAë¥¼ ë„ì…í•˜ì§€ ì•Šê³  ìŠ¤í† ì–´ë“œ í•¨ìˆ˜(í”„ë¡œì‹œì €ì™€ ë¹„ìŠ·í•œ)ë¥¼ ì‘ì„±í•´ë†“ê³  ìŠ¤í”„ë§ JDBCë¥¼ í†µí•´ì„œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë ˆê±°ì‹œ ì‹œìŠ¤í…œì„ ê²½í—˜í•˜ì§€ ì•Šì•˜ê±°ë‚˜ Mybatis ë˜ëŠ” JPAë¼ëŠ” ê¸°ìˆ ë§Œì„ ì ‘í•œ ê°œë°œìë“¤ì€ ê¶ê¸ˆí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ê¸°ë„ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìš°ì„  ì•„ë˜ì™€ ê°™ì€ í•¨ìˆ˜ê°€ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì •ì˜ë˜ì–´ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> users$find_by_username<span class="token punctuation">(</span>v_username <span class="token keyword">VARCHAR</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> REFCURSOR <span class="token keyword">AS</span>
$$
<span class="token keyword">DECLARE</span>
    rtn_cursor REFCURSOR :<span class="token operator">=</span> <span class="token string">'rtn_cursor'</span><span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">OPEN</span> rtn_cursor <span class="token keyword">FOR</span>
        <span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> enabled <span class="token keyword">from</span> users <span class="token keyword">where</span> username <span class="token operator">=</span> v_username<span class="token punctuation">;</span>
    <span class="token keyword">RETURN</span> rtn_cursor<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
$$ <span class="token keyword">LANGUAGE</span> plpgsql<span class="token punctuation">;</span>

<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> users$find_by_username<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">FETCH</span> <span class="token keyword">ALL</span> <span class="token operator">IN</span> <span class="token string">"rtn_cursor"</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>

<h3 id="StoredProcedure"><a href="#StoredProcedure" class="headerlink" title="StoredProcedure"></a>StoredProcedure</h3><p>ìŠ¤í”„ë§ JDBCì˜ GenericStoredProcedureëŠ” RDBMSì—ì„œ ì§€ì›í•˜ëŠ” ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ëœ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ìŠ¤í† ì–´ë“œ í•¨ìˆ˜ëª…ì„ ì§€ì •í•˜ì—¬ íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì „ë‹¬í•˜ë©´ í”„ë¡œì‹œì € í˜¸ì¶œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using GenericStoredProcedure"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testCallFunctionWithStoredProcedure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>
    jdbcTemplate<span class="token punctuation">.</span><span class="token function">setResultsMapCaseInsensitive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">GenericStoredProcedure</span> storedProcedure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericStoredProcedure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    storedProcedure<span class="token punctuation">.</span><span class="token function">setJdbcTemplate</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    storedProcedure<span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    storedProcedure<span class="token punctuation">.</span><span class="token function">setSql</span><span class="token punctuation">(</span>functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    storedProcedure<span class="token punctuation">.</span><span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span><span class="token constant">REF_CURSOR</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    storedProcedure<span class="token punctuation">.</span><span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span><span class="token constant">VARCHAR</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> inParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    inParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> results <span class="token operator">=</span> storedProcedure<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>inParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>results<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> cursors <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> results<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> cursor <span class="token operator">:</span> cursors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="SimpleJdbcXXXX"><a href="#SimpleJdbcXXXX" class="headerlink" title="SimpleJdbcXXXX"></a>SimpleJdbcXXXX</h3><p>SimpleJdbcInsertì™€ SimpleJdbcCallì€ JdbcTemplateë¥¼ ì‚¬ìš©í•˜ì—¬ ëª‡ê°€ì§€ ìƒí™©ì— ëŒ€í•´ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•œë²ˆì— ë§ì€ ìƒì„± ì‘ì—…ì´ í•„ìš”í•œ ê²½ìš°ì— SimpleJdbcInsertë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €(Stored Procedure) ë˜ëŠ” ìŠ¤í† ì–´ë“œ í•¨ìˆ˜(Stored Function)ë¥¼ í˜¸ì¶œí•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ë„ SimpleJdbcCallì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using SimpleJdbcCall"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testCallFunctionWithSimpleJdbcCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>

    <span class="token class-name">MapSqlParameterSource</span> sqlParameterSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapSqlParameterSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlParameterSource<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleJdbcCall</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withFunctionName</span><span class="token punctuation">(</span>functionName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withoutProcedureColumnMetaDataAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">declareParameters</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"v_username"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span><span class="token constant">VARCHAR</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">returningResultSet</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sqlParameterSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"rtn_cursor"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>GenericStoredProcedureì™€ ë¹„êµí•´ì„œ ì¡°ê¸ˆì€ ì½”ë“œê°€ ê°„ê²°í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="JdbcTemplate-1"><a href="#JdbcTemplate-1" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h3><p>ìŠ¤í”„ë§ JDBCì—ì„œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë”ë¼ë„ ìŠ¤í† ì–´ë“œ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. JdbcTemplateì—ì„œ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¨ í›„ prepareCallì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ í˜¸ì¶œí•œ ê²°ê³¼ë¥¼ RowMapperë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">"Call stored function using connection"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testCallFunctionWithConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> functionName <span class="token operator">=</span> <span class="token string">"users$find_by_username"</span><span class="token punctuation">;</span>

    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> connection <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">CallableStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareCall</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"&#123;call %s(?)&#125;"</span><span class="token punctuation">,</span> functionName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">PgResultSet</span> pgResultSet <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PgResultSet</span><span class="token punctuation">)</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">RowMapperResultSetExtractor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> extractor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowMapperResultSetExtractor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ColumnMapRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"&#123;&#125;"</span><span class="token punctuation">,</span> extractor<span class="token punctuation">.</span><span class="token function">extractData</span><span class="token punctuation">(</span>pgResultSet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>DataClassRowMapper ë˜ëŠ” BeanPropertyRowMapperë¥¼ ì‚¬ìš©í•´ì„œ ë” ë²”ìš©ì ì¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p><a href="https://qr.ae/pvkBiH">ì €ì¥ í”„ë¡œì‹œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì¥ì </a>ë„ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì €ì¥ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œê³  ìˆëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. Spring JDBCì— ëŒ€í•´ì„œ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— ì†Œê°œí•˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ JPA ê¸°ìˆ  ìŠ¤í™ì—ì„œë„ NamedStoredProcedureQueryì™€ ê°™ì´ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc">Spring Docs - Data Access with JDBC</a></li>
<li><a href="https://www.baeldung.com/jdbc-batch-processing">Batch Processing in JDBC</a></li>
</ul>
]]></content>
      <tags>
        <tag>JDBC</tag>
        <tag>RowMapper</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë°ì´í„° JDBC</title>
    <url>/spring-security-data-jdbc-integration/</url>
    <content><![CDATA[<blockquote>
<p>ì „ì²´ ì˜ˆì œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/spring-boot-security/">kdevkr&#x2F;spring-boot-security</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<p><a href="https://docs.spring.io/spring-security/reference/servlet/integrations/data.html">Spring Data Integration</a>ë¥¼ ì°¸ê³ í•˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ìŠ¤í”„ë§ ë°ì´í„° ëª¨ë“ˆì„ í†µí•©í•  ìˆ˜ ìˆë‹¤.<br>ìš°ì„  ì•„ë˜ì™€ ê°™ì´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— <code>org.springframework.security:spring-security-data</code> ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë„ë¡ í•˜ì.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-data-jdbc'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-jdbc'</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-security'</span>
    implementation <span class="token string">'org.springframework.security:spring-security-data'</span>
<span class="token punctuation">&#125;</span></code></pre>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">SecurityEvaluationContextExtension</span> <span class="token function">securityEvaluationContextExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SecurityEvaluationContextExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>êµ¬ì„± í´ë˜ìŠ¤ì—ì„œ <strong>SecurityEvaluationContextExtension</strong>ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ @PreAuthorizeì™€ ê°™ì€ ë©”ì†Œë“œ ê¸°ë°˜ í‘œí˜„ì‹ê³¼ ë¹„ìŠ·í•˜ê²Œ <strong>@Query</strong> ë‚´ì—ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•œ SpELì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê³µì‹ ë¬¸ì„œì™€ <a href="https://github.com/spring-projects/spring-security-samples/tree/main/servlet/java-configuration/data">Spring Dataì— ëŒ€í•œ ì˜ˆì œ ì½”ë“œ</a>ì™€ ê°™ì´ ì‹œë„í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ <code>ì˜¤ë¥˜</code>ê°€ ë°œìƒí•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span>InvalidDataAccessApiUsageException</span><span class="token operator">:</span> <span class="token constant">SQL</span> <span class="token punctuation">[</span><span class="token constant">SELECT</span> u<span class="token punctuation">.</span>username <span class="token constant">FROM</span> users u where u<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token operator">?</span>__$synthetic$__1<span class="token punctuation">]</span><span class="token operator">:</span> given <span class="token number">1</span> parameters but expected <span class="token number">0</span></code></pre>

<p>ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” Spring Data JDBCëŠ” ë‚´ë¶€ì ìœ¼ë¡œ <strong>N</strong>amedParameterJdbcTemplate**ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— <code>?</code>ì™€ ê°™ì€ JPQL ë˜ëŠ” Native ì¿¼ë¦¬ ë°©ì‹ê³¼ëŠ” ì°¨ì´ê°€ ìˆìœ¼ë¯€ë¡œ <code>?</code>ì´ ì•„ë‹Œ <code>:</code>ë¡œ í‘œí˜„í•´ì•¼í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT u.username FROM users u where u.username = :#&#123; principal?.username &#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

]]></content>
      <tags>
        <tag>Spring Security</tag>
        <tag>Spring Data JDBC</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Session</title>
    <url>/spring-session/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì€ <a href="https://github.com/kdevkr/mambo-box/blob/main/errors/2022-11-30.md">ë ˆë””ìŠ¤ ê´€ë ¨ ê²°í•¨</a>ì„ ê²½í—˜í•œ ê²ƒì„ í† ëŒ€ë¡œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ë™ì‘ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‘ì„±í•œ ê²ƒ ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ë§ì€ ìë°” ê°œë°œìê°€ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë³„ë‹¤ë¥¸ ì½”ë“œ êµ¬í˜„ ì—†ì´ë„ ì—¬ëŸ¬ ê°œë°œìë“¤ì— ì˜í•´ ì‘ì„±ë˜ì–´ì§„ ë¡œì§ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ì„œ ì‰½ê³  ë¹ ë¥´ê²Œ ì›í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë™ì‘ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ì‹œí‚¤ê¸° ìœ„í•œ ëª©ì ì´ í¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìë°” ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì–¸ì–´ì˜ í”„ë ˆì„ì›Œí¬ì—ì„œë„ êµ¬í˜„ëœ ì½”ë“œë“¤ì„ ì „ë¶€ í™•ì¸í•˜ê³  ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì„ ê²½ìš°ê°€ ë§ì„í…ë°ìš”. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ êµ¬í˜„ ë²”ìœ„ê°€ ìƒë‹¹íˆ ë§ë‹¤ë³´ë‹ˆ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ê°œë… í˜¹ì€ ë™ì‘ì— ëŒ€í•´ì„œ ëŒ€ì¶© ì´í•´í•˜ê³  ë„˜ì–´ê°€ê±°ë‚˜ ì•„ëŠ” ì„ ì—ì„œ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤.</p>
<p>ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ì˜í•œ ê²°í•¨ì„ ë§Œë“¤ì–´ë‚¸ ì´ìœ ë„ RequestContextHolderë¥¼ í†µí•´ì„œ ìŠ¤ë ˆë“œ ë¡œì»¬ì— ì €ì¥ëœ ìš”ì²­ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê³  RequestContextHolderë¡œ ë¶€í„° ê°€ì ¸ì˜¨ RequestAttributesì— ì„¸ì…˜ ì•„ì´ë””ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ê°€ ìˆê¸°ì— ì‚¬ìš©í–ˆë˜ ê²ƒìœ¼ë¡œë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤. ê°œì¸ì ì¸ ê²½í—˜ìœ¼ë¡œ ë³¼ë•ŒëŠ” ìŠ¤í”„ë§ ì„¸ì…˜ê³¼ ë ˆë””ìŠ¤ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœí•˜ê²Œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±ë§Œ ì¶”ê°€í•˜ê³  ë ˆë””ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì •ë³´ ê·¸ë¦¬ê³  ìŠ¤í”„ë§ ì„¸ì…˜ì„ í™œì„±í™”í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ëŠ” ê²ƒ ë¿ì´ë¯€ë¡œ ë‚´ì¬ëœ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì œëŒ€ë¡œ í™•ì¸í•  í•„ìš”ì„±ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p>
<h4 id="TCPì™€-HTTPì˜-ì„¸ì…˜ì€-ë‹¤ë¥´ë‹¤"><a href="#TCPì™€-HTTPì˜-ì„¸ì…˜ì€-ë‹¤ë¥´ë‹¤" class="headerlink" title="TCPì™€ HTTPì˜ ì„¸ì…˜ì€ ë‹¤ë¥´ë‹¤."></a>TCPì™€ HTTPì˜ ì„¸ì…˜ì€ ë‹¤ë¥´ë‹¤.</h4><blockquote>
<p>Spring Session provides transparent integration with HttpSession. This means that developers can switch the HttpSession implementation out with an implementation that is backed by Spring Session.</p>
</blockquote>
<p>TCPì—ì„œì˜ ì„¸ì…˜ì€ ì—°ê²°ì„ ì˜ë¯¸í•˜ì§€ë§Œ HTTPì—ì„œì˜ ì„¸ì…˜ì€ ì—°ê²°ì— ëŒ€í•œ ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì„¸ì…˜ì€ TCP ë ˆë²¨ì´ ì•„ë‹Œ <a href="https://docs.spring.io/spring-session/reference/http-session.html">HTTP ì„¸ì…˜</a>ì— ëŒ€í•œ í†µí•©ì„ ì§€ì›í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ì— ì„¸ì…˜ì„ ì €ì¥í•˜ê²Œ ë˜ëŠ” ê²ƒì„ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•œë‹¤ê±°ë‚˜ ë ˆë””ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ì„¸ì…˜ ì €ì¥ì†Œë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ëŠ” ê²ƒë„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="WASëŠ”-ì„¸ì…˜-ê´€ë¦¬ë¥¼-ì§€ì›í•œë‹¤"><a href="#WASëŠ”-ì„¸ì…˜-ê´€ë¦¬ë¥¼-ì§€ì›í•œë‹¤" class="headerlink" title="WASëŠ” ì„¸ì…˜ ê´€ë¦¬ë¥¼ ì§€ì›í•œë‹¤."></a>WASëŠ” ì„¸ì…˜ ê´€ë¦¬ë¥¼ ì§€ì›í•œë‹¤.</h4><p>í†°ìº£ì´ë‚˜ ì–¸ë”í† ìš°ì™€ ê°™ì€ WASì—ì„œë„ ìì²´ì ìœ¼ë¡œ <a href="https://github.com/undertow-io/undertow/blob/master/core/src/main/java/io/undertow/server/session/Session.java">ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ ì„¸ì…˜</a>ì„ ì§€ì›í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì„¸ì…˜ì—ì„œëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(WAS)ê°€ ìì²´ì ì¸ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šë„ë¡ <a href="https://github.com/spring-projects/spring-session/blob/main/spring-session-core/src/main/java/org/springframework/session/web/context/AbstractHttpSessionApplicationInitializer.java">AbstractHttpSessionApplicationInitializer</a>ë¥¼ í†µí•´ springSessionRepositoryFilter ì´ë¼ëŠ” ì´ë¦„ì˜ íŠ¹ìˆ˜í•œ í•„í„°ë¥¼ ë“±ë¡í•˜ì—¬ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ ì²˜ë¦¬ë˜ë„ë¡ ìš”êµ¬í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Fortunately, both HttpSession and HttpServletRequest (the API for obtaining an HttpSession) are both interfaces. This means that we can provide our own implementations for each of these APIs.<br>This highlights why it is important that Spring Sessionâ€™s SessionRepositoryFilter be placed before anything that interacts with the HttpSession.</p>
</blockquote>
<h4 id="ìŠ¤í”„ë§-ì„¸ì…˜ì€-ìì²´-êµ¬í˜„-ì„¸ì…˜ìœ¼ë¡œ-ì „í™˜í•œë‹¤"><a href="#ìŠ¤í”„ë§-ì„¸ì…˜ì€-ìì²´-êµ¬í˜„-ì„¸ì…˜ìœ¼ë¡œ-ì „í™˜í•œë‹¤" class="headerlink" title="ìŠ¤í”„ë§ ì„¸ì…˜ì€ ìì²´ êµ¬í˜„ ì„¸ì…˜ìœ¼ë¡œ ì „í™˜í•œë‹¤."></a>ìŠ¤í”„ë§ ì„¸ì…˜ì€ ìì²´ êµ¬í˜„ ì„¸ì…˜ìœ¼ë¡œ ì „í™˜í•œë‹¤.</h4><p>SessionRepositoryFilterê°€ ìˆ˜í–‰í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì€ ìë°” ì„œë¸”ë¦¿ ìŠ¤í™ì˜ HTTP ì„¸ì…˜ì„ ìì²´ì ì¸ ì„¸ì…˜ í´ë˜ìŠ¤ë¡œ ì „í™˜í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚´ë¶€ì ìœ¼ë¡œ HTTP ì„¸ì…˜ê³¼ ìŠ¤í”„ë§ ì„¸ì…˜ì„ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ ì¿ í‚¤ ê¸°ë°˜ì˜ HttpSessionIdResolverë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆì£ . ê²°êµ­ SessionRepository êµ¬í˜„ì²´ì— ë”°ë¼ JDBC ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ”ì§€ ë ˆë””ìŠ¤ì— ì €ì¥í•˜ëŠ”ì§€ êµ¬ë¶„ë˜ì–´ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Switches the HttpSession implementation to be backed by a Session. The SessionRepositoryFilter wraps the HttpServletRequest and overrides the methods to get an HttpSession to be backed by a Session returned by the SessionRepository.</p>
</blockquote>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">SESSION_REPOSITORY_ATTR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sessionRepository<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SessionRepositoryRequestWrapper</span> wrappedRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionRepositoryRequestWrapper</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SessionRepositoryResponseWrapper</span> wrappedResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionRepositoryResponseWrapper</span><span class="token punctuation">(</span>wrappedRequest<span class="token punctuation">,</span>
            response<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>wrappedRequest<span class="token punctuation">,</span> wrappedResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
        wrappedRequest<span class="token punctuation">.</span><span class="token function">commitSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>SessionRepositoryFilterì˜ ìœ„ êµ¬í˜„ì²˜ëŸ¼ ê°€ì¥ ë¨¼ì € ì²˜ë¦¬ë¨ìœ¼ë¡œì¨ ìš”ì²­ ìŠ¤ë ˆë“œ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ì–´ì§„ ì„¸ì…˜ì— ëŒ€í•´ì„œëŠ” ì‘ë‹µì´ ì™„ë£Œëœ ì´í›„ì— ìµœì¢…ì ìœ¼ë¡œ ë°˜ì˜ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê²½í—˜í–ˆë˜ ë ˆë””ìŠ¤ ê²°í•¨ì—ì„œë„ ì„œë¹„ìŠ¤ í˜¹ì€ í¼ì‹œìŠ¤í„´ìŠ¤ ë ˆì´ì–´ì—ì„œ ì„¸ì…˜ì´ ìƒì„±ë˜ë”ë¼ë„ ì„¸ì…˜ ì •ë³´ë¥¼ ë ˆë””ìŠ¤ì— ì €ì¥í•˜ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ë ˆë””ìŠ¤ì— ì €ì¥ë˜ëŠ” ìì„¸í•œ ë‚´ìš©ì€ ìŠ¤í”„ë§ ì„¸ì…˜ ê³µì‹ ë¬¸ì„œì˜ <a href="https://docs.spring.io/spring-session/docs/2.4.6/reference/html5/#api-redisindexedsessionrepository-storage">Storage Details</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="ìŠ¤í”„ë§-ì„¸ì…˜-ë ˆë””ìŠ¤ëŠ”-ìŠ¤ì¼€ì¤„ë§ì„-í†µí•´-ë§Œë£Œëœ-í‚¤ë¥¼-ì‚­ì œí•œë‹¤"><a href="#ìŠ¤í”„ë§-ì„¸ì…˜-ë ˆë””ìŠ¤ëŠ”-ìŠ¤ì¼€ì¤„ë§ì„-í†µí•´-ë§Œë£Œëœ-í‚¤ë¥¼-ì‚­ì œí•œë‹¤" class="headerlink" title="ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ëŠ” ìŠ¤ì¼€ì¤„ë§ì„ í†µí•´ ë§Œë£Œëœ í‚¤ë¥¼ ì‚­ì œí•œë‹¤."></a>ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ëŠ” ìŠ¤ì¼€ì¤„ë§ì„ í†µí•´ ë§Œë£Œëœ í‚¤ë¥¼ ì‚­ì œí•œë‹¤.</h4><p>SessionCleanupConfigurationì—ì„œ RedisSessionExpirationPolicyì˜ cleanExpiredSessions í•¨ìˆ˜ë¥¼ ìŠ¤ì¼€ì¤„ëŸ¬ì— ë“±ë¡í•˜ì—¬ ìŠ¤í”„ë§ì—ì„œ ìì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ìŠ¤ì¼€ì¤„ë§ì— ì˜í•´ ë§Œë£Œëœ í‚¤ê°€ ì‚­ì œë©ë‹ˆë‹¤. ë‹¤ë§Œ, ë ˆë””ìŠ¤ì˜ ë§Œë£Œ ì´ë²¤íŠ¸ì˜ íƒ€ì´ë° ë¬¸ì œë¡œ ì¸í•´ì„œ TTLì´ ë§Œë£Œëœ ì´í›„ì— ë ˆë””ìŠ¤ê°€ ì•Œì•„ì„œ ì‚­ì œí•˜ë„ë¡ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì—ì„œëŠ” ëª…ì‹œì ìœ¼ë¡œ í‚¤ë¥¼ ì‚­ì œí•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ ì¡°íšŒ(ì•¡ì„¸ìŠ¤)í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>We do not explicitly delete the keys, since, in some instances, there may be a race condition that incorrectly identifies a key as expired when it is not. Short of using distributed locks (which would kill our performance), there is no way to ensure the consistency of the expiration mapping. By simply accessing the key, we ensure that the key is only removed if the TTL on that key is expired.</p>
</blockquote>
]]></content>
      <tags>
        <tag>Session</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>ìŠ¤í”„ë§ ë²¨ë¦¬ë°ì´ì…˜</title>
    <url>/spring-validation/</url>
    <content><![CDATA[<h4 id="ìì¹´ë¥´íƒ€-ë²¨ë¦¬ë°ì´ì…˜"><a href="#ìì¹´ë¥´íƒ€-ë²¨ë¦¬ë°ì´ì…˜" class="headerlink" title="ìì¹´ë¥´íƒ€ ë²¨ë¦¬ë°ì´ì…˜"></a>ìì¹´ë¥´íƒ€ ë²¨ë¦¬ë°ì´ì…˜</h4><p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë²¨ë¦¬ë°ì´ì…˜ì€ spring-boot-starter-validation ëª¨ë“ˆì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©° <a href="https://beanvalidation.org/">Jakarta Bean Validation</a>ì„ ë”°ë¥´ëŠ” <a href="https://github.com/hibernate/hibernate-validator/">Hibhernate Validator</a>ë¥¼ ì˜ì¡´í•˜ê³  ìˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì— ì˜í•œ ìë™ êµ¬ì„±ì€ ValidationAutoConfigurationìœ¼ë¡œ ìˆ˜í–‰í•˜ë©° LocalValidatorFactoryBeanë¥¼ ê¸°ë³¸ Validator ë¹ˆìœ¼ë¡œì¨ ë“±ë¡í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">dependencies <span class="token punctuation">&#123;</span>
    implementation <span class="token string">'org.springframework.boot:spring-boot-starter-validation'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="LocalValidatorFactoryBean"><a href="#LocalValidatorFactoryBean" class="headerlink" title="LocalValidatorFactoryBean"></a>LocalValidatorFactoryBean</h4><p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì— ì¡´ì¬í•˜ëŠ” ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë³´ê°„ì„ ì²˜ë¦¬í•˜ëŠ” MessageSourceMessageInterpolatorê°€ ì‚¬ìš©ë˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆë‹¤. <a href="https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/validation/MessageInterpolatorFactory.java">MessageInterpolatorFactory</a>ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ì‚´í´ë³´ë©´ ë©”ì‹œì§€ ì†ŒìŠ¤ê°€ ì—†ë‹¤ë©´ í•˜ì´ë²„ë„¤ì´íŠ¸ ë²¨ë¦¬ë°ì´í„°ì˜ ResourceBundleMessageInterpolatorê°€ ì‚¬ìš©ë˜ë‚˜ ìŠ¤í”„ë§ ë¶€íŠ¸ì— ì˜í•´ ë©”ì‹œì§€ ì†ŒìŠ¤ ìì²´ë„ ìë™ êµ¬ì„±ë˜ë¯€ë¡œ ê²°êµ­ MessageSourceMessageInterpolatorê°€ ì‚¬ìš©ëœë‹¤ê³  ì¸ì§€í•˜ë©´ ëœë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Role</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span><span class="token punctuation">.</span><span class="token constant">ROLE_INFRASTRUCTURE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">Validator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">LocalValidatorFactoryBean</span> <span class="token function">defaultValidator</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
        <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ValidationConfigurationCustomizer</span><span class="token punctuation">></span></span> customizers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">LocalValidatorFactoryBean</span> factoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocalValidatorFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    factoryBean<span class="token punctuation">.</span><span class="token function">setConfigurationInitializer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span> <span class="token operator">-></span> customizers<span class="token punctuation">.</span><span class="token function">orderedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>customizer<span class="token punctuation">)</span> <span class="token operator">-></span> customizer<span class="token punctuation">.</span><span class="token function">customize</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MessageInterpolatorFactory</span> interpolatorFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageInterpolatorFactory</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    factoryBean<span class="token punctuation">.</span><span class="token function">setMessageInterpolator</span><span class="token punctuation">(</span>interpolatorFactory<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> factoryBean<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìµœì¢…ì ìœ¼ë¡œëŠ” MessageSourceMessageInterpolatorê°€ <a href="https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/validation/beanvalidation/LocaleContextMessageInterpolator.java">LocaleContextMessageInterpolator</a>ë¡œ ë˜í•‘ë˜ë©° LocaleContextHolder.getLocale()ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤í”„ë§ ì›¹ ìš”ì²­ì— ì˜í•œ ìŠ¤ë ˆë“œì— ëŒ€í•´ ë¡œì¼€ì¼ ê¸°ë°˜ìœ¼ë¡œ ë©”ì‹œì§€ ë³´ê°„ì´ ì²˜ë¦¬ë˜ë„ë¡ ì§€ì›í•œë‹¤. </p>
<h4 id="ê¸°ë³¸-ë²¨ë¦¬ë°ì´ì…˜-ë©”ì‹œì§€"><a href="#ê¸°ë³¸-ë²¨ë¦¬ë°ì´ì…˜-ë©”ì‹œì§€" class="headerlink" title="ê¸°ë³¸ ë²¨ë¦¬ë°ì´ì…˜ ë©”ì‹œì§€"></a>ê¸°ë³¸ ë²¨ë¦¬ë°ì´ì…˜ ë©”ì‹œì§€</h4><p>í•˜ì´ë²„ë„¤ì´íŠ¸ ë²¨ë¦¬ë°ì´í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ì—ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ëœ <a href="https://github.com/hibernate/hibernate-validator/tree/main/engine/src/main/resources/org/hibernate/validator">ValidationMessages</a>ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ë”°ë¼ì„œ, @NotEmpty ë˜ëŠ” @Length, @Email ê³¼ ê°™ì€ ìì¹´ë¥´íƒ€ ë²¨ë¦¬ë°ì´ì…˜ì— ì •ì˜ë˜ì–´ìˆëŠ” Constraintsì— ëŒ€í•´ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë©”ì‹œì§€ ë³´ê°„ìœ¼ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆë‹¤.</p>
<p><img data-src="/images/posts/spring-validation/hibernate-validator-01.png" alt="org.hibernate.validator.ValidationMessages"></p>
<h4 id="ìœ íš¨ì„±-ê²€ì‚¬"><a href="#ìœ íš¨ì„±-ê²€ì‚¬" class="headerlink" title="ìœ íš¨ì„± ê²€ì‚¬"></a>ìœ íš¨ì„± ê²€ì‚¬</h4><p><a href="https://meetup.toast.com/posts/223">Validation ì–´ë””ê¹Œì§€ í•´ë´¤ë‹ˆ?</a>ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ìì¹´ë¥´íƒ€ ë²¨ë¦¬ë°ì´ì…˜ì˜ íŒ©í† ë¦¬ í•¨ìˆ˜ë¥¼ í†µí•´ ê°„ë‹¨í•˜ê²Œ ë²¨ë¦¬ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ìë°” ë¹ˆ í´ë˜ìŠ¤ì— ì €ì¥ëœ ì •ë³´ê°€ ì˜¬ë°”ë¥¸ì§€ í•„ë“œ ê²€ì¦ì„ ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ìë™ êµ¬ì„±ë˜ëŠ” LocalValidatorFactoryBeanë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginService</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token class-name">Account<span class="token punctuation">.</span>Login</span> login<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Validator</span> validator <span class="token operator">=</span> <span class="token class-name">Validation</span><span class="token punctuation">.</span><span class="token function">buildDefaultValidatorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConstraintViolation</span><span class="token punctuation">&lt;</span><span class="token class-name">Account<span class="token punctuation">.</span>Login</span><span class="token punctuation">></span><span class="token punctuation">></span></span> constraintViolations <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span>login<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> constraintViolations<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ì‚¬ìš©ì-ì •ì˜-ë©”ì‹œì§€-ì œì•½ì‚¬í•­"><a href="#ì‚¬ìš©ì-ì •ì˜-ë©”ì‹œì§€-ì œì•½ì‚¬í•­" class="headerlink" title="ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ ì œì•½ì‚¬í•­"></a>ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ ì œì•½ì‚¬í•­</h4><p>ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ì— ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ë¥¼ ì§€ì •í•˜ë”ë¼ë„ ë©”ì‹œì§€ íŒ¨í„´ì—ì„œ {value}ì™€ ê°™ì€ íŒŒë¼ë¯¸í„° í‘œí˜„ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ ì–´ë–¤ ê°’ì— ëŒ€í•œ ê¸¸ì´ë¥¼ ì œí•œí•œë‹¤ê³  ê°€ì •í•˜ì—¬ @Min ì–´ë…¸í…Œì´ì…˜ì„ ë¶€ì—¬í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>messages</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.validation.constraints.Min.message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ko_KR</span><span class="token punctuation">></span></span><span class="token cdata">&lt;![CDATA[(ì‚¬ìš©ì ì •ì˜) &#123;value&#125; ë³´ë‹¤ ê°™ê±°ë‚˜ ì»¤ì•¼í•©ë‹ˆë‹¤]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ko_KR</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>en_US</span><span class="token punctuation">></span></span><span class="token cdata">&lt;![CDATA[(Custom) must be greater than or equal to &#123;value&#125;]]></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>en_US</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>messages</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-none"><code class="language-none">org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.validation.ValidationException: HV000149: An exception occurred during message interpolation
...
Caused by: java.lang.IllegalArgumentException: can&#39;t parse argument number: value
	at java.base&#x2F;java.text.MessageFormat.makeFormat(MessageFormat.java:1451) ~[na:na]
	at java.base&#x2F;java.text.MessageFormat.applyPattern(MessageFormat.java:491) ~[na:na]
	at java.base&#x2F;java.text.MessageFormat.&lt;init&gt;(MessageFormat.java:390) ~[na:na]
...
Caused by: java.lang.NumberFormatException: For input string: &quot;value&quot;
	at java.base&#x2F;java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:na]
	at java.base&#x2F;java.lang.Integer.parseInt(Integer.java:652) ~[na:na]
	at java.base&#x2F;java.lang.Integer.parseInt(Integer.java:770) ~[na:na]
	at java.base&#x2F;java.text.MessageFormat.makeFormat(MessageFormat.java:1449) ~[na:na]</code></pre>

<p>ì´ëŸ¬í•œ íŒŒë¼ë¯¸í„° í‘œí˜„ì€ Hibernate Validatorì—ì„œ ì§€ì›í•˜ëŠ” í‘œí˜„ì‹ì´ë¯€ë¡œ MessageFormatìœ¼ë¡œ ì§€ì›í•˜ëŠ” í‘œí˜„ì‹ê³¼ëŠ” ë‹¤ë¥´ë‹¤. MessageFormatëŠ” {0}, {1} ì´ë ‡ê²Œ ìˆ«ì ê¸°ë°˜ì˜ í‘œí˜„ì‹ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í‘œí˜„ì‹ ì œì•½ì´ ë°œìƒí•œë‹¤. ì•„ì‰¬ìš´ ë¶€ë¶„ì´ì§€ë§Œ ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ì—ì„œ íŒŒë¼ë¯¸í„° í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ì•¼í•œë‹¤ë©´ ValidationMessages ë¦¬ì†ŒìŠ¤ ë²ˆë“¤ì„ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— ì¬ì •ì˜í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ì„ ê²ƒ ê°™ë‹¤.</p>
]]></content>
      <tags>
        <tag>Jakarta Bean Validation</tag>
        <tag>Hibernate Validator</tag>
      </tags>
  </entry>
  <entry>
    <title>SSH í„°ë„ë§</title>
    <url>/ssh-tunneling/</url>
    <content><![CDATA[<p>ê¸°ë³¸ì ìœ¼ë¡œëŠ” ìš´ì˜ í™˜ê²½ì˜ Amazon Aurora PostgreSQLì—ëŠ” ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜, ìŠ¤í…Œì´ì§•ì´ë‚˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì›ì¸ ê²€í† ë¥¼ ìœ„í•´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ë””ë²„ê·¸í•´ì•¼í•  í•„ìš”ì„±ì´ ìš”êµ¬ë˜ê¸°ë„ í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ë„ë¡ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•œë‹¤. ë”°ë¼ì„œ, ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” í¼ë¸”ë¦­ ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ëŠ” ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¥¼ í†µí•´ Amazon Aurora PostgreSQLì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜¸ìŠ¤íŠ¸ë¡œ ì´ë™í•œ í›„ ì ‘ê·¼í•˜ê²Œ ëœë‹¤.</p>
<p><img data-src="/images/posts/ssh-tunneling/01.png"></p>
<p>ì°½ì²œí–¥ë¡œë‹˜ì´ ì‘ì„±í•´ë‘ì‹  <a href="https://jojoldu.tistory.com/623">DataGrip ì—ì„œ SSH í„°ë„ë§ìœ¼ë¡œ DB ì ‘ê·¼í•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ë©´ SSH Configurationì„ ì„¤ì •í•´ë‘ê³  ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹œ SSH Tunnel ì„ êµ¬ì„±í•˜ì—¬ RDS ì—”ë“œí¬ì¸íŠ¸ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. ì´ì™€ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ SSH í„°ë„ë§ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë‚˜ ë°ì´í„° ê·¸ë¦¬ê³  SQLì„ ìˆ˜í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ë°ì´í„°ë² ì´ìŠ¤ ë„êµ¬ë¡œì¨ ì—°ê²°í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ SSH í„°ë„ë§ì„ ìˆ˜í–‰í•´ì•¼í•œë‹¤.</p>
<p>íšŒì‚¬ì—ì„œëŠ” ìƒìš© SSH í´ë¼ì´ì–¸íŠ¸ì¸ SecureCRTë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ì—°ê²° ì„¸ì…˜ì„ ìƒì„±í•´ë†“ê³  Amazon Aurora PostgreSQLì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” í˜¸ìŠ¤íŠ¸ë¡œ ì—°ê²°í•˜ê¸° ìœ„í•´ <a href="https://documentation.help/SecureCRT/GO_Firewall.htm">Firewall</a>ì„ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ ì„¸ì…˜ìœ¼ë¡œ ì„ íƒí•  ìˆ˜ ìˆë‹¤. </p>
<p><img data-src="/images/posts/ssh-tunneling/02.png"></p>
<p>ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ì„¸ì…˜ì€ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¥¼ Firewallë¡œì¨ ì„ íƒí•´ë‘ì—ˆê¸°ì— í”„ë¡ì‹œ ì—°ê²°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ìœ„ì™€ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ ì—°ê²°ì— ì„±ê³µí•˜ì˜€ë‹¤ë©´ RDS ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•´ í¬íŠ¸í¬ì›Œë”©ì„ ì„¤ì •í•˜ë©´ ëœë‹¤. í¬íŠ¸í¬ì›Œë”© ì‹œì—ëŠ” Dynamic forwarding using SOCKS 4 or 5ì„ ì„ íƒí•˜ë©´ RDS ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ Destnation host is different from the SSH Serverë¥¼ ì²´í¬í•˜ê³  RDS ì—”ë“œí¬ì¸íŠ¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì.</p>
<p><img data-src="/images/posts/ssh-tunneling/03.png"></p>
<p>ì´ì œ ì¸í…”ë¦¬ì œì´ë‚˜ DataGripìœ¼ë¡œ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ Amazon Aurora PostgreSQLì— ì—°ê²°í•  ìˆ˜ ìˆë‹¤. </p>
<p><img data-src="/images/posts/ssh-tunneling/04.png"></p>
<p>ì¼ë°˜ì ìœ¼ë¡œ ê°œë°œ í™˜ê²½ì— ëŒ€í•œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” í¼ë¸”ë¦­ ì„œë¸Œë„·ì— êµ¬ì„±í•˜ê³  ì¼ë¶€ IP ëŒ€ì—­ì— ëŒ€í•´ì„œëŠ” ë‹¤ì´ë ‰íŠ¸ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê¸°ë„ í•˜ë¯€ë¡œ ì´ì™€ ê°™ì€ SSH í„°ë„ë§ì€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. í¼ë¸”ë¦­ ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ì§€ ì•Šê³  ë‹¤ì´ë ‰íŠ¸ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•œ ì¸í”„ë¼ êµ¬ì„±ì´ë¼ë©´ SSH í„°ë„ë§ì„ í†µí•´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ RDS ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ì—ë„ ìŠ¤í…Œì´ì§•ì´ë‚˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ìš´ì˜ì¤‘ì¸ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ì—¬ ë””ë²„ê·¸í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>
]]></content>
      <tags>
        <tag>SSH</tag>
        <tag>SecurtCRT Firewall</tag>
      </tags>
  </entry>
  <entry>
    <title>SSH í‚¤ í˜ì–´ ë°œê¸‰ ë° ì›ê²© í˜¸ìŠ¤íŠ¸ ì—°ê²°í•˜ê¸°</title>
    <url>/ssh/</url>
    <content><![CDATA[<p>ê°œë°œì ë˜ëŠ” ì‹œìŠ¤í…œì„ ìš´ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì´ ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ êµ¬ì¶•í•œ ì›ê²© í˜¸ìŠ¤íŠ¸ì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤. ìš°ë¦¬ê°€ ì»´í“¨í„°ì— ë¡œê·¸ì¸í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•˜ë©° ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëŒ€ì²´í•˜ê±°ë‚˜ 2FA(OTP)ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì¸ì¦í•˜ì—¬ ë³´ì•ˆì„ ì ìš©í•˜ê¸°ë„ í•œë‹¤. SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì—ëŠ” TCP ë³´ì•ˆ ì±„ë„ì„ ì—°ê²°í•˜ê³  í†µì‹  ë‚´ìš©ì— ëŒ€í•´ ì•”í˜¸í™”í•˜ì—¬ íŒ¨í‚·ì„ ë³´í˜¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì„œë²„ì— ì ‘ì†í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ê¸° ìœ„í•¨ì— ìˆë‹¤. ì´ˆë³´ ê°œë°œìë¼ë©´ ì´ ê¸€ì„ í†µí•´ì„œ SSH í‚¤í˜ì–´ë¥¼ ë°œê¸‰í•´ë³´ê³  ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ë“±ë¡í•˜ì—¬ ì›ê²© í˜¸ìŠ¤íŠ¸ì— ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ í†µí•´ì„œ SSHì— ëŒ€í•´ ì´í•´í•´ë³´ê¸°ë¥¼ ë°”ë€ë‹¤.</p>
<p>ë¨¼ì €, ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ ë¦¬ëˆ…ìŠ¤ ì„œë²„ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ì œê³µí•´ì£¼ëŠ” ê²ƒì²˜ëŸ¼ ë‚´ ì»´í“¨í„°ì— ê°€ìƒì˜ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì„ ë§Œë“¤ì–´ë³¼ ìˆ˜ ìˆëŠ”ë° ì•„ë˜ì˜ ë‘ê°€ì§€ ë°©ë²• ì¤‘ì—ì„œ <a href="https://www.virtualbox.org/">OracleVM VirtualBox</a>ì„ ì‚¬ìš©í•´ì„œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¥¼ ì¤€ë¹„í•˜ì˜€ë‹¤.</p>
<ul>
<li><a href="https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10">Install Ubuntu on WSL2 on Windows 10</a></li>
<li><a href="https://ubuntu.com/tutorials/how-to-run-ubuntu-desktop-on-a-virtual-machine-using-virtualbox">How to run Ubuntu Desktop on a virtual machine using VirtualBox</a></li>
</ul>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> openssh-server
<span class="token function">ssh</span> <span class="token parameter variable">-V</span>
OpenSSH_8.9p1 Ubuntu-3, OpenSSL <span class="token number">3.0</span>.2 <span class="token number">15</span> Mar <span class="token number">2022</span></code></pre>

<blockquote>
<p>VirtualBoxë¡œ ì¤€ë¹„ëœ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì˜ ì£¼ì†ŒëŠ” 192.168.0.28 ì´ë‹¤.</p>
</blockquote>
<p>ë‚´ ì»´í“¨í„°ì— ì„¤ì¹˜ëœ OpenSSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ìœ„ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì— ì ‘ì†í•´ë³´ë„ë¡ í•˜ì.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo> ssh ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28
ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28's password:
Welcome to Ubuntu 22<span class="token punctuation">.</span>04<span class="token punctuation">.</span>1 LTS <span class="token punctuation">(</span>GNU/Linux 5<span class="token punctuation">.</span>15<span class="token punctuation">.</span>0-47-generic x86_64<span class="token punctuation">)</span></code></pre>

<p>ì‹¤ì œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ ê·¸ë¦¬ê³  ì¸í”„ë¼ì— ë”°ë¼ì„œ ì—¬ëŸ¬ê°€ì§€ ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ ì •ì±…ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ì§€ê¸ˆì€ ë‚´ ì»´í“¨í„°ì— ê°€ìƒ í™˜ê²½ìœ¼ë¡œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì¤€ë¹„í–ˆê³  ì–´ë–¤ ë°©í™”ë²½ë„ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë§Œìœ¼ë¡œ SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
<h2 id="SSH-í‚¤-í˜ì–´"><a href="#SSH-í‚¤-í˜ì–´" class="headerlink" title="SSH í‚¤ í˜ì–´"></a>SSH í‚¤ í˜ì–´</h2><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì™€ ê°™ì€ ì„œë¹„ìŠ¤ì—ì„œëŠ” SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ì„œ ì„œë²„ì— ì—°ê²°í•  ë•Œì— ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê³µê°œí‚¤ ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•œë‹¤. ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ë³´ë‹¤ ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ì„ êµ¬ì„±í•˜ëŠ” ì´ìœ ëŠ” ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ë°©ì‹ì˜ ê²½ìš°ì—ëŠ” ì„œë²„ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì™¸ë¶€ë¡œ ê·¸ëŒ€ë¡œ ëŒ€ì¹­í‚¤ë¡œì¨ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ë©° ê³µê°œí‚¤ ê¸°ë°˜ ì¸ì¦ì€ ì„œë²„ì—ì„œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í‚¤ë¥¼ ë³´ìœ í•œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë¡œ ë‹¤ë¥¸ í‚¤ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>
<blockquote>
<p>SSH í‚¤í˜ì–´ê°€ ë³´ì•ˆì ìœ¼ë¡œ ì™„ë²½í•œ ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ SSH í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ìœ í•˜ëŠ” ë¹„ë°€í‚¤ê°€ ì œ 3ìì—ê²Œ íƒˆì·¨ë˜ì§€ ì•Šë„ë¡ ì˜ ê´€ë¦¬í•´ì•¼í•˜ëŠ” ê²ƒì€ í•„ìš”í•˜ë‹¤.</p>
</blockquote>
<h3 id="SSH-í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°"><a href="#SSH-í‚¤-í˜ì–´-ìƒì„±í•˜ê¸°" class="headerlink" title="SSH í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°"></a>SSH í‚¤ í˜ì–´ ìƒì„±í•˜ê¸°</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ê°œë°œìë¼ë©´ ì›¹ ì½˜ì†”ì´ë‚˜ AWS CLIì˜ create-key-pair ëª…ë ¹ì„ ì‚¬ìš©í•´ì„œ RSA ë˜ëŠ” ED25519 ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¥¼ ê°„ë‹¨í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¼ë°˜ì ì¸ ê²½ìš°ë¼ë©´ ì–´ë– í•œ í™˜ê²½ì— ì˜ì¡´í•˜ì§€ ì•Šê³  OpenSSHì— í¬í•¨ëœ ssh-keygen ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼í•œë‹¤. ì•ì„œ, ì¤€ë¹„ëœ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì— ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ì„œ ì ‘ì†í•˜ì˜€ì„ë•Œ ìœˆë„ìš°ì˜ OpenSSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ìš©í•˜ì˜€ëŠ”ë° ìœˆë„ìš° 10ì˜ ì„ íƒì  ê¸°ëŠ¥ì„ í†µí•´ì„œ ê°„ë‹¨í•˜ê²Œ OpenSSH í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆê³  Git Bashë¥¼ ì„¤ì¹˜í•´ë„ ssh-keygenì´ í¬í•¨ë˜ì–´ìˆìœ¼ë¯€ë¡œ ìì‹ ì´ ì›í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>
<p><img data-src="/images/posts/ssh/ssh-01.png" alt="ìœˆë„ìš° 10ì˜ ì„ íƒì  ê¸°ëŠ¥ì„ í†µí•´ì„œ ì„¤ì¹˜í•œ OpenSSH í´ë¼ì´ì–¸íŠ¸"></p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># in Windows Terminal</span>
<span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>V
OpenSSH_for_Windows_7<span class="token punctuation">.</span>7p1<span class="token punctuation">,</span> LibreSSL 2<span class="token punctuation">.</span>6<span class="token punctuation">.</span>5

<span class="token comment"># in Git Bash</span>
$ ssh <span class="token operator">-</span>V
OpenSSH_9<span class="token punctuation">.</span>0p1<span class="token punctuation">,</span> OpenSSL 1<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1p  21 Jun 2022</code></pre>

<p>OpenSSHë¥¼ í™•ì¸í–ˆë‹¤ë©´ <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">Generating a new SSH key and adding it to the ssh-agent</a>ë¥¼ ì°¸ê³ í•´ì„œ ssh-keygenìœ¼ë¡œ SSH í‚¤í˜ì–´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì. </p>
<h4 id="RSA-í‚¤-í˜ì–´"><a href="#RSA-í‚¤-í˜ì–´" class="headerlink" title="RSA í‚¤ í˜ì–´"></a>RSA í‚¤ í˜ì–´</h4><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh-keygen <span class="token operator">-</span>t rsa <span class="token operator">-</span>b 4096 <span class="token operator">-</span>m PEM <span class="token operator">-</span>f win-mambo-rsa-4096<span class="token punctuation">.</span>pem
Generating public/private rsa key pair<span class="token punctuation">.</span>
Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:
Enter same passphrase again:
Your identification has been saved in win-mambo-rsa-4096<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>
Your public key has been saved in win-mambo-rsa-4096<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>pub<span class="token punctuation">.</span>
The key fingerprint is:
SHA256:F3ECBEjeXszb6ccTJ2EWz9eaxvZoAg4f6F4rU0aDYJY mambo@DESKTOP-OJJ4TB3
The key's randomart image is:
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">-</span><span class="token namespace">[RSA 4096]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token punctuation">|</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span>o<span class="token punctuation">.</span>o o    <span class="token punctuation">|</span>
<span class="token punctuation">|</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Eo   <span class="token operator">+</span> <span class="token operator">+</span>  <span class="token punctuation">.</span><span class="token punctuation">|</span>
<span class="token punctuation">|</span>    <span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> o o<span class="token punctuation">|</span>
<span class="token punctuation">|</span>     <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span>o= o <span class="token operator">+</span> <span class="token punctuation">|</span>
<span class="token punctuation">|</span>      <span class="token punctuation">.</span> S<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span>o B  <span class="token punctuation">|</span>
<span class="token punctuation">|</span>       <span class="token punctuation">.</span> <span class="token operator">*</span>o+ <span class="token operator">*</span> o <span class="token punctuation">|</span>
<span class="token punctuation">|</span>        <span class="token punctuation">.</span>o= = o <span class="token punctuation">.</span><span class="token punctuation">|</span>
<span class="token punctuation">|</span>       <span class="token punctuation">.</span>o<span class="token punctuation">.</span> o <span class="token operator">+</span>   <span class="token punctuation">|</span>
<span class="token punctuation">|</span>        <span class="token punctuation">.</span>o<span class="token punctuation">.</span>      <span class="token punctuation">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token namespace">[SHA256]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></code></pre>

<h4 id="ED25519-í‚¤-í˜ì–´"><a href="#ED25519-í‚¤-í˜ì–´" class="headerlink" title="ED25519 í‚¤ í˜ì–´"></a>ED25519 í‚¤ í˜ì–´</h4><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh-keygen <span class="token operator">-</span>t ed25519 <span class="token operator">-</span>m PEM <span class="token operator">-</span>f win-mambo-ed25519<span class="token punctuation">.</span>pem
Generating public/private ed25519 key pair<span class="token punctuation">.</span>
Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:
Enter same passphrase again:
Your identification has been saved in win-mambo-ed25519<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>
Your public key has been saved in win-mambo-ed25519<span class="token punctuation">.</span>pem<span class="token punctuation">.</span>pub<span class="token punctuation">.</span>
The key fingerprint is:
SHA256:oad/A11tVJQFxRIDA63pozCFj/FsTCDh51hALNdFBVU mambo@DESKTOP-OJJ4TB3
The key's randomart image is:
<span class="token operator">+</span><span class="token operator">--</span><span class="token namespace">[ED25519 256]</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token punctuation">|</span>   o+o o+<span class="token operator">++</span><span class="token operator">+</span>E<span class="token punctuation">.</span><span class="token operator">+</span>BB<span class="token punctuation">|</span>
<span class="token punctuation">|</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">.</span>o     <span class="token punctuation">.</span><span class="token punctuation">.</span>oo<span class="token punctuation">.</span><span class="token punctuation">|</span>
<span class="token punctuation">|</span>   o<span class="token punctuation">.</span><span class="token punctuation">.</span>oo<span class="token punctuation">.</span>  o o <span class="token punctuation">.</span> <span class="token punctuation">|</span>
<span class="token punctuation">|</span>     =o<span class="token punctuation">.</span>o<span class="token punctuation">.</span>o <span class="token punctuation">.</span> o  <span class="token punctuation">|</span>
<span class="token punctuation">|</span>    <span class="token punctuation">.</span> oXSo <span class="token punctuation">.</span> <span class="token punctuation">.</span>   <span class="token punctuation">|</span>
<span class="token punctuation">|</span>      <span class="token operator">+</span>oB <span class="token operator">+</span>      <span class="token punctuation">|</span>
<span class="token punctuation">|</span>      <span class="token punctuation">.</span><span class="token operator">+</span> o <span class="token punctuation">.</span>     <span class="token punctuation">|</span>
<span class="token punctuation">|</span>       <span class="token punctuation">.</span><span class="token punctuation">.</span> o      <span class="token punctuation">|</span>
<span class="token punctuation">|</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span>     <span class="token punctuation">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token namespace">[SHA256]</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></code></pre>

<p>ë¨¼ì €, RSA ê¸°ë°˜ì˜ í‚¤ í˜ì–´ë¥¼ ë§Œë“¤ë•ŒëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 2048 ë¹„íŠ¸ ì´ìƒìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê²Œ ë˜ëŠ”ë° ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë‚˜ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì—ì„œëŠ” ëª¨ë‘ 4096 ë¹„íŠ¸ë¥¼ ì§€ì›í•˜ê³  ìˆìœ¼ë©° ì´ë¥¼ ê¶Œì¥í•˜ëŠ” í¸ì´ë‹¤. ê·¸ëŸ°ë°, ì‹œìŠ¤í…œì—ì„œ ED25519 ë°©ì‹ì„ ì§€ì›í•œë‹¤ë©´ í‚¤ ê¸¸ì´ì— ë”°ë¥¸ ë³´ì•ˆ íš¨ìœ¨ ìƒ ED25519ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ë‚˜ì€ ì„ íƒì´ ë  ìˆ˜ ìˆë‹¤.</p>
<h3 id="SSH-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°"><a href="#SSH-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°" class="headerlink" title="SSH ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°"></a>SSH ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°</h3><pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> scp <span class="token punctuation">.</span>\window-mambo<span class="token punctuation">.</span>pub ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28:<span class="token operator">/</span>home/ubuntu/<span class="token punctuation">.</span>ssh/
ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28's password:
window-mambo<span class="token punctuation">.</span>pub                                                                      100%  104    51<span class="token punctuation">.</span>6KB/s   00:00

<span class="token comment"># in ubuntu</span>
ubuntu@ubuntu:~<span class="token operator">/</span><span class="token punctuation">.</span>ssh$ <span class="token function">cat</span> window-mambo<span class="token punctuation">.</span>pub >> authorized_keys</code></pre>

<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i <span class="token punctuation">.</span>\window-mambo<span class="token punctuation">.</span>pem ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28
Welcome to Ubuntu 22<span class="token punctuation">.</span>04<span class="token punctuation">.</span>1 LTS <span class="token punctuation">(</span>GNU/Linux 5<span class="token punctuation">.</span>15<span class="token punctuation">.</span>0-47-generic x86_64</code></pre>

<p>ì´ë ‡ê²Œ í•´ì„œ SSH í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³  ê°€ìƒ í™˜ê²½ì¸ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ì— í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•˜ê³  SSHë¡œ ì ‘ì†í•´ë³´ì•˜ë‹¤. ì„œë²„ ì—”ì§€ë‹ˆì–´ëŠ” ì´ëŸ¬í•œ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë©´ì„œ ìµœì¢…ì ìœ¼ë¡œ ê°œë°œìì¸ ìš°ë¦¬ì—ê²Œ ì„œë²„ì— ì ‘ì†í•  ì‚¬ìš©ì ì´ë¦„ê³¼ í•¨ê»˜ ë¹„ë°€í‚¤ë¥¼ ì „ë‹¬í•œ ê²ƒì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>
<h2 id="SSH-í‚¤-í˜ì–´-ì‹¤ìŠµ"><a href="#SSH-í‚¤-í˜ì–´-ì‹¤ìŠµ" class="headerlink" title="SSH í‚¤ í˜ì–´ ì‹¤ìŠµ"></a>SSH í‚¤ í˜ì–´ ì‹¤ìŠµ</h2><p>ì´ì œ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì™€ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œ ì„œë¹„ìŠ¤ì— SSH í‚¤í˜ì–´ë¥¼ ë“±ë¡í•˜ê³  ì—°ê²°í•˜ëŠ” ê²ƒì„ ì‹¤ìŠµí•´ë³´ë©´ì„œ ë‹¤ì‹œ í•œë²ˆ ë¨¸ë¦¬ì— ìˆ™ì§€í•˜ë„ë¡ í•´ë³´ì.</p>
<h3 id="ê¹ƒí—ˆë¸Œ-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°"><a href="#ê¹ƒí—ˆë¸Œ-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°" class="headerlink" title="ê¹ƒí—ˆë¸Œ ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°"></a>ê¹ƒí—ˆë¸Œ ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°</h3><p>ë¨¼ì €, ì‚¬ë‚´ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¡°ì§ ê³„ì •ìœ¼ë¡œ ë“±ë¡ë˜ì–´ìˆëŠ” í”„ë¼ì´ë¹— ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ë³µì‚¬í•´ì˜¤ê±°ë‚˜ í‘¸ì‹œí•´ì•¼í•œë‹¤ë©´ ì¡°ì§ì— ì†í•œ ë‚´ ì‚¬ìš©ì ê³„ì •ì— SSH í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•˜ê³  ê¹ƒí—ˆë¸Œ ì„œë²„ì— ì¸ì¦í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì‚¬ìš©ì ê³„ì • ì„¤ì • &gt; ì•¡ì„¸ìŠ¤ &gt; <a href="https://github.com/settings/keys">SSH and GPG Keys</a> ë©”ë‰´ë¡œ ì§„ì…í•˜ë©´ SSH í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ ì•ì„œ ë§Œë“¤ì—ˆë˜ ED25519 í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•˜ê³  ê¹ƒí—ˆë¸Œì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³´ì.</p>
<p><img data-src="/images/posts/ssh/ssh-02.png"></p>
<p><img data-src="/images/posts/ssh/ssh-03.png"></p>
<p><img data-src="/images/posts/ssh/ssh-04.png"></p>
<p>ê¹ƒí—ˆë¸Œ ì„œë²„ì— ìš°ë¦¬ê°€ ë§Œë“  í‚¤ í˜ì–´ë¥¼ ë“±ë¡í•˜ì˜€ìœ¼ë¯€ë¡œ ë‚´ ì»´í“¨í„°ì˜ OpenSSH í´ë¼ì´ì–¸íŠ¸ë¡œ ê¹ƒí—ˆë¸Œì— ì—°ê²°í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì. ê¹ƒí—ˆë¸Œì—ì„œëŠ” ì•ì„œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì—°ê²°í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ì‰˜ì„ ì œê³µí•˜ì§€ëŠ” ì•Šì§€ë§Œ ì¸ì¦ì— ì„±ê³µí•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦í•´ë³¼ ìˆ˜ ìˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i win-mambo-ed25519<span class="token punctuation">.</span>pem <span class="token operator">-</span>T git@github<span class="token punctuation">.</span>com
The authenticity of host <span class="token string">'github.com (15.164.81.167)'</span> cannot be established<span class="token punctuation">.</span>
ECDSA key fingerprint is SHA256:p2QAMXNIC1TJYWeIOttrVc98/R1BUFWu3/LiyKgUfQM<span class="token punctuation">.</span>
Are you sure you want to <span class="token keyword">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? yes
Warning: Permanently added <span class="token string">'github.com,15.164.81.167'</span> <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts<span class="token punctuation">.</span>
Hi kdevkr! You've successfully authenticated<span class="token punctuation">,</span> but GitHub does not provide shell access<span class="token punctuation">.</span></code></pre>

<h3 id="EC2-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°"><a href="#EC2-ê³µê°œí‚¤-ë“±ë¡í•˜ê¸°" class="headerlink" title="EC2 ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°"></a>EC2 ê³µê°œí‚¤ ë“±ë¡í•˜ê¸°</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ í‚¤ í˜ì–´ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê¸°ë„ í•˜ëŠ”ë° ì´ë¯¸ ë§Œë“¤ì–´ì§„ SSH í‚¤ í˜ì–´ë¥¼ ê°€ì ¸ì™€ì„œ ë“±ë¡í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆë‹¤. ë‚´ ì»´í“¨í„°ì—ì„œ ë°œê¸‰í–ˆë˜ ê³µê°œí‚¤ë¥¼ ê°€ì ¸ì™€ì„œ ë“±ë¡í•œ í›„ EC2 ì¸ìŠ¤í„´ìŠ¤ì¸ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>
<p><img data-src="/images/posts/ssh/ssh-05.png"></p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i win-mambo-ed25519<span class="token punctuation">.</span>pem ec2-user@15<span class="token punctuation">.</span>164<span class="token punctuation">.</span>219<span class="token punctuation">.</span>55
The authenticity of host <span class="token string">'15.164.219.55 (15.164.219.55)'</span> cannot be established<span class="token punctuation">.</span>
ECDSA key fingerprint is SHA256:64Ca/STwUWZkN+ggo5jx6BCvwyhNRcCY5/xjk0SkSjU<span class="token punctuation">.</span>
Are you sure you want to <span class="token keyword">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? yes
Warning: Permanently added <span class="token string">'15.164.219.55'</span> <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts<span class="token punctuation">.</span>

       __<span class="token punctuation">|</span>  __<span class="token punctuation">|</span>_  <span class="token punctuation">)</span>
       _<span class="token punctuation">|</span>  <span class="token punctuation">(</span>     <span class="token operator">/</span>   Amazon Linux 2 AMI
      ___<span class="token punctuation">|</span>\___<span class="token punctuation">|</span>___<span class="token punctuation">|</span>

https:<span class="token operator">/</span><span class="token operator">/</span>aws<span class="token punctuation">.</span>amazon<span class="token punctuation">.</span>com/amazon-linux-2/

<span class="token namespace">[ec2-user@ip-10-0-2-243 ~]</span>$ <span class="token function">cat</span> ~<span class="token operator">/</span><span class="token punctuation">.</span>ssh/authorized_keys
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOy21gZ45To8FNf6hilxV51QqT9JCBjIpVKCRlup7m4D window-mambo</code></pre>

<blockquote>
<p>EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ í¼ë¸”ë¦­ ì„œë¸Œë„·ì— ìœ„ì¹˜í•˜ê³  22ë²ˆ í¬íŠ¸ê°€ í—ˆìš©ë˜ì–´ìˆë‹¤ë©´ SSH í‚¤ í˜ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ë°, ì¸í„°ë„·ì—ì„œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ìœ„ì¹˜í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— SSM ì—ì´ì „íŠ¸ë¥¼ êµ¬ì„±í•œë‹¤ë©´ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” <a href="/connect-private-ec2-instance-using-ssm-agent/">SSM ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ SSH ì ‘ì†ì´ ê°€ëŠ¥</a>í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<h2 id="íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"><a href="#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" class="headerlink" title="íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"></a>íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2><p>ì§€ë‚œ <a href="/ed25519">ED25519</a> ê¸€ì„ ì½ì–´ë³¸ ë¶„ë“¤ì´ë¼ë©´ ìœˆë„ìš° ì»´í“¨í„°ì—ì„œ ë°œê¸‰í•œ ED25519 í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³  ìœˆë„ìš° í™˜ê²½ì—ì„œ ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ì¸ì¦ì„ ì‹œë„í•˜ë©´ í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ì„œ ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í–ˆì„ ê²ƒì´ë‹¤. ì§€ë‚œë²ˆ ê¸€ì—ì„œëŠ” ë‹¨ìˆœíˆ ì•ˆë˜ëŠ” ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ê³  ë§ˆë¬´ë¦¬í•˜ì˜€ì§€ë§Œ ì´ ë¬¸ì œì— ëŒ€í•´ì„œ ì™œ ê·¸ëŸ°ê²ƒì¸ê°€ì— ëŒ€í•´ ê¶ê¸ˆí•´ì¡Œê³  <a href="https://github.com/aws/aws-cli/discussions/7074">aws-cli&#x2F;discussions&#x2F;7074</a>ë¡œ ê´€ë ¨ ë¬¸ì œì— ëŒ€í•´ì„œ ì§ˆë¬¸ì„ í†µí•´ì„œ ì›ì¸ì„ ì°¾ê²Œ ë˜ì—ˆë‹¤.</p>
<p><img data-src="/images/posts/ssh/ssh-06.png"></p>
<p>ìœˆë„ìš° í™˜ê²½ì—ì„œ AWS CLIë¥¼ í†µí•´ì„œ í‚¤ í˜ì–´ë¥¼ ë°œê¸‰í•˜ê³ ë‚˜ì„œ ë¹„ë°€í‚¤ íŒŒì¼ì— ëŒ€í•´ì„œ ì—ë””í„°ë¡œ ì—´ì–´ë³´ë©´ ìœ„ì™€ ê°™ì´ UTF-16LE ì¸ì½”ë”© í˜•ì‹ê³¼ CRLF ê°œí–‰ ë°©ì‹ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. OpenSSHì˜ ssh-keygenìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í‚¤í˜ì–´ íŒŒì¼ì„ ì‚´í´ë³´ë©´ UTF-8ê³¼ LFë¡œ ë§Œë“¤ì–´ì§€ëŠ”ë° Git Bashì— í¬í•¨ë˜ì–´ìˆëŠ” dos2unixë¼ëŠ” ë„êµ¬ë¥¼ í†µí•´ì„œ UTF-16LEë¡œ ë˜ì–´ìˆëŠ” ì¸ì½”ë”© í˜•ì‹ì„ UTF-8ë¡œ ë³€ê²½í•´ë³´ê³  ì‹œë„í•´ë³¸ê²°ê³¼ ì •ìƒì ìœ¼ë¡œ ì ‘ì†ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ dos2unix aws-mambo.pem
dos2unix: converting UTF-16LE <span class="token function">file</span> aws-mambo.pem to UTF-8 Unix format<span class="token punctuation">..</span>.</code></pre>

<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\keypair> ssh <span class="token operator">-</span>i aws-mambo<span class="token punctuation">.</span>pem ec2-user@3<span class="token punctuation">.</span>34<span class="token punctuation">.</span>188<span class="token punctuation">.</span>47

       __<span class="token punctuation">|</span>  __<span class="token punctuation">|</span>_  <span class="token punctuation">)</span>
       _<span class="token punctuation">|</span>  <span class="token punctuation">(</span>     <span class="token operator">/</span>   Amazon Linux 2 AMI
      ___<span class="token punctuation">|</span>\___<span class="token punctuation">|</span>___<span class="token punctuation">|</span>

https:<span class="token operator">/</span><span class="token operator">/</span>aws<span class="token punctuation">.</span>amazon<span class="token punctuation">.</span>com/amazon-linux-2/
<span class="token namespace">[ec2-user@ip-10-0-2-42 ~]</span>$</code></pre>

<p>ë˜í•œ, ìœˆë„ìš° í„°ë¯¸ë„ì´ ì•„ë‹ˆë¼ Git Bashì—ì„œ ì‹œë„í•´ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì‹œí•œë²ˆ í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ëŠ” ë©”ì‹œì§€ê°€ ë°œìƒí–ˆëŠ”ë° ì´ë²ˆì—ëŠ” CRLFë¡œ ë˜ì–´ìˆë˜ ê°œí–‰ í˜•ì‹ì„ LFë¡œ ë³€ê²½í•˜ê²Œë˜ë©´ ì„±ê³µì ìœ¼ë¡œ ì ‘ì†í•  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ssh</span> <span class="token parameter variable">-i</span> aws-mambo.pem ec2-user@3.34.188.47
Load key <span class="token string">"aws-mambo.pem"</span><span class="token builtin class-name">:</span> invalid <span class="token function">format</span>
ec2-user@3.34.188.47: Permission denied <span class="token punctuation">(</span>publickey,gssapi-keyex,gssapi-with-mic<span class="token punctuation">)</span>.</code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ssh</span> <span class="token parameter variable">-i</span> aws-mambo.pem ec2-user@3.34.188.47

       __<span class="token operator">|</span>  __<span class="token operator">|</span>_  <span class="token punctuation">)</span>
       _<span class="token operator">|</span>  <span class="token punctuation">(</span>     /   Amazon Linux <span class="token number">2</span> AMI
      ___<span class="token operator">|</span><span class="token punctuation">\</span>___<span class="token operator">|</span>___<span class="token operator">|</span>

https://aws.amazon.com/amazon-linux-2/
<span class="token punctuation">[</span>ec2-user@ip-10-0-2-42 ~<span class="token punctuation">]</span>$</code></pre>

<p>ì‹¤ë¬´ì—ì„œ SSH í‚¤ í˜ì–´ë¥¼ ì „ë‹¬ë°›ì•˜ëŠ”ë° SSH ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ ì „ë‹¬ë°›ì€ í‚¤ í˜ì–´ íŒŒì¼ì˜ ì¸ì½”ë”© í˜•ì‹ê³¼ ê°œí–‰ í˜•ì‹ì„ ì‚´í´ë³´ê³  ìœ„ì™€ ê°™ì´ ë³€ê²½í•´ì„œ ì‹œë„í•´ë³´ê¸°ë¥¼ ì¶”ì²œí•œë‹¤. </p>
<blockquote>
<p>ì‹¤ë¬´ì—ì„œëŠ” ì¡°ì§ í˜¹ì€ ì¸í”„ë¼ í™˜ê²½ë§ˆë‹¤ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œí•œí•˜ëŠ”ë°ìš”. ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¡œ ìš°ì„  ì ‘ì†í•˜ê±°ë‚˜ì„œ ê° ì„œë²„ë§ˆë‹¤ ì •í•´ì§„ ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë™í•´ì•¼í•˜ê±°ë‚˜ ì‹¬ì§€ì–´ëŠ” SSH í‚¤ í˜ì–´ ì¸ì¦ ë¿ë§Œ ì•„ë‹ˆë¼ OTPë¥¼ í†µí•œ 2FA ì¸ì¦ì„ ìš”êµ¬í•˜ë„ë¡ êµ¬ì„±í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì €ëŠ” ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ ì•„ë‹ˆë¯€ë¡œ SSH ì—°ê²° ì‹œ 2FAì„ êµ¬ì„±í•˜ëŠ” ê²ƒì€ ëª¨ë¥´ê¸°ì— ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ë³„ë„ë¡œ ì°¾ì•„ë³´ì•„ì•¼ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">Connect to your Linux instance using SSH</a>  </li>
<li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">Connecting to GitHub with SSH</a></li>
</ul>
]]></content>
      <tags>
        <tag>SSH</tag>
        <tag>Key Pair</tag>
        <tag>RSA</tag>
        <tag>ED25519</tag>
      </tags>
  </entry>
  <entry>
    <title>SSL ì¸ì¦ì„œ</title>
    <url>/ssl-certificate/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ì›¹ì‚¬ì´íŠ¸ ì ‘ì† ì‹œ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” HTTPS ê·¸ë¦¬ê³  SSL ì¸ì¦ì„œì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ë ¤í•©ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ HTTPSë¡œ ë°°í¬ë˜ê³ ìˆìœ¼ë‚˜ ì •ì‘ SSLì— ëŒ€í•œ ë¶€ë¶„ì€ ë¨¸ë¦¬ì†ì—ì„œ ë³µì¡í•˜ê²Œ ì–½í˜€ ì œëŒ€ë¡œ ì •ë¦¬ë˜ì§€ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤. ì´ ê¸€ì„ ì‘ì„±í•˜ë©´ì„œ ì–½í˜€ìˆëŠ” ë¶€ë¶„ì„ í•˜ë‚˜ì”© í’€ì–´ë‚˜ê°€ë©´ì„œ SSLì— ëŒ€í•œ ê°œë…ì„ í™•ë¦½í•´ë³´ê³ ì í•©ë‹ˆë‹¤.</p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>ì¼ë°˜ ì‚¬ëŒë“¤ì´ ë¸Œë¼ìš°ì €ë¥¼ ì´ìš©í•´ì„œ ì›¹ ì‚¬ì´íŠ¸ì— ì ‘ì†í•  ë•Œ HTTPSê°€ ì ìš©ë˜ì—ˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì‹ ê²½ì“°ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ìš´ì˜í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²Œ HTTPSëŠ” ì‚¬ìš©ìì˜ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì•”í˜¸í™”í•´ì„œ ìœ„ì¡° ë˜ëŠ” ë³€ì¡°ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆëŠ” ì•„ì£¼ ì¤‘ìš”í•œ í‘œì¤€ ë³´ì•ˆ ê¸°ìˆ ì…ë‹ˆë‹¤. </p>
<p>í¬ë¡¬ê³¼ ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œëŠ” HTTPSì™€ ê°™ì€ ë³´ì•ˆ í”„ë¡œí† ì½œì´ ì ìš©ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©ìë“¤ì—ê²Œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ì¸ì§€ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ì˜†ì— ëŠë‚Œí‘œë‚˜ ìë¬¼ì‡  ì•„ì´ì½˜ì„ ë³´ì‹ ì  ìˆìœ¼ì‹ ê°€ìš”? ì—¬ëŸ¬ë¶„ì˜ ì›¹ ì‚¬ì´íŠ¸ê°€ ìë¬¼ì‡  ì•„ì´ì½˜ì„ ê°€ì§„ë‹¤ë©´ ë³´ì•ˆ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©° ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>HTTPSëŠ” HTTPë¼ëŠ” ì „ì†¡ í”„ë¡œí† ì½œê³¼ í•¨ê»˜ ë°ì´í„°ë¥¼ ì•”ë³µí˜¸í™”í•˜ê¸° ìœ„í•œ ë³´ì•ˆ í”„ë¡œí† ì½œì„ ê°™ì´ ì‚¬ìš©í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ì ì¸ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ê°ì•ˆí•´ì•¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìµœê·¼ ì»´í“¨í„°ë“¤ì˜ CPU ì„±ëŠ¥ì´ ì¢‹ì•„ì§ì— ë”°ë¼ì„œ ì•”ë³µí˜¸í™” ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ìƒë‹¹íˆ ë¯¸ë¯¸í•˜ë©° ë„¤íŠ¸ì›Œí¬ ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ ë ˆì´í„´ì‹œë„ ì¤„ì–´ë“¤ì—ˆê¸° ë•Œë¬¸ì— HTTPSì„ ì‚¬ìš©í•œë‹¤ê³ í•´ì„œ ì‚¬ìš©ìê°€ ìš”ì²­í•˜ê³  ì‘ë‹µí•˜ê¸°ê¹Œì§€ì˜ ì‹œê°„ì´ í° ì°¨ì´ë¥¼ ë³´ì´ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>
<h3 id="TLS-í•¸ë“œì‰ì´í¬"><a href="#TLS-í•¸ë“œì‰ì´í¬" class="headerlink" title="TLS í•¸ë“œì‰ì´í¬"></a>TLS í•¸ë“œì‰ì´í¬</h3><p>HTTPSê°€ ì ìš©ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì¸ ë¸Œë¼ìš°ì €ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤.</p>
<p><img data-src="https://images.ctfassets.net/slt3lc6tev37/5aYOr5erfyNBq20X5djTco/3c859532c91f25d961b2884bf521c1eb/tls-ssl-handshake.png" alt="Cloudflare - What is a TLS handshake?"></p>
<p><strong>TLS í•¸ë“œì‰ì´í¬</strong>ëŠ” ì›¹ ìš”ì²­ì— ëŒ€í•œ ì‹ ë¢°ì„± ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ í†µì‹  ë°ì´í„°ë¥¼ ì•”ë³µí˜¸í™”í•˜ê¸° ìœ„í•œ ë°©ì‹ì„ ì„œë¡œ êµí™˜í•˜ê¸° ìœ„í•´ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ìœ„ í´ë¼ìš°ë“œí”Œë ˆì–´ì—ì„œ ì„¤ëª…í•˜ëŠ” TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì„ ì‚´í´ë³´ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¸ì¦ì„œ(Certificate)ë¥¼ ì œê³µí•˜ê³  ì„œë¡œ ì•”í˜¸í™” ë°©ì‹(CipherSpec)ì„ êµí™˜í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>í¬ë¡¬ ë¸Œë¼ìš°ì €ì˜ ê°œë°œì ë„êµ¬ ì¤‘ ë³´ì•ˆ íƒ­ì—ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì— ì˜í•´ ê²°ì •ëœ ì—¬ëŸ¬ê°€ì§€ ì‚¬í•­ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-01.png" alt="ë„¤ì´ë²„ ì›¹ ì‚¬ì´íŠ¸"></p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-02.png" alt="íšŒì‚¬ ì›¹ ì‚¬ì´íŠ¸"></p>
<p>ë„¤ì´ë²„ ì›¹ ì‚¬ì´íŠ¸ëŠ” <strong>DigiCert</strong>ë¼ëŠ” ì¸ì¦ê¸°ê´€ì—ì„œ ë°œí–‰í•œ SSL ì¸ì¦ì„œë¥¼ ì œê³µí•˜ì˜€ê³  <strong>TLS 1.3</strong> ë²„ì „ê³¼ í•¨ê»˜ <strong><a href="https://en.wikipedia.org/wiki/Curve25519">X25519</a></strong> ë°©ì‹ìœ¼ë¡œ í‚¤ë¥¼ êµí™˜í•˜ê³  <strong>AES_256_GCM</strong>ìœ¼ë¡œ ì•”í˜¸í™”í•˜ë©° íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì›¹ ì„œë¹„ìŠ¤ëŠ” ë„¤ì´ë²„ì™€ ë‹¤ë¥´ê²Œ <strong>TLS 1.2</strong>, <strong>ECDHE_ECDSA</strong>, <strong>AES_128_GCM</strong>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ë„ HTTPSë¥¼ ì ìš©í•œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ìš´ì˜ì¤‘ì´ê±°ë‚˜ ê¶ê¸ˆí•œ ì‚¬ì´íŠ¸ê°€ ìˆë‹¤ë©´ ì–´ë–¤ ì‚¬í•­ìœ¼ë¡œ ê²°ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì— ì˜í•´ ê²°ì •ë˜ëŠ” ì‚¬í•­ë“¤ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì§€ì›í•˜ëŠ” ì‚¬í•­ë“¤ê³¼ í´ë¼ì´ì–¸íŠ¸ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ì‚¬í•­ë“¤ì— ëŒ€í•´ì„œ í•˜ë‚˜ì”© ì•Œì•„ë³´ë„ë¡ í•˜ì£ .</p>
<h3 id="TLS-ë²„ì „"><a href="#TLS-ë²„ì „" class="headerlink" title="TLS ë²„ì „"></a>TLS ë²„ì „</h3><p>TLS ë²„ì „ì€ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ë§í•©ë‹ˆë‹¤. ë‹¹ì—°ìŠ¤ëŸ½ê²Œë„ ë²„ì „ì´ ë†’ì€ TLS 1.3ì´ TLS 1.2ë³´ë‹¤ íš¨ìœ¨ì ì¸ ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì§€ì›í•˜ëŠ” TLS ë²„ì „ ì¤‘ ê°€ì¥ ë†’ì€ ë²„ì „ìœ¼ë¡œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½, í´ë¼ì´ì–¸íŠ¸ê°€ TLS 1.1ê¹Œì§€ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ TLS 1.2 ì´ìƒì„ ìš”êµ¬í•œë‹¤ë©´ ì¼ì¹˜í•˜ëŠ” TLS ë²„ì „ì´ ì—†ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” TLS 1.1ì„ ì‚¬ìš©í•˜ê³ ìí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ê±°ë¶€í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>í¬ë¡¬ ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ <a href="https://www.chromestatus.com/feature/5759116003770368">TLS 1.0ê³¼ TLS 1.1 ë²„ì „ì„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—</a> ì—¬ëŸ¬ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ìµœì†Œí•œ TLS 1.2 ë²„ì „ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì•¼í•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-12.png"></p>
<p>ìœ„ëŠ” íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ë¡œê·¸ë¥¼ ì‚´í´ë³¸ ê²½ìš°ë¡œ <strong>SSLv3, TLSv1.0, TLS v1.1</strong>ë“±ì˜ TLS ë²„ì „ì„ ì‚¬ìš©í•˜ë ¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ê±°ë¶€ëœ ê²ƒì´ ì˜¤ë¥˜ ë¡œê·¸ë¡œ ì¶œë ¥ëœ ìƒí™©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” AWS Beanstalkì™€ í•¨ê»˜ NLB(Network Load Balancer)ë¥¼ ì‚¬ìš©í•˜ë©° NLBëŠ” TCP íŠ¸ë˜í”½ì— ëŒ€í•˜ì—¬ ë¶„ì‚°ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ í”„ë¡ì‹œë˜ë„ë¡ êµ¬ì„±í–ˆê¸°ë•Œë¬¸ì— L4 ë¡œë“œë°¸ëŸ°ì„œì—ì„œ TLS í•¸ë“œì‰ì´í¬ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŒì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>NLBì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ë„ ìˆìœ¼ë©° IT ì¸í”„ë¼ ìƒ TLS í•¸ë“œì‰ì´í¬ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì˜ëª»ëœ êµ¬ì„±ì€ ì•„ë‹™ë‹ˆë‹¤.</p>
</blockquote>
<h4 id="HTTP-x2F-3-ê·¸ë¦¬ê³ -QUIC"><a href="#HTTP-x2F-3-ê·¸ë¦¬ê³ -QUIC" class="headerlink" title="HTTP&#x2F;3 ê·¸ë¦¬ê³  QUIC"></a>HTTP&#x2F;3 ê·¸ë¦¬ê³  QUIC</h4><p>í†µì‹  í”„ë¡œí† ì½œì— ëŒ€í•´ì„œ ê´€ì‹¬ì´ ìˆëŠ” ë¶„ë“¤ì€ QUIC ì´ë¼ê³ í•˜ëŠ” ì „ì†¡ í”„ë¡œí† ì½œì— ëŒ€í•´ì„œ ë“¤ì–´ë³´ì‹  ì  ìˆìœ¼ì‹¤ ê²ë‹ˆë‹¤. TCPê°€ ì•„ë‹Œ ì˜¤ë²„í—¤ë“œê°€ ì ì€ UDPë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œë¡œ êµ¬ê¸€ ì›¹ ì‚¬ì´íŠ¸ì— ëŒ€í•´ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì— ì˜í•´ ê²°ì •ëœ ì‚¬í•­ì„ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ TLSê°€ ì•„ë‹Œ QUICì„ ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-03.png"></p>
<p>QUICì€ TLSë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆìœ¼ë©° TLSëŠ” ë³´ì•ˆ í”„ë¡œí† ì½œì´ê¸° ë•Œë¬¸ì— HTTPê°€ ì•„ë‹Œ ì „ì†¡ í”„ë¡œí† ì½œê³¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì˜ˆ ì…ë‹ˆë‹¤. êµ¬ê¸€ ì›¹ ì‚¬ì´íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ë¶„ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“± ì •ì  ì»¨í…ì¸ ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” CDN ì„œë²„ë¥¼ ì‚´í´ë³´ë©´ <strong>h3-29</strong>ë¼ê³  í•˜ëŠ” QUICì˜ í‘œì¤€ ì´ë¦„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì•„ë¬´íŠ¼ ë‹¤ì‹œ TLS ë²„ì „ì— ëŒ€í•œ ì‚¬í•­ì„ ë” ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. êµ­ë‚´ ê°œë°œì ì»¤ë®¤ë‹ˆí‹° ì¤‘ í•˜ë‚˜ì¸ OKKY ì‚¬ì´íŠ¸ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì§€ì›í•˜ëŠ” TLS ë²„ì „ì„ í™•ì¸í•´ë³´ê¸° ìœ„í•´ <a href="https://gf.dev/tls-test">Check TLS Version</a>ì„ ìˆ˜í–‰í•´ë³¸ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-04.png"></p>
<p>TLS 1.3ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë²„ì „ì„ ì§€ì›í•˜ëŠ” ê²ƒìœ¼ë¡œ ë¦¬í¬íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•˜ì§€ë§Œ í¬ë¡¬ ë¸Œë¼ìš°ì €ëŠ” TLS 1.2 ì´ìƒì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ TLS 1.3ì„ ì§€ì›í•˜ì§€ ì•Šë”ë¼ë„ ì•„ë¬´ëŸ° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ì‚¬ëŒë“¤ì´ ë§ì´ ì‚¬ìš©í•˜ëŠ” í¬ë¡¬ ë¸Œë¼ìš°ì €ì—ì„œ TLS 1.2 ì§€ì›í•˜ì§€ì•Šë„ë¡ ë°œí‘œí•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ TLS 1.3ì„ ì§€ì›í•˜ë„ë¡ ë³€ê²½í•˜ëŠ” ê²ƒì€ ë¶ˆê°€í”¼í•œ ìƒí™©ì´ê¸´ í•©ë‹ˆë‹¤. ë¬¼ë¡ , íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë„ ë§ˆì°¬ê°€ì§€ì¸ ìƒí™©ì…ë‹ˆë‹¤.</p>
<h3 id="ì•”í˜¸í™”-ìŠ¤ìœ„íŠ¸"><a href="#ì•”í˜¸í™”-ìŠ¤ìœ„íŠ¸" class="headerlink" title="ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸"></a>ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸</h3><p>ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸(Cipher Suite)ëŠ” <strong>í‚¤ êµí™˜</strong>, <strong>ì „ì ì„œëª…</strong>, <strong>ì•”í˜¸í™”</strong> ê·¸ë¦¬ê³  <strong>ë°ì´í„° ë¬´ê²°ì„±</strong>ì— ëŒ€í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì¡°í•©í•œ ì•”í˜¸í™” ë°©ì‹ì„ ì§€ì¹­í•©ë‹ˆë‹¤. ì•ì„œ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ê²°ì •ëœ ì‚¬í•­ ì¤‘ <strong>ECDHE_ECDSA</strong> ê·¸ë¦¬ê³  <strong>AES_128_GCM</strong>ì´ ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># [í”„ë¡œí† ì½œ]_[í‚¤ êµí™˜ ì•Œê³ ë¦¬ì¦˜]_[ì „ì ì„œëª… ì•Œê³ ë¦¬ì¦˜]_WITH_[ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜]_[ë°ì´í„° ë¬´ê²°ì„±]</span>
TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code></pre>

<p>ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ëŠ” ìœ„ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ë„ë¡ ì¡°í•©ëœ ë¬¸ìì—´ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ë‹¤ì‹œ ë‚˜ì—´í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ul>
<li>TLS : í”„ë¡œí† ì½œ</li>
<li>ECDHE : íƒ€ì› ê³¡ì„  ë””í”¼ í—¬ë§Œ í‚¤ êµí™˜</li>
<li>ECDSA : íƒ€ì› ê³¡ì„  ë””ì§€í„¸ ì„œëª…</li>
<li>AES_128_GCM : 128 ë¹„íŠ¸ ë¸”ë¡ ê°ˆë£¨ì™€&#x2F;ì¹´ìš´íŠ¸ ëª¨ë“œì˜ AES ì•”í˜¸í™”</li>
<li>SHA256 : 256ë¹„íŠ¸ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜</li>
</ul>
<p>ë³´ì•ˆ ì „ë¬¸ê°€ê°€ ì•„ë‹ˆë¼ë©´ ECDHE-ECDSAê°€ ì–´ë–¤ ì›ë¦¬ë„ ë™ì‘í•˜ëŠ”ì§€ê¹Œì§€ëŠ” ì•Œ í•„ìš”ëŠ” ì—†ìœ¼ë©° ì–´ë–»ê²Œ í‚¤ êµí™˜ì„ í•˜ê³  ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì„œëª…í•˜ë©° ì–´ë–»ê²Œ ì•”í˜¸í™”í•˜ëŠ”ì§€ë§Œ êµ¬ë¶„í•  ìˆ˜ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤. ê²€ìƒ‰í•´ë³´ì‹œë”ë¼ë„ ë³´ì•ˆ ê¸°ìˆ ì„ ì´í•´í•˜ê¸°ëŠ” ì‰½ì§€ ì•Šìœ¼ì‹¤ ê²ë‹ˆë‹¤. (ìš°ë¦¬ì˜ ì‹œê°„ì€ ì†Œì¤‘í•˜ë‹ˆê¹Œìš”â€¦)</p>
<p>ì´ëŸ¬í•œ ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/create-tls-listener.html">AWSì˜ ELB(Elastic Load Balancing)ì˜ ë³´ì•ˆ ì •ì±…</a>ì—ì„œë„ ì •ì±…ë³„ ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-13.png" alt="ELB Security Policy"></p>
<h2 id="SSL-ì¸ì¦ì„œ"><a href="#SSL-ì¸ì¦ì„œ" class="headerlink" title="SSL ì¸ì¦ì„œ"></a>SSL ì¸ì¦ì„œ</h2><p>TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œë¶€í„° ë°›ëŠ” SSL ì¸ì¦ì„œëŠ” ë¸Œë¼ìš°ì € í•´ë‹¹ ì‚¬ì´íŠ¸ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ íŒë‹¨í•  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ì‚¬í•­ì…ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìì²´ì ìœ¼ë¡œ <strong>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€(CA)</strong> ì— ëŒ€í•´ ê´€ë¦¬í•˜ê±°ë‚˜ ìš´ì˜ì²´ì œì— ë“±ë¡ëœ ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€ì— ëŒ€í•œ ì •ë³´ë¥¼ í™œìš©í•´ì„œ ì„œë²„ì—ì„œ ì œê³µí•˜ëŠ” SSL ì¸ì¦ì„œê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸°ê´€ìœ¼ë¡œë¶€í„° ë°œê¸‰ëœ ê²ƒì¸ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì„œë²„ì—ì„œ ì œê³µë°›ì€ SSL ì¸ì¦ì„œëŠ” ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€(CA)ì—ì„œ ì¸ì¦í•˜ëŠ” <strong>ì¤‘ê°„ ì¸ì¦ ê¸°ê´€(ICA)</strong> ìœ¼ë¡œë¶€í„° ë°œê¸‰ë°›ì€ ì¸ì¦ì„œì´ë©° ì´ë¥¼ <strong>ì²´ì¸ ì¸ì¦ì„œ</strong>ë¼ê³  í•©ë‹ˆë‹¤. <a href="https://sectigo.com/">Sectigo</a>ì™€ <a href="https://www.digicert.com/kr/">DigiCert</a> ê·¸ë¦¬ê³  <a href="https://www.globalsign.com/en">GlobalSign</a>ì€ ë§ì´ ì‚¬ìš©ë˜ì–´ì§€ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€ì…ë‹ˆë‹¤. </p>
<p>ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ ì¤‘ ECDSAì™€ ê°™ì€ íƒ€ì› ê³¡ì„  ë””ì§€í„¸ ì„œëª…ìœ¼ë¡œ ë°œê¸‰ëœ ì¸ì¦ì„œë¥¼ <strong>ECC ì¸ì¦ì„œ</strong>ë¼ê³ í•˜ë©° ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•´ì™”ë˜ RSA ê¸°ë°˜ì˜ ì¸ì¦ì„œë³´ë‹¤ íŠ¸ë˜í”½ì´ ë§ì€ ì„œë¹„ìŠ¤ì—ì„œ ì•”ë³µí˜¸í™”ì— ëŒ€í•œ ë¶€í•˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ì„œì…ë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì—ì„œëŠ” íƒ€ì› ê³¡ì„ í˜• ì„œëª… ë°©ì‹ìœ¼ë¡œ ë°œê¸‰í•˜ëŠ” ECC ì¸ì¦ì„œë¥¼ ë§Œë“¤ì–´ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<h3 id="ìì²´-ì„œëª…-ì¸ì¦ì„œ"><a href="#ìì²´-ì„œëª…-ì¸ì¦ì„œ" class="headerlink" title="ìì²´ ì„œëª… ì¸ì¦ì„œ"></a>ìì²´ ì„œëª… ì¸ì¦ì„œ</h3><p>ìì²´ ì„œëª… ì¸ì¦ì„œëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ìœ¼ë¡œë¶€í„° ë°œê¸‰ë°›ì§€ ì•Šê³  ì§ì ‘ ë§Œë“œëŠ” ì¸ì¦ì„œë¥¼ ë§í•©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ë‹¨ê³„ì—ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë„ë©”ì¸ì„ êµ¬ì…í•˜ê³  ì¸ì¦ ê¸°ê´€ìœ¼ë¡œë¶€í„° ì¸ì¦ì„œë¥¼ ë°›ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ë‹¹ì¥ ìˆ˜í–‰í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.</p>
<p>ë³´ìœ ì¤‘ì¸ ë„ë©”ì¸ì´ ìˆë‹¤ë©´ <a href="https://letsencrypt.org/">Letâ€™s Encrypt</a>ì„ í†µí•´ ë¬´ë£Œë¡œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ë³´ìœ ì¤‘ì¸ ë„ë©”ì¸ì´ ì—†ê¸° ë•Œë¬¸ì— OpenSSL ë˜ëŠ” ìë°”ì˜ Keystore ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì„œ ìì²´ ì„œëª… ì¸ì¦ì„œë¥¼ ë§Œë“¤ì–´ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì—ì„œëŠ” ì¸ì¦ ê¸°ê´€ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ëŒ€í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•  ë•Œ ì„œëª…í•´ì£¼ëŠ” ê²ƒê³¼ ë™ì¼í•˜ê²Œ ìì²´ ì„œëª… CA ì¸ì¦ì„œë¥¼ ë§Œë“¤ê³  ì´ê²ƒìœ¼ë¡œ ì„œëª…ëœ ì„œë²„ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ëŠ” ê³¼ì •ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ê³¼ì •ì„ í†µí•´ ì—¬ëŸ¬ë¶„ì€ ë°œê¸‰ë°›ì€ SSL ì„œë²„ ì¸ì¦ì„œê°€ ì–´ë–¤ ê³¼ì •ì„ ê±°ì³ ë°œê¸‰ë˜ì—ˆëŠ”ì§€ë¥¼ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="ìì²´-ì„œëª…-CA-ì¸ì¦ì„œ-ë°œê¸‰"><a href="#ìì²´-ì„œëª…-CA-ì¸ì¦ì„œ-ë°œê¸‰" class="headerlink" title="ìì²´ ì„œëª… CA ì¸ì¦ì„œ ë°œê¸‰"></a>ìì²´ ì„œëª… CA ì¸ì¦ì„œ ë°œê¸‰</h4><p>ë¨¼ì €, ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤ê³  ë³´ì¥í•˜ëŠ” CA ì¸ì¦ì„œë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤. ì¸ì¦ì„œëŠ” <a href="(https://www.sslcert.co.kr/guides/kb/54)">ë‹¤ì–‘í•œ í˜•ì‹</a>ìœ¼ë¡œ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‚˜ OpenSSL ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„œë¥¼ ë§Œë“¤ë©´ PEM í˜•ì‹ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ë§Œì•½, ì—¬ëŸ¬ë¶„ì´ ì¸ì¦ ê¸°ê´€ìœ¼ë¡œë¶€í„° ë°œê¸‰ë°›ëŠ” ì¸ì¦ì„œ í˜•ì‹ì´ ë‹¤ë¥´ë”ë¼ë„ ë‹¤ë¥¸ í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•  ìˆ˜ ìˆìœ¼ë‹ˆ ê±±ì •í•˜ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°œê¸‰ëœ PEM í˜•ì‹ì˜ ì„œë²„ ì¸ì¦ì„œë¥¼ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•´ì•¼í•˜ëŠ” ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤.</p>
<p>OpenSSLìœ¼ë¡œ ìì²´ ì„œëª… CA ì¸ì¦ì„œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ê°œì¸í‚¤ì™€ ì¸ì¦ì„œ ì„œëª… ìš”ì²­(CSR)ì„ ë¨¼ì € ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤. ì•ì„œ ì–¸ê¸‰í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ì¼ë°˜ì ìœ¼ë¡œ ë°œê¸‰í•˜ëŠ” RSA ê¸°ë°˜ì˜ ê°œì¸í‚¤ê°€ ì•„ë‹Œ ECC ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ê¸° ìœ„í•œ <strong>ECDSA ê¸°ë°˜ì˜ ê°œì¸í‚¤</strong>ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps"># ECDSA ê¸°ë°˜ì˜ ê°œì¸í‚¤ ìƒì„±
PS openssl ecparam -out ca.key -name prime256v1 -genkey

# ì¸ì¦ì„œ ì„œëª… ìš”ì²­(CSR) ìƒì„±
PS openssl req -new -sha256 -subj &#x2F;C&#x3D;KO&#x2F;ST&#x3D;None&#x2F;L&#x3D;None&#x2F;O&#x3D;None&#x2F;CN&#x3D;CA -key ca.key -out ca.csr</code></pre>

<p>ìœ„ ëª…ë ¹ì–´ ì˜ˆì‹œì—ì„œ ê°œì¸í‚¤ë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©ëœ <strong>prime256v1</strong>ì€ íƒ€ì› ê³¡ì„ í˜• ì„œëª… ë°©ì‹ì„ ì§€ì¹­í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤. ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ ê°œì¸í‚¤ì™€ ì¸ì¦ì„œ ì„œëª… ìš”ì²­ íŒŒì¼ì´ ë§Œë“¤ì–´ì¡Œìœ¼ë©´ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ì„œ ìì²´ ì„œëª… CA ì¸ì¦ì„œë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps">PS openssl x509 -req -sha256 -days 1095 -in ca.csr -signkey ca.key -out ca.crt
Signature ok
subject&#x3D;C &#x3D; KO, ST &#x3D; None, L &#x3D; None, O &#x3D; None, CN &#x3D; CA
Getting Private key</code></pre>

<p>-days ì˜µì…˜ìœ¼ë¡œ ì¸í•´ ë§Œë“¤ì–´ì§„ ìì²´ ì„œëª… CA ì¸ì¦ì„œëŠ” 3ë…„(1095ì¼)ê¹Œì§€ ìœ íš¨í•˜ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ ê¸°ê´€ì˜ ì¸ì¦ì„œëŠ” ì„œë²„ ì¸ì¦ì„œë³´ë‹¤ ê¸´ ë§Œë£Œì¼ìë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. ì„œë²„ ì¸ì¦ì„œ ë¿ë§Œ ì•„ë‹ˆë¼ ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€ì˜ CA ì¸ì¦ì„œê°€ ì–¸ì œ ë§Œë£Œë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<h4 id="ìì²´-ì„œëª…-ì„œë²„-ì¸ì¦ì„œ-ë°œê¸‰"><a href="#ìì²´-ì„œëª…-ì„œë²„-ì¸ì¦ì„œ-ë°œê¸‰" class="headerlink" title="ìì²´ ì„œëª… ì„œë²„ ì¸ì¦ì„œ ë°œê¸‰"></a>ìì²´ ì„œëª… ì„œë²„ ì¸ì¦ì„œ ë°œê¸‰</h4><p>ìì²´ ì„œëª…í•œ CA ì¸ì¦ì„œê°€ ì¤€ë¹„ë˜ì—ˆìœ¼ë‹ˆ CA ì¸ì¦ì„œë¡œ ì„œëª…í•œ ì„œë²„ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤. CA ì¸ì¦ì„œë¥¼ ë§Œë“¤ë•Œì™€ ë™ì¼í•˜ê²Œ ê°œì¸í‚¤ì™€ ì¸ì¦ì„œ ì„œëª… ìš”ì²­ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps">PS openssl ecparam -out server.key -name prime256v1 -genkey
PS openssl req -new -sha256 -subj &#x2F;C&#x3D;KO&#x2F;ST&#x3D;None&#x2F;L&#x3D;None&#x2F;O&#x3D;None&#x2F;CN&#x3D;localhost -key server.key -out server.csr</code></pre>

<p>ìì²´ ì„œëª… ì„œë²„ ì¸ì¦ì„œë¥¼ ë§Œë“¤ë•ŒëŠ” CA ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ ì„œë²„ ì¸ì¦ì„œê°€ CA ì¸ì¦ì„œì— ì˜í•´ ì„œëª…ë˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. </p>
<p>ì„œë²„ ì¸ì¦ì„œë¥¼ ë§Œë“¤ê¸°ì— ì•ì„œ ì£¼ì²´ ì´ë¦„ì¸ localhost ëŒ€ì‹ ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‹ë³„ ì´ë¦„ì¸ SAN(Subject Alternative Name)ì„ ì ìš©í•˜ê¸° ìœ„í•œ íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤. SANì„ ì ìš©í•´ë³´ëŠ” ì´ìœ ëŠ” í•˜ë‚˜ì˜ ì¸ì¦ì„œë¡œ ì—¬ëŸ¬ ë„ë©”ì¸ì„ ì‹ë³„í•  ìˆ˜ ìˆìŒì„ í™•ì¸í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>
<pre class="language-ext" data-language="ext"><div class="caption"><span>san.ext</span></div><code class="language-ext">authorityKeyIdentifier&#x3D;keyid,issuer
subjectAltName &#x3D; @alt_names

[alt_names]
IP.1 &#x3D; 127.0.0.1
DNS.1 &#x3D; localhost
DNS.2 &#x3D; mambo.kr</code></pre>

<p>ì¸ì¦ ê¸°ê´€ì—ì„œ ë°œê¸‰í•˜ëŠ” SSL ì¸ì¦ì„œëŠ” ìœ íš¨ ê¸°ê°„ì„ 1ë…„ìœ¼ë¡œ ì„¤ì •í•˜ë¯€ë¡œ 398ì¼ ë™ì•ˆ ìœ íš¨í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps"># ì„œë²„ ì¸ì¦ì„œ ë°œê¸‰
PS openssl x509 -req -sha256 -days 398 -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -extfile san.ext

# ì„œë²„ ì¸ì¦ì„œ ì¡°íšŒ
PS openssl x509 -in server.crt -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            66<span class="emoji" alias="ab" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f18e.png?v8">&#x1f18e;</span>bb:ed:19:f3:c7:37:9d:d6:5d:29:da:03:7d:b9:4f:53:7c:b7
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C &#x3D; KO, ST &#x3D; None, L &#x3D; None, O &#x3D; None, CN &#x3D; CA
        Validity
            Not Before: Aug 27 11:27:54 2021 GMT
            Not After : Sep 29 11:27:54 2022 GMT
        Subject: C &#x3D; KO, ST &#x3D; None, L &#x3D; None, O &#x3D; None, CN &#x3D; localhost
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:74:06:a3:39:91:2e:4b:cc:45:40:e8:b0:f8:a3:
                    96:69:91:66:ef:d3:b3:93:8d:e5:09:78:aa:a5:af:
                    67:9d:47:13:78:54:7e:d9:02:ba:e4:ca:aa:d4:9f:
                    8b:f3:be:d7:40:1e:f5:c4:8d:7a:23:5b:09:c3:57:
                    75:38:7e:4d:e6
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Authority Key Identifier:
                DirName:&#x2F;C&#x3D;KO&#x2F;ST&#x3D;None&#x2F;L&#x3D;None&#x2F;O&#x3D;None&#x2F;CN&#x3D;CA
                serial:5D:98:7B:BF:10:35:6B:9C:11:97:2C:AC:21:E3:28:C2:FF:AF:2D:3D

            X509v3 Subject Alternative Name:
                IP Address:127.0.0.1, DNS:localhost, DNS:mambo.kr
    Signature Algorithm: ecdsa-with-SHA256
         30:46:02:21:00:ce:5d:3a:68:e9:04:dc:a9:fd:e6:14:de:bb:
         11:5c:5a:a1:bf:b4:f9:1a:61:08:cd:da:47:d1:b4:68:80:81:
         d1:02:21:00:e7:a1:b4:cb:06:6d:ad:80:d3:89:09:c1:1e:ca:
         6e:c7:2e:14:fd:99:d9:df:44:14:cb:47:39:df:ea:5e:e0:1e</code></pre>

<p>ì¸ì¦ì„œ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ CA ì¸ì¦ì„œë¡œ ì„œëª…ë˜ì—ˆê³  SANì´ ì„¤ì •ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìœ¼ë¯€ë¡œ ìì²´ ì„œëª… ì¸ì¦ì„œ ë°œê¸‰ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ì„œë²„-ì¸ì¦ì„œ"><a href="#ì„œë²„-ì¸ì¦ì„œ" class="headerlink" title="ì„œë²„ ì¸ì¦ì„œ"></a>ì„œë²„ ì¸ì¦ì„œ</h2><p>ì•ì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì‚¬ìš©í•  ìì²´ ì„œëª…ëœ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í–ˆìŠµë‹ˆë‹¤. ì›¹ ì„œë¹„ìŠ¤ë¥¼ HTTPSë¡œ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” SSL ì¸ì¦ì„œë¥¼ <strong>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ì§ì ‘ ë“±ë¡</strong>í•˜ê±°ë‚˜ <strong>Nginxì™€ ê°™ì€ L7 ë¡œë“œë°¸ëŸ°ì„œì— SSL ì¸ì¦ì„œë¥¼ ë“±ë¡</strong>í•´ì•¼í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ì„œ SSL ì¸ì¦ì„œë¥¼ ë“±ë¡í•´ë³´ê³  Nginx ì„œë²„ë¥¼ ì¶”ê°€ë¡œ êµ¬ì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì•„ë‹Œ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ TLS í•¸ë“œì‰ì´í‚¹ì„ ìˆ˜í–‰í•¨ì„ ê²€ì¦í•´ë´…ë‹ˆë‹¤.</p>
<h3 id="JKS-í˜•ì‹ì˜-ì¸ì¦ì„œë¡œ-ë³€í™˜"><a href="#JKS-í˜•ì‹ì˜-ì¸ì¦ì„œë¡œ-ë³€í™˜" class="headerlink" title="JKS í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜"></a>JKS í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜</h3><p>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ HTTPSë¥¼ í™œì„±í™”í•˜ê¸° ìœ„í•´ì„œëŠ” KeyStore í˜•ì‹ì˜ SSL ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” OpenSSLì„ ì‚¬ìš©í•´ì„œ PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¥¼ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•´ì•¼í•©ë‹ˆë‹¤. PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¥¼ KeyStore í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì˜ ê³¼ì •ì„ ê±°ì³ì•¼í•©ë‹ˆë‹¤.</p>
<ol>
<li>PEM ì¸ì¦ì„œë¥¼ PFX ì¸ì¦ì„œë¡œ ë³€í™˜</li>
<li>PFX ì¸ì¦ì„œë¥¼ JKS ì¸ì¦ì„œë¡œ ë³€í™˜</li>
</ol>
<h4 id="PEM-ì¸ì¦ì„œë¥¼-PFX-ì¸ì¦ì„œë¡œ"><a href="#PEM-ì¸ì¦ì„œë¥¼-PFX-ì¸ì¦ì„œë¡œ" class="headerlink" title="PEM ì¸ì¦ì„œë¥¼ PFX ì¸ì¦ì„œë¡œ"></a>PEM ì¸ì¦ì„œë¥¼ PFX ì¸ì¦ì„œë¡œ</h4><p>OpenSSLì„ ì‚¬ìš©í•´ì„œ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¥¼ PKCS12 í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PKCS12 í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•  ë•Œ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ëŠ” KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•  ë•Œ ì¸ì¦ìš©ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps">PS openssl pkcs12 -export -inkey server.key -in server.crt -out server.pfx
Enter Export Password: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
Verifying - Enter Export Password: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]</code></pre>

<h4 id="PFX-ì¸ì¦ì„œë¥¼-JKS-ì¸ì¦ì„œë¡œ"><a href="#PFX-ì¸ì¦ì„œë¥¼-JKS-ì¸ì¦ì„œë¡œ" class="headerlink" title="PFX ì¸ì¦ì„œë¥¼ JKS ì¸ì¦ì„œë¡œ"></a>PFX ì¸ì¦ì„œë¥¼ JKS ì¸ì¦ì„œë¡œ</h4><p>ìë°”ì˜ Keytool ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì„œ PKCS12 í˜•ì‹ì˜ ì¸ì¦ì„œë¥¼ KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps">PS keytool -importkeystore -srckeystore server.pfx -srcstoretype pkcs12 -destkeystore server.jks -deststoretype pkcs12
í‚¤ ì €ì¥ì†Œ server.pfxì„(ë¥¼) server.jks(ìœ¼)ë¡œ ì„í¬íŠ¸í•˜ëŠ” ì¤‘...
ëŒ€ìƒ í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
ì†ŒìŠ¤ í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: [PFX ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
1 ë³„ì¹­ì— ëŒ€í•œ í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì„í¬íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
ì„í¬íŠ¸ ëª…ë ¹ ì™„ë£Œ: ì„±ê³µì ìœ¼ë¡œ ì„í¬íŠ¸ëœ í•­ëª©ì€ 1ê°œ, ì‹¤íŒ¨í•˜ê±°ë‚˜ ì·¨ì†Œëœ í•­ëª©ì€ 0ê°œì…ë‹ˆë‹¤.</code></pre>

<h3 id="ìŠ¤í”„ë§-ë¶€íŠ¸-ì• í”Œë¦¬ì¼€ì´ì…˜"><a href="#ìŠ¤í”„ë§-ë¶€íŠ¸-ì• í”Œë¦¬ì¼€ì´ì…˜" class="headerlink" title="ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜"></a>ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜</h3><p>KeyStore í˜•ì‹ì˜ ì„œë²„ ì¸ì¦ì„œê°€ ì¤€ë¹„ë˜ì—ˆìœ¼ë‹ˆ ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“  í›„ HTTPSë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•©ë‹ˆë‹¤.</p>
<pre class="language-properties" data-language="properties"><div class="caption"><span>application.properties</span></div><code class="language-properties"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8080</span>
<span class="token key attr-name">server.ssl.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">server.ssl.protocol</span><span class="token punctuation">=</span><span class="token value attr-value">TLS</span>
<span class="token key attr-name">server.ssl.enabled-protocols</span><span class="token punctuation">=</span><span class="token value attr-value">TLSv1.2,TLSv1.3</span>
<span class="token key attr-name">server.ssl.key-store</span><span class="token punctuation">=</span><span class="token value attr-value">classpath:cert/server.jks</span>
<span class="token key attr-name">server.ssl.key-store-password</span><span class="token punctuation">=</span><span class="token value attr-value">passwd</span>
<span class="token key attr-name">server.ssl.key-store-type</span><span class="token punctuation">=</span><span class="token value attr-value">pkcs12</span></code></pre>

<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-06.png"></p>
<p>ì‹¤í–‰ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ìì²´ ì„œëª…ëœ ì„œë²„ ì¸ì¦ì„œì´ê¸° ë•Œë¬¸ì— ë°œê¸‰ìì¸ CAì— ëŒ€í•œ ì •ë³´ë¥¼ ë¸Œë¼ìš°ì €ê°€ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ì‚¬ì´íŠ¸ë¼ê³  ì•Œë ¤ì£¼ëŠ” ê²ƒì€ ë‹¹ì—°í•œ ë¶€ë¶„ìœ¼ë¡œ ì´ ê²½ê³ ë¥¼ ë¬´ì‹œí•˜ê³  ì ‘ê·¼í•  ìˆ˜ë„ ìˆì§€ë§Œ ìš°ë¦¬ëŠ” <strong>ìì²´ ì„œëª… CA ì¸ì¦ì„œë¥¼ ë³´ìœ í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸°ê´€ìœ¼ë¡œ ë“±ë¡</strong>í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-07.png"></p>
<p><strong>ì„¤ì • &gt; ê°œì¸ì •ë³´ ë° ë³´ì•ˆ &gt; ë³´ì•ˆ &gt; ì¸ì¦ì„œ ê´€ë¦¬</strong>ë¡œ ë“¤ì–´ê°€ì„œ ìì²´ ì„œëª…ëœ CA ì¸ì¦ì„œë¥¼ ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-08.png"></p>
<p>ë£¨íŠ¸ ì¸ì¦ ê¸°ê´€ ëª©ë¡ì— ìì²´ ì„œëª… CA ì¸ì¦ì„œë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‹ ë¢°í•  ìˆ˜ ì—†ë˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì¸ì¦ì„œë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-09.png" alt="127.0.0.1"><br><img data-src="/images/posts/ssl-certificate/ssl-certificate-10.png" alt="mambo.kr"></p>
<p>ë¡œì»¬í˜¸ìŠ¤íŠ¸ ëŒ€ì‹ ì— SANìœ¼ë¡œ ì§€ì •í•˜ì˜€ë˜ 127.0.0.1ê³¼ mambo.krì— ëŒ€í•´ì„œë„ ì‹ ë¢°í•˜ì˜€ìŠµë‹ˆë‹¤. ë§Œì•½, ë”°ë¼í•´ë³´ê³  ê³„ì‹œëŠ” ë¶„ë“¤ ì¤‘ì—ì„œ ì—¬ì „íˆ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì˜¤ëŠ” ê²½ìš° ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ì´ì œ Nginxì„ ì¶”ê°€ì ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì•„ë‹Œ Nginxì—ì„œ ì„œë²„ ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ì—¬ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. ì‹¤í–‰í–ˆë˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì¢…ë£Œí•©ë‹ˆë‹¤.</p>
<h3 id="PEM-í˜•ì‹ì˜-ì¸ì¦ì„œë¡œ-ë³€í™˜"><a href="#PEM-í˜•ì‹ì˜-ì¸ì¦ì„œë¡œ-ë³€í™˜" class="headerlink" title="PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜"></a>PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜</h3><p>ì¸ì¦ ê¸°ê´€ ëŒ€í–‰ ì—…ì²´ì—ì„œ ë°œê¸‰í•´ì¤€ ì¸ì¦ì„œê°€ KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¼ë©´ PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜í•´ì•¼í•©ë‹ˆë‹¤. ì´ë¯¸ ìš°ë¦¬ëŠ” PEM í˜•ì‹ì˜ ì„œë²„ ì¸ì¦ì„œê°€ ìˆëŠ” ìƒíƒœì´ì§€ë§Œ ì—†ëŠ” ìƒíƒœë¼ê³  ê°€ì •í•˜ê³  KeyStore í˜•ì‹ì˜ ì¸ì¦ì„œë¥¼ PEM í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ë´…ë‹ˆë‹¤.</p>
<p>ë³€í™˜ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ì´ KeyStore ì¸ì¦ì„œë¡œ ë³€í™˜í•  ë•Œì˜ ë°˜ëŒ€ ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.</p>
<ol>
<li>JKS ì¸ì¦ì„œë¥¼ PFX ì¸ì¦ì„œë¡œ ë³€í™˜</li>
<li>PFX ì¸ì¦ì„œë¥¼ PEM ì¸ì¦ì„œë¡œ ë³€í™˜</li>
</ol>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps"># JKS ì¸ì¦ì„œë¥¼ PFX ì¸ì¦ì„œë¡œ ë³€í™˜
PS keytool -importkeystore -srckeystore server.jks -destkeystore server.pfx -deststoretype pkcs12
í‚¤ ì €ì¥ì†Œ server.jksì„(ë¥¼) server.pfx(ìœ¼)ë¡œ ì„í¬íŠ¸í•˜ëŠ” ì¤‘...
ëŒ€ìƒ í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
ì†ŒìŠ¤ í‚¤ ì €ì¥ì†Œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: [JKS ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
1 ë³„ì¹­ì— ëŒ€í•œ í•­ëª©ì´ ì„±ê³µì ìœ¼ë¡œ ì„í¬íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
ì„í¬íŠ¸ ëª…ë ¹ ì™„ë£Œ: ì„±ê³µì ìœ¼ë¡œ ì„í¬íŠ¸ëœ í•­ëª©ì€ 1ê°œ, ì‹¤íŒ¨í•˜ê±°ë‚˜ ì·¨ì†Œëœ í•­ëª©ì€ 0ê°œì…ë‹ˆë‹¤.

# PFX ì¸ì¦ì„œì—ì„œ PEM í˜•ì‹ì˜ ì¸ì¦ì„œë¡œ ë³€í™˜
PS openssl pkcs12 -in server.pfx -out server.crt -clcerts -nokeys
Enter Import Password: [PFX ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]

# PFX ì¸ì¦ì„œì—ì„œ ê°œì¸í‚¤ ì¶”ì¶œ
PS openssl pkcs12 -in server.pfx -out server.key -nocerts
Enter Import Password: [PFX ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
Enter PEM pass phrase: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]
Verifying - Enter PEM pass phrase: [ë¹„ë°€ë²ˆí˜¸ ì…ë ¥:passwd]</code></pre>

<p>PFX ì¸ì¦ì„œë¥¼ PEM í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ê³ ë‚˜ì„œëŠ” ë¶€ê°€ì ì¸ í—¤ë”ê°€ ë“¤ì–´ê°€ìˆìœ¼ë¯€ë¡œ PEM í˜•ì‹ì— ê´€ë ¨ëœ ë¶€ë¶„ë§Œ ë³„ë„ë¡œ ë‹¤ì‹œ ì €ì¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê°œì¸í‚¤ì˜ ê²½ìš° -----BEGIN PRIVATE KEY-----ìœ¼ë¡œ ì‹œì‘í•´ì„œ -----END PRIVATE KEY-----ìœ¼ë¡œ ëë‚˜ëŠ” ë¶€ë¶„ì„ ë§í•©ë‹ˆë‹¤.</p>
<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p>Nginxì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì€ ë„ì»¤ ì»´í¬ì¦ˆë¡œ ì‹¤í–‰í•˜ê² ìŠµë‹ˆë‹¤. ë¨¼ì €, ì•ì„  ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ê°€ëŠ¥í•œ JAR íŒŒì¼ë¡œ íŒ¨í‚¤ì§•í•˜ì—¬ ì¤€ë¹„í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><div class="caption"><span>Windows Terminal</span></div><code class="language-bash">gradle bootJar
<span class="token operator">></span> Task :compileJava UP-TO-DATE
<span class="token operator">></span> Task :processResources UP-TO-DATE
<span class="token operator">></span> Task :classes UP-TO-DATE
<span class="token operator">></span> Task :bootJarMainClassName
<span class="token operator">></span> Task :bootJar
<span class="token comment"># build/libs/demo-0.0.1-SNAPSHOT.jar</span></code></pre>

<p>ê·¸ë¦¬ê³  ë‹¤ìŒì˜ ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„œë²„ ì¸ì¦ì„œ ê·¸ë¦¬ê³  ê°œì¸í‚¤ íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>docker-compose.yaml</span></div><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span> 
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf
      <span class="token punctuation">-</span> ./server.crt<span class="token punctuation">:</span>/etc/nginx/server.crt
      <span class="token punctuation">-</span> ./server.key<span class="token punctuation">:</span>/etc/nginx/server.key
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> adoptopenjdk/openjdk11
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'java -jar /etc/app.jar'</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./demo<span class="token punctuation">-</span>0.0.1<span class="token punctuation">-</span>SNAPSHOT.jar<span class="token punctuation">:</span>/etc/app.jar
</code></pre>

<p>ë„ì»¤ ì»´í¬ì¦ˆê°€ ì°¸ì¡°í•˜ëŠ” Nginx ì„¤ì • íŒŒì¼ì— 443 í¬íŠ¸ì— SSLì„ í™œì„±í™”í•˜ê³  SSL ì¸ì¦ì„œë¥¼ ì§€ì •í•˜ë„ë¡ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-conf" data-language="conf"><div class="caption"><span>nginx.conf</span></div><code class="language-conf">worker_processes auto;

events &#123;
    worker_connections  1024;
&#125;

http &#123;
    access_log      &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log;
    error_log       &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log;

    include         &#x2F;etc&#x2F;nginx&#x2F;mime.types;

    server &#123;
        listen              443 ssl;
        server_name         localhost 127.0.0.1 mambo.kr;
        ssl_certificate     &#x2F;etc&#x2F;nginx&#x2F;server.crt;
        ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;server.key;
        ssl_protocols       TLSv1.2 TLSv1.3;
        ssl_ciphers         HIGH:!aNULL:!MD5;

        location &#x2F; &#123;
            proxy_pass         http:&#x2F;&#x2F;app:8080;
            proxy_redirect     off;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
        &#125;
    &#125;

    keepalive_timeout  60;
    include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf;
&#125;</code></pre>

<p>ë„ì»¤ ì»´í¬ì¦ˆ ëª…ë ¹ì–´ë¡œ Nginxì™€ í•¨ê»˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•©ë‹ˆë‹¤.</p>
<pre class="language-ps" data-language="ps"><div class="caption"><span>Windows Terminal</span></div><code class="language-ps">docker-compose up -d</code></pre>

<p>ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆë‹¤ë©´ Nginxì˜ 443 í¬íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ì˜ í†µì‹ ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒ ì²˜ëŸ¼ TLS í•¸ë“œì‰ì´í¬ ê³¼ì •ì´ Nginxì— ì˜í•´ ì œëŒ€ë¡œ ìˆ˜í–‰ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ssl-certificate/ssl-certificate-11.png"></p>
<p>ì´ìƒìœ¼ë¡œ SSL ì¸ì¦ì„œì— ëŒ€í•œ ì •ë¦¬ë¥¼ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. </p>
<p>ì¸í”„ë¼ êµ¬ì¡°ìƒ SSL ì¸ì¦ì„œë¥¼ ì–´ë””ì— ë“±ë¡í•˜ê³  TLS í•¸ë“œì‰ì´í‚¹ ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ë„ ì¤‘ìš”í•œ ë¶€ë¶„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš´ì˜ì¤‘ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤ë©´ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•˜ëŠ” Nginx ë˜ëŠ” NLBì—ì„œ TLS í•¸ë“œì‰ì´í‚¹ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ SSL ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ êµ¬ì„±í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ìš”ì²­ì— ëŒ€í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê¹Œì§€ ë„ë‹¬í•˜ì§€ ì•Šë„ë¡ í•˜ì—¬ ì„œë²„ ë¶€í•˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡ , ë¡œë“œë°¸ëŸ°ì„œì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ìƒëŒ€ì ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì„œ ì„œë²„ì˜ ë¶€í•˜ê°€ ì»¤ì§€ëŠ” ê²ƒì€ ê°ì•ˆí•´ì•¼í•©ë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/create-tls-listener.html">Network Load Balancerë¥¼ ìœ„í•œ TLS ë¦¬ìŠ¤ë„ˆ</a></li>
<li><a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/configuring-https-ssl.html">X509 ì¸ì¦ì„œ ìƒì„± ë° ì„œëª…</a></li>
<li><a href="https://www.baeldung.com/java-keystore-convert-to-pem-format">Converting a Java Keystore Into PEM Format</a></li>
<li><a href="https://stackoverflow.com/questions/13732826/convert-pem-to-crt-and-key">Convert .pem to .crt and .key</a></li>
<li><a href="https://www.sslcert.co.kr/guides/SSL-Certificate-Convert-Format">Convert Certificate Format SSL ì¸ì¦ì„œ ë³€í™˜ ê°€ì´ë“œ</a></li>
<li><a href="https://letsencrypt.org/ko/docs/certificates-for-localhost/">localhostë¥¼ ìœ„í•œ ì¸ì¦ì„œ</a></li>
</ul>
]]></content>
      <tags>
        <tag>TLS</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title>SonarQubeì™€ Github Actionìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì •ì  ë¶„ì„</title>
    <url>/static-analysis-performed-by-sonarqube-and-github-action/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ SonarQubeì™€ Github Actionì„ í†µí•´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ê³¼ì •ì„ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<h2 id="SonarQube"><a href="#SonarQube" class="headerlink" title="SonarQube"></a>SonarQube</h2><p><a href="https://www.sonarqube.org/">ì†Œë‚˜íë¸Œ</a>ëŠ” ë‹¤ì–‘í•œ ì–¸ì–´ì— ëŒ€í•œ ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í•˜ê³  ì·¨ì•½ì ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ì  ë¶„ì„ ë„êµ¬ì…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆì–´ ì œê°€ SonarQubeë¥¼ ë„ì…í•˜ê³  ì›”ìš”ì¼ê³¼ ê¸ˆìš”ì¼ë§ˆë‹¤ í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì œê°€ ì •ì  ë¶„ì„ì„ ìœ„í•´ì„œ ì†Œë‚˜íë¸Œë¥¼ ë„ì…í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-00.png" alt="ì†Œë‚˜íë¸Œ ë¼ì´ì„¼ìŠ¤"></p>
<ol>
<li>GPLv3 ë¼ì´ì„¼ìŠ¤ ê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ ë²„ì „ ì§€ì›</li>
<li>IntelliJ ë˜ëŠ” VSCodeì™€ ê°™ì€ IDEë¥¼ ìœ„í•œ SonarLint ì§€ì›</li>
<li>ì†Œë‚˜íë¸Œì— ëŒ€í•œ ê³µì‹ ë„ì»¤ ì´ë¯¸ì§€ ì§€ì›</li>
<li>ë‹¤ì–‘í•œ ì–¸ì–´ì™€ ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ì˜ ê·œì¹™ ì§€ì›</li>
</ol>
<p>íšŒì‚¬ ê°œë°œìë“¤ì´ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¸í…”ë¦¬ì œì´ IDEA ë˜ëŠ” VSCodeì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” SonarLintë¥¼ ì œê³µí•˜ì—¬ ë³„ë„ì˜ ì„œë²„ ì—†ì´ë„ ê°„ë‹¨í•˜ê²Œ ìì²´ì ìœ¼ë¡œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ê³µì‹ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í†µí•´ ë³„ë‹¤ë¥¸ ì„¤ì • ì—†ì´ë„ ê°„ë‹¨í•˜ê²Œ ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì†Œë‚˜íë¸Œ-ì‹œìŠ¤í…œ-êµ¬ì„±"><a href="#ì†Œë‚˜íë¸Œ-ì‹œìŠ¤í…œ-êµ¬ì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œ êµ¬ì„±"></a>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œ êµ¬ì„±</h3><p>ì†Œë‚˜íë¸ŒëŠ” <a href="https://docs.sonarqube.org/latest/setup/install-server/">ì§ì ‘ ì„¤ì¹˜</a>í•  ìˆ˜ë„ ìˆìœ¼ë©° ë„ì»¤ ì´ë¯¸ì§€ì™€ í•¨ê»˜ ì œê³µí•˜ëŠ” ë„ì»¤ ì»´í¬ì¦ˆ ë¬¸ì„œë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><a href="https://github.com/SonarSource/docker-sonarqube/blob/master/example-compose-files/sq-with-postgres/docker-compose.yml">sq-with-postgres&#x2F;docker-compose.yml</a></p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.8"</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> sonarqube<span class="token punctuation">:</span>9.1.0<span class="token punctuation">-</span>community
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9000:9000"</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> sonarnet
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">SONAR_JDBC_URL</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>postgresql<span class="token punctuation">:</span>//db<span class="token punctuation">:</span>5432/sonar
      <span class="token key atrule">SONAR_JDBC_USERNAME</span><span class="token punctuation">:</span> sonar
      <span class="token key atrule">SONAR_JDBC_PASSWORD</span><span class="token punctuation">:</span> sonar
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> sonarqube_data<span class="token punctuation">:</span>/opt/sonarqube/data
      <span class="token punctuation">-</span> sonarqube_extensions<span class="token punctuation">:</span>/opt/sonarqube/extensions
      <span class="token punctuation">-</span> sonarqube_logs<span class="token punctuation">:</span>/opt/sonarqube/logs
      <span class="token punctuation">-</span> sonarqube_temp<span class="token punctuation">:</span>/opt/sonarqube/temp
      <span class="token punctuation">-</span> sonarqube_bundled<span class="token punctuation">-</span>plugins<span class="token punctuation">:</span>/opt/sonarqube/lib/bundled<span class="token punctuation">-</span>plugins
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">nproc</span><span class="token punctuation">:</span> <span class="token number">65535</span>
      <span class="token key atrule">nofile</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">262144</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">262144</span>
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> sonarnet
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_USER</span><span class="token punctuation">:</span> sonar
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> sonar
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> postgresql<span class="token punctuation">:</span>/var/lib/postgresql
      <span class="token punctuation">-</span> postgresql_data<span class="token punctuation">:</span>/var/lib/postgresql/data

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarnet</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarqube_data</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarqube_extensions</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarqube_logs</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarqube_temp</span><span class="token punctuation">:</span>
  <span class="token key atrule">sonarqube_bundled-plugins</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgresql</span><span class="token punctuation">:</span>
  postgresql_data<span class="token punctuation">:</span></code></pre>

<h4 id="WSL-vm-max-map-count"><a href="#WSL-vm-max-map-count" class="headerlink" title="WSL vm.max_map_count"></a>WSL vm.max_map_count</h4><p>ìœˆë„ìš° í™˜ê²½ì—ì„œ WSLë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš° vm.max_map_countë¡œ ì¸í•˜ì—¬ ì†Œë‚˜íë¸Œì—ì„œ ì‹¤í–‰í•˜ëŠ” Elasticsearchê°€ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ìœˆë„ìš° í„°ë¯¸ë„ì—ì„œ WSLë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ì ‘ì† í›„ ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ Elasticsearchì—ì„œ ìš”êµ¬í•˜ëŠ” ìˆ˜ì¹˜ë¡œ ë³€ê²½í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span>
wsl <span class="token parameter variable">-d</span> docker-desktop
<span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">vm.max_map_count</span><span class="token operator">=</span><span class="token number">262144</span></code></pre>

<blockquote>
<p>ì†Œë‚˜íë¸Œì˜ ê´€ë¦¬ì ê³„ì •ê³¼ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ëŠ” admin&#x2F;admin ì…ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ì†Œë‚˜íë¸Œ-í”„ë¡œì íŠ¸-ìƒì„±"><a href="#ì†Œë‚˜íë¸Œ-í”„ë¡œì íŠ¸-ìƒì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ í”„ë¡œì íŠ¸ ìƒì„±"></a>ì†Œë‚˜íë¸Œ í”„ë¡œì íŠ¸ ìƒì„±</h3><p>ì†Œë‚˜íë¸Œì— ì ‘ì†í•˜ì˜€ë‹¤ë©´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•  í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤. ì €ëŠ” ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-01.png" alt="spring5-web-example í”„ë¡œì íŠ¸"></p>
<p>ê·¸ë¦¬ê³  ì†Œë‚˜íë¸Œì— ë¡œê·¸ì¸í•  ìˆ˜ ìˆëŠ” í† í°ì„ ë°œí–‰í•©ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-02.png"></p>
<p>í† í° ìš©ë„ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ì´ë¦„ì„ ì§€ì •í•˜ëŠ”ë° ì €ëŠ” Github Actionì—ì„œ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ GITHUB_ACTIONì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-03.png"></p>
<p>ì €ëŠ” ë¡œì»¬ ì»´í“¨í„°ì— ì†Œë‚˜íë¸Œë¥¼ ì‹¤í–‰í•˜ì˜€ê³  í•„ìš”í• ë•Œë§Œ í¬íŠ¸í¬ì›Œë”©ì„ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ í† í°ì„ ê³µê°œí•˜ê² ìŠµë‹ˆë‹¤. (ì–´ì°¨í”¼ í•™ìŠµ í›„ì— ì§€ì›€â€¦)</p>
<h3 id="ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì½”ë“œ-ì¶”ê°€"><a href="#ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì½”ë“œ-ì¶”ê°€" class="headerlink" title="ì†Œë‚˜íë¸Œ ê´€ë ¨ ì½”ë“œ ì¶”ê°€"></a>ì†Œë‚˜íë¸Œ ê´€ë ¨ ì½”ë“œ ì¶”ê°€</h3><p>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì— í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  í† í°ì„ ë°œê¸‰í•˜ì˜€ê¸° ë•Œë¬¸ì— ì†Œë‚˜íë¸Œì™€ ì—°ê³„í•  ìˆ˜ ìˆë„ë¡ í”„ë¡œì íŠ¸ í´ë”ì— ì†Œë‚˜íë¸Œì™€ ê´€ë ¨ëœ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h4><p>ë§Œì•½, ê·¸ë˜ë“¤ì„ í†µí•´ ì†Œë‚˜íë¸Œì™€ ì—°ë™í•˜ê³  ì‹¶ë‹¤ë©´ build.gradleì— SonarQube í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token interpolation-string"><span class="token string">"org.sonarqube"</span></span> version <span class="token string">'3.3'</span>
    id <span class="token string">'jacoco'</span>
<span class="token punctuation">&#125;</span>

sonarqube <span class="token punctuation">&#123;</span>
  properties <span class="token punctuation">&#123;</span>
    property <span class="token interpolation-string"><span class="token string">"sonar.projectKey"</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">"spring5-web-example"</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="sonar-project-properties"><a href="#sonar-project-properties" class="headerlink" title="sonar-project.properties"></a>sonar-project.properties</h4><p>sonar-project.properties íŒŒì¼ì€ ì†Œë‚˜íë¸Œì—ì„œ ì°¸ì¡°í•˜ê²Œ ë˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml">sonar.projectKey=spring5<span class="token punctuation">-</span>web<span class="token punctuation">-</span>example
sonar.projectName=spring5<span class="token punctuation">-</span>web<span class="token punctuation">-</span>example
sonar.java.source=1.11
sonar.sources=src/main/java
<span class="token comment">#sonar.tests=src/main/test</span>
sonar.java.binaries=build/classes/java/main/com/example
sonar.sourceEncoding=UTF<span class="token punctuation">-</span><span class="token number">8</span>
sonar.exclusions=</code></pre>

<h2 id="Github-Action"><a href="#Github-Action" class="headerlink" title="Github Action"></a>Github Action</h2><p><a href="https://github.com/kitabisa/sonarqube-action">SonarQube GitHub Action</a>ì€ Github Actionì„ í†µí•´ ì†Œë‚˜íë¸Œë¡œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p>
<h3 id="ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì½”ë“œ-ì¶”ê°€"><a href="#ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì½”ë“œ-ì¶”ê°€" class="headerlink" title="ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì½”ë“œ ì¶”ê°€"></a>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì½”ë“œ ì¶”ê°€</h3><p><strong>.github&#x2F;workflows&#x2F;sonarqube.yml</strong></p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># schedule:</span>
    <span class="token comment"># - cron: '0 * * * 1'</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> SonarQube Workflow
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up JDK 1.11
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> AdoptOpenJDK/install<span class="token punctuation">-</span>jdk@v1
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'11'</span>
        <span class="token key atrule">architecture</span><span class="token punctuation">:</span> x64
        <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token string">'JAVA_HOME'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Grant execute permission for gradlew
      <span class="token key atrule">run</span><span class="token punctuation">:</span> chmod +x gradlew
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build with Gradle
      <span class="token key atrule">run</span><span class="token punctuation">:</span> ./gradlew build <span class="token punctuation">-</span>x test
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload build artifact
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v2
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> build
        <span class="token key atrule">path</span><span class="token punctuation">:</span> build/classes

  <span class="token key atrule">sonarQube</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> build
    <span class="token key atrule">name</span><span class="token punctuation">:</span> SonarQube
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Donwload build artifact
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/download<span class="token punctuation">-</span>artifact@v2
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> build
        <span class="token key atrule">path</span><span class="token punctuation">:</span> build/classes
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SonarQube Scan
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> kitabisa/sonarqube<span class="token punctuation">-</span>action@master
      <span class="token key atrule">with</span><span class="token punctuation">:</span>
        <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> secrets.SONAR_HOST <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
        <span class="token key atrule">login</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> secrets.SONAR_TOKEN <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
        <span class="token key atrule">projectBaseDir</span><span class="token punctuation">:</span> <span class="token string">'/github/workspace'</span></code></pre>

<p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° íŒŒì¼ì„ ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ì˜ ë©”ì¸ ë˜ëŠ” ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ë°˜ì˜í•˜ë©´ ê¹ƒí—ˆë¸Œì—ì„œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-04.png"></p>
<h3 id="ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì‹œí¬ë¦¿-ìƒì„±"><a href="#ì†Œë‚˜íë¸Œ-ê´€ë ¨-ì‹œí¬ë¦¿-ìƒì„±" class="headerlink" title="ì†Œë‚˜íë¸Œ ê´€ë ¨ ì‹œí¬ë¦¿ ìƒì„±"></a>ì†Œë‚˜íë¸Œ ê´€ë ¨ ì‹œí¬ë¦¿ ìƒì„±</h3><p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‘ê°€ì§€ ì‹œí¬ë¦¿ì„ ê¹ƒí—ˆë¸Œ ë¦¬íŒŒì§€í† ë¦¬ì— ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤.</p>
<ul>
<li>SONAR_HOST : ì†Œë‚˜íë¸Œ í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ</li>
<li>SONAR_TOKEN : ì†Œë‚˜íë¸Œì—ì„œ ë°œê¸‰í•œ í† í° ì •ë³´</li>
</ul>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-05.png"></p>
<h3 id="ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì‹¤í–‰"><a href="#ì†Œë‚˜íë¸Œ-ì›Œí¬í”Œë¡œìš°-ì‹¤í–‰" class="headerlink" title="ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰"></a>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰</h3><p>ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš° ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ ë©”ì¸ ë¸Œëœì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-06.png"></p>
<p>í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ë¹Œë“œê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê³  ì†Œë‚˜íë¸Œ ì„œë²„ë¥¼ í†µí•´ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì›Œí¬í”Œë¡œìš°ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-07.png"></p>
<h2 id="ì •ì -ë¶„ì„-ê²°ê³¼"><a href="#ì •ì -ë¶„ì„-ê²°ê³¼" class="headerlink" title="ì •ì  ë¶„ì„ ê²°ê³¼"></a>ì •ì  ë¶„ì„ ê²°ê³¼</h2><p>ì†Œë‚˜íë¸Œ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì—¬ ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œ í”„ë¡œì íŠ¸ì˜ ì •ì  ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-08.png"></p>
<p>ë¹Œë“œ í…ŒìŠ¤íŠ¸ëŠ” ìˆ˜í–‰í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ì»¤ë²„ë¦¬ì§€ëŠ” ë¶„ì„í•  ìˆ˜ ì—†ì—ˆìœ¼ë‚˜ 10ê°œì˜ ì½”ë“œ ì•…ì·¨ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì½”ë“œ-ì•…ì·¨-ê²€í† -ë°-ê°œì„ "><a href="#ì½”ë“œ-ì•…ì·¨-ê²€í† -ë°-ê°œì„ " class="headerlink" title="ì½”ë“œ ì•…ì·¨ ê²€í†  ë° ê°œì„ "></a>ì½”ë“œ ì•…ì·¨ ê²€í†  ë° ê°œì„ </h3><p>ì •ì  ë¶„ì„ ê²°ê³¼ë¡œ ê²€ì¶œëœ ì½”ë“œ ì•…ì·¨ì— ëŒ€í•œ ë‚´ìš©ì„ ê²€í† í•˜ê³  ì´ë¥¼ ê°œì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="ì½”ë“œ-ì•…ì·¨"><a href="#ì½”ë“œ-ì•…ì·¨" class="headerlink" title="ì½”ë“œ ì•…ì·¨"></a>ì½”ë“œ ì•…ì·¨</h4><p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-09.png"></p>
<p>ì²«ë²ˆì§¸ ê²€ì¶œ í•­ëª©ì€ ì—°ì†ëœ ë¼ì¸ì„ ì£¼ì„ìœ¼ë¡œ ì²˜ë¦¬í•œ ë¶€ë¶„ì„ ì œê±°í•´ì•¼í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. </p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-10.png"></p>
<p>ë§Œì•½, ì´ë ‡ê²Œ ì£¼ì„ë˜ì–´ìˆëŠ” ê²ƒì´ ë‚¨ì•„ìˆì–´ì•¼ í•œë‹¤ê³  ê°€ì •í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ê²€ì¶œ ê·œì¹™ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># Ignore Rules</span>
<span class="token key attr-name">sonar.issue.ignore.multicriteria</span><span class="token punctuation">=</span><span class="token value attr-value">e1,e2</span>
<span class="token key attr-name">sonar.issue.ignore.multicriteria.e1.ruleKey</span><span class="token punctuation">=</span><span class="token value attr-value">java:S125</span>
<span class="token key attr-name">sonar.issue.ignore.multicriteria.e1.resourceKey</span><span class="token punctuation">=</span><span class="token value attr-value">**/*.java</span>
<span class="token key attr-name">sonar.issue.ignore.multicriteria.e2.ruleKey</span><span class="token punctuation">=</span><span class="token value attr-value">java:S1192</span>
<span class="token key attr-name">sonar.issue.ignore.multicriteria.e2.resourceKey</span><span class="token punctuation">=</span><span class="token value attr-value">**/*.java</span></code></pre>

<p>java:S125ëŠ” ë¸”ë¡ìœ¼ë¡œ ëœ ì£¼ì„ì„ ë‚¨ê¸°ê³  ìˆë‹¤ëŠ” ì•…ì·¨ì´ë©° java:S1192ëŠ” ë™ì¼í•œ ë¬¸ìì—´ì„ ìƒìˆ˜ë¡œ ì·¨ê¸‰í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì•…ì·¨ì…ë‹ˆë‹¤. ì €ëŠ” ì´ê²ƒì„ ì•…ì·¨ë¡œ ë³´ì§€ ì•Šê¸° ìœ„í•´ì„œ ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ê³  ì†Œë‚˜íë¸Œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-11.png"></p>
<p>ê¸°ì¡´ì— ê²€ì¶œë˜ì—ˆë˜ ì½”ë“œ ì•…ì·¨ ì¤‘ java:S125ì™€ java:S1192ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ ì œì™¸ë˜ì–´ 3ê°œì˜ ì½”ë“œ ì•…ì·¨ê°€ ì¤„ì–´ë“¤ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ íšŒì‚¬ ë˜ëŠ” ê°œë°œíŒ€ì—ì„œ í”„ë¡œì íŠ¸ ì½”ë“œì— ëŒ€í•œ ê·œì¹™ì„ ê²€í† í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼í•©ë‹ˆë‹¤ë§Œ ì €í¬ íšŒì‚¬ëŠ” ì •ì‘ ê·¸ëŸ¬ì§€ ì•Šê³  ìˆì–´ ì•„ì‰¬ì›€ì´ ë§ìŠµë‹ˆë‹¤. ì²´ê³„ê°€ ì—†ë‹¤ë³´ë‹ˆ ë¬´ì–¸ê°€ ë„ì…ì„ ì›í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ì•ŠëŠ”ê²Œ ë§ì€ ê²ƒ ê°™ì•„ìš”.</p>
<p>ì•„ë¬´íŠ¼ ë‚˜ë¨¸ì§€ ì½”ë“œ ì•…ì·¨ì— ëŒ€í•´ì„œë„ ë¦¬íŒ©í† ë§ì„ ìˆ˜í–‰í•˜ì—¬ ì—†ì• ë³´ë„ë¡ í•˜ë©´ì„œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/sonarqube-and-github-action/sonarqube-12.png"></p>
<h4 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="@SuppressWarnings"></a>@SuppressWarnings</h4><p>sonar-project.propertiesì—ì„œ ì œì™¸ë˜ë„ë¡ ì •ì˜í•œ ê·œì¹™ì´ íŒ¨í„´ì— ì˜í•œ ê²ƒì´ë¼ë©´ íŠ¹ì • í´ë˜ìŠ¤ ë˜ëŠ” í•¨ìˆ˜ ë‹¨ìœ„ë¡œ ê·œì¹™ì„ ì œì™¸í•˜ê³  ì‹¶ì€ ê²½ìš° @SuppressWarningsì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"squid:S125"</span><span class="token punctuation">,</span><span class="token string">"squid:S1192"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre>

<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>SonarQube</tag>
        <tag>Github Action</tag>
      </tags>
  </entry>
  <entry>
    <title>í”„ë¡œì íŠ¸ì˜ ë…¸ë“œ ë²„ì „ ì œí•œí•˜ê¸°</title>
    <url>/strict-nodejs-version-for-project/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ í•¨ê»˜ ì¼í•˜ëŠ” ê°œë°œìë“¤ì´ í”„ë¡œì íŠ¸ë§ˆë‹¤ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ì œí•œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ê³µìœ í•˜ë ¤ê³  í•´ìš”.</p>
<h2 id="í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ"><a href="#í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ" class="headerlink" title="í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ"></a>í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ</h2><p>í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ë§ˆë‹¤ ì§€ì›í•˜ëŠ” ìµœì†Œ ë…¸ë“œ ë²„ì „ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ íŒ¨í‚¤ì§€ ë²„ì „ì´ ì—…ë°ì´íŠ¸ë˜ë©´ì„œ ìš”êµ¬í•˜ëŠ” ë…¸ë“œ ë²„ì „ì´ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#minimum-nodejs-version">webpack@5.0.0</a> minimum supported Node.js version is 10.13.0</li>
<li><a href="https://github.com/webpack-contrib/style-loader/releases/tag/v3.0.0">style-loader@3.0.0</a> minimum supported Node.js version is 12.13.0</li>
<li><a href="https://github.com/webpack/webpack-dev-server/blob/master/CHANGELOG.md#400-beta3-2021-05-06">webpack-dev-server@4.0.0-beta.3</a> minimum supported Node.js version is 12.13.0</li>
</ul>
<h3 id="Package-json"><a href="#Package-json" class="headerlink" title="Package.json"></a>Package.json</h3><p>Package.json íŒŒì¼ì˜ <code>engines</code> ì†ì„±ìœ¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” NPM ë˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"engines"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"npm"</span><span class="token operator">:</span> <span class="token string">">=6.4.1"</span><span class="token punctuation">,</span>
    <span class="token property">"node"</span><span class="token operator">:</span> <span class="token string">">=12.13.0"</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="ì—”ì§„-ì œí•œ-ì˜µì…˜-í™œì„±í™”"><a href="#ì—”ì§„-ì œí•œ-ì˜µì…˜-í™œì„±í™”" class="headerlink" title="ì—”ì§„ ì œí•œ ì˜µì…˜ í™œì„±í™”"></a>ì—”ì§„ ì œí•œ ì˜µì…˜ í™œì„±í™”</h3><p>Package.json íŒŒì¼ì— ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ë”ë¼ë„ ì‚¬ìš©ìì˜ ì—”ì§„ì„ ì œí•œí•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ ë³„ë„ë¡œ ì œí•œí•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œì íŠ¸ í´ë”ì— .npmrc íŒŒì¼ì„ ë§Œë“¤ê³  <code>engine-strict</code> ì˜µì…˜ì„ í™œì„±í™”í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">engine-strict</span><span class="token punctuation">=</span><span class="token value attr-value">true</span></code></pre>

<h3 id="ë…¸ë“œ-ì—”ì§„-ì œí•œ-ì—¬ë¶€-í™•ì¸"><a href="#ë…¸ë“œ-ì—”ì§„-ì œí•œ-ì—¬ë¶€-í™•ì¸" class="headerlink" title="ë…¸ë“œ ì—”ì§„ ì œí•œ ì—¬ë¶€ í™•ì¸"></a>ë…¸ë“œ ì—”ì§„ ì œí•œ ì—¬ë¶€ í™•ì¸</h3><p>ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ê³  ì—”ì§„ ì œí•œ ì˜µì…˜ì„ í™œì„±í™”í•˜ì˜€ìœ¼ë¯€ë¡œ ì‹¤ì œë¡œ ë…¸ë“œ ì—”ì§„ì´ ì œí•œë˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i
<span class="token function">npm</span> ERR<span class="token operator">!</span> code ENOTSUP
<span class="token function">npm</span> ERR<span class="token operator">!</span> notsup Unsupported engine <span class="token keyword">for</span> @1.0.0: wanted: <span class="token punctuation">&#123;</span><span class="token string">"npm"</span><span class="token builtin class-name">:</span><span class="token string">">=6.4.1"</span>,<span class="token string">"node"</span><span class="token builtin class-name">:</span><span class="token string">">=12.13.0"</span><span class="token punctuation">&#125;</span> <span class="token punctuation">(</span>current: <span class="token punctuation">&#123;</span><span class="token string">"node"</span><span class="token builtin class-name">:</span><span class="token string">"10.23.0"</span>,<span class="token string">"npm"</span><span class="token builtin class-name">:</span><span class="token string">"6.14.8"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token function">npm</span> ERR<span class="token operator">!</span> notsup Not compatible with your version of node/npm: @1.0.0
<span class="token function">npm</span> ERR<span class="token operator">!</span> notsup Not compatible with your version of node/npm: @1.0.0
<span class="token function">npm</span> ERR<span class="token operator">!</span> notsup Required: <span class="token punctuation">&#123;</span><span class="token string">"npm"</span><span class="token builtin class-name">:</span><span class="token string">">=6.4.1"</span>,<span class="token string">"node"</span><span class="token builtin class-name">:</span><span class="token string">">=12.13.0"</span><span class="token punctuation">&#125;</span>
<span class="token function">npm</span> ERR<span class="token operator">!</span> notsup Actual:   <span class="token punctuation">&#123;</span><span class="token string">"npm"</span><span class="token builtin class-name">:</span><span class="token string">"6.14.8"</span>,<span class="token string">"node"</span><span class="token builtin class-name">:</span><span class="token string">"10.23.0"</span><span class="token punctuation">&#125;</span></code></pre>

<p>í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ë…¸ë“œ ë²„ì „ì€ 10.23.0 ì´ì§€ë§Œ í”„ë¡œì íŠ¸ì—ì„œ ìš”êµ¬í•˜ëŠ” ë²„ì „ì€ 12.13.0 ì´ìƒì´ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ì´ìƒìœ¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì§€ì›í•˜ëŠ” ìµœì†Œ ë…¸ë“œ ì—”ì§„ ë²„ì „ì„ ëª…ì‹œí•˜ê³  í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•˜ëŠ” ëª¨ë“  ê°œë°œìë“¤ì´ ì•Œë§ì€ ë…¸ë“œ ë²„ì „ì„ ì‚¬ìš©í•˜ë„ë¡ ì•ˆë‚´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://medium.com/@fabian.illner/force-correct-node-js-version-with-npm-a2a57fd12fa">Force correct Node.js version with npm</a>  </li>
<li><a href="https://www.geeksforgeeks.org/how-to-define-the-required-node-js-version-in-package-json/">How to define the required Node.js version in package.json?</a>  </li>
<li><a href="https://reactgo.com/specify-node-version/">Specifying a required Node.js version in Package.json file</a></li>
</ul>
]]></content>
      <tags>
        <tag>package.json</tag>
        <tag>npmrc</tag>
        <tag>engines</tag>
      </tags>
  </entry>
  <entry>
    <title>í”„ë¡œë•ì…˜ ì½”ë“œì—ì„œì˜ ìë°” í‘œì¤€ ì¶œë ¥</title>
    <url>/system-out-in-prod/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://okky.kr/articles/1456477">https://okky.kr/articles/1456477</a> ì—ì„œ ê²½í—˜ ë§ìœ¼ì‹  ê°œë°œìê»˜ì„œ ì‚¬ì†Œí•˜ê³  ì“°ì˜ë°ê¸° ì—†ë‹¤ëŠ” ì˜ê²¬ì´ ìˆì–´ì„œ ì‘ì„±í•´ë³¸ë‹¤.</p>
</blockquote>
<p>ì£¼ê´€ì ì¸ ê´€ì ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì•„ë‹Œ í”„ë¡œë•ì…˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŒì—ë„ í‘œì¤€ ì¶œë ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ íƒˆë½ì´ë¼ëŠ” ì˜ê²¬ì„ ì „ë‹¬í•˜ì˜€ë‹¤ê³  í–ˆë‹¤. (ì‹¤ì œë¡œëŠ” ì´ë ¥ì„œê°€ ë§ì§€ ì•Šì•„ì„œ ìƒì„¸í•˜ê²Œ ë³´ê³  ê²€í† í•˜ëŠ” ê¸°ì¤€ ì¤‘ì— í•˜ë‚˜ì¼ ë¿ì´ë‹¤.) ê·¸ëŸ¬ì, ê²½í—˜ ë§ì€ ê°œë°œìê»˜ì„œ ì£¼ê´€ì ì¸ ê´€ì ì€ ì´í•´í•˜ë‚˜ <code>ì“°ì˜ë°ê¸° ì—†ëŠ” ê²ƒ</code>ì„ ê¸°ì¤€ìœ¼ë¡œ ì¡ëŠëƒëŠ” ì˜ê²¬ì„ ë‹¬ìœ¼ì…¨ë‹¤. </p>
<ul>
<li><a href="https://stackoverflow.com/a/8601972">Do not use System.out.println in server side code</a></li>
<li><a href="https://softwareengineering.stackexchange.com/a/161215">Why is using System.out.println() so bad?</a></li>
<li><a href="https://hudi.blog/do-not-use-system-out-println-for-logging/">ë¡œê¹…ì„ System.out.println() ë¡œ í•˜ë©´ ì•ˆë˜ëŠ” ì´ìœ </a></li>
</ul>
<p>ìœ„ì˜ ë§í¬ë“¤ì€ ë‚´ê°€ ë°”ë¼ë³´ëŠ” ê¸°ì¤€ì´ ì •ë§ ì˜ëª»ë˜ì—ˆëŠ”ê°€ë¥¼ ë˜ëŒì•„ë³´ê¸° ìœ„í•´ ì°¾ì•„ë³¸ ê²ƒë“¤ì´ë‹¤. ì˜¤ë˜ì „ë¶€í„° í”„ë¡œë•ì…˜ ì½”ë“œì— í‘œì¤€ ì¶œë ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ <code>ì½”ë“œ ìŠ¤ë©œ</code>ì— í•´ë‹¹ë˜ë©° ë‚˜ì™€ ë™ì¼í•˜ê²Œ ê°œë°œ ë˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì½”ë“œì—ì„œ í‘œì¤€ ì¶œë ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¬´ë°©í•˜ë‹¤ëŠ” ì…ì¥ì´ë‹¤. íŠ¹íˆë‚˜, ìš”ì¦˜ì— ì¸í…”ë¦¬ì œì´ ê°™ì€ IDEì—ì„œ ë§ì´ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” SonarLint í”ŒëŸ¬ê·¸ì¸ì—ì„œë„ <a href="https://rules.sonarsource.com/java/RSPEC-106/">java:s106</a>ì´ë¼ëŠ” ê·œì¹™ìœ¼ë¡œ <code>Major ë ˆë²¨ì˜ ì½”ë“œ ìŠ¤ë©œ</code>ë¡œ ê²€ì¶œí•´ì¤€ë‹¤.</p>
<p><img data-src="/images/posts/system-out-in-prod/01.png"></p>
<p>ê²½í—˜ ë§ì€ ê°œë°œìë¶„ê»˜ì„œ ì´ì•¼ê¸°í•˜ëŠ” ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œë“  ë¬´ì–¸ê°€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì€ ìƒê´€ì—†ê³  ê·¸ ì½”ë“œê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ì— í¬í•¨ë˜ë„ ì‹ ê²½ì“°ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ê²¬ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ ë¶„ê»˜ì„œ ì¼í•˜ëŠ” í™˜ê²½ì—ì„œ ë§Œë“¤ì–´ì§„ ì‹œìŠ¤í…œì—ëŠ” í‘œì¤€ ì¶œë ¥ìœ¼ë¡œ ì‚¬ìš©í•œ ë””ë²„ê·¸ ì½”ë“œê°€ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì´ë©° ê·¸ê²ƒìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œë“¤(í‘œì¤€ ì¶œë ¥ì— ì˜í•œ ì„±ëŠ¥ì´ë‚˜ ë³´ì•ˆì ì¸ ì •ë³´ ë…¸ì¶œ ë“±)ì— ëŒ€í•´ì„œëŠ” ì±…ì„ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ë¡œ í•´ì„í•  ìˆ˜ ìˆë‹¤.</p>
<blockquote>
<p>ë§Œì•½, ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í‘œì¤€ ì¶œë ¥ì— ì˜í•œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ê³  ë‹¤ì‹œ ë¹Œë“œí•˜ì—¬ ë°°í¬ê°€ í•„ìš”í•˜ë‹¤ê³  ë¬´ì±…ì„í•˜ê²Œ ë§í•œë‹¤ë©´ ì–´ë–»ê²Œ ë°›ì•„ë“¤ì¼ê¹Œ?<br>ì„œë¹„ìŠ¤ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¤‘ë‹¨í•˜ê³  ë°°í¬í•˜ëŠ” ê²ƒì´ ê·¸ë ‡ê²Œ ì‰¬ìš´ì¼ì¸ê°€?</p>
</blockquote>
<p>ì•„ë¬´ë˜ë„ ì§€ê¸ˆì˜ ë‚´ ê¸°ì¤€ì´ ê²½í—˜ì´ ë§ì´ ìŒ“ì—¬ë„ <code>ë³€í•  ê°€ëŠ¥ì„±ì€ ê±°ì˜ ì—†ì„ ê²ƒ</code> ê°™ë‹¤. í˜„ì¬ ë§¡ê³  ìˆëŠ” ê°œë°œíŒ€ì˜ ê°œë°œì í•œë¶„ì€ êµ­ë¹„ì§€ì› êµìœ¡ì„ ë°›ê³  ì±„ìš©ì´ ë˜ì‹  ë¶„ì´ì—ˆìœ¼ë‚˜ ì´ì „ íšŒì‚¬ì—ì„œì˜ íŒ€ì¥ë“¤ê³¼ëŠ” ë‹¤ë¥´ë‹¤ê³  ì˜¤íˆë ¤ íŠ¹ì´í•˜ì‹  ë¶„ì´ë¼ ë” ì„±ì¥í•  ìˆ˜ ìˆëŠ”ë° ë„ì›€ì„ ì£¼ì‹œëŠ” ê²ƒ ê°™ë‹¤ë¼ê³  ì¢‹ì€ ì˜ê²¬ì„ ì£¼ì—ˆë‹¤. ì•„ë¬´ë¦¬ ì‹ ì… ê°œë°œìë¼ê³  í•˜ë”ë¼ë„ ë™ë£Œ ê°œë°œìë¼ëŠ” ì…ì¥ì„ ê³ ìˆ˜í•˜ëŠ”ê²Œ ë‚´ ìŠ¤íƒ€ì¼ë¡œ ìƒê°ë˜ë©° ì‹ ì… ê°œë°œìëŠ” ì•„ë¬´ê²ƒë„ ëª°ë¼ë„ ë˜ëŠ” ì‚¬ëŒë“¤ì´ ì•„ë‹ˆë¼ê³  ìƒê°ëœë‹¤. <code>ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ê°œë°œìë¡œ ì¼í•  ìˆ˜ ìˆëŠ”</code> ì‹œëŒ€ê°€ ë˜ì—ˆê¸°ì— <code>ì‚¬ì†Œí•œ ê²ƒë“¤ë„ ì˜¤íˆë ¤ ì¤‘ìš”í•˜ê²Œ ìƒê°</code>í•´ì•¼í•œë‹¤.</p>
<p><img data-src="/images/posts/system-out-in-prod/02.png" alt="ê°œë°œ ë„êµ¬ê°€ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì£¼ëŠ” ìë°” ë„¤ì´ë° ì»¨ë²¤ì…˜ë„ ë¬´ì‹œí• ê±°ì•¼?"></p>
]]></content>
  </entry>
  <entry>
    <title>ThreadLocal</title>
    <url>/threadlocal/</url>
    <content><![CDATA[<blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ SecurityContextHolderë¥¼ ì‚¬ìš©í•˜ì…¨ë˜ë° ThreadLocalì— ëŒ€í•´ì„œ ì´ì•¼ê¸°í•´ë³´ì„¸ìš”.</p>
</blockquote>
<p>ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ëŠ” <strong>ThreadLocal</strong> ì´ë¼ëŠ” ìë°” ê¸°ë³¸ í´ë˜ìŠ¤ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì‹ ì… ì›¹ ê°œë°œìë“¤ì— ëŒ€í•œ ì¸í„°ë·°ë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë©´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì™€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–¤ ë™ì‘ì„ í•˜ëŠ”ì§€ ëª¨ë¥´ê±°ë‚˜ ThreadLocal ì´ë¼ëŠ” ìë°” ì–¸ì–´ì—ì„œì˜ ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•´ì„œ ë“¤ì–´ë³´ì§€ ëª»í•œ ê²½ìš°ê°€ ë§ë‹¤. ëŒ€ë¶€ë¶„ ìœ ëª…í•œ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ ìˆ˜ê°•í–ˆë‹¤ê³  ì´ë ¥ì„œì— ê¸°ì¬í–ˆê¸° ë•Œë¬¸ì— ì´ ThreadLocalì— ëŒ€í•œ ë¶€ë¶„ì„ ë‹¤ë£¨ì§€ ì•Šì•˜ë‹¤ê³  ìƒê°í–ˆëŠ”ë° ì°¾ì•„ë³´ë‹ˆ <a href="https://www.youtube.com/watch?v=ljrgXkzagaU">ThreadLocal</a>ì´ë¼ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œë„ ì–¸ê¸‰í•˜ê³  ìˆê¸°ì— ìˆ˜ê°•ìë“¤ì´ ì¼ë¶€ ë‚´ìš©ì„ ìŠ¤ìŠ¤ë¡œ ìƒëµí•˜ê³  ë„˜ì–´ê°”ì„ ê²ƒ ê°™ë‹¤.</p>
<h4 id="XXXContextHolder"><a href="#XXXContextHolder" class="headerlink" title="XXXContextHolder"></a>XXXContextHolder</h4><p>â• org.springframework.web.context.request.RequestContextHolder<br>â• org.springframework.context.i18n.LocaleContextHolder<br>â• org.springframework.security.core.context.SecurityContextHolder  </p>
<p>ìœ„ì™€ ê°™ì´ ContextHolderë¡œ ëë‚˜ë„ë¡ ì´ë¦„ì´ ì •ì˜ëœ í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ThreadLocalì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆëŠ” ëŒ€í‘œì ì¸ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ í´ë˜ìŠ¤ì´ë‹¤. ì¸í…”ë¦¬ì œì´ IDEAë¥¼ í†µí•´ì„œ ìœ„ í´ë˜ìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë”°ë¼ê°€ë³´ë©´ ì–´ë–»ê²Œ í™œìš©í•˜ê³  ìˆëŠ”ì§€ë¥¼ ì´í•´í•  ìˆ˜ ìˆëŠ”ë° <strong>RequestContextHolderì™€ LocaleContextHolder</strong>ì˜ ìƒì„±ê³¼ ì‚­ì œëŠ” RequestContextFilterì—ì„œ ìˆ˜í–‰í•˜ê³  ìˆìœ¼ë©° <strong>SecurityContextHolder</strong>ëŠ” SecurityContextHolderFilterì—ì„œ ê´€ë¦¬í•˜ê³  ìˆìŒì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.</p>
<blockquote>
<p>ì´ì™€ ê°™ì´ ì¼ë°˜ì ì¸ ìë°” ê°œë°œìë“¤ë„ ThreadLocalê³¼ Filterë¥¼ êµ¬í˜„í•˜ì—¬ ë™ì¼í•œ ìŠ¤ë ˆë“œ ë‚´ì—ì„œëŠ” ì–¸ì œë“ ì§€ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” íŒ¨í„´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì´ë‹¤. ThreadLocal ìì²´ê°€ ìŠ¤ë ˆë“œ ë‚´ì— ì •ë³´ ê³µìœ ë¥¼ ìœ„í•œ ì§€ì—­ ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>
</blockquote>
<h4 id="RequestContextFilter"><a href="#RequestContextFilter" class="headerlink" title="RequestContextFilter"></a>RequestContextFilter</h4><p>RequestContextFilterì—ì„œëŠ” HttpServletRequestì˜ ë¡œì¼€ì¼ ì •ë³´ì™€ ServletRequestAttributesë¥¼ ThreadLocalì— ì €ì¥í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆë‹¤. ë‹¤ë¥¸ í•„í„°ë¥¼ ê±°ì¹˜ê³  ë‚œ í›„ ë°˜ë“œì‹œ ThreadLocalì— ìˆëŠ” ì •ë³´ë“¤ì„ ì œê±°í•˜ë„ë¡ ë˜ì–´ìˆëŠ” ë¶€ë¶„ì´ ì¤‘ìš”í•˜ë‹¤. RequestContextHolderì— ì €ì¥ë˜ëŠ” í´ë˜ìŠ¤ëŠ” ServletRequestAttributes ì´ë©° ì´ì „ì— ê³µìœ í•œ <a href="/redis-memory-usage-issue/">ë ˆë””ìŠ¤ ì¥ì•  íšŒê³ </a>ì—ì„œë„ ë‚´ë¶€ êµ¬í˜„ì„ ì‚´í´ë³¸ í´ë˜ìŠ¤ì— í•´ë‹¹í•œë‹¤.</p>
<h4 id="SecurityContextHolderFilter"><a href="#SecurityContextHolderFilter" class="headerlink" title="SecurityContextHolderFilter"></a>SecurityContextHolderFilter</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 5.7+ ë¶€í„°ëŠ” SecurityContextPersistenceFilterê°€ ì•„ë‹Œ SecurityContextHolderFilterë¡œ ëŒ€ì²´ë˜ì–´ ì‚¬ìš©ëœë‹¤. SecurityContextPersistenceFilterë¡œ ì²˜ë¦¬ë˜ë˜ ê²ƒì´ SecurityContextHolderFilter ì—ì„œëŠ” ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ë¹„êµí•´ë³´ì•„ë„ ì¢‹ì€ í•™ìŠµì´ ë  ê²ƒ ê°™ë‹¤. Supplier ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ SecurityContextë¥¼ ì§€ì—°ë˜ì–´ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.</p>
<p>ë§ì€ íšŒì‚¬ì—ì„œ ì‹ ì… ê°œë°œìì—ê²Œ ë°”ë¼ëŠ” ì—­ëŸ‰ ì¤‘ ê¸°ë³¸ ì§€ì‹ì— ëŒ€í•œ ì´ì•¼ê¸°ëŠ” ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•´ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ ê°œë…ì´ ìˆëŠ”ì§€ ì°¾ì•„ë³´ëŠ” í¸ì¸ê°€ë¥¼ ë§í•˜ëŠ”ê²Œ ì•„ë‹ê¹Œ? ë¹„ë¡ ì‹ ì… ì›¹ ê°œë°œìë¡œ ì¼í•˜ê¸° ìœ„í•´ì„œ ì‹¤ë¬´ ê¸°ìˆ ì— ëŒ€í•œ ì—­ëŸ‰ì„ ë°°ìš°ê³  ì–´í•„í•˜ëŠ” ê±´ ì–´ì©” ìˆ˜ ì—†ëŠ” ìƒí–¥ í‰ì¤€í™”ëœ ë¶€ë¶„ì´ ìˆì§€ë§Œ ê¸°ë³¸ì ì¸ ì§€ì‹ê³¼ ê´€ë ¨ëœ ì§€ì‹ì€ ì—†ëŠ”ì§€ ì°¾ì•„ë³´ê³  ì§€ì†ì ì¸ í•™ìŠµì— ëŒ€í•œ ì–´í•„ë„ í•„ìš”í•  ê²ƒì´ë‹¤.</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>ThreadLocal</tag>
      </tags>
  </entry>
  <entry>
    <title>TLS ì˜¤í”„ë¡œë“œ</title>
    <url>/tls-offload/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í™œìš©í•œ TLS ì˜¤í”„ë¡œë“œì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì§€ë‚œ <a href="../ssl-certificate">SSL ì¸ì¦ì„œ</a>ì—ì„œëŠ” HTTPSë¥¼ ì›¹ ì„œë¹„ìŠ¤ì— ì ìš©í•˜ëŠ” ì´ìœ ì™€ í•¨ê»˜ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ê³  TLS í•¸ë“œì‰ì´í¬ë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ”ì§€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” <strong>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ELB(Elastic Load Balancing)ì—ì„œ ì§€ì›í•˜ëŠ” TLS í•¸ë“œì‰ì´í¬ ë° TLS ì˜¤í”„ë¡œë”© ê¸°ëŠ¥</strong>ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì°¸ê³ í•´ì•¼í•  ì •ë³´ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.</p>
<h2 id="SSL-ì˜¤í”„ë¡œë“œ"><a href="#SSL-ì˜¤í”„ë¡œë“œ" class="headerlink" title="SSL ì˜¤í”„ë¡œë“œ"></a>SSL ì˜¤í”„ë¡œë“œ</h2><p><strong>TLS(SSL) ì˜¤í”„ë¡œë“œ</strong>ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šê³  <strong>íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ê¸° ì „ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ê³  TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰</strong>í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì›¹ ì„œë¹„ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ìš´ìš©í•˜ì§€ ì•Šê³  íŠ¸ë˜í”½ ê·œëª¨ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ í™•ì¥í•˜ê³  í™•ì¥ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— íŠ¸ë˜í”½ì„ ê· ë“±í•˜ê²Œ ë¶„ì‚°ì‹œí‚¤ê¸° ìœ„í•˜ì—¬ ë¡œë“œë°¸ëŸ°ì„œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ELB ë¡œë“œë°¸ëŸ°ì„œ ìœ í˜• ì¤‘ NLBì™€ ALBëŠ” SSL ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì™€ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ì—¬ íŠ¸ë˜í”½ì´ EC2 ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ì»¨í…Œì´ë„ˆë¡œ ì „ë‹¬í•˜ëŠ” <strong>TLS ì˜¤í”„ë¡œë”© ê¸°ëŠ¥ì„ ì§€ì›</strong>í•©ë‹ˆë‹¤.</p>
<h3 id="Mutual-TLS"><a href="#Mutual-TLS" class="headerlink" title="Mutual TLS"></a>Mutual TLS</h3><p>ì›¹ ì„œë¹„ìŠ¤ì˜ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œëŠ” <strong>í´ë¼ì´ì–¸íŠ¸ì˜ X.509 ì¸ì¦ì„œë¥¼ í† ëŒ€ë¡œ ì‚¬ìš©ì ì¸ì¦ì„ ìˆ˜í–‰í•˜ê³  ìš”ì²­ì„ ì²˜ë¦¬</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í´ë¼ì´ì–¸íŠ¸ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ëª¨ë‘ ì¸ì¦ì„œë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ <strong>Mutual TLS</strong>ë¼ê³  í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìë°” ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” <strong>javax.servlet.request.X509Certificate</strong> ì†ì„±ì„ í†µí•´ <strong>X.509 ì¸ì¦ì„œ</strong>ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ê·¸ëŸ¬ë‚˜ ì›¹ ìš”ì²­ì´ ë¡œë“œë°¸ëŸ°ì„œì— ì˜í•´ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œë¥¼ í¬í•¨í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Nginxë¥¼ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ìš”ì²­ ì‹œ í¬í•¨ëœ í´ë¼ì´ì–¸íŠ¸ì˜ ì¸ì¦ì„œ ì •ë³´ê°€ <strong>X-SSL-CERT</strong>ì™€ ê°™ì€ <strong>ë¹„í‘œì¤€ í—¤ë”</strong>ë¡œ ì „ë‹¬ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìš”ì²­ í—¤ë”ë¡œ ì¸ì¦ì„œë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê¹Œì§€ ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ì‹¤ì œ ì•„ì´í”¼ë¥¼ ì•Œê¸° ìœ„í•˜ì—¬ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ í—¤ë” <strong>X-Forwarded-For</strong>ì™€ ë¹„ìŠ·í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="AWS-NLB"><a href="#AWS-NLB" class="headerlink" title="AWS NLB"></a>AWS NLB</h3><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/introduction.html">NLB(Network Load Balancer)</a>ëŠ” <strong>L4 ë ˆë²¨ì˜ ELB ë¡œë“œë°¸ëŸ°ì„œ ìœ í˜•</strong>ì…ë‹ˆë‹¤. NLBëŠ” L4 ë ˆë²¨ì—ì„œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•˜ë©° í”„ë¡œí† ì½œê³¼ í¬íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§€ì •ëœ í•˜ë‚˜ ì´ìƒì˜ ëŒ€ìƒ ê·¸ë£¹ìœ¼ë¡œ ìš”ì²­ì„ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì— ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì„ ë¹ ë¥´ê²Œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ì „ë‹¬ë˜ë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. </p>
<p><a href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">ELBì˜ ë¡œë“œë°¸ëŸ°ì„œ ìœ í˜• ë¹„êµ</a>ì—ì„œ ë‚˜ì™€ìˆë“¯ì´ NLBëŠ” TLS ì˜¤í”„ë¡œë“œë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— <strong>ë¡œë“œë°¸ëŸ°ì„œì— ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ê³  TLS í•¸ë“œì‰ì´í¬ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±</strong>í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ NLBì˜ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹œ <strong>TLS í”„ë¡œí† ì½œ</strong>ì„ ì„ íƒí•˜ê³  <strong>TLS ë²„ì „</strong>ê³¼ ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ ëª©ë¡ì— ëŒ€í•œ <strong>ë³´ì•ˆ ì •ì±…</strong> ê·¸ë¦¬ê³  <strong>SSL ì¸ì¦ì„œ</strong>ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-01.png"></p>
<h4 id="ECC-ì¸ì¦ì„œ-ë¯¸ì§€ì›"><a href="#ECC-ì¸ì¦ì„œ-ë¯¸ì§€ì›" class="headerlink" title="ECC ì¸ì¦ì„œ ë¯¸ì§€ì›"></a>ECC ì¸ì¦ì„œ ë¯¸ì§€ì›</h4><p>TLS ì˜¤í”„ë¡œë“œë¥¼ ì§€ì›í•œë‹¤ê³  ë‚˜ì™€ìˆì§€ë§Œ <strong>ëª¨ë“  SSL ì¸ì¦ì„œë¥¼ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹™</strong>ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì¸ì¦ì„œì™€ ê°™ì€ íƒ€ì› ê³¡ì„ í˜• í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ECC ì¸ì¦ì„œë¥¼ ë“±ë¡í•˜ê²Œ ë˜ë©´ ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ë¡œë¶€í„° ì•Œë¦¼ì„ ë°›ê²Œë˜ê³  <strong>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ìƒíƒœ</strong>ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-02.png"></p>
<p>NLBì— ëŒ€í•œ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ <strong>2048 ì´ìƒì˜ ë¹„íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” RSA í‚¤ ë˜ëŠ” EC í‚¤ë¡œëœ ì¸ì¦ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤</strong>ë¼ê³  ê²½ê³ í•˜ê³  ìˆìœ¼ë©° ë¬¸ì„œë¥¼ ì‚´í´ë³´ê¸°ê¹Œì§€ ì´ëŸ¬í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³³ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-03.png"></p>
<p>ì˜ì™¸ë¡œ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” <strong>ECC ì¸ì¦ì„œì— ëŒ€í•´ì„œëŠ” NLBì—ì„œ TLS ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ê¸°</strong> ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ê³  TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ë°°í¬ ì‹œ Elastic Beanstalkì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-platform.html">Java SE í”Œë«í¼</a>ì„ í†µí•´ EC2 ì¸ìŠ¤í„´ìŠ¤ì— <strong>Nginxë¥¼ í™œìš©í•˜ì—¬ ì—­ë°©í–¥ í”„ë¡ì‹œë¥¼ êµ¬ì„±</strong>í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</p>
<blockquote>
<p>íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì›¹ ì„œë¹„ìŠ¤ëŠ” Nginxë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  NLBì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ë„ë¡ êµ¬ì„±í–ˆì—ˆì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ê·œëª¨ê°€ ì»¤ì§ìœ¼ë¡œ ì¸í•˜ì—¬ ë‚´ë¶€ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì‘ì—…ì´ ë§ì•„ì§ì— ë”°ë¼ TLS í•¸ë“œì‰ì´í¬ ë¶€í•˜ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ë¶„ë¦¬í•˜ê¸° ìœ„í•˜ì—¬ Nginxì—ì„œ TLS ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ì „í™˜í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="AWS-ALB"><a href="#AWS-ALB" class="headerlink" title="AWS ALB"></a>AWS ALB</h3><p>ECC ì¸ì¦ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” NLBì™€ ë‹¤ë¥´ê²Œ ALB(Application Load Balancer)ëŠ” <strong>4096 ë¹„íŠ¸ í‚¤ ê¸¸ì´ì˜ RSA ì¸ì¦ì„œì™€ ECDSAë¡œ ì„œëª…ëœ EC ì¸ì¦ì„œë¥¼ ì§€ì›</strong>í•©ë‹ˆë‹¤. <strong>íšŒì‚¬ì—ì„œ ìš´ì˜ì¤‘ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ NLBì—ì„œ ALBë¡œ ì „í™˜í•˜ì§€ ì•ŠëŠ” ì´ìœ </strong>ëŠ” ì™„ì „í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ê°€ ì•„ë‹ˆë¯€ë¡œ <strong>ê²½ë¡œ ê¸°ë°˜</strong>ìœ¼ë¡œ ë³„ë„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ì „ë‹¬í•´ì•¼í•˜ëŠ” <strong>ìš”êµ¬ì‚¬í•­ì´ ì—†ê¸°</strong> ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ì¸í•´ ë¹ ë¥´ê²Œ ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ë„ë¡ NLBë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>IT ë¶„ì•¼ëŠ” ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ê¸°ìˆ ì´ ì ì°¨ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ê°€ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ ê¸°ëŠ¥ë„ ë°œì „í•˜ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° 2019ë…„ì— ì‘ì„±ëœ <a href="https://lemontia.tistory.com/898">ê³ ì • ì„¸ì…˜ ê´€ë ¨ ê¸€</a>ì—ì„œëŠ” NLBê°€ <strong>ê³ ì • ì„¸ì…˜ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤</strong>ê³  ë‚˜ì™€ìˆì§€ë§Œ í˜„ì¬ ELBì˜ ì œí’ˆ ë¹„êµí‘œì™€ ë¹„êµí•´ë³´ë©´ <strong>ë°±ì—”ë“œ ì•”í˜¸í™”, ê³ ì • ì„¸ì…˜ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì§€ì›</strong>í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="ELB-TLSv1-3-ë¯¸ì§€ì›"><a href="#ELB-TLSv1-3-ë¯¸ì§€ì›" class="headerlink" title="ELB TLSv1.3 ë¯¸ì§€ì›"></a>ELB TLSv1.3 ë¯¸ì§€ì›</h4><p>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì˜ ELBì—ì„œ TLS ì˜¤í”„ë¡œë“œ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ë§Œ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/create-https-listener.html#describe-ssl-policies">ë³´ì•ˆ ì •ì±…</a>ì— ë”°ë¼ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ëŠ” TLS 1.3ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. <strong>TLS 1.3ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ì‘ì—…ì€ ì•„ì§ ì§„í–‰ì¤‘</strong>ì´ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ TLS 1.3ì„ ì§€ì›í•˜ê³ ìí•˜ëŠ” ê²½ìš°ì—ëŠ” ELBì—ì„œ TLS ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ì—†ê³  NLBì˜ TCP ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•˜ì—¬ íŠ¸ë˜í”½ì´ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ì „ë‹¬ë˜ë„ë¡í•˜ê³  <strong>EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì‹¤í–‰ë˜ì–´ìˆëŠ” Nginxë¥¼ í†µí•´ TLS 1.3ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ êµ¬ì„±</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="Elastic-Beanstalk-TLS-ì˜¤í”„ë¡œë“œ"><a href="#Elastic-Beanstalk-TLS-ì˜¤í”„ë¡œë“œ" class="headerlink" title="Elastic Beanstalk TLS ì˜¤í”„ë¡œë“œ"></a>Elastic Beanstalk TLS ì˜¤í”„ë¡œë“œ</h2><p>ELBì—ì„œëŠ” TLS 1.3ì„ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©° NLBì—ì„œëŠ” ECC ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ìœ¼ë¯€ë¡œ <strong>Elastic Beanstalk</strong>ìœ¼ë¡œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì‹œ Nginxì—ì„œ SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ê³  <strong>í´ë¼ì´ì–¸íŠ¸ê°€ TLS 1.3 ë²„ì „ìœ¼ë¡œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆëŠ”ê°€ë¥¼ ê²€ì¦</strong>í•´ë³´ê³  ë§ˆë¬´ë¦¬ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<h3 id="Elastic-Beanstalk-Java-SE-í”Œë«í¼"><a href="#Elastic-Beanstalk-Java-SE-í”Œë«í¼" class="headerlink" title="Elastic Beanstalk Java SE í”Œë«í¼"></a>Elastic Beanstalk Java SE í”Œë«í¼</h3><p>ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” Java SE í”Œë«í¼ í™˜ê²½ì„ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤. ì´ë•Œ, ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ Beanstalk í™˜ê²½ì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-04.png" alt="ì›¹ ì„œë²„ í™˜ê²½ ì„ íƒ"></p>
<p><img data-src="/images/posts/tls-offload/tls-offload-05.png" alt="ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‹œì‘"></p>
<p>Beanstalk í™˜ê²½ êµ¬ì„± ì‹œ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì„¤ì •í•˜ê³  ì‹¶ì€ ê²½ìš° <strong>ì¶”ê°€ ì˜µì…˜ êµ¬ì„±</strong>ì„ í†µí•´ ì‚¬ìš©ì ì •ì˜ ì„¤ì •ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-06.png" alt="JVM ì˜µì…˜ í™˜ê²½ë³€ìˆ˜"></p>
<blockquote>
<p>ë°°í¬í•˜ê³  ë³´ë‹ˆ ì˜¤íƒ€ê°€ ìˆì—ˆë„¤ìš” :)</p>
</blockquote>
<p><img data-src="/images/posts/tls-offload/tls-offload-07.png" alt="ë¡œë“œë°¸ëŸ°ì‹± ì¸ìŠ¤í„´ìŠ¤"></p>
<p><img data-src="/images/posts/tls-offload/tls-offload-08.png" alt="NLB ì„ íƒ ë° ë¦¬ìŠ¤ë„ˆ êµ¬ì„±"></p>
<p>ê·¸ë¦¬ê³  EC2 ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼ì„ ìœ„í•œ í‚¤ë¥¼ ì„¤ì •í•˜ëŠ” ë“± ë¶€ê°€ ì„¤ì •ì„ í•˜ê³  í™˜ê²½ì„ ìƒì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë°°í¬ë˜ëŠ” í™˜ê²½ì´ ì¤€ë¹„ë©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-09.png" alt="Java SE í”Œë«í¼ í™˜ê²½ ìƒì„± ì™„ë£Œ"></p>
<blockquote>
<p>ì²˜ìŒ í™˜ê²½ì„ êµ¬ì„±í•  ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš° Beanstalkì—ì„œëŠ” í™˜ê²½ ì‚­ì œ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì§€ ì•Šì•„ ë‹¹í™©í•  ìˆ˜ ìˆìœ¼ë‚˜ CloudFormation ì„œë¹„ìŠ¤ë¡œ ì´ë™í•˜ì—¬ Beanstalk í™˜ê²½ì„ êµ¬ì„±ì¤‘ì¸ ìŠ¤íƒì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ìŠ¤í”„ë§-ì• í”Œë¦¬ì¼€ì´ì…˜-íŒ¨í‚¤ì§•-ë°-Java-SE-í”Œë«í¼-í™•ì¥"><a href="#ìŠ¤í”„ë§-ì• í”Œë¦¬ì¼€ì´ì…˜-íŒ¨í‚¤ì§•-ë°-Java-SE-í”Œë«í¼-í™•ì¥" class="headerlink" title="ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§• ë° Java SE í”Œë«í¼ í™•ì¥"></a>ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§• ë° Java SE í”Œë«í¼ í™•ì¥</h3><p>ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•œ Java SE í”Œë«í¼ì´ ìƒì„±ë˜ì—ˆìœ¼ë‹ˆ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ì—¬ <strong>Beanstalkì— ë°°í¬í•˜ê¸° ìœ„í•œ ì†ŒìŠ¤ ë²ˆë“¤</strong> íŒŒì¼ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ì†ŒìŠ¤ ë²ˆë“¤ì—ëŠ” íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ Jar íŒŒì¼ê³¼ í•¨ê»˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ë¥¼ ìœ„í•œ Procfileì„ í¬í•¨ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">task <span class="token function">procfile</span><span class="token punctuation">(</span>dependsOn<span class="token punctuation">:</span> bootJar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    doFirst <span class="token punctuation">&#123;</span>
        <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"build/libs"</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"web: java -Xmx1g -Dfile.encoding=UTF-8 -jar </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">bootJar<span class="token punctuation">.</span>archiveName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

task <span class="token function">awsbuild</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> procfile<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'.beanstalk/.ebextensions'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.ebextensions'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'.beanstalk/.platform'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.platform'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'Procfile'</span><span class="token punctuation">)</span>
        <span class="token function">include</span><span class="token punctuation">(</span>bootJar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-procfile.html">Procfileì„ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤ êµ¬ì„±</a>ì„ ì°¸ê³ í•˜ì„¸ìš”. </p>
</blockquote>
<h4 id="Java-SE-í”Œë«í¼-í™•ì¥-êµ¬ì„±"><a href="#Java-SE-í”Œë«í¼-í™•ì¥-êµ¬ì„±" class="headerlink" title="Java SE í”Œë«í¼ í™•ì¥ êµ¬ì„±"></a>Java SE í”Œë«í¼ í™•ì¥ êµ¬ì„±</h4><p>BeanstalkëŠ” <strong>.ebextensions</strong>ì™€ <strong>.platform</strong>ì„ í™œìš©í•˜ì—¬ EC2 ì¸ìŠ¤í„´ìŠ¤ í™˜ê²½ì„ í™•ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” HTTPë¡œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ í•¨ê»˜ TLS ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•  Nginxë¥¼ êµ¬ì„±í•´ì•¼í•˜ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ <strong>êµ¬ì„± ë° í”Œë«í¼ í™•ì¥ íŒŒì¼ì„ ìƒì„±</strong>í•©ë‹ˆë‹¤.</p>
<p><strong>Nginxì—ì„œ ì‚¬ìš©í•  SSL ì¸ì¦ì„œ íŒŒì¼ ìƒì„±</strong></p>
<pre class="language-yaml" data-language="yaml"><div class="caption"><span>beanstalk/.ebextensions/nginx-certificates.config</span></div><code class="language-yaml"><span class="token key atrule">files</span><span class="token punctuation">:</span>
    <span class="token key atrule">/etc/nginx/cert/server.crt</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----</span>
    <span class="token key atrule">/etc/nginx/cert/server.key</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN EC PARAMETERS-----
            #### PROTECTED ####
            -----END EC PARAMETERS-----
            -----BEGIN EC PRIVATE KEY-----
            #### PROTECTED ####
            -----END EC PRIVATE KEY-----</span>
    <span class="token key atrule">/etc/nginx/cert/server-ca-bundle</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----</span>

<span class="token key atrule">commands</span><span class="token punctuation">:</span>
    <span class="token key atrule">00-chain-ca-bundle</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            cat server.crt server-ca-bundle > server-ca.pem
            chown nginx:nginx server-ca.pem
            chmod 400 server-ca.pem</span>
    <span class="token key atrule">99-remove-bak</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> rm <span class="token punctuation">-</span>f <span class="token important">*.bak</span></code></pre>

<blockquote>
<p>íšŒì‚¬ ë„ë©”ì¸ì— ëŒ€í•œ ì¸ì¦ì„œì´ë¯€ë¡œ ì¸ì¦ì„œ ë‚´ìš©ì€ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</blockquote>
<p><strong>Nginx ì„¤ì • íŒŒì¼ í™•ì¥</strong></p>
<pre class="language-nginx" data-language="nginx"><div class="caption"><span>beanstalk/.platform/nginx/conf.d/elasticbeanstalk/00_application.conf</span></div><code class="language-nginx"><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê¸°ë³¸ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” 00_application.conf íŒŒì¼ì€ 80 í¬íŠ¸ì— ëŒ€í•˜ì—¬ 5000 í¬íŠ¸ë¡œ ì „ë‹¬ë˜ë„ë¡ êµ¬ì„±í•˜ë¯€ë¡œ 443 í¬íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ë„ë¡ í™•ì¥í•©ë‹ˆë‹¤.</p>
<pre class="language-nginx" data-language="nginx"><div class="caption"><span>beanstalk/.platform/nginx/nginx.conf</span></div><code class="language-nginx"><span class="token directive"><span class="token keyword">user</span>                    nginx</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_log</span>               /var/log/nginx/error.log warn</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">pid</span>                     /var/run/nginx.pid</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_processes</span>        auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span>    <span class="token number">32768</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">use</span>  epoll</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">include</span>         /etc/nginx/mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>    application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">log_format</span>      main    <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request</span>" '</span>
                            <span class="token string">'<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$http_referer</span>" '</span>
                            <span class="token string">'"<span class="token variable">$http_user_agent</span>" "<span class="token variable">$http_x_forwarded_for</span>"'</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">include</span> conf.d/*.conf</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_upgrade</span> <span class="token variable">$connection_upgrade</span></span> <span class="token punctuation">&#123;</span>
      <span class="token directive"><span class="token keyword">default</span>     <span class="token string">"upgrade"</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span>                <span class="token number">80</span> default_server</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">access_log</span>            /var/log/nginx/access.log main</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">client_body_timeout</span>   <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">keepalive_timeout</span>     <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip</span>                  <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip_comp_level</span>       <span class="token number">4</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip_types</span>            text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript</span><span class="token punctuation">;</span>

        <span class="token comment"># Include the Elastic Beanstalk generated locations</span>
        <span class="token directive"><span class="token keyword">include</span> conf.d/elasticbeanstalk/*.conf</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>


    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span>                   <span class="token number">443</span> ssl default_server</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>              springboot</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span>          /etc/nginx/cert/server-ca.pem</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span>      /etc/nginx/cert/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span>            TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span>              HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_verify_client</span>        optional_no_ca</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span>          http://127.0.0.1:5000</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_http_version</span>  1.1</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Connection          <span class="token variable">$connection_upgrade</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Upgrade             <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Host                <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Real-IP           <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For     <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-SSL-CERT          <span class="token variable">$ssl_client_escaped_cert</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_buffering</span>     <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/platforms-linux-extend.html">Elastic Beanstalk Linux í”Œë«í¼ í™•ì¥</a>ì„ ì°¸ê³ í•˜ì„¸ìš”. <a href="https://github.com/awsdocs/elastic-beanstalk-samples">elastic-beanstalk-samples</a>ì²˜ëŸ¼ ìƒ˜í”Œ íŒŒì¼ë„ ê³µìœ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì´ì œ ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ëŒ€ì‹  ìš°ë¦¬ê°€ ì¤€ë¹„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ì„ ì—…ë¡œë“œí•˜ë©´ Benstalk ì—”ì§„ì´ ì†ŒìŠ¤ ë²ˆë“¤ì„ ì¶”ì¶œí•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. Route 53ìœ¼ë¡œ Beanstalk í™˜ê²½ ì£¼ì†Œë¥¼ DNSë¡œ ì—°ê²°í•˜ê³  ì ‘ì†í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ TLS í•¸ë“œì‰ì´í¬ê°€ ìˆ˜í–‰ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/tls-offload/tls-offload-10.png"></p>
<p>NLBëŠ” íŠ¸ë˜í”½ì„ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ 443 í¬íŠ¸ë¡œ ì „ë‹¬í–ˆì„ ë¿ TLS ì˜¤í”„ë¡œë“œëŠ” Nginxì—ì„œ ìˆ˜í–‰í•˜ëŠ” ê²ƒìœ¼ë¡œ êµ¬ì„±í–ˆê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œëŠ” TLS 1.3 ë²„ì „ìœ¼ë¡œ TLS í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ <strong>ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ TLS 1.3ì„ ì§€ì›í•˜ê¸° ìœ„í•´ì„œëŠ” NLBì˜ TCP ë¦¬ìŠ¤ë„ˆì™€ Nginxì˜ TLS ì˜¤í”„ë¡œë“œë¥¼ í™œìš©í•˜ë©´ ê°€ëŠ¥í•¨ì„ ê²€ì¦</strong>í–ˆìŠµë‹ˆë‹¤.</p>
<h4 id="íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"><a href="#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" class="headerlink" title="íŠ¸ëŸ¬ë¸”ìŠˆíŒ…"></a>íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h4><p>Elastic Beanstalkë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ëŠ” ê³¼ì •ì—ì„œ ìƒê°ë³´ë‹¤ ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë‚´ìš©ì€ <strong>Benstalkì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì‹œ ë°œìƒí•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ” í•­ëª©</strong>ì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. ë”°ë¼í•´ë³´ëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ í•˜ëŠ” ë°”ë¨ìœ¼ë¡œ ê³µìœ í•©ë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ê²½ë¡œ</th>
<th>ìš©ë„</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;etc&#x2F;nginx&#x2F;</td>
<td>Nginx êµ¬ì„±</td>
<td></td>
</tr>
<tr>
<td>&#x2F;var&#x2F;app&#x2F;current</td>
<td>ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ë²ˆë“¤ ì¶”ì¶œ ê²½ë¡œ</td>
<td></td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;eb-engine.log</td>
<td>Beanstalk ë¡œê·¸</td>
<td></td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;nginx</td>
<td>Nginx ë¡œê·¸</td>
<td></td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;web.stdout.out</td>
<td>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸</td>
<td></td>
</tr>
</tbody></table>
<p><strong>Beanstalk ë¡œê·¸</strong>ëŠ” Beanstalk ì—”ì§„ì´ í”Œë«í¼ í™•ì¥ íŒŒì¼ë“¤ì„ ì‹¤í–‰í•˜ê³  ì„±ê³µí–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. ì´ ë¡œê·¸ë¥¼ í†µí•´ ì–´ëŠ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì „í™˜ì´ ì‹¤íŒ¨í•˜ì˜€ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ë¡œê·¸ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚˜ë¨¸ì§€ í•­ëª©ì„ í†µí•´ ì„¤ì •í•œ êµ¬ì„± ë° í™•ì¥ íŒŒì¼ì´ ì œëŒ€ë¡œ ì¶”ì¶œë˜ì–´ ë³µì‚¬ë˜ì—ˆëŠ”ì§€ Nginxê°€ ELBì— ì˜í•´ ì „ë‹¬ëœ íŠ¸ë˜í”½ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ê¹Œì§€ ì „ë‹¬í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Nginxì— ëŒ€í•´ì„œ ìì„¸íˆ ì•„ëŠ” ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ ì„¤ì • íŒŒì¼ì´ ì˜ëª»ëœ ë¶€ë¶„ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì–‘í•´ ë°”ë¼ë©° ì˜ëª»ëœ ì ì€ íŒ¨ë“œë°± ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Nginx</tag>
        <tag>TLS</tag>
        <tag>ELB</tag>
      </tags>
  </entry>
  <entry>
    <title>Trace OAuth Requests</title>
    <url>/trace-oauth-requests/</url>
    <content><![CDATA[<blockquote>
<p>Failed to find access token</p>
</blockquote>
<p>OAuth API ìš”ì²­ ì‹œ JdbcTokenStoreì—ì„œ ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ê¸°ë¡ë˜ëŠ” INFO ë ˆë²¨ì˜ ë¡œê·¸ ì…ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ í† í°ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì´ì•¼ê¸°ëŠ” ì˜¬ë°”ë¥´ì§€ ì•Šì€ ìš”ì²­ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  INFO ë ˆë²¨ë¡œ ë˜ì–´ìˆëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì˜ì•„í•˜ê¸´ í•©ë‹ˆë‹¤ë§Œ ìœ„ ì •ë³´ë§Œìœ¼ë¡œëŠ” ì–´ë–¤ í† í°ì— ì˜í•´ì„œ ì–´ë– í•œ OAuth APIì— ëŒ€í•´ ìš”ì²­ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì¸í”„ë¼ ë ˆë²¨ì—ì„œ <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/load-balancer-access-logs.html">ELB</a> ë˜ëŠ” <a href="https://docs.nginx.com/nginx/admin-guide/monitoring/logging/#setting-up-the-access-log">Nginx</a>ì™€ ê°™ì€ í”„ë¡ì‹œ ë‹¨ê³„ì—ì„œ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ”ë° ëŒ€ë¶€ë¶„ì˜ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì—ì„œëŠ” ìš”ì²­ í—¤ë” ì •ë³´ë¥¼ ìƒì„¸í•˜ê²Œ ê¸°ë¡í•˜ì§€ ì•Šê³  ê°„ê²°í•˜ê²Œ ë‚¨ê¸°ë„ë¡ ì„¤ì •ë˜ë¯€ë¡œ í† í° ì •ë³´ê°€ í¬í•¨ë˜ëŠ” Authorization í—¤ë”ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<h2 id="Bearer-Authentication"><a href="#Bearer-Authentication" class="headerlink" title="Bearer Authentication"></a>Bearer Authentication</h2><p>í˜„ì¬ ì‹œìŠ¤í…œì€ Spring Security OAuth ëª¨ë“ˆì„ í†µí•´ JDBC ê¸°ë°˜ì˜ Opaque í† í°ìœ¼ë¡œ ë˜ì–´ìˆëŠ” Bearer ì¸ì¦ì„ ì§€ì›í•˜ëŠ” OpenAPIë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¼ë¶€ ì‚¬ìš©ìë“¤ì´ IoT ë””ë°”ì´ìŠ¤ë¥¼ êµ¬í˜„ ì‹œ OpenAPIë¥¼ ì‚¬ìš©í•  ë•Œ ì˜ëª»ëœ í† í°ì„ ì‚¬ìš©í•˜ëŠ” ë¬¸ì œê°€ ì‚¬ì—…íŒ€ìœ¼ë¡œë¶€í„° ë¦¬í¬íŠ¸ ë˜ì—ˆëŠ”ë° ë‹¨ìˆœí•˜ê²Œ ì˜ëª»ëœ ì•¡ì„¸ìŠ¤ í† í°ì´ ì „ë‹¬ë˜ì—ˆë‹¤ëŠ” ë¡œê·¸ì— ëŒ€í•´ì„œ ì›ì¸ íŒŒì•…ì„ ìš”êµ¬í•˜ëŠ”ë° ë¶ˆêµ¬í•˜ê³  íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë³´ê°€ ë‚¨ì•„ìˆì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
<p>ì‚¬ì‹¤ OpenAPIì˜ ê° í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬ë˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” AOPê°€ ì ìš©ë˜ì–´ í•¸ë“¤ëŸ¬ì— ëŒ€í•œ íŒŒë¼ë¯¸í„° ë“¤ê³¼ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””ì™€ í† í° ì •ë³´ë¥¼ ì´ë¯¸ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— API ë¡œê·¸ë¡œ ì €ì¥í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë¬¸ì œëŠ” ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ìš”ì²­ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„° ì²´ì¸ì— ì˜í•´ì„œ í•¸ë“¤ëŸ¬ê¹Œì§€ ì§„ì…í•˜ê¸° ì „ì— ì˜¤ë¥˜ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆê¸°ì— API ë¡œê·¸ê°€ ë‚¨ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì´ íŒŒì•…ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì–´ë– í•œ ë¬¸ì œì— ëŒ€í•´ì„œ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë³´ëŠ” ë‚¨ê²¨ì•¼í•˜ë¯€ë¡œ ì¸ì¦ëœ ì‚¬ìš©ìê°€ OpenAPIë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ ì™¸ì— OAuthì— ëŒ€í•œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œëŠ” ë³„ë„ë¡œ ë‚¨ê¸°ë„ë¡ ê°œì„ í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="OAuth2AuthenticationProcessingFilter"><a href="#OAuth2AuthenticationProcessingFilter" class="headerlink" title="OAuth2AuthenticationProcessingFilter"></a>OAuth2AuthenticationProcessingFilter</h3><pre class="language-java" data-language="java"><code class="language-java">eventPublisher<span class="token punctuation">.</span><span class="token function">publishAuthenticationFailure</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BadCredentialsException</span><span class="token punctuation">(</span>failed<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> failed<span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token keyword">new</span> <span class="token class-name">PreAuthenticatedAuthenticationToken</span><span class="token punctuation">(</span><span class="token string">"access-token"</span><span class="token punctuation">,</span> <span class="token string">"N/A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>Bearer í† í°ì— ëŒ€í•œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” OAuth2AuthenticationProcessingFilterì—ì„œ AuthenticationEventPublisherë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ì„±ê³µì´ë‚˜ ì˜¤ë¥˜ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ë¯€ë¡œ DefaultAuthenticationEventPublisherë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ êµ¬í˜„í•˜ë©´ ì–´ë–¤ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­í–ˆëŠ”ì§€ëŠ” ê¸°ë¡í•  ìˆ˜ ìˆëŠ”ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ ì „ë‹¬ë˜ëŠ” ì´ë²¤íŠ¸ ì •ë³´ì—ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì›í•˜ëŠ” ë§Œí¼ì˜ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ëŒ€ë¶€ë¶„ ì¸í„°ë„·ì— ê²€ìƒ‰í•˜ë©´ ë‚˜ì˜¤ê¸°ì— ì´ë¦¬ì €ë¦¬ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="AbstractRequestLoggingFilter"><a href="#AbstractRequestLoggingFilter" class="headerlink" title="AbstractRequestLoggingFilter"></a>AbstractRequestLoggingFilter</h3><p>AbstractRequestLoggingFilter.getMessagePayload í•¨ìˆ˜ë¥¼ ë³´ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ContentCachingRequestWrapperë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/ContentCachingResponseWrapper.html">ContentCachingResponseWrapper</a>ì— ëŒ€í•´ì„œ ì‚´í´ë³´ë‹ˆ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë‚´ë ¤ì¤€ ì´í›„ì—ë„ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ì½ì„ ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤ëŠ” ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ìš”ì²­ì˜ ì‘ë‹µìœ¼ë¡œ ì•¡ì„¸ìŠ¤ í† í° ì •ë³´ë¥¼ ì „ë‹¬í•˜ë¯€ë¡œ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ëœ í† í°ì„ ë¡œê·¸ë¡œì¨ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="HttpTraceFilter"><a href="#HttpTraceFilter" class="headerlink" title="HttpTraceFilter"></a>HttpTraceFilter</h3><p>Spring Boot Actuator ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´ë“œë¯¼ í˜ì´ì§€ë¥¼ êµ¬í˜„í•´ë†“ì•˜ê¸°ì— <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.tracing">HttpTraceEndpoint</a>ë¥¼ í†µí•´ì„œ ì¼ë¶€ ìš”ì²­ì— ëŒ€í•œ íŠ¸ë ˆì´ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì ì„ ë– ì˜¬ë ¤ HttpTraceFilterë¥¼ ì‚´í´ë³´ë‹ˆ TraceableHttpServletRequestì™€ TraceableHttpServletResponseë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isRequestValid</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token class-name">TraceableHttpServletRequest</span> traceableRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HttpTrace</span> trace <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">receivedRequest</span><span class="token punctuation">(</span>traceableRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        status <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">TraceableHttpServletResponse</span> traceableResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>status <span class="token operator">!=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token operator">:</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">sendingResponse</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">,</span> request<span class="token operator">::</span><span class="token function">getUserPrincipal</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">getSessionId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ë‹¨, TraceableHttpServletRequestì™€ TraceableHttpServletResponseëŠ” final í‚¤ì›Œë“œê°€ ì„¤ì •ëœ í´ë˜ìŠ¤ì´ë¯€ë¡œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ í™œìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="OAuthFilter"><a href="#OAuthFilter" class="headerlink" title="OAuthFilter"></a>OAuthFilter</h3><p>ì•ì„œ ì‚´í´ë³¸ í´ë˜ìŠ¤ë“¤ì„ ì¢…í•©í•˜ì—¬ OAuth ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ì´ë²¤íŠ¸ë¡œ ë°œìƒì‹œí‚¤ëŠ” í•„í„°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuthFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationEventPublisherAware</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AntPathMatcher</span> pathMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpExchangeTracer</span> tracer<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DefaultTokenServices</span> defaultTokenServices<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ApplicationEventPublisher</span> applicationEventPublisher<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OAuthFilter</span><span class="token punctuation">(</span><span class="token class-name">HttpTraceProperties</span> traceProperties<span class="token punctuation">,</span> <span class="token class-name">DefaultTokenServices</span> defaultTokenServices<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tracer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpExchangeTracer</span><span class="token punctuation">(</span>traceProperties<span class="token punctuation">.</span><span class="token function">getInclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>defaultTokenServices <span class="token operator">=</span> defaultTokenServices<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> isApiV1 <span class="token operator">=</span> pathMatcher<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"/oauth/v1/**"</span><span class="token punctuation">,</span> requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isApiV1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">TraceableHttpServletRequest</span> traceableRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ContentCachingResponseWrapper</span> cachingResponseWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">HttpTrace</span> trace <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">receivedRequest</span><span class="token punctuation">(</span>traceableRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> cachingResponseWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
                status <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">TraceableHttpServletResponse</span> traceableResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span>
                        <span class="token punctuation">(</span>status <span class="token operator">!=</span> response<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span>cachingResponseWrapper<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token operator">:</span> cachingResponseWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>tracer<span class="token punctuation">.</span><span class="token function">sendingResponse</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">,</span> request<span class="token operator">::</span><span class="token function">getUserPrincipal</span><span class="token punctuation">,</span>
                        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">getSessionId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">String</span> clientId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>applicationEventPublisher <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">String</span> tokenValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">OAuth2AuthenticationDetails</span><span class="token punctuation">.</span><span class="token constant">ACCESS_TOKEN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">OAuth2Authentication</span> authentication <span class="token operator">=</span> defaultTokenServices<span class="token punctuation">.</span><span class="token function">loadAuthentication</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        clientId <span class="token operator">=</span> authentication<span class="token punctuation">.</span><span class="token function">getOAuth2Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvalidTokenException</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
                    applicationEventPublisher<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OAuthTraceEvent</span><span class="token punctuation">(</span>trace<span class="token punctuation">,</span> traceableResponse<span class="token punctuation">.</span><span class="token function">getResponseBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> clientId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>

        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getSessionId</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationEventPublisher</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEventPublisher</span> applicationEventPublisher<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationEventPublisher <span class="token operator">=</span> applicationEventPublisher<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TraceableHttpServletRequest</span> <span class="token keyword">implements</span> <span class="token class-name">TraceableRequest</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">;</span>

        <span class="token class-name">TraceableHttpServletRequest</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>request <span class="token operator">=</span> request<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">URI</span> <span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> queryString <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">StringBuffer</span> urlBuffer <span class="token operator">=</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">URI</span><span class="token punctuation">(</span>urlBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">URISyntaxException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> encoded <span class="token operator">=</span> <span class="token class-name">UriUtils</span><span class="token punctuation">.</span><span class="token function">encodeQuery</span><span class="token punctuation">(</span>queryString<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">StringBuffer</span> urlBuffer <span class="token operator">=</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span>encoded<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token constant">URI</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>urlBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">private</span> <span class="token class-name">StringBuffer</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span><span class="token class-name">String</span> queryString<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> names <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> headers<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TraceableHttpServletResponse</span> <span class="token keyword">implements</span> <span class="token class-name">TraceableResponse</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpServletResponse</span> delegate<span class="token punctuation">;</span>

        <span class="token class-name">TraceableHttpServletResponse</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">extractHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> headers<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getResponseBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token keyword">instanceof</span> <span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token class-name">ContentCachingResponseWrapper</span> wrapper <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ContentCachingResponseWrapper</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">;</span>
                <span class="token keyword">int</span> status <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">getContentAsByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> buf<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span>length<span class="token punctuation">,</span> wrapper<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                wrapper<span class="token punctuation">.</span><span class="token function">copyBodyToResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> body<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">CustomStatusResponseWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletResponseWrapper</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> status<span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token class-name">CustomStatusResponseWrapper</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token keyword">int</span> status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì˜ëª»ëœ í† í°ì— ëŒ€í•œ ì‘ë‹µ ì²˜ë¦¬ëŠ” OAuth2AuthenticationProcessingFilterì—ì„œ OAuthExceptionì„ ë˜ì§€ê²Œ ë˜ë©´ì„œ ìˆ˜í–‰í•˜ë¯€ë¡œ ìš°ë¦¬ëŠ” ê·¸ì „ì— ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ìºì‹œí•˜ì—¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ ContentCachingResponseWrapperë¥¼ ì´í›„ í•„í„°ë¡œ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. </p>
<h4 id="OAuthTraceEvent"><a href="#OAuthTraceEvent" class="headerlink" title="OAuthTraceEvent"></a>OAuthTraceEvent</h4><p>OAuthTraceEventëŠ” OAuth APIì— ëŒ€í•œ ìš”ì²­ê³¼ ì‘ë‹µ ì •ë³´ì—ì„œ ì˜¬ë°”ë¥¸ í† í°ìœ¼ë¡œ ìš”ì²­ëœ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””ê°€ ì¡´ì¬í•˜ë¯€ë¡œ ìš”ì²­ í—¤ë” ì¤‘ Authorizationì— í¬í•¨ëœ í† í°ê¹Œì§€ ë¡œê·¸ë¡œ ì €ì¥í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. í† í° ìì²´ë¥¼ ì œì™¸í•˜ê¸° ë³´ë‹¤ëŠ” í† í°ì˜ ì¼ë¶€ë¥¼ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuthTraceEvent</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationEvent</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Request</span> request<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Response</span> response<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Principal</span> principal<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpTrace<span class="token punctuation">.</span>Session</span> session<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> responseBody<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> clientId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> timeTaken<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> traceTimestamp<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OAuthTraceEvent</span><span class="token punctuation">(</span><span class="token class-name">HttpTrace</span> trace<span class="token punctuation">,</span> <span class="token class-name">String</span> responseBody<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">String</span> clientId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>clientId <span class="token operator">=</span> clientId<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>clientId <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span> <span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">protectAuthorization</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timeTaken <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getTimeTaken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>request <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>response <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>session <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>responseBody <span class="token operator">=</span> responseBody<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>traceTimestamp <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">protectAuthorization</span><span class="token punctuation">(</span><span class="token class-name">HttpTrace</span> trace<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>clientId <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span> <span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> headers <span class="token operator">=</span> trace<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> authorization <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> authorization<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">String</span> s <span class="token operator">=</span> authorization<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"Bearer"</span><span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"bearer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"(?&lt;=.&#123;19&#125;)."</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    authorization<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì´ì œ ìš°ë¦¬ëŠ” OAuthTraceEventë¥¼ ì²˜ë¦¬í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ë˜ëŠ” ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ì— ì €ì¥í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://www.baeldung.com/spring-http-logging">Spring â€“ Log Incoming Requests</a>  </li>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.tracing">Production-ready Features - 8. HTTP Tracing</a></li>
</ul>
]]></content>
      <tags>
        <tag>HttpTrace</tag>
        <tag>ContentCaching</tag>
      </tags>
  </entry>
  <entry>
    <title>ì›ê²© í˜¸ìŠ¤íŠ¸ë¡œ íŒŒì¼ ì „ì†¡í•˜ê¸°</title>
    <url>/transfer-files-to-remote/</url>
    <content><![CDATA[<p>ì›¹ ê°œë°œìê°€ ë°±ì—”ë“œ ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ íŒŒì¼ê³¼ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë¹Œë“œëœ ì—ì…‹ íŒŒì¼ë“¤ì„ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œìœ¼ë¡œì¨ ë°°í¬í•˜ê¸° ìœ„í•´ì„œ ë°±ì—”ë“œ ê°œë°œì ë˜ëŠ” ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ êµ¬ì„±í•´ë†“ì€ ì¸í”„ë¼ í™˜ê²½ì— ìˆëŠ” ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— íŒŒì¼ì„ ì „ì†¡í•´ì•¼ í•©ë‹ˆë‹¤. ì¡°ì§ ë˜ëŠ” ì‹œìŠ¤í…œì— ëŒ€í•œ ì¸í”„ë¼ êµ¬ì„±ì— ë”°ë¼ì„œ ì—¬ëŸ¬ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ë¹Œë“œ íŒŒì¼ì„ ì „ì†¡í•  ìˆ˜ ìˆëŠ”ë° ê°œì¸ì ì¸ ê²½í—˜ì„ í† ëŒ€ë¡œ ì›ê²© í˜¸ìŠ¤íŠ¸ì— ë¹Œë“œ íŒŒì¼ì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì •ë¦¬í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<h4 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h4><p>ì›¹ ê°œë°œì ë˜ëŠ” ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ ì›ê²© í˜¸ìŠ¤íŠ¸ì— íŒŒì¼ì„ ì „ì†¡í•˜ê¸° ìœ„í•´ì„œëŠ” SCP ë˜ëŠ” SFTP ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” S3ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ì„œë„ ì™¸ë¶€ ì¸í„°ë„·ìœ¼ë¡œ ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í•œ í™˜ê²½ì—ì„œë„ íŒŒì¼ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="SCP"><a href="#SCP" class="headerlink" title="SCP"></a>SCP</h4><p>SCP ëª…ë ¹ì–´ëŠ” SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ ì „ì†¡í•˜ëŠ” ë°©ë²•ìœ¼ë¡œì¨ SSH ì ‘ì†ì´ ê°€ëŠ¥í•œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¡œ íŒŒì¼ì„ ë³µì‚¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\docker\nginx<span class="token punctuation">.</span>conf> <span class="token function">ls</span>

    ë””ë ‰í„°ë¦¬: C:\Users\Mambo\docker\nginx<span class="token punctuation">.</span>conf

Mode                 LastWriteTime         Length Name
<span class="token operator">--</span><span class="token operator">--</span>                 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>         <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span>
d-<span class="token operator">--</span><span class="token operator">--</span>    2022-02-22  ì˜¤ì „ 6:49:27                static
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>    2022-02-22  ì˜¤ì „ 6:49:27       19245297 demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>   2022-02-22  ì˜¤í›„ 11:26:45            473 docker-compose-local<span class="token punctuation">.</span>yaml
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>   2022-02-22  ì˜¤í›„ 11:05:42            573 docker-compose<span class="token punctuation">.</span>yaml
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>   2022-02-22  ì˜¤í›„ 11:26:28            241 localhost+3-key<span class="token punctuation">.</span>pem
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>   2022-02-22  ì˜¤í›„ 11:26:28           1318 localhost+3<span class="token punctuation">.</span>pem
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>    2022-05-21  ì˜¤ì „ 8:13:15           3017 nginx-local<span class="token punctuation">.</span>conf
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>   2022-02-22  ì˜¤í›„ 11:05:40           2896 nginx<span class="token punctuation">.</span>conf
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>    2022-02-22  ì˜¤ì „ 6:49:27           2036 README<span class="token punctuation">.</span>md
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>    2022-02-22  ì˜¤ì „ 6:49:27           1436 server<span class="token punctuation">.</span>crt
<span class="token operator">-</span>a-<span class="token operator">--</span><span class="token operator">-</span>    2022-02-22  ì˜¤ì „ 6:49:27            246 server<span class="token punctuation">.</span>key

<span class="token comment"># SCP ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œì»¬ ì»´í“¨í„°ì— ìˆëŠ” íŒŒì¼ì„ ì›ê²© í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.</span>
<span class="token function">PS</span> C:\Users\Mambo\docker\nginx<span class="token punctuation">.</span>conf> scp <span class="token punctuation">.</span><span class="token operator">/</span>demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18:<span class="token operator">/</span>home/ubuntu/java/
ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18's password:
demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar                                                                                                                        100%   18MB  44<span class="token punctuation">.</span>0MB/s   00:00</code></pre>

<blockquote>
<p>ì œ ë¡œì»¬ ì»´í“¨í„°ì—ëŠ” ê°€ìƒ í™˜ê²½ ë¨¸ì‹ ì„ í†µí•´ì„œ ì‹¤í–‰í•´ë†“ì€ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤(192.168.0.18)ì´ ì¤€ë¹„ë˜ì–´ìˆìœ¼ë©° ìœ„ì™€ ê°™ì´ demo-0.0.1-SNAPSHOT.jar ë¼ëŠ” ë¹Œë“œ íŒŒì¼ì´ ì¡´ì¬í•˜ì—¬ ì´ê²ƒì„ SCP ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì›ê²© í˜¸ìŠ¤íŠ¸ì˜ ì‚¬ìš©ì í™ˆ ê²½ë¡œ í•˜ìœ„ì˜ javaë¼ëŠ” í´ë”ì— ë³µì‚¬í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="SFTP"><a href="#SFTP" class="headerlink" title="SFTP"></a>SFTP</h4><p>ì¼ë°˜ì ìœ¼ë¡œ FTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ íŒŒì¼ ì „ì†¡ì„ ìˆ˜í–‰í•˜ëŠ”ë°ìš”. ì‹¤ë¬´ì—ì„œëŠ” SFTPë¥¼ ì‚¬ìš©í•˜ë©° í„°ë¯¸ë„ ëª…ë ¹ì–´ë³´ë‹¤ëŠ” <a href="https://filezilla-project.org/">íŒŒì¼ì§ˆë¼(FileZilla)</a>ì™€ ê°™ì€ GUIë¥¼ ì œê³µí•˜ëŠ” FTP í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤. SFTPëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë°©ì‹ì´ë¯€ë¡œ SCPì˜ ë‹¨ì¼ ëª…ë ¹ì–´ë¡œ íŒŒì¼ì„ ì „ì†¡í–ˆë˜ ê²ƒê³¼ ë‹¤ë¥´ê²Œ ëŒ€í™”í˜• ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo\docker\nginx<span class="token punctuation">.</span>conf> sftp ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18
ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18 password:
Connected to ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18<span class="token punctuation">.</span>
sftp> lls

 C:\Users\Mambo\docker\nginx<span class="token punctuation">.</span>conf ë””ë ‰í„°ë¦¬

2022-02-27  ì˜¤ì „ 10:59    &lt;<span class="token function">DIR</span>>          <span class="token punctuation">.</span>
2022-02-27  ì˜¤ì „ 10:59    &lt;<span class="token function">DIR</span>>          <span class="token punctuation">.</span><span class="token punctuation">.</span>
2022-02-22  ì˜¤ì „ 06:49        19<span class="token punctuation">,</span>245<span class="token punctuation">,</span>297 demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar
2022-02-22  ì˜¤í›„ 11:26               473 docker-compose-local<span class="token punctuation">.</span>yaml
2022-02-22  ì˜¤í›„ 11:05               573 docker-compose<span class="token punctuation">.</span>yaml
2022-02-22  ì˜¤í›„ 11:26               241 localhost+3-key<span class="token punctuation">.</span>pem
2022-02-22  ì˜¤í›„ 11:26             1<span class="token punctuation">,</span>318 localhost+3<span class="token punctuation">.</span>pem
2022-05-21  ì˜¤ì „ 08:13             3<span class="token punctuation">,</span>017 nginx-local<span class="token punctuation">.</span>conf
2022-02-22  ì˜¤í›„ 11:05             2<span class="token punctuation">,</span>896 nginx<span class="token punctuation">.</span>conf
2022-02-22  ì˜¤ì „ 06:49             2<span class="token punctuation">,</span>036 README<span class="token punctuation">.</span>md
2022-02-22  ì˜¤ì „ 06:49             1<span class="token punctuation">,</span>436 server<span class="token punctuation">.</span>crt
2022-02-22  ì˜¤ì „ 06:49               246 server<span class="token punctuation">.</span>key
2022-02-22  ì˜¤ì „ 06:49    &lt;<span class="token function">DIR</span>>          static
              10ê°œ íŒŒì¼          19<span class="token punctuation">,</span>257<span class="token punctuation">,</span>533 ë°”ì´íŠ¸
               3ê°œ ë””ë ‰í„°ë¦¬  51<span class="token punctuation">,</span>521<span class="token punctuation">,</span>728<span class="token punctuation">,</span>512 ë°”ì´íŠ¸ ë‚¨ìŒ

<span class="token comment"># java í´ë”ë¡œ ì´ë™í•œ í›„ íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.</span>
sftp> cd java
sftp> put demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar
Uploading demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar to <span class="token operator">/</span>home/ubuntu/java/demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar
demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar                                                                                                                        100%   18MB  68<span class="token punctuation">.</span>8MB/s   00:00</code></pre>

<blockquote>
<p>ë¡œì»¬ ì»´í“¨í„°ì—ì„œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ ë¡œì»¬(l)ì´ ë¶™ì€ llsë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ ë°”ë¼ë³´ëŠ” ê²½ë¡œë¥¼ í™•ì¸í•˜ê³  ì›ê²© í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ì„œ íŒŒì¼ì„ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ SCP ëª…ë ¹ì–´ê°€ ìˆëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  SFTP í”„ë¡œí† ì½œì„ ë³„ë„ë¡œ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
</blockquote>
<p>SFTP í”„ë¡œí† ì½œì„ ë³„ë„ë¡œ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œëŠ” ìì„¸íˆ ëª¨ë¦…ë‹ˆë‹¤. ë‹¤ë§Œ, ê°œì¸ì ì¸ ì‹¤ë¬´ ê²½í—˜ì„ í† ëŒ€ë¡œ ì´ì•¼ê¸°í•´ë³´ìë©´ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì— ëŒ€í•œ SSH ì ‘ì† ì‹œ OTPë¡œ 2FA ì¸ì¦ì„ ìš”êµ¬í•˜ë©° <a href="https://aws.amazon.com/ko/blogs/security/how-to-record-ssh-sessions-established-through-a-bastion-host/">ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸</a>ì— ëŒ€í•œ ëª…ë ¹ì–´ ìˆ˜í–‰ì„ ê¸°ë¡í•˜ê¸° ìœ„í•´ì„œ SCP ëª…ë ¹ì–´ì™€ ê°™ì´ ì¸í„°ë™ì…˜ ì„¸ì…˜ì´ ì•„ë‹Œ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ì œí•œë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">    <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

 /<span class="token comment">#######                        /##     /##</span>
<span class="token operator">|</span> <span class="token comment">##__  ##                      | ##    |__/</span>
<span class="token operator">|</span> <span class="token comment">##  \ ##  /######   /####### /######   /##  /######  /#######</span>
<span class="token operator">|</span> <span class="token comment">#######  |____  ## /##_____/|_  ##_/  | ## /##__  ##| ##__  ##</span>
<span class="token operator">|</span> <span class="token comment">##__  ##  /#######|  ######   | ##    | ##| ##  \ ##| ##  \ ##</span>
<span class="token operator">|</span> <span class="token comment">##  \ ## /##__  ## \____  ##  | ## /##| ##| ##  | ##| ##  | ##</span>
<span class="token operator">|</span> <span class="token comment">#######/|  ####### /#######/  |  ####/| ##|  ######/| ##  | ##</span>
<span class="token operator">|</span>_______/  <span class="token punctuation">\</span>_______/<span class="token operator">|</span>_______/    <span class="token punctuation">\</span>___/  <span class="token operator">|</span>__/ <span class="token punctuation">\</span>______/ <span class="token operator">|</span>__/  <span class="token operator">|</span>__/


<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
    <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Verification code: ******
This bastion supports interactive sessions only. Do not supply a <span class="token builtin class-name">command</span></code></pre>

<p>ì´ì™€ ê°™ì€ ì¸í”„ë¼ í™˜ê²½ì—ì„œëŠ” SFTP ì„œë²„ì— ì—…ë¡œë“œë˜ëŠ” íŒŒì¼ë“¤ì€ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì˜ íŠ¹ì • ê²½ë¡œì— ë§ˆìš´íŠ¸ë˜ì–´ SSH ì ‘ì†ì„ ìˆ˜í–‰í•œ í›„ SCP ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ì œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¡œ íŒŒì¼ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. SFTP ëª…ë ¹ì–´ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³ ì‹¶ì€ ê²½ìš° <a href="https://www.digitalocean.com/community/tutorials/how-to-use-sftp-to-securely-transfer-files-with-a-remote-server">How To Use SFTP to Securely Transfer Files with a Remote Server</a>ë¥¼ ì°¸ê³ í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h4 id="S3"><a href="#S3" class="headerlink" title="S3"></a>S3</h4><p>ìš”ì¦˜ì—ëŠ” IDCì™€ ê°™ì€ ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ë³´ë‹¤ëŠ” AWSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ í™˜ê²½ì— ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. AWS ì—ì„œëŠ” S3ë¼ëŠ” ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ë° S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ëŠ” IAMì˜ ìê²©ì¦ëª…ì„ ì‚¬ìš©í•´ì„œ ì‰½ê²Œ íŒŒì¼ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆê³  EC2 ì¸ìŠ¤í„´ìŠ¤ ì—­í• ì— S3 ë²„í‚·ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•´ë†“ìœ¼ë©´ EC2 ì¸ìŠ¤í„´ìŠ¤ ë‚´ì—ì„œë„ S3 ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ íŒŒì¼ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment"># ë¡œì»¬ ì»´í“¨í„°ì— ìˆëŠ” íŒŒì¼ì„ S3 ë²„í‚·ì— ë³µì‚¬í•©ë‹ˆë‹¤.</span>
aws s3 <span class="token function">cp</span> demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar s3:<span class="token operator">/</span><span class="token operator">/</span>mambo<span class="token punctuation">.</span>kr/java/ <span class="token operator">--</span>profile mambo

<span class="token comment"># EC ì¸ìŠ¤í„´ìŠ¤ ë‚´ì—ì„œ S3 ë²„í‚·ì— ìˆëŠ” íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.</span>
aws s3 <span class="token function">cp</span> s3:<span class="token operator">/</span><span class="token operator">/</span>mambo<span class="token punctuation">.</span>kr/java/demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar <span class="token punctuation">.</span><span class="token operator">/</span></code></pre>

<blockquote>
<p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ê°€ ë¶ˆê°€ëŠ¥í•œ ë²„í‚·ì— ë„ë©”ì¸ ì¸ì¦ì„œ ë˜ëŠ” ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ íŒ¨ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ë“±ì„ ì—…ë¡œë“œí•˜ê³  ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì ‘ì†í•˜ì—¬ í•´ë‹¹ íŒŒì¼ë“¤ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •ëœ ë²„í‚·ì— íŒŒì¼ì„ ì—…ë¡œë“œí•´ë‘ë©´ ì¡°ì§ì˜ ì™¸ë¶€ë¡œ íŒŒì¼ì„ ê³µìœ í•´ì•¼í•  ë•Œ HTTP ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‹¤ì–‘í•˜ê²Œ í™œìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì´ì²˜ëŸ¼ ì›ê²© í˜¸ìŠ¤íŠ¸ì— íŒŒì¼ì„ ì „ì†¡í•˜ëŠ” ë°©ë²•ì€ ì¸í”„ë¼ êµ¬ì„±ì— ë”°ë¼ì„œ ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. IT ë¶„ì•¼ê°€ ì–´ë ¤ìš´ ì´ìœ ëŠ” ìƒê°ë³´ë‹¤ ë‹¤ì–‘í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì •ë‹µì´ë¼ëŠ” ë°©ì‹ì´ ì—†ê¸° ë•Œë¬¸ì— ê°œë°œìë§ˆë‹¤ ì¡°ì§ì—ì„œ ì–´ë– í•œ ë°©ì‹ì„ ì·¨í•˜ëŠëƒì— ë”°ë¼ ë‹¤ì–‘í•œ ê²½í—˜ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ìˆìŠµë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>S3</tag>
        <tag>SSH</tag>
        <tag>SCP</tag>
        <tag>SFTP</tag>
      </tags>
  </entry>
  <entry>
    <title>ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ í™˜ê²½ êµ¬ì¶•í•˜ê¸°</title>
    <url>/ubuntu-linux/</url>
    <content><![CDATA[<p>ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ê°œë°œìëŠ” ë¦¬ëˆ…ìŠ¤ ì„œë²„ ë° ì¸í”„ë¼ í™˜ê²½ì„ ì§ì ‘ì ìœ¼ë¡œ êµ¬ì¶•í•  ì¼ì€ ì—†ë‹¤ê³  ë§í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¡°ì§ ê·œëª¨ì— ë”°ë¼ ì¸í”„ë¼ íŒ€ ë˜ëŠ” ì„œë²„ ì—”ì§€ë‹ˆì–´ê°€ ì¸í”„ë¼ë¥¼ êµ¬ì„±í• ìˆ˜ë„ ìˆê³  ì›¹ ê°œë°œìê°€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ê°„ë‹¨í•˜ê²Œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ì „ íšŒì‚¬ì˜ ì„œë²„ ì—”ì§€ë‹ˆì–´ì´ì…¨ë˜ ë¶€ì¥ë‹˜ì´ í˜„ì¬ ì¡°ì§ì— ì˜¤ê¸°ì „ê¹Œì§€ëŠ” ì‚¬ë‚´ ê°œë°œìë“¤ì´ ì¸í”„ë¼ë¥¼ ì‘ê²Œë‚˜ë§ˆ ë‹´ë‹¹í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì‚¬ë‚´ ì¸í”„ë¼ í™˜ê²½ì„ ë§ˆìŒê» ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¡°ì§ì´ ì•„ë‹ˆê³ ì„œì•¼ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¥¼ ì‰½ê²Œ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆëŠ” í™˜ê²½ì€ ì—†ê¸° ë•Œë¬¸ì— ì›¹ ê°œë°œìê°€ ë¡œì»¬ ì»´í“¨í„°ì— ê°€ìƒ ë¨¸ì‹ ì„ í†µí•´ ìš°ë¶„íˆ¬ì™€ ê°™ì€ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì„ ì„¤ì¹˜í•  ìˆ˜ ìˆì–´ì•¼í•˜ë©° ì´ë¥¼ í†µí•´ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ëŒ€í•œ ê²½í—˜ì„ í•™ìŠµí•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ë¬´ì—ì„œ ì–´ëŠ ì •ë„ ê·œëª¨ê°€ ìˆëŠ” ê¸°ì—…ì—ì„œëŠ” CentOSì™€ ê°™ì€ RHEL ê¸°ë°˜ì˜ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì€ë° ë°ë¹„ì•ˆ ê³„ì—´ì˜ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë„ ë§ì´ ë°œì „í•˜ì—¬ ì´ì œëŠ” ì•ˆì •ì„± ìˆëŠ” LTS ë²„ì „ì„ ì œê³µí•˜ë¯€ë¡œ ìµœê·¼ì—ëŠ” ë§ì´ í™œìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>CentOS EOL ë¬¸ì œë¡œ ì¸í•˜ì—¬ ì‹¤ì œë¡œ CentOS ëŒ€ì²´ì œ ì¤‘ í•˜ë‚˜ì¸ <a href="https://almalinux.org/">AlmaLinux</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•œ ê³ ê° í™˜ê²½ë„ ìˆìœ¼ë©° ì¼ë¶€ ì‚°ì—… ì—…ê³„ì—ì„œëŠ” ë¦¬ëˆ…ìŠ¤ ë³´ë‹¤ëŠ” ìœˆë„ìš° ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” í™˜ê²½ë„ ì¡´ì¬í•©ë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ë„ <a href="https://aws.amazon.com/marketplace/pp/prodview-pscy5dov2ftms#pdp-overview">AWS ë§ˆì¼“í”Œë ˆì´ìŠ¤ì—ì„œ ìš°ë¶„íˆ¬ ì´ë¯¸ì§€ë¡œ ì œê³µ</a>í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ì•„ë¬´íŠ¼ ë§ì€ ì›¹ ê°œë°œìë“¤ë„ ì§‘ì—ì„œëŠ” ìœˆë„ìš° OSê°€ ì„¤ì¹˜ëœ ì»´í“¨í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìœˆë„ìš° 10ì—ì„œ <a href="https://www.virtualbox.org/">Oracle VM VirtualBox</a> ë˜ëŠ” <a href="https://learn.microsoft.com/ko-kr/windows/wsl/about">WSL2(Windows Subsystem for Linux 2)</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ì¼ ìš°ë¶„íˆ¬ ì„œë²„ê°€ í•„ìš”í•˜ë‹¤ë©´ WSL2ë¥¼ í™œì„±í™”í•˜ê³  ê°„ë‹¨í•˜ê²Œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì–‘í•œ ìš°ë¶„íˆ¬ ë²„ì „ ë˜ëŠ” ë‹¤ìˆ˜ì˜ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°ëœë‹¤ë©´ ê°€ìƒ ë¨¸ì‹ ì„ í™œìš©í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h4 id="WSL2"><a href="#WSL2" class="headerlink" title="WSL2"></a>WSL2</h4><p><a href="https://aka.ms/wslstore">Microsoft Store</a>ì—ì„œ ë‹¤ì–‘í•œ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì„ ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ”ë° CentOSëŠ” ì¸í„°ë„· ê²€ìƒ‰ì„ í†µí•´ì„œ ë³„ë„ë¡œ ì„¤ì¹˜í•´ì•¼í•˜ë¯€ë¡œ ë³¸ ê¸€ì˜ ëª©í‘œì¸ ë°ë¹„ì•ˆ ê³„ì—´ì˜ <a href="https://www.microsoft.com/store/productId/9PN20MSR04DW">ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ</a>ì„ ì„ íƒí•˜ì—¬ ì„¤ì¹˜í•˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤. WSL2ë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— <a href="https://www.microsoft.com/store/productId/9N0DX20HK701">ìœˆë„ìš° í„°ë¯¸ë„</a>ì„ ë¨¼ì € ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©° ì»´í“¨í„°ì— ìœˆë„ìš° í„°ë¯¸ë„ì„ ì„¤ì¹˜í•˜ì˜€ë‹¤ë©´ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•œ í›„ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ Windows System for Linux ê¸°ëŠ¥ì„ í™œì„±í™” í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell">dism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:Microsoft-Windows-Subsystem-Linux <span class="token operator">/</span>all <span class="token operator">/</span>norestart
dism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:VirtualMachinePlatform <span class="token operator">/</span>all <span class="token operator">/</span>norestart</code></pre>

<p><img data-src="/images/posts/ubuntu-linux/01.png"></p>
<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ WSL ê¸°ëŠ¥ì„ í™œì„±í™”í–ˆë‹¤ë©´ <a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">WSL2 ë¦¬ëˆ…ìŠ¤ ì»¤ë„</a>ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì„¤ì¹˜í•œ í›„ ê´€ë¦¬ì ê¶Œí•œì˜ ìœˆë„ìš° í„°ë¯¸ë„ì„ ì—´ê³  WSL2 ë²„ì „ì„ ì„ íƒí•˜ë©´ ëì…ë‹ˆë‹¤.</p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell">wsl <span class="token operator">--</span><span class="token function">set-default</span><span class="token operator">-</span>version 2</code></pre>

<p><img data-src="/images/posts/ubuntu-linux/02.png"></p>
<blockquote>
<p>ë§Œì•½, WSL2ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì„ ì‹¤í–‰í•˜ëŠ”ë° ì‹¤íŒ¨í•˜ì˜€ë‹¤ë©´ ë‹¤ìŒì˜ ê°€ì´ë“œ ë¬¸ì„œë¥¼ ë”°ë¥´ê¸°ë¥¼ ë°”ë€ë‹¤.<br><a href="https://learn.microsoft.com/ko-kr/windows/terminal/install">Windows í„°ë¯¸ë„ ì„¤ì¹˜ ë° ì„¤ì • ì‹œì‘</a><br><a href="https://learn.microsoft.com/ko-kr/windows/wsl/install?source=recommendations">WSLì„ ì‚¬ìš©í•˜ì—¬ Windowsì— Linux ì„¤ì¹˜</a><br><a href="https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10#1-overview">Install Ubuntu on WSL2 on Windows 10</a></p>
</blockquote>
<h4 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h4><p>WSL2ë¥¼ ì‚¬ìš©í•´ë„ ë‹¤ì–‘í•œ ë²„ì „ì˜ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆì§€ë§Œ ë²„ì¸„ì–¼ë°•ìŠ¤ì™€ ê°™ì€ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ ê¸°ë³¸ì ì¸ ë¦¬ëˆ…ìŠ¤ ì„¤ì •ì´ ì™„ë£Œëœ í´ë¦° ë²„ì „ì„ ë§Œë“¤ì–´ë‘ê³  ì´ë¯¸ì§€ë¥¼ ë³µì œí•˜ì—¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ”ê²Œ í•™ìŠµí•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ë¨¼ì €, <a href="https://www.virtualbox.org/wiki/Downloads">ìœˆë„ìš°ìš© ë²„ì¸„ì–¼ë°•ìŠ¤</a>ì™€ í•¨ê»˜ <a href="https://ubuntu.com/download/server">ìš°ë¶„íˆ¬ ì„œë²„ ì´ë¯¸ì§€</a>ì— ëŒ€í•œ ISO íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì¤€ë¹„í•©ë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ubuntu-linux/03.png"><br><img data-src="/images/posts/ubuntu-linux/04.png"><br><img data-src="/images/posts/ubuntu-linux/05.png"></p>
<blockquote>
<p>ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ ìš°ë¶„íˆ¬ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²½ìš°ì—ëŠ” ê¸°ë³¸ì ì¸ ë°ìŠ¤í¬í†± ì´ë¯¸ì§€ ëŒ€ì‹ ì— ì„œë²„ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì¼ë°˜ì ì´ì§€ ì•Šì€ íì‡„ë§ í™˜ê²½(ì•„ì´í”¼ë¥¼ ì˜¤í”ˆí•˜ì§€ ì•ŠëŠ”)ì—ì„œ ì›ê²© ë°ìŠ¤í¬í†± í™˜ê²½ì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ë°ìŠ¤í¬í†±ì„ ì„¤ì¹˜í•˜ëŠ” ê²½ìš°ë„ ìˆëŠ”ë° ì›ê²© ë°ìŠ¤í¬í†± ì—°ê²°ì— ëŒ€í•œ ì—¬ëŸ¬ê°€ì§€ ë¬¸ì œê°€ ìˆê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ í™˜ê²½ì—ì„œëŠ” ìœˆë„ìš° ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” í¸ì…ë‹ˆë‹¤.</p>
</blockquote>
<p>ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ê°€ìƒ ë¨¸ì‹ ì€ ìµœì†Œí•œ ë©”ëª¨ë¦¬ 1GB, ë””ìŠ¤í¬ ë³¼ë¥¨ 30GB ë¡œ ì„ íƒí•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ëŠ”ë° ì´ëŠ” AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” í”„ë¦¬í‹°ì–´ ì‚¬ì–‘ê³¼ ë™ì¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ ê³µìœ ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ ì•„ì´í”¼ë¥¼ í• ë‹¹ë°›ì•„ ì»´í“¨í„°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ë„¤íŠ¸ì›Œí¬ ìœ í˜•ì„ NATê°€ ì•„ë‹Œ í˜¸ìŠ¤íŠ¸ ì–´ëŒ‘í„°ë¡œ ë³€ê²½í•˜ì—¬ ê³µìœ ê¸°ì—ì„œ ë³„ë„ì˜ IPë¥¼ í• ë‹¹ë°›ë„ë¡ í•˜ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/ubuntu-linux/06.png"></p>
<pre class="language-powershell" data-language="powershell"><code class="language-powershell"><span class="token function">PS</span> C:\Users\Mambo> ssh ubuntu@192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>31
The authenticity of host <span class="token string">'192.168.0.31 (192.168.0.31)'</span> can<span class="token string">'t be established.
ECDSA key fingerprint is SHA256:BJ3p2IZBDv3Im2I1Nsfj93KPSQcB4SAIxG9bOEbTPCU.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>31<span class="token string">' (ECDSA) to the list of known hosts.
ubuntu@192.168.0.31'</span>s password:
Welcome to Ubuntu 22<span class="token punctuation">.</span>04<span class="token punctuation">.</span>1 LTS <span class="token punctuation">(</span>GNU/Linux 5<span class="token punctuation">.</span>15<span class="token punctuation">.</span>0-50-generic x86_64<span class="token punctuation">)</span>

 <span class="token operator">*</span> Documentation:  https:<span class="token operator">/</span><span class="token operator">/</span>help<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com
 <span class="token operator">*</span> Management:     https:<span class="token operator">/</span><span class="token operator">/</span>landscape<span class="token punctuation">.</span>canonical<span class="token punctuation">.</span>com
 <span class="token operator">*</span> Support:        https:<span class="token operator">/</span><span class="token operator">/</span>ubuntu<span class="token punctuation">.</span>com/advantage

  System information as of Thu Oct 13 01:11:59 AM UTC 2022

  System load:  0<span class="token punctuation">.</span>6376953125       Processes:               104
  Usage of <span class="token operator">/</span>:   33<span class="token punctuation">.</span>0% of 13<span class="token punctuation">.</span>67GB   Users logged in:         0
  Memory usage: 22%                IPv4 address <span class="token keyword">for</span> enp0s3: 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>0<span class="token punctuation">.</span>31
  Swap usage:   0%


39 updates can be applied immediately<span class="token punctuation">.</span>
To see these additional updates run: apt list <span class="token operator">--</span>upgradable


Last login: Thu Oct 13 01:12:00 2022
To run a command as administrator <span class="token punctuation">(</span>user <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> use <span class="token string">"sudo &lt;command>"</span><span class="token punctuation">.</span>
See <span class="token string">"man sudo_root"</span> <span class="token keyword">for</span> details<span class="token punctuation">.</span>

ubuntu@ubuntu:~$</code></pre>

<p>ë¦¬ëˆ…ìŠ¤ ì„œë²„ê°€ ì¤€ë¹„ë˜ì—ˆë‹¤ë©´ ìœ„ì™€ ê°™ì´ ë¡œì»¬ ì»´í“¨í„°ì—ì„œ SSH ì ‘ì†ì„ ì‹œë„í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–¸ê¸‰í•˜ì§€ ì•Šì€ ë¶€ë¶„ì´ê¸°ì— ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì„¤ì¹˜í•  ë•Œ OpenSSHë¥¼ í•¨ê»˜ ì„¤ì¹˜í•˜ëŠ” ì˜µì…˜ì„ ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ ê°€ìƒ ë¨¸ì‹  ì½˜ì†”ì°½ì—ì„œ OpenSSH ì„œë²„ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ë³´ëŠ” ê²½í—˜ì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ì œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ë¥¼ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ”ê°€ëŠ” ìš°ë¦¬ê°€ ë¬´ì—‡ì„ í•˜ê³  ì‹¶ì€ê°€ì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤. </p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Ubuntu</tag>
        <tag>WSL2</tag>
        <tag>VirtualBox</tag>
      </tags>
  </entry>
  <entry>
    <title>ì´ˆë³´ ê°œë°œìë“¤ì„ ìœ„í•œ AJAXì— ëŒ€í•œ ì •ë¦¬</title>
    <url>/understanding-asynchronos-javascript-and-xml-with-spring/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì€ <a href="https://github.com/kdevkr/spring-demo-ajax">https://github.com/kdevkr/spring-demo-ajax</a> ì—ì„œ ì œê³µí–ˆë˜ ì •ë³´ì…ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ë“¤ì–´ê°€ë©°"><a href="#ë“¤ì–´ê°€ë©°" class="headerlink" title="ë“¤ì–´ê°€ë©°"></a>ë“¤ì–´ê°€ë©°</h2><blockquote>
<p><em>ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¹„ë™ê¸° í†µì‹  ê¸°ìˆ ì¸ AJAXë¥¼ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì™€ ì—°ê³„í•˜ì—¬ í™œìš©í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.</em>  </p>
</blockquote>
<p>XHR(XMLHttpRequest)ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì´ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” JQueryì—ì„œ ì§€ì›í•˜ëŠ” AJAX(Asynchronos Javascript And XML)ê¸°ëŠ¥ì„ í™œìš©í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ë‚˜ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì…ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://developer.mozilla.org/ko/docs/XMLHttpRequest">XMLHttpRequest, Mozilla Developer Network</a>  </li>
<li><a href="http://api.jquery.com/jquery.ajax/">Ajax, JQuery</a></li>
</ul>
<p>JQuery ì´ì™¸ì—ë„ ajaxë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <a href="http://prototypejs.org/learn/introduction-to-ajax">Prototypejs</a>ë„ ë§ì´ ì‚¬ìš©ë˜ëŠ” ìœ í‹¸ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €ì™€ ê°™ì€ ì´ˆë³´ì ë° ì‹ ì… ê°œë°œìë“¤ì€ JQueryì— ìµìˆ™í•˜ë¯€ë¡œ JQueryê°€ ì§€ì›í•˜ëŠ” Ajax ê¸°ëŠ¥ì— ëŒ€í•´ì„œ ì‚´í´ë³´ê³ ì í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Vue.jsì—ì„œëŠ” <a href="https://github.com/mzabriskie/axios">axios</a>ë¥¼ ì„ í˜¸í•œë‹¤ê³  í•©ë‹ˆë‹¤.  </p>
</blockquote>
<h2 id="JQuery-ajax"><a href="#JQuery-ajax" class="headerlink" title="JQuery.ajax"></a>JQuery.ajax</h2><p>ì œì´ì¿¼ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì´ì™¸ì—ë„ ìƒëµëœ ë‹¤ì–‘í•œ í”„ë¡œí¼í‹°ë“¤ì´ ì¡´ì¬í•˜ë¯€ë¡œ ë” ì°¾ì•„ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì•„ë˜ì˜ í˜•íƒœëŠ” ì•„ë§ˆë„ ìì£¼ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí¼í‹°ë§Œ ëª¨ì•„ë†“ì€ ë¶€ë¶„ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">type</span>	<span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token comment">//ìš”ì²­ ë©”ì†Œë“œ íƒ€ì…</span>
  <span class="token literal-property property">url</span>		<span class="token operator">:</span> <span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token comment">//ìš”ì²­ ê²½ë¡œ</span>
  <span class="token literal-property property">async</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//ë¹„ë™ê¸° ì—¬ë¶€</span>
  <span class="token literal-property property">data</span>  <span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">key</span> <span class="token operator">:</span> value<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//ìš”ì²­ ì‹œ í¬í•¨ë˜ì–´ì§ˆ ë°ì´í„°</span>
  <span class="token literal-property property">processData</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//ë°ì´í„°ë¥¼ ì»¨í…íŠ¸ íƒ€ì…ì— ë§ê²Œ ë³€í™˜ ì—¬ë¶€</span>
  <span class="token literal-property property">cache</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//ìºì‹œ ì—¬ë¶€</span>
  <span class="token literal-property property">contentType</span> <span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span> <span class="token comment">//ìš”ì²­ ì»¨í…íŠ¸ íƒ€ì… "application/x-www-form-urlencoded; charset=UTF-8"</span>
  <span class="token literal-property property">dataType</span>	<span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span> <span class="token comment">//ì‘ë‹µ ë°ì´í„° í˜•ì‹ ëª…ì‹œí•˜ì§€ ì•Šì„ ê²½ìš° ìë™ìœ¼ë¡œ ì¶”ì¸¡</span>
  <span class="token function-variable function">beforeSend</span>  <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// XHR Headerë¥¼ í¬í•¨í•´ì„œ HTTP Requestë¥¼ í•˜ê¸°ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span>	<span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status<span class="token punctuation">,</span> xhr</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// ì •ìƒì ìœ¼ë¡œ ì‘ë‹µ ë°›ì•˜ì„ ê²½ìš°ì—ëŠ” success ì½œë°±ì´ í˜¸ì¶œë˜ê²Œ ë©ë‹ˆë‹¤.</span>
    <span class="token comment">// ì´ ì½œë°± í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ì„œëŠ” ì‘ë‹µ ë°”ë””, ì‘ë‹µ ì½”ë“œ ê·¸ë¦¬ê³  XHR í—¤ë”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">error</span>	<span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> error</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  	<span class="token comment">// ì‘ë‹µì„ ë°›ì§€ ëª»í•˜ì˜€ë‹¤ê±°ë‚˜ ì •ìƒì ì¸ ì‘ë‹µì´ì§€ë§Œ ë°ì´í„° í˜•ì‹ì„ í™•ì¸í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— error ì½œë°±ì´ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
  	<span class="token comment">// ì˜ˆë¥¼ ë“¤ì–´, dataTypeì„ ì§€ì •í•´ì„œ ì‘ë‹µ ë°›ì„ ë°ì´í„° í˜•ì‹ì„ ì§€ì •í•˜ì˜€ì§€ë§Œ, ì„œë²„ì—ì„œëŠ” ë‹¤ë¥¸ ë°ì´í„°í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ë©´  error ì½œë°±ì´ í˜¸ì¶œë˜ê²Œ ë©ë‹ˆë‹¤.</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">complete</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// successì™€ error ì½œë°±ì´ í˜¸ì¶œëœ í›„ì— ë°˜ë“œì‹œ í˜¸ì¶œë©ë‹ˆë‹¤.</span>
    <span class="token comment">// try - catch - finallyì˜ finally êµ¬ë¬¸ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<p>ì—¬ê¸°ì„œ ì ê¹! GETê³¼ POSTì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ì§€ ì•„ì‹œë‚˜ìš”?  </p>
</blockquote>
<p>ë°”ë¡œ ë°ì´í„°ê°€ ì–´ë””ì— ìœ„ì¹˜í•˜ëŠ”ê°€ì— ìˆìŠµë‹ˆë‹¤. POST ìš”ì²­ì‹œì— URLì— íŒŒë¼ë¯¸í„°ê°€ ë³´ì´ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë°ì´í„°ê°€ ìš”ì²­ ë°”ë””ì— í¬í•¨ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— GETê³¼ POSTì— ë”°ë¼ ë°ì´í„°ë¥¼ URLì— ì¶”ê°€í•´ì•¼í• ì§€ ìš”ì²­ ë°”ë””ì— ì¶”ê°€í•´ì•¼í• ì§€ë¥¼ ì•Œê³  ìˆì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.  </p>
<p>ì˜ˆë¥¼ ë“¤ì–´, processDataë¼ëŠ” ì†ì„±ì€ GET ìš”ì²­ì¸ë° dataì— ì˜¤ë¸Œì íŠ¸ê°€ ì§€ì •ë  ê²½ìš°ì— ìš”ì²­í•˜ê¸°ì „ì— ê·¸ ë°ì´í„°ë¥¼ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ URLì— ì¶”ê°€í•´ì£¼ëŠ” ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì´ì™¸ì—ë„ JQueryì—ì„œëŠ” <a href="https://api.jquery.com/category/ajax/">ë‹¤ì–‘í•œ ajax ê¸°ëŠ¥</a>ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì ìš©í•´ì„œ HTTP í†µì‹ ì‹œì— CSRF í† í°ì´ í•„ìš”í•˜ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ XHR Headerì— CSRF í† í°ì„ ì¶”ê°€í•´ì„œ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ìŠ¤í”„ë§ ì‹œíë¦¬í‹° íƒœê·¸ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë©”íƒ€ íƒœê·¸ì— í† í° ì •ë³´ë¥¼ ì ìš©í–ˆë‹¤ëŠ” ê°€ì •ì…ë‹ˆë‹¤.</span>
<span class="token keyword">var</span> token <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"meta[name='_csrf']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> header <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"meta[name='_csrf_header']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
   <span class="token function-variable function">beforeSend</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>header<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<blockquote>
<p>JQuery.ajaxì— ëŒ€í•´ì„œëŠ” ì´ ì •ë„ê¹Œì§€ë§Œ ì•Œì•„ë„ ë©ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="Spring-Controller"><a href="#Spring-Controller" class="headerlink" title="Spring Controller"></a>Spring Controller</h2><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ajax í†µì‹ ì„ ìœ„í•´ì„œ ìŠ¤í”„ë§ @MVCë¡œ ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ í™•ì¸í•˜ë©´ì„œ êµ¬ì¡°ë¥¼ ìµí˜€ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ì„œ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ì¸ HTTP ìš”ì²­ì˜ ê²½ìš°ì—ëŠ” JstlViewë¡œì¨ ì‘ë‹µì„ í•˜ê²Œ ë˜ì§€ë§Œ, XHR ìš”ì²­ì— ì˜í•´ì„œ ë‹¤ì–‘í•œ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ê¸° ìœ„í•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¼ëŠ” ê²ƒì„ ì§€ì›í•©ë‹ˆë‹¤.  </p>
<pre class="language-text" data-language="text"><code class="language-text">Message Converter List
- StringHttpMessageConverter
- FormHttpMessageConverter
- ByteArrayMessageConverter
- MarshallingHttpMessageConverter
- MappingJacksonHttpMessageConverter
- MappingJackson2HttpMessageConverter
- SourceHttpMessageConverter
- BufferedImagedHttpMessageConverter</code></pre>

<blockquote>
<p>ìŠ¤í”„ë§ì˜ <annotation-driven />ì€ ë§ì€ ì—­í• ì„ í•´ì£¼ëŠ”ë°, ê·¸ ì¤‘ í•˜ë‚˜ê°€ ë””í´íŠ¸ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ë“±ë¡í•´ì¤ë‹ˆë‹¤. ë‹¤ë§Œ, MappingJacksonHttpMessageConverterëŠ” jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í• ë•Œë§Œ ë“±ë¡í•©ë‹ˆë‹¤.  </p>
</blockquote>
<p>ìš°ë¦¬ê°€ AJAXë¥¼ ì´ìš©í•  ë•Œ ë°ì´í„° í˜•ì‹ì„ JSONìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, List, Mapë“±ê³¼ ê°™ì€ ì˜¤ë¸Œì íŠ¸ë“¤ì„ JSON í˜•íƒœë¡œ ì‘ë‹µí•˜ê³  ì‹¶ë‹¤ë©´, ModelAndViewë¥¼ ì´ìš©í•˜ê±°ë‚˜ ë©”ì‹œì§€ì»¨ë²„í„°ë¥¼ ë“±ë¡í•´ì•¼í•©ë‹ˆë‹¤.  </p>
<blockquote>
<p><em>ë³¸ ë¬¸ì„œì—ì„œëŠ” ModelAndViewë¡œì¨ ì‘ë‹µí•˜ëŠ” ë°©ì‹ì€ ì„¤ëª…í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤. <a href="http://www.nextree.co.kr/p11205/">ì—¬ê¸°ì„œ í™•ì¸í•˜ë„ë¡ í•©ì‹œë‹¤</a></em>  </p>
</blockquote>
<p>ê·¸ëŸ¬ë‚˜ ìŠ¤í”„ë§ 3 ì´ìƒ ë¶€í„°ëŠ” jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•  ê²½ìš°ì— ìë™ì ìœ¼ë¡œ MappingJacksonHttpMessageConverterë¥¼ ì ìš©í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>ì—¬ê¸°ì„œ ì ê¹!<br>ìŠ¤í”„ë§ 3.1.2 ë¶€í„°ëŠ” jackson 2.0ì„ ì§€ì›í•˜ë„ë¡ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. jackson 2.0ì€ MappingJackson2HttpMessageConverterë¡œ ë“±ë¡ë©ë‹ˆë‹¤.<br>ìì„¸í•œ ì‚¬í•­ì€ ìŠ¤í”„ë§ ë²„ì „ë³„ jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ í•­ëª©ì—ì„œ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
</blockquote>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ì´ëŸ¬í•œ ë¶€ë¶„ë„ ê´€ë¦¬í•´ì£¼ë¯€ë¡œ ì¶”ê°€ì ìœ¼ë¡œ jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ pom.xmlì— ì¶”ê°€í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.  </p>
<h3 id="ìŠ¤í”„ë§-ë²„ì „ë³„-ì‚¬ìš©ë˜ëŠ”-Jackson-Library"><a href="#ìŠ¤í”„ë§-ë²„ì „ë³„-ì‚¬ìš©ë˜ëŠ”-Jackson-Library" class="headerlink" title="ìŠ¤í”„ë§ ë²„ì „ë³„ ì‚¬ìš©ë˜ëŠ” Jackson Library"></a>ìŠ¤í”„ë§ ë²„ì „ë³„ ì‚¬ìš©ë˜ëŠ” Jackson Library</h3><p>ìŠ¤í”„ë§ 3.0 ì´ìƒë¶€í„°ëŠ” jackson ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë”°ë¼ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ë“±ë¡í•´ì¤ë‹ˆë‹¤.</p>
<h4 id="Spring-3-0-x"><a href="#Spring-3-0-x" class="headerlink" title="Spring 3.0.x"></a>Spring 3.0.x</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.codehaus.jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-mapper-asl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;org.codehaus.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>

<h4 id="Spring-3-1-2"><a href="#Spring-3-1-2" class="headerlink" title="Spring 3.1.2"></a>Spring 3.1.2</h4><blockquote>
<p>MappingJackson2HttpMessageConverterë¡œ jackson 2.0ì„ ì§€ì›í•©ë‹ˆë‹¤</p>
</blockquote>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.codehaus.jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-mapper-asl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;org.codehaus.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- Jackson 2.0 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>

<h4 id="Spring-4-0-0"><a href="#Spring-4-0-0" class="headerlink" title="Spring 4.0.0"></a>Spring 4.0.0</h4><blockquote>
<p>GsonHttpMessageConverter ì§€ì›<br>MappingJacksonHttpMessageConverter ë¯¸ì§€ì›  </p>
</blockquote>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- Jackson 2.0 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;com.fasterxml.jackson&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- gson --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.google.code.gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>

<blockquote>
<p><a href="https://github.com/spring-projects/spring-framework/wiki/Migrating-to-Spring-Framework-4.x#jackson-1819">https://github.com/spring-projects/spring-framework/wiki/Migrating-to-Spring-Framework-4.x#jackson-1819</a><br>ìœ„ ë¬¸ì„œì— ë”°ë¥´ë©´ ìŠ¤í”„ë§ 4.1 ë¶€í„°ëŠ” org.codehaus.jackson(1.8 or 1.9)ì˜ ì§€ì›ì„ ì¤‘ë‹¨í•˜ì˜€ìŠµë‹ˆë‹¤.  </p>
</blockquote>
<ul>
<li>ë²„ì „ë³„ ë©”ì‹œì§€ ì»¨ë²„í„° ì§€ì›í‘œ</li>
</ul>
<table>
<thead>
<tr>
<th align="center">Spring Version</th>
<th align="center">org.codehaus.jackson(1.8 or 1.9)</th>
<th align="center">com.fasterxml.jackson(2.0)</th>
<th align="center">gson</th>
</tr>
</thead>
<tbody><tr>
<td align="center">3.0.x</td>
<td align="center">MappingJacksonHttpMessageConverter</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3.1.2</td>
<td align="center">MappingJacksonHttpMessageConverter</td>
<td align="center">MappingJackson2HttpMessageConverter</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4.+</td>
<td align="center"></td>
<td align="center">MappingJackson2HttpMessageConverter</td>
<td align="center">GsonHttpMessageConverter</td>
</tr>
</tbody></table>
<h3 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations"></a>Annotations</h3><blockquote>
<p>ê·¸ëŸ¼ ì´ì œ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜ë“¤ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h4><p>@RequestMappingì—ëŠ” ìš”ì²­ê³¼ ì‘ë‹µê³¼ ê´€ë ¨í•œ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  producesì™€ consumesëŠ” í™•ì‹¤íˆ ì•Œê³  ë„˜ì–´ê°€ì…”ì•¼ í•©ë‹ˆë‹¤.  </p>
<ul>
<li>method&#x3D;RequestMethod.GET<br>methodëŠ” ì–´ë– í•œ ìš”ì²­ íƒ€ì…ì„ ì²˜ë¦¬í•  ê²ƒì¸ê°€ë¥¼ ê²°ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</li>
<li>produces&#x3D;MediaType.APPLICATION_JSON_VALUE<br>producesëŠ” ì–´ë– í•œ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•  ê²ƒì¸ê°€ë¥¼ ê²°ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</li>
<li>consumes&#x3D;MediaType.APPLICATION_JSON_VALUE<br>consumesëŠ” ì–´ë– í•œ ìš”ì²­ì— ëŒ€í•´ì„œ ì²˜ë¦¬í•  ê²ƒì¸ê°€ë¥¼ ê²°ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>producesì™€ consumes í”„ë¡œí¼í‹°ëŠ” Spring 3.1ì—ì„œ ë¶€í„° ì§€ì›í•©ë‹ˆë‹¤.  </p>
</blockquote>
<h4 id="ModelAttribute-ReqeustParam"><a href="#ModelAttribute-ReqeustParam" class="headerlink" title="@ModelAttribute, @ReqeustParam"></a>@ModelAttribute, @ReqeustParam</h4><p>ì´ ë‘ê°œì˜ ì–´ë…¸í…Œì´ì…˜ì€ GETê³¼ DELETE ìš”ì²­ì—ì„œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” íŒŒë¼ë¯¸í„° ê°’ì„ í™•ì¸í•´ì„œ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•´ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. @RequestParamì€ request.getParameter()ë¡œì¨ ê°€ì ¸ì˜¤ëŠ” ë°˜ë©´ì— @ModelAttributeëŠ” ìë°” í´ë˜ìŠ¤ì˜ Getter, Setterì— ì˜í•´ ë°ì´í„°ë¥¼ ë°”ì¸ë”©ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë§Œì•½ ê°ì²´ ë‹¨ìœ„ë¡œ ë°”ì¸ë”©í•˜ê³  ì‹¶ë‹¤ë©´ @ModelAttributeë¥¼  ì´ìš©í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p><em>ì§ì ‘ í™•ì¸í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ ë³¸ í”„ë¡œì íŠ¸ë¥¼ ë™ì‘ì‹œì¼œ ajaxListì™€ ajaxListModelì˜ ì°¨ì´ë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</em>  </p>
</blockquote>
<h4 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h4><p>ì´ ì–´ë…¸í…Œì´ì…˜ì€ POSTì™€ PUT ì²˜ëŸ¼ ë°ì´í„°ê°€ HTTP ìš”ì²­ ë°”ë””ì— í¬í•¨ë˜ëŠ” ê²½ìš°ì— ì´ë¥¼ í™•ì¸í•´ì„œ ë°ì´í„°ë¥¼ ë°”ì¸ë”© í•´ì¤ë‹ˆë‹¤. ì´ ì–´ë…¸í…Œì´ì…˜ì˜ ì¤‘ìš”í•œ ë¶€ë¶„ì€ GET ìš”ì²­ê³¼ ê°™ì´ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì œê³µë˜ëŠ” ë°ì´í„°ëŠ” ë°”ì¸ë”©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>
<blockquote>
<p><em>ì§ì ‘ í™•ì¸í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ ë³¸ í”„ë¡œì íŠ¸ë¥¼ ë™ì‘ì‹œì¼œ ajaxMapì™€ ajaxMapGetì˜ ì°¨ì´ë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ajaxMapGetì˜ ìš”ì²­ì´ ì™œ ì‹¤íŒ¨í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì„œë²„ì¸¡ ë¡œê·¸ë¥¼ ì‚´í´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.</em>  </p>
</blockquote>
<h4 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h4><p>ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì‘ë‹µë˜ëŠ” ë°ì´í„°ì— ëŒ€í•˜ì—¬ ë“±ë¡ëœ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ ë³€í™˜ì‹œì¼œ ì‘ë‹µí•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë·°ì— ëª¨ë¸ë¡œì„œ ë°ì´í„°ë¥¼ ì¶”ê°€ì‹œì¼œ ì‘ë‹µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ HTTP ë³¸ë¬¸ìœ¼ë¡œ ì‘ë‹µí•˜ê²Œ ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.  </p>
<blockquote>
<p><em>ajaxListì™€ ajaxListNobodyë¥¼ í†µí•´ì„œ @ResponseBodyê°€ ìˆì„ ê²½ìš°ë‘ ì—†ì„ ê²½ìš°ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”. ì™œ @ResponseBodyê°€ ì—†ì„ ë•Œ ViewResolverë¥¼ ì°¾ëŠ” ê²ƒ ê°™ë‚˜ìš”?</em>  </p>
</blockquote>
<h4 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h4><p>ì´ ì–´ë…¸í…Œì´ì…˜ì€ ìŠ¤í”„ë§ 4 ë¶€í„° ì§€ì›í•©ë‹ˆë‹¤. í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì†Œë“œë“¤ì— @ResponseBody ì–´ë…¸í…Œì´ì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. ì¢€ ë” í¸ì˜ì„±ì„ ì œê³µí•œë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.  </p>
<h2 id="Test-Case"><a href="#Test-Case" class="headerlink" title="Test Case"></a>Test Case</h2><p>ë³¸ í”„ë¡œì íŠ¸ì—ì„œ í˜„ì¬ ì§„í–‰í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  </p>
<h4 id="1-GET-ResponseBodyì™€-ModelAttribute-RequestParmì„-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#1-GET-ResponseBodyì™€-ModelAttribute-RequestParmì„-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="1. GET, @ResponseBodyì™€ @ModelAttribute, @RequestParmì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>1. GET, @ResponseBodyì™€ @ModelAttribute, @RequestParmì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="2-GET-1ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ModelAttributeë¥¼-í†µí•´ì„œ-ê°ì²´-ë‹¨ìœ„ë¡œ-ë°”ì¸ë”©í•˜ëŠ”-ê²ƒì„-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#2-GET-1ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ModelAttributeë¥¼-í†µí•´ì„œ-ê°ì²´-ë‹¨ìœ„ë¡œ-ë°”ì¸ë”©í•˜ëŠ”-ê²ƒì„-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="2. GET, 1ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ModelAttributeë¥¼ í†µí•´ì„œ ê°ì²´ ë‹¨ìœ„ë¡œ ë°”ì¸ë”©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>2. GET, 1ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ModelAttributeë¥¼ í†µí•´ì„œ ê°ì²´ ë‹¨ìœ„ë¡œ ë°”ì¸ë”©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="3-GET-1ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ResponseBodyë¥¼-ì§€ì •í•˜ì§€-ì•Šì•˜ì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#3-GET-1ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ResponseBodyë¥¼-ì§€ì •í•˜ì§€-ì•Šì•˜ì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="3. GET, 1ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ResponseBodyë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>3. GET, 1ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ResponseBodyë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="4-PUT-ResponseBodyì™€-RequestBodyë¥¼-ì§€ì •í–ˆì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#4-PUT-ResponseBodyì™€-RequestBodyë¥¼-ì§€ì •í–ˆì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="4. PUT, @ResponseBodyì™€ @RequestBodyë¥¼ ì§€ì •í–ˆì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>4. PUT, @ResponseBodyì™€ @RequestBodyë¥¼ ì§€ì •í–ˆì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="5-GET-4ë²ˆê³¼-ë™ì¼í•˜ë‚˜-GET-ìš”ì²­ì—-RequestBodyë¥¼-ì§€ì •í–ˆì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#5-GET-4ë²ˆê³¼-ë™ì¼í•˜ë‚˜-GET-ìš”ì²­ì—-RequestBodyë¥¼-ì§€ì •í–ˆì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="5. GET, 4ë²ˆê³¼ ë™ì¼í•˜ë‚˜ GET ìš”ì²­ì— @RequestBodyë¥¼ ì§€ì •í–ˆì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>5. GET, 4ë²ˆê³¼ ë™ì¼í•˜ë‚˜ GET ìš”ì²­ì— @RequestBodyë¥¼ ì§€ì •í–ˆì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="6-POST-ResponseEntityë¥¼-í†µí•´ì„œ-HttpStatusë„-ì§€ì •í• -ìˆ˜-ìˆëŠ”-ê²ƒì„-í™•ì¸í•˜ëŠ”-ì¼€ì´ìŠ¤"><a href="#6-POST-ResponseEntityë¥¼-í†µí•´ì„œ-HttpStatusë„-ì§€ì •í• -ìˆ˜-ìˆëŠ”-ê²ƒì„-í™•ì¸í•˜ëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="6. POST, ResponseEntityë¥¼ í†µí•´ì„œ HttpStatusë„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í•˜ëŠ” ì¼€ì´ìŠ¤"></a>6. POST, ResponseEntityë¥¼ í†µí•´ì„œ HttpStatusë„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í•˜ëŠ” ì¼€ì´ìŠ¤</h4><h4 id="7-POST-6ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ResponseBodyë¥¼-ì§€ì •í•˜ì§€-ì•Šì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#7-POST-6ë²ˆê³¼-ë™ì¼í•˜ë‚˜-ResponseBodyë¥¼-ì§€ì •í•˜ì§€-ì•Šì„-ê²½ìš°ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="7. POST, 6ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ResponseBodyë¥¼ ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>7. POST, 6ë²ˆê³¼ ë™ì¼í•˜ë‚˜ @ResponseBodyë¥¼ ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><h4 id="8-POST-7ë²ˆê³¼-ë™ì¼í•˜ë‚˜-URLì—-íŒŒë¼ë¯¸í„°ë¥¼-í•¨ê»˜-ìš”ì²­ì‹œì—-RequestParam-ì§€ì›ì—¬ë¶€ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤"><a href="#8-POST-7ë²ˆê³¼-ë™ì¼í•˜ë‚˜-URLì—-íŒŒë¼ë¯¸í„°ë¥¼-í•¨ê»˜-ìš”ì²­ì‹œì—-RequestParam-ì§€ì›ì—¬ë¶€ë¥¼-í™•ì¸í• -ìˆ˜-ìˆëŠ”-ì¼€ì´ìŠ¤" class="headerlink" title="8. POST, 7ë²ˆê³¼ ë™ì¼í•˜ë‚˜ URLì— íŒŒë¼ë¯¸í„°ë¥¼ í•¨ê»˜ ìš”ì²­ì‹œì— @RequestParam ì§€ì›ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤"></a>8. POST, 7ë²ˆê³¼ ë™ì¼í•˜ë‚˜ URLì— íŒŒë¼ë¯¸í„°ë¥¼ í•¨ê»˜ ìš”ì²­ì‹œì— @RequestParam ì§€ì›ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¼€ì´ìŠ¤</h4><blockquote>
<p><em>6ë²ˆê³¼ 7ë²ˆì€ ì˜ì•„í•´í•˜ì‹¤ ìˆ˜ ìˆìœ¼ì‹¤ ê²ë‹ˆë‹¤. ì´ì™€ ê´€ë ¨ëœ ì •ë³´ëŠ” <a href="http://okky.kr/article/311196">ì—¬ê¸°</a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•˜ë©´ ResponseEntityëŠ” ì‘ë‹µ í—¤ë”ì™€ ë°”ë””ë¥¼ ê°€ì§€ëŠ” ê°ì²´ë¥¼ ì‘ë‹µí•˜ëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.</em></p>
</blockquote>
<h2 id="ë§ˆì§€ë§‰ìœ¼ë¡œ-ì´ˆë³´ìë“¤ì´-ì˜ëª»-ì‚¬ìš©í•˜ê±°ë‚˜-ì ‘ê·¼í•˜ëŠ”-ê²½ìš°ë¥¼-ì•Œì•„ë´…ì‹œë‹¤"><a href="#ë§ˆì§€ë§‰ìœ¼ë¡œ-ì´ˆë³´ìë“¤ì´-ì˜ëª»-ì‚¬ìš©í•˜ê±°ë‚˜-ì ‘ê·¼í•˜ëŠ”-ê²½ìš°ë¥¼-ì•Œì•„ë´…ì‹œë‹¤" class="headerlink" title="ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ˆë³´ìë“¤ì´ ì˜ëª» ì‚¬ìš©í•˜ê±°ë‚˜ ì ‘ê·¼í•˜ëŠ” ê²½ìš°ë¥¼ ì•Œì•„ë´…ì‹œë‹¤."></a>ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ˆë³´ìë“¤ì´ ì˜ëª» ì‚¬ìš©í•˜ê±°ë‚˜ ì ‘ê·¼í•˜ëŠ” ê²½ìš°ë¥¼ ì•Œì•„ë´…ì‹œë‹¤.</h2><blockquote>
<p>Okkyì—ì„œ Ajax ê´€ë ¨ ì§ˆë¬¸ì´ ì˜¬ë¼ì˜¨ë‹¤ë©´ ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="1-ì €ëŠ”-ì œëŒ€ë¡œ-êµ¬í˜„í•œ-ê²ƒ-ê°™ì€ë°-ì—ëŸ¬ë¡œ-ì‘ë‹µë°›ìŠµë‹ˆë‹¤"><a href="#1-ì €ëŠ”-ì œëŒ€ë¡œ-êµ¬í˜„í•œ-ê²ƒ-ê°™ì€ë°-ì—ëŸ¬ë¡œ-ì‘ë‹µë°›ìŠµë‹ˆë‹¤" class="headerlink" title="1. ì €ëŠ” ì œëŒ€ë¡œ êµ¬í˜„í•œ ê²ƒ ê°™ì€ë° ì—ëŸ¬ë¡œ ì‘ë‹µë°›ìŠµë‹ˆë‹¤."></a>1. ì €ëŠ” ì œëŒ€ë¡œ êµ¬í˜„í•œ ê²ƒ ê°™ì€ë° ì—ëŸ¬ë¡œ ì‘ë‹µë°›ìŠµë‹ˆë‹¤.</h4><ul>
<li>dataTypeì„ ì§€ì •í•œ ë’¤ ê·¸ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µí•´ë„ ì—ëŸ¬ ì½œë°±ì´ í˜¸ì¶œë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ë¬¸ìì—´ì´ë‚˜ nullì„ ì‘ë‹µí•˜ëŠ”ë° ajaxì—ì„œëŠ” jsonìœ¼ë¡œ ì§€ì •í•  ê²½ìš°ì—ëŠ” ì„œë²„ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µë˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ jsonìœ¼ë¡œ íŒŒì‹±í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì—ëŸ¬ ì½œë°±ì´ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>ëŒ€ë¶€ë¶„ì˜ Ajax ê´€ë ¨ ì§ˆë¬¸ì€ ì—¬ê¸°ì— í•´ë‹¹ë˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ errorê°€ ë‚œë‹¤ê³  í•´ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µë°›ì§€ ëª»í–ˆë‹¤ê³  íŒë‹¨í•˜ê³  ê³„ì…¨ìŠµë‹ˆë‹¤. ì„œë²„ëŠ” htmlë¬¸ì„œë¥¼ ì‘ë‹µí•˜ëŠ”ë° ajax ë°ì´í„° í˜•ì‹ì´ jsonì´ë©´ ì˜¤ë¥˜ê°€ ë‚œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
</blockquote>
<h4 id="2-ë°ì´í„°ë¥¼-ì„œë²„ì—ì„œ-ë°›ì•„ì˜¬-ìˆ˜-ì—†ìŠµë‹ˆë‹¤"><a href="#2-ë°ì´í„°ë¥¼-ì„œë²„ì—ì„œ-ë°›ì•„ì˜¬-ìˆ˜-ì—†ìŠµë‹ˆë‹¤" class="headerlink" title="2. ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ë°›ì•„ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."></a>2. ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ë°›ì•„ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h4><ul>
<li>ìš”ì²­ ë©”ì†Œë“œ íƒ€ì…ì´ GETì¼ ë•Œ processDataë¥¼ falseë¡œ ì§€ì •í•  ê²½ìš°ì—ëŠ” ë°ì´í„°ë¥¼ urlì— ì§ì ‘ í¬í•¨ì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.  ë§Œì•½, POSTê°™ì€ ìš”ì²­ì˜ ê²½ìš°ì—ëŠ” ë°ì´í„°ê°€ ìš”ì²­ ë°”ë””ì— í¬í•¨ë˜ì–´ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì‹œê¸° ë°”ëë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>POSTì˜ ê²½ìš°ì—ë„ urlì— íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ëœë‹¤ë©´ @RequestParam ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="3-GET-ìš”ì²­ì„-í†µí•´-ë³´ë‚´ëŠ”ë°-ì¼ì •-ë°ì´í„°-í¬ê¸°ì´ìƒ-ë³´ë‚´ì§€ì§€-ì•ŠìŠµë‹ˆë‹¤"><a href="#3-GET-ìš”ì²­ì„-í†µí•´-ë³´ë‚´ëŠ”ë°-ì¼ì •-ë°ì´í„°-í¬ê¸°ì´ìƒ-ë³´ë‚´ì§€ì§€-ì•ŠìŠµë‹ˆë‹¤" class="headerlink" title="3. GET ìš”ì²­ì„ í†µí•´ ë³´ë‚´ëŠ”ë° ì¼ì • ë°ì´í„° í¬ê¸°ì´ìƒ ë³´ë‚´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤."></a>3. GET ìš”ì²­ì„ í†µí•´ ë³´ë‚´ëŠ”ë° ì¼ì • ë°ì´í„° í¬ê¸°ì´ìƒ ë³´ë‚´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</h4><ul>
<li>ë¸Œë¼ìš°ì €ë³„ë¡œ URLì˜ ì§€ì› í¬ê¸°ê°€ ë‹¤ë¦…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— POSTë¡œ ìš”ì²­ ë°”ë””ì— ë°ì´í„°ë¥¼ í¬í•¨ì‹œì¼œ ë³´ë‚´ëŠ” ì´ìœ ë„ ë°”ë¡œ ì´ ë•Œë¬¸ì…ë‹ˆë‹¤. ë¬¼ë¡  ì„œë²„ ì¸¡ì—ì„œë„ ìš”ì²­ ë°”ë””ì— ëŒ€í•œ í¬ê¸°ë¥¼ ì œí•œí•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>ë§ì€ ì‹ ì… ë©´ì ‘ì‹œì— GETê³¼ POSTì˜ ì°¨ì´ë¥¼ ë¬»ëŠ” ì´ìœ ì´ê¸°ë„ í•©ë‹ˆë‹¤. ë‹¨ìˆœíˆ ë³´ì•ˆ ë•Œë¬¸ì— êµ¬ë¶„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ì ì…ë‹ˆë‹¤.</p>
</blockquote>
<h4 id="4-406-Not-Acceptable-ì‘ë‹µí•´ìš”-ã… ã… -2017-02-14"><a href="#4-406-Not-Acceptable-ì‘ë‹µí•´ìš”-ã… ã… -2017-02-14" class="headerlink" title="4. 406 - Not Acceptable ì‘ë‹µí•´ìš” ã… ã…   [2017-02-14]"></a>4. 406 - Not Acceptable ì‘ë‹µí•´ìš” ã… ã…   [2017-02-14]</h4><ul>
<li>í˜¹ì‹œ @ResponseBodyë¡œ Listë‚˜ Mapì„ ì‘ë‹µí•˜ê³  ê³„ì‹ ê°€ìš”? ì‘ë‹µí•˜ê¸° ìœ„í•´ì„œëŠ” annotation-driven ì„¤ì •ì´ ë˜ì–´ìˆì–´ì•¼ í•˜ê³  ìš”ì²­í•˜ëŠ” ì‘ë‹µ ë°ì´í„°ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë„ë¡ ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>ìŠ¤í”„ë§ ë²„ì „ì— ë”°ë¼ì„œ ë‹¤ë¥´ê² ì§€ë§Œ ìŠ¤í”„ë§ 3 ë¶€í„°ëŠ” annotation-driven ì„¤ì •ì„ í•˜ê³  jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥´ ì¶”ê°€í•œë‹¤ë©´ ë””í´íŠ¸ ì „ëµìœ¼ë¡œ ë©”ì‹œì§€ì»¨ë²„í„°ê°€ ë“±ë¡ë©ë‹ˆë‹¤.  </p>
</blockquote>
<h4 id="5-MessageConverterë¥¼-ì´ìš©í•˜ê³ -ì‹¶ì§€-ì•Šì•„ìš”-2017-04-20"><a href="#5-MessageConverterë¥¼-ì´ìš©í•˜ê³ -ì‹¶ì§€-ì•Šì•„ìš”-2017-04-20" class="headerlink" title="5. MessageConverterë¥¼ ì´ìš©í•˜ê³  ì‹¶ì§€ ì•Šì•„ìš” [2017-04-20]"></a>5. MessageConverterë¥¼ ì´ìš©í•˜ê³  ì‹¶ì§€ ì•Šì•„ìš” [2017-04-20]</h4><ul>
<li>ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì´ìš©í•˜ì§€ ì•Šê³ ë„ JSONìœ¼ë¡œ ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ContentNegotiatingViewResolverë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤. í™•ì¥ìë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</li>
</ul>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.ContentNegotiatingViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	    <span class="token comment">&lt;!-- ViewResolver ìš°ì„ ìˆœìœ„ ì„¤ì • --></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mediaTypes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	        <span class="token comment">&lt;!-- ë§µí•‘ë  í™•ì¥ì ì •ì˜ --></span>
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>map</span><span class="token punctuation">></span></span>
	            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>json<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/json<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">beans:</span>map</span><span class="token punctuation">></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">beans:</span>property</span><span class="token punctuation">></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>defaultViews<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>list</span><span class="token punctuation">></span></span>
	            <span class="token comment">&lt;!-- JSON ìš”ì²­ì„ ì²˜ë¦¬í•  ë·° --></span>
	            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.json.MappingJacksonJsonView<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">beans:</span>list</span><span class="token punctuation">></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">beans:</span>property</span><span class="token punctuation">></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">beans:</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ignoreAcceptHeader<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">beans:</span>bean</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/test.json"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">api</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ModelMap</span> map<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">"Message Bean"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"response"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ModelMapì— ì¶”ê°€í•˜ì—¬ JSON í˜•íƒœë¡œ ì¶œë ¥í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
</blockquote>
<p>ì°¸ì¡° : <a href="http://ismydream.tistory.com/139">http://ismydream.tistory.com/139</a></p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>ì´ˆë³´ê°€ ì´í•´í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</title>
    <url>/understanding-spring-security/</url>
    <content><![CDATA[<blockquote>
<p>ë³¸ ê¸€ì€ OKKYì— ê³µìœ ëœ <a href="https://okky.kr/article/382738">ì´ˆë³´ê°€ ì´í•´í•˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a> ì…ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ë“¤ì–´ê°€ë©°"><a href="#ë“¤ì–´ê°€ë©°" class="headerlink" title="ë“¤ì–´ê°€ë©°"></a>ë“¤ì–´ê°€ë©°</h2><h2 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ë€-ë¬´ì—‡ì¸ê°€"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ë€-ë¬´ì—‡ì¸ê°€" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€ ë¬´ì—‡ì¸ê°€?"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€ ë¬´ì—‡ì¸ê°€?</h2><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ìë°” EE ê¸°ë°˜ì˜ ì—”í„°í”„ë¼ì´ì¦ˆ ì†Œí”„íŠ¸ì›¨ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ í¬ê´„ì ì¸ ë³´ì•ˆ ì„œë¹„ìŠ¤ë“¤ì„ ì œê³µí•˜ê³  ì˜¤í”ˆ í”Œë«í¼ì´ë©´ì„œ ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ìë‘(?)í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ, ì‹ ì… ê°œë°œìë“¤ ìˆ˜ì¤€ì—ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ê°™ì€ ë³´ì•ˆ ê¸°ìˆ ì„ ì´í•´í•˜ê¸°ë€ ì°¸ í˜ë“  ê³¼ì •ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ì €ë§Œ ì´í•´í•˜ê¸° í˜ë“¤ ìˆ˜ ìˆì–´ìš” ã… ã…   </p>
</blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆì„ êµ¬ì„±í•˜ëŠ” ë‘ê°€ì§€ ì˜ì—­ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ ì¸ì¦(Authentication)ê³¼ ê¶Œí•œ(Authorization)ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë‘ ì˜ì—­ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ëª©í‘œì´ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì´í•´í•˜ê³  ë„˜ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. <code>ì¸ì¦</code>ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì£¼ì²´(ì‚¬ìš©ì)ë¼ê³  ì£¼ì¥í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•˜ë©° ê¶Œí•œì€ ì¸ì¦ëœ ì£¼ì²´ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í—ˆë½ë˜ìˆëŠ”ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê¶Œí•œ ìŠ¹ì¸ì´ í•„ìš”í•œ ë¶€ë¶„ìœ¼ë¡œ ì ‘ê·¼í•˜ë ¤ë©´ ì¸ì¦ ê³¼ì •ì„ í†µí•´ ì£¼ì²´ê°€ ì¦ëª… ë˜ì–´ì•¼ë§Œ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.   </p>
<p>ì•ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ìë‘í•œë‹¤ê³  í–ˆëŠ”ë°ìš”. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì´ì™€ ê´€ë ¨í•´ì„œ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ê³¼ ê´€ê³„ì—†ì´ ìƒë‹¹íˆ ê¹Šì€ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¶Œí•œ ë¶€ì—¬ì—ë„ ë‘ê°€ì§€ ì˜ì—­ì´ ì¡´ì¬í•˜ëŠ”ë° ì›¹ ìš”ì²­ ê¶Œí•œ, ë©”ì†Œë“œ í˜¸ì¶œ ë° ë„ë©”ì¸ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬ì…ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì´ë ‡ê²Œ ëª¨ë“  ì¤‘ìš”í•œ ì˜ì—­ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p><a href="http://zgundam.tistory.com/43">ì œíƒ€ê±´ë‹´ë‹˜ì˜ ê¸€</a>ì—ì„œëŠ” ë¡œê·¸ì¸ í™”ë©´ì„ í†µí•´ì„œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ ë¡œê·¸ì¸í•˜ëŠ” ê³¼ì •ì„ ì¸ì¦ì´ë¼ê³  ì„œìˆ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê´€ë ¨ëœ ìš©ì–´ê°€ ë°”ë¡œ HTTP ê¸°ë³¸ ì¸ì¦(HTTP Basic Authentication) ë§¤ì»¤ë‹ˆì¦˜ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ HTTP ê¸°ë³¸ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ ë°”ë¡œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ì„¤ëª…í•˜ëŠ” í¼ ê¸°ë°˜ ë¡œê·¸ì¸ì´ ë©ë‹ˆë‹¤.  </p>
<blockquote>
<p>ì•„ ë¬¼ë¡ , HTTP ê¸°ë³¸ ì¸ì¦ &#x3D;&#x3D; í¼ ê¸°ë°˜ ë¡œê·¸ì¸ì´ë¼ëŠ” ë§ì€ ì•„ë‹™ë‹ˆë‹¤. í¼ ì–‘ì‹ì„ í†µí•œ ë¡œê·¸ì¸ë„ usernameê³¼ passwordë¥¼ í†µí•´ ì¸ì¦í•˜ê¸° ë•Œë¬¸ì— HTTP ê¸°ë³¸ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.  </p>
</blockquote>
<p>ì‹¤ì œë¡œ <a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#basic">ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œì˜ Basic and Digest Authentication</a>ì—ì„œëŠ” ë‹¤ìŒì„ ì–¸ê¸‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.  </p>
<p>Basic authentication is often used with stateless clients which pass their credentials on each request. Itâ€™s quite common to use it in combination with form-based authentication where an application is used through both a browser-based user interface and as a web-service.</p>
<blockquote>
<p>ì¸ì¦ê³¼ ê¶Œí•œì´ë¼ëŠ” ê°œë…ì„ ì´í•´í•˜ì…¨ë‹¤ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•´ì„œ ë°°ì›Œë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì‹œì‘í•˜ê¸°"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì‹œì‘í•˜ê¸°" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‹œì‘í•˜ê¸°"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‹œì‘í•˜ê¸°</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë©”ì´ë¸ì´ë‚˜ ê·¸ë˜ë“¤ê°™ì€ ë¹Œë“œë„êµ¬ë¥¼ í†µí•´ ì‰½ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
<h4 id="with-Maven"><a href="#with-Maven" class="headerlink" title="with Maven"></a>with Maven</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- ... other dependency elements ... --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-security-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-security-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre>

<h4 id="with-Gradle"><a href="#with-Gradle" class="headerlink" title="with Gradle"></a>with Gradle</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript">dependencies <span class="token punctuation">&#123;</span>
	compile <span class="token string">'org.springframework.security:spring-security-web:4.2.2.RELEASE'</span>
	compile <span class="token string">'org.springframework.security:spring-security-config:4.2.2.RELEASE'</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ì €ëŠ” ë©”ì´ë¸ ëŒ€ì‹  ê·¸ë˜ë“¤ì„ ì‚¬ìš©í•´ë´¤ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="Java-Configuration"><a href="#Java-Configuration" class="headerlink" title="Java Configuration"></a>Java Configuration</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ìë°” ê¸°ë°˜ì˜ ì„¤ì •ìœ¼ë¡œ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?  </p>
<p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 3.1ì—ì„œë¶€í„° ì–´ë…¸í…Œì´ì…˜ì„ í†µí•œ ìë°” ì„¤ì •ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.2ë¶€í„°ëŠ” XMLë¡œ ì„¤ì •í•˜ì§€ ì•Šê³ ë„ ê°„ë‹¨í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.  </p>
<p>ì›ë˜ XML ê¸°ë°˜ì˜ ì„¤ì •ì—ì„œëŠ” web.xmlì— org.springframework.web.filter.DelegatingFilterProxyë¼ëŠ” springSecurityFilterChainì„ ë“±ë¡í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤ë§Œ, ìë°” ê¸°ë°˜ì˜ ì„¤ì •ì—ì„œëŠ” WebSecurityConfigurerAdapterë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ì— @EnableWebSecurity ì–´ë…¸í…Œì´ì…˜ì„ ëª…ì‹œí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ springSecurityFilterChainê°€ ìë™ìœ¼ë¡œ í¬í•¨ë˜ì–´ì§‘ë‹ˆë‹¤.    </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ë¦¬ê³  í¬í•¨ëœ springSecurityFilterChainì„ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” AbstractSecurityWebApplicationInitializerë¥¼ ìƒì†ë°›ì€ WebApplicationInitializerë¥¼ ë§Œë“¤ì–´ë‘ë©´ ë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityWebApplicationInitializer</span>
	<span class="token keyword">extends</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span> <span class="token punctuation">&#123;</span>

<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>XMLì„ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ìë°” ê¸°ë°˜ì˜ êµ¬ì„±ì´ ë”ìš± ì‰½ìŠµë‹ˆë‹¤.  </p>
</blockquote>
<p>ê·¸ ë‹¤ìŒì—ëŠ” ë³´í†µ ìŠ¤í”„ë§ MVCë¥¼ ì´ìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— ApplicationIniticalizerì— WebSecurityConfigurerAdapterë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ë¥¼ getRootConfigClasses() ë©”ì†Œë“œì— ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì ìš©ì€ ëì…ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationInitializer</span> <span class="token keyword">extends</span>
		<span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> <span class="token class-name">WebSecurityConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token comment">// ... other overrides ...</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ì´ë¡œì¨ ìœ ì¶” í•´ë³¼ë•Œ, springSecurityFilterChainì€ ë£¨íŠ¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë“±ë¡ë˜ì–´ì•¼í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ê° í•„í„°ì— ëŒ€í•œ ìš°ì„ ìˆœìœ„ì— ëŒ€í•´ì„œë„ ì¶”ê°€ì ìœ¼ë¡œ ì•Œ í•„ìš”ì„±ì´ ìƒê¸°ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.    </p>
</blockquote>
<h4 id="HttpSecurity"><a href="#HttpSecurity" class="headerlink" title="HttpSecurity"></a>HttpSecurity</h4><p>ê·¸ë¦¬ê³ ë‚˜ì„œ configure(HttpSecurity http) ë©”ì†Œë“œë¥¼ í†µí•´ì„œ ìš°ë¦¬ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì•„ì§ê¹Œì§€ëŠ” ì–´ë–»ê²Œ êµ¬ì„±í•´ì•¼í• ì§€ ë§‰ë§‰í•˜ê¸°ë§Œ í•©ë‹ˆë‹¤. ê´€ë ¨ëœ ì •ë³´ë¥¼ ì¢€ë” ì°¾ì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	http<span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/users/&#123;userId&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"@authenticationCheckHandler.checkUserId(authentication,#userId)"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/admin/db/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"hasRole('ADMIN_MASTER') or hasRole('ADMIN') and hasRole('DBA')"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/register/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"ANONYMOUS"</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë­ ì‚¬ì‹¤ìƒ ë³„ê²Œ ì—†ìŠµë‹ˆë‹¤. HttpSecurityì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ìì‹ ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì„¤ì •ì€ ì—¬ê¸°ë¥¼ í†µí•˜ê²Œ ë˜ë‹ˆê¹Œìš” .authorizeRequests()ë¥¼ í†µí•´ ìš”ì²­ì— ëŒ€í•œ ê¶Œí•œì„ ì§€ì •í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ë³¸ì ì¸ í˜•íƒœì˜ <code>.anyRequest().authenticated()</code>ë¼ëŠ” ì˜ë¯¸ëŠ” ì–´ë– í•œ ìš”ì²­ì´ë“ ì§€ ì¸ì¦ë˜ì–´ì•¼í•œë‹¤ëŠ” ê²ƒì´ê²Ÿì£ ? .formLogin()ì€ í¼ì„ í†µí•œ ë¡œê·¸ì¸ì„ ì´ìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë©°, .loginPage(â€œ&#x2F;loginâ€)ì„ í†µí•´ ë¡œê·¸ì¸ í˜ì´ì§€ëŠ” &#x2F;login ê²½ë¡œë¡œ ì œê³µí•˜ë©° &#x2F;loginì˜ POST ìš”ì²­ì´ ë°”ë¡œ ë¡œê·¸ì¸ ì²˜ë¦¬ ê³¼ì •ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤.  </p>
<p>í™•ì¥ëœ í˜•íƒœì—ì„œì˜ .antMatchers().hasRole() ë˜ëŠ” .antMatchers().access()ëŠ” í•´ë‹¹ ê²½ë¡œì— ëŒ€í•´ì„œ ì–´ë– í•œ ê¶Œí•œì„ ê°€ì ¸ì•¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ê°€ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒì€ antMatchers() ë‹¤ìŒìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆëŠ” í•­ëª©ë“¤ì…ë‹ˆë‹¤.  </p>
<ul>
<li>anonymous()<br>ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>authenticated()<br>ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>fullyAuthenticated()<br>ì™„ì „íˆ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(?)  </li>
<li>hasRole() or hasAnyRole()<br>íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>hasAuthority() or hasAnyAuthority()<br>íŠ¹ì • ê¶Œí•œì„ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>hasIpAddress()<br>íŠ¹ì • ì•„ì´í”¼ ì£¼ì†Œë¥¼ ê°€ì§€ëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>access()<br>SpEL í‘œí˜„ì‹ì— ì˜í•œ ê²°ê³¼ì— ë”°ë¼ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </li>
<li>not()<br>ì ‘ê·¼ ì œí•œ ê¸°ëŠ¥ì„ í•´ì œí•©ë‹ˆë‹¤.   </li>
<li>permitAll() or denyAll()<br>ì ‘ê·¼ì„ ì „ë¶€ í—ˆìš©í•˜ê±°ë‚˜ ì œí•œí•©ë‹ˆë‹¤.  </li>
<li>rememberMe()<br>ë¦¬ë©¤ë²„ ê¸°ëŠ¥ì„ í†µí•´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<blockquote>
<p>Roleì€ ì—­í• ì´ê³  AuthorityëŠ” ê¶Œí•œì´ì§€ë§Œ ì‚¬ì‹¤ì€ í‘œí˜„ì˜ ì°¨ì´ì…ë‹ˆë‹¤. Roleì€ â€œADMINâ€ìœ¼ë¡œ í‘œí˜„í•˜ê³  AuthorityëŠ” â€œROLE_ADMINâ€ìœ¼ë¡œ í‘œê¸°í•˜ëŠ” ê²ƒ ë¿ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ hasRole()ì— ROLE_ADMINìœ¼ë¡œ í‘œê¸°í•˜ë©´ ROLEì„ ì§€ìš°ë¼ëŠ” ì—ëŸ¬ë¥¼ ë³¼ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.  </p>
</blockquote>
<blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜í•œ SpEL í‘œí˜„ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;sec:authentication /&gt; ì´ë ‡ê²Œ ë§ì…ë‹ˆë‹¤.  </p>
</blockquote>
<h4 id="AuthenticationManagerBuilder"><a href="#AuthenticationManagerBuilder" class="headerlink" title="AuthenticationManagerBuilder"></a>AuthenticationManagerBuilder</h4><p>AuthenticationManagerBuilderë¥¼ í†µí•´ ì¸ì¦ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ì•Œë ¤ì£¼ëŠ” ë°©ì‹ì¸ë° AuthenticationManagerBuilderë¥¼ ë©”ì†Œë“œë¥¼ í†µí•´ ì£¼ì…ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. WebSecurityConfigurerAdapterì˜ configure(AuthenticationManagerBuilder auth)ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì°¨ì´ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureGlobal</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"scott"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"tiger"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"ROLE_USER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// TODO Auto-generated method stub</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"ADMIN"</span><span class="token punctuation">,</span> <span class="token string">"DBA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"scott"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"tiger"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">,</span> <span class="token string">"SETTING"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì›í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì™€ ìƒ˜í”Œì„ ë§Œë“  ê°œë°œìê°€ ì™œ ì²«ë²ˆì§¸ ë°©ì‹ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ”ì§€ì— ëŒ€í•œ ì˜ë¯¸ë¥¼ ìƒê°í•´ë´…ì‹œë‹¤.  </p>
<blockquote>
<p>ì•„ì‹œëŠ” ë¶„ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.  </p>
</blockquote>
<h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì†ìœ¼ë¡œ-ë“¤ì–´ê°€ê¸°"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì†ìœ¼ë¡œ-ë“¤ì–´ê°€ê¸°" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì†ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì†ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°</h3><p>ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ì„¤ì •ë“¤ì€ ì•„ì£¼ ê¸°ë³¸ì ì¸ í˜•íƒœë“¤ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ ìš°ë¦¬ë§Œì˜ ì¸ì¦ ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•œ ë’¤ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì œê³µí•˜ëŠ” ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.  </p>
<h4 id="Method-Security"><a href="#Method-Security" class="headerlink" title="Method Security"></a>Method Security</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 2.0 ì—ì„œë¶€í„° ì„œë¹„ìŠ¤ ê³„ì¸µì˜ ë©”ì†Œë“œì— ë³´ì•ˆì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. @Secured ì–´ë…¸í…Œì´ì…˜ ë¿ë§Œ ì•„ë‹ˆë¼ JSR-250 ì–´ë…¸í…Œì´ì…˜ë„ ì§€ì›í•˜ë„ë¡ ì œê³µë©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.0ì—ì„œëŠ” í‘œí˜„ ê¸°ë°˜ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.  </p>
<p>ìš°ë¦¬ëŠ” Configuration í´ë˜ìŠ¤ì— @EnableGlobalMethodSecurityë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ë³´ì•ˆì„ í™œì„±í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ @Secured ì–´ë…¸í…Œì´ì…˜ì„ í™œì„±í™”ì‹œí‚¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>securedEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token punctuation">&#123;</span>
<span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ë¦¬ê³ ë‚˜ì„œ í´ë˜ìŠ¤ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì†Œë“œì— @Secured ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ ê·¸ì— ë”°ë¥¸ í•´ë‹¹ ë©”ì†Œë“œì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ê°€ ì œí•œë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BankService</span> <span class="token punctuation">&#123;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"IS_AUTHENTICATED_ANONYMOUSLY"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">readAccount</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"IS_AUTHENTICATED_ANONYMOUSLY"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">findAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Secured</span><span class="token punctuation">(</span><span class="token string">"ROLE_TELLER"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ì—­í•  ë‹¨ìœ„ë¡œ ì œì•½ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.0ë¶€í„° ì§€ì›í•˜ëŠ” í‘œí˜„ì‹ ê¸°ë°˜ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>prePostEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodSecurityConfig</span> <span class="token punctuation">&#123;</span>
<span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BankService</span> <span class="token punctuation">&#123;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"isAnonymous()"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">readAccount</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"isAnonymous()"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">findAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"hasAuthority('ROLE_TELLER')"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Account</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Remember-Me"><a href="#Remember-Me" class="headerlink" title="Remember-Me"></a>Remember-Me</h4><p>ë¦¬ë©¤ë²„-ë¯¸ ê¸°ëŠ¥ì€ ë„ëŒ€ì²´ ë¬´ì—‡ì¼ê¹Œìš”? êµ¬ê¸€ì— what is remember me ë¼ëŠ” í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://www.formsite.com/faq/general/What-does-Remember-Me-mean-on-the-Login-page.html">What-does-Remember-Me-mean-on-the-Login-page</a>  </li>
<li><a href="http://help.thunderbird.edu/portal-login/remember-me">What is â€œRemember Meâ€ ?</a></li>
</ul>
<p>ë‹¨ìˆœíˆ ì•„ì´ë””ë¥¼ ê¸°ì–µí•´ë†“ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.  </p>
<p>Do NOT use â€œRemember Meâ€ on any public computer, on campus, in Internet cafeâ€™s, or anywhere else where you cannot control access!</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	http<span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rememberMeParameter</span><span class="token punctuation">(</span><span class="token string">"remember-me"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token constant">REMEMBER_ME_KEY</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rememberMeServices</span><span class="token punctuation">(</span><span class="token function">persistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PersistentTokenBasedRememberMeServices</span> <span class="token function">persistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">PersistentTokenBasedRememberMeServices</span> persistentTokenBasedRememberMeServices <span class="token operator">=</span>
			<span class="token keyword">new</span> <span class="token class-name">PersistentTokenBasedRememberMeServices</span><span class="token punctuation">(</span><span class="token constant">REMEMBER_ME_KEY</span><span class="token punctuation">,</span> userDetailsService<span class="token punctuation">,</span> <span class="token function">persistentTokenRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> persistentTokenBasedRememberMeServices<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PersistentTokenRepository</span> <span class="token function">persistentTokenRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">TokenRepositoryImpl</span> tokenRepositoryImpl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenRepositoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tokenRepositoryImpl<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì €ëŠ” ì˜ì†ì„± ê¸°ë°˜ì˜ ë¦¬ë©¤ë²„-ë¯¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë•Œ, ë¦¬ë©¤ë²„-ë¯¸ í† í°ì„ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ TokenRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼í•˜ëŠ”ë°ìš”. ì¼ì¢…ì˜ ì„œë¹„ìŠ¤ ê°ì²´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenRepositoryImpl</span>  <span class="token keyword">implements</span> <span class="token class-name">PersistentTokenRepository</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">TokenRepository</span> tokenRepository<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createNewToken</span><span class="token punctuation">(</span><span class="token class-name">PersistentRememberMeToken</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">Token</span> newToken <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Token</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getTokenValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setLast_used</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		newToken<span class="token punctuation">.</span><span class="token function">setSeries</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getSeries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>newToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> series<span class="token punctuation">,</span> <span class="token class-name">String</span> tokenValue<span class="token punctuation">,</span> <span class="token class-name">Date</span> lastUsed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>

		<span class="token class-name">Token</span> updateToken <span class="token operator">=</span> tokenRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setLast_used</span><span class="token punctuation">(</span>lastUsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
		updateToken<span class="token punctuation">.</span><span class="token function">setSeries</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>updateToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">PersistentRememberMeToken</span> <span class="token function">getTokenForSeries</span><span class="token punctuation">(</span><span class="token class-name">String</span> series<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">Token</span> token <span class="token operator">=</span> tokenRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">PersistentRememberMeToken</span> persistentRememberMeToken <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersistentRememberMeToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> series<span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">getLast_used</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> persistentRememberMeToken<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeUserTokens</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		tokenRepository<span class="token punctuation">.</span><span class="token function">deleteByEmail</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><code>ë³¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ Emailì€ ìœ ë‹ˆí¬í•œ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤.</code></p>
<h4 id="Password-Encoding"><a href="#Password-Encoding" class="headerlink" title="Password Encoding"></a>Password Encoding</h4><p>AuthenticationManagerBuilder.userDetailsService().passwordEncoder()ë¥¼ í†µí•´ íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”ì— ì‚¬ìš©ë  PasswordEncoder êµ¬í˜„ì²´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PasswordEncoder ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PasswordEncoder</span> <span class="token punctuation">&#123;</span>

	<span class="token comment">/**
	 * Encode the raw password. Generally, a good encoding algorithm applies a SHA-1 or
	 * greater hash combined with an 8-byte or greater randomly generated salt.
	 */</span>
	<span class="token class-name">String</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> rawPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Verify the encoded password obtained from storage matches the submitted raw
	 * password after it too is encoded. Returns true if the passwords match, false if
	 * they do not. The stored password itself is never decoded.
	 *
	 * @param rawPassword the raw password to encode and match
	 * @param encodedPassword the encoded password from storage to compare with
	 * @return true if the raw password, after encoding, matches the encoded password from
	 * storage
	 */</span>
	<span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> rawPassword<span class="token punctuation">,</span> <span class="token class-name">String</span> encodedPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
<blockquote>
<p>ë‹¨ìˆœíˆ ì¸ì½”ë”©í•˜ëŠ” í•¨ìˆ˜ì™€ í‰ë¬¸ìœ¼ë¡œ ì œê³µë˜ëŠ” íŒ¨ìŠ¤ì›Œë“œì™€ ì¸ì½”ë”©ë˜ì–´ìˆëŠ” íŒ¨ìŠ¤ì›Œë“œ(ì˜ˆë¥¼ë“¤ì–´, ë°ì´í„°ë² ì´ìŠ¤ì— ì¸ì½”ë”©ë˜ì–´ ì €ì¥ë˜ì–´ ìˆëŠ” íŒ¨ìŠ¤ì›Œë“œ)ë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
</blockquote>
<p>ì €ëŠ” PasswordEncoder êµ¬í˜„ì²´ì¸ BCryptPasswordEncoderë¥¼ ì§€ì •í–ˆìŠµë‹ˆë‹¤. ë‹¹ì—°íˆ ì§ì ‘ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì ìš©í•´ë„ ë©ë‹ˆë‹¤! (ì•„ë¬´ë˜ë„ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ê²Ÿì£ ?)  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// TODO Auto-generated method stub</span>
	auth<span class="token punctuation">.</span><span class="token function">userDetailsService</span><span class="token punctuation">(</span>userDetailsService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>PasswordEncoderë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ë‘ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ëœ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ì¥ëœ íŒ¨ìŠ¤ì›Œë“œëŠ” PasswordEncoderì— ì˜í•´ ì•”í˜¸í™”ëœ í‰ë¬¸ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/users/&#123;userId&#125;"</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">"#updateUser.email == authentication.name"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@ModelAttribute</span> <span class="token annotation punctuation">@Valid</span> <span class="token class-name">UserDTO<span class="token punctuation">.</span>Update</span> updateUser<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token class-name">User</span> currentUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>passwordEncoder<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>updateUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> currentUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"Not password equals..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">//...</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="WebSecurity-Ignoring"><a href="#WebSecurity-Ignoring" class="headerlink" title="WebSecurity Ignoring"></a>WebSecurity Ignoring</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì™€ëŠ” ë‹¬ë¦¬ ë¦¬ì†ŒìŠ¤ì™€ ê´€ë ¨í•´ì„œëŠ” <code>WebSecurity.ignoring()</code>ë¥¼ ì´ìš©í•´ì„œ ë³´ì•ˆì´ ì ìš©ë˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° API ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° ë ˆí¼ëŸ°ìŠ¤ì— ì„¤ëª…ì´ ì—†ë‹¤ëŠ” ê²ƒì´ ì¢€ ì•„ì‰¬ìš´ ë¶€ë¶„ì…ë‹ˆë‹¤.  </p>
<p><code>ìŒ... permitAllê³¼ ignoringì˜ ì°¨ì´ê°€ ìˆëŠ”ê°€ë¥¼ ì•„ì‹œëŠ”ë¶„ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤ ã… ã… </code>  </p>
<h4 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h4><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë©”ì‹œì§€ì— ëŒ€í•œ í˜„ì§€í™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ë©”ì‹œì§€ ì†ŒìŠ¤ ê´€ë ¨ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì€ spring-security-core.jarì— í¬í•¨ ë˜ì–´ì ¸ìˆìŠµë‹ˆë‹¤.  </p>
<p>ìš°ë¦¬ëŠ” ë©”ì‹œì§€ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì„ ë©”ì‹œì§€ì†ŒìŠ¤ë¡œ ë“±ë¡í•˜ë©´ ë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">MessageSource</span> <span class="token function">messageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">ResourceBundleMessageSource</span> messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		messageSource<span class="token punctuation">.</span><span class="token function">addBasenames</span><span class="token punctuation">(</span><span class="token string">"security/messages"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		messageSource<span class="token punctuation">.</span><span class="token function">setDefaultEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">LocaleChangeInterceptor</span> <span class="token function">localeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">LocaleChangeInterceptor</span> localeChangeInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocaleChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		localeChangeInterceptor<span class="token punctuation">.</span><span class="token function">setParamName</span><span class="token punctuation">(</span><span class="token string">"lang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> localeChangeInterceptor<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token keyword">public</span> <span class="token class-name">LocaleResolver</span> <span class="token function">localeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">SessionLocaleResolver</span> localeResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		localeResolver<span class="token punctuation">.</span><span class="token function">setDefaultLocale</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">KOREAN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> localeResolver<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token function">localeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ë©”ì‹œì§€ í”„ë¡œí¼í‹° íŒŒì¼ë“¤ì€ src&#x2F;main&#x2F;resource&#x2F;security í´ë”ì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="AuthenticationSuccessHandler-amp-AuthenticationFailureHandler"><a href="#AuthenticationSuccessHandler-amp-AuthenticationFailureHandler" class="headerlink" title="AuthenticationSuccessHandler &amp; AuthenticationFailureHandler"></a>AuthenticationSuccessHandler &amp; AuthenticationFailureHandler</h4><p>OKKYì˜ ì§ˆë¬¸ê²Œì‹œíŒì—ì„œ ë¡œê·¸ì¸ ì‹¤íŒ¨ë¥¼ ì–´ë–»ê²Œ ì²´í¬í•˜ëŠ”ê°€ì— ëŒ€í•´ì„œ ì§ˆë¬¸í•˜ëŠ” ê¸€ì„ ë³´ì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” AuthenticationFailureHandler êµ¬í˜„ì²´ë¥¼ ìƒì†ë°›ì•„ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationSuccessHandlerImpl</span> <span class="token keyword">extends</span> <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span>  <span class="token punctuation">&#123;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationSuccessHandlerImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationSuccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
			<span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
		logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Login Success... - &#123;&#125;"</span><span class="token punctuation">,</span> authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"/?login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<p>AuthenticationSuccessHandler êµ¬í˜„ì²´ì—ì„œëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µí–ˆì„ë•Œ í˜¸ì¶œ(ì¸ì¦ ê°ì²´ê°€ ìƒì„±ë˜ì–´ì§„ í›„)ë˜ê¸° ë•Œë¬¸ì— Authentication ì¸ìŠ¤í„´ìŠ¤ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. authentication.getPrincipal()ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ì € ê°™ì€ ê²½ìš°ì—ëŠ” org.springframework.security.core.userdetails.User ê°€ ì•„ë‹Œ com.kdev.app.security.userdetails.UserDetailsë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationFailureHandlerImpl</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleUrlAuthenticationFailureHandler</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationFailureHandlerImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">AuthenticationFailureHandlerImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDefaultFailureUrl</span><span class="token punctuation">(</span><span class="token string">"/login?error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
			<span class="token class-name">AuthenticationException</span> exception<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
		logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Login Failed... - &#123;&#125;"</span><span class="token punctuation">,</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre>

<p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ SimpleUrlAuthenticationFailureHandlerì˜ defaultFailureUrlë¥¼ ì§€ì •í•˜ë©´ SPRING_SECURITY_LAST_EXCEPTIONì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ë©´ì„œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤.  </p>
<p>AuthenticationExceptionìœ¼ë¡œ ë¡œê·¸ì¸ ì‹¤íŒ¨ì˜ ì´ìœ ë„ ì²´í¬í•  ìˆ˜ ìˆê²Œ ë˜ì£   </p>
<h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-í˜ì´ì§€"><a href="#ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-í˜ì´ì§€" class="headerlink" title="ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í˜ì´ì§€"></a>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í˜ì´ì§€</h3><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì œê³µí•´ì£¼ëŠ” ê¸°ë³¸ ë¡œê·¸ì¸ í˜ì´ì§€ ëŒ€ì‹ ì— ìš°ë¦¬ë§Œì˜ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.  </p>
<pre class="language-markup" data-language="markup"><code class="language-markup">&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
&lt;%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ko<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!--
		&lt;meta id="_csrf" name="_csrf" content="$&#123;_csrf.token&#125;" />
		&lt;meta id="_csrf_header" name="_csrf_header" content="$&#123;_csrf.headerName&#125;" />
	 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>csrfMetaTags</span> <span class="token punctuation">/></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Spring Security + JPA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>page-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Login Page <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">></span></span>with Bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container-fluid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		&lt;%-- <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;_csrf.parameterName&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;_csrf.token&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> --%>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>csrfInput</span> <span class="token punctuation">/></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ì´ë©”ì¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Email<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ë¹„ë°€ë²ˆí˜¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Password<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>
		      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remember-me<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span> Remember me
		    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;not empty SPRING_SECURITY_LAST_EXCEPTION&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;SPRING_SECURITY_LAST_EXCEPTION.message&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
		  		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>remove</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SPRING_SECURITY_LAST_EXCEPTION<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>session<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
		  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ë¡œê·¸ì¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-default<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>íšŒì›ê°€ì…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--[if lt IE 9]>
   &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js">&lt;/script>
   &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">&lt;/script>
&lt;![endif]--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p><code>SPRING_SECURITY_LAST_EXCEPTION</code>ì˜ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
<blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë ˆí¼ëŸ°ìŠ¤ì—ì„œëŠ” ë‹¨ìˆœíˆ íŒŒë¼ë¯¸í„°ì˜ ì¡´ì¬ì—¬ë¶€ì— ë”°ë¼ì„œ ì¶œë ¥í˜•íƒœë¥¼ ì§€ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ë„ ì°¸ ì•„ì‰½ìŠµë‹ˆë‹¤.  </p>
</blockquote>
<h3 id="UserDetails-amp-UserDetailsService"><a href="#UserDetails-amp-UserDetailsService" class="headerlink" title="UserDetails &amp; UserDetailsService"></a>UserDetails &amp; UserDetailsService</h3><p>ì•„ ì£„ì†¡í•©ë‹ˆë‹¤. UserDetails ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ì„œ ì„¤ëª…ì„ ì•ˆí–ˆë„¤ìš” ã… ã…   </p>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ UserDetails êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” org.springframework.security.core.userdetails.Userë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì´ë¦„ê³¼ íŒ¨ìŠ¤ì›Œë“œ ê·¸ë¦¬ê³  ê¶Œí•œë“¤ì— ëŒ€í•œ í•„ë“œë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì´ë©”ì¼ ì •ë³´ ë˜ëŠ” í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ ë“±ê³¼ ê°™ì€ ë¶€ê°€ì ì¸ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.  </p>
<p>ë”°ë¼ì„œ, UserDetails êµ¬í˜„ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. org.springframework.security.core.userdetails.User ìì²´ë„ UserDetails êµ¬í˜„ì²´ì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìƒì†ë°›ì•„ì„œ êµ¬í˜„í•´ë„ ë©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDetails</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>User</span> <span class="token punctuation">&#123;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4855890427225819382L</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> nickname<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token class-name">Date</span> createdAt<span class="token punctuation">;</span>


	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">authorities</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>createdAt <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> nickname<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> nickname<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> email<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> createdAt<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token class-name">Date</span> createdAt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>createdAt <span class="token operator">=</span> createdAt<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> <span class="token function">authorities</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>a <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
			authorities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getAuthority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> authorities<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">,</span>
			<span class="token class-name">String</span> nickname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>nickname <span class="token operator">=</span> nickname<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> username<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token keyword">boolean</span> enabled<span class="token punctuation">,</span> <span class="token keyword">boolean</span> accountNonExpired<span class="token punctuation">,</span>
			<span class="token keyword">boolean</span> credentialsNonExpired<span class="token punctuation">,</span> <span class="token keyword">boolean</span> accountNonLocked<span class="token punctuation">,</span>
			<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” Authentication.getPrincipal() ë©”ì†Œë“œë¥¼ í†µí•´ ì–»ì€ Principal ê°ì²´ë¥¼ í†µí•´ì„œë„ ë¶€ê°€ì ì¸ í•„ë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  </p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sec:</span>authentication</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>principal.email<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>

<p>org.springframework.security.core.userdetails.UserDetailsService êµ¬í˜„ì²´ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì¸ì¦ ì‹œì— ì‚¬ìš©ë©ë‹ˆë‹¤. UserRepositoryë¥¼ í†µí•´ ì˜ì†ì„±ìœ¼ë¡œ ì €ì¥ëœ ì¸ì¦ì •ë³´ë¥¼ ê²€ìƒ‰í•œ í›„ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë©´ UsernameNotFoundExceptionì„ ë˜ì§€ê³  ìˆë‹¤ë©´ UserDetails ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.  </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDetailsService</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetailsService</span> <span class="token punctuation">&#123;</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>kdev<span class="token punctuation">.</span>app<span class="token punctuation">.</span>security<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetails</span> userDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>kdev<span class="token punctuation">.</span>app<span class="token punctuation">.</span>security<span class="token punctuation">.</span>userdetails<span class="token punctuation">.</span></span>UserDetails</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> userDetails<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê·¸ëŸ°ë° ì¢€ ì´ìƒí•˜ë‹¤ê³  ëŠê»´ì§‘ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ íŒ¨ìŠ¤ì›Œë“œ ê²€ì¦ì€ ì–¸ì œí•˜ëŠ”ê²ƒì¼ê¹Œìš”? ë°”ë¡œ AuthenticationProvider êµ¬í˜„ì²´ì—ì„œ ì§„í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. AuthenticationProvider êµ¬í˜„ì²´ì—ì„œëŠ” authenticate() ë©”ì†Œë“œë¥¼ í†µí•´ì„œ Authentication ê°ì²´(UsernamePasswordAuthentication)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì¦‰, ë°˜í™˜í•˜ê¸° ì§ì „ì— íŒ¨ìŠ¤ì›Œë“œë¥¼ ê²€ì¦í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  </p>
<p>ìš°ë¦¬ëŠ” AuthenticationProviderë¥¼ ì§ì ‘ì ìœ¼ë¡œ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆê¹Œ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ëª¨ë¥´ê³  ë„˜ì–´ê°ˆ ë»” í–ˆìŠµë‹ˆë‹¤.</p>
<p><a href="http://syaku.tistory.com/286">ìƒ¤ì¿ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì»¤ìŠ¤í…€ ë¡œê·¸ì¸</a>ì´ë¼ëŠ” ê¸€ì—ì„œ ì§ì ‘ AuthenticationProviderë¥¼ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ëë§ˆì¹˜ë©°"><a href="#ëë§ˆì¹˜ë©°" class="headerlink" title="ëë§ˆì¹˜ë©°"></a>ëë§ˆì¹˜ë©°</h2><p>ìš°ë¦¬ê°€ ì•Œì•„ë³¸ ê²ƒ ì´ì™¸ì—ë„ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì´ ë” ì¡´ì¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ì†Œì¼“, RESTful APIë“±ì—ë„ ë³´ì•ˆì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê³µë¶€í•˜ë©´ì„œ ì•Œê²Œëœ ë¶€ë¶„ì¸ë°, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ì¸-ë©”ëª¨ë¦¬ ê¸°ë°˜ ì¸ì¦ ê°ì²´(inMemoryAuthentication())ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì œê³µë˜ëŠ” UserDetailsì˜ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ User ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— UserDetailsì˜ êµ¬í˜„ì²´ë¥¼ ë§Œë“ ë‹¤ í•˜ë”ë¼ë„ ì˜ë¯¸ê°€ ì—†ê²Œ ë©ë‹ˆë‹¤. ë§Œì•½, ì¸ ë©”ëª¨ë¦¬ ë°©ì‹ê³¼ ì˜ì†ì„± ë°©ì‹ì„ í˜¼ìš©í•´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì—°êµ¬í•´ë³¼ í•„ìš”ê°€ ìˆê² ìŠµë‹ˆë‹¤.  </p>
<p>ë‹¤ìŒì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ë•Œ ì¢‹ì€ í¬ìŠ¤íŠ¸ ë° ë™ì˜ìƒë“¤ì…ë‹ˆë‹¤.  </p>
<ul>
<li><a href="http://syaku.tistory.com/278">ìƒ¤ì¿ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì»¤ìŠ¤í…€ ë¡œê·¸ì¸</a>  </li>
<li><a href="http://zgundam.tistory.com/43">ì œíƒ€ê±´ë‹´ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a>  </li>
<li><a href="https://www.youtube.com/watch?v=C0BQplG7Epo&list=PLvudjKUrAA6bLu1CvgSPEKLhlIEIAJXjm">ì•„ë¼í•œì‚¬ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë”°ë¼í•´ë³´ê¸°</a>  </li>
<li><a href="https://www.youtube.com/watch?v=AiDjJzMXWmM">ë°±ê¸°ì„ ë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a>  </li>
<li><a href="http://hamait.tistory.com/325">í•˜ë§ˆë‹˜ì˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></li>
</ul>
<blockquote>
<p>ì•„ëŠ”ê²Œ ì—†ìœ¼ë‹ˆ ì‰½ê²Œ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ë¶€ë¶„ì´ ë§ìŠµë‹ˆë‹¤. ë§ì€ ì‹ ì… ê°œë°œìë“¤ì„ ì‘ì›í•©ë‹ˆë‹¤ ^ã…¡^  </p>
</blockquote>
]]></content>
      <tags>
        <tag>Spring Security</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>ì–¸ë”í† ìš° ì„ì‹œ ë””ë ‰í† ë¦¬ ì‚­ì œ ë°©ì§€</title>
    <url>/undertow-temp-dir/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/spring-projects/spring-boot/issues/9616">Tomcat does not create temporary directory used to store file uploads when it does not exist</a><br><a href="https://adunhansa.tistory.com/209">ìŠ¤í”„ë§ ë¶€íŠ¸ íŒŒì¼ ì—…ë¡œë“œ ì—ëŸ¬ The temporary upload location []  is not valid</a></p>
</blockquote>
<p>ì¼ë°˜ì ìœ¼ë¡œ ìì£¼ ë°œìƒí•˜ëŠ” ìƒí™©ì€ ì•„ë‹ˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì„ì‹œ ë””ë ‰í† ë¦¬ì— ëŒ€í•œ ì‚­ì œ ë¬¸ì œë¡œ ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì— ëŒ€í•´ ì„ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ <code>NoSuchFileException</code>ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì„ì‹œ ë””ë ‰í† ë¦¬ ê²½ë¡œì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì¼ì • ê¸°ê°„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° ì‚­ì œí•˜ë„ë¡ ë˜ì–´ìˆëŠ” ë¶€ë¶„ìœ¼ë¡œ ì¸í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŒŒì¼ ì—…ë¡œë“œê°€ ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì²­ë˜ì§€ ì•ŠëŠ” í•œ ë©€í‹°íŒŒíŠ¸ì— ëŒ€í•œ ì„ì‹œ íŒŒì¼ì´ ë§Œë“¤ì–´ì§€ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ„ í˜„ìƒì´ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì–¸ë”í† ìš°ì—ì„œëŠ” MultiPartParserDefinition$MultiPartUploadHandlerì˜ beginPartë¼ëŠ” í•¨ìˆ˜ì—ì„œ ë©€í‹°íŒŒíŠ¸ í¼ ë°ì´í„°ì— ëŒ€í•´ ì„ì‹œ íŒŒì¼ì„ ë§Œë“¤ê³  ì½ì–´ë“¤ì´ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ë©€í‹°íŒŒíŠ¸ì— ëŒ€í•œ ë¡œì¼€ì´ì…˜ ì†ì„±ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ì–¸ë”í† ìš°ëŠ” ì„œë¸”ë¦¿ ë°°í¬ ì‹œ ì‹œìŠ¤í…œì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ ê²½ë¡œì— ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¥¼ ìœ„í•œ í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p><a href="https://github.com/kdevkr/spring-demo-undertow">Spring Demo Undertow</a> ë¦¬íŒŒì§€í† ë¦¬ë¥¼ í´ë¡ í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ë°”ë¼ë³´ëŠ” íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œê°€ ë¡œê·¸ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Current</span> temp dir<span class="token operator">:</span> <span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Users</span>\<span class="token class-name">Mambo</span>\<span class="token class-name">AppData</span>\<span class="token class-name">Local</span>\<span class="token class-name">Temp</span>\undertow<span class="token punctuation">.</span><span class="token number">8080.5583604686546214060</span></code></pre>

<p>ìœ„ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” MultipartCustomizerëŠ” UndertowDeploymentInfoCustomizer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¡œ ì‹œìŠ¤í…œ ê¸°ë³¸ ì„ì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì£¼ê¸°ì ì¸ ìŠ¤ì¼€ì¤„ë¡œ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œê°€ ì‚­ì œë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  ë³µêµ¬í•©ë‹ˆë‹¤. ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì— ëŒ€í•œ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œë¥¼ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•Šì€ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ì—…ë¡œë“œë¥¼ ì‹œë„í•˜ëŠ” ê²½ìš°ì— ë”°ë¼ ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ í´ë”ë¥¼ ì‚­ì œí•  ê°€ëŠ¥ì„±ì„ ë‚´ì¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ìë™ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ ì‚­ì œë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì„ ë„ì™€ì£¼ëŠ” íŠ¸ë¦­ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>ë©€í‹°íŒŒíŠ¸ ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë§Œë“¤ì–´ì§„ ì„ì‹œ íŒŒì¼ì´ ìë™ì ìœ¼ë¡œ ì‚­ì œë˜ë¯€ë¡œ ì‹œìŠ¤í…œ ê¸°ë³¸ ì„ì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë³„ë„ì˜ íŒŒì¼ ì—…ë¡œë“œ ê²½ë¡œë¥¼ ì§€ì •í•˜ê³  ì£¼ê¸°ì ìœ¼ë¡œ ì‚­ì œë˜ì§€ ì•Šê³  ë‚¨ì•„ìˆëŠ” íŒŒì¼ë“¤ì´ ìˆëŠ”ì§€ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ ëŒ€ì•ˆì…ë‹ˆë‹¤.</p>
</blockquote>
]]></content>
      <tags>
        <tag>MultiPartParserDefinition</tag>
        <tag>MultipartConfigElement</tag>
        <tag>UndertowDeploymentInfoCustomizer</tag>
      </tags>
  </entry>
  <entry>
    <title>Tracing Handshake Websocket With Undertow</title>
    <url>/undertow-websocket-tracing/</url>
    <content><![CDATA[<blockquote>
<p>Handshake failed due to invalid Upgrade header: null</p>
</blockquote>
<p>ë³¸ ê¸€ì€ ìœ„ì™€ ê°™ì€ ì›¹ ì†Œì¼“ ì—°ê²° ì‹œì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜¤ë¥˜ ë¡œê·¸ê°€ ë°œìƒí•œ ê±´ì— ëŒ€í•œ ê´€ë ¨ ë‚´ìš©ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ê²ƒ ì…ë‹ˆë‹¤. ì´ ì˜¤ë¥˜ ë¡œê·¸ëŠ” ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ DefaultHandshakeHandlerë¥¼ í†µí•´ í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì›¹ ì†Œì¼“ ì—°ê²°ì— ëŒ€í•´ ì˜¤ë¥˜ ë¡œê·¸ë¡œ ê¸°ë¡í•˜ë„ë¡ ë˜ì–´ìˆëŠ”ë° Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Connection: Upgrade<br>Upgrade: websocket</p>
</blockquote>
<p>ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ì†Œì¼“ ì—°ê²°ì€ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism">Protocol upgrade mechanism</a>ìœ¼ë¡œ HTTP í†µì‹ ì— ëŒ€í•´ ì»¤ë„¥ì…˜ì„ ì „í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ëŠ”ë° ì„œë²„ì—ì„œëŠ” ì›¹ì†Œì¼“ ì—”ë“œí¬ì¸íŠ¸ì— í•´ë‹¹í•˜ëŠ” ìš”ì²­ì— ëŒ€í•´ì„œëŠ” Upgrade í—¤ë”ë¥¼ í™•ì¸í•˜ê³  websocket ì´ ì „ë‹¬ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
<h2 id="ì›¹ì†Œì¼“-í”„ë¡ì‹œ"><a href="#ì›¹ì†Œì¼“-í”„ë¡ì‹œ" class="headerlink" title="ì›¹ì†Œì¼“ í”„ë¡ì‹œ"></a>ì›¹ì†Œì¼“ í”„ë¡ì‹œ</h2><p>ì‹œìŠ¤í…œì´ ë™ì‘í•˜ëŠ” ì¸í”„ë¼ í™˜ê²½ì€ AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” <a href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">Elastic Load Balancing ê¸°ëŠ¥</a>ì— ë”°ë¥´ë©´ ALB, NLB ëª¨ë‘ ì›¹ì†Œì¼“ì„ ì§€ì›í•œë‹¤ê³  ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì›¹ì†Œì¼“ ì—°ê²°ì— ì œí•œì ì¸ í™˜ê²½ì€ ì•„ë‹™ë‹ˆë‹¤. í˜„ì¬ ì¡°ì§ì—ì„œ í”Œë«í¼ìœ¼ë¡œì¨ ì œê³µí•˜ëŠ” í™˜ê²½ì€ EC í‚¤ ê¸°ë°˜ì˜ ì¸ì¦ì„œì˜ ì œì•½ì‚¬í•­ìœ¼ë¡œ NLBë¥¼ ì‚¬ìš©í•´ì„œ TCP í”„ë¡ì‹œë¥¼ ìˆ˜í–‰í•˜ê³  SSL ì˜¤í”„ë¡œë“œëŠ” Nginxì—ì„œ ìˆ˜í–‰í•œ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ íŠ¸ë˜í”½ì´ ì „ë‹¬ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.</p>
<p>ë‹¤ë§Œ, ìœ„ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ê³  ì•ˆë‚´ëœ íŠ¹ì • ê³ ê°ì´ ì§ì ‘ êµ¬ì„±í•˜ëŠ” í™˜ê²½ì—ì„œëŠ” ELB ë ˆë²¨ì—ì„œ SSL ì˜¤í”„ë¡œë“œë¥¼ ìˆ˜í–‰í•œ í›„ì˜ íŠ¸ë˜í”½ë§Œ Nginxë¡œ ì „ë‹¬ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ í”„ë¡ì‹œë˜ë¯€ë¡œ ì•½ê°„ì˜ ìš”ì²­ì´ ì „ë‹¬ë˜ëŠ” ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤. ë”°ë¼ì„œ, ELB ë ˆë²¨ì—ì„œ íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ Upgrade í—¤ë”ê°€ ìœ ì‹¤ë  ê°€ëŠ¥ì„±ë„ ì˜ì‹¬í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<blockquote>
<p>ê° í™˜ê²½ì˜ Nginxì—ëŠ” <a href="http://nginx.org/en/docs/http/websocket.html">Upgarde í—¤ë”ì— ëŒ€í•œ í”„ë¡ì‹œ êµ¬ì„±</a>ì— ë”°ë¼ Upgarde í—¤ë” ê°’ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬ë˜ë„ë¡ $http_upgrade ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="íƒ€ì„ì•„ì›ƒ"><a href="#íƒ€ì„ì•„ì›ƒ" class="headerlink" title="íƒ€ì„ì•„ì›ƒ"></a>íƒ€ì„ì•„ì›ƒ</h3><p>ì¼ë°˜ì ìœ¼ë¡œ AWS í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ELBë¥¼ ì‚¬ìš©í•  ë•Œ ì›¹ì†Œì¼“ ì—°ê²° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” <a href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/application-load-balancers.html#load-balancer-attributes">ELB ë¡œë“œë°¸ëŸ°ì„œ ì†ì„±</a>ì˜ idle_timeout.timeout_seconds ê¸°ë³¸ê°’ì´ 60ì´ˆ ì´ì–´ì„œ ë°œìƒí•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” íƒ€ì„ì•„ì›ƒì„ 90ì´ˆë¡œ ì„¤ì •ë˜ì–´ ì›¹ ì†Œì¼“ ì—°ê²°ì— ëŒ€í•œ ë¶€ë¶„ì€ ì •ìƒì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.</p>
<blockquote>
<p>í´ë¼ì´ì–¸íŠ¸ì˜ ì´ˆê¸° ì—°ê²°ì„ ì œì™¸í•˜ê³ ëŠ” ì„œë²„ì—ì„œ 1ë¶„ë§ˆë‹¤ ìŠ¤ì¼€ì¤„ì— ì˜í•´ ì–´ë– í•œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ”ë° ì„œë²„ê°€ ì „ë‹¬í•˜ëŠ” íƒ€ì´ë° ìƒ 60ì´ˆ ì´ë‚´ì— ì „ë‹¬ë˜ëŠ” íŠ¸ë˜í”½ì´ ì—†ë‹¤ê³  íŒë‹¨ë˜ì–´ ì—°ê²°ì´ í•´ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h3 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h3><p>ì¼ë°˜ì ì¸ ì›¹ ìš”ì²­ì€ HTTP2ë¡œ ì—°ê²°ë  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆëŠ”ë° ì›¹ì†Œì¼“ì— ëŒ€í•œ ì—°ê²°ì— ëŒ€í•´ì„œëŠ” HTTP 1.1ì˜ ì—…ê·¸ë ˆì´ë“œ ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">--include</span> <span class="token punctuation">\</span>
     --no-buffer <span class="token punctuation">\</span>
     <span class="token parameter variable">--http1.1</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--location</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Connection: Upgrade"</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Upgrade: websocket"</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Host: example.com"</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Origin: https://example.com"</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ=="</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--header</span> <span class="token string">"Sec-WebSocket-Version: 13"</span> <span class="token punctuation">\</span>
     https://example.com/websocket/server/sessionid/websocket</code></pre>

<p>ê·¸ëŸ°ë° ìœ„ cURL ëª…ë ¹ì–´ì—ì„œ â€“http1.1 ì˜µì…˜ì„ ì œì™¸í•˜ë©´ Upgarde í—¤ë”ì— websocketì— ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ìƒí™©ì´ ë°œìƒí•¨ì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ê²°êµ­ ì¼ë°˜ì ì¸ ë¸Œë¼ìš°ì €ë¥¼ í†µí•œ ìš”ì²­ì´ ì•„ë‹ˆë¼ íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì›¹ì†Œì¼“ ì—°ê²°ì„ ì‹œë„í•  ê°€ëŠ¥ì„±ë„ ìˆë‹¤ëŠ” ì´ì•¼ê¸° ì…ë‹ˆë‹¤.</p>
<blockquote>
<p><a href="https://github.com/websockets/wscat">wscat</a> ë˜ëŠ” <a href="https://learning.postman.com/docs/sending-requests/websocket/websocket/">postman</a> ìœ¼ë¡œë„ ì›¹ ì†Œì¼“ ì—°ê²°ì„ ì‹œë„í•´ë³´ì•˜ì§€ë§Œ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ìŠ¤í”„ë§-ì›¹-ì†Œì¼“"><a href="#ìŠ¤í”„ë§-ì›¹-ì†Œì¼“" class="headerlink" title="ìŠ¤í”„ë§ ì›¹ ì†Œì¼“"></a>ìŠ¤í”„ë§ ì›¹ ì†Œì¼“</h2><p>ì‹œìŠ¤í…œ ì…ì¥ì—ì„œëŠ” ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì›¹ì†Œì¼“ ì—°ê²°ì´ ìš”ì²­ë˜ëŠ” ë¶€ë¶„ì´ë¯€ë¡œ í•´ë‹¹ ì˜¤ë¥˜ ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ì–´ë–»ê²Œ ìš”ì²­ë˜ì—ˆëŠ”ê°€ë¥¼ ê²€í† í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì´ ì—†ìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ ìš”ì²­ ì •ë³´ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ì°¾ì•„ë³´ë„ë¡ í•©ì‹œë‹¤. </p>
<h3 id="RequestUpgradeStrategy"><a href="#RequestUpgradeStrategy" class="headerlink" title="RequestUpgradeStrategy"></a>RequestUpgradeStrategy</h3><p>RequestUpgradeStrategyëŠ” HTTP ìš”ì²­ì— ëŒ€í•´ì„œ ì›¹ ì†Œì¼“ ì—°ê²°ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ê¸° ìœ„í•œ ì „ëµì´ë©° ì–¸ë”í† ìš°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ UndertowRequestUpgradeStrategyê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. </p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRequestUpgradeStrategy</span> <span class="token keyword">extends</span> <span class="token class-name">UndertowRequestUpgradeStrategy</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">upgradeInternal</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span> selectedProtocol<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Extension</span><span class="token punctuation">></span></span> selectedExtensions<span class="token punctuation">,</span> <span class="token class-name">Endpoint</span> endpoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">HandshakeFailureException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// NOTE: í•¸ë“œì‰ì´í¬ ê³¼ì •ì—ì„œ ê²€ì¦ëœ ìš”ì²­ì— ëŒ€í•´ì„œ ì—…ê·¸ë ˆì´ë“œë¥¼ ìˆ˜í–‰í•œë‹¤.</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">upgradeInternal</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> selectedProtocol<span class="token punctuation">,</span> selectedExtensions<span class="token punctuation">,</span> endpoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì²˜ëŸ¼ ì—…ê·¸ë ˆì´ë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•´ ë¶€ê°€ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ë§Œ DefaultHandshakeHandler ë¼ëŠ” í´ë˜ìŠ¤ì—ì„œ upgradeInternal í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ìœ„ì¹˜ë¥¼ ì‚´í´ë³´ë©´ ì›¹ ì†Œì¼“ ì—°ê²° ìš”ì²­ì— ëŒ€í•´ì„œ ê²€ì¦ì„ ìˆ˜í–‰í•˜ê³ ë‚˜ì„œ ë§ˆì§€ë§‰ì— upgradeInternal í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ë³¸ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•ŒëŠ” ìš”ì²­ ì •ë³´ë¥¼ íŒŒì•…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<h3 id="DefaultHandshakeHandler"><a href="#DefaultHandshakeHandler" class="headerlink" title="DefaultHandshakeHandler"></a>DefaultHandshakeHandler</h3><p>DefaultHandshakeHandlerëŠ” ìŠ¤í”„ë§ ì›¹ ì†Œì¼“ ëª¨ë“ˆì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì›¹ ì†Œì¼“ ì—°ê²°ì„ ìˆ˜í–‰í•˜ëŠ” í•¸ë“¤ëŸ¬ë¡œ HandshakeHandlerë¡œ ë“±ë¡ëœ ë¹ˆì´ ì—†ë‹¤ë©´ ë‚´ë¶€ì ìœ¼ë¡œ DefaultHandshakeHandlerë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì•ì„œ RequestUpgradeStrategyë¥¼ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ì´ìœ ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ í•¸ë“œì‰ì´í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AbstractHandshakeHandler</span> <span class="token keyword">implements</span> <span class="token class-name">HandshakeHandler</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">doHandshake</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">,</span>
			<span class="token class-name">WebSocketHandler</span> wsHandler<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> attributes<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">HandshakeFailureException</span> <span class="token punctuation">&#123;</span>

		<span class="token class-name">WebSocketHttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocketHttpHeaders</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Processing request "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" with headers="</span> <span class="token operator">+</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span> <span class="token operator">!=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">METHOD_NOT_ALLOWED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				response<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAllow</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isErrorEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Handshake failed due to unexpected HTTP method: "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">"WebSocket"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getUpgrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>headers<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Upgrade"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>headers<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"upgrade"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token function">handleInvalidConnectHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isWebSocketVersionSupported</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token function">handleWebSocketVersionNotSupported</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isValidOrigin</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token class-name">String</span> wsKey <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>wsKey <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isErrorEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Missing \"Sec-WebSocket-Key\" header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
				response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">BAD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HandshakeFailureException</span><span class="token punctuation">(</span>
					<span class="token string">"Response update failed during upgrade to WebSocket: "</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>

		<span class="token class-name">String</span> subProtocol <span class="token operator">=</span> <span class="token function">selectProtocol</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> requested <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">getSecWebSocketExtensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> supported <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>requestUpgradeStrategy<span class="token punctuation">.</span><span class="token function">getSupportedExtensions</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebSocketExtension</span><span class="token punctuation">></span></span> extensions <span class="token operator">=</span> <span class="token function">filterRequestedExtensions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> requested<span class="token punctuation">,</span> supported<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Principal</span> user <span class="token operator">=</span> <span class="token function">determineUser</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> wsHandler<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Upgrading to WebSocket, subProtocol="</span> <span class="token operator">+</span> subProtocol <span class="token operator">+</span> <span class="token string">", extensions="</span> <span class="token operator">+</span> extensions<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>requestUpgradeStrategy<span class="token punctuation">.</span><span class="token function">upgrade</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> subProtocol<span class="token punctuation">,</span> extensions<span class="token punctuation">,</span> user<span class="token punctuation">,</span> wsHandler<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>AbstractHandshakeHandler í´ë˜ìŠ¤ì— ëŒ€í•´ ë¡œê·¸ ë ˆë²¨ì„ Traceë¡œ ì„¤ì •í•˜ë©´ ìš”ì²­ ì •ë³´ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ìˆì§€ë§Œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ ê¸°ë¡í•˜ë¯€ë¡œ ë¬¸ì œê°€ ë°œìƒí–ˆì„ë•Œë§Œ ìš”ì²­ ì •ë³´ë¥¼ ë‚¨ê¸¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
</blockquote>
<h4 id="AbstractHandshakeHandler-handleInvalidUpgradeHeader"><a href="#AbstractHandshakeHandler-handleInvalidUpgradeHeader" class="headerlink" title="AbstractHandshakeHandler.handleInvalidUpgradeHeader"></a>AbstractHandshakeHandler.handleInvalidUpgradeHeader</h4><p>ì•ì„œ doHandshake í•¨ìˆ˜ë¥¼ ì‚´í´ë³¸ ê²°ê³¼ Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°ì—ëŠ” handleInvalidUpgradeHeader í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ìš°ë¦¬ëŠ” handleInvalidUpgradeHeader í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•˜ì—¬ ìš”ì²­ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì˜¤ë¥˜ ë¡œê·¸ë¡œ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomHandshakeHandler</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultHandshakeHandler</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span><span class="token class-name">ServerHttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServerHttpResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// NOTE: Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ì—ˆì„ë•Œ í˜¸ì¶œëœë‹¤.</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Method: &#123;&#125;, URI: &#123;&#125;, Principal: &#123;&#125;, Headers: &#123;&#125;"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getMethodValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">handleInvalidUpgradeHeader</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œëŠ” Upgrade í—¤ë”ì— ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ ì „ë‹¬ë˜ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œ ì›ì¸ì„ íŒŒì•…í•˜ê¸°ëŠ” ì–´ë µìŠµë‹ˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ë³¸ ë¬¸ì œê°€ ë‹¤ì‹œ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ì •ë³´ë¡œ ìš”ì²­ë˜ì—ˆëŠ”ì§€ì— ëŒ€í•œ ë¡œê·¸ê°€ ê¸°ë¡ë˜ì—ˆìœ¼ë¯€ë¡œ ì›ì¸ íŒŒì•…ì„ ìœ„í•œ ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h2><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism">Protocol upgrade mechanism</a></li>
<li><a href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">Elastic Load Balancing ê¸°ëŠ¥</a></li>
<li><a href="http://nginx.org/en/docs/http/websocket.html">WebSocket proxying</a></li>
</ul>
]]></content>
      <tags>
        <tag>Undertow</tag>
        <tag>WebSocket</tag>
      </tags>
  </entry>
  <entry>
    <title>ì–¸ë”í† ìš°</title>
    <url>/undertow/</url>
    <content><![CDATA[<p>ìë°” ì–¸ì–´ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ê²½ìš°ì— ëŒ€ë¶€ë¶„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ë˜ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì— ì§ì ‘ ìë°” ì„œë¸”ë¦¿ì„ ì‘ì„±í•˜ì—¬ ì•„íŒŒì¹˜ í†°ìº£ì´ë‚˜ ì–¸ë”í† ìš°ì™€ ê°™ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì—¬ ë°°í¬í•´ë³´ëŠ” ê²½í—˜ì„ í•˜ëŠ” ì‹ ì… ê°œë°œìê°€ ë§ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤. ê·¸ë˜ì„œ ì´ˆë³´ ê°œë°œìë“¤ì„ ìœ„í•´ ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ë¡œ ì–¸ë”í† ìš° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ê³  ê°„ë‹¨í•˜ê²Œ Hello Worldë¥¼ ì°ì–´ë³´ëŠ” ê²ƒì„ ê³µìœ í•˜ê³ ì í•œë‹¤.</p>
<h4 id="ì¸í…”ë¦¬ì œì´-ì»¤ë®¤ë‹ˆí‹°-ì—ë””ì…˜-ì„¤ì¹˜í•˜ê¸°"><a href="#ì¸í…”ë¦¬ì œì´-ì»¤ë®¤ë‹ˆí‹°-ì—ë””ì…˜-ì„¤ì¹˜í•˜ê¸°" class="headerlink" title="ì¸í…”ë¦¬ì œì´ ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ ì„¤ì¹˜í•˜ê¸°"></a>ì¸í…”ë¦¬ì œì´ ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ ì„¤ì¹˜í•˜ê¸°</h4><p>ì¸í…”ë¦¬ì œì´ ì»¤ë®¤ë‹ˆí‹° ì—ë””ì…˜ì€ ìŠ¤í”„ë§ì— ëŒ€í•œ ìœ ìš©í•œ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ëŠ” ì•Šì§€ë§Œ ë©”ì´ë¸ì´ë‚˜ ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ì— ëŒ€í•´ì„œëŠ” ì§€ì›í•˜ê³  ìˆë‹¤. ë¹Œë“œ ì‹œìŠ¤í…œì€ Gradleë¡œ ì„ íƒí•˜ê³  Download JDKë¥¼ í†µí•´ì„œ Temurin 17ì„ ì„ íƒí•˜ì—¬ ë‹¤ìš´ë¡œë“œ í•˜ì. ê·¸ëŸ¬ë©´ JUnitì´ ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ëœ ê·¸ë˜ë“¤ í”„ë¡œì íŠ¸ê°€ ìƒì„±ëœë‹¤. </p>
<p><img data-src="/images/posts/undertow/01.png"><br><img data-src="/images/posts/undertow/02.png"></p>
<h4 id="ì–¸ë”í† ìš°-íŒ¨í‚¤ì§€-ì¶”ê°€í•˜ê¸°"><a href="#ì–¸ë”í† ìš°-íŒ¨í‚¤ì§€-ì¶”ê°€í•˜ê¸°" class="headerlink" title="ì–¸ë”í† ìš° íŒ¨í‚¤ì§€ ì¶”ê°€í•˜ê¸°"></a>ì–¸ë”í† ìš° íŒ¨í‚¤ì§€ ì¶”ê°€í•˜ê¸°</h4><p><a href="https://central.sonatype.com/search?smo=true&q=io.undertow&namespace=io.undertow">ë©”ì´ë¸ ì¤‘ì•™ ì €ì¥ì†Œ</a>ì— ë“±ë¡ë˜ì–´ ìˆëŠ” íŒ¨í‚¤ì§€ ì¤‘ì—ì„œ undertow-coreì™€ undertow-servlet ëª¨ë“ˆì„ ì¶”ê°€í•˜ì. </p>
<pre class="language-gradle" data-language="gradle"><code class="language-gradle"><span class="token keyword">dependencies</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">implementation</span> <span class="token string">'io.undertow:undertow-core:2.3.4.Final'</span>
    <span class="token keyword">implementation</span> <span class="token string">'io.undertow:undertow-servlet:2.3.4.Final'</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="Hello-World-í•¸ë“¤ëŸ¬-ì‘ì„±í•˜ê¸°"><a href="#Hello-World-í•¸ë“¤ëŸ¬-ì‘ì„±í•˜ê¸°" class="headerlink" title="Hello World í•¸ë“¤ëŸ¬ ì‘ì„±í•˜ê¸°"></a>Hello World í•¸ë“¤ëŸ¬ ì‘ì„±í•˜ê¸°</h4><p><a href="https://undertow.io/undertow-docs/undertow-docs-2.1.0/index.html#undertow-core">ì–¸ë”í† ìš° ê³µì‹ ë¬¸ì„œ</a>ì— ë”°ë¼ ê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±ë˜ì–´ìˆëŠ” Main í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•´ì„œ Hello Worldë¥¼ ì¶œë ¥í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•´ë³´ì. ê·¸ë¦¬ê³  Main í´ë˜ìŠ¤ ì¢Œì¸¡ì— í‘œì‹œëœ í™”ì‚´í‘œë¥¼ ëˆŒëŸ¬ì„œ ë””ë²„ê·¸ ëª¨ë“œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì. íŠ¹íˆ ë°±ì—”ë“œ ê°œë°œìë¼ë©´ ë¬´ì¡°ê±´ ë””ë²„ê·¸ ëª¨ë“œë¡œ ì‹¤í–‰í•˜ëŠ” ìŠµê´€ì„ ë“¤ì—¬ì•¼í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span></span><span class="token class-name">Undertow</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Headers</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Undertow</span> server <span class="token operator">=</span> <span class="token class-name">Undertow</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addHttpListener</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token string">"localhost"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHandler</span><span class="token punctuation">(</span>exchange <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                    exchange<span class="token punctuation">.</span><span class="token function">getResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Headers</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">,</span> <span class="token string">"text/plain"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    exchange<span class="token punctuation">.</span><span class="token function">getResponseSender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="ì–¸ë”í† ìš°-HTTP-í•¸ë“¤ëŸ¬-êµì²´í•˜ê¸°"><a href="#ì–¸ë”í† ìš°-HTTP-í•¸ë“¤ëŸ¬-êµì²´í•˜ê¸°" class="headerlink" title="ì–¸ë”í† ìš° HTTP í•¸ë“¤ëŸ¬ êµì²´í•˜ê¸°"></a>ì–¸ë”í† ìš° HTTP í•¸ë“¤ëŸ¬ êµì²´í•˜ê¸°</h4><p>í¬ë¡¬ ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•´ì„œ localhost:8080ì„ ì…ë ¥í•˜ë©´ Hello Worldê°€ ì¶œë ¥ëœë‹¤. ê·¸ëŸ¬ë‚˜, ì¸í…”ë¦¬ì œì´ ì½˜ì†”ì— í‘œì‹œëœ ê²ƒì„ ì‚´í´ë³´ë©´ Hello Worldê°€ ë‘ë²ˆ ì¶œë ¥ë  ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ë¸Œë¼ìš°ì €ë¡œ í•œë²ˆ ì ‘ê·¼í–ˆì„ ë¿ì¸ë° ì™œ ë‘ë²ˆ ì¶œë ¥ë˜ëŠ”ì§€ ì˜ì•„í•œ ê²ƒì„ ì¸ì§€í•´ì•¼í•œë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ì€ ë¬¸ì œ íŒŒì•…ì˜ ì‹œì‘ì ì´ë‹¤. (ì•„ì§ì€ ìµìˆ™ì¹˜ ì•Šê² ì§€ë§Œ) F12ë¥¼ ëˆŒëŸ¬ ê°œë°œì ë„êµ¬ë¥¼ í‘œì‹œí•œ í›„ Network íƒ­ì„ ëˆ„ë¥¸ ë’¤ F5ë¥¼ ëˆŒëŸ¬ì„œ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ë³´ë©´ localhost ì´ì™¸ì— favicon.icoë¼ëŠ” ê²ƒì´ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ íŒŒë¹„ì½˜ì´ë¼ëŠ” ê²ƒì€ ì›¹ ì‚¬ì´íŠ¸ íƒ­ ì™¼ìª½ì— í‘œì‹œë˜ëŠ” ì‘ì€ ë¡œê³ ë¥¼ ì˜ë¯¸í•œë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ, ë¸Œë¼ìš°ì €ëŠ” íŒŒë¹„ì½˜ í‘œì‹œë¥¼ ìœ„í•´ ìë™ìœ¼ë¡œ ì¶”ê°€ ìš”ì²­í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤. ë” ìì„¸í•˜ê²Œ ì‚´í´ë³´ë©´ ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œëŒ€ë¡œ text&#x2F;plain íƒ€ì…ì— Hello Worldê°€ ì „ë‹¬ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>
<p><img data-src="/images/posts/undertow/03.png"></p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span></span><span class="token class-name">Handlers</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span></span><span class="token class-name">Undertow</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Headers</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Undertow</span> server <span class="token operator">=</span> <span class="token class-name">Undertow</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addHttpListener</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token string">"localhost"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHandler</span><span class="token punctuation">(</span><span class="token class-name">Handlers</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addExactPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> exchange <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
                            exchange<span class="token punctuation">.</span><span class="token function">getResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Headers</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">,</span> <span class="token string">"text/plain"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            exchange<span class="token punctuation">.</span><span class="token function">getResponseSender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ê²°êµ­, ê¸°ì¡´ ì½”ë“œì˜ í•¸ë“¤ëŸ¬ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ Hello Worldë¥¼ ì¶œë ¥í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ëœ ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ê²ƒì„ ë©”ì¸ ìš”ì²­ì— ëŒ€í•´ì„œë§Œ Hello Worldë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë„ë¡ í•¸ë“¤ëŸ¬ë¥¼ êµì²´í•´ë³´ì. ìœ„ì™€ ê°™ì´ PathHandlerë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ê²½ë¡œë¥¼ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ë¥¼ ë³„ë„ë¡œ ë“±ë¡í•  ìˆ˜ ìˆê²Œ ì œê³µí•œë‹¤. ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•œ í›„ ë‹¤ì‹œ ì‹œì‘í•´ë³´ë©´ favicon.icoì— ëŒ€í•´ì„œëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ 404ë¼ëŠ” ì˜ë¯¸ë¡œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ì—ˆê³  ì¸í…”ë¦¬ì œì´ ì½˜ì†”ì—ëŠ” ì˜ë„í•œ ê²ƒì²˜ëŸ¼ Hello Worldê°€ ë‹¨ í•œë²ˆ ì¶œë ¥ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>
<h4 id="ì–¸ë”í† ìš°-ì„œë¸”ë¦¿-ì»¨í…Œì´ë„ˆë¡œ-ì „í™˜í•˜ê¸°"><a href="#ì–¸ë”í† ìš°-ì„œë¸”ë¦¿-ì»¨í…Œì´ë„ˆë¡œ-ì „í™˜í•˜ê¸°" class="headerlink" title="ì–¸ë”í† ìš° ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¡œ ì „í™˜í•˜ê¸°"></a>ì–¸ë”í† ìš° ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¡œ ì „í™˜í•˜ê¸°</h4><p>ì•ì„ , Hello World ì¶œë ¥ì€ ì–¸ë”í† ìš°ì˜ ì½”ì–´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í–ˆì„ ë¿ì´ë‹¤. ìš°ë¦¬ëŠ” ì²˜ìŒì— ì„œë¸”ë¦¿ ëª¨ë“ˆê¹Œì§€ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ìë°” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „í™˜í•´ë³´ì. ì–¸ë”í† ìš° ì„œë¸”ë¦¿ ëª¨ë“ˆì˜ ì‚¬ìš©ë²•ë„ <a href="https://undertow.io/undertow-docs/undertow-docs-2.1.0/index.html#undertow-servlet">ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ </a>í•˜ë©´ ëœë‹¤. ì–´ëŠì •ë„ ëˆˆì¹˜ì±ˆ ì‚¬ëŒë“¤ì´ ìˆë‹¤ë©´ MVC íŒ¨í„´ì„ ë“¤ì–´ë´¤ê±°ë‚˜ DispatcherServletì˜ ìš©ë„ë¥¼ ì•„ëŠ” ê²ƒì¼ ê²ƒì´ë‹¤. í˜„ì¬ëŠ” ë³¸ë˜ ìš©ë„ê°€ ì•„ë‹Œ Hello Worldë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•œ ì„œë¸”ë¦¿ì´ê¸°ì— ëª°ë¼ë„ ë˜ë¯€ë¡œ ê¶ê¸ˆí•œ ì‚¬ëŒë“¤ë§Œ ì°¾ì•„ë³´ì.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span></span><span class="token class-name">Handlers</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span></span><span class="token class-name">Undertow</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Servlets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">DeploymentInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">DeploymentManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DeploymentInfo</span> deployment <span class="token operator">=</span> <span class="token class-name">Servlets</span><span class="token punctuation">.</span><span class="token function">deployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setClassLoader</span><span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setContextPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDeploymentName</span><span class="token punctuation">(</span><span class="token string">"main.war"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addServlets</span><span class="token punctuation">(</span><span class="token class-name">Servlets</span><span class="token punctuation">.</span><span class="token function">servlet</span><span class="token punctuation">(</span><span class="token string">"DispatcherServlet"</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">DeploymentManager</span> manager <span class="token operator">=</span> <span class="token class-name">Servlets</span><span class="token punctuation">.</span><span class="token function">defaultContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addDeployment</span><span class="token punctuation">(</span>deployment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        manager<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Undertow</span> server <span class="token operator">=</span> <span class="token class-name">Undertow</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addHttpListener</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token string">"localhost"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHandler</span><span class="token punctuation">(</span><span class="token class-name">Handlers</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addExactPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> manager<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>undertow<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Headers</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        resp<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token class-name">Headers</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"text/plain"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì•ì„  ì½”ë“œì˜ ë¬¸ì œì ì€ ë””ìŠ¤íŒ¨ì²˜ì„œë¸”ë¦¿ì´ ë³¸ ìš©ë„ê°€ ì•„ë‹ˆë¯€ë¡œ ì‹œê°„ì´ ë§ë‹¤ë©´ ë³¸ì¸ì´ ìƒê°í•˜ëŠ” ë°©ì‹ëŒ€ë¡œ ê³ ì³ë³´ëŠ” ê²ƒë„ ì¶”ì²œí•œë‹¤. ë§ì€ ì‹ ì… ê°œë°œìë“¤ì´ ì˜¤í•´í•˜ëŠ” ê²ƒì€ íš¨ìœ¨ì ì¸ ê´€ì ì—ì„œ ì½”ë“œ ì‘ì„±ì— ëŒ€í•´ ì •ë‹µì´ ìˆë‹¤ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤ëŠ” ê²ƒì¼ì§€ ëª¨ë¥´ê² ë‹¤. ìœ ìš©í•œ ì •ë³´ì¼ì§€ëŠ” ëª¨ë¥´ê² ìœ¼ë‚˜ ëˆ„êµ°ê°€ì—ê²ŒëŠ” ë„ì›€ì´ ë˜ëŠ” ê¸€ì´ì—ˆìœ¼ë©´ í•œë‹¤.</p>
]]></content>
  </entry>
  <entry>
    <title>ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ì™€ ì‹œê°„ ì •ë°€ë„</title>
    <url>/unix-timestamp/</url>
    <content><![CDATA[<p>ê° ë‚˜ë¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ì‹œê°„ì€ ë‹¤ë¥´ê³  ë™ì¼í•œ ë‚˜ë¼ì—ì„œë„ ì—¬ëŸ¬ê°€ì§€ ì‹œê°„ ê¸°ì¤€ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ê°œë°œìë“¤ì€ ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ ì‹œê°„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©° ì „ì„¸ê³„ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ì‹œê°„ìœ¼ë¡œ ì •ì˜ëœ ê²ƒì„ ë”°ë¼ì•¼í•©ë‹ˆë‹¤. ì„¸ê³„í˜‘ì •ì‹œë¼ê³  ë¶€ë¥´ëŠ” UTCëŠ” 1970ë…„ 1ì›” 1ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •í•œ ì‹œê°„ìœ¼ë¡œ ë³´í†µ ìœ ë‹‰ìŠ¤ ì‹œê°„ ë˜ëŠ” ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ë¼ê³  í•©ë‹ˆë‹¤.</p>
<h3 id="ìœ ë‹‰ìŠ¤-ì‹œê°„"><a href="#ìœ ë‹‰ìŠ¤-ì‹œê°„" class="headerlink" title="ìœ ë‹‰ìŠ¤ ì‹œê°„"></a>ìœ ë‹‰ìŠ¤ ì‹œê°„</h3><p>ê¸°ë³¸ì ìœ¼ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ì— ëŒ€í•´ì„œ ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§€ëŠ” ì •ìˆ˜ë¡œ í‘œí˜„í•œ ê°’ì„ ìœ ë‹‰ìŠ¤ ì‹œê°„(Unix Epoch) ë˜ëŠ” ìœ ë‹‰ìŠ¤ íƒ€ì„ìŠ¤íƒ¬í”„ë¼ê³  í•©ë‹ˆë‹¤. PostgreSQL ì—ì„œëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ ìœ í˜•ì˜ ì»¬ëŸ¼ì— ëŒ€í•´ì„œ EPOCH í‚¤ì›Œë“œë¥¼ í†µí•´ì„œ ì´ˆ ë‹¨ìœ„ë¡œ í™˜ì‚°ëœ ìœ ë‹‰ìŠ¤ ì‹œê°„ì„ ì¶”ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.</p>
<ul>
<li><a href="https://www.epoch101.com/#epochConvertToReadable-Container">Convert Epoch&#x2F;Unix Timestamp</a></li>
<li><a href="https://it-tools.tech/date-converter">Date-time converter</a></li>
</ul>
<h3 id="íƒ€ì„ìŠ¤íƒ¬í”„-ì •ë°€ë„"><a href="#íƒ€ì„ìŠ¤íƒ¬í”„-ì •ë°€ë„" class="headerlink" title="íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„"></a>íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„</h3><p>ìœ ë‹‰ìŠ¤ ì‹œê°„ì´ ì •ì˜ë˜ê³  ì‹œê°„ì´ í˜ëŸ¬ í˜„ì¬ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ì´ˆ ë‹¨ìœ„ê°€ ì•„ë‹Œ ë°€ë¦¬ê³  ê·¸ë¦¬ê³  ì‹¬ì§€ì–´ëŠ” ë‚˜ë…¸ì´ˆ ê¹Œì§€ì˜ ë‹¨ìœ„ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë°€ë„ë¥¼ ì§€ì›í•˜ê²Œ ë©ë‹ˆë‹¤. ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ ë˜ëŠ” ì™¸ë¶€ ì†”ë£¨ì…˜ì— ë”°ë¼ì„œ ì •ë°€ë„ í‘œí˜„ ì§€ì›ì´ ë‹¤ë¥´ë©° ì‹¬ì§€ì–´ ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì¸ KDB+ ì—ì„œì˜ <a href="https://code.kx.com/q4m3/2_Basic_Data_Types_Atoms/#25-temporal-data">ì‹œê°„ ìœ í˜•</a>ì€ 1970ë…„ 1ì›” 1ì¼ì´ ì•„ë‹Œ 2000ë…„ 1ì›” 1ì¼ì„ ê¸°ì¤€ì˜ ë‚˜ë…¸ì´ˆ ì •ë°€ë„ë¥¼ ê°€ì§€ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>
<pre class="language-q" data-language="q"><code class="language-q"><span class="token datetime number">2000.01.01</span><span class="token verb operator">=</span><span class="token number">0</span>
<span class="token number">1b</span>

<span class="token punctuation">.</span>z<span class="token punctuation">.</span>p
<span class="token datetime number">2022.09.01</span>D<span class="token datetime number">21:38:52.940</span><span class="token number">328000</span></code></pre>

<p>íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ìŠ¤ì¹¼ë¼ ì‹¤ìˆ˜ë¡œ ë³€í™˜í•´ë³´ë©´ ë‚˜ë…¸ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§„ ì •ìˆ˜ê°’ìœ¼ë¡œ í‘œí˜„ë˜ë¯€ë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ ì—°ê³„í•˜ê¸° ìœ„í•´ 1970ë…„ 1ì›” 1ì¼ ë¶€í„°ì˜ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì„¸ì–´ì§€ëŠ” ì •ìˆ˜ê°’ìœ¼ë¡œ í™˜ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1 ë‚˜ë…¸ì´ˆëŠ” 10^6 ë°€ë¦¬ì´ˆ ì…ë‹ˆë‹¤.)</p>
<pre class="language-q" data-language="q"><code class="language-q"><span class="token keyword">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token symbol">`long</span><span class="token verb operator">$</span><span class="token datetime number">2022.09.01</span>D<span class="token datetime number">21:38:52.940</span><span class="token number">328000</span><span class="token punctuation">)</span><span class="token verb operator">-</span><span class="token symbol">`long</span><span class="token verb operator">$</span><span class="token datetime number">1970.01.01</span>D<span class="token datetime number">00:00</span><span class="token punctuation">)</span><span class="token verb operator">%</span><span class="token number">1e6</span>
<span class="token number">1662068332940</span></code></pre>

<p>í˜„ì¬ ì¡°ì§ì—ì„œëŠ” ì´ˆ ë‹¨ìœ„ì˜ ìœ ë‹‰ìŠ¤ ì‹œê°„ì´ ì•„ë‹Œ ë°€ë¦¬ì´ˆë¡œ í™˜ì‚°í•œ ì •ìˆ˜ê°’ì„ í† ëŒ€ë¡œ íƒ€ì„ìŠ¤íƒ¬í”„ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì‹œìŠ¤í…œ ê°„ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ ì—¬ëŸ¬ê°€ì§€ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì™¸ë¶€ ì†”ë£¨ì…˜ê³¼ì˜ ì—°ê³„ë¥¼ ìˆ˜í–‰í•˜ë©° ë™ì‘í•˜ê²Œ ë˜ë¯€ë¡œ ê° ì‹œìŠ¤í…œì—ì„œ ì§€ì›í•˜ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ì˜ ì •ë°€ë„ í‘œí˜„ ì°¨ì´ë¡œ ì¸í•´ì„œ ì•½ê°„ì˜ ì°¨ì´ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ ê³ ë ¤í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="íƒ€ì„ìŠ¤íƒ¬í”„-í‘œí˜„"><a href="#íƒ€ì„ìŠ¤íƒ¬í”„-í‘œí˜„" class="headerlink" title="íƒ€ì„ìŠ¤íƒ¬í”„ í‘œí˜„"></a>íƒ€ì„ìŠ¤íƒ¬í”„ í‘œí˜„</h3><p>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ìš”ì²­ê³¼ ì‘ë‹µ ì‹œ ì „ë‹¬ë˜ëŠ” í˜ì´ë¡œë“œì— í¬í•¨ë˜ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ëŠ” ì–´ë–»ê²Œ í‘œí˜„í•  ìˆ˜ ìˆì„ê¹Œìš”? ì¼ë°˜ì ìœ¼ë¡œ ì‹œìŠ¤í…œ ë˜ëŠ” ê°œë°œìì˜ ì„ í˜¸ë„ì— ë”°ë¼ì„œ UTC ê¸°ì¤€ì˜ Epochë¼ëŠ” ìˆ«ì í˜•íƒœ ë˜ëŠ” RFC 3339ì˜ ISO 8601 í˜•ì‹ìœ¼ë¡œ ë¬¸ìì—´ í˜•íƒœë¡œ í‘œí˜„í•˜ê²Œ ë©ë‹ˆë‹¤. <a href="https://r.bluethl.net/how-to-design-better-apis#heading-2-use-iso-8601httpsenwikipediaorgwikiiso8601-utc-dates">ë” ë‚˜ì€ API ì„¤ê³„ ì‹œì—ëŠ” ISO 8601 UTC</a>ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤ëŠ” ê´€ì ì´ ìˆì§€ë§Œ ê°„ì„ ë¬¸ìì—´ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì—ëŠ” <a href="https://engineering.fb.com/2022/07/25/production-engineering/its-time-to-leave-the-leap-second-in-the-past/">ìœ¤ì´ˆ ë¬¸ì œ</a>ê°€ í¬í•¨ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ìœ¤ì´ˆë¥¼ ë¬´ì‹œí•œ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ìœ ë‹‰ìŠ¤ ì‹œê°„ì„ ì‚¬ìš©í• ë•Œì—ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ íŠœë¸Œì˜ ê²½ìš° ì‚¬ìš©ìì˜ ì´ë²¤íŠ¸ íŠ¸ë˜í‚¹ì„ ìœ„í•´ ë¡œê·¸ ì´ë²¤íŠ¸ë¥¼ ì „ì†¡í•  ë•Œì— ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ì •ìˆ˜ê°’ì„ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Unix Timestamp</tag>
        <tag>Unix Epoch</tag>
      </tags>
  </entry>
  <entry>
    <title>ë³´ì•ˆ ì·¨ì•½ì  (Vulnerability)</title>
    <url>/vulnerabilities/</url>
    <content><![CDATA[<p><a href="https://github.com/advisories?query=type:reviewed+ecosystem:maven">Github Advisory Database</a>ì—ëŠ” Mavenì— ëŒ€í•´ ì•½ 3800ê°œì˜ ì·¨ì•½ì  ì •ë³´ê°€ ìˆë‹¤. íšŒì‚¬ì—ì„œ ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ ì‹œìŠ¤í…œì´ êµ¬ì¶•ë˜ì–´ìˆì§€ëŠ” ì•Šì§€ë§Œ ì„ì‹œì ìœ¼ë¡œ ë‰´ë ë¦­ì„ ì ìš©í•œ í™˜ê²½ì´ ìˆì–´ APM &amp; Servicesì˜ Vulnerability Management ë©”ë‰´ì—ì„œ ë³´ì•ˆ ì·¨ì•½ì  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ìš°ì„  ì²´í¬ëœ ë³´ì•ˆ ì·¨ì•½ì ì€ 58ê°œë¡œ CRITICAL 6ê°œ, HIGH 25ê°œ, MEDIUM 21ê°œ, LOW 6ê°œ ì´ë‹¤.</p>
<h4 id="Vulnerability"><a href="#Vulnerability" class="headerlink" title="Vulnerability"></a>Vulnerability</h4><table>
<thead>
<tr>
<th>name</th>
<th>severity</th>
<th>exploitable</th>
<th>issueId</th>
</tr>
</thead>
<tbody><tr>
<td>Pivotal Spring Framework contains unsafe Java deserialization methods</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-4wrc-f8pq-fpqp">CVE-2016-1000027</a></td>
</tr>
<tr>
<td>Deserialization of Untrusted Data in org.codehaus.jackson:jackson-mapper-asl</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-c27h-mcmw-48hv">CVE-2019-10202</a></td>
</tr>
<tr>
<td>Template injection in thymeleaf-spring5</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-qcj6-jqrg-4wp2">CVE-2021-43466</a></td>
</tr>
<tr>
<td>Remote Code Execution in Spring Framework</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-36p3-wjmg-h94x">CVE-2022-22965</a></td>
</tr>
<tr>
<td>Undertow client not checking server identity presented by server certificate in https connections</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-pfcc-3g6r-8rg8">CVE-2022-4492</a></td>
</tr>
<tr>
<td>Spring Boot Security Bypass with Wildcard Pattern Matching on Cloud Foundry</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-g5h3-w546-pj7f">CVE-2023-20873</a></td>
</tr>
</tbody></table>
<details>
<summary>More</summary>

<table>
<thead>
<tr>
<th>name</th>
<th>severity</th>
<th>exploitable</th>
<th>issueId</th>
</tr>
</thead>
<tbody><tr>
<td>Pivotal Spring Framework contains unsafe Java deserialization methods</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2016-1000027</td>
</tr>
<tr>
<td>Deserialization of Untrusted Data in org.codehaus.jackson:jackson-mapper-asl</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2019-10202</td>
</tr>
<tr>
<td>Template injection in thymeleaf-spring5</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2021-43466</td>
</tr>
<tr>
<td>Remote Code Execution in Spring Framework</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2022-22965</td>
</tr>
<tr>
<td>Undertow client not checking server identity presented by server certificate in https connections</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2022-4492</td>
</tr>
<tr>
<td>Spring Boot Security Bypass with Wildcard Pattern Matching on Cloud Foundry</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td>CVE-2023-20873</td>
</tr>
<tr>
<td>Arbitrary code execution in Apache Commons BeanUtils</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2014-0114</td>
</tr>
<tr>
<td>Insecure Deserialization in Apache Commons Beanutils</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2019-10086</td>
</tr>
<tr>
<td>Improper Restriction of XML External Entity Reference in jackson-mapper-asl</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2019-10172</td>
</tr>
<tr>
<td>Deeply nested json in jackson-databind</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2020-36518</td>
</tr>
<tr>
<td>Undertow Uncontrolled Resource Consumption</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2021-3629</td>
</tr>
<tr>
<td>Uncaught Exception in jsoup</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2021-37714</td>
</tr>
<tr>
<td>Undertow vulnerable to Denial of Service (DoS) attacks</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2021-3859</td>
</tr>
<tr>
<td>jackson-databind possible Denial of Service if using JDK serialization to serialize JsonNode</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2021-46877</td>
</tr>
<tr>
<td>SnakeYaml Constructor Deserialization Remote Code Execution</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-1471</td>
</tr>
<tr>
<td>Undertow vulnerable to Dos via Large AJP request</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-2053</td>
</tr>
<tr>
<td>pgjdbc Does Not Check Class Instantiation when providing Plugin Classes</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-21724</td>
</tr>
<tr>
<td>Improper handling of case sensitivity in Spring Framework</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-22968</td>
</tr>
<tr>
<td>Denial of service in Spring Framework</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-22970</td>
</tr>
<tr>
<td>Deserialization of Untrusted Data in Gson</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-25647</td>
</tr>
<tr>
<td>Uncontrolled Resource Consumption in snakeyaml</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-25857</td>
</tr>
<tr>
<td>Partial Path Traversal in com.amazonaws:aws-java-sdk-s3</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-31159</td>
</tr>
<tr>
<td>PostgreSQL JDBC Driver SQL Injection in ResultSet.refreshRow() with malicious column names</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-31197</td>
</tr>
<tr>
<td>Apache Xalan Java XSLT library integer truncation issue when processing malicious XSLT stylesheets</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-34169</td>
</tr>
<tr>
<td>Denial of Service due to parser crash</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-40153</td>
</tr>
<tr>
<td>Uncontrolled Resource Consumption in Jackson-databind</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-42003</td>
</tr>
<tr>
<td>Uncontrolled Resource Consumption in FasterXML jackson-databind</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-42004</td>
</tr>
<tr>
<td>json stack overflow vulnerability</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2022-45688</td>
</tr>
<tr>
<td>json-smart Uncontrolled Recursion vulnerabilty</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2023-1370</td>
</tr>
<tr>
<td>Spring Framework vulnerable to denial of service</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2023-20863</td>
</tr>
<tr>
<td>Spring Boot Welcome Page Denial of Service</td>
<td>HIGH</td>
<td>FALSE</td>
<td>CVE-2023-20883</td>
</tr>
<tr>
<td>Uncontrolled Resource Consumption in XNIO</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2020-14340</td>
</tr>
<tr>
<td>Improper privilege management in elasticsearch</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2020-7019</td>
</tr>
<tr>
<td>Log entry injection in Spring Framework</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-22060</td>
</tr>
<tr>
<td>Improper Output Neutralization for Logs in Spring Framework</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-22096</td>
</tr>
<tr>
<td>Exposure of Sensitive Information to an Unauthorized Actor</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-22134</td>
</tr>
<tr>
<td>API information disclosure flaw in Elasticsearch</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-22135</td>
</tr>
<tr>
<td>Denial of Service in Elasticsearch</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-22144</td>
</tr>
<tr>
<td>undertow Race Condition vulnerability</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2021-3597</td>
</tr>
<tr>
<td>Allocation of Resources Without Limits or Throttling in Spring Framework</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-22950</td>
</tr>
<tr>
<td>Allocation of Resources Without Limits or Throttling in Spring Framework</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-22971</td>
</tr>
<tr>
<td>jsoup may not sanitize code injection XSS attempts if SafeList.preserveRelativeLinks is enabled</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-36033</td>
</tr>
<tr>
<td>snakeYAML before 1.31 vulnerable to Denial of Service due to Out-of-bounds Write</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-38749</td>
</tr>
<tr>
<td>snakeYAML before 1.31 vulnerable to Denial of Service due to Out-of-bounds Write</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-38750</td>
</tr>
<tr>
<td>snakeYAML before 1.31 vulnerable to Denial of Service due to Out-of-bounds Write</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-38751</td>
</tr>
<tr>
<td>snakeYAML before 1.32 vulnerable to Denial of Service due to Out-of-bounds Write</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-38752</td>
</tr>
<tr>
<td>Denial of Service due to parser crash</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-40152</td>
</tr>
<tr>
<td>Snakeyaml vulnerable to Stack overflow leading to denial of service</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-41854</td>
</tr>
<tr>
<td>TemporaryFolder on unix-like systems does not limit access to created files</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2022-41946</td>
</tr>
<tr>
<td>Spring Framework vulnerable to denial of service via specially crafted SpEL expression</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2023-20861</td>
</tr>
<tr>
<td>Guava vulnerable to insecure use of temporary directory</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>CVE-2023-2976</td>
</tr>
<tr>
<td>pgjdbc Arbitrary File Write Vulnerability</td>
<td>MEDIUM</td>
<td>FALSE</td>
<td>GHSA-673j-qm5f-xpv8</td>
</tr>
<tr>
<td>Privilege Context Switching Error in Elasticsearch</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2020-7020</td>
</tr>
<tr>
<td>Information Disclosure in Guava</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2020-8908</td>
</tr>
<tr>
<td>Path traversal in org.postgresql:postgresql</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2022-26520</td>
</tr>
<tr>
<td>Denial of Service via stack overflow</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2022-40154</td>
</tr>
<tr>
<td>Denial of Service via stack overflow</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2022-40155</td>
</tr>
<tr>
<td>Denial of Service due to parser crash</td>
<td>LOW</td>
<td>FALSE</td>
<td>CVE-2022-40156</td>
</tr>
</tbody></table>
</details>

<h4 id="CRITICAL-Vulnerability"><a href="#CRITICAL-Vulnerability" class="headerlink" title="CRITICAL Vulnerability"></a>CRITICAL Vulnerability</h4><p>ìœ„ CRITICAL ë ˆë²¨ì˜ ë³´ì•ˆ ì·¨ì•½ì  ì¤‘ì—ì„œ <a href="https://github.com/advisories/GHSA-c27h-mcmw-48hv">CVE-2019-10202</a>ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì·¨ì•½ì  ëŒ€ìƒì´ ë˜ëŠ” ì‹œìŠ¤í…œ í™˜ê²½ì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— êµ³ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ë²„ì „ì„ ë³€ê²½í•  í•„ìš”ëŠ” ì—†ë‹¤ê³  ìƒê°ëœë‹¤. CVE-2019-10202ì— ëŒ€í•´ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ org.codehaus.jackson:jackson-mapper-asl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìŒì—ë„ ì¼ë¶€ ì½”ë“œê°€ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ë¡œë¶€í„° ë³µì‚¬ë˜ì—ˆê¸° ë•Œë¬¸ì— jackson-databind ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬í•¨ëœ ISO8601Utilsë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í•˜ê³  ë¶ˆí•„ìš”í•œ jackson-mapper-asl ì˜ì¡´ì„±ì„ ì œê±°í•˜ì˜€ë‹¤. </p>
<pre class="language-groovy" data-language="groovy"><code class="language-groovy">ext <span class="token punctuation">&#123;</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'quartz.version'</span><span class="token punctuation">,</span> <span class="token string">'2.3.2'</span><span class="token punctuation">)</span> <span class="token comment">// CVE-2019-13990</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'thymeleaf.version'</span><span class="token punctuation">,</span> <span class="token string">'3.0.13.RELEASE'</span><span class="token punctuation">)</span> <span class="token comment">// CVE-2021-43466</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'spring-framework.version'</span><span class="token punctuation">,</span> <span class="token string">'5.2.24.RELEASE'</span><span class="token punctuation">)</span> <span class="token comment">// CVE-2022-22965</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'undertow.version'</span><span class="token punctuation">,</span> <span class="token string">'2.2.24.Final'</span><span class="token punctuation">)</span> <span class="token comment">// CVE-2022-4492]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ë‚˜ë¨¸ì§€ CRITICAL ë ˆë²¨ì´ ì•„ë‹Œ ì·¨ì•½ì ì€ êµ³ì´ ì¡°ì¹˜í•  í•„ìš”ì„±ì´ ë†’ì§€ëŠ” ì•Šì•„ë³´ì´ë‚˜ ìµœëŒ€í•œ ì·¨ì•½ì ì„ ì œê±°í•˜ê³ ì ë¶„ì„ í›„ Github Advisory Databaseë¥¼ í†µí•´ ì·¨ì•½ì ì´ ì¡°ì¹˜ëœ ë²„ì „ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.</p>
<h4 id="Vulnerability-1"><a href="#Vulnerability-1" class="headerlink" title="Vulnerability"></a>Vulnerability</h4><p>ì·¨ì•½ì  ì¡°ì¹˜ ì´í›„ì— ì²´í¬ë˜ì–´ ë‚¨ì•„ìˆëŠ” ì·¨ì•½ì ì€ ì•„ë˜ì™€ ê°™ë‹¤. </p>
<table>
<thead>
<tr>
<th>name</th>
<th>severity</th>
<th>exploitable</th>
<th>issueId</th>
</tr>
</thead>
<tbody><tr>
<td>Pivotal Spring Framework contains unsafe Java deserialization methods</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-4wrc-f8pq-fpqp">CVE-2016-1000027</a></td>
</tr>
<tr>
<td>Spring Boot Security Bypass with Wildcard Pattern Matching on Cloud Foundry</td>
<td>CRITICAL</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-g5h3-w546-pj7f">CVE-2023-20873</a></td>
</tr>
<tr>
<td>SnakeYaml Constructor Deserialization Remote Code Execution</td>
<td>HIGH</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-mjmj-j48q-9wg2">CVE-2022-1471</a></td>
</tr>
<tr>
<td>Spring Boot Welcome Page Denial of Service</td>
<td>HIGH</td>
<td>FALSE</td>
<td><a href="https://github.com/advisories/GHSA-xf96-w227-r7c4">CVE-2023-20883</a></td>
</tr>
</tbody></table>
<p>CRITICAL ë ˆë²¨ì˜ CVE-2016-1000027ì™€ CVE-2023-20873 ë„ ì·¨ì•½ì  ë‚´ìš©ì„ ì‚´í´ë³´ë©´ ì·¨ì•½ì ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ í™˜ê²½ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— êµ³ì´ ì¡°ì¹˜í•  í•„ìš”ê°€ ì—†ë‹¤. ë”êµ¬ë‚˜ ì·¨ì•½ì  ì •ë³´ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒë‹¹íˆ ë†’ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ 3+ìœ¼ë¡œ ë³€ê²½í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— êµ³ì´ ì‹œë„í•˜ì§€ ì•Šìœ¼ë ¤ê³  í•œë‹¤. </p>
<p>CVE-2022-1471ì— ëŒ€í•´ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ 2.5.15 ì—ì„œ <a href="https://github.com/spring-projects/spring-boot/commit/d1d990acd7a06aa34112896d753bcae679203f35">Improve compatibility with SnakeYAML 2.0</a> ì²˜ë¦¬ê°€ ë˜ì—ˆê¸° ë•Œë¬¸ì— Snakeyaml ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ë§Œ 2.0+ë¡œ ë³€ê²½í•˜ë©´ ë˜ì§€ë§Œ ìŠ¤í”„ë§ ë¶€íŠ¸ 2.4+ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒë„ ìƒê°ë³´ë‹¤ ë§ì€ ì„¤ì •ë“¤ì´ ë³€ê²½ë˜ì–´ì„œ ì‰½ì§€ ì•Šë‹¤. ë§Œì•½, ìŠ¤í”„ë§ ë¶€íŠ¸ 2.5.15ë¡œ ë³€ê²½í•œë‹¤ë©´ <a href="https://github.com/advisories/GHSA-xf96-w227-r7c4">CVE-2023-20883</a>ë„ í•¨ê»˜ ì¡°ì¹˜í•  ìˆ˜ ìˆë‹¤.</p>
<p>ì´ë ‡ê²Œ ì·¨ì•½ì  ì œê±° ì¡°ì¹˜ëŠ” ìˆ˜í–‰í–ˆìœ¼ë‚˜ ì‹¤ì œë¡œ ë°˜ì˜í•˜ëŠ” ê²ƒì€ ì¡°ì‹¬í•´ì•¼í•œë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ì‹œìŠ¤í…œ ì˜í–¥ë„ë¥¼ ì œëŒ€ë¡œ ì²´í¬í•œë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆœ ì—†ê¸° ë•Œë¬¸ì— í•œë²ˆì— ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ì§€ì–‘í•´ì•¼í•  ìˆ˜ ìˆë‹¤. ì•ì„œ, jackson-databind ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ 2.11.4 ì—ì„œ ìƒìœ„ ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì§ë ¬í™” ì´ìŠˆê°€ ë°œìƒí•˜ì˜€ë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java <span class="token number">8</span> date/time <span class="token builtin class-name">type</span> <span class="token variable"><span class="token variable">`</span>java.time.Instant<span class="token variable">`</span></span> not supported by default: <span class="token function">add</span> Module <span class="token string">"com.fasterxml.jackson.datatype:jackson-datatype-jsr310"</span> to <span class="token builtin class-name">enable</span> handling <span class="token punctuation">(</span>through reference chain: java.util.Collections<span class="token variable">$UnmodifiableMap</span><span class="token punctuation">[</span><span class="token string">"build"</span><span class="token punctuation">]</span>-<span class="token operator">></span>java.util.LinkedHashMap<span class="token punctuation">[</span><span class="token string">"time"</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>

<p>ì´ì™€ ê°™ì€ ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ObjectMapperë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì½”ë“œì— JavaTimeModuleì„ ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ë„ë¡ ë³€ê²½í•´ì•¼í•œë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
objectMapper<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaTimeModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>ì¸í…”ë¦¬ì œì´ë¥¼ í†µí•´ ê²€ìƒ‰í•´ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ê±´ë“œë ¤ì•¼í•˜ëŠ” ì½”ë“œê°€ ë§ì•„ì„œ jackson-databind ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìƒìœ„ ë²„ì „ìœ¼ë¡œ ë³€ê²½í•˜ì§€ ì•Šê³  2.11.4ë¥¼ ìœ ì§€í•˜ê³ ì í•œë‹¤.</p>
<h4 id="OWASP-Dependency-Check"><a href="#OWASP-Dependency-Check" class="headerlink" title="OWASP Dependency-Check"></a>OWASP Dependency-Check</h4><p><a href="https://owasp.org/www-project-dependency-check/">OWASP Dependency-Check</a>ë¼ëŠ” SCA ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì„œ CPEì™€ CVEë¥¼ ê²€ì¶œí•  ìˆ˜ ìˆë‹¤. ì•„ë˜ì™€ ê°™ì´ dependencycheck ê·¸ë˜ë“¤ í”ŒëŸ¬ê·¸ì¸ì„ ë“±ë¡í•˜ê³ ë‚˜ì„œ dependencyCheckAnalyze íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ <code>build/reports/dependency-check-report.html</code> íŒŒì¼ì´ ìƒì„±ë˜ì–´ ì·¨ì•½ì  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
<pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">plugins <span class="token punctuation">&#123;</span>
    id <span class="token string">'org.owasp.dependencycheck'</span> version <span class="token string">'8.4.0'</span>
<span class="token punctuation">&#125;</span>

dependencyCheck <span class="token punctuation">&#123;</span>
    <span class="token comment">// build/reports/dependency-check-report.html</span>
    analyzers <span class="token punctuation">&#123;</span>
        nodeEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
        nodeAudit <span class="token punctuation">&#123;</span>
            enabled <span class="token operator">=</span> <span class="token boolean">false</span>
            yarnEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
            pnpmEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p><a href="https://plugins.jenkins.io/dependency-check-jenkins-plugin/">ì  í‚¨ìŠ¤ OWASP Dependency-Check í”ŒëŸ¬ê·¸ì¸</a>ë„ ìˆëŠ”ë° OWASP Dependency-Checkë¡œ ì²´í¬í•˜ëŠ” ê²½ìš° ìƒê°ë³´ë‹¤ ë§ì€ ì·¨ì•½ì ì´ í™•ì¸ë˜ì–´ì„œ ìµœì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¼ë©´ ì¢‹ì•„ë³´ì´ì§€ëŠ” ì•ŠëŠ”ë‹¤. ê°œì¸ì ìœ¼ë¡œ CVE ê²€ì¶œì„ ìœ„í•´ì„œ ì‚¬ìš©í•˜ì§„ ì•Šì„ ê²ƒ ê°™ë‹¤.</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>Webpack 5 ê¸°ë°˜ì˜ Vue ê°œë°œ í™˜ê²½</title>
    <url>/webpack5-for-vue/</url>
    <content><![CDATA[<p>ì•ˆë…•í•˜ì„¸ìš” Mambo ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ <strong>Webpack 5 ê¸°ë°˜ì˜ Vue ê°œë°œ í™˜ê²½</strong>ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br>ë³¸ ê¸€ì—ì„œ ì„¤ëª…í•œ ë‚´ìš©ì— ëŒ€í•œ ì½”ë“œëŠ” <a href="https://github.com/kdevkr/webpack5">kdevkr&#x2F;webpack5</a>ì—ì„œ ì œê³µí•©ë‹ˆë‹¤.</p>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>ë°˜ë“œì‹œ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ë§ì€ ë¶„ë“¤ì´ <a href="https://create-react-app.dev/">Create React App</a> ë˜ëŠ” <a href="https://cli.vuejs.org/">Vue CLI</a>ë¼ëŠ” ë„êµ¬ë¥¼ í†µí•´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í™˜ê²½ì— ëŒ€í•œ ê¸°ë³¸ í”„ë¦¬ì…‹ì„ ê¸°ë°˜ìœ¼ë¡œ í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. ì´ ë„êµ¬ë“¤ì€ ì—¬ëŸ¬ê°€ì§€ ì‚¬í•­ì— ëŒ€í•œ ì›¹íŒ© êµ¬ì„±ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•¨ìœ¼ë¡œì¨ ì›¹íŒ©ì— ëŒ€í•œ ë‚´ìš©ì„ ì•Œì§€ ëª»í•˜ë”ë¼ë„ ì‰½ê²Œ ë¦¬ì•¡íŠ¸ ë˜ëŠ” ë·°ì— ëŒ€í•œ í•™ìŠµì„ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. </p>
<p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” ì´ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ì›¹íŒ© ì„¤ì •ì— ëŒ€í•´ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. ë˜í•œ, Vue CLIëŠ” ì•ˆíƒ€ê¹ê²Œë„ ì›¹íŒ© 4ì— ëŒ€í•œ êµ¬ì„±ì„ ì œê³µí•˜ë¯€ë¡œ ì´ ë„êµ¬ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í™˜ê²½ì€ ë¬´ì¡°ê±´ ì›¹íŒ© 4ë¡œ ì œí•œë˜ëŠ” ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. <a href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/">2020ë…„ 10ì›”ì— ë¦´ë¦¬ì¦ˆëœ ì›¹íŒ© 5</a> ê¸°ë°˜ì˜ ê°œë°œ í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì§ì ‘ ì›¹íŒ© êµ¬ì„±ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<h3 id="ìš”êµ¬ì‚¬í•­"><a href="#ìš”êµ¬ì‚¬í•­" class="headerlink" title="ìš”êµ¬ì‚¬í•­"></a>ìš”êµ¬ì‚¬í•­</h3><p>ì‹œì‘í•˜ê¸°ì— ì•ì„œ, ì›¹íŒ© 5ëŠ” ë…¸ë“œ 10.13.0 ì´ìƒì˜ ë²„ì „ì„ ìš”êµ¬í•˜ë©° í•¨ê»˜ ê°œë°œ í”„ë¡ì‹œ ì„œë²„ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” webpack-dev-server@4 ì—ì„œëŠ” ë…¸ë“œ 12.13.0 ì´ìƒì„ ìš”êµ¬í•©ë‹ˆë‹¤. </p>
<ul>
<li>Webpack5 required v10.13.0+</li>
<li>webpack-dev-server@4 v12.13.0+</li>
</ul>
<h4 id="í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ"><a href="#í”„ë¡œì íŠ¸-ë…¸ë“œ-ë²„ì „-ì œí•œ" class="headerlink" title="í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ"></a>í”„ë¡œì íŠ¸ ë…¸ë“œ ë²„ì „ ì œí•œ</h4><p>ìœ„ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë…¸ë“œ ë²„ì „ì„ ì œí•œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì œê°€ ì´ì „ì— ê³µìœ í•œ <a href="https://kdevkr.github.io/strict-nodejs-version-for-project/">í”„ë¡œì íŠ¸ì˜ ë…¸ë“œ ë²„ì „ ì œí•œí•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ë…¸ë“œ ì—”ì§„ ë²„ì „ì„ 12.13.0 ì´ìƒìœ¼ë¡œ ì„¤ì •í•´ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•˜ëŠ” ë°”ì…ë‹ˆë‹¤.</p>
<h3 id="ì»¤ë°‹ë³„ë¡œ-í™•ì¸í•˜ëŠ”-êµ¬ì„±"><a href="#ì»¤ë°‹ë³„ë¡œ-í™•ì¸í•˜ëŠ”-êµ¬ì„±" class="headerlink" title="ì»¤ë°‹ë³„ë¡œ í™•ì¸í•˜ëŠ” êµ¬ì„±"></a>ì»¤ë°‹ë³„ë¡œ í™•ì¸í•˜ëŠ” êµ¬ì„±</h3><p>ê° ì»¤ë°‹ ë‹¨ìœ„ì˜ Browser Filesë¥¼ í†µí•´ ì–´ë–»ê²Œ êµ¬ì„±ì´ ë³€í™”í•˜ëŠ”ì§€ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h4 id="Add-webpack-config-js-for-default-configuration"><a href="#Add-webpack-config-js-for-default-configuration" class="headerlink" title="Add webpack.config.js for default configuration"></a><a href="https://github.com/kdevkr/webpack5/commit/3f858c2702720088b8647bdb55a9f830d54a8d91">Add webpack.config.js for default configuration</a></h4><p>ê¸°ë³¸ êµ¬ì„±ì„ ìœ„í•œ webpack.config.js íŒŒì¼ì„ ë§Œë“¤ê³  node-env ê°’ì— ë”°ë¼ ë²ˆë“¤ íŒŒì¼ëª…ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•  ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">npx webpack --node-env production <span class="token comment"># ëª¨ë“œë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ì§€ë§Œ node-env ê°’ì— ì˜í•´ ì²˜ë¦¬ë©ë‹ˆë‹¤.</span></code></pre>

<h4 id="Add-vue-loader"><a href="#Add-vue-loader" class="headerlink" title="Add vue-loader"></a><a href="https://github.com/kdevkr/webpack5/commit/3ca2fc1de5573ae339b0271ea482a73bf3dac397">Add vue-loader</a></h4><p>Vue SFC íŒŒì¼ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ vue-loaderë¥¼ ì¶”ê°€í•˜ê³  Vue ê°œë°œ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ê°„ë‹¨í•œ ìƒ˜í”Œ HTML íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ Vue ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ë³€í™˜ë˜ì—ˆìŒì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<h4 id="Add-sass-postcss"><a href="#Add-sass-postcss" class="headerlink" title="Add sass, postcss"></a><a href="https://github.com/kdevkr/webpack5/commit/68ffce2b18c64e67b944a383b216c2e6fe784396">Add sass, postcss</a></h4><p>Vue SFCì˜ ìŠ¤íƒ€ì¼ ë¸”ë¡ì˜ ì–¸ì–´ë¥¼ SCSSë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ sass ë° postcssì— ëŒ€í•œ ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤. </p>
<h4 id="Add-stylelint"><a href="#Add-stylelint" class="headerlink" title="Add stylelint"></a><a href="https://github.com/kdevkr/webpack5/commit/7e1e00735738e9106033c6df675977846b159552">Add stylelint</a></h4><p>ë°˜ë“œì‹œ í•„ìš”í•œ ì„¤ì •ì€ ì•„ë‹ˆì§€ë§Œ CSSì— ëŒ€í•œ ë¦°íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ stylelintë¥¼ postcss í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h4 id="Add-eslint"><a href="#Add-eslint" class="headerlink" title="Add eslint"></a><a href="https://github.com/kdevkr/webpack5/commit/f7f566314fd675e18d3f7b3dd35283317c5891ae">Add eslint</a></h4><p>ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ë¦°íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ eslintë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h4 id="Add-babel"><a href="#Add-babel" class="headerlink" title="Add babel"></a><a href="https://github.com/kdevkr/webpack5/commit/c5211b28ab8176e8c5c9fb39c755083679cb24df">Add babel</a></h4><p>ES6+ ë¬¸ë²•ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•´ ES5 ë¬¸ë²•ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ babelì„ ì¶”ê°€í•©ë‹ˆë‹¤. babel 7 ë¶€í„°ëŠ” í´ë¦¬í•„ ì ìš© ë°©ì‹ì´ ë³€ê²½ë˜ì—ˆìŒì„ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤. ë°”ë²¨ í´ë¦¬í•„ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì˜ ë‘ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<ul>
<li><a href="https://poiemaweb.com/babel-polyfill">íì§€ëœ @babel&#x2F;polyfill ëŒ€ì‹  @babel&#x2F;plugin-transform-runtimeì„ ì‚¬ìš©í•´ í´ë¦¬í•„ ì¶”ê°€í•˜ê¸°</a></li>
<li><a href="https://tech.kakao.com/2020/12/01/frontend-growth-02/">Babel7ê³¼ corejs3 ì„¤ì •ìœ¼ë¡œ ì „ì—­ ì˜¤ì—¼ ì—†ëŠ” í´ë¦¬í•„ ì‚¬ìš©í•˜ê¸°</a></li>
</ul>
<h4 id="Add-browserslist"><a href="#Add-browserslist" class="headerlink" title="Add browserslist"></a><a href="https://github.com/kdevkr/webpack5/commit/c911ef73aa85ebde4d9c738c07999300c05bfaf8">Add browserslist</a></h4><p>postcssì˜ autoprefixer ë˜ëŠ” babelì—ì„œ ì°¸ê³ í•  íƒ€ê²Ÿ ì •ë³´ë¥¼ ìœ„í•´ browserslistë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h4 id="Add-prettierrc"><a href="#Add-prettierrc" class="headerlink" title="Add prettierrc"></a><a href="https://github.com/kdevkr/webpack5/commit/b5c8e20ebdb2224f1268b431aafb82a6b49e7b3a">Add prettierrc</a></h4><p>ë¶ˆí•„ìš”í•œ í¬ë§·íŒ…ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ prettier ì˜µì…˜ì„ ì¡°ì •í•©ë‹ˆë‹¤.</p>
<h4 id="Add-asset"><a href="#Add-asset" class="headerlink" title="Add asset"></a><a href="https://github.com/kdevkr/webpack5/commit/1ba05ff066806fb2c7b59eace748e04e73756243">Add asset</a></h4><p>ì´ë¯¸ì§€ ë˜ëŠ” í°íŠ¸ ë“±ì„ ìœ„í•œ ì—ì…‹ ëª¨ë“ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<h4 id="Apply-strict-npm-engines"><a href="#Apply-strict-npm-engines" class="headerlink" title="Apply strict npm engines"></a><a href="https://github.com/kdevkr/webpack5/commit/1b768c5881db9d8348d54f926a11e537a50050ac">Apply strict npm engines</a></h4><p>ì§€ê¸ˆê¹Œì§€ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì—ì„œ ìµœì†Œë¡œ ìš”êµ¬í•˜ëŠ” ë…¸ë“œ ë²„ì „ì„ ëª…ì‹œí•˜ê³  ì œí•œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<h4 id="Apply-settings-for-vscode"><a href="#Apply-settings-for-vscode" class="headerlink" title="Apply settings for vscode"></a><a href="https://github.com/kdevkr/webpack5/commit/9008824470873ce172e52294ddac7eee8304c256">Apply settings for vscode</a></h4><p>VSCodeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì €ì¥ë  ë•Œ ESLintê°€ ë™ì‘í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<h4 id="Add-project-version-in-output-filename"><a href="#Add-project-version-in-output-filename" class="headerlink" title="Add project version in output filename"></a><a href="https://github.com/kdevkr/webpack5/commit/769171d627bb1f4bfbb4bacce62dc067ff9b617a">Add project version in output filename</a></h4><p>(Optional) package.jsonì— ì •ì˜ëœ í”„ë¡œì íŠ¸ ë²„ì „ì„ ë²ˆë“¤ íŒŒì¼ëª…ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<h4 id="Apply-optimization"><a href="#Apply-optimization" class="headerlink" title="Apply optimization"></a><a href="https://github.com/kdevkr/webpack5/commit/bab1505c643b4ae3ea5e7a86bdc90317f4afe470">Apply optimization</a></h4><p>í”„ë¡œë•ì…˜ í™˜ê²½ì„ ìœ„í•œ ìµœì í™” êµ¬ì„±ì„ ì¡°ì •í•©ë‹ˆë‹¤.</p>
<h4 id="Add-manifest"><a href="#Add-manifest" class="headerlink" title="Add manifest"></a><a href="https://github.com/kdevkr/webpack5/commit/7d0cd27b85a8f1df757e16c3ddb6ad32b8f7b39e">Add manifest</a></h4><p>ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì´ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤. </p>
<pre class="language-bash" data-language="bash"><code class="language-bash">npx webpack --node-env production <span class="token parameter variable">--env</span> manifest</code></pre>

<h4 id="Add-bootstrap-vue"><a href="#Add-bootstrap-vue" class="headerlink" title="Add bootstrap-vue"></a><a href="https://github.com/kdevkr/webpack5/commit/c3da5f586c6ec368778e2c90478196e4af037a82">Add bootstrap-vue</a></h4><p>BootstrapVueë¥¼ ì¶”ê°€í•´ë³´ê³  <a href="https://kdevkr.github.io/no-emit-deprecation-warnings-of-dart-sass/">ìµœì‹  ë²„ì „ì˜ Sassì—ì„œ ì¶œë ¥ë˜ëŠ” Deprecation ê²½ê³ ê°€ ì¶œë ¥ë˜ì§€ ì•Šë„ë¡</a> ì„¤ì •í•©ë‹ˆë‹¤.</p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Webpack5</tag>
      </tags>
  </entry>
  <entry>
    <title>HandlerInterceptorì€ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</title>
    <url>/when-do-i-use-the-handler-interceptor/</url>
    <content><![CDATA[<p><img data-src="/../images/logo/spring.png#compact"></p>
<p>ì•ˆë…•í•˜ì„¸ìš” Mamboì…ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ìŠ¤í”„ë§ MVC ëª¨ë“ˆì— í¬í•¨ë˜ì–´ìˆëŠ” HandlerInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê°€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h2 id="HandlerInterceptor"><a href="#HandlerInterceptor" class="headerlink" title="HandlerInterceptor"></a>HandlerInterceptor</h2><blockquote>
<p>A HandlerInterceptor gets called before the appropriate HandlerAdapter triggers the execution of the handler itself. This mechanism can be used for a large field of preprocessing aspects, e.g. for authorization checks, or common handler behavior like locale or theme changes. Its main purpose is to allow for factoring out repetitive handler code.</p>
</blockquote>
<p><strong>HandlerInterceptor</strong>ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ëŒ€í•œ ì „ì²˜ë¦¬ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. í•„í„°ë„ ì „ì²˜ë¦¬ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì§€ë§Œ web.xmlì— ì •ì˜ë˜ëŠ” í•„í„°ì™€ ë‹¤ë¥´ê²Œ HandlerInterceptorëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ê´€ë¦¬í•˜ë¯€ë¡œ ìš”ì²­ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ìë¥¼ ì¸ì¦í•˜ê±°ë‚˜ ì‘ë‹µ ë·°ë¥¼ ë Œë”ë§í•˜ê¸° ì „ì— ë¶€ê°€ ë°ì´í„°ë¥¼ ì£¼ì…í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´, ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” HandlerInterceptor êµ¬í˜„ì²´ì¸ <strong>LocaleChangeInterceptor</strong>ëŠ” ë¡œì¼€ì¼ íŒŒë¼ë¯¸í„°ì— ë”°ë¼ í˜„ì¬ ë¡œì¼€ì¼ì„ ë³€ê²½í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•˜ì£ .</p>
<h3 id="ì •ì -ë¦¬ì†ŒìŠ¤-íŒ¨í„´-ì œì™¸"><a href="#ì •ì -ë¦¬ì†ŒìŠ¤-íŒ¨í„´-ì œì™¸" class="headerlink" title="ì •ì  ë¦¬ì†ŒìŠ¤ íŒ¨í„´ ì œì™¸"></a>ì •ì  ë¦¬ì†ŒìŠ¤ íŒ¨í„´ ì œì™¸</h3><p><strong>ResourceHandlerRegistry</strong>ëŠ” ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•˜ê¸° ìœ„í•œ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒì„ ì§€ì›í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì´ë•Œ, ë¦¬ì†ŒìŠ¤ í•¸ë“¤ëŸ¬ê°€ ì²˜ë¦¬í•  ê²½ë¡œë¥¼ ë§¤ì¹­í•˜ê¸° ìœ„í•˜ì—¬ AntPathMatcher ë˜ëŠ” PathPatternì„ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° Ant ìŠ¤íƒ€ì¼ì˜ íŒ¨í„´ ë§¤ì¹­ì„ ì‚¬ìš©í•˜ë¯€ë¡œ íŠ¹ì • íŒ¨í„´ì„ ì œì™¸í•˜ê¸° ìœ„í•œ Regex ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. </p>
<p>ë¦¬ì†ŒìŠ¤ í•¸ë“¤ëŸ¬ê°€ ì²˜ë¦¬í•˜ëŠ” ê²½ë¡œì— ëŒ€í•´ì„œ íŠ¹ì • íŒ¨í„´ì„ ì œì™¸í•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ íŒ¨í„´ì„ ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ íŒ¨í„´ë³„ë¡œ ë“±ë¡í•˜ì—¬ì•¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ë ‡ê²Œ ì˜¬ë°”ë¥¸ íŒ¨í„´ë§ˆë‹¤ ë¦¬ì†ŒìŠ¤ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>ResourceHandlerRegistry</span></div><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/images/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/static/images/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì˜ˆì‹œëŠ” <strong>&#x2F;images&#x2F;</strong>** íŒ¨í„´ì˜ ê²½ë¡œì— ëŒ€í•´ì„œ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ <strong>static&#x2F;images</strong> í´ë”ì— ìˆëŠ” ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. images í´ë”ì—ëŠ” ì´ë¯¸ì§€ íŒŒì¼ë§Œ ìˆë‹¤ê³  ê°€ì •í–ˆìœ¼ë‚˜ ê°œë°œìì˜ ì‹¤ìˆ˜ë¡œ images í´ë”ì— ì´ë¯¸ì§€ê°€ ì•„ë‹Œ ë™ì˜ìƒ íŒŒì¼ì´ë‚˜ ì˜¤ë””ì˜¤ íŒŒì¼ì´ ë“¤ì–´ìˆë‹¤ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì´ë ‡ê²Œ íŠ¹ì • íŒ¨í„´ì„ ë°©ì§€í•´ì•¼í•˜ëŠ” ê²½ìš°ì— HandlerInterceptorë¥¼ ë“±ë¡í•˜ì—¬ ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì‘ë‹µí•˜ì§€ ì•Šë„ë¡ ì „ì²˜ë¦¬ ë™ì‘ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ìŒê³¼ ê°™ì´ <strong>ì´ë¯¸ì§€ íŒŒì¼ íŒ¨í„´ì´ ì•„ë‹ˆë¼ë©´ ìš”ì²­ì„ 404 Not Foundë¡œ ì²˜ë¦¬</strong>í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token function">onlyServeImagesHandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/images/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/images/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/static/images/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">OnlyServeImagesHandlerInterceptor</span> <span class="token function">onlyServeImagesHandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OnlyServeImagesHandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">OnlyServeImagesHandlerInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">&#123;</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>requestURI<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">".*\\/.*\\.(jpg|jpeg|png|gif)"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span><span class="token constant">SC_NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ìœ„ ì¸í„°ì…‰í„°ê°€ ì •ë§ë¡œ ì´ë¯¸ì§€ íŒŒì¼ì— ëŒ€í•´ì„œë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ì‚¬ì „ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img data-src="/images/posts/handler-interceptor-01.gif"></p>
<p>ìœ„ ê²°ê³¼ë¥¼ ë³´ë©´ ì´ë¯¸ì§€ íŒŒì¼ì€ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ë°°í¬ë˜ë„ë¡ ì²˜ë¦¬ë˜ì—ˆì§€ë§Œ ë™ì˜ìƒ íŒŒì¼ì€ ì²˜ë¦¬ë˜ì§€ ì•Šê²Œ ëœê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<h3 id="ë·°-ì‘ë‹µ-ì‹œ-ë¶€ê°€-ì •ë³´-ì£¼ì…"><a href="#ë·°-ì‘ë‹µ-ì‹œ-ë¶€ê°€-ì •ë³´-ì£¼ì…" class="headerlink" title="ë·° ì‘ë‹µ ì‹œ ë¶€ê°€ ì •ë³´ ì£¼ì…"></a>ë·° ì‘ë‹µ ì‹œ ë¶€ê°€ ì •ë³´ ì£¼ì…</h3><p>ë‘ë²ˆì§¸ë¡œëŠ” ë·°ë¥¼ ì‘ë‹µí•˜ëŠ” í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ëŒ€í•˜ì—¬ <strong>ë¶€ê°€ ì •ë³´ë¥¼ ì£¼ì…</strong>í•˜ëŠ”ë°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>ë‹¤ìŒì˜ ì½”ë“œëŠ” ë·°ë¥¼ ì‘ë‹µí•˜ê²Œë˜ëŠ” í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì— ì‚¬ìš© ê°€ëŠ¥í•œ ì–¸ì–´ì™€ í•¨ê»˜ í˜„ì¬ ë¡œì¼€ì¼ì— ëŒ€í•œ ë©”ì‹œì§€ ì½”ë“œ ëª©ë¡ì„ ì£¼ì…í•˜ëŠ” ì¸í„°ì…‰í„° ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>InjectionLocalesInterceptor</span></div><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">InjectionLocalesInterceptor</span> <span class="token keyword">extends</span> <span class="token class-name">HandlerInterceptorAdapter</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">MessagePool</span> messagePool <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> messagePool <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Locale</span> locale <span class="token operator">=</span> messagePool<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>locale <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

            modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"lang"</span><span class="token punctuation">,</span> locale<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"locale"</span><span class="token punctuation">,</span> locale<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>handler <span class="token keyword">instanceof</span> <span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">HandlerMethod</span> handlerMethod <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">;</span>
                <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> beanType <span class="token operator">=</span> handlerMethod<span class="token punctuation">.</span><span class="token function">getBeanType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Controller</span> controller <span class="token operator">=</span> beanType<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>controller <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"locales"</span><span class="token punctuation">,</span> messagePool<span class="token punctuation">.</span><span class="token function">getLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> messagePool<span class="token punctuation">.</span><span class="token function">getMessagesInJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">postHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> modelAndView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ì´ì œ í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì£¼ì…ëœ ë¶€ê°€ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§ì„ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h3 id="ì¸ì¦ì„-ìœ„í•œ-ì¸í„°ì…‰í„°"><a href="#ì¸ì¦ì„-ìœ„í•œ-ì¸í„°ì…‰í„°" class="headerlink" title="ì¸ì¦ì„ ìœ„í•œ ì¸í„°ì…‰í„°"></a>ì¸ì¦ì„ ìœ„í•œ ì¸í„°ì…‰í„°</h3><p>ë˜ ë‹¤ë¥¸ ì¸í„°ì…‰í„°ì˜ í™œìš© ë°©ì•ˆì€ ì¸ì¦ ì²˜ë¦¬ì…ë‹ˆë‹¤. ì‚¬ìš©ìì—ê²Œ ì´ë©”ì¼ ë˜ëŠ” ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ë“±ì„ ë°œì†¡í•˜ì—¬ ì–´ë–¤ í–‰ë™ì„ í•  ìˆ˜ ìˆëŠ” ë§í¬ë¥¼ ì£¼ê²Œ ëœë‹¤ê³  ê°€ì •í•´ë³´ë©´ í•´ë‹¹ ë§í¬ë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ì‚¬ìš©ìì€ ì¸ì¦ì„ ìˆ˜í–‰í•˜ê¸° ì „ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ì£¼ì–´ì§€ëŠ” ë§í¬ì— ì„ì‹œì ìœ¼ë¡œ ì¸ì¦ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë§Œë£Œì„± í† í° íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ ì‚¬ìš©ìë¥¼ ì¸ì¦í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img data-src="https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/31015797034/original/89mawYXJeO_K082-5HF52bd73j_SN60nLQ.png" alt="ì½”ì¸ì›ì˜ ì´ë©”ì¼ ì¸ì¦í•˜ê¸° ë²„íŠ¼"></p>
<p>ìœ„ ì˜ˆì‹œ ì´ë¯¸ì§€ì˜ ì´ë©”ì¼ ì¸ì¦í•˜ê¸° ë²„íŠ¼ì— ëŒ€í•œ ë§í¬ì—ëŠ” ì½”ì¸ì›ì—ì„œ ë¶„ì„í•  ìˆ˜ ìˆëŠ” ì–´ë– í•œ íŒŒë¼ë¯¸í„°ì— ì¸ì¦ì„ ìœ„í•œ ì‹ë³„ ì •ë³´ê°€ ìˆì„ê±°ë¼ ì¶”ì¸¡í•©ë‹ˆë‹¤.</p>
<p>ë‹¤ìŒì€ í† í° íŒŒë¼ë¯¸í„° ìœ ë¬´ë¥¼ í™•ì¸í•˜ê³  í† í° íŒŒë¼ë¯¸í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì¸ì¦ì„ ìˆ˜í–‰í•˜ëŠ” ì¸í„°ì…‰í„° êµ¬í˜„ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><div class="caption"><span>TokenBasedAuthenticationInterceptor</span></div><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TokenBasedAuthenticationInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">TOKEN_PARAMETER_NAME</span> <span class="token operator">=</span> <span class="token string">"token"</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> parameter <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token constant">TOKEN_PARAMETER_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>parameter <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>parameter<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// NOTE: í† í° íŒŒë¼ë¯¸í„° ë¶„ì„ ë° ê²€ì¦</span>
            <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token function">analyticsToken</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">boolean</span> valid <span class="token operator">=</span> <span class="token function">validateToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// NOTE: í† í° ê¸°ë°˜ ì¸ì¦ ì²˜ë¦¬</span>
                <span class="token function">authenticationByToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> valid<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong>ì¼ì • ì‹œê°„ì´ ë§Œë£Œ</strong>ë˜ë©´ í•´ë‹¹ í† í°ìœ¼ë¡œëŠ” ì¸ì¦í•  ìˆ˜ ì—†ê³  ì´ë¯¸ ì¸ì¦ì„ ìˆ˜í–‰í•˜ì—¬ <strong>ì‚¬ìš©ì´ ì™„ë£Œëœ í† í°</strong>ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì€ í† í° íŒŒë¼ë¯¸í„° ë¶„ì„ ë° ê²€ì¦ ë¡œì§ì— í¬í•¨ë ê²ë‹ˆë‹¤.</p>
<p>ê°„ë‹¨í•˜ê²Œ HandlerInterceptorì˜ í™œìš© ë°©ì•ˆ 3ê°€ì§€ë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë§ˆë‹¤ ìš”êµ¬ì‚¬í•­ì´ ë‹¤ë¥´ê³  ë¬´ê¶ë¬´ì§„ í•˜ê¸° ë•Œë¬¸ì— HandlerInterceptorëŠ” ë” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤. ì´ìƒìœ¼ë¡œ HandlerInterceptorì€ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?ë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>X-Accel-Buffering</title>
    <url>/x-accel-buffering/</url>
    <content><![CDATA[<p>ì˜¤ë˜ì „ì— ê°œì¸ì ìœ¼ë¡œ <a href="/reverse-proxy-using-nginx/">ì—”ì§„ì—‘ìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</a>ë¥¼ í•™ìŠµí•˜ë©´ì„œ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ í”„ë¡ì‹œ êµ¬ì„± ì‹œ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering">proxy_buffering</a> ê³¼ ê°™ì€ ë²„í¼ë§ ì˜µì…˜ì„ ë¹„í™œì„±í™” í•´ì•¼í•œë‹¤ê³  ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. HTTP&#x2F;2 ì—°ê²°ê³¼ í•¨ê»˜ <a href="https://www.baeldung.com/spring-server-sent-events">SSE(Server Sent Event)</a>ë¥¼ í™œìš©í•˜ë©´ êµ³ì´ ì›¹ì†Œì¼“ êµ¬í˜„ì„ í•˜ì§€ ì•Šì•„ë„ ì„œë²„ ì¸¡ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>
<p>í•˜ì§€ë§Œ, Nginx ì¸¡ì—ì„œëŠ” Nginx êµ¬ì„±ì— ëŒ€í•œ 10ê°€ì§€ ì‹¤ìˆ˜ì—ì„œ <a href="https://www.nginx.com/blog/avoiding-top-10-nginx-configuration-mistakes/#proxy_buffering-off">Mistake 5: The proxy_buffering off Directive</a>ìœ¼ë¡œ ë²„í¼ë§ ì˜µì…˜ì— ëŒ€í•œ ë¹„í™œì„±í™”ì— ëŒ€í•´ì„œ ì´ì•¼ê¸°í•©ë‹ˆë‹¤. </p>
<blockquote>
<p>Buffering can also be enabled or disabled by passing â€œyesâ€ or â€œnoâ€ in the â€œX-Accel-Bufferingâ€ response header field. This capability can be disabled using the <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ignore_headers">proxy_ignore_headers</a> directive.</p>
</blockquote>
<p>ìœ„ì™€ ê°™ì´ ì—”ì§„ì—‘ìŠ¤ ê³µì‹ ë¬¸ì„œ ìƒì—ëŠ” í”„ë¡ì‹œ ë²„í¼ë§ì„ ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” í—¤ë”ì— ëŒ€í•œ ì„¤ëª…ì„ í•´ì£¼ê³  ìˆìœ¼ë©° íšŒì‚¬ ë‚´ ì¸í”„ë¼ ì—”ì§€ë‹ˆì–´ ë¶„ì˜ ì˜ê²¬ì— ë”°ë¼ì„œ í”„ë¡ì‹œ êµ¬ì„± ì‹œ ë²„í¼ë§ ì˜µì…˜ì„ ì¼ê´„ì ìœ¼ë¡œ ë³€ê²½í•˜ê¸°ë³´ë‹¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ ì‘ë‹µì„ ìˆ˜í–‰í•  ë•Œ <a href="https://serverfault.com/a/801629">X-Accel-Buffering í—¤ë”ë¥¼ ì‘ë‹µ</a>í•˜ëŠ” ê²ƒìœ¼ë¡œ ìµœì¢… ê²°ì •í–ˆìŠµë‹ˆë‹¤. </p>
<h4 id="X-Accel-Buffering-í—¤ë”-ì‘ë‹µí•˜ê¸°"><a href="#X-Accel-Buffering-í—¤ë”-ì‘ë‹µí•˜ê¸°" class="headerlink" title="X-Accel-Buffering í—¤ë” ì‘ë‹µí•˜ê¸°"></a>X-Accel-Buffering í—¤ë” ì‘ë‹µí•˜ê¸°</h4><p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/SseEmitter.html">SseEmitter</a>ë¥¼ ì œê³µí•˜ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ SSE ì—°ê²°ì„ êµ¬í˜„í•  ìˆ˜ ìˆìœ¼ë©° ì´ í´ë˜ìŠ¤ëŠ” ResponseBodyEmitterë¥¼ í™•ì¥í•˜ì˜€ê¸°ì— extendResponse í•¨ìˆ˜ë¥¼ í†µí•´ ì‘ë‹µí•˜ê¸° ì „ HTTP ìƒíƒœì½”ë“œ ë˜ëŠ” ì‘ë‹µ í—¤ë”ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ì§€ì›í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì»¨íŠ¸ë¡¤ëŸ¬ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ HttpServletResponseë¥¼ ì¸ìë¡œ ë°›ì€ í›„ X-Accel-Buffering í—¤ë”ì— ëŒ€í•œ ê°’ì„ noë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SseController</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/sse"</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_EVENT_STREAM_VALUE</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SseEmitter</span> <span class="token function">sse</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"X-Accel-Buffering"</span><span class="token punctuation">,</span> <span class="token string">"no"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SseEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><img data-src="/images/posts/x-accel-buffering/01.png"></p>
<p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
]]></content>
      <tags>
        <tag>SSE</tag>
        <tag>X-Accel</tag>
      </tags>
  </entry>
</search>
