---
title: OpenFeign λ„μ…μ„ κ³ λ―Όν•΄λ³΄μ
date: 2024-10-14T23:00+09:00
tags:
- OpenFeign
- HttpClient
- RestTemplate
---

λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°λ°μ— μμ–΄μ„ OpenFeign ν™μ©μ— λ€ν• λ¶€λ¶„μ΄ μ•„λ‹ μ‘μ€ λ¨λ†€λ¦¬μ‹μΌλ΅ κµ¬μ„±λ μ†κ·λ¨ μ‹μ¤ν…μ—μ„λ„ `Apache HttpClient`λ¥Ό μ§μ ‘μ μΌλ΅ μ‚¬μ©ν•μ§€ μ•κ³  μ–΄λ…Έν…μ΄μ…κ³Ό μΈν„°νμ΄μ¤ κΈ°λ°μ μ„ μ–Έμ μΌλ΅ ν†µμ‹ μ— λ€ν• λ΅μ§μ„ μ‘μ„±ν•λ” κ²ƒμ„ κ³ λ―Όν•κ² λλ” λ¶€λ¶„μ„ μ μ–΄λ³΄κ³ μ ν•λ‹¤.

#### ν†µμ‹  λ΅μ§μ— λ€ν• λ°λ³µμ μΈ μ½”λ“ μ‘μ„±

RestTemplateμ™€ HttpClientλ¥Ό μ§μ ‘μ μΌλ΅ μ‚¬μ©ν•μ—¬ ν†µμ‹ μ— λ€ν• μ½”λ“λ¥Ό μ‘μ„±ν•λ” κ²½μ° URI κµ¬μ„±κ³Ό μΏΌλ¦¬ νλΌλ―Έν„° κ·Έλ¦¬κ³  νΌ λ°μ΄ν„° λλ” μ”μ²­ λ°μ΄ν„° κ·Έλ¦¬κ³  μ‘λ‹µ κ²°κ³Όμ— λ€ν• λ°μ΄ν„° μ²λ¦¬κΉμ§€ μ•„λμ™€ κ°™μ€ λ¶€λ¶„λ“¤μ΄ κ°•μ ν™” λμ–΄λ²„λ¦¬λ” κ²½μ°κ°€ λ§μ€ κ²ƒ κ°™λ‹¤.

```java
ObjectMapper objectMapper = new ObjectMapper();
LoginEntity login = objectMapper.readValue(json, new TypeReference<>(){});
```

ν†µμ‹ ν•΄μ•Όν•λ” μ‹μ¤ν…μ—μ„ μ κ³µν•λ” REST API κ·κ²©μ— λ”°λΌ μΏΌλ¦¬ νλΌλ―Έν„° λλ” μ”μ²­ λ°μ΄ν„°λ¥Ό μ§μ ‘ κµ¬μ„±ν•΄μ•Όν•κ³  μ „λ‹¬λ°›μ€ μ‘λ‹µμ— λ€ν•μ—¬ μ„μ™€ κ°™μ΄ μ§μ ‘μ μΌλ΅ μ›ν•λ” λ¨λΈ ν΄λμ¤λ΅ λ³€ν™ν•λ” μ½”λ“λ¥Ό μ‘μ„±ν•΄μ•Όλ§ ν•λ‹¤. μ΄κ²ƒμ€ μ¤ν”„λ§ λ°±μ—”λ“ κ°λ°μκ°€ Spring MVCμ μ»¨νΈλ΅¤λ¬λ¥Ό μ‘μ„±ν•λ” κ²ƒκ³Όλ” λ‹¤λ¥Έλ° [OpenFeign](https://github.com/OpenFeign/feign) ν΄λΌμ΄μ–ΈνΈλ” `μ„ μ–Έμ μΈ(Declarative) λ°©μ‹μ„ ν†µν•΄ μ΄λ¬ν• κ³Όμ •μ„ κ°„μ†ν™”`ν•κ³  Spring MVCμ™€ λΉ„μ·ν• λ°©μ‹μΌλ΅ μ‘μ„±λ¨μ— λ”°λΌμ„ μ‹μ¤ν… κ°„ μ—°λ™μ„ μ„ν• ν†µμ‹  λ΅μ§μ„ μ‘μ„±ν•κ³  κ΄€λ¦¬ν•κΈ° μ©μ΄ν• μ¥μ μ„ κ°€μ§€κ³  μλ” κ²ƒ κ°™λ‹¤.

#### μμ΅΄ μ‹μ¤ν…μ— λ€ν• μ¥μ•  μ²λ¦¬ λ¶€μ΅±

λ§μ΄ν¬λ΅μ„λΉ„μ¤ κµ¬μ„±μ΄ μ•„λ‹ μΌλ°μ μΈ μ†κ·λ¨ μ‹μ¤ν…μ—μ„ RestTemplateμ™€ HttpClientλ¥Ό μ§μ ‘μ μΌλ΅ μ‚¬μ©ν•λ‹¤λ³΄λ©΄ `μ‹μ¤ν… κ°„ ν†µμ‹ μ— λ€ν• μ¤λ¥μ™€ μ¬μ‹λ„ λ°©μ•μ— λ€ν• κ³ λ―Όμ„ ν•μ§€ μ•κ³  λ¬΄μ‹ν•κ² λλ” κ²½μ°`κ°€ λ§λ‹¤. OpenFeignμ€ λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°λ°μ— μ‚¬μ©λμ–΄μ§€λ” λ§νΌ λ§μ΄ν¬λ΅μ„λΉ„μ¤μ—μ„ μ¤‘μ”μ‹ν•κ² λλ” μ¥μ•  μ „ν λ°©μ§€μ— λ€ν• λ¶€λ¶„μ„ κ³ λ ¤ν•  μ μλ‹¤.

#### λ§μ΄ν¬λ΅μ„λΉ„μ¤ κµ¬μ„± ν™•μ¥μ— λ€ν• κ³ λ ¤

λ¨λ†€λ¦¬μ‹ μ•„ν‚¤ν…μ²λ΅ κµ¬μ„±λλ” μ†κ·λ¨ μ‹μ¤ν…λ„ ν„μ¬ μ‹μ¤ν… κ·λ¨μ™€ μ”κµ¬μ‚¬ν•­μ„ λ„μ–΄ λ€κ·λ¨ νΈλν”½ λλ” λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κΈ° μ„ν• μ‹μ¤ν…μΌλ΅ ν™•μ¥λλ” κ²ƒμ„ λ©ν‘λ΅ ν•λ” κ²½μ°κ°€ λ€λ¶€λ¶„μ΄λ‹¤. ν„μ¬ μ‹ κ· ν”„λ΅μ νΈλ„ λ§μ΄ν¬λ΅μ„λΉ„μ¤ κµ¬μ„±μ„ λ©ν‘λ΅ μ΄κΈ° μ„¤κ³„κ°€ λμ–΄μμμ— λ”°λΌ Spring Cloud λ¨λ“μ— λ€ν• μμ΅΄μ„±μ„ λ³΄μ ν•κ³  μλ‹¤. Spring Cloud OpenFeign λ΅ μ‘μ„±λμ–΄μλ” κ²½μ° `μ„λΉ„μ¤ λ””μ¤μ»¤λ²„λ¦¬λ¥Ό μ„ν• Eurekaμ™€ μ¥μ•  μ²λ¦¬λ¥Ό μ„ν• Resilience4J κ³Όμ ν†µν•©μ΄ μ©μ΄ν•λ‹¤`κ³  ν•λ‹¤.

μ΄μ™€ κ°™μ΄ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²κ°€ μ•„λ‹λ”λΌλ„ μ™Έλ¶€ μ‹μ¤ν… λλ” μ‹μ¤ν… κ°„ ν†µμ‹ μ΄ λ§μ€ μ‹μ¤ν…μ ν”„λ΅μ νΈλΌλ©΄ OpenFeign ν΄λΌμ΄μ–ΈνΈ λ„μ…μ„ κ³ λ ¤ν•΄λ³Όλ§ν•μ§€ μ•μ„κΉ? λ¬Όλ΅ , [Feign μ½”λ“ λ¶„μ„κ³Ό μ„λ²„ μ„±λ¥ κ°μ„ ](https://toss.tech/article/engineering-note-3) μ—μ„μ²λΌ λ¬Έμ κ°€ λ‚΄μ¬λμ§€ μ•λ” κ±΄ μ•„λ‹μ„ κ°μ•ν•κΈ΄ ν•΄μ•Όκ² μ§€λ§ λ§μ΄λ‹¤.

---

#### π”¥ FeignClient μ—μ„ GET λ€μ‹ μ— POST μ”μ²­μ΄ λλ” μ΄μ 

FeignClientμ— λ€ν• κ°„λ‹¨ν• μμ  μ½”λ“λ¥Ό μ‘μ„±ν•΄λ³΄λ μ¤‘μ— GET μ”μ²­μ΄ POSTλ΅ μ „ν™λμ–΄ μ”μ²­λλ” λ¬Έμ λ¥Ό κ²½ν—ν–λ‹¤. GET μ”μ²­ μ‹ μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό μ „λ‹¬ν•κΈ° μ„ν•΄μ„λ” `@SpringQueryMapλ¥Ό ν•΄λ‹Ή νλΌλ―Έν„°μ— μ„ μ–Έν•΄μ•Ό`ν•λ”λΌ. μΏΌλ¦¬ νλΌλ―Έν„°κ°€ μ „λ‹¬λμ§€ μ•λ” κ²½μ°κ°€ μ•„λ‹ μ„ μ–Έλ μ”μ²­ ν•¨μκ°€ λ°”λ€μ–΄λ²„λ¦¬λ” κ±΄ μ‹ κΈ°ν• λ¶€λ¶„μ΄λ‹¤.
