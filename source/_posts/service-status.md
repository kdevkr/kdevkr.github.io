---
title: 서비스 상태를 모니터링하는 이유
date: 2022-05-04
tags:
- Service Status
- Uptime
- Synthetic Monitoring
---

현재 조직의 문제점은 일하는데 있어서 체계적으로 정해진 가이드가 없다는 점입니다. 고객마다 인프라 환경도 다르며 동일한 시스템을 다양한 방식으로 배포를 요구하기도 합니다. 심지어는 시스템을 구성하는 여러가지 인스턴스의 지표를 수집하거나 로그를 남기는 등의 방식도 정해 일해오던 조직이 아닙니다. 시스템에 대한 지표나 로그등을 어떤 기준에서 남기는 것이 정해지지 않는다면 추후 시스템 장애가 발생했을때 원인을 검토하고 분석하는데 어려움이 많습니다. 실제로 APM을 도입하지 않는 시스템에서 소 잃고 외양간 고치듯이 사업팀에서는 시스템의 문제를 파악하기 위한 정보를 알 수 있냐는 문의를 하는 것도 지켜보았습니다.

분야 또는 시장의 요건에 따라 필요한 시스템을 개발하는 것을 넘어서 시스템이 정상적으로 동작하도록 유지하는 노력도 중요한 부분입니다. 시스템을 설계하고 운영되는 인프라 영역을 구성할 때에는 시스템을 이용하는 규모에 맞게 수행합니다. 트래픽이 적더라도 시스템을 다수의 서버로 트래픽을 분산할 수 있도록 구성할 수는 있으나 인프라에 대한 비용이 비효율적인 방법입니다.

> IT 분야에서 서비스나 시스템을 운영하는데 들어가는 비용이 상당히 높습니다. 작은 규모의 조직일수록 비용에 더 민감할 수 밖에 없습니다. 

아무튼 시스템을 운영하기 위한 규모도 다르고 시스템을 구성하는 애플리케이션의 언어 뿐만 아니라 인프라 영역에 대한 구성도 다양합니다. 모든 서비스와 시스템이 동일하게 만들어지고 같은 방식으로 운영되지 않습니다. 그리고 정상적으로 동작하던 시스템이 어떠한 요구사항에 의한 수정에 의해 예상하지 못했던 장애의 원인을 만들기도 합니다. 그런데 중요하게 생각해야될 부분은 시스템을 만들고 운영하는 조직이 일하는 시간이 아닐 때에도 인터넷이 접속되는 환경이라면 언제 어디서든 서비스를 이용할 수 있다는 점입니다. 시스템이 제공하는 기능을 정상적으로 이용하지 못하는 시간이 길어질수록 고객은 사용중인 서비스나 시스템에 대한 신뢰를 잃게 됩니다. 다음은 구글에 시스템 오류라는 키워드로 검색을 하여 수 많은 오류로 인한 장애와 고객의 불만에 대해 알리는 기사들입니다.

- [쿠팡, ‘마이 페이지’ 오류…“불편끼쳐 드려 죄송”](https://www.edaily.co.kr/news/read?newsId=01092246629281144&mediaCodeNo=257)
- [카카오톡 내부 시스템 오류로 장애…"긴급 점검 중"](https://imnews.imbc.com/news/2021/econo/article/6169999_34887.html)
- [카카오톡 잔여백신 예약 ‘무한로딩’…당국 “시스템 오류 해결”](https://www.donga.com/news/Society/article/all/20210716/107987824/1)
- [위메프, 새벽 중 시스템 오류로 지급된 5만 포인트 미회수 결정](https://www.koreapost.co.kr/news/articleView.html?idxno=61208)
- [네이버, 연이은 접속 오류... 보상은 ‘미미’](https://biz.newdaily.co.kr/site/data/html/2022/01/24/2022012400113.html)
- [네이버페이 이용자 자산정보 유출…시스템 오류](https://m.mk.co.kr/news/it/view/2021/12/1219484/)
- [“불편 드린 점 사과”…음원 사이트 멜론(Melon), 실시간 차트→탐색 시스템 오류 발생](https://www.topstarnews.net/news/articleView.html?idxno=14686520)
- [혁신 아이콘 카카오의 ‘민낯’…국내 3위 다음 ‘먹통’ 브랜드 이미지 ‘실추’](https://www.thedailypost.kr/news/articleView.html?idxno=86942)
- [전국 고속버스 발권 시스템 1시간 20분 가량 장애(종합)](https://www.mk.co.kr/news/society/view/2022/04/327578/)
- [다음 메일 6시간 넘게 ‘먹통’…내부 시스템 오류 때문](https://biz.sbs.co.kr/article/20000059393)
- [“하필 일요일 점심 때” 쿠팡이츠 시스템 오류](https://fetv.co.kr/news/article.html?no=113781)
- [롯데렌탈 '그린카', 서버 오류로 앱 먹통…"고객 불만 폭주"](https://www.edaily.co.kr/news/read?newsId=01787606632294808&mediaCodeNo=257)
- [국세청 연말정산 오류로 821명 개인정보 유출](https://www.mk.co.kr/news/economy/view/2022/01/82495/)

> 제가 이용하지 않는 서비스들에서 생각보다 많은 시스템 장애가 발생한 것을 확인할 수 있습니다. 

위처럼 시스템 장애에 대한 원인은 다양합니다. 당시에 심각한 사고였던 [KT 통신 장애](https://m.etnews.com/20211025000215)와 같이 인터넷 트래픽을 전달하는 장비의 설정 문제로 일부 네트워크 환경이 모두 마비되는 혼돈이 발생할 수도 있습니다. 이러한 문제라면 서버 인스턴스가 정상적이고 애플리케이션 코드에도 문제가 없더라도 인프라 영역의 장애이기 때문에 예상할 수 없는 장애입니다. 심지어는 클라우드 인프라 서비스를 활용해서 시스템을 운영하게 되는 시대이므로 [클라우드 서비스 조차도 시스템 장애의 발생 가능성이 없는 것은 아닌점](https://www.inews24.com/view/1353037)도 인지해야합니다. 그래서 시스템을 만들고 운영하는 조직에서도 시스템이 정상적으로 동작할 수 있도록 고객과 같은 외부 환경에서 지속적으로 서비스 상태를 체크하고 모니터링하여 서비스에 대한 가용성을 유지하는데 노력해야합니다. 실제로 아래와 같이 자신들이 제공하는 서비스 기능에 대한 상태 정보를 제공하는 페이지를 제공하는 곳이 꽤 많습니다.

- [Github Status](https://www.githubstatus.com/)
- [Slack System Status](https://status.slack.com/)
- [Spring Status](https://status.spring.io/)
- [Naver API Status](https://developers.naver.com/notice/apistatus/)

> 서비스 상태 정보를 제공하는 이유는 서비스 가용성을 유지하여 고객에게 신뢰성을 제공하기 위함입니다.

조직에서 만든 시스템을 자체적으로 하나의 플랫폼으로 운영했다면 시스템 모니터링에 대한 중요성을 공유하고 시스템을 구성하는 각 인스턴스들의 [지표 모니터링](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/cloudwatch-monitoring.html) 뿐만 아니라 [Datadog](https://www.datadoghq.com/)와 같은 상용 모니터링 솔루션 도입을 검토했을 것이라 생각합니다. A 라는 고객은 자체적으로 서버 인프라를 구축하고 관리하고 시스템 개발과 유지보수만 위임하고, B 라는 고객은 시스템 개발 및 유지보수 그리고 서버 인프라에 대한 관리도 할 수 있도록 권한을 부여해주기도 합니다. A 고객은 스스로의 경험에 따라 [Zabbix](https://www.zabbix.com/)로 서버 인프라를 모니터링하도록 구축했으며 B 라는 고객은 아마존 웹 서비스의 [클라우드 와치 지표 모니터링](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/cloudwatch-monitoring.html)과 여러가지 로그가 S3에 저장되도록 구성합니다.

> B 고객은 대기업 규모로 자체 가이드가 존재하지만 현재 조직에 공유된 사항은 없으므로 최소한의 설정으로 구성하고 피드백을 받아서 추가 조치를 하고 있습니다. 고객마다 보안을 신경쓰는 부분이나 수준도 다릅니다.

떠오르는 [Datadog](https://www.datadoghq.com/)과 같은 상용 모니터링 솔루션을 도입해보면 좋겠지만 생각보다 비용이 상당히 비싼것으로 보입니다. 개인적으로 오픈소스 모니터링 솔루션인 [Promethues](https://prometheus.io/)와 [Uptime Kuma](https://github.com/louislam/uptime-kuma)같은 오픈소스 모니터링 도구를 활용해서 간단하게나마 [서비스 장애의 원인을 찾기위한 시도](/struggle-with-unknown-service-failures/)에 활용해보고 있습니다. 실제로 근무 시간이 아닌 시간대에 시스템의 응답 시간이 늘어남을 확인할 수 있던 부분을 통해서 예상하지 못했던 원인을 찾게되면서 모니터링의 중요성을 다시한번 알게되는 경험을 하였습니다.

![](https://images.mysetting.io/upload/user_image/2021/f3240207-fe1e-472b-bdb8-508b1332d8f6.jpeg?d=512x)

우리는 시스템을 개발하는데 그치지 않고 시스템을 정상적으로 운영하는 것을 유지하는데 많은 노력이 필요한 것 같습니다. 조직에서 정해진 방식이 없더라도 누군가는 시도해보고 중요성을 공유해야할 것으로 보입니다. 조직 세미나에서 모니터링 중요성에 대한 내용을 전달해보려고 준비해야겠습니다.

감사합니다.