<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":{"enable":false,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="ë³¸ ê¸€ì€ ë ˆë””ìŠ¤ ê´€ë ¨ ê²°í•¨ì„ ê²½í—˜í•œ ê²ƒì„ í† ëŒ€ë¡œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ë™ì‘ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‘ì„±í•œ ê²ƒ ì…ë‹ˆë‹¤.  ë§ì€ ìë°” ê°œë°œìê°€ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë³„ë‹¤ë¥¸ ì½”ë“œ êµ¬í˜„ ì—†ì´ë„ ì—¬ëŸ¬ ê°œë°œìë“¤ì— ì˜í•´ ì‘ì„±ë˜ì–´ì§„ ë¡œì§ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ì„œ ì‰½ê³  ë¹ ë¥´ê²Œ ì›í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë™ì‘ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ì‹œí‚¤ê¸° ìœ„í•œ ëª©ì ì´ í¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜"><meta property="og:type" content="article"><meta property="og:title" content="Spring Session"><meta property="og:url" content="https://kdevkr.github.io/spring-session/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="ë³¸ ê¸€ì€ ë ˆë””ìŠ¤ ê´€ë ¨ ê²°í•¨ì„ ê²½í—˜í•œ ê²ƒì„ í† ëŒ€ë¡œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ë™ì‘ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‘ì„±í•œ ê²ƒ ì…ë‹ˆë‹¤.  ë§ì€ ìë°” ê°œë°œìê°€ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë³„ë‹¤ë¥¸ ì½”ë“œ êµ¬í˜„ ì—†ì´ë„ ì—¬ëŸ¬ ê°œë°œìë“¤ì— ì˜í•´ ì‘ì„±ë˜ì–´ì§„ ë¡œì§ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ì„œ ì‰½ê³  ë¹ ë¥´ê²Œ ì›í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë™ì‘ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ì‹œí‚¤ê¸° ìœ„í•œ ëª©ì ì´ í¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-12-03T15:00:00.000Z"><meta property="article:modified_time" content="2024-03-27T13:40:04.303Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="Session"><meta property="article:tag" content="Redis"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://kdevkr.github.io/spring-session/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/spring-session/","path":"spring-session/","title":"Spring Session"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Spring Session | Mambo</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V8LF04VMBF"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned ğŸ”¥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">138</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">138</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">213</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail â†’ mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/spring-session/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Spring Session | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Spring Session</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-12-04 00:00:00" itemprop="dateCreated datePublished" datetime="2022-12-04T00:00:00+09:00">2022-12-04</time></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>ë³¸ ê¸€ì€ <a target="_blank" rel="noopener" href="https://github.com/kdevkr/mambo-box/blob/main/errors/2022-11-30.md">ë ˆë””ìŠ¤ ê´€ë ¨ ê²°í•¨</a>ì„ ê²½í—˜í•œ ê²ƒì„ í† ëŒ€ë¡œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ë™ì‘ì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‘ì„±í•œ ê²ƒ ì…ë‹ˆë‹¤.</p></blockquote><p>ë§ì€ ìë°” ê°œë°œìê°€ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë³„ë‹¤ë¥¸ ì½”ë“œ êµ¬í˜„ ì—†ì´ë„ ì—¬ëŸ¬ ê°œë°œìë“¤ì— ì˜í•´ ì‘ì„±ë˜ì–´ì§„ ë¡œì§ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ì„œ ì‰½ê³  ë¹ ë¥´ê²Œ ì›í•˜ëŠ” ê¸°ëŠ¥ê³¼ ë™ì‘ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ì‹œí‚¤ê¸° ìœ„í•œ ëª©ì ì´ í¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìë°” ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì–¸ì–´ì˜ í”„ë ˆì„ì›Œí¬ì—ì„œë„ êµ¬í˜„ëœ ì½”ë“œë“¤ì„ ì „ë¶€ í™•ì¸í•˜ê³  ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì„ ê²½ìš°ê°€ ë§ì„í…ë°ìš”. ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ êµ¬í˜„ ë²”ìœ„ê°€ ìƒë‹¹íˆ ë§ë‹¤ë³´ë‹ˆ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ê°œë… í˜¹ì€ ë™ì‘ì— ëŒ€í•´ì„œ ëŒ€ì¶© ì´í•´í•˜ê³  ë„˜ì–´ê°€ê±°ë‚˜ ì•„ëŠ” ì„ ì—ì„œ ì‚¬ìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤.</p><p>ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ì˜í•œ ê²°í•¨ì„ ë§Œë“¤ì–´ë‚¸ ì´ìœ ë„ RequestContextHolderë¥¼ í†µí•´ì„œ ìŠ¤ë ˆë“œ ë¡œì»¬ì— ì €ì¥ëœ ìš”ì²­ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê³  RequestContextHolderë¡œ ë¶€í„° ê°€ì ¸ì˜¨ RequestAttributesì— ì„¸ì…˜ ì•„ì´ë””ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ê°€ ìˆê¸°ì— ì‚¬ìš©í–ˆë˜ ê²ƒìœ¼ë¡œë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤. ê°œì¸ì ì¸ ê²½í—˜ìœ¼ë¡œ ë³¼ë•ŒëŠ” ìŠ¤í”„ë§ ì„¸ì…˜ê³¼ ë ˆë””ìŠ¤ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœí•˜ê²Œ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±ë§Œ ì¶”ê°€í•˜ê³  ë ˆë””ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì •ë³´ ê·¸ë¦¬ê³  ìŠ¤í”„ë§ ì„¸ì…˜ì„ í™œì„±í™”í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ëŠ” ê²ƒ ë¿ì´ë¯€ë¡œ ë‚´ì¬ëœ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì œëŒ€ë¡œ í™•ì¸í•  í•„ìš”ì„±ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p><h4 id="TCPì™€-HTTPì˜-ì„¸ì…˜ì€-ë‹¤ë¥´ë‹¤"><a href="#TCPì™€-HTTPì˜-ì„¸ì…˜ì€-ë‹¤ë¥´ë‹¤" class="headerlink" title="TCPì™€ HTTPì˜ ì„¸ì…˜ì€ ë‹¤ë¥´ë‹¤."></a>TCPì™€ HTTPì˜ ì„¸ì…˜ì€ ë‹¤ë¥´ë‹¤.</h4><blockquote><p>Spring Session provides transparent integration with HttpSession. This means that developers can switch the HttpSession implementation out with an implementation that is backed by Spring Session.</p></blockquote><p>TCPì—ì„œì˜ ì„¸ì…˜ì€ ì—°ê²°ì„ ì˜ë¯¸í•˜ì§€ë§Œ HTTPì—ì„œì˜ ì„¸ì…˜ì€ ì—°ê²°ì— ëŒ€í•œ ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ìŠ¤í”„ë§ ì„¸ì…˜ì€ TCP ë ˆë²¨ì´ ì•„ë‹Œ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-session/reference/http-session.html">HTTP ì„¸ì…˜</a>ì— ëŒ€í•œ í†µí•©ì„ ì§€ì›í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ì— ì„¸ì…˜ì„ ì €ì¥í•˜ê²Œ ë˜ëŠ” ê²ƒì„ JDBC ê¸°ë°˜ìœ¼ë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•œë‹¤ê±°ë‚˜ ë ˆë””ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ì„¸ì…˜ ì €ì¥ì†Œë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ëŠ” ê²ƒë„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><h4 id="WASëŠ”-ì„¸ì…˜-ê´€ë¦¬ë¥¼-ì§€ì›í•œë‹¤"><a href="#WASëŠ”-ì„¸ì…˜-ê´€ë¦¬ë¥¼-ì§€ì›í•œë‹¤" class="headerlink" title="WASëŠ” ì„¸ì…˜ ê´€ë¦¬ë¥¼ ì§€ì›í•œë‹¤."></a>WASëŠ” ì„¸ì…˜ ê´€ë¦¬ë¥¼ ì§€ì›í•œë‹¤.</h4><p>í†°ìº£ì´ë‚˜ ì–¸ë”í† ìš°ì™€ ê°™ì€ WASì—ì„œë„ ìì²´ì ìœ¼ë¡œ <a target="_blank" rel="noopener" href="https://github.com/undertow-io/undertow/blob/master/core/src/main/java/io/undertow/server/session/Session.java">ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ ì„¸ì…˜</a>ì„ ì§€ì›í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ì„¸ì…˜ì—ì„œëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(WAS)ê°€ ìì²´ì ì¸ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šë„ë¡ <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-session/blob/main/spring-session-core/src/main/java/org/springframework/session/web/context/AbstractHttpSessionApplicationInitializer.java">AbstractHttpSessionApplicationInitializer</a>ë¥¼ í†µí•´ springSessionRepositoryFilter ì´ë¼ëŠ” ì´ë¦„ì˜ íŠ¹ìˆ˜í•œ í•„í„°ë¥¼ ë“±ë¡í•˜ì—¬ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ ì²˜ë¦¬ë˜ë„ë¡ ìš”êµ¬í•©ë‹ˆë‹¤.</p><blockquote><p>Fortunately, both HttpSession and HttpServletRequest (the API for obtaining an HttpSession) are both interfaces. This means that we can provide our own implementations for each of these APIs.<br>This highlights why it is important that Spring Sessionâ€™s SessionRepositoryFilter be placed before anything that interacts with the HttpSession.</p></blockquote><h4 id="ìŠ¤í”„ë§-ì„¸ì…˜ì€-ìì²´-êµ¬í˜„-ì„¸ì…˜ìœ¼ë¡œ-ì „í™˜í•œë‹¤"><a href="#ìŠ¤í”„ë§-ì„¸ì…˜ì€-ìì²´-êµ¬í˜„-ì„¸ì…˜ìœ¼ë¡œ-ì „í™˜í•œë‹¤" class="headerlink" title="ìŠ¤í”„ë§ ì„¸ì…˜ì€ ìì²´ êµ¬í˜„ ì„¸ì…˜ìœ¼ë¡œ ì „í™˜í•œë‹¤."></a>ìŠ¤í”„ë§ ì„¸ì…˜ì€ ìì²´ êµ¬í˜„ ì„¸ì…˜ìœ¼ë¡œ ì „í™˜í•œë‹¤.</h4><p>SessionRepositoryFilterê°€ ìˆ˜í–‰í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì€ ìë°” ì„œë¸”ë¦¿ ìŠ¤í™ì˜ HTTP ì„¸ì…˜ì„ ìì²´ì ì¸ ì„¸ì…˜ í´ë˜ìŠ¤ë¡œ ì „í™˜í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚´ë¶€ì ìœ¼ë¡œ HTTP ì„¸ì…˜ê³¼ ìŠ¤í”„ë§ ì„¸ì…˜ì„ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ ì¿ í‚¤ ê¸°ë°˜ì˜ HttpSessionIdResolverë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆì£ . ê²°êµ­ SessionRepository êµ¬í˜„ì²´ì— ë”°ë¼ JDBC ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ”ì§€ ë ˆë””ìŠ¤ì— ì €ì¥í•˜ëŠ”ì§€ êµ¬ë¶„ë˜ì–´ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><blockquote><p>Switches the HttpSession implementation to be backed by a Session. The SessionRepositoryFilter wraps the HttpServletRequest and overrides the methods to get an HttpSession to be backed by a Session returned by the SessionRepository.</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token constant">SESSION_REPOSITORY_ATTR</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sessionRepository<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SessionRepositoryRequestWrapper</span> wrappedRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionRepositoryRequestWrapper</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SessionRepositoryResponseWrapper</span> wrappedResponse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionRepositoryResponseWrapper</span><span class="token punctuation">(</span>wrappedRequest<span class="token punctuation">,</span>
            response<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>wrappedRequest<span class="token punctuation">,</span> wrappedResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
        wrappedRequest<span class="token punctuation">.</span><span class="token function">commitSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre><p>SessionRepositoryFilterì˜ ìœ„ êµ¬í˜„ì²˜ëŸ¼ ê°€ì¥ ë¨¼ì € ì²˜ë¦¬ë¨ìœ¼ë¡œì¨ ìš”ì²­ ìŠ¤ë ˆë“œ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ì–´ì§„ ì„¸ì…˜ì— ëŒ€í•´ì„œëŠ” ì‘ë‹µì´ ì™„ë£Œëœ ì´í›„ì— ìµœì¢…ì ìœ¼ë¡œ ë°˜ì˜ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê²½í—˜í–ˆë˜ ë ˆë””ìŠ¤ ê²°í•¨ì—ì„œë„ ì„œë¹„ìŠ¤ í˜¹ì€ í¼ì‹œìŠ¤í„´ìŠ¤ ë ˆì´ì–´ì—ì„œ ì„¸ì…˜ì´ ìƒì„±ë˜ë”ë¼ë„ ì„¸ì…˜ ì •ë³´ë¥¼ ë ˆë””ìŠ¤ì— ì €ì¥í•˜ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤.</p><blockquote><p>ë ˆë””ìŠ¤ì— ì €ì¥ë˜ëŠ” ìì„¸í•œ ë‚´ìš©ì€ ìŠ¤í”„ë§ ì„¸ì…˜ ê³µì‹ ë¬¸ì„œì˜ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-session/docs/2.4.6/reference/html5/#api-redisindexedsessionrepository-storage">Storage Details</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></blockquote><h4 id="ìŠ¤í”„ë§-ì„¸ì…˜-ë ˆë””ìŠ¤ëŠ”-ìŠ¤ì¼€ì¤„ë§ì„-í†µí•´-ë§Œë£Œëœ-í‚¤ë¥¼-ì‚­ì œí•œë‹¤"><a href="#ìŠ¤í”„ë§-ì„¸ì…˜-ë ˆë””ìŠ¤ëŠ”-ìŠ¤ì¼€ì¤„ë§ì„-í†µí•´-ë§Œë£Œëœ-í‚¤ë¥¼-ì‚­ì œí•œë‹¤" class="headerlink" title="ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ëŠ” ìŠ¤ì¼€ì¤„ë§ì„ í†µí•´ ë§Œë£Œëœ í‚¤ë¥¼ ì‚­ì œí•œë‹¤."></a>ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ëŠ” ìŠ¤ì¼€ì¤„ë§ì„ í†µí•´ ë§Œë£Œëœ í‚¤ë¥¼ ì‚­ì œí•œë‹¤.</h4><p>SessionCleanupConfigurationì—ì„œ RedisSessionExpirationPolicyì˜ cleanExpiredSessions í•¨ìˆ˜ë¥¼ ìŠ¤ì¼€ì¤„ëŸ¬ì— ë“±ë¡í•˜ì—¬ ìŠ¤í”„ë§ì—ì„œ ìì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ìŠ¤ì¼€ì¤„ë§ì— ì˜í•´ ë§Œë£Œëœ í‚¤ê°€ ì‚­ì œë©ë‹ˆë‹¤. ë‹¤ë§Œ, ë ˆë””ìŠ¤ì˜ ë§Œë£Œ ì´ë²¤íŠ¸ì˜ íƒ€ì´ë° ë¬¸ì œë¡œ ì¸í•´ì„œ TTLì´ ë§Œë£Œëœ ì´í›„ì— ë ˆë””ìŠ¤ê°€ ì•Œì•„ì„œ ì‚­ì œí•˜ë„ë¡ ìŠ¤í”„ë§ ì„¸ì…˜ ë ˆë””ìŠ¤ì—ì„œëŠ” ëª…ì‹œì ìœ¼ë¡œ í‚¤ë¥¼ ì‚­ì œí•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ ì¡°íšŒ(ì•¡ì„¸ìŠ¤)í•©ë‹ˆë‹¤.</p><blockquote><p>We do not explicitly delete the keys, since, in some instances, there may be a race condition that incorrectly identifies a key as expired when it is not. Short of using distributed locks (which would kill our performance), there is no way to ensure the consistency of the expiration mapping. By simply accessing the key, we ensure that the key is only removed if the TTL on that key is expired.</p></blockquote></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Session/" rel="tag"># Session</a> <a href="/tags/Redis/" rel="tag"># Redis</a></div><div class="post-nav"><div class="post-nav-item"><a href="/quartz/" rel="prev" title="ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬"><i class="fa fa-chevron-left"></i> ì¿¼ì¸  ìŠ¤ì¼€ì¤„ëŸ¬</a></div><div class="post-nav-item"><a href="/redis-memory-usage-issue/" rel="next" title="ë ˆë””ìŠ¤ ì¥ì•  íšŒê³ ">ë ˆë””ìŠ¤ ì¥ì•  íšŒê³  <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments giscus-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"ğŸŒ—",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"kdevkr/kdevkr.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxNTQxNjA4OTA=","category":"Announcements","category_id":"DIC_kwDOCTBO-s4CYmQM","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"ko","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script></body></html>