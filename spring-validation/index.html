<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CGmarket+Sans:300,300italic,400,400italic,700,700italic%7CRIDIBatang:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="스프링 부트 애플리케이션에서 벨리데이션 오류에 대한 메시지가 사용자 언어에 따라 처리되지 않는 사유를 경험하였고 이와 같은 문제가 발생한 원인을 분석하고 벨리데이션에 대해 정리한 글입니다.  자카르타 벨리데이션Validation 어디까지 해봤니?에서 소개하듯이 스프링 부트의 벨리데이션 스타터를 추가하면 Jakarta Bean Validation API와"><meta property="og:type" content="article"><meta property="og:title" content="벨리데이션 오류 메시지가 사용자 언어로 처리되지 않은 이유"><meta property="og:url" content="https://kdevkr.github.io/spring-validation/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="스프링 부트 애플리케이션에서 벨리데이션 오류에 대한 메시지가 사용자 언어에 따라 처리되지 않는 사유를 경험하였고 이와 같은 문제가 발생한 원인을 분석하고 벨리데이션에 대해 정리한 글입니다.  자카르타 벨리데이션Validation 어디까지 해봤니?에서 소개하듯이 스프링 부트의 벨리데이션 스타터를 추가하면 Jakarta Bean Validation API와"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-02-17T00:00:00.000Z"><meta property="article:modified_time" content="2022-02-17T14:42:10.700Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="Jakarta Bean Validation"><meta property="article:tag" content="Hibernate Validator"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://kdevkr.github.io/spring-validation/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/spring-validation/","path":"spring-validation/","title":"벨리데이션 오류 메시지가 사용자 언어로 처리되지 않은 이유"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>벨리데이션 오류 메시지가 사용자 언어로 처리되지 않은 이유 | Mambo</title><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-93954323-1","only_pageview":true}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Mambo</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned 🔥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">45</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%9E%90%EC%B9%B4%EB%A5%B4%ED%83%80-%EB%B2%A8%EB%A6%AC%EB%8D%B0%EC%9D%B4%EC%85%98"><span class="nav-number">1.</span> <span class="nav-text">자카르타 벨리데이션</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%98%A4%EB%A5%98-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%B2%98%EB%A6%AC"><span class="nav-number">1.1.</span> <span class="nav-text">오류 메시지 처리</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EB%A1%9C%EC%BC%80%EC%9D%BC-%EC%9D%B4%EC%8A%88"><span class="nav-number">1.2.</span> <span class="nav-text">로케일 이슈</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%96%B8%EC%96%B4-%EA%B8%B0%EB%B0%98%EC%9D%98-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%B2%98%EB%A6%AC"><span class="nav-number">2.</span> <span class="nav-text">사용자 언어 기반의 메시지 처리</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LocalValidatorFactoryBean"><span class="nav-number">2.1.</span> <span class="nav-text">LocalValidatorFactoryBean</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EC%B0%B8%EA%B3%A0"><span class="nav-number">3.</span> <span class="nav-text">참고</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">45</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">66</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail → mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/spring-validation/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">벨리데이션 오류 메시지가 사용자 언어로 처리되지 않은 이유</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-02-17 00:00:00" itemprop="dateCreated datePublished" datetime="2022-02-17T00:00:00Z">2022-02-17</time></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>스프링 부트 애플리케이션에서 벨리데이션 오류에 대한 메시지가 사용자 언어에 따라 처리되지 않는 사유를 경험하였고 이와 같은 문제가 발생한 원인을 분석하고 벨리데이션에 대해 정리한 글입니다.</p></blockquote><h2 id="자카르타-벨리데이션"><a href="#자카르타-벨리데이션" class="headerlink" title="자카르타 벨리데이션"></a>자카르타 벨리데이션</h2><p><a target="_blank" rel="noopener" href="https://meetup.toast.com/posts/223">Validation 어디까지 해봤니?</a>에서 소개하듯이 스프링 부트의 벨리데이션 스타터를 추가하면 <a target="_blank" rel="noopener" href="https://beanvalidation.org/2.0/">Jakarta Bean Validation API</a>와 함께 <a target="_blank" rel="noopener" href="https://hibernate.org/validator/">Hibernate Validator</a> 라이브러리가 의존성으로 포함됩니다. 그리고 ValidationAutoConfiguration 이라는 자동 구성 클래스를 통해 LocalValidatorFactoryBean가 기본적인 Validator 빈으로 등록됩니다.</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-validation&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>하이버네이트 벨리데이터에는 기본적인 메시지 소스 번들을 포함하고 있기 때문에 자카르타 벨리데이션에서 제공하는 어노테이션이나 하이버네이트 벨리데이터에서 제공하는 어노테이션에 대한 메시지를 별도로 정의하지 않아도 한국 또는 일본 등과 같은 주요 국가에서 사용하는 언어에 대해서는 메시지를 처리할 수 있습니다.</p><blockquote><p>하이버네이트 벨리데이터에서 관리하는 메시지 소스 번들 파일은 ValidationMessages 입니다.</p></blockquote><h3 id="오류-메시지-처리"><a href="#오류-메시지-처리" class="headerlink" title="오류 메시지 처리"></a>오류 메시지 처리</h3><p>자카르타 벨리데이션은 자체적으로 팩토리 함수를 통해 간단하게 벨리데이터를 생성할 수 있습니다. 그래서 별다른 설정이 없어도 하이버네이트 벨리데이터 구현체에 의한 벨리데이터로 자바 빈 클래스의 필드 검증을 수행할 수 있습니다. 예를 들어, 다음과 같이 벨리데이션을 수행하죠.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">validate</span><span class="params">(Account.Login login)</span> </span>&#123;</span><br><span class="line">        Validator validator = Validation.buildDefaultValidatorFactory().getValidator();</span><br><span class="line">        Set&lt;ConstraintViolation&lt;Account.Login&gt;&gt; constraintViolations = validator.validate(login);</span><br><span class="line">        <span class="keyword">return</span> constraintViolations.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="로케일-이슈"><a href="#로케일-이슈" class="headerlink" title="로케일 이슈"></a>로케일 이슈</h3><p>스프링 컨트롤러의 핸들러 함수에서 <code>@Valid</code> 또는 <code>@Validated</code>에 의해 처리되는 벨리데이션은 애플리케이션 컨텍스트에 등록된 SmartValidator인 LocalValidatorFactoryBean에 의해서 수행되었기 때문에 이번 글의 주요 핵심인 사용자 언어로 메시지가 처리되지 않는 현상이 발생하지 않습니다. 그러나 이번에는 고객의 요구사항에 의해 CSV 또는 엑셀 파일을 업로드하여 어떠한 정보를 벌크 형식으로 추가할 수 있게 지원해야했고 그 과정에서 입력된 정보를 검증하기 위해서 <strong>기본 자카르타 벨리데이터</strong>를 생성하여 처리했습니다. 기본 자카르타 벨리데이터를 사용하여 벨리데이션을 수행하고 오류 사항에 대해 처리된 메시지를 확인해보면 시스템의 로케일 정보를 기반으로 번역되는 것을 확인할 수 있었습니다.</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">LoginController : [ConstraintViolationImpl&#123;interpolatedMessage=<span class="string">&#x27;공백일 수 없습니다&#x27;</span>, propertyPath=loginId, rootBeanClass=class com.example.springboot.bean.Account<span class="variable">$Login</span>, messageTemplate=<span class="string">&#x27;&#123;javax.validation.constraints.NotBlank.message&#125;&#x27;</span>&#125;]</span><br><span class="line">LoginController : locale: en_US</span><br></pre></td></tr></table></figure><blockquote><p>로그인 요청 시 사용자의 언어는 en_US 이지만 벨리데이션 오류 메시지는 시스템 로케일 정보인 ko_KR을 기준으로 번역되었습니다. 이와 같이 많은 글을 참고해보면 기본 벨리데이터로 여러 언어에 대해서 시도해보는 경우 시스템 로케일 값을 변경하는 것을 확인할 수 있습니다.</p></blockquote><h2 id="사용자-언어-기반의-메시지-처리"><a href="#사용자-언어-기반의-메시지-처리" class="headerlink" title="사용자 언어 기반의 메시지 처리"></a>사용자 언어 기반의 메시지 처리</h2><p>파일 업로드를 통해 벌크 형식으로 입력된 정보를 검증하고 사용자의 언어 정보에 따라 메시지를 처리하려면 어떻게 해야될까요? 사용자의 언어 정보를 기반으로 메시지를 제공하기 위해서는 기본으로 사용되는 MessageInterpolator를 설정해야만 합니다. 다행히도 스프링 프레임워크에는 LocaleContextHolder.getLocale 함수를 기반으로 메시지를 처리할 수 있게 구현된 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/LocaleContextMessageInterpolator.html"><strong>LocaleContextMessageInterpolator</strong></a>를 제공합니다.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Configuration&lt;?&gt; configuration = Validation.byDefaultProvider().configure();</span><br><span class="line">MessageInterpolator defaultMessageInterpolator = configuration.getDefaultMessageInterpolator();</span><br><span class="line">LocaleContextMessageInterpolator localeContextMessageInterpolator = <span class="keyword">new</span> LocaleContextMessageInterpolator(defaultMessageInterpolator);</span><br><span class="line"></span><br><span class="line">Validator defaultValidator = configuration</span><br><span class="line">        .messageInterpolator(localeContextMessageInterpolator)</span><br><span class="line">        .buildValidatorFactory()</span><br><span class="line">        .getValidator();</span><br></pre></td></tr></table></figure><blockquote><p>기본 자카르타 벨리데이터 수행 시 시스템 로케일 기반으로 번역된 메시지는 아래와 같이 로그인을 요청한 사용자의 언어 정보를 기반으로 메시지가 정상적으로 처리되었습니다.</p></blockquote><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[ConstraintViolationImpl&#123;interpolatedMessage=<span class="string">&#x27;must not be blank&#x27;</span>, propertyPath=loginId, rootBeanClass=class com.example.springboot.bean.Account<span class="variable">$Login</span>, messageTemplate=<span class="string">&#x27;&#123;javax.validation.constraints.NotBlank.message&#125;&#x27;</span>&#125;]</span><br><span class="line">locale: en_US</span><br></pre></td></tr></table></figure><h3 id="LocalValidatorFactoryBean"><a href="#LocalValidatorFactoryBean" class="headerlink" title="LocalValidatorFactoryBean"></a>LocalValidatorFactoryBean</h3><p>현재 조직에서는 오래전에 공유한 <a href="managing-i18n-messages-with-xml">XML로 다국어 메시지 관리하기</a>에서처럼 XML 파일을 기반으로 다국어 메시지 정보를 관리하고 있습니다. 그리고 이 메시지 소스를 사용하도록 LocalValidatorFactoryBean를 직접 빈으로 등록하고 있었죠.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.MessageSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.beanvalidation.LocalValidatorFactoryBean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocalValidatorFactoryBean <span class="title">validator</span><span class="params">(CustomMessageSource customMessageSource)</span> </span>&#123;</span><br><span class="line">        LocalValidatorFactoryBean factoryBean = <span class="keyword">new</span> LocalValidatorFactoryBean();</span><br><span class="line">        factoryBean.setValidationMessageSource(customMessageSource);</span><br><span class="line">        <span class="keyword">return</span> factoryBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>현재 조직에서 Validator 빈으로 등록하여 사용하고 있던 LocalValidatorFactoryBean는 조직에서 정의한 메시지에 대해서는 처리할 수 있을테지만 하이버네이트 벨리데이터에 포함된 ValidationMessages를 통해서는 메시지가 처리되지 않는 문제를 내재하고 있었습니다.</p></blockquote><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">LoginController : [ConstraintViolationImpl&#123;interpolatedMessage=<span class="string">&#x27;javax.validation.constraints.NotBlank.message&#x27;</span>, propertyPath=loginId, rootBeanClass=class com.example.springboot.bean.Account<span class="variable">$Login</span>, messageTemplate=<span class="string">&#x27;&#123;javax.validation.constraints.NotBlank.message&#125;&#x27;</span>&#125;]</span><br><span class="line">LoginController : locale: en_US</span><br></pre></td></tr></table></figure><p>기본 자카르타 벨리데이터 대신에 애플리케이션 컨텍스트에 빈으로 등록된 Validator인 LocalValidatorFactoryBean를 사용했지만 벨리데이터에서 사용하는 벨리데이션 메시지 소스를 사용자 정의된 메시지 소스 번들로 지정하였기에 하이버네이트 벨리데이터에 포함된 벨리데이션 메시지 소스를 적용되지 않았습니다.</p><blockquote><p>벨리데이션 메시지 소스를 계층으로 구성하였지만 벨리데이션에 대한 오류 메시지를 확인해보면 번역된 메시지로 처리되지 않습니다. 그 이유는 앞서 알게된 MessageInterpolator가 등록되지 않았기 때문입니다.</p></blockquote><h4 id="LocaleContextMessageInterpolator"><a href="#LocaleContextMessageInterpolator" class="headerlink" title="LocaleContextMessageInterpolator"></a>LocaleContextMessageInterpolator</h4><p>자카르타 기본 벨리데이터에서 알게된 바와 같이 LocaleContextMessageInterpolator를 등록하면 사용자 언어 정보를 기반으로 메시지가 번역되어 처리됩니다.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> LocalValidatorFactoryBean <span class="title">validator</span><span class="params">(CustomMessageSource messageSource)</span> </span>&#123;</span><br><span class="line">    LocalValidatorFactoryBean factoryBean = <span class="keyword">new</span> LocalValidatorFactoryBean();</span><br><span class="line">    factoryBean.setValidationMessageSource(messageSource);</span><br><span class="line"></span><br><span class="line">    MessageInterpolator defaultMessageInterpolator = Validation.byDefaultProvider().configure().getDefaultMessageInterpolator();</span><br><span class="line">    LocaleContextMessageInterpolator localeContextMessageInterpolator = <span class="keyword">new</span> LocaleContextMessageInterpolator(defaultMessageInterpolator);</span><br><span class="line">    factoryBean.setMessageInterpolator(localeContextMessageInterpolator);</span><br><span class="line">    <span class="keyword">return</span> factoryBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="MessageInterpolatorFactory"><a href="#MessageInterpolatorFactory" class="headerlink" title="MessageInterpolatorFactory"></a>MessageInterpolatorFactory</h4><p>스프링 부트에서 제공하는 MessageInterpolatorFactory를 통해 MessageInterpolator를 등록할 수도 있습니다.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> LocalValidatorFactoryBean <span class="title">validator</span><span class="params">(CustomMessageSource messageSource)</span> </span>&#123;</span><br><span class="line">    LocalValidatorFactoryBean factoryBean = <span class="keyword">new</span> LocalValidatorFactoryBean();</span><br><span class="line">    factoryBean.setValidationMessageSource(messageSource);</span><br><span class="line"></span><br><span class="line">    MessageInterpolatorFactory messageInterpolatorFactory = <span class="keyword">new</span> MessageInterpolatorFactory();</span><br><span class="line">    factoryBean.setMessageInterpolator(messageInterpolatorFactory.getObject());</span><br><span class="line">    <span class="keyword">return</span> factoryBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>MessageInterpolatorFactory는 클래스패스에 있는 MessageInterpolator를 가져오도록 되어있습니다.<br>따라서, 하이버네이트 벨리데이터에 포함된 ResourceBundleMessageInterpolator를 MessageInterpolator로 등록하게 됩니다.</p></blockquote><p>이렇게 해서 자카르타 기본 벨리데이터를 통해 사용자 언어 정보에 따라 메시지를 처리하기 위해서는 LocaleContextMessageInterpolator를 등록해야하며 스프링 프레임워크에서 제공하는 LocalValidatorFactoryBean를 사용하더라도 MessageInterpolatorFactory를 사용하도록 구성해야한다는 것을 알게되었습니다.</p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="/managing-i18n-messages-with-xml">XML로 다국어 메시지 관리하기</a></li><li><a target="_blank" rel="noopener" href="https://meetup.toast.com/posts/223">Validation 어디까지 해봤니?</a></li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Jakarta-Bean-Validation/" rel="tag"># Jakarta Bean Validation</a> <a href="/tags/Hibernate-Validator/" rel="tag"># Hibernate Validator</a></div><div class="post-nav"><div class="post-nav-item"><a href="/spring-boot-accesslog-with-elasticsearch/" rel="prev" title="스프링 부트 액세스 로그를 엘라스틱서치에 기록하기"><i class="fa fa-chevron-left"></i> 스프링 부트 액세스 로그를 엘라스틱서치에 기록하기</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comments"><script src="https://utteranc.es/client.js" repo="kdevkr/kdevkr.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌗",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script></body></html>