<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222"><meta name="google-site-verification" content="LMcddVW6xLBS7X1htGQ3duOIEmVp4ljku8sd3UuIcBg"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+KR:300,300italic,400,400italic,700,700italic%7CPretendard-Bold:300,300italic,400,400italic,700,700italic%7CPretendard-Medium:300,300italic,400,400italic,700,700italic%7CJetbrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"kdevkr.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"width":240,"scrollpercent":true,"b2t":true},"copycode":{"enable":false,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script><meta name="description" content="안녕하세요 Mambo 입니다. 오늘은 로드밸런서를 활용한 TLS 오프로드에 대해서 정리해보고자 합니다. 지난 SSL 인증서에서는 HTTPS를 웹 서비스에 적용하는 이유와 함께 SSL 인증서를 발급하고 TLS 핸드쉐이크를 어떤 방식으로 수행하는지를 확인했습니다. 이 글에서는 아마존 웹 서비스의 ELB(Elastic Load Balancing)에서 지원하는 T"><meta property="og:type" content="article"><meta property="og:title" content="TLS 오프로드"><meta property="og:url" content="https://kdevkr.github.io/tls-offload/index.html"><meta property="og:site_name" content="Mambo"><meta property="og:description" content="안녕하세요 Mambo 입니다. 오늘은 로드밸런서를 활용한 TLS 오프로드에 대해서 정리해보고자 합니다. 지난 SSL 인증서에서는 HTTPS를 웹 서비스에 적용하는 이유와 함께 SSL 인증서를 발급하고 TLS 핸드쉐이크를 어떤 방식으로 수행하는지를 확인했습니다. 이 글에서는 아마존 웹 서비스의 ELB(Elastic Load Balancing)에서 지원하는 T"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-01.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-02.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-03.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-04.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-05.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-06.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-07.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-08.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-09.png"><meta property="og:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-10.png"><meta property="article:published_time" content="2021-08-31T15:00:00.000Z"><meta property="article:modified_time" content="2023-10-09T09:49:14.268Z"><meta property="article:author" content="Mambo"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="TLS"><meta property="article:tag" content="ELB"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kdevkr.github.io/images/posts/tls-offload/tls-offload-01.png"><link rel="canonical" href="https://kdevkr.github.io/tls-offload/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kdevkr.github.io/tls-offload/","path":"tls-offload/","title":"TLS 오프로드"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>TLS 오프로드 | Mambo</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-V8LF04VMBF"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-V8LF04VMBF","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Mambo" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Mambo</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Today I Learned 🔥</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>Archives<span class="badge">99</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-user fa-fw"></i>About</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSL-%EC%98%A4%ED%94%84%EB%A1%9C%EB%93%9C"><span class="nav-number">1.</span> <span class="nav-text">SSL 오프로드</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mutual-TLS"><span class="nav-number">1.1.</span> <span class="nav-text">Mutual TLS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AWS-NLB"><span class="nav-number">1.2.</span> <span class="nav-text">AWS NLB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AWS-ALB"><span class="nav-number">1.3.</span> <span class="nav-text">AWS ALB</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elastic-Beanstalk-TLS-%EC%98%A4%ED%94%84%EB%A1%9C%EB%93%9C"><span class="nav-number">2.</span> <span class="nav-text">Elastic Beanstalk TLS 오프로드</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Elastic-Beanstalk-Java-SE-%ED%94%8C%EB%9E%AB%ED%8F%BC"><span class="nav-number">2.1.</span> <span class="nav-text">Elastic Beanstalk Java SE 플랫폼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%8C%A8%ED%82%A4%EC%A7%95-%EB%B0%8F-Java-SE-%ED%94%8C%EB%9E%AB%ED%8F%BC-%ED%99%95%EC%9E%A5"><span class="nav-number">2.2.</span> <span class="nav-text">스프링 애플리케이션 패키징 및 Java SE 플랫폼 확장</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Mambo" src="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><p class="site-author-name" itemprop="name">Mambo</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">99</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">149</span> <span class="site-state-item-name">tags</span></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/kdevkr" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kdevkr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:kdevkr@gmail.com" title="E-Mail → mailto:kdevkr@gmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ko" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div><div class="back-to-top animated" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://kdevkr.github.io/tls-offload/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/17937604?s=460&v=4"><meta itemprop="name" content="Mambo"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Mambo"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="TLS 오프로드 | Mambo"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">TLS 오프로드</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-09-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-09-01T00:00:00+09:00">2021-09-01</time></span></div></div></header><div class="post-body" itemprop="articleBody"><p>안녕하세요 Mambo 입니다.</p><p>오늘은 로드밸런서를 활용한 TLS 오프로드에 대해서 정리해보고자 합니다. 지난 <a href="../ssl-certificate">SSL 인증서</a>에서는 HTTPS를 웹 서비스에 적용하는 이유와 함께 SSL 인증서를 발급하고 TLS 핸드쉐이크를 어떤 방식으로 수행하는지를 확인했습니다. 이 글에서는 <strong>아마존 웹 서비스의 ELB(Elastic Load Balancing)에서 지원하는 TLS 핸드쉐이크 및 TLS 오프로딩 기능</strong>에 대해 알아보고 참고해야할 정보를 소개합니다.</p><h2 id="SSL-오프로드"><a href="#SSL-오프로드" class="headerlink" title="SSL 오프로드"></a>SSL 오프로드</h2><p><strong>TLS(SSL) 오프로드</strong>는 애플리케이션 서버에서 TLS 핸드쉐이크를 수행하지 않고 <strong>트래픽이 전달되기 전 로드밸런서에서 SSL 인증서를 관리하고 TLS 핸드쉐이크를 수행</strong>하는 것을 말합니다. 대부분의 웹 서비스는 애플리케이션 서버를 독립적으로 운용하지 않고 트래픽 규모에 따라 유연하게 확장하고 확장된 애플리케이션 서버에 트래픽을 균등하게 분산시키기 위하여 로드밸런서를 구성합니다. 아마존 웹 서비스의 ELB 로드밸런서 유형 중 NLB와 ALB는 SSL 인증서를 등록하고 클라이언트와 TLS 핸드쉐이크를 수행하여 트래픽이 EC2 인스턴스 또는 컨테이너로 전달하는 <strong>TLS 오프로딩 기능을 지원</strong>합니다.</p><h3 id="Mutual-TLS"><a href="#Mutual-TLS" class="headerlink" title="Mutual TLS"></a>Mutual TLS</h3><p>웹 서비스의 요구사항에 따라 애플리케이션 서버에서는 <strong>클라이언트의 X.509 인증서를 토대로 사용자 인증을 수행하고 요청을 처리</strong>할 수 있습니다. 이렇게 클라이언트와 애플리케이션 서버 모두 인증서를 전달하는 것을 <strong>Mutual TLS</strong>라고 합니다. 그리고 자바 기반의 애플리케이션 서버는 <strong>javax.servlet.request.X509Certificate</strong> 속성을 통해 <strong>X.509 인증서</strong>를 가져올 수 있습니다.</p><p>그러나 웹 요청이 로드밸런서에 의해 트래픽이 전달되는 경우 클라이언트 인증서를 포함하여 전달하는 것이 보장되지 않습니다. 일반적으로 Nginx를 로드밸런서를 사용하는 경우에는 요청 시 포함된 클라이언트의 인증서 정보가 <strong>X-SSL-CERT</strong>와 같은 <strong>비표준 헤더</strong>로 전달될 수 있도록 설정합니다. 이렇게 요청 헤더로 인증서를 애플리케이션 서버까지 전달하는 것은 애플리케이션 서버에서 클라이언트의 실제 아이피를 알기 위하여 사용되는 표준 헤더 <strong>X-Forwarded-For</strong>와 비슷한 목적으로 사용된다고 볼 수 있습니다.</p><h3 id="AWS-NLB"><a href="#AWS-NLB" class="headerlink" title="AWS NLB"></a>AWS NLB</h3><p>아마존 웹 서비스의 <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/network/introduction.html">NLB(Network Load Balancer)</a>는 <strong>L4 레벨의 ELB 로드밸런서 유형</strong>입니다. NLB는 L4 레벨에서 로드밸런싱을 수행하며 프로토콜과 포트를 기반으로 지정된 하나 이상의 대상 그룹으로 요청을 전달하기 때문에 대규모 트래픽을 빠르게 EC2 인스턴스로 전달되도록 지원합니다.</p><p><a target="_blank" rel="noopener" href="https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons">ELB의 로드밸런서 유형 비교</a>에서 나와있듯이 NLB는 TLS 오프로드를 지원하기 때문에 <strong>로드밸런서에 인증서를 등록하고 TLS 핸드쉐이크를 처리하도록 구성</strong>할 수 있게 됩니다. 다음과 같이 NLB의 리스너 설정 시 <strong>TLS 프로토콜</strong>을 선택하고 <strong>TLS 버전</strong>과 암호화 스위트 목록에 대한 <strong>보안 정책</strong> 그리고 <strong>SSL 인증서</strong>를 등록할 수 있습니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-01.png"></p><h4 id="ECC-인증서-미지원"><a href="#ECC-인증서-미지원" class="headerlink" title="ECC 인증서 미지원"></a>ECC 인증서 미지원</h4><p>TLS 오프로드를 지원한다고 나와있지만 <strong>모든 SSL 인증서를 지원하는 것은 아닙</strong>니다. 회사에서 사용중인 인증서와 같은 타원 곡선형 키를 사용하는 ECC 인증서를 등록하게 되면 아마존 웹 서비스로부터 알림을 받게되고 <strong>애플리케이션 서버로 트래픽이 전달되지 않는 상태</strong>가 될 수 있습니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-02.png"></p><p>NLB에 대한 리스너 설정 문서를 살펴보면 <strong>2048 이상의 비트를 사용하는 RSA 키 또는 EC 키로된 인증서를 지원하지 않는다</strong>라고 경고하고 있으며 문서를 살펴보기까지 이러한 정보를 확인할 수 있는 곳은 없었습니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-03.png"></p><p>의외로 많이 사용하고 있는 <strong>ECC 인증서에 대해서는 NLB에서 TLS 오프로드를 수행할 수 없기</strong> 때문에 애플리케이션 서버에서 SSL 인증서를 관리하고 TLS 핸드쉐이크를 수행해야합니다. 애플리케이션 서버 배포 시 Elastic Beanstalk을 사용하는 경우 <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-platform.html">Java SE 플랫폼</a>을 통해 EC2 인스턴스에 <strong>Nginx를 활용하여 역방향 프록시를 구성</strong>할 수 있기 때문에 반드시 애플리케이션 서버에서 TLS 핸드쉐이크를 수행해야하는 것은 아닙니다.</p><blockquote><p>회사에서 운영중인 웹 서비스는 Nginx를 사용하지 않고 NLB에서 애플리케이션 서버로 트래픽이 전달되도록 구성했었지만 애플리케이션 서버 규모가 커짐으로 인하여 내부적으로 동작하는 작업이 많아짐에 따라 TLS 핸드쉐이크 부하를 애플리케이션 서버에서 분리하기 위하여 Nginx에서 TLS 오프로드를 수행하도록 전환할 예정입니다.</p></blockquote><h3 id="AWS-ALB"><a href="#AWS-ALB" class="headerlink" title="AWS ALB"></a>AWS ALB</h3><p>ECC 인증서를 지원하지 않는 NLB와 다르게 ALB(Application Load Balancer)는 <strong>4096 비트 키 길이의 RSA 인증서와 ECDSA로 서명된 EC 인증서를 지원</strong>합니다. <strong>회사에서 운영중인 웹 서비스를 NLB에서 ALB로 전환하지 않는 이유</strong>는 완전한 마이크로서비스 아키텍처가 아니므로 <strong>경로 기반</strong>으로 별도의 애플리케이션 서버로 전달해야하는 <strong>요구사항이 없기</strong> 때문입니다. 이러한 이유로 인해 빠르게 로드밸런서에서 애플리케이션 서버로 트래픽이 전달되도록 NLB를 사용하고 있습니다.</p><p>IT 분야는 시간이 지나면서 기술이 점차 발전하고 있습니다. 아마존 웹 서비스가 제공하는 서비스 기능도 발전하고 있음을 확인할 수 있는데 2019년에 작성된 <a target="_blank" rel="noopener" href="https://lemontia.tistory.com/898">고정 세션 관련 글</a>에서는 NLB가 <strong>고정 세션 기능을 지원하지 않는다</strong>고 나와있지만 현재 ELB의 제품 비교표와 비교해보면 <strong>백엔드 암호화, 고정 세션 뿐만 아니라 다양한 기능을 지원</strong>하고 있습니다.</p><h4 id="ELB-TLSv1-3-미지원"><a href="#ELB-TLSv1-3-미지원" class="headerlink" title="ELB TLSv1.3 미지원"></a>ELB TLSv1.3 미지원</h4><p>아마존 웹 서비스의 ELB에서 TLS 오프로드 기능을 지원하지만 <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/application/create-https-listener.html#describe-ssl-policies">보안 정책</a>에 따라 TLS 핸드쉐이크를 수행하기 때문에 클라이언트는 TLS 1.3을 사용할 수 없습니다. <strong>TLS 1.3을 지원하기 위한 작업은 아직 진행중</strong>이므로 클라이언트에게 TLS 1.3을 지원하고자하는 경우에는 ELB에서 TLS 오프로드를 수행하도록 구성할 수 없고 NLB의 TCP 리스너를 설정하여 트래픽이 EC2 인스턴스로 전달되도록하고 <strong>EC2 인스턴스에 실행되어있는 Nginx를 통해 TLS 1.3을 사용할 수 있게 구성</strong>할 수 있습니다.</p><h2 id="Elastic-Beanstalk-TLS-오프로드"><a href="#Elastic-Beanstalk-TLS-오프로드" class="headerlink" title="Elastic Beanstalk TLS 오프로드"></a>Elastic Beanstalk TLS 오프로드</h2><p>ELB에서는 TLS 1.3을 지원하지 않으며 NLB에서는 ECC 인증서를 사용할 수 없다는 것을 알았으므로 <strong>Elastic Beanstalk</strong>으로 스프링 애플리케이션 배포 시 Nginx에서 SSL 인증서를 관리하고 <strong>클라이언트가 TLS 1.3 버전으로 TLS 핸드쉐이크를 수행할 수 있도록 할 수 있는가를 검증</strong>해보고 마무리 하겠습니다.</p><h3 id="Elastic-Beanstalk-Java-SE-플랫폼"><a href="#Elastic-Beanstalk-Java-SE-플랫폼" class="headerlink" title="Elastic Beanstalk Java SE 플랫폼"></a>Elastic Beanstalk Java SE 플랫폼</h3><p>스프링 애플리케이션을 배포하기 위해서는 Java SE 플랫폼 환경을 구성해야합니다. 이때, 샘플 애플리케이션으로 Beanstalk 환경을 시작하는 것이 좋습니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-04.png" alt="웹 서버 환경 선택"></p><p><img data-src="/images/posts/tls-offload/tls-offload-05.png" alt="샘플 애플리케이션으로 시작"></p><p>Beanstalk 환경 구성 시 로드밸런서를 설정하고 싶은 경우 <strong>추가 옵션 구성</strong>을 통해 사용자 정의 설정을 진행해야 합니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-06.png" alt="JVM 옵션 환경변수"></p><blockquote><p>배포하고 보니 오타가 있었네요 :)</p></blockquote><p><img data-src="/images/posts/tls-offload/tls-offload-07.png" alt="로드밸런싱 인스턴스"></p><p><img data-src="/images/posts/tls-offload/tls-offload-08.png" alt="NLB 선택 및 리스너 구성"></p><p>그리고 EC2 인스턴스 접근을 위한 키를 설정하는 등 부가 설정을 하고 환경을 생성하면 다음과 같이 샘플 애플리케이션이 배포되는 환경이 준비됩니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-09.png" alt="Java SE 플랫폼 환경 생성 완료"></p><blockquote><p>처음 환경을 구성할 때 오류가 발생하는 경우 Beanstalk에서는 환경 삭제 버튼이 활성화되지 않아 당황할 수 있으나 CloudFormation 서비스로 이동하여 Beanstalk 환경을 구성중인 스택을 삭제할 수 있습니다.</p></blockquote><h3 id="스프링-애플리케이션-패키징-및-Java-SE-플랫폼-확장"><a href="#스프링-애플리케이션-패키징-및-Java-SE-플랫폼-확장" class="headerlink" title="스프링 애플리케이션 패키징 및 Java SE 플랫폼 확장"></a>스프링 애플리케이션 패키징 및 Java SE 플랫폼 확장</h3><p>애플리케이션을 배포하기 위한 Java SE 플랫폼이 생성되었으니 스프링 애플리케이션을 패키징하여 <strong>Beanstalk에 배포하기 위한 소스 번들</strong> 파일을 만들어야 합니다. 소스 번들에는 패키징된 애플리케이션 Jar 파일과 함께 애플리케이션 실행를 위한 Procfile을 포함시켜야 합니다.</p><pre class="language-groovy" data-language="groovy"><div class="caption"><span>build.gradle</span></div><code class="language-groovy">task <span class="token function">procfile</span><span class="token punctuation">(</span>dependsOn<span class="token punctuation">:</span> bootJar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    doFirst <span class="token punctuation">&#123;</span>
        <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"build/libs"</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">"Procfile"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"web: java -Xmx1g -Dfile.encoding=UTF-8 -jar </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">bootJar<span class="token punctuation">.</span>archiveName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

task <span class="token function">awsbuild</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Zip<span class="token punctuation">,</span> dependsOn<span class="token punctuation">:</span> procfile<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    from <span class="token punctuation">(</span><span class="token string">'.beanstalk/.ebextensions'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.ebextensions'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'.beanstalk/.platform'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> into <span class="token string">'.platform'</span> <span class="token punctuation">&#125;</span>
    from <span class="token punctuation">(</span><span class="token string">'build/libs'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'Procfile'</span><span class="token punctuation">)</span>
        <span class="token function">include</span><span class="token punctuation">(</span>bootJar<span class="token punctuation">.</span>archiveName<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    baseName <span class="token operator">=</span> <span class="token string">'beanstalk'</span>
<span class="token punctuation">&#125;</span></code></pre><blockquote><p>자세한 내용은 <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/java-se-procfile.html">Procfile을 사용하여 애플리케이션 프로세스 구성</a>을 참고하세요.</p></blockquote><h4 id="Java-SE-플랫폼-확장-구성"><a href="#Java-SE-플랫폼-확장-구성" class="headerlink" title="Java SE 플랫폼 확장 구성"></a>Java SE 플랫폼 확장 구성</h4><p>Beanstalk는 <strong>.ebextensions</strong>와 <strong>.platform</strong>을 활용하여 EC2 인스턴스 환경을 확장할 수 있는 기능을 지원합니다. 우리는 HTTP로 실행되는 애플리케이션 서버와 함께 TLS 오프로드를 수행할 Nginx를 구성해야하므로 다음과 같이 <strong>구성 및 플랫폼 확장 파일을 생성</strong>합니다.</p><p><strong>Nginx에서 사용할 SSL 인증서 파일 생성</strong></p><pre class="language-yaml" data-language="yaml"><div class="caption"><span>beanstalk/.ebextensions/nginx-certificates.config</span></div><code class="language-yaml"><span class="token key atrule">files</span><span class="token punctuation">:</span>
    <span class="token key atrule">/etc/nginx/cert/server.crt</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----</span>
    <span class="token key atrule">/etc/nginx/cert/server.key</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN EC PARAMETERS-----
            #### PROTECTED ####
            -----END EC PARAMETERS-----
            -----BEGIN EC PRIVATE KEY-----
            #### PROTECTED ####
            -----END EC PRIVATE KEY-----</span>
    <span class="token key atrule">/etc/nginx/cert/server-ca-bundle</span><span class="token punctuation">:</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">"000400"</span>
        <span class="token key atrule">owner</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">group</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----
            -----BEGIN CERTIFICATE-----
            #### PROTECTED ####
            -----END CERTIFICATE-----</span>

<span class="token key atrule">commands</span><span class="token punctuation">:</span>
    <span class="token key atrule">00-chain-ca-bundle</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            cat server.crt server-ca-bundle > server-ca.pem
            chown nginx:nginx server-ca.pem
            chmod 400 server-ca.pem</span>
    <span class="token key atrule">99-remove-bak</span><span class="token punctuation">:</span>
        <span class="token key atrule">cwd</span><span class="token punctuation">:</span> /etc/nginx/cert
        <span class="token key atrule">command</span><span class="token punctuation">:</span> rm <span class="token punctuation">-</span>f <span class="token important">*.bak</span></code></pre><blockquote><p>회사 도메인에 대한 인증서이므로 인증서 내용은 마스킹 처리하였습니다.</p></blockquote><p><strong>Nginx 설정 파일 확장</strong></p><pre class="language-nginx" data-language="nginx"><div class="caption"><span>beanstalk/.platform/nginx/conf.d/elasticbeanstalk/00_application.conf</span></div><code class="language-nginx"><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>기본으로 만들어지는 00_application.conf 파일은 80 포트에 대하여 5000 포트로 전달되도록 구성하므로 443 포트로 리다이렉트하도록 확장합니다.</p><pre class="language-nginx" data-language="nginx"><div class="caption"><span>beanstalk/.platform/nginx/nginx.conf</span></div><code class="language-nginx"><span class="token directive"><span class="token keyword">user</span>                    nginx</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_log</span>               /var/log/nginx/error.log warn</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">pid</span>                     /var/run/nginx.pid</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_processes</span>        auto</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span>    <span class="token number">32768</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">use</span>  epoll</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">1024</span></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">include</span>         /etc/nginx/mime.types</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span>    application/octet-stream</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">log_format</span>      main    <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request</span>" '</span>
                            <span class="token string">'<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$http_referer</span>" '</span>
                            <span class="token string">'"<span class="token variable">$http_user_agent</span>" "<span class="token variable">$http_x_forwarded_for</span>"'</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">include</span> conf.d/*.conf</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_upgrade</span> <span class="token variable">$connection_upgrade</span></span> <span class="token punctuation">&#123;</span>
      <span class="token directive"><span class="token keyword">default</span>     <span class="token string">"upgrade"</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span>                <span class="token number">80</span> default_server</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">access_log</span>            /var/log/nginx/access.log main</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">client_body_timeout</span>   <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">keepalive_timeout</span>     <span class="token number">60</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip</span>                  <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip_comp_level</span>       <span class="token number">4</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">gzip_types</span>            text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript</span><span class="token punctuation">;</span>

        <span class="token comment"># Include the Elastic Beanstalk generated locations</span>
        <span class="token directive"><span class="token keyword">include</span> conf.d/elasticbeanstalk/*.conf</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>


    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">&#123;</span>
        <span class="token directive"><span class="token keyword">listen</span>                   <span class="token number">443</span> ssl default_server</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>              springboot</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate</span>          /etc/nginx/cert/server-ca.pem</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span>      /etc/nginx/cert/server.key</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_protocols</span>            TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_ciphers</span>              HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_verify_client</span>        optional_no_ca</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">&#123;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span>          http://127.0.0.1:5000</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_http_version</span>  1.1</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Connection          <span class="token variable">$connection_upgrade</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Upgrade             <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    Host                <span class="token variable">$host</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Real-IP           <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-Forwarded-For     <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_set_header</span>    X-SSL-CERT          <span class="token variable">$ssl_client_escaped_cert</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_buffering</span>     <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span></code></pre><blockquote><p>자세한 내용은 <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/platforms-linux-extend.html">Elastic Beanstalk Linux 플랫폼 확장</a>을 참고하세요. <a target="_blank" rel="noopener" href="https://github.com/awsdocs/elastic-beanstalk-samples">elastic-beanstalk-samples</a>처럼 샘플 파일도 공유되어있습니다.</p></blockquote><p>이제 샘플 애플리케이션 대신 우리가 준비한 애플리케이션 소스 번들을 업로드하면 Benstalk 엔진이 소스 번들을 추출하고 애플리케이션을 실행하게 됩니다. Route 53으로 Beanstalk 환경 주소를 DNS로 연결하고 접속해보면 다음과 같이 TLS 핸드쉐이크가 수행되었음을 확인할 수 있습니다.</p><p><img data-src="/images/posts/tls-offload/tls-offload-10.png"></p><p>NLB는 트래픽을 EC2 인스턴스의 443 포트로 전달했을 뿐 TLS 오프로드는 Nginx에서 수행하는 것으로 구성했기 때문에 브라우저에서는 TLS 1.3 버전으로 TLS 핸드쉐이크를 수행했습니다. 이렇게 <strong>아마존 웹 서비스에서 TLS 1.3을 지원하기 위해서는 NLB의 TCP 리스너와 Nginx의 TLS 오프로드를 활용하면 가능함을 검증</strong>했습니다.</p><h4 id="트러블슈팅"><a href="#트러블슈팅" class="headerlink" title="트러블슈팅"></a>트러블슈팅</h4><p>Elastic Beanstalk로 애플리케이션 배포하는 과정에서 생각보다 오류가 많을 수 있습니다. 이 내용은 <strong>Benstalk에서 애플리케이션 배포 시 발생하는 여러가지 문제를 해결하는데 도움이 되는 항목</strong>을 정리한 것입니다. 따라해보는 분들에게 도움이 되셨으면 하는 바램으로 공유합니다.</p><table><thead><tr><th>경로</th><th>용도</th><th></th></tr></thead><tbody><tr><td>&#x2F;etc&#x2F;nginx&#x2F;</td><td>Nginx 구성</td><td></td></tr><tr><td>&#x2F;var&#x2F;app&#x2F;current</td><td>애플리케이션 소스 번들 추출 경로</td><td></td></tr><tr><td>&#x2F;var&#x2F;log&#x2F;eb-engine.log</td><td>Beanstalk 로그</td><td></td></tr><tr><td>&#x2F;var&#x2F;log&#x2F;nginx</td><td>Nginx 로그</td><td></td></tr><tr><td>&#x2F;var&#x2F;log&#x2F;web.stdout.out</td><td>웹 애플리케이션 로그</td><td></td></tr></tbody></table><p><strong>Beanstalk 로그</strong>는 Beanstalk 엔진이 플랫폼 확장 파일들을 실행하고 성공했는지 여부를 기록합니다. 이 로그를 통해 어느 단계에서 오류가 발생하여 애플리케이션 배포 및 전환이 실패하였는지 확인할 수 있는 중요한 로그입니다. 그리고 나머지 항목을 통해 설정한 구성 및 확장 파일이 제대로 추출되어 복사되었는지 Nginx가 ELB에 의해 전달된 트래픽을 애플리케이션까지 전달할 수 있는지를 확인할 수 있습니다.</p><p>Nginx에 대해서 자세히 아는 것은 아니므로 설정 파일이 잘못된 부분이 있을 수 있으니 양해 바라며 잘못된 점은 패드백 주시면 감사하겠습니다.</p><p>감사합니다.</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Nginx/" rel="tag"># Nginx</a> <a href="/tags/TLS/" rel="tag"># TLS</a> <a href="/tags/ELB/" rel="tag"># ELB</a></div><div class="post-nav"><div class="post-nav-item"><a href="/ssl-certificate/" rel="prev" title="SSL 인증서"><i class="fa fa-chevron-left"></i> SSL 인증서</a></div><div class="post-nav-item"><a href="/elastic-beanstalk-s3-auth/" rel="next" title="Elastic Beanstalk S3 Authentication">Elastic Beanstalk S3 Authentication <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments giscus-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Mambo</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"unset",right:"15px",left:"unset",time:"0.5s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌗",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script><script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"kdevkr/kdevkr.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxNTQxNjA4OTA=","category":"Announcements","category_id":"DIC_kwDOCTBO-s4CYmQM","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"ko","input_position":"bottom","loading":"lazy"}</script><script>document.addEventListener("page:loaded",()=>{CONFIG.page.comments&&NexT.utils.loadComments(".giscus-container").then(()=>NexT.utils.getScript("https://giscus.app/client.js",{attributes:{async:!0,crossOrigin:"anonymous","data-repo":CONFIG.giscus.repo,"data-repo-id":CONFIG.giscus.repo_id,"data-category":CONFIG.giscus.category,"data-category-id":CONFIG.giscus.category_id,"data-mapping":CONFIG.giscus.mapping,"data-reactions-enabled":CONFIG.giscus.reactions_enabled,"data-emit-metadata":CONFIG.giscus.emit_metadata,"data-theme":CONFIG.giscus.theme,"data-lang":CONFIG.giscus.lang,"data-input-position":CONFIG.giscus.input_position,"data-loading":CONFIG.giscus.loading},parentNode:document.querySelector(".giscus-container")}))})</script></body></html>